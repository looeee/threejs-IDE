var __create = Object.create;
var __defProp = Object.defineProperty;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __markAsModule = (target) => __defProp(target, "__esModule", {value: true});
var __commonJS = (cb, mod) => () => (mod || cb((mod = {exports: {}}).exports, mod), mod.exports);
var __reExport = (target, module, desc) => {
  if (module && typeof module === "object" || typeof module === "function") {
    for (let key of __getOwnPropNames(module))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, {get: () => module[key], enumerable: !(desc = __getOwnPropDesc(module, key)) || desc.enumerable});
  }
  return target;
};
var __toModule = (module) => {
  return __reExport(__markAsModule(__defProp(module != null ? __create(__getProtoOf(module)) : {}, "default", module && module.__esModule && "default" in module ? {get: () => module.default, enumerable: true} : {value: module, enumerable: true})), module);
};

// node_modules/codemirror/lib/codemirror.js
var require_codemirror = __commonJS((exports, module) => {
  (function(global3, factory) {
    typeof exports === "object" && typeof module !== "undefined" ? module.exports = factory() : typeof define === "function" && define.amd ? define(factory) : (global3 = global3 || self, global3.CodeMirror = factory());
  })(exports, function() {
    "use strict";
    var userAgent = navigator.userAgent;
    var platform = navigator.platform;
    var gecko = /gecko\/\d/i.test(userAgent);
    var ie_upto10 = /MSIE \d/.test(userAgent);
    var ie_11up = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(userAgent);
    var edge = /Edge\/(\d+)/.exec(userAgent);
    var ie = ie_upto10 || ie_11up || edge;
    var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);
    var webkit = !edge && /WebKit\//.test(userAgent);
    var qtwebkit = webkit && /Qt\/\d+\.\d+/.test(userAgent);
    var chrome = !edge && /Chrome\//.test(userAgent);
    var presto = /Opera\//.test(userAgent);
    var safari = /Apple Computer/.test(navigator.vendor);
    var mac_geMountainLion = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(userAgent);
    var phantom = /PhantomJS/.test(userAgent);
    var ios = !edge && /AppleWebKit/.test(userAgent) && /Mobile\/\w+/.test(userAgent);
    var android = /Android/.test(userAgent);
    var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);
    var mac = ios || /Mac/.test(platform);
    var chromeOS = /\bCrOS\b/.test(userAgent);
    var windows = /win/i.test(platform);
    var presto_version = presto && userAgent.match(/Version\/(\d*\.\d*)/);
    if (presto_version) {
      presto_version = Number(presto_version[1]);
    }
    if (presto_version && presto_version >= 15) {
      presto = false;
      webkit = true;
    }
    var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));
    var captureRightClick = gecko || ie && ie_version >= 9;
    function classTest(cls) {
      return new RegExp("(^|\\s)" + cls + "(?:$|\\s)\\s*");
    }
    var rmClass = function(node, cls) {
      var current = node.className;
      var match = classTest(cls).exec(current);
      if (match) {
        var after = current.slice(match.index + match[0].length);
        node.className = current.slice(0, match.index) + (after ? match[1] + after : "");
      }
    };
    function removeChildren(e) {
      for (var count = e.childNodes.length; count > 0; --count) {
        e.removeChild(e.firstChild);
      }
      return e;
    }
    function removeChildrenAndAdd(parent, e) {
      return removeChildren(parent).appendChild(e);
    }
    function elt(tag, content, className, style) {
      var e = document.createElement(tag);
      if (className) {
        e.className = className;
      }
      if (style) {
        e.style.cssText = style;
      }
      if (typeof content == "string") {
        e.appendChild(document.createTextNode(content));
      } else if (content) {
        for (var i2 = 0; i2 < content.length; ++i2) {
          e.appendChild(content[i2]);
        }
      }
      return e;
    }
    function eltP(tag, content, className, style) {
      var e = elt(tag, content, className, style);
      e.setAttribute("role", "presentation");
      return e;
    }
    var range;
    if (document.createRange) {
      range = function(node, start, end, endNode) {
        var r = document.createRange();
        r.setEnd(endNode || node, end);
        r.setStart(node, start);
        return r;
      };
    } else {
      range = function(node, start, end) {
        var r = document.body.createTextRange();
        try {
          r.moveToElementText(node.parentNode);
        } catch (e) {
          return r;
        }
        r.collapse(true);
        r.moveEnd("character", end);
        r.moveStart("character", start);
        return r;
      };
    }
    function contains(parent, child) {
      if (child.nodeType == 3) {
        child = child.parentNode;
      }
      if (parent.contains) {
        return parent.contains(child);
      }
      do {
        if (child.nodeType == 11) {
          child = child.host;
        }
        if (child == parent) {
          return true;
        }
      } while (child = child.parentNode);
    }
    function activeElt() {
      var activeElement;
      try {
        activeElement = document.activeElement;
      } catch (e) {
        activeElement = document.body || null;
      }
      while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement) {
        activeElement = activeElement.shadowRoot.activeElement;
      }
      return activeElement;
    }
    function addClass(node, cls) {
      var current = node.className;
      if (!classTest(cls).test(current)) {
        node.className += (current ? " " : "") + cls;
      }
    }
    function joinClasses(a, b) {
      var as = a.split(" ");
      for (var i2 = 0; i2 < as.length; i2++) {
        if (as[i2] && !classTest(as[i2]).test(b)) {
          b += " " + as[i2];
        }
      }
      return b;
    }
    var selectInput = function(node) {
      node.select();
    };
    if (ios) {
      selectInput = function(node) {
        node.selectionStart = 0;
        node.selectionEnd = node.value.length;
      };
    } else if (ie) {
      selectInput = function(node) {
        try {
          node.select();
        } catch (_e) {
        }
      };
    }
    function bind(f) {
      var args = Array.prototype.slice.call(arguments, 1);
      return function() {
        return f.apply(null, args);
      };
    }
    function copyObj(obj, target, overwrite) {
      if (!target) {
        target = {};
      }
      for (var prop2 in obj) {
        if (obj.hasOwnProperty(prop2) && (overwrite !== false || !target.hasOwnProperty(prop2))) {
          target[prop2] = obj[prop2];
        }
      }
      return target;
    }
    function countColumn(string, end, tabSize, startIndex, startValue) {
      if (end == null) {
        end = string.search(/[^\s\u00a0]/);
        if (end == -1) {
          end = string.length;
        }
      }
      for (var i2 = startIndex || 0, n = startValue || 0; ; ) {
        var nextTab = string.indexOf("	", i2);
        if (nextTab < 0 || nextTab >= end) {
          return n + (end - i2);
        }
        n += nextTab - i2;
        n += tabSize - n % tabSize;
        i2 = nextTab + 1;
      }
    }
    var Delayed = function() {
      this.id = null;
      this.f = null;
      this.time = 0;
      this.handler = bind(this.onTimeout, this);
    };
    Delayed.prototype.onTimeout = function(self2) {
      self2.id = 0;
      if (self2.time <= +new Date()) {
        self2.f();
      } else {
        setTimeout(self2.handler, self2.time - +new Date());
      }
    };
    Delayed.prototype.set = function(ms, f) {
      this.f = f;
      var time = +new Date() + ms;
      if (!this.id || time < this.time) {
        clearTimeout(this.id);
        this.id = setTimeout(this.handler, ms);
        this.time = time;
      }
    };
    function indexOf(array, elt2) {
      for (var i2 = 0; i2 < array.length; ++i2) {
        if (array[i2] == elt2) {
          return i2;
        }
      }
      return -1;
    }
    var scrollerGap = 50;
    var Pass = {toString: function() {
      return "CodeMirror.Pass";
    }};
    var sel_dontScroll = {scroll: false}, sel_mouse = {origin: "*mouse"}, sel_move = {origin: "+move"};
    function findColumn(string, goal, tabSize) {
      for (var pos = 0, col = 0; ; ) {
        var nextTab = string.indexOf("	", pos);
        if (nextTab == -1) {
          nextTab = string.length;
        }
        var skipped = nextTab - pos;
        if (nextTab == string.length || col + skipped >= goal) {
          return pos + Math.min(skipped, goal - col);
        }
        col += nextTab - pos;
        col += tabSize - col % tabSize;
        pos = nextTab + 1;
        if (col >= goal) {
          return pos;
        }
      }
    }
    var spaceStrs = [""];
    function spaceStr(n) {
      while (spaceStrs.length <= n) {
        spaceStrs.push(lst(spaceStrs) + " ");
      }
      return spaceStrs[n];
    }
    function lst(arr) {
      return arr[arr.length - 1];
    }
    function map(array, f) {
      var out = [];
      for (var i2 = 0; i2 < array.length; i2++) {
        out[i2] = f(array[i2], i2);
      }
      return out;
    }
    function insertSorted(array, value, score) {
      var pos = 0, priority = score(value);
      while (pos < array.length && score(array[pos]) <= priority) {
        pos++;
      }
      array.splice(pos, 0, value);
    }
    function nothing() {
    }
    function createObj(base, props) {
      var inst;
      if (Object.create) {
        inst = Object.create(base);
      } else {
        nothing.prototype = base;
        inst = new nothing();
      }
      if (props) {
        copyObj(props, inst);
      }
      return inst;
    }
    var nonASCIISingleCaseWordChar = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;
    function isWordCharBasic(ch) {
      return /\w/.test(ch) || ch > "\x80" && (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch));
    }
    function isWordChar(ch, helper) {
      if (!helper) {
        return isWordCharBasic(ch);
      }
      if (helper.source.indexOf("\\w") > -1 && isWordCharBasic(ch)) {
        return true;
      }
      return helper.test(ch);
    }
    function isEmpty(obj) {
      for (var n in obj) {
        if (obj.hasOwnProperty(n) && obj[n]) {
          return false;
        }
      }
      return true;
    }
    var extendingChars = /[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
    function isExtendingChar(ch) {
      return ch.charCodeAt(0) >= 768 && extendingChars.test(ch);
    }
    function skipExtendingChars(str, pos, dir) {
      while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) {
        pos += dir;
      }
      return pos;
    }
    function findFirst(pred, from, to) {
      var dir = from > to ? -1 : 1;
      for (; ; ) {
        if (from == to) {
          return from;
        }
        var midF = (from + to) / 2, mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);
        if (mid == from) {
          return pred(mid) ? from : to;
        }
        if (pred(mid)) {
          to = mid;
        } else {
          from = mid + dir;
        }
      }
    }
    function iterateBidiSections(order, from, to, f) {
      if (!order) {
        return f(from, to, "ltr", 0);
      }
      var found = false;
      for (var i2 = 0; i2 < order.length; ++i2) {
        var part = order[i2];
        if (part.from < to && part.to > from || from == to && part.to == from) {
          f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? "rtl" : "ltr", i2);
          found = true;
        }
      }
      if (!found) {
        f(from, to, "ltr");
      }
    }
    var bidiOther = null;
    function getBidiPartAt(order, ch, sticky) {
      var found;
      bidiOther = null;
      for (var i2 = 0; i2 < order.length; ++i2) {
        var cur = order[i2];
        if (cur.from < ch && cur.to > ch) {
          return i2;
        }
        if (cur.to == ch) {
          if (cur.from != cur.to && sticky == "before") {
            found = i2;
          } else {
            bidiOther = i2;
          }
        }
        if (cur.from == ch) {
          if (cur.from != cur.to && sticky != "before") {
            found = i2;
          } else {
            bidiOther = i2;
          }
        }
      }
      return found != null ? found : bidiOther;
    }
    var bidiOrdering = function() {
      var lowTypes = "bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";
      var arabicTypes = "nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";
      function charType(code) {
        if (code <= 247) {
          return lowTypes.charAt(code);
        } else if (1424 <= code && code <= 1524) {
          return "R";
        } else if (1536 <= code && code <= 1785) {
          return arabicTypes.charAt(code - 1536);
        } else if (1774 <= code && code <= 2220) {
          return "r";
        } else if (8192 <= code && code <= 8203) {
          return "w";
        } else if (code == 8204) {
          return "b";
        } else {
          return "L";
        }
      }
      var bidiRE = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;
      var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;
      function BidiSpan(level, from, to) {
        this.level = level;
        this.from = from;
        this.to = to;
      }
      return function(str, direction) {
        var outerType = direction == "ltr" ? "L" : "R";
        if (str.length == 0 || direction == "ltr" && !bidiRE.test(str)) {
          return false;
        }
        var len = str.length, types = [];
        for (var i2 = 0; i2 < len; ++i2) {
          types.push(charType(str.charCodeAt(i2)));
        }
        for (var i$12 = 0, prev = outerType; i$12 < len; ++i$12) {
          var type = types[i$12];
          if (type == "m") {
            types[i$12] = prev;
          } else {
            prev = type;
          }
        }
        for (var i$22 = 0, cur = outerType; i$22 < len; ++i$22) {
          var type$1 = types[i$22];
          if (type$1 == "1" && cur == "r") {
            types[i$22] = "n";
          } else if (isStrong.test(type$1)) {
            cur = type$1;
            if (type$1 == "r") {
              types[i$22] = "R";
            }
          }
        }
        for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {
          var type$2 = types[i$3];
          if (type$2 == "+" && prev$1 == "1" && types[i$3 + 1] == "1") {
            types[i$3] = "1";
          } else if (type$2 == "," && prev$1 == types[i$3 + 1] && (prev$1 == "1" || prev$1 == "n")) {
            types[i$3] = prev$1;
          }
          prev$1 = type$2;
        }
        for (var i$4 = 0; i$4 < len; ++i$4) {
          var type$3 = types[i$4];
          if (type$3 == ",") {
            types[i$4] = "N";
          } else if (type$3 == "%") {
            var end = void 0;
            for (end = i$4 + 1; end < len && types[end] == "%"; ++end) {
            }
            var replace = i$4 && types[i$4 - 1] == "!" || end < len && types[end] == "1" ? "1" : "N";
            for (var j = i$4; j < end; ++j) {
              types[j] = replace;
            }
            i$4 = end - 1;
          }
        }
        for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {
          var type$4 = types[i$5];
          if (cur$1 == "L" && type$4 == "1") {
            types[i$5] = "L";
          } else if (isStrong.test(type$4)) {
            cur$1 = type$4;
          }
        }
        for (var i$6 = 0; i$6 < len; ++i$6) {
          if (isNeutral.test(types[i$6])) {
            var end$1 = void 0;
            for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {
            }
            var before = (i$6 ? types[i$6 - 1] : outerType) == "L";
            var after = (end$1 < len ? types[end$1] : outerType) == "L";
            var replace$1 = before == after ? before ? "L" : "R" : outerType;
            for (var j$1 = i$6; j$1 < end$1; ++j$1) {
              types[j$1] = replace$1;
            }
            i$6 = end$1 - 1;
          }
        }
        var order = [], m;
        for (var i$7 = 0; i$7 < len; ) {
          if (countsAsLeft.test(types[i$7])) {
            var start = i$7;
            for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {
            }
            order.push(new BidiSpan(0, start, i$7));
          } else {
            var pos = i$7, at = order.length, isRTL = direction == "rtl" ? 1 : 0;
            for (++i$7; i$7 < len && types[i$7] != "L"; ++i$7) {
            }
            for (var j$2 = pos; j$2 < i$7; ) {
              if (countsAsNum.test(types[j$2])) {
                if (pos < j$2) {
                  order.splice(at, 0, new BidiSpan(1, pos, j$2));
                  at += isRTL;
                }
                var nstart = j$2;
                for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {
                }
                order.splice(at, 0, new BidiSpan(2, nstart, j$2));
                at += isRTL;
                pos = j$2;
              } else {
                ++j$2;
              }
            }
            if (pos < i$7) {
              order.splice(at, 0, new BidiSpan(1, pos, i$7));
            }
          }
        }
        if (direction == "ltr") {
          if (order[0].level == 1 && (m = str.match(/^\s+/))) {
            order[0].from = m[0].length;
            order.unshift(new BidiSpan(0, 0, m[0].length));
          }
          if (lst(order).level == 1 && (m = str.match(/\s+$/))) {
            lst(order).to -= m[0].length;
            order.push(new BidiSpan(0, len - m[0].length, len));
          }
        }
        return direction == "rtl" ? order.reverse() : order;
      };
    }();
    function getOrder(line, direction) {
      var order = line.order;
      if (order == null) {
        order = line.order = bidiOrdering(line.text, direction);
      }
      return order;
    }
    var noHandlers = [];
    var on = function(emitter, type, f) {
      if (emitter.addEventListener) {
        emitter.addEventListener(type, f, false);
      } else if (emitter.attachEvent) {
        emitter.attachEvent("on" + type, f);
      } else {
        var map2 = emitter._handlers || (emitter._handlers = {});
        map2[type] = (map2[type] || noHandlers).concat(f);
      }
    };
    function getHandlers(emitter, type) {
      return emitter._handlers && emitter._handlers[type] || noHandlers;
    }
    function off(emitter, type, f) {
      if (emitter.removeEventListener) {
        emitter.removeEventListener(type, f, false);
      } else if (emitter.detachEvent) {
        emitter.detachEvent("on" + type, f);
      } else {
        var map2 = emitter._handlers, arr = map2 && map2[type];
        if (arr) {
          var index = indexOf(arr, f);
          if (index > -1) {
            map2[type] = arr.slice(0, index).concat(arr.slice(index + 1));
          }
        }
      }
    }
    function signal(emitter, type) {
      var handlers = getHandlers(emitter, type);
      if (!handlers.length) {
        return;
      }
      var args = Array.prototype.slice.call(arguments, 2);
      for (var i2 = 0; i2 < handlers.length; ++i2) {
        handlers[i2].apply(null, args);
      }
    }
    function signalDOMEvent(cm, e, override) {
      if (typeof e == "string") {
        e = {type: e, preventDefault: function() {
          this.defaultPrevented = true;
        }};
      }
      signal(cm, override || e.type, cm, e);
      return e_defaultPrevented(e) || e.codemirrorIgnore;
    }
    function signalCursorActivity(cm) {
      var arr = cm._handlers && cm._handlers.cursorActivity;
      if (!arr) {
        return;
      }
      var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);
      for (var i2 = 0; i2 < arr.length; ++i2) {
        if (indexOf(set, arr[i2]) == -1) {
          set.push(arr[i2]);
        }
      }
    }
    function hasHandler(emitter, type) {
      return getHandlers(emitter, type).length > 0;
    }
    function eventMixin(ctor) {
      ctor.prototype.on = function(type, f) {
        on(this, type, f);
      };
      ctor.prototype.off = function(type, f) {
        off(this, type, f);
      };
    }
    function e_preventDefault(e) {
      if (e.preventDefault) {
        e.preventDefault();
      } else {
        e.returnValue = false;
      }
    }
    function e_stopPropagation(e) {
      if (e.stopPropagation) {
        e.stopPropagation();
      } else {
        e.cancelBubble = true;
      }
    }
    function e_defaultPrevented(e) {
      return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false;
    }
    function e_stop(e) {
      e_preventDefault(e);
      e_stopPropagation(e);
    }
    function e_target(e) {
      return e.target || e.srcElement;
    }
    function e_button(e) {
      var b = e.which;
      if (b == null) {
        if (e.button & 1) {
          b = 1;
        } else if (e.button & 2) {
          b = 3;
        } else if (e.button & 4) {
          b = 2;
        }
      }
      if (mac && e.ctrlKey && b == 1) {
        b = 3;
      }
      return b;
    }
    var dragAndDrop = function() {
      if (ie && ie_version < 9) {
        return false;
      }
      var div = elt("div");
      return "draggable" in div || "dragDrop" in div;
    }();
    var zwspSupported;
    function zeroWidthElement(measure) {
      if (zwspSupported == null) {
        var test = elt("span", "\u200B");
        removeChildrenAndAdd(measure, elt("span", [test, document.createTextNode("x")]));
        if (measure.firstChild.offsetHeight != 0) {
          zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8);
        }
      }
      var node = zwspSupported ? elt("span", "\u200B") : elt("span", "\xA0", null, "display: inline-block; width: 1px; margin-right: -1px");
      node.setAttribute("cm-text", "");
      return node;
    }
    var badBidiRects;
    function hasBadBidiRects(measure) {
      if (badBidiRects != null) {
        return badBidiRects;
      }
      var txt = removeChildrenAndAdd(measure, document.createTextNode("A\u062EA"));
      var r0 = range(txt, 0, 1).getBoundingClientRect();
      var r1 = range(txt, 1, 2).getBoundingClientRect();
      removeChildren(measure);
      if (!r0 || r0.left == r0.right) {
        return false;
      }
      return badBidiRects = r1.right - r0.right < 3;
    }
    var splitLinesAuto = "\n\nb".split(/\n/).length != 3 ? function(string) {
      var pos = 0, result = [], l = string.length;
      while (pos <= l) {
        var nl = string.indexOf("\n", pos);
        if (nl == -1) {
          nl = string.length;
        }
        var line = string.slice(pos, string.charAt(nl - 1) == "\r" ? nl - 1 : nl);
        var rt = line.indexOf("\r");
        if (rt != -1) {
          result.push(line.slice(0, rt));
          pos += rt + 1;
        } else {
          result.push(line);
          pos = nl + 1;
        }
      }
      return result;
    } : function(string) {
      return string.split(/\r\n?|\n/);
    };
    var hasSelection = window.getSelection ? function(te) {
      try {
        return te.selectionStart != te.selectionEnd;
      } catch (e) {
        return false;
      }
    } : function(te) {
      var range2;
      try {
        range2 = te.ownerDocument.selection.createRange();
      } catch (e) {
      }
      if (!range2 || range2.parentElement() != te) {
        return false;
      }
      return range2.compareEndPoints("StartToEnd", range2) != 0;
    };
    var hasCopyEvent = function() {
      var e = elt("div");
      if ("oncopy" in e) {
        return true;
      }
      e.setAttribute("oncopy", "return;");
      return typeof e.oncopy == "function";
    }();
    var badZoomedRects = null;
    function hasBadZoomedRects(measure) {
      if (badZoomedRects != null) {
        return badZoomedRects;
      }
      var node = removeChildrenAndAdd(measure, elt("span", "x"));
      var normal = node.getBoundingClientRect();
      var fromRange = range(node, 0, 1).getBoundingClientRect();
      return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1;
    }
    var modes = {}, mimeModes = {};
    function defineMode(name, mode) {
      if (arguments.length > 2) {
        mode.dependencies = Array.prototype.slice.call(arguments, 2);
      }
      modes[name] = mode;
    }
    function defineMIME(mime, spec) {
      mimeModes[mime] = spec;
    }
    function resolveMode(spec) {
      if (typeof spec == "string" && mimeModes.hasOwnProperty(spec)) {
        spec = mimeModes[spec];
      } else if (spec && typeof spec.name == "string" && mimeModes.hasOwnProperty(spec.name)) {
        var found = mimeModes[spec.name];
        if (typeof found == "string") {
          found = {name: found};
        }
        spec = createObj(found, spec);
        spec.name = found.name;
      } else if (typeof spec == "string" && /^[\w\-]+\/[\w\-]+\+xml$/.test(spec)) {
        return resolveMode("application/xml");
      } else if (typeof spec == "string" && /^[\w\-]+\/[\w\-]+\+json$/.test(spec)) {
        return resolveMode("application/json");
      }
      if (typeof spec == "string") {
        return {name: spec};
      } else {
        return spec || {name: "null"};
      }
    }
    function getMode(options, spec) {
      spec = resolveMode(spec);
      var mfactory = modes[spec.name];
      if (!mfactory) {
        return getMode(options, "text/plain");
      }
      var modeObj = mfactory(options, spec);
      if (modeExtensions.hasOwnProperty(spec.name)) {
        var exts = modeExtensions[spec.name];
        for (var prop2 in exts) {
          if (!exts.hasOwnProperty(prop2)) {
            continue;
          }
          if (modeObj.hasOwnProperty(prop2)) {
            modeObj["_" + prop2] = modeObj[prop2];
          }
          modeObj[prop2] = exts[prop2];
        }
      }
      modeObj.name = spec.name;
      if (spec.helperType) {
        modeObj.helperType = spec.helperType;
      }
      if (spec.modeProps) {
        for (var prop$1 in spec.modeProps) {
          modeObj[prop$1] = spec.modeProps[prop$1];
        }
      }
      return modeObj;
    }
    var modeExtensions = {};
    function extendMode(mode, properties) {
      var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : modeExtensions[mode] = {};
      copyObj(properties, exts);
    }
    function copyState(mode, state) {
      if (state === true) {
        return state;
      }
      if (mode.copyState) {
        return mode.copyState(state);
      }
      var nstate = {};
      for (var n in state) {
        var val = state[n];
        if (val instanceof Array) {
          val = val.concat([]);
        }
        nstate[n] = val;
      }
      return nstate;
    }
    function innerMode(mode, state) {
      var info;
      while (mode.innerMode) {
        info = mode.innerMode(state);
        if (!info || info.mode == mode) {
          break;
        }
        state = info.state;
        mode = info.mode;
      }
      return info || {mode, state};
    }
    function startState(mode, a1, a2) {
      return mode.startState ? mode.startState(a1, a2) : true;
    }
    var StringStream = function(string, tabSize, lineOracle) {
      this.pos = this.start = 0;
      this.string = string;
      this.tabSize = tabSize || 8;
      this.lastColumnPos = this.lastColumnValue = 0;
      this.lineStart = 0;
      this.lineOracle = lineOracle;
    };
    StringStream.prototype.eol = function() {
      return this.pos >= this.string.length;
    };
    StringStream.prototype.sol = function() {
      return this.pos == this.lineStart;
    };
    StringStream.prototype.peek = function() {
      return this.string.charAt(this.pos) || void 0;
    };
    StringStream.prototype.next = function() {
      if (this.pos < this.string.length) {
        return this.string.charAt(this.pos++);
      }
    };
    StringStream.prototype.eat = function(match) {
      var ch = this.string.charAt(this.pos);
      var ok;
      if (typeof match == "string") {
        ok = ch == match;
      } else {
        ok = ch && (match.test ? match.test(ch) : match(ch));
      }
      if (ok) {
        ++this.pos;
        return ch;
      }
    };
    StringStream.prototype.eatWhile = function(match) {
      var start = this.pos;
      while (this.eat(match)) {
      }
      return this.pos > start;
    };
    StringStream.prototype.eatSpace = function() {
      var start = this.pos;
      while (/[\s\u00a0]/.test(this.string.charAt(this.pos))) {
        ++this.pos;
      }
      return this.pos > start;
    };
    StringStream.prototype.skipToEnd = function() {
      this.pos = this.string.length;
    };
    StringStream.prototype.skipTo = function(ch) {
      var found = this.string.indexOf(ch, this.pos);
      if (found > -1) {
        this.pos = found;
        return true;
      }
    };
    StringStream.prototype.backUp = function(n) {
      this.pos -= n;
    };
    StringStream.prototype.column = function() {
      if (this.lastColumnPos < this.start) {
        this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);
        this.lastColumnPos = this.start;
      }
      return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);
    };
    StringStream.prototype.indentation = function() {
      return countColumn(this.string, null, this.tabSize) - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);
    };
    StringStream.prototype.match = function(pattern, consume, caseInsensitive) {
      if (typeof pattern == "string") {
        var cased = function(str) {
          return caseInsensitive ? str.toLowerCase() : str;
        };
        var substr = this.string.substr(this.pos, pattern.length);
        if (cased(substr) == cased(pattern)) {
          if (consume !== false) {
            this.pos += pattern.length;
          }
          return true;
        }
      } else {
        var match = this.string.slice(this.pos).match(pattern);
        if (match && match.index > 0) {
          return null;
        }
        if (match && consume !== false) {
          this.pos += match[0].length;
        }
        return match;
      }
    };
    StringStream.prototype.current = function() {
      return this.string.slice(this.start, this.pos);
    };
    StringStream.prototype.hideFirstChars = function(n, inner) {
      this.lineStart += n;
      try {
        return inner();
      } finally {
        this.lineStart -= n;
      }
    };
    StringStream.prototype.lookAhead = function(n) {
      var oracle = this.lineOracle;
      return oracle && oracle.lookAhead(n);
    };
    StringStream.prototype.baseToken = function() {
      var oracle = this.lineOracle;
      return oracle && oracle.baseToken(this.pos);
    };
    function getLine(doc, n) {
      n -= doc.first;
      if (n < 0 || n >= doc.size) {
        throw new Error("There is no line " + (n + doc.first) + " in the document.");
      }
      var chunk = doc;
      while (!chunk.lines) {
        for (var i2 = 0; ; ++i2) {
          var child = chunk.children[i2], sz = child.chunkSize();
          if (n < sz) {
            chunk = child;
            break;
          }
          n -= sz;
        }
      }
      return chunk.lines[n];
    }
    function getBetween(doc, start, end) {
      var out = [], n = start.line;
      doc.iter(start.line, end.line + 1, function(line) {
        var text = line.text;
        if (n == end.line) {
          text = text.slice(0, end.ch);
        }
        if (n == start.line) {
          text = text.slice(start.ch);
        }
        out.push(text);
        ++n;
      });
      return out;
    }
    function getLines(doc, from, to) {
      var out = [];
      doc.iter(from, to, function(line) {
        out.push(line.text);
      });
      return out;
    }
    function updateLineHeight(line, height) {
      var diff = height - line.height;
      if (diff) {
        for (var n = line; n; n = n.parent) {
          n.height += diff;
        }
      }
    }
    function lineNo(line) {
      if (line.parent == null) {
        return null;
      }
      var cur = line.parent, no = indexOf(cur.lines, line);
      for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {
        for (var i2 = 0; ; ++i2) {
          if (chunk.children[i2] == cur) {
            break;
          }
          no += chunk.children[i2].chunkSize();
        }
      }
      return no + cur.first;
    }
    function lineAtHeight(chunk, h) {
      var n = chunk.first;
      outer:
        do {
          for (var i$12 = 0; i$12 < chunk.children.length; ++i$12) {
            var child = chunk.children[i$12], ch = child.height;
            if (h < ch) {
              chunk = child;
              continue outer;
            }
            h -= ch;
            n += child.chunkSize();
          }
          return n;
        } while (!chunk.lines);
      var i2 = 0;
      for (; i2 < chunk.lines.length; ++i2) {
        var line = chunk.lines[i2], lh = line.height;
        if (h < lh) {
          break;
        }
        h -= lh;
      }
      return n + i2;
    }
    function isLine(doc, l) {
      return l >= doc.first && l < doc.first + doc.size;
    }
    function lineNumberFor(options, i2) {
      return String(options.lineNumberFormatter(i2 + options.firstLineNumber));
    }
    function Pos(line, ch, sticky) {
      if (sticky === void 0)
        sticky = null;
      if (!(this instanceof Pos)) {
        return new Pos(line, ch, sticky);
      }
      this.line = line;
      this.ch = ch;
      this.sticky = sticky;
    }
    function cmp(a, b) {
      return a.line - b.line || a.ch - b.ch;
    }
    function equalCursorPos(a, b) {
      return a.sticky == b.sticky && cmp(a, b) == 0;
    }
    function copyPos(x) {
      return Pos(x.line, x.ch);
    }
    function maxPos(a, b) {
      return cmp(a, b) < 0 ? b : a;
    }
    function minPos(a, b) {
      return cmp(a, b) < 0 ? a : b;
    }
    function clipLine(doc, n) {
      return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));
    }
    function clipPos(doc, pos) {
      if (pos.line < doc.first) {
        return Pos(doc.first, 0);
      }
      var last = doc.first + doc.size - 1;
      if (pos.line > last) {
        return Pos(last, getLine(doc, last).text.length);
      }
      return clipToLen(pos, getLine(doc, pos.line).text.length);
    }
    function clipToLen(pos, linelen) {
      var ch = pos.ch;
      if (ch == null || ch > linelen) {
        return Pos(pos.line, linelen);
      } else if (ch < 0) {
        return Pos(pos.line, 0);
      } else {
        return pos;
      }
    }
    function clipPosArray(doc, array) {
      var out = [];
      for (var i2 = 0; i2 < array.length; i2++) {
        out[i2] = clipPos(doc, array[i2]);
      }
      return out;
    }
    var SavedContext = function(state, lookAhead) {
      this.state = state;
      this.lookAhead = lookAhead;
    };
    var Context = function(doc, state, line, lookAhead) {
      this.state = state;
      this.doc = doc;
      this.line = line;
      this.maxLookAhead = lookAhead || 0;
      this.baseTokens = null;
      this.baseTokenPos = 1;
    };
    Context.prototype.lookAhead = function(n) {
      var line = this.doc.getLine(this.line + n);
      if (line != null && n > this.maxLookAhead) {
        this.maxLookAhead = n;
      }
      return line;
    };
    Context.prototype.baseToken = function(n) {
      if (!this.baseTokens) {
        return null;
      }
      while (this.baseTokens[this.baseTokenPos] <= n) {
        this.baseTokenPos += 2;
      }
      var type = this.baseTokens[this.baseTokenPos + 1];
      return {
        type: type && type.replace(/( |^)overlay .*/, ""),
        size: this.baseTokens[this.baseTokenPos] - n
      };
    };
    Context.prototype.nextLine = function() {
      this.line++;
      if (this.maxLookAhead > 0) {
        this.maxLookAhead--;
      }
    };
    Context.fromSaved = function(doc, saved, line) {
      if (saved instanceof SavedContext) {
        return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead);
      } else {
        return new Context(doc, copyState(doc.mode, saved), line);
      }
    };
    Context.prototype.save = function(copy) {
      var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;
      return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state;
    };
    function highlightLine(cm, line, context, forceToEnd) {
      var st = [cm.state.modeGen], lineClasses = {};
      runMode(cm, line.text, cm.doc.mode, context, function(end, style) {
        return st.push(end, style);
      }, lineClasses, forceToEnd);
      var state = context.state;
      var loop = function(o2) {
        context.baseTokens = st;
        var overlay = cm.state.overlays[o2], i2 = 1, at = 0;
        context.state = true;
        runMode(cm, line.text, overlay.mode, context, function(end, style) {
          var start = i2;
          while (at < end) {
            var i_end = st[i2];
            if (i_end > end) {
              st.splice(i2, 1, end, st[i2 + 1], i_end);
            }
            i2 += 2;
            at = Math.min(end, i_end);
          }
          if (!style) {
            return;
          }
          if (overlay.opaque) {
            st.splice(start, i2 - start, end, "overlay " + style);
            i2 = start + 2;
          } else {
            for (; start < i2; start += 2) {
              var cur = st[start + 1];
              st[start + 1] = (cur ? cur + " " : "") + "overlay " + style;
            }
          }
        }, lineClasses);
        context.state = state;
        context.baseTokens = null;
        context.baseTokenPos = 1;
      };
      for (var o = 0; o < cm.state.overlays.length; ++o)
        loop(o);
      return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null};
    }
    function getLineStyles(cm, line, updateFrontier) {
      if (!line.styles || line.styles[0] != cm.state.modeGen) {
        var context = getContextBefore(cm, lineNo(line));
        var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);
        var result = highlightLine(cm, line, context);
        if (resetState) {
          context.state = resetState;
        }
        line.stateAfter = context.save(!resetState);
        line.styles = result.styles;
        if (result.classes) {
          line.styleClasses = result.classes;
        } else if (line.styleClasses) {
          line.styleClasses = null;
        }
        if (updateFrontier === cm.doc.highlightFrontier) {
          cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier);
        }
      }
      return line.styles;
    }
    function getContextBefore(cm, n, precise) {
      var doc = cm.doc, display = cm.display;
      if (!doc.mode.startState) {
        return new Context(doc, true, n);
      }
      var start = findStartLine(cm, n, precise);
      var saved = start > doc.first && getLine(doc, start - 1).stateAfter;
      var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);
      doc.iter(start, n, function(line) {
        processLine(cm, line.text, context);
        var pos = context.line;
        line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;
        context.nextLine();
      });
      if (precise) {
        doc.modeFrontier = context.line;
      }
      return context;
    }
    function processLine(cm, text, context, startAt) {
      var mode = cm.doc.mode;
      var stream = new StringStream(text, cm.options.tabSize, context);
      stream.start = stream.pos = startAt || 0;
      if (text == "") {
        callBlankLine(mode, context.state);
      }
      while (!stream.eol()) {
        readToken(mode, stream, context.state);
        stream.start = stream.pos;
      }
    }
    function callBlankLine(mode, state) {
      if (mode.blankLine) {
        return mode.blankLine(state);
      }
      if (!mode.innerMode) {
        return;
      }
      var inner = innerMode(mode, state);
      if (inner.mode.blankLine) {
        return inner.mode.blankLine(inner.state);
      }
    }
    function readToken(mode, stream, state, inner) {
      for (var i2 = 0; i2 < 10; i2++) {
        if (inner) {
          inner[0] = innerMode(mode, state).mode;
        }
        var style = mode.token(stream, state);
        if (stream.pos > stream.start) {
          return style;
        }
      }
      throw new Error("Mode " + mode.name + " failed to advance stream.");
    }
    var Token = function(stream, type, state) {
      this.start = stream.start;
      this.end = stream.pos;
      this.string = stream.current();
      this.type = type || null;
      this.state = state;
    };
    function takeToken(cm, pos, precise, asArray) {
      var doc = cm.doc, mode = doc.mode, style;
      pos = clipPos(doc, pos);
      var line = getLine(doc, pos.line), context = getContextBefore(cm, pos.line, precise);
      var stream = new StringStream(line.text, cm.options.tabSize, context), tokens;
      if (asArray) {
        tokens = [];
      }
      while ((asArray || stream.pos < pos.ch) && !stream.eol()) {
        stream.start = stream.pos;
        style = readToken(mode, stream, context.state);
        if (asArray) {
          tokens.push(new Token(stream, style, copyState(doc.mode, context.state)));
        }
      }
      return asArray ? tokens : new Token(stream, style, context.state);
    }
    function extractLineClasses(type, output) {
      if (type) {
        for (; ; ) {
          var lineClass = type.match(/(?:^|\s+)line-(background-)?(\S+)/);
          if (!lineClass) {
            break;
          }
          type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);
          var prop2 = lineClass[1] ? "bgClass" : "textClass";
          if (output[prop2] == null) {
            output[prop2] = lineClass[2];
          } else if (!new RegExp("(?:^|\\s)" + lineClass[2] + "(?:$|\\s)").test(output[prop2])) {
            output[prop2] += " " + lineClass[2];
          }
        }
      }
      return type;
    }
    function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {
      var flattenSpans = mode.flattenSpans;
      if (flattenSpans == null) {
        flattenSpans = cm.options.flattenSpans;
      }
      var curStart = 0, curStyle = null;
      var stream = new StringStream(text, cm.options.tabSize, context), style;
      var inner = cm.options.addModeClass && [null];
      if (text == "") {
        extractLineClasses(callBlankLine(mode, context.state), lineClasses);
      }
      while (!stream.eol()) {
        if (stream.pos > cm.options.maxHighlightLength) {
          flattenSpans = false;
          if (forceToEnd) {
            processLine(cm, text, context, stream.pos);
          }
          stream.pos = text.length;
          style = null;
        } else {
          style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);
        }
        if (inner) {
          var mName = inner[0].name;
          if (mName) {
            style = "m-" + (style ? mName + " " + style : mName);
          }
        }
        if (!flattenSpans || curStyle != style) {
          while (curStart < stream.start) {
            curStart = Math.min(stream.start, curStart + 5e3);
            f(curStart, curStyle);
          }
          curStyle = style;
        }
        stream.start = stream.pos;
      }
      while (curStart < stream.pos) {
        var pos = Math.min(stream.pos, curStart + 5e3);
        f(pos, curStyle);
        curStart = pos;
      }
    }
    function findStartLine(cm, n, precise) {
      var minindent, minline, doc = cm.doc;
      var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1e3 : 100);
      for (var search = n; search > lim; --search) {
        if (search <= doc.first) {
          return doc.first;
        }
        var line = getLine(doc, search - 1), after = line.stateAfter;
        if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier)) {
          return search;
        }
        var indented = countColumn(line.text, null, cm.options.tabSize);
        if (minline == null || minindent > indented) {
          minline = search - 1;
          minindent = indented;
        }
      }
      return minline;
    }
    function retreatFrontier(doc, n) {
      doc.modeFrontier = Math.min(doc.modeFrontier, n);
      if (doc.highlightFrontier < n - 10) {
        return;
      }
      var start = doc.first;
      for (var line = n - 1; line > start; line--) {
        var saved = getLine(doc, line).stateAfter;
        if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {
          start = line + 1;
          break;
        }
      }
      doc.highlightFrontier = Math.min(doc.highlightFrontier, start);
    }
    var sawReadOnlySpans = false, sawCollapsedSpans = false;
    function seeReadOnlySpans() {
      sawReadOnlySpans = true;
    }
    function seeCollapsedSpans() {
      sawCollapsedSpans = true;
    }
    function MarkedSpan(marker, from, to) {
      this.marker = marker;
      this.from = from;
      this.to = to;
    }
    function getMarkedSpanFor(spans, marker) {
      if (spans) {
        for (var i2 = 0; i2 < spans.length; ++i2) {
          var span = spans[i2];
          if (span.marker == marker) {
            return span;
          }
        }
      }
    }
    function removeMarkedSpan(spans, span) {
      var r;
      for (var i2 = 0; i2 < spans.length; ++i2) {
        if (spans[i2] != span) {
          (r || (r = [])).push(spans[i2]);
        }
      }
      return r;
    }
    function addMarkedSpan(line, span) {
      line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];
      span.marker.attachLine(line);
    }
    function markedSpansBefore(old, startCh, isInsert) {
      var nw;
      if (old) {
        for (var i2 = 0; i2 < old.length; ++i2) {
          var span = old[i2], marker = span.marker;
          var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);
          if (startsBefore || span.from == startCh && marker.type == "bookmark" && (!isInsert || !span.marker.insertLeft)) {
            var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);
            (nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));
          }
        }
      }
      return nw;
    }
    function markedSpansAfter(old, endCh, isInsert) {
      var nw;
      if (old) {
        for (var i2 = 0; i2 < old.length; ++i2) {
          var span = old[i2], marker = span.marker;
          var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);
          if (endsAfter || span.from == endCh && marker.type == "bookmark" && (!isInsert || span.marker.insertLeft)) {
            var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);
            (nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh, span.to == null ? null : span.to - endCh));
          }
        }
      }
      return nw;
    }
    function stretchSpansOverChange(doc, change) {
      if (change.full) {
        return null;
      }
      var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;
      var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;
      if (!oldFirst && !oldLast) {
        return null;
      }
      var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;
      var first = markedSpansBefore(oldFirst, startCh, isInsert);
      var last = markedSpansAfter(oldLast, endCh, isInsert);
      var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);
      if (first) {
        for (var i2 = 0; i2 < first.length; ++i2) {
          var span = first[i2];
          if (span.to == null) {
            var found = getMarkedSpanFor(last, span.marker);
            if (!found) {
              span.to = startCh;
            } else if (sameLine) {
              span.to = found.to == null ? null : found.to + offset;
            }
          }
        }
      }
      if (last) {
        for (var i$12 = 0; i$12 < last.length; ++i$12) {
          var span$1 = last[i$12];
          if (span$1.to != null) {
            span$1.to += offset;
          }
          if (span$1.from == null) {
            var found$1 = getMarkedSpanFor(first, span$1.marker);
            if (!found$1) {
              span$1.from = offset;
              if (sameLine) {
                (first || (first = [])).push(span$1);
              }
            }
          } else {
            span$1.from += offset;
            if (sameLine) {
              (first || (first = [])).push(span$1);
            }
          }
        }
      }
      if (first) {
        first = clearEmptySpans(first);
      }
      if (last && last != first) {
        last = clearEmptySpans(last);
      }
      var newMarkers = [first];
      if (!sameLine) {
        var gap = change.text.length - 2, gapMarkers;
        if (gap > 0 && first) {
          for (var i$22 = 0; i$22 < first.length; ++i$22) {
            if (first[i$22].to == null) {
              (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$22].marker, null, null));
            }
          }
        }
        for (var i$3 = 0; i$3 < gap; ++i$3) {
          newMarkers.push(gapMarkers);
        }
        newMarkers.push(last);
      }
      return newMarkers;
    }
    function clearEmptySpans(spans) {
      for (var i2 = 0; i2 < spans.length; ++i2) {
        var span = spans[i2];
        if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false) {
          spans.splice(i2--, 1);
        }
      }
      if (!spans.length) {
        return null;
      }
      return spans;
    }
    function removeReadOnlyRanges(doc, from, to) {
      var markers = null;
      doc.iter(from.line, to.line + 1, function(line) {
        if (line.markedSpans) {
          for (var i3 = 0; i3 < line.markedSpans.length; ++i3) {
            var mark = line.markedSpans[i3].marker;
            if (mark.readOnly && (!markers || indexOf(markers, mark) == -1)) {
              (markers || (markers = [])).push(mark);
            }
          }
        }
      });
      if (!markers) {
        return null;
      }
      var parts = [{from, to}];
      for (var i2 = 0; i2 < markers.length; ++i2) {
        var mk = markers[i2], m = mk.find(0);
        for (var j = 0; j < parts.length; ++j) {
          var p = parts[j];
          if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) {
            continue;
          }
          var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);
          if (dfrom < 0 || !mk.inclusiveLeft && !dfrom) {
            newParts.push({from: p.from, to: m.from});
          }
          if (dto > 0 || !mk.inclusiveRight && !dto) {
            newParts.push({from: m.to, to: p.to});
          }
          parts.splice.apply(parts, newParts);
          j += newParts.length - 3;
        }
      }
      return parts;
    }
    function detachMarkedSpans(line) {
      var spans = line.markedSpans;
      if (!spans) {
        return;
      }
      for (var i2 = 0; i2 < spans.length; ++i2) {
        spans[i2].marker.detachLine(line);
      }
      line.markedSpans = null;
    }
    function attachMarkedSpans(line, spans) {
      if (!spans) {
        return;
      }
      for (var i2 = 0; i2 < spans.length; ++i2) {
        spans[i2].marker.attachLine(line);
      }
      line.markedSpans = spans;
    }
    function extraLeft(marker) {
      return marker.inclusiveLeft ? -1 : 0;
    }
    function extraRight(marker) {
      return marker.inclusiveRight ? 1 : 0;
    }
    function compareCollapsedMarkers(a, b) {
      var lenDiff = a.lines.length - b.lines.length;
      if (lenDiff != 0) {
        return lenDiff;
      }
      var aPos = a.find(), bPos = b.find();
      var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);
      if (fromCmp) {
        return -fromCmp;
      }
      var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);
      if (toCmp) {
        return toCmp;
      }
      return b.id - a.id;
    }
    function collapsedSpanAtSide(line, start) {
      var sps = sawCollapsedSpans && line.markedSpans, found;
      if (sps) {
        for (var sp = void 0, i2 = 0; i2 < sps.length; ++i2) {
          sp = sps[i2];
          if (sp.marker.collapsed && (start ? sp.from : sp.to) == null && (!found || compareCollapsedMarkers(found, sp.marker) < 0)) {
            found = sp.marker;
          }
        }
      }
      return found;
    }
    function collapsedSpanAtStart(line) {
      return collapsedSpanAtSide(line, true);
    }
    function collapsedSpanAtEnd(line) {
      return collapsedSpanAtSide(line, false);
    }
    function collapsedSpanAround(line, ch) {
      var sps = sawCollapsedSpans && line.markedSpans, found;
      if (sps) {
        for (var i2 = 0; i2 < sps.length; ++i2) {
          var sp = sps[i2];
          if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) && (!found || compareCollapsedMarkers(found, sp.marker) < 0)) {
            found = sp.marker;
          }
        }
      }
      return found;
    }
    function conflictingCollapsedRange(doc, lineNo2, from, to, marker) {
      var line = getLine(doc, lineNo2);
      var sps = sawCollapsedSpans && line.markedSpans;
      if (sps) {
        for (var i2 = 0; i2 < sps.length; ++i2) {
          var sp = sps[i2];
          if (!sp.marker.collapsed) {
            continue;
          }
          var found = sp.marker.find(0);
          var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);
          var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);
          if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) {
            continue;
          }
          if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) || fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0)) {
            return true;
          }
        }
      }
    }
    function visualLine(line) {
      var merged;
      while (merged = collapsedSpanAtStart(line)) {
        line = merged.find(-1, true).line;
      }
      return line;
    }
    function visualLineEnd(line) {
      var merged;
      while (merged = collapsedSpanAtEnd(line)) {
        line = merged.find(1, true).line;
      }
      return line;
    }
    function visualLineContinued(line) {
      var merged, lines;
      while (merged = collapsedSpanAtEnd(line)) {
        line = merged.find(1, true).line;
        (lines || (lines = [])).push(line);
      }
      return lines;
    }
    function visualLineNo(doc, lineN) {
      var line = getLine(doc, lineN), vis = visualLine(line);
      if (line == vis) {
        return lineN;
      }
      return lineNo(vis);
    }
    function visualLineEndNo(doc, lineN) {
      if (lineN > doc.lastLine()) {
        return lineN;
      }
      var line = getLine(doc, lineN), merged;
      if (!lineIsHidden(doc, line)) {
        return lineN;
      }
      while (merged = collapsedSpanAtEnd(line)) {
        line = merged.find(1, true).line;
      }
      return lineNo(line) + 1;
    }
    function lineIsHidden(doc, line) {
      var sps = sawCollapsedSpans && line.markedSpans;
      if (sps) {
        for (var sp = void 0, i2 = 0; i2 < sps.length; ++i2) {
          sp = sps[i2];
          if (!sp.marker.collapsed) {
            continue;
          }
          if (sp.from == null) {
            return true;
          }
          if (sp.marker.widgetNode) {
            continue;
          }
          if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp)) {
            return true;
          }
        }
      }
    }
    function lineIsHiddenInner(doc, line, span) {
      if (span.to == null) {
        var end = span.marker.find(1, true);
        return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker));
      }
      if (span.marker.inclusiveRight && span.to == line.text.length) {
        return true;
      }
      for (var sp = void 0, i2 = 0; i2 < line.markedSpans.length; ++i2) {
        sp = line.markedSpans[i2];
        if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to && (sp.to == null || sp.to != span.from) && (sp.marker.inclusiveLeft || span.marker.inclusiveRight) && lineIsHiddenInner(doc, line, sp)) {
          return true;
        }
      }
    }
    function heightAtLine(lineObj) {
      lineObj = visualLine(lineObj);
      var h = 0, chunk = lineObj.parent;
      for (var i2 = 0; i2 < chunk.lines.length; ++i2) {
        var line = chunk.lines[i2];
        if (line == lineObj) {
          break;
        } else {
          h += line.height;
        }
      }
      for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {
        for (var i$12 = 0; i$12 < p.children.length; ++i$12) {
          var cur = p.children[i$12];
          if (cur == chunk) {
            break;
          } else {
            h += cur.height;
          }
        }
      }
      return h;
    }
    function lineLength(line) {
      if (line.height == 0) {
        return 0;
      }
      var len = line.text.length, merged, cur = line;
      while (merged = collapsedSpanAtStart(cur)) {
        var found = merged.find(0, true);
        cur = found.from.line;
        len += found.from.ch - found.to.ch;
      }
      cur = line;
      while (merged = collapsedSpanAtEnd(cur)) {
        var found$1 = merged.find(0, true);
        len -= cur.text.length - found$1.from.ch;
        cur = found$1.to.line;
        len += cur.text.length - found$1.to.ch;
      }
      return len;
    }
    function findMaxLine(cm) {
      var d = cm.display, doc = cm.doc;
      d.maxLine = getLine(doc, doc.first);
      d.maxLineLength = lineLength(d.maxLine);
      d.maxLineChanged = true;
      doc.iter(function(line) {
        var len = lineLength(line);
        if (len > d.maxLineLength) {
          d.maxLineLength = len;
          d.maxLine = line;
        }
      });
    }
    var Line = function(text, markedSpans, estimateHeight2) {
      this.text = text;
      attachMarkedSpans(this, markedSpans);
      this.height = estimateHeight2 ? estimateHeight2(this) : 1;
    };
    Line.prototype.lineNo = function() {
      return lineNo(this);
    };
    eventMixin(Line);
    function updateLine(line, text, markedSpans, estimateHeight2) {
      line.text = text;
      if (line.stateAfter) {
        line.stateAfter = null;
      }
      if (line.styles) {
        line.styles = null;
      }
      if (line.order != null) {
        line.order = null;
      }
      detachMarkedSpans(line);
      attachMarkedSpans(line, markedSpans);
      var estHeight = estimateHeight2 ? estimateHeight2(line) : 1;
      if (estHeight != line.height) {
        updateLineHeight(line, estHeight);
      }
    }
    function cleanUpLine(line) {
      line.parent = null;
      detachMarkedSpans(line);
    }
    var styleToClassCache = {}, styleToClassCacheWithMode = {};
    function interpretTokenStyle(style, options) {
      if (!style || /^\s*$/.test(style)) {
        return null;
      }
      var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;
      return cache[style] || (cache[style] = style.replace(/\S+/g, "cm-$&"));
    }
    function buildLineContent(cm, lineView) {
      var content = eltP("span", null, null, webkit ? "padding-right: .1px" : null);
      var builder = {
        pre: eltP("pre", [content], "CodeMirror-line"),
        content,
        col: 0,
        pos: 0,
        cm,
        trailingSpace: false,
        splitSpaces: cm.getOption("lineWrapping")
      };
      lineView.measure = {};
      for (var i2 = 0; i2 <= (lineView.rest ? lineView.rest.length : 0); i2++) {
        var line = i2 ? lineView.rest[i2 - 1] : lineView.line, order = void 0;
        builder.pos = 0;
        builder.addToken = buildToken;
        if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction))) {
          builder.addToken = buildTokenBadBidi(builder.addToken, order);
        }
        builder.map = [];
        var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);
        insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));
        if (line.styleClasses) {
          if (line.styleClasses.bgClass) {
            builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || "");
          }
          if (line.styleClasses.textClass) {
            builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || "");
          }
        }
        if (builder.map.length == 0) {
          builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure)));
        }
        if (i2 == 0) {
          lineView.measure.map = builder.map;
          lineView.measure.cache = {};
        } else {
          (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map);
          (lineView.measure.caches || (lineView.measure.caches = [])).push({});
        }
      }
      if (webkit) {
        var last = builder.content.lastChild;
        if (/\bcm-tab\b/.test(last.className) || last.querySelector && last.querySelector(".cm-tab")) {
          builder.content.className = "cm-tab-wrap-hack";
        }
      }
      signal(cm, "renderLine", cm, lineView.line, builder.pre);
      if (builder.pre.className) {
        builder.textClass = joinClasses(builder.pre.className, builder.textClass || "");
      }
      return builder;
    }
    function defaultSpecialCharPlaceholder(ch) {
      var token = elt("span", "\u2022", "cm-invalidchar");
      token.title = "\\u" + ch.charCodeAt(0).toString(16);
      token.setAttribute("aria-label", token.title);
      return token;
    }
    function buildToken(builder, text, style, startStyle, endStyle, css, attributes) {
      if (!text) {
        return;
      }
      var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;
      var special = builder.cm.state.specialChars, mustWrap = false;
      var content;
      if (!special.test(text)) {
        builder.col += text.length;
        content = document.createTextNode(displayText);
        builder.map.push(builder.pos, builder.pos + text.length, content);
        if (ie && ie_version < 9) {
          mustWrap = true;
        }
        builder.pos += text.length;
      } else {
        content = document.createDocumentFragment();
        var pos = 0;
        while (true) {
          special.lastIndex = pos;
          var m = special.exec(text);
          var skipped = m ? m.index - pos : text.length - pos;
          if (skipped) {
            var txt = document.createTextNode(displayText.slice(pos, pos + skipped));
            if (ie && ie_version < 9) {
              content.appendChild(elt("span", [txt]));
            } else {
              content.appendChild(txt);
            }
            builder.map.push(builder.pos, builder.pos + skipped, txt);
            builder.col += skipped;
            builder.pos += skipped;
          }
          if (!m) {
            break;
          }
          pos += skipped + 1;
          var txt$1 = void 0;
          if (m[0] == "	") {
            var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;
            txt$1 = content.appendChild(elt("span", spaceStr(tabWidth), "cm-tab"));
            txt$1.setAttribute("role", "presentation");
            txt$1.setAttribute("cm-text", "	");
            builder.col += tabWidth;
          } else if (m[0] == "\r" || m[0] == "\n") {
            txt$1 = content.appendChild(elt("span", m[0] == "\r" ? "\u240D" : "\u2424", "cm-invalidchar"));
            txt$1.setAttribute("cm-text", m[0]);
            builder.col += 1;
          } else {
            txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);
            txt$1.setAttribute("cm-text", m[0]);
            if (ie && ie_version < 9) {
              content.appendChild(elt("span", [txt$1]));
            } else {
              content.appendChild(txt$1);
            }
            builder.col += 1;
          }
          builder.map.push(builder.pos, builder.pos + 1, txt$1);
          builder.pos++;
        }
      }
      builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;
      if (style || startStyle || endStyle || mustWrap || css) {
        var fullStyle = style || "";
        if (startStyle) {
          fullStyle += startStyle;
        }
        if (endStyle) {
          fullStyle += endStyle;
        }
        var token = elt("span", [content], fullStyle, css);
        if (attributes) {
          for (var attr in attributes) {
            if (attributes.hasOwnProperty(attr) && attr != "style" && attr != "class") {
              token.setAttribute(attr, attributes[attr]);
            }
          }
        }
        return builder.content.appendChild(token);
      }
      builder.content.appendChild(content);
    }
    function splitSpaces(text, trailingBefore) {
      if (text.length > 1 && !/  /.test(text)) {
        return text;
      }
      var spaceBefore = trailingBefore, result = "";
      for (var i2 = 0; i2 < text.length; i2++) {
        var ch = text.charAt(i2);
        if (ch == " " && spaceBefore && (i2 == text.length - 1 || text.charCodeAt(i2 + 1) == 32)) {
          ch = "\xA0";
        }
        result += ch;
        spaceBefore = ch == " ";
      }
      return result;
    }
    function buildTokenBadBidi(inner, order) {
      return function(builder, text, style, startStyle, endStyle, css, attributes) {
        style = style ? style + " cm-force-border" : "cm-force-border";
        var start = builder.pos, end = start + text.length;
        for (; ; ) {
          var part = void 0;
          for (var i2 = 0; i2 < order.length; i2++) {
            part = order[i2];
            if (part.to > start && part.from <= start) {
              break;
            }
          }
          if (part.to >= end) {
            return inner(builder, text, style, startStyle, endStyle, css, attributes);
          }
          inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes);
          startStyle = null;
          text = text.slice(part.to - start);
          start = part.to;
        }
      };
    }
    function buildCollapsedSpan(builder, size, marker, ignoreWidget) {
      var widget = !ignoreWidget && marker.widgetNode;
      if (widget) {
        builder.map.push(builder.pos, builder.pos + size, widget);
      }
      if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {
        if (!widget) {
          widget = builder.content.appendChild(document.createElement("span"));
        }
        widget.setAttribute("cm-marker", marker.id);
      }
      if (widget) {
        builder.cm.display.input.setUneditable(widget);
        builder.content.appendChild(widget);
      }
      builder.pos += size;
      builder.trailingSpace = false;
    }
    function insertLineContent(line, builder, styles) {
      var spans = line.markedSpans, allText = line.text, at = 0;
      if (!spans) {
        for (var i$12 = 1; i$12 < styles.length; i$12 += 2) {
          builder.addToken(builder, allText.slice(at, at = styles[i$12]), interpretTokenStyle(styles[i$12 + 1], builder.cm.options));
        }
        return;
      }
      var len = allText.length, pos = 0, i2 = 1, text = "", style, css;
      var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, collapsed, attributes;
      for (; ; ) {
        if (nextChange == pos) {
          spanStyle = spanEndStyle = spanStartStyle = css = "";
          attributes = null;
          collapsed = null;
          nextChange = Infinity;
          var foundBookmarks = [], endStyles = void 0;
          for (var j = 0; j < spans.length; ++j) {
            var sp = spans[j], m = sp.marker;
            if (m.type == "bookmark" && sp.from == pos && m.widgetNode) {
              foundBookmarks.push(m);
            } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {
              if (sp.to != null && sp.to != pos && nextChange > sp.to) {
                nextChange = sp.to;
                spanEndStyle = "";
              }
              if (m.className) {
                spanStyle += " " + m.className;
              }
              if (m.css) {
                css = (css ? css + ";" : "") + m.css;
              }
              if (m.startStyle && sp.from == pos) {
                spanStartStyle += " " + m.startStyle;
              }
              if (m.endStyle && sp.to == nextChange) {
                (endStyles || (endStyles = [])).push(m.endStyle, sp.to);
              }
              if (m.title) {
                (attributes || (attributes = {})).title = m.title;
              }
              if (m.attributes) {
                for (var attr in m.attributes) {
                  (attributes || (attributes = {}))[attr] = m.attributes[attr];
                }
              }
              if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0)) {
                collapsed = sp;
              }
            } else if (sp.from > pos && nextChange > sp.from) {
              nextChange = sp.from;
            }
          }
          if (endStyles) {
            for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2) {
              if (endStyles[j$1 + 1] == nextChange) {
                spanEndStyle += " " + endStyles[j$1];
              }
            }
          }
          if (!collapsed || collapsed.from == pos) {
            for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2) {
              buildCollapsedSpan(builder, 0, foundBookmarks[j$2]);
            }
          }
          if (collapsed && (collapsed.from || 0) == pos) {
            buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos, collapsed.marker, collapsed.from == null);
            if (collapsed.to == null) {
              return;
            }
            if (collapsed.to == pos) {
              collapsed = false;
            }
          }
        }
        if (pos >= len) {
          break;
        }
        var upto = Math.min(len, nextChange);
        while (true) {
          if (text) {
            var end = pos + text.length;
            if (!collapsed) {
              var tokenText = end > upto ? text.slice(0, upto - pos) : text;
              builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle, spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : "", css, attributes);
            }
            if (end >= upto) {
              text = text.slice(upto - pos);
              pos = upto;
              break;
            }
            pos = end;
            spanStartStyle = "";
          }
          text = allText.slice(at, at = styles[i2++]);
          style = interpretTokenStyle(styles[i2++], builder.cm.options);
        }
      }
    }
    function LineView(doc, line, lineN) {
      this.line = line;
      this.rest = visualLineContinued(line);
      this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;
      this.node = this.text = null;
      this.hidden = lineIsHidden(doc, line);
    }
    function buildViewArray(cm, from, to) {
      var array = [], nextPos;
      for (var pos = from; pos < to; pos = nextPos) {
        var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);
        nextPos = pos + view.size;
        array.push(view);
      }
      return array;
    }
    var operationGroup = null;
    function pushOperation(op) {
      if (operationGroup) {
        operationGroup.ops.push(op);
      } else {
        op.ownsGroup = operationGroup = {
          ops: [op],
          delayedCallbacks: []
        };
      }
    }
    function fireCallbacksForOps(group) {
      var callbacks = group.delayedCallbacks, i2 = 0;
      do {
        for (; i2 < callbacks.length; i2++) {
          callbacks[i2].call(null);
        }
        for (var j = 0; j < group.ops.length; j++) {
          var op = group.ops[j];
          if (op.cursorActivityHandlers) {
            while (op.cursorActivityCalled < op.cursorActivityHandlers.length) {
              op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm);
            }
          }
        }
      } while (i2 < callbacks.length);
    }
    function finishOperation(op, endCb) {
      var group = op.ownsGroup;
      if (!group) {
        return;
      }
      try {
        fireCallbacksForOps(group);
      } finally {
        operationGroup = null;
        endCb(group);
      }
    }
    var orphanDelayedCallbacks = null;
    function signalLater(emitter, type) {
      var arr = getHandlers(emitter, type);
      if (!arr.length) {
        return;
      }
      var args = Array.prototype.slice.call(arguments, 2), list;
      if (operationGroup) {
        list = operationGroup.delayedCallbacks;
      } else if (orphanDelayedCallbacks) {
        list = orphanDelayedCallbacks;
      } else {
        list = orphanDelayedCallbacks = [];
        setTimeout(fireOrphanDelayed, 0);
      }
      var loop = function(i3) {
        list.push(function() {
          return arr[i3].apply(null, args);
        });
      };
      for (var i2 = 0; i2 < arr.length; ++i2)
        loop(i2);
    }
    function fireOrphanDelayed() {
      var delayed = orphanDelayedCallbacks;
      orphanDelayedCallbacks = null;
      for (var i2 = 0; i2 < delayed.length; ++i2) {
        delayed[i2]();
      }
    }
    function updateLineForChanges(cm, lineView, lineN, dims) {
      for (var j = 0; j < lineView.changes.length; j++) {
        var type = lineView.changes[j];
        if (type == "text") {
          updateLineText(cm, lineView);
        } else if (type == "gutter") {
          updateLineGutter(cm, lineView, lineN, dims);
        } else if (type == "class") {
          updateLineClasses(cm, lineView);
        } else if (type == "widget") {
          updateLineWidgets(cm, lineView, dims);
        }
      }
      lineView.changes = null;
    }
    function ensureLineWrapped(lineView) {
      if (lineView.node == lineView.text) {
        lineView.node = elt("div", null, null, "position: relative");
        if (lineView.text.parentNode) {
          lineView.text.parentNode.replaceChild(lineView.node, lineView.text);
        }
        lineView.node.appendChild(lineView.text);
        if (ie && ie_version < 8) {
          lineView.node.style.zIndex = 2;
        }
      }
      return lineView.node;
    }
    function updateLineBackground(cm, lineView) {
      var cls = lineView.bgClass ? lineView.bgClass + " " + (lineView.line.bgClass || "") : lineView.line.bgClass;
      if (cls) {
        cls += " CodeMirror-linebackground";
      }
      if (lineView.background) {
        if (cls) {
          lineView.background.className = cls;
        } else {
          lineView.background.parentNode.removeChild(lineView.background);
          lineView.background = null;
        }
      } else if (cls) {
        var wrap = ensureLineWrapped(lineView);
        lineView.background = wrap.insertBefore(elt("div", null, cls), wrap.firstChild);
        cm.display.input.setUneditable(lineView.background);
      }
    }
    function getLineContent(cm, lineView) {
      var ext = cm.display.externalMeasured;
      if (ext && ext.line == lineView.line) {
        cm.display.externalMeasured = null;
        lineView.measure = ext.measure;
        return ext.built;
      }
      return buildLineContent(cm, lineView);
    }
    function updateLineText(cm, lineView) {
      var cls = lineView.text.className;
      var built = getLineContent(cm, lineView);
      if (lineView.text == lineView.node) {
        lineView.node = built.pre;
      }
      lineView.text.parentNode.replaceChild(built.pre, lineView.text);
      lineView.text = built.pre;
      if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {
        lineView.bgClass = built.bgClass;
        lineView.textClass = built.textClass;
        updateLineClasses(cm, lineView);
      } else if (cls) {
        lineView.text.className = cls;
      }
    }
    function updateLineClasses(cm, lineView) {
      updateLineBackground(cm, lineView);
      if (lineView.line.wrapClass) {
        ensureLineWrapped(lineView).className = lineView.line.wrapClass;
      } else if (lineView.node != lineView.text) {
        lineView.node.className = "";
      }
      var textClass = lineView.textClass ? lineView.textClass + " " + (lineView.line.textClass || "") : lineView.line.textClass;
      lineView.text.className = textClass || "";
    }
    function updateLineGutter(cm, lineView, lineN, dims) {
      if (lineView.gutter) {
        lineView.node.removeChild(lineView.gutter);
        lineView.gutter = null;
      }
      if (lineView.gutterBackground) {
        lineView.node.removeChild(lineView.gutterBackground);
        lineView.gutterBackground = null;
      }
      if (lineView.line.gutterClass) {
        var wrap = ensureLineWrapped(lineView);
        lineView.gutterBackground = elt("div", null, "CodeMirror-gutter-background " + lineView.line.gutterClass, "left: " + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + "px; width: " + dims.gutterTotalWidth + "px");
        cm.display.input.setUneditable(lineView.gutterBackground);
        wrap.insertBefore(lineView.gutterBackground, lineView.text);
      }
      var markers = lineView.line.gutterMarkers;
      if (cm.options.lineNumbers || markers) {
        var wrap$1 = ensureLineWrapped(lineView);
        var gutterWrap = lineView.gutter = elt("div", null, "CodeMirror-gutter-wrapper", "left: " + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + "px");
        cm.display.input.setUneditable(gutterWrap);
        wrap$1.insertBefore(gutterWrap, lineView.text);
        if (lineView.line.gutterClass) {
          gutterWrap.className += " " + lineView.line.gutterClass;
        }
        if (cm.options.lineNumbers && (!markers || !markers["CodeMirror-linenumbers"])) {
          lineView.lineNumber = gutterWrap.appendChild(elt("div", lineNumberFor(cm.options, lineN), "CodeMirror-linenumber CodeMirror-gutter-elt", "left: " + dims.gutterLeft["CodeMirror-linenumbers"] + "px; width: " + cm.display.lineNumInnerWidth + "px"));
        }
        if (markers) {
          for (var k = 0; k < cm.display.gutterSpecs.length; ++k) {
            var id = cm.display.gutterSpecs[k].className, found = markers.hasOwnProperty(id) && markers[id];
            if (found) {
              gutterWrap.appendChild(elt("div", [found], "CodeMirror-gutter-elt", "left: " + dims.gutterLeft[id] + "px; width: " + dims.gutterWidth[id] + "px"));
            }
          }
        }
      }
    }
    function updateLineWidgets(cm, lineView, dims) {
      if (lineView.alignable) {
        lineView.alignable = null;
      }
      var isWidget = classTest("CodeMirror-linewidget");
      for (var node = lineView.node.firstChild, next = void 0; node; node = next) {
        next = node.nextSibling;
        if (isWidget.test(node.className)) {
          lineView.node.removeChild(node);
        }
      }
      insertLineWidgets(cm, lineView, dims);
    }
    function buildLineElement(cm, lineView, lineN, dims) {
      var built = getLineContent(cm, lineView);
      lineView.text = lineView.node = built.pre;
      if (built.bgClass) {
        lineView.bgClass = built.bgClass;
      }
      if (built.textClass) {
        lineView.textClass = built.textClass;
      }
      updateLineClasses(cm, lineView);
      updateLineGutter(cm, lineView, lineN, dims);
      insertLineWidgets(cm, lineView, dims);
      return lineView.node;
    }
    function insertLineWidgets(cm, lineView, dims) {
      insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);
      if (lineView.rest) {
        for (var i2 = 0; i2 < lineView.rest.length; i2++) {
          insertLineWidgetsFor(cm, lineView.rest[i2], lineView, dims, false);
        }
      }
    }
    function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {
      if (!line.widgets) {
        return;
      }
      var wrap = ensureLineWrapped(lineView);
      for (var i2 = 0, ws = line.widgets; i2 < ws.length; ++i2) {
        var widget = ws[i2], node = elt("div", [widget.node], "CodeMirror-linewidget" + (widget.className ? " " + widget.className : ""));
        if (!widget.handleMouseEvents) {
          node.setAttribute("cm-ignore-events", "true");
        }
        positionLineWidget(widget, node, lineView, dims);
        cm.display.input.setUneditable(node);
        if (allowAbove && widget.above) {
          wrap.insertBefore(node, lineView.gutter || lineView.text);
        } else {
          wrap.appendChild(node);
        }
        signalLater(widget, "redraw");
      }
    }
    function positionLineWidget(widget, node, lineView, dims) {
      if (widget.noHScroll) {
        (lineView.alignable || (lineView.alignable = [])).push(node);
        var width = dims.wrapperWidth;
        node.style.left = dims.fixedPos + "px";
        if (!widget.coverGutter) {
          width -= dims.gutterTotalWidth;
          node.style.paddingLeft = dims.gutterTotalWidth + "px";
        }
        node.style.width = width + "px";
      }
      if (widget.coverGutter) {
        node.style.zIndex = 5;
        node.style.position = "relative";
        if (!widget.noHScroll) {
          node.style.marginLeft = -dims.gutterTotalWidth + "px";
        }
      }
    }
    function widgetHeight(widget) {
      if (widget.height != null) {
        return widget.height;
      }
      var cm = widget.doc.cm;
      if (!cm) {
        return 0;
      }
      if (!contains(document.body, widget.node)) {
        var parentStyle = "position: relative;";
        if (widget.coverGutter) {
          parentStyle += "margin-left: -" + cm.display.gutters.offsetWidth + "px;";
        }
        if (widget.noHScroll) {
          parentStyle += "width: " + cm.display.wrapper.clientWidth + "px;";
        }
        removeChildrenAndAdd(cm.display.measure, elt("div", [widget.node], null, parentStyle));
      }
      return widget.height = widget.node.parentNode.offsetHeight;
    }
    function eventInWidget(display, e) {
      for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {
        if (!n || n.nodeType == 1 && n.getAttribute("cm-ignore-events") == "true" || n.parentNode == display.sizer && n != display.mover) {
          return true;
        }
      }
    }
    function paddingTop(display) {
      return display.lineSpace.offsetTop;
    }
    function paddingVert(display) {
      return display.mover.offsetHeight - display.lineSpace.offsetHeight;
    }
    function paddingH(display) {
      if (display.cachedPaddingH) {
        return display.cachedPaddingH;
      }
      var e = removeChildrenAndAdd(display.measure, elt("pre", "x", "CodeMirror-line-like"));
      var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;
      var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};
      if (!isNaN(data.left) && !isNaN(data.right)) {
        display.cachedPaddingH = data;
      }
      return data;
    }
    function scrollGap(cm) {
      return scrollerGap - cm.display.nativeBarWidth;
    }
    function displayWidth(cm) {
      return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth;
    }
    function displayHeight(cm) {
      return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight;
    }
    function ensureLineHeights(cm, lineView, rect) {
      var wrapping = cm.options.lineWrapping;
      var curWidth = wrapping && displayWidth(cm);
      if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {
        var heights = lineView.measure.heights = [];
        if (wrapping) {
          lineView.measure.width = curWidth;
          var rects = lineView.text.firstChild.getClientRects();
          for (var i2 = 0; i2 < rects.length - 1; i2++) {
            var cur = rects[i2], next = rects[i2 + 1];
            if (Math.abs(cur.bottom - next.bottom) > 2) {
              heights.push((cur.bottom + next.top) / 2 - rect.top);
            }
          }
        }
        heights.push(rect.bottom - rect.top);
      }
    }
    function mapFromLineView(lineView, line, lineN) {
      if (lineView.line == line) {
        return {map: lineView.measure.map, cache: lineView.measure.cache};
      }
      for (var i2 = 0; i2 < lineView.rest.length; i2++) {
        if (lineView.rest[i2] == line) {
          return {map: lineView.measure.maps[i2], cache: lineView.measure.caches[i2]};
        }
      }
      for (var i$12 = 0; i$12 < lineView.rest.length; i$12++) {
        if (lineNo(lineView.rest[i$12]) > lineN) {
          return {map: lineView.measure.maps[i$12], cache: lineView.measure.caches[i$12], before: true};
        }
      }
    }
    function updateExternalMeasurement(cm, line) {
      line = visualLine(line);
      var lineN = lineNo(line);
      var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);
      view.lineN = lineN;
      var built = view.built = buildLineContent(cm, view);
      view.text = built.pre;
      removeChildrenAndAdd(cm.display.lineMeasure, built.pre);
      return view;
    }
    function measureChar(cm, line, ch, bias) {
      return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias);
    }
    function findViewForLine(cm, lineN) {
      if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo) {
        return cm.display.view[findViewIndex(cm, lineN)];
      }
      var ext = cm.display.externalMeasured;
      if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size) {
        return ext;
      }
    }
    function prepareMeasureForLine(cm, line) {
      var lineN = lineNo(line);
      var view = findViewForLine(cm, lineN);
      if (view && !view.text) {
        view = null;
      } else if (view && view.changes) {
        updateLineForChanges(cm, view, lineN, getDimensions(cm));
        cm.curOp.forceUpdate = true;
      }
      if (!view) {
        view = updateExternalMeasurement(cm, line);
      }
      var info = mapFromLineView(view, line, lineN);
      return {
        line,
        view,
        rect: null,
        map: info.map,
        cache: info.cache,
        before: info.before,
        hasHeights: false
      };
    }
    function measureCharPrepared(cm, prepared, ch, bias, varHeight) {
      if (prepared.before) {
        ch = -1;
      }
      var key = ch + (bias || ""), found;
      if (prepared.cache.hasOwnProperty(key)) {
        found = prepared.cache[key];
      } else {
        if (!prepared.rect) {
          prepared.rect = prepared.view.text.getBoundingClientRect();
        }
        if (!prepared.hasHeights) {
          ensureLineHeights(cm, prepared.view, prepared.rect);
          prepared.hasHeights = true;
        }
        found = measureCharInner(cm, prepared, ch, bias);
        if (!found.bogus) {
          prepared.cache[key] = found;
        }
      }
      return {
        left: found.left,
        right: found.right,
        top: varHeight ? found.rtop : found.top,
        bottom: varHeight ? found.rbottom : found.bottom
      };
    }
    var nullRect = {left: 0, right: 0, top: 0, bottom: 0};
    function nodeAndOffsetInLineMap(map2, ch, bias) {
      var node, start, end, collapse, mStart, mEnd;
      for (var i2 = 0; i2 < map2.length; i2 += 3) {
        mStart = map2[i2];
        mEnd = map2[i2 + 1];
        if (ch < mStart) {
          start = 0;
          end = 1;
          collapse = "left";
        } else if (ch < mEnd) {
          start = ch - mStart;
          end = start + 1;
        } else if (i2 == map2.length - 3 || ch == mEnd && map2[i2 + 3] > ch) {
          end = mEnd - mStart;
          start = end - 1;
          if (ch >= mEnd) {
            collapse = "right";
          }
        }
        if (start != null) {
          node = map2[i2 + 2];
          if (mStart == mEnd && bias == (node.insertLeft ? "left" : "right")) {
            collapse = bias;
          }
          if (bias == "left" && start == 0) {
            while (i2 && map2[i2 - 2] == map2[i2 - 3] && map2[i2 - 1].insertLeft) {
              node = map2[(i2 -= 3) + 2];
              collapse = "left";
            }
          }
          if (bias == "right" && start == mEnd - mStart) {
            while (i2 < map2.length - 3 && map2[i2 + 3] == map2[i2 + 4] && !map2[i2 + 5].insertLeft) {
              node = map2[(i2 += 3) + 2];
              collapse = "right";
            }
          }
          break;
        }
      }
      return {node, start, end, collapse, coverStart: mStart, coverEnd: mEnd};
    }
    function getUsefulRect(rects, bias) {
      var rect = nullRect;
      if (bias == "left") {
        for (var i2 = 0; i2 < rects.length; i2++) {
          if ((rect = rects[i2]).left != rect.right) {
            break;
          }
        }
      } else {
        for (var i$12 = rects.length - 1; i$12 >= 0; i$12--) {
          if ((rect = rects[i$12]).left != rect.right) {
            break;
          }
        }
      }
      return rect;
    }
    function measureCharInner(cm, prepared, ch, bias) {
      var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);
      var node = place.node, start = place.start, end = place.end, collapse = place.collapse;
      var rect;
      if (node.nodeType == 3) {
        for (var i$12 = 0; i$12 < 4; i$12++) {
          while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) {
            --start;
          }
          while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) {
            ++end;
          }
          if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart) {
            rect = node.parentNode.getBoundingClientRect();
          } else {
            rect = getUsefulRect(range(node, start, end).getClientRects(), bias);
          }
          if (rect.left || rect.right || start == 0) {
            break;
          }
          end = start;
          start = start - 1;
          collapse = "right";
        }
        if (ie && ie_version < 11) {
          rect = maybeUpdateRectForZooming(cm.display.measure, rect);
        }
      } else {
        if (start > 0) {
          collapse = bias = "right";
        }
        var rects;
        if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1) {
          rect = rects[bias == "right" ? rects.length - 1 : 0];
        } else {
          rect = node.getBoundingClientRect();
        }
      }
      if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {
        var rSpan = node.parentNode.getClientRects()[0];
        if (rSpan) {
          rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom};
        } else {
          rect = nullRect;
        }
      }
      var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;
      var mid = (rtop + rbot) / 2;
      var heights = prepared.view.measure.heights;
      var i2 = 0;
      for (; i2 < heights.length - 1; i2++) {
        if (mid < heights[i2]) {
          break;
        }
      }
      var top = i2 ? heights[i2 - 1] : 0, bot = heights[i2];
      var result = {
        left: (collapse == "right" ? rect.right : rect.left) - prepared.rect.left,
        right: (collapse == "left" ? rect.left : rect.right) - prepared.rect.left,
        top,
        bottom: bot
      };
      if (!rect.left && !rect.right) {
        result.bogus = true;
      }
      if (!cm.options.singleCursorHeightPerLine) {
        result.rtop = rtop;
        result.rbottom = rbot;
      }
      return result;
    }
    function maybeUpdateRectForZooming(measure, rect) {
      if (!window.screen || screen.logicalXDPI == null || screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure)) {
        return rect;
      }
      var scaleX = screen.logicalXDPI / screen.deviceXDPI;
      var scaleY = screen.logicalYDPI / screen.deviceYDPI;
      return {
        left: rect.left * scaleX,
        right: rect.right * scaleX,
        top: rect.top * scaleY,
        bottom: rect.bottom * scaleY
      };
    }
    function clearLineMeasurementCacheFor(lineView) {
      if (lineView.measure) {
        lineView.measure.cache = {};
        lineView.measure.heights = null;
        if (lineView.rest) {
          for (var i2 = 0; i2 < lineView.rest.length; i2++) {
            lineView.measure.caches[i2] = {};
          }
        }
      }
    }
    function clearLineMeasurementCache(cm) {
      cm.display.externalMeasure = null;
      removeChildren(cm.display.lineMeasure);
      for (var i2 = 0; i2 < cm.display.view.length; i2++) {
        clearLineMeasurementCacheFor(cm.display.view[i2]);
      }
    }
    function clearCaches(cm) {
      clearLineMeasurementCache(cm);
      cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;
      if (!cm.options.lineWrapping) {
        cm.display.maxLineChanged = true;
      }
      cm.display.lineNumChars = null;
    }
    function pageScrollX() {
      if (chrome && android) {
        return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft));
      }
      return window.pageXOffset || (document.documentElement || document.body).scrollLeft;
    }
    function pageScrollY() {
      if (chrome && android) {
        return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop));
      }
      return window.pageYOffset || (document.documentElement || document.body).scrollTop;
    }
    function widgetTopHeight(lineObj) {
      var height = 0;
      if (lineObj.widgets) {
        for (var i2 = 0; i2 < lineObj.widgets.length; ++i2) {
          if (lineObj.widgets[i2].above) {
            height += widgetHeight(lineObj.widgets[i2]);
          }
        }
      }
      return height;
    }
    function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {
      if (!includeWidgets) {
        var height = widgetTopHeight(lineObj);
        rect.top += height;
        rect.bottom += height;
      }
      if (context == "line") {
        return rect;
      }
      if (!context) {
        context = "local";
      }
      var yOff = heightAtLine(lineObj);
      if (context == "local") {
        yOff += paddingTop(cm.display);
      } else {
        yOff -= cm.display.viewOffset;
      }
      if (context == "page" || context == "window") {
        var lOff = cm.display.lineSpace.getBoundingClientRect();
        yOff += lOff.top + (context == "window" ? 0 : pageScrollY());
        var xOff = lOff.left + (context == "window" ? 0 : pageScrollX());
        rect.left += xOff;
        rect.right += xOff;
      }
      rect.top += yOff;
      rect.bottom += yOff;
      return rect;
    }
    function fromCoordSystem(cm, coords, context) {
      if (context == "div") {
        return coords;
      }
      var left = coords.left, top = coords.top;
      if (context == "page") {
        left -= pageScrollX();
        top -= pageScrollY();
      } else if (context == "local" || !context) {
        var localBox = cm.display.sizer.getBoundingClientRect();
        left += localBox.left;
        top += localBox.top;
      }
      var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();
      return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top};
    }
    function charCoords(cm, pos, context, lineObj, bias) {
      if (!lineObj) {
        lineObj = getLine(cm.doc, pos.line);
      }
      return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context);
    }
    function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {
      lineObj = lineObj || getLine(cm.doc, pos.line);
      if (!preparedMeasure) {
        preparedMeasure = prepareMeasureForLine(cm, lineObj);
      }
      function get(ch2, right) {
        var m = measureCharPrepared(cm, preparedMeasure, ch2, right ? "right" : "left", varHeight);
        if (right) {
          m.left = m.right;
        } else {
          m.right = m.left;
        }
        return intoCoordSystem(cm, lineObj, m, context);
      }
      var order = getOrder(lineObj, cm.doc.direction), ch = pos.ch, sticky = pos.sticky;
      if (ch >= lineObj.text.length) {
        ch = lineObj.text.length;
        sticky = "before";
      } else if (ch <= 0) {
        ch = 0;
        sticky = "after";
      }
      if (!order) {
        return get(sticky == "before" ? ch - 1 : ch, sticky == "before");
      }
      function getBidi(ch2, partPos2, invert) {
        var part = order[partPos2], right = part.level == 1;
        return get(invert ? ch2 - 1 : ch2, right != invert);
      }
      var partPos = getBidiPartAt(order, ch, sticky);
      var other = bidiOther;
      var val = getBidi(ch, partPos, sticky == "before");
      if (other != null) {
        val.other = getBidi(ch, other, sticky != "before");
      }
      return val;
    }
    function estimateCoords(cm, pos) {
      var left = 0;
      pos = clipPos(cm.doc, pos);
      if (!cm.options.lineWrapping) {
        left = charWidth(cm.display) * pos.ch;
      }
      var lineObj = getLine(cm.doc, pos.line);
      var top = heightAtLine(lineObj) + paddingTop(cm.display);
      return {left, right: left, top, bottom: top + lineObj.height};
    }
    function PosWithInfo(line, ch, sticky, outside, xRel) {
      var pos = Pos(line, ch, sticky);
      pos.xRel = xRel;
      if (outside) {
        pos.outside = outside;
      }
      return pos;
    }
    function coordsChar(cm, x, y) {
      var doc = cm.doc;
      y += cm.display.viewOffset;
      if (y < 0) {
        return PosWithInfo(doc.first, 0, null, -1, -1);
      }
      var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;
      if (lineN > last) {
        return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, 1, 1);
      }
      if (x < 0) {
        x = 0;
      }
      var lineObj = getLine(doc, lineN);
      for (; ; ) {
        var found = coordsCharInner(cm, lineObj, lineN, x, y);
        var collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 || found.outside > 0 ? 1 : 0));
        if (!collapsed) {
          return found;
        }
        var rangeEnd = collapsed.find(1);
        if (rangeEnd.line == lineN) {
          return rangeEnd;
        }
        lineObj = getLine(doc, lineN = rangeEnd.line);
      }
    }
    function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {
      y -= widgetTopHeight(lineObj);
      var end = lineObj.text.length;
      var begin = findFirst(function(ch) {
        return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y;
      }, end, 0);
      end = findFirst(function(ch) {
        return measureCharPrepared(cm, preparedMeasure, ch).top > y;
      }, begin, end);
      return {begin, end};
    }
    function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {
      if (!preparedMeasure) {
        preparedMeasure = prepareMeasureForLine(cm, lineObj);
      }
      var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), "line").top;
      return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop);
    }
    function boxIsAfter(box, x, y, left) {
      return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x;
    }
    function coordsCharInner(cm, lineObj, lineNo2, x, y) {
      y -= heightAtLine(lineObj);
      var preparedMeasure = prepareMeasureForLine(cm, lineObj);
      var widgetHeight2 = widgetTopHeight(lineObj);
      var begin = 0, end = lineObj.text.length, ltr = true;
      var order = getOrder(lineObj, cm.doc.direction);
      if (order) {
        var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)(cm, lineObj, lineNo2, preparedMeasure, order, x, y);
        ltr = part.level != 1;
        begin = ltr ? part.from : part.to - 1;
        end = ltr ? part.to : part.from - 1;
      }
      var chAround = null, boxAround = null;
      var ch = findFirst(function(ch2) {
        var box = measureCharPrepared(cm, preparedMeasure, ch2);
        box.top += widgetHeight2;
        box.bottom += widgetHeight2;
        if (!boxIsAfter(box, x, y, false)) {
          return false;
        }
        if (box.top <= y && box.left <= x) {
          chAround = ch2;
          boxAround = box;
        }
        return true;
      }, begin, end);
      var baseX, sticky, outside = false;
      if (boxAround) {
        var atLeft = x - boxAround.left < boxAround.right - x, atStart = atLeft == ltr;
        ch = chAround + (atStart ? 0 : 1);
        sticky = atStart ? "after" : "before";
        baseX = atLeft ? boxAround.left : boxAround.right;
      } else {
        if (!ltr && (ch == end || ch == begin)) {
          ch++;
        }
        sticky = ch == 0 ? "after" : ch == lineObj.text.length ? "before" : measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight2 <= y == ltr ? "after" : "before";
        var coords = cursorCoords(cm, Pos(lineNo2, ch, sticky), "line", lineObj, preparedMeasure);
        baseX = coords.left;
        outside = y < coords.top ? -1 : y >= coords.bottom ? 1 : 0;
      }
      ch = skipExtendingChars(lineObj.text, ch, 1);
      return PosWithInfo(lineNo2, ch, sticky, outside, x - baseX);
    }
    function coordsBidiPart(cm, lineObj, lineNo2, preparedMeasure, order, x, y) {
      var index = findFirst(function(i2) {
        var part2 = order[i2], ltr2 = part2.level != 1;
        return boxIsAfter(cursorCoords(cm, Pos(lineNo2, ltr2 ? part2.to : part2.from, ltr2 ? "before" : "after"), "line", lineObj, preparedMeasure), x, y, true);
      }, 0, order.length - 1);
      var part = order[index];
      if (index > 0) {
        var ltr = part.level != 1;
        var start = cursorCoords(cm, Pos(lineNo2, ltr ? part.from : part.to, ltr ? "after" : "before"), "line", lineObj, preparedMeasure);
        if (boxIsAfter(start, x, y, true) && start.top > y) {
          part = order[index - 1];
        }
      }
      return part;
    }
    function coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {
      var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);
      var begin = ref.begin;
      var end = ref.end;
      if (/\s/.test(lineObj.text.charAt(end - 1))) {
        end--;
      }
      var part = null, closestDist = null;
      for (var i2 = 0; i2 < order.length; i2++) {
        var p = order[i2];
        if (p.from >= end || p.to <= begin) {
          continue;
        }
        var ltr = p.level != 1;
        var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right;
        var dist = endX < x ? x - endX + 1e9 : endX - x;
        if (!part || closestDist > dist) {
          part = p;
          closestDist = dist;
        }
      }
      if (!part) {
        part = order[order.length - 1];
      }
      if (part.from < begin) {
        part = {from: begin, to: part.to, level: part.level};
      }
      if (part.to > end) {
        part = {from: part.from, to: end, level: part.level};
      }
      return part;
    }
    var measureText;
    function textHeight(display) {
      if (display.cachedTextHeight != null) {
        return display.cachedTextHeight;
      }
      if (measureText == null) {
        measureText = elt("pre", null, "CodeMirror-line-like");
        for (var i2 = 0; i2 < 49; ++i2) {
          measureText.appendChild(document.createTextNode("x"));
          measureText.appendChild(elt("br"));
        }
        measureText.appendChild(document.createTextNode("x"));
      }
      removeChildrenAndAdd(display.measure, measureText);
      var height = measureText.offsetHeight / 50;
      if (height > 3) {
        display.cachedTextHeight = height;
      }
      removeChildren(display.measure);
      return height || 1;
    }
    function charWidth(display) {
      if (display.cachedCharWidth != null) {
        return display.cachedCharWidth;
      }
      var anchor = elt("span", "xxxxxxxxxx");
      var pre = elt("pre", [anchor], "CodeMirror-line-like");
      removeChildrenAndAdd(display.measure, pre);
      var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;
      if (width > 2) {
        display.cachedCharWidth = width;
      }
      return width || 10;
    }
    function getDimensions(cm) {
      var d = cm.display, left = {}, width = {};
      var gutterLeft = d.gutters.clientLeft;
      for (var n = d.gutters.firstChild, i2 = 0; n; n = n.nextSibling, ++i2) {
        var id = cm.display.gutterSpecs[i2].className;
        left[id] = n.offsetLeft + n.clientLeft + gutterLeft;
        width[id] = n.clientWidth;
      }
      return {
        fixedPos: compensateForHScroll(d),
        gutterTotalWidth: d.gutters.offsetWidth,
        gutterLeft: left,
        gutterWidth: width,
        wrapperWidth: d.wrapper.clientWidth
      };
    }
    function compensateForHScroll(display) {
      return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left;
    }
    function estimateHeight(cm) {
      var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;
      var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);
      return function(line) {
        if (lineIsHidden(cm.doc, line)) {
          return 0;
        }
        var widgetsHeight = 0;
        if (line.widgets) {
          for (var i2 = 0; i2 < line.widgets.length; i2++) {
            if (line.widgets[i2].height) {
              widgetsHeight += line.widgets[i2].height;
            }
          }
        }
        if (wrapping) {
          return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th;
        } else {
          return widgetsHeight + th;
        }
      };
    }
    function estimateLineHeights(cm) {
      var doc = cm.doc, est = estimateHeight(cm);
      doc.iter(function(line) {
        var estHeight = est(line);
        if (estHeight != line.height) {
          updateLineHeight(line, estHeight);
        }
      });
    }
    function posFromMouse(cm, e, liberal, forRect) {
      var display = cm.display;
      if (!liberal && e_target(e).getAttribute("cm-not-content") == "true") {
        return null;
      }
      var x, y, space = display.lineSpace.getBoundingClientRect();
      try {
        x = e.clientX - space.left;
        y = e.clientY - space.top;
      } catch (e$1) {
        return null;
      }
      var coords = coordsChar(cm, x, y), line;
      if (forRect && coords.xRel > 0 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {
        var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;
        coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));
      }
      return coords;
    }
    function findViewIndex(cm, n) {
      if (n >= cm.display.viewTo) {
        return null;
      }
      n -= cm.display.viewFrom;
      if (n < 0) {
        return null;
      }
      var view = cm.display.view;
      for (var i2 = 0; i2 < view.length; i2++) {
        n -= view[i2].size;
        if (n < 0) {
          return i2;
        }
      }
    }
    function regChange(cm, from, to, lendiff) {
      if (from == null) {
        from = cm.doc.first;
      }
      if (to == null) {
        to = cm.doc.first + cm.doc.size;
      }
      if (!lendiff) {
        lendiff = 0;
      }
      var display = cm.display;
      if (lendiff && to < display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers > from)) {
        display.updateLineNumbers = from;
      }
      cm.curOp.viewChanged = true;
      if (from >= display.viewTo) {
        if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo) {
          resetView(cm);
        }
      } else if (to <= display.viewFrom) {
        if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {
          resetView(cm);
        } else {
          display.viewFrom += lendiff;
          display.viewTo += lendiff;
        }
      } else if (from <= display.viewFrom && to >= display.viewTo) {
        resetView(cm);
      } else if (from <= display.viewFrom) {
        var cut = viewCuttingPoint(cm, to, to + lendiff, 1);
        if (cut) {
          display.view = display.view.slice(cut.index);
          display.viewFrom = cut.lineN;
          display.viewTo += lendiff;
        } else {
          resetView(cm);
        }
      } else if (to >= display.viewTo) {
        var cut$1 = viewCuttingPoint(cm, from, from, -1);
        if (cut$1) {
          display.view = display.view.slice(0, cut$1.index);
          display.viewTo = cut$1.lineN;
        } else {
          resetView(cm);
        }
      } else {
        var cutTop = viewCuttingPoint(cm, from, from, -1);
        var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);
        if (cutTop && cutBot) {
          display.view = display.view.slice(0, cutTop.index).concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN)).concat(display.view.slice(cutBot.index));
          display.viewTo += lendiff;
        } else {
          resetView(cm);
        }
      }
      var ext = display.externalMeasured;
      if (ext) {
        if (to < ext.lineN) {
          ext.lineN += lendiff;
        } else if (from < ext.lineN + ext.size) {
          display.externalMeasured = null;
        }
      }
    }
    function regLineChange(cm, line, type) {
      cm.curOp.viewChanged = true;
      var display = cm.display, ext = cm.display.externalMeasured;
      if (ext && line >= ext.lineN && line < ext.lineN + ext.size) {
        display.externalMeasured = null;
      }
      if (line < display.viewFrom || line >= display.viewTo) {
        return;
      }
      var lineView = display.view[findViewIndex(cm, line)];
      if (lineView.node == null) {
        return;
      }
      var arr = lineView.changes || (lineView.changes = []);
      if (indexOf(arr, type) == -1) {
        arr.push(type);
      }
    }
    function resetView(cm) {
      cm.display.viewFrom = cm.display.viewTo = cm.doc.first;
      cm.display.view = [];
      cm.display.viewOffset = 0;
    }
    function viewCuttingPoint(cm, oldN, newN, dir) {
      var index = findViewIndex(cm, oldN), diff, view = cm.display.view;
      if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size) {
        return {index, lineN: newN};
      }
      var n = cm.display.viewFrom;
      for (var i2 = 0; i2 < index; i2++) {
        n += view[i2].size;
      }
      if (n != oldN) {
        if (dir > 0) {
          if (index == view.length - 1) {
            return null;
          }
          diff = n + view[index].size - oldN;
          index++;
        } else {
          diff = n - oldN;
        }
        oldN += diff;
        newN += diff;
      }
      while (visualLineNo(cm.doc, newN) != newN) {
        if (index == (dir < 0 ? 0 : view.length - 1)) {
          return null;
        }
        newN += dir * view[index - (dir < 0 ? 1 : 0)].size;
        index += dir;
      }
      return {index, lineN: newN};
    }
    function adjustView(cm, from, to) {
      var display = cm.display, view = display.view;
      if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {
        display.view = buildViewArray(cm, from, to);
        display.viewFrom = from;
      } else {
        if (display.viewFrom > from) {
          display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view);
        } else if (display.viewFrom < from) {
          display.view = display.view.slice(findViewIndex(cm, from));
        }
        display.viewFrom = from;
        if (display.viewTo < to) {
          display.view = display.view.concat(buildViewArray(cm, display.viewTo, to));
        } else if (display.viewTo > to) {
          display.view = display.view.slice(0, findViewIndex(cm, to));
        }
      }
      display.viewTo = to;
    }
    function countDirtyView(cm) {
      var view = cm.display.view, dirty = 0;
      for (var i2 = 0; i2 < view.length; i2++) {
        var lineView = view[i2];
        if (!lineView.hidden && (!lineView.node || lineView.changes)) {
          ++dirty;
        }
      }
      return dirty;
    }
    function updateSelection(cm) {
      cm.display.input.showSelection(cm.display.input.prepareSelection());
    }
    function prepareSelection(cm, primary) {
      if (primary === void 0)
        primary = true;
      var doc = cm.doc, result = {};
      var curFragment = result.cursors = document.createDocumentFragment();
      var selFragment = result.selection = document.createDocumentFragment();
      for (var i2 = 0; i2 < doc.sel.ranges.length; i2++) {
        if (!primary && i2 == doc.sel.primIndex) {
          continue;
        }
        var range2 = doc.sel.ranges[i2];
        if (range2.from().line >= cm.display.viewTo || range2.to().line < cm.display.viewFrom) {
          continue;
        }
        var collapsed = range2.empty();
        if (collapsed || cm.options.showCursorWhenSelecting) {
          drawSelectionCursor(cm, range2.head, curFragment);
        }
        if (!collapsed) {
          drawSelectionRange(cm, range2, selFragment);
        }
      }
      return result;
    }
    function drawSelectionCursor(cm, head, output) {
      var pos = cursorCoords(cm, head, "div", null, null, !cm.options.singleCursorHeightPerLine);
      var cursor = output.appendChild(elt("div", "\xA0", "CodeMirror-cursor"));
      cursor.style.left = pos.left + "px";
      cursor.style.top = pos.top + "px";
      cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + "px";
      if (pos.other) {
        var otherCursor = output.appendChild(elt("div", "\xA0", "CodeMirror-cursor CodeMirror-secondarycursor"));
        otherCursor.style.display = "";
        otherCursor.style.left = pos.other.left + "px";
        otherCursor.style.top = pos.other.top + "px";
        otherCursor.style.height = (pos.other.bottom - pos.other.top) * 0.85 + "px";
      }
    }
    function cmpCoords(a, b) {
      return a.top - b.top || a.left - b.left;
    }
    function drawSelectionRange(cm, range2, output) {
      var display = cm.display, doc = cm.doc;
      var fragment = document.createDocumentFragment();
      var padding = paddingH(cm.display), leftSide = padding.left;
      var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;
      var docLTR = doc.direction == "ltr";
      function add(left, top, width, bottom) {
        if (top < 0) {
          top = 0;
        }
        top = Math.round(top);
        bottom = Math.round(bottom);
        fragment.appendChild(elt("div", null, "CodeMirror-selected", "position: absolute; left: " + left + "px;\n                             top: " + top + "px; width: " + (width == null ? rightSide - left : width) + "px;\n                             height: " + (bottom - top) + "px"));
      }
      function drawForLine(line, fromArg, toArg) {
        var lineObj = getLine(doc, line);
        var lineLen = lineObj.text.length;
        var start, end;
        function coords(ch, bias) {
          return charCoords(cm, Pos(line, ch), "div", lineObj, bias);
        }
        function wrapX(pos, dir, side) {
          var extent = wrappedLineExtentChar(cm, lineObj, null, pos);
          var prop2 = dir == "ltr" == (side == "after") ? "left" : "right";
          var ch = side == "after" ? extent.begin : extent.end - (/\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);
          return coords(ch, prop2)[prop2];
        }
        var order = getOrder(lineObj, doc.direction);
        iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function(from, to, dir, i2) {
          var ltr = dir == "ltr";
          var fromPos = coords(from, ltr ? "left" : "right");
          var toPos = coords(to - 1, ltr ? "right" : "left");
          var openStart = fromArg == null && from == 0, openEnd = toArg == null && to == lineLen;
          var first = i2 == 0, last = !order || i2 == order.length - 1;
          if (toPos.top - fromPos.top <= 3) {
            var openLeft = (docLTR ? openStart : openEnd) && first;
            var openRight = (docLTR ? openEnd : openStart) && last;
            var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;
            var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;
            add(left, fromPos.top, right - left, fromPos.bottom);
          } else {
            var topLeft, topRight, botLeft, botRight;
            if (ltr) {
              topLeft = docLTR && openStart && first ? leftSide : fromPos.left;
              topRight = docLTR ? rightSide : wrapX(from, dir, "before");
              botLeft = docLTR ? leftSide : wrapX(to, dir, "after");
              botRight = docLTR && openEnd && last ? rightSide : toPos.right;
            } else {
              topLeft = !docLTR ? leftSide : wrapX(from, dir, "before");
              topRight = !docLTR && openStart && first ? rightSide : fromPos.right;
              botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;
              botRight = !docLTR ? rightSide : wrapX(to, dir, "after");
            }
            add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);
            if (fromPos.bottom < toPos.top) {
              add(leftSide, fromPos.bottom, null, toPos.top);
            }
            add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);
          }
          if (!start || cmpCoords(fromPos, start) < 0) {
            start = fromPos;
          }
          if (cmpCoords(toPos, start) < 0) {
            start = toPos;
          }
          if (!end || cmpCoords(fromPos, end) < 0) {
            end = fromPos;
          }
          if (cmpCoords(toPos, end) < 0) {
            end = toPos;
          }
        });
        return {start, end};
      }
      var sFrom = range2.from(), sTo = range2.to();
      if (sFrom.line == sTo.line) {
        drawForLine(sFrom.line, sFrom.ch, sTo.ch);
      } else {
        var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);
        var singleVLine = visualLine(fromLine) == visualLine(toLine);
        var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;
        var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;
        if (singleVLine) {
          if (leftEnd.top < rightStart.top - 2) {
            add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);
            add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);
          } else {
            add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);
          }
        }
        if (leftEnd.bottom < rightStart.top) {
          add(leftSide, leftEnd.bottom, null, rightStart.top);
        }
      }
      output.appendChild(fragment);
    }
    function restartBlink(cm) {
      if (!cm.state.focused) {
        return;
      }
      var display = cm.display;
      clearInterval(display.blinker);
      var on2 = true;
      display.cursorDiv.style.visibility = "";
      if (cm.options.cursorBlinkRate > 0) {
        display.blinker = setInterval(function() {
          return display.cursorDiv.style.visibility = (on2 = !on2) ? "" : "hidden";
        }, cm.options.cursorBlinkRate);
      } else if (cm.options.cursorBlinkRate < 0) {
        display.cursorDiv.style.visibility = "hidden";
      }
    }
    function ensureFocus(cm) {
      if (!cm.state.focused) {
        cm.display.input.focus();
        onFocus(cm);
      }
    }
    function delayBlurEvent(cm) {
      cm.state.delayingBlurEvent = true;
      setTimeout(function() {
        if (cm.state.delayingBlurEvent) {
          cm.state.delayingBlurEvent = false;
          onBlur(cm);
        }
      }, 100);
    }
    function onFocus(cm, e) {
      if (cm.state.delayingBlurEvent) {
        cm.state.delayingBlurEvent = false;
      }
      if (cm.options.readOnly == "nocursor") {
        return;
      }
      if (!cm.state.focused) {
        signal(cm, "focus", cm, e);
        cm.state.focused = true;
        addClass(cm.display.wrapper, "CodeMirror-focused");
        if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {
          cm.display.input.reset();
          if (webkit) {
            setTimeout(function() {
              return cm.display.input.reset(true);
            }, 20);
          }
        }
        cm.display.input.receivedFocus();
      }
      restartBlink(cm);
    }
    function onBlur(cm, e) {
      if (cm.state.delayingBlurEvent) {
        return;
      }
      if (cm.state.focused) {
        signal(cm, "blur", cm, e);
        cm.state.focused = false;
        rmClass(cm.display.wrapper, "CodeMirror-focused");
      }
      clearInterval(cm.display.blinker);
      setTimeout(function() {
        if (!cm.state.focused) {
          cm.display.shift = false;
        }
      }, 150);
    }
    function updateHeightsInViewport(cm) {
      var display = cm.display;
      var prevBottom = display.lineDiv.offsetTop;
      for (var i2 = 0; i2 < display.view.length; i2++) {
        var cur = display.view[i2], wrapping = cm.options.lineWrapping;
        var height = void 0, width = 0;
        if (cur.hidden) {
          continue;
        }
        if (ie && ie_version < 8) {
          var bot = cur.node.offsetTop + cur.node.offsetHeight;
          height = bot - prevBottom;
          prevBottom = bot;
        } else {
          var box = cur.node.getBoundingClientRect();
          height = box.bottom - box.top;
          if (!wrapping && cur.text.firstChild) {
            width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1;
          }
        }
        var diff = cur.line.height - height;
        if (diff > 5e-3 || diff < -5e-3) {
          updateLineHeight(cur.line, height);
          updateWidgetHeight(cur.line);
          if (cur.rest) {
            for (var j = 0; j < cur.rest.length; j++) {
              updateWidgetHeight(cur.rest[j]);
            }
          }
        }
        if (width > cm.display.sizerWidth) {
          var chWidth = Math.ceil(width / charWidth(cm.display));
          if (chWidth > cm.display.maxLineLength) {
            cm.display.maxLineLength = chWidth;
            cm.display.maxLine = cur.line;
            cm.display.maxLineChanged = true;
          }
        }
      }
    }
    function updateWidgetHeight(line) {
      if (line.widgets) {
        for (var i2 = 0; i2 < line.widgets.length; ++i2) {
          var w = line.widgets[i2], parent = w.node.parentNode;
          if (parent) {
            w.height = parent.offsetHeight;
          }
        }
      }
    }
    function visibleLines(display, doc, viewport) {
      var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;
      top = Math.floor(top - paddingTop(display));
      var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;
      var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);
      if (viewport && viewport.ensure) {
        var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;
        if (ensureFrom < from) {
          from = ensureFrom;
          to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);
        } else if (Math.min(ensureTo, doc.lastLine()) >= to) {
          from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);
          to = ensureTo;
        }
      }
      return {from, to: Math.max(to, from + 1)};
    }
    function maybeScrollWindow(cm, rect) {
      if (signalDOMEvent(cm, "scrollCursorIntoView")) {
        return;
      }
      var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;
      if (rect.top + box.top < 0) {
        doScroll = true;
      } else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) {
        doScroll = false;
      }
      if (doScroll != null && !phantom) {
        var scrollNode = elt("div", "\u200B", null, "position: absolute;\n                         top: " + (rect.top - display.viewOffset - paddingTop(cm.display)) + "px;\n                         height: " + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + "px;\n                         left: " + rect.left + "px; width: " + Math.max(2, rect.right - rect.left) + "px;");
        cm.display.lineSpace.appendChild(scrollNode);
        scrollNode.scrollIntoView(doScroll);
        cm.display.lineSpace.removeChild(scrollNode);
      }
    }
    function scrollPosIntoView(cm, pos, end, margin) {
      if (margin == null) {
        margin = 0;
      }
      var rect;
      if (!cm.options.lineWrapping && pos == end) {
        pos = pos.ch ? Pos(pos.line, pos.sticky == "before" ? pos.ch - 1 : pos.ch, "after") : pos;
        end = pos.sticky == "before" ? Pos(pos.line, pos.ch + 1, "before") : pos;
      }
      for (var limit = 0; limit < 5; limit++) {
        var changed = false;
        var coords = cursorCoords(cm, pos);
        var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);
        rect = {
          left: Math.min(coords.left, endCoords.left),
          top: Math.min(coords.top, endCoords.top) - margin,
          right: Math.max(coords.left, endCoords.left),
          bottom: Math.max(coords.bottom, endCoords.bottom) + margin
        };
        var scrollPos = calculateScrollPos(cm, rect);
        var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;
        if (scrollPos.scrollTop != null) {
          updateScrollTop(cm, scrollPos.scrollTop);
          if (Math.abs(cm.doc.scrollTop - startTop) > 1) {
            changed = true;
          }
        }
        if (scrollPos.scrollLeft != null) {
          setScrollLeft(cm, scrollPos.scrollLeft);
          if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) {
            changed = true;
          }
        }
        if (!changed) {
          break;
        }
      }
      return rect;
    }
    function scrollIntoView(cm, rect) {
      var scrollPos = calculateScrollPos(cm, rect);
      if (scrollPos.scrollTop != null) {
        updateScrollTop(cm, scrollPos.scrollTop);
      }
      if (scrollPos.scrollLeft != null) {
        setScrollLeft(cm, scrollPos.scrollLeft);
      }
    }
    function calculateScrollPos(cm, rect) {
      var display = cm.display, snapMargin = textHeight(cm.display);
      if (rect.top < 0) {
        rect.top = 0;
      }
      var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;
      var screen2 = displayHeight(cm), result = {};
      if (rect.bottom - rect.top > screen2) {
        rect.bottom = rect.top + screen2;
      }
      var docBottom = cm.doc.height + paddingVert(display);
      var atTop = rect.top < snapMargin, atBottom = rect.bottom > docBottom - snapMargin;
      if (rect.top < screentop) {
        result.scrollTop = atTop ? 0 : rect.top;
      } else if (rect.bottom > screentop + screen2) {
        var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen2);
        if (newTop != screentop) {
          result.scrollTop = newTop;
        }
      }
      var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;
      var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);
      var tooWide = rect.right - rect.left > screenw;
      if (tooWide) {
        rect.right = rect.left + screenw;
      }
      if (rect.left < 10) {
        result.scrollLeft = 0;
      } else if (rect.left < screenleft) {
        result.scrollLeft = Math.max(0, rect.left - (tooWide ? 0 : 10));
      } else if (rect.right > screenw + screenleft - 3) {
        result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw;
      }
      return result;
    }
    function addToScrollTop(cm, top) {
      if (top == null) {
        return;
      }
      resolveScrollToPos(cm);
      cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;
    }
    function ensureCursorVisible(cm) {
      resolveScrollToPos(cm);
      var cur = cm.getCursor();
      cm.curOp.scrollToPos = {from: cur, to: cur, margin: cm.options.cursorScrollMargin};
    }
    function scrollToCoords(cm, x, y) {
      if (x != null || y != null) {
        resolveScrollToPos(cm);
      }
      if (x != null) {
        cm.curOp.scrollLeft = x;
      }
      if (y != null) {
        cm.curOp.scrollTop = y;
      }
    }
    function scrollToRange(cm, range2) {
      resolveScrollToPos(cm);
      cm.curOp.scrollToPos = range2;
    }
    function resolveScrollToPos(cm) {
      var range2 = cm.curOp.scrollToPos;
      if (range2) {
        cm.curOp.scrollToPos = null;
        var from = estimateCoords(cm, range2.from), to = estimateCoords(cm, range2.to);
        scrollToCoordsRange(cm, from, to, range2.margin);
      }
    }
    function scrollToCoordsRange(cm, from, to, margin) {
      var sPos = calculateScrollPos(cm, {
        left: Math.min(from.left, to.left),
        top: Math.min(from.top, to.top) - margin,
        right: Math.max(from.right, to.right),
        bottom: Math.max(from.bottom, to.bottom) + margin
      });
      scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);
    }
    function updateScrollTop(cm, val) {
      if (Math.abs(cm.doc.scrollTop - val) < 2) {
        return;
      }
      if (!gecko) {
        updateDisplaySimple(cm, {top: val});
      }
      setScrollTop(cm, val, true);
      if (gecko) {
        updateDisplaySimple(cm);
      }
      startWorker(cm, 100);
    }
    function setScrollTop(cm, val, forceScroll) {
      val = Math.max(0, Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val));
      if (cm.display.scroller.scrollTop == val && !forceScroll) {
        return;
      }
      cm.doc.scrollTop = val;
      cm.display.scrollbars.setScrollTop(val);
      if (cm.display.scroller.scrollTop != val) {
        cm.display.scroller.scrollTop = val;
      }
    }
    function setScrollLeft(cm, val, isScroller, forceScroll) {
      val = Math.max(0, Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth));
      if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) {
        return;
      }
      cm.doc.scrollLeft = val;
      alignHorizontally(cm);
      if (cm.display.scroller.scrollLeft != val) {
        cm.display.scroller.scrollLeft = val;
      }
      cm.display.scrollbars.setScrollLeft(val);
    }
    function measureForScrollbars(cm) {
      var d = cm.display, gutterW = d.gutters.offsetWidth;
      var docH = Math.round(cm.doc.height + paddingVert(cm.display));
      return {
        clientHeight: d.scroller.clientHeight,
        viewHeight: d.wrapper.clientHeight,
        scrollWidth: d.scroller.scrollWidth,
        clientWidth: d.scroller.clientWidth,
        viewWidth: d.wrapper.clientWidth,
        barLeft: cm.options.fixedGutter ? gutterW : 0,
        docHeight: docH,
        scrollHeight: docH + scrollGap(cm) + d.barHeight,
        nativeBarWidth: d.nativeBarWidth,
        gutterWidth: gutterW
      };
    }
    var NativeScrollbars = function(place, scroll, cm) {
      this.cm = cm;
      var vert = this.vert = elt("div", [elt("div", null, null, "min-width: 1px")], "CodeMirror-vscrollbar");
      var horiz = this.horiz = elt("div", [elt("div", null, null, "height: 100%; min-height: 1px")], "CodeMirror-hscrollbar");
      vert.tabIndex = horiz.tabIndex = -1;
      place(vert);
      place(horiz);
      on(vert, "scroll", function() {
        if (vert.clientHeight) {
          scroll(vert.scrollTop, "vertical");
        }
      });
      on(horiz, "scroll", function() {
        if (horiz.clientWidth) {
          scroll(horiz.scrollLeft, "horizontal");
        }
      });
      this.checkedZeroWidth = false;
      if (ie && ie_version < 8) {
        this.horiz.style.minHeight = this.vert.style.minWidth = "18px";
      }
    };
    NativeScrollbars.prototype.update = function(measure) {
      var needsH = measure.scrollWidth > measure.clientWidth + 1;
      var needsV = measure.scrollHeight > measure.clientHeight + 1;
      var sWidth = measure.nativeBarWidth;
      if (needsV) {
        this.vert.style.display = "block";
        this.vert.style.bottom = needsH ? sWidth + "px" : "0";
        var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);
        this.vert.firstChild.style.height = Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + "px";
      } else {
        this.vert.style.display = "";
        this.vert.firstChild.style.height = "0";
      }
      if (needsH) {
        this.horiz.style.display = "block";
        this.horiz.style.right = needsV ? sWidth + "px" : "0";
        this.horiz.style.left = measure.barLeft + "px";
        var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);
        this.horiz.firstChild.style.width = Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + "px";
      } else {
        this.horiz.style.display = "";
        this.horiz.firstChild.style.width = "0";
      }
      if (!this.checkedZeroWidth && measure.clientHeight > 0) {
        if (sWidth == 0) {
          this.zeroWidthHack();
        }
        this.checkedZeroWidth = true;
      }
      return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0};
    };
    NativeScrollbars.prototype.setScrollLeft = function(pos) {
      if (this.horiz.scrollLeft != pos) {
        this.horiz.scrollLeft = pos;
      }
      if (this.disableHoriz) {
        this.enableZeroWidthBar(this.horiz, this.disableHoriz, "horiz");
      }
    };
    NativeScrollbars.prototype.setScrollTop = function(pos) {
      if (this.vert.scrollTop != pos) {
        this.vert.scrollTop = pos;
      }
      if (this.disableVert) {
        this.enableZeroWidthBar(this.vert, this.disableVert, "vert");
      }
    };
    NativeScrollbars.prototype.zeroWidthHack = function() {
      var w = mac && !mac_geMountainLion ? "12px" : "18px";
      this.horiz.style.height = this.vert.style.width = w;
      this.horiz.style.pointerEvents = this.vert.style.pointerEvents = "none";
      this.disableHoriz = new Delayed();
      this.disableVert = new Delayed();
    };
    NativeScrollbars.prototype.enableZeroWidthBar = function(bar, delay, type) {
      bar.style.pointerEvents = "auto";
      function maybeDisable() {
        var box = bar.getBoundingClientRect();
        var elt2 = type == "vert" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2) : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);
        if (elt2 != bar) {
          bar.style.pointerEvents = "none";
        } else {
          delay.set(1e3, maybeDisable);
        }
      }
      delay.set(1e3, maybeDisable);
    };
    NativeScrollbars.prototype.clear = function() {
      var parent = this.horiz.parentNode;
      parent.removeChild(this.horiz);
      parent.removeChild(this.vert);
    };
    var NullScrollbars = function() {
    };
    NullScrollbars.prototype.update = function() {
      return {bottom: 0, right: 0};
    };
    NullScrollbars.prototype.setScrollLeft = function() {
    };
    NullScrollbars.prototype.setScrollTop = function() {
    };
    NullScrollbars.prototype.clear = function() {
    };
    function updateScrollbars(cm, measure) {
      if (!measure) {
        measure = measureForScrollbars(cm);
      }
      var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;
      updateScrollbarsInner(cm, measure);
      for (var i2 = 0; i2 < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i2++) {
        if (startWidth != cm.display.barWidth && cm.options.lineWrapping) {
          updateHeightsInViewport(cm);
        }
        updateScrollbarsInner(cm, measureForScrollbars(cm));
        startWidth = cm.display.barWidth;
        startHeight = cm.display.barHeight;
      }
    }
    function updateScrollbarsInner(cm, measure) {
      var d = cm.display;
      var sizes = d.scrollbars.update(measure);
      d.sizer.style.paddingRight = (d.barWidth = sizes.right) + "px";
      d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + "px";
      d.heightForcer.style.borderBottom = sizes.bottom + "px solid transparent";
      if (sizes.right && sizes.bottom) {
        d.scrollbarFiller.style.display = "block";
        d.scrollbarFiller.style.height = sizes.bottom + "px";
        d.scrollbarFiller.style.width = sizes.right + "px";
      } else {
        d.scrollbarFiller.style.display = "";
      }
      if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {
        d.gutterFiller.style.display = "block";
        d.gutterFiller.style.height = sizes.bottom + "px";
        d.gutterFiller.style.width = measure.gutterWidth + "px";
      } else {
        d.gutterFiller.style.display = "";
      }
    }
    var scrollbarModel = {native: NativeScrollbars, null: NullScrollbars};
    function initScrollbars(cm) {
      if (cm.display.scrollbars) {
        cm.display.scrollbars.clear();
        if (cm.display.scrollbars.addClass) {
          rmClass(cm.display.wrapper, cm.display.scrollbars.addClass);
        }
      }
      cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function(node) {
        cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);
        on(node, "mousedown", function() {
          if (cm.state.focused) {
            setTimeout(function() {
              return cm.display.input.focus();
            }, 0);
          }
        });
        node.setAttribute("cm-not-content", "true");
      }, function(pos, axis) {
        if (axis == "horizontal") {
          setScrollLeft(cm, pos);
        } else {
          updateScrollTop(cm, pos);
        }
      }, cm);
      if (cm.display.scrollbars.addClass) {
        addClass(cm.display.wrapper, cm.display.scrollbars.addClass);
      }
    }
    var nextOpId = 0;
    function startOperation(cm) {
      cm.curOp = {
        cm,
        viewChanged: false,
        startHeight: cm.doc.height,
        forceUpdate: false,
        updateInput: 0,
        typing: false,
        changeObjs: null,
        cursorActivityHandlers: null,
        cursorActivityCalled: 0,
        selectionChanged: false,
        updateMaxLine: false,
        scrollLeft: null,
        scrollTop: null,
        scrollToPos: null,
        focus: false,
        id: ++nextOpId
      };
      pushOperation(cm.curOp);
    }
    function endOperation(cm) {
      var op = cm.curOp;
      if (op) {
        finishOperation(op, function(group) {
          for (var i2 = 0; i2 < group.ops.length; i2++) {
            group.ops[i2].cm.curOp = null;
          }
          endOperations(group);
        });
      }
    }
    function endOperations(group) {
      var ops = group.ops;
      for (var i2 = 0; i2 < ops.length; i2++) {
        endOperation_R1(ops[i2]);
      }
      for (var i$12 = 0; i$12 < ops.length; i$12++) {
        endOperation_W1(ops[i$12]);
      }
      for (var i$22 = 0; i$22 < ops.length; i$22++) {
        endOperation_R2(ops[i$22]);
      }
      for (var i$3 = 0; i$3 < ops.length; i$3++) {
        endOperation_W2(ops[i$3]);
      }
      for (var i$4 = 0; i$4 < ops.length; i$4++) {
        endOperation_finish(ops[i$4]);
      }
    }
    function endOperation_R1(op) {
      var cm = op.cm, display = cm.display;
      maybeClipScrollbars(cm);
      if (op.updateMaxLine) {
        findMaxLine(cm);
      }
      op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null || op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom || op.scrollToPos.to.line >= display.viewTo) || display.maxLineChanged && cm.options.lineWrapping;
      op.update = op.mustUpdate && new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);
    }
    function endOperation_W1(op) {
      op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);
    }
    function endOperation_R2(op) {
      var cm = op.cm, display = cm.display;
      if (op.updatedDisplay) {
        updateHeightsInViewport(cm);
      }
      op.barMeasure = measureForScrollbars(cm);
      if (display.maxLineChanged && !cm.options.lineWrapping) {
        op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;
        cm.display.sizerWidth = op.adjustWidthTo;
        op.barMeasure.scrollWidth = Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);
        op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));
      }
      if (op.updatedDisplay || op.selectionChanged) {
        op.preparedSelection = display.input.prepareSelection();
      }
    }
    function endOperation_W2(op) {
      var cm = op.cm;
      if (op.adjustWidthTo != null) {
        cm.display.sizer.style.minWidth = op.adjustWidthTo + "px";
        if (op.maxScrollLeft < cm.doc.scrollLeft) {
          setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true);
        }
        cm.display.maxLineChanged = false;
      }
      var takeFocus = op.focus && op.focus == activeElt();
      if (op.preparedSelection) {
        cm.display.input.showSelection(op.preparedSelection, takeFocus);
      }
      if (op.updatedDisplay || op.startHeight != cm.doc.height) {
        updateScrollbars(cm, op.barMeasure);
      }
      if (op.updatedDisplay) {
        setDocumentHeight(cm, op.barMeasure);
      }
      if (op.selectionChanged) {
        restartBlink(cm);
      }
      if (cm.state.focused && op.updateInput) {
        cm.display.input.reset(op.typing);
      }
      if (takeFocus) {
        ensureFocus(op.cm);
      }
    }
    function endOperation_finish(op) {
      var cm = op.cm, display = cm.display, doc = cm.doc;
      if (op.updatedDisplay) {
        postUpdateDisplay(cm, op.update);
      }
      if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos)) {
        display.wheelStartX = display.wheelStartY = null;
      }
      if (op.scrollTop != null) {
        setScrollTop(cm, op.scrollTop, op.forceScroll);
      }
      if (op.scrollLeft != null) {
        setScrollLeft(cm, op.scrollLeft, true, true);
      }
      if (op.scrollToPos) {
        var rect = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from), clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);
        maybeScrollWindow(cm, rect);
      }
      var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;
      if (hidden) {
        for (var i2 = 0; i2 < hidden.length; ++i2) {
          if (!hidden[i2].lines.length) {
            signal(hidden[i2], "hide");
          }
        }
      }
      if (unhidden) {
        for (var i$12 = 0; i$12 < unhidden.length; ++i$12) {
          if (unhidden[i$12].lines.length) {
            signal(unhidden[i$12], "unhide");
          }
        }
      }
      if (display.wrapper.offsetHeight) {
        doc.scrollTop = cm.display.scroller.scrollTop;
      }
      if (op.changeObjs) {
        signal(cm, "changes", cm, op.changeObjs);
      }
      if (op.update) {
        op.update.finish();
      }
    }
    function runInOp(cm, f) {
      if (cm.curOp) {
        return f();
      }
      startOperation(cm);
      try {
        return f();
      } finally {
        endOperation(cm);
      }
    }
    function operation(cm, f) {
      return function() {
        if (cm.curOp) {
          return f.apply(cm, arguments);
        }
        startOperation(cm);
        try {
          return f.apply(cm, arguments);
        } finally {
          endOperation(cm);
        }
      };
    }
    function methodOp(f) {
      return function() {
        if (this.curOp) {
          return f.apply(this, arguments);
        }
        startOperation(this);
        try {
          return f.apply(this, arguments);
        } finally {
          endOperation(this);
        }
      };
    }
    function docMethodOp(f) {
      return function() {
        var cm = this.cm;
        if (!cm || cm.curOp) {
          return f.apply(this, arguments);
        }
        startOperation(cm);
        try {
          return f.apply(this, arguments);
        } finally {
          endOperation(cm);
        }
      };
    }
    function startWorker(cm, time) {
      if (cm.doc.highlightFrontier < cm.display.viewTo) {
        cm.state.highlight.set(time, bind(highlightWorker, cm));
      }
    }
    function highlightWorker(cm) {
      var doc = cm.doc;
      if (doc.highlightFrontier >= cm.display.viewTo) {
        return;
      }
      var end = +new Date() + cm.options.workTime;
      var context = getContextBefore(cm, doc.highlightFrontier);
      var changedLines = [];
      doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function(line) {
        if (context.line >= cm.display.viewFrom) {
          var oldStyles = line.styles;
          var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;
          var highlighted = highlightLine(cm, line, context, true);
          if (resetState) {
            context.state = resetState;
          }
          line.styles = highlighted.styles;
          var oldCls = line.styleClasses, newCls = highlighted.classes;
          if (newCls) {
            line.styleClasses = newCls;
          } else if (oldCls) {
            line.styleClasses = null;
          }
          var ischange = !oldStyles || oldStyles.length != line.styles.length || oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);
          for (var i2 = 0; !ischange && i2 < oldStyles.length; ++i2) {
            ischange = oldStyles[i2] != line.styles[i2];
          }
          if (ischange) {
            changedLines.push(context.line);
          }
          line.stateAfter = context.save();
          context.nextLine();
        } else {
          if (line.text.length <= cm.options.maxHighlightLength) {
            processLine(cm, line.text, context);
          }
          line.stateAfter = context.line % 5 == 0 ? context.save() : null;
          context.nextLine();
        }
        if (+new Date() > end) {
          startWorker(cm, cm.options.workDelay);
          return true;
        }
      });
      doc.highlightFrontier = context.line;
      doc.modeFrontier = Math.max(doc.modeFrontier, context.line);
      if (changedLines.length) {
        runInOp(cm, function() {
          for (var i2 = 0; i2 < changedLines.length; i2++) {
            regLineChange(cm, changedLines[i2], "text");
          }
        });
      }
    }
    var DisplayUpdate = function(cm, viewport, force) {
      var display = cm.display;
      this.viewport = viewport;
      this.visible = visibleLines(display, cm.doc, viewport);
      this.editorIsHidden = !display.wrapper.offsetWidth;
      this.wrapperHeight = display.wrapper.clientHeight;
      this.wrapperWidth = display.wrapper.clientWidth;
      this.oldDisplayWidth = displayWidth(cm);
      this.force = force;
      this.dims = getDimensions(cm);
      this.events = [];
    };
    DisplayUpdate.prototype.signal = function(emitter, type) {
      if (hasHandler(emitter, type)) {
        this.events.push(arguments);
      }
    };
    DisplayUpdate.prototype.finish = function() {
      for (var i2 = 0; i2 < this.events.length; i2++) {
        signal.apply(null, this.events[i2]);
      }
    };
    function maybeClipScrollbars(cm) {
      var display = cm.display;
      if (!display.scrollbarsClipped && display.scroller.offsetWidth) {
        display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;
        display.heightForcer.style.height = scrollGap(cm) + "px";
        display.sizer.style.marginBottom = -display.nativeBarWidth + "px";
        display.sizer.style.borderRightWidth = scrollGap(cm) + "px";
        display.scrollbarsClipped = true;
      }
    }
    function selectionSnapshot(cm) {
      if (cm.hasFocus()) {
        return null;
      }
      var active = activeElt();
      if (!active || !contains(cm.display.lineDiv, active)) {
        return null;
      }
      var result = {activeElt: active};
      if (window.getSelection) {
        var sel = window.getSelection();
        if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {
          result.anchorNode = sel.anchorNode;
          result.anchorOffset = sel.anchorOffset;
          result.focusNode = sel.focusNode;
          result.focusOffset = sel.focusOffset;
        }
      }
      return result;
    }
    function restoreSelection(snapshot) {
      if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) {
        return;
      }
      snapshot.activeElt.focus();
      if (!/^(INPUT|TEXTAREA)$/.test(snapshot.activeElt.nodeName) && snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {
        var sel = window.getSelection(), range2 = document.createRange();
        range2.setEnd(snapshot.anchorNode, snapshot.anchorOffset);
        range2.collapse(false);
        sel.removeAllRanges();
        sel.addRange(range2);
        sel.extend(snapshot.focusNode, snapshot.focusOffset);
      }
    }
    function updateDisplayIfNeeded(cm, update) {
      var display = cm.display, doc = cm.doc;
      if (update.editorIsHidden) {
        resetView(cm);
        return false;
      }
      if (!update.force && update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) && display.renderedView == display.view && countDirtyView(cm) == 0) {
        return false;
      }
      if (maybeUpdateLineNumberWidth(cm)) {
        resetView(cm);
        update.dims = getDimensions(cm);
      }
      var end = doc.first + doc.size;
      var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);
      var to = Math.min(end, update.visible.to + cm.options.viewportMargin);
      if (display.viewFrom < from && from - display.viewFrom < 20) {
        from = Math.max(doc.first, display.viewFrom);
      }
      if (display.viewTo > to && display.viewTo - to < 20) {
        to = Math.min(end, display.viewTo);
      }
      if (sawCollapsedSpans) {
        from = visualLineNo(cm.doc, from);
        to = visualLineEndNo(cm.doc, to);
      }
      var different = from != display.viewFrom || to != display.viewTo || display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;
      adjustView(cm, from, to);
      display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));
      cm.display.mover.style.top = display.viewOffset + "px";
      var toUpdate = countDirtyView(cm);
      if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo)) {
        return false;
      }
      var selSnapshot = selectionSnapshot(cm);
      if (toUpdate > 4) {
        display.lineDiv.style.display = "none";
      }
      patchDisplay(cm, display.updateLineNumbers, update.dims);
      if (toUpdate > 4) {
        display.lineDiv.style.display = "";
      }
      display.renderedView = display.view;
      restoreSelection(selSnapshot);
      removeChildren(display.cursorDiv);
      removeChildren(display.selectionDiv);
      display.gutters.style.height = display.sizer.style.minHeight = 0;
      if (different) {
        display.lastWrapHeight = update.wrapperHeight;
        display.lastWrapWidth = update.wrapperWidth;
        startWorker(cm, 400);
      }
      display.updateLineNumbers = null;
      return true;
    }
    function postUpdateDisplay(cm, update) {
      var viewport = update.viewport;
      for (var first = true; ; first = false) {
        if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {
          if (viewport && viewport.top != null) {
            viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)};
          }
          update.visible = visibleLines(cm.display, cm.doc, viewport);
          if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo) {
            break;
          }
        } else if (first) {
          update.visible = visibleLines(cm.display, cm.doc, viewport);
        }
        if (!updateDisplayIfNeeded(cm, update)) {
          break;
        }
        updateHeightsInViewport(cm);
        var barMeasure = measureForScrollbars(cm);
        updateSelection(cm);
        updateScrollbars(cm, barMeasure);
        setDocumentHeight(cm, barMeasure);
        update.force = false;
      }
      update.signal(cm, "update", cm);
      if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {
        update.signal(cm, "viewportChange", cm, cm.display.viewFrom, cm.display.viewTo);
        cm.display.reportedViewFrom = cm.display.viewFrom;
        cm.display.reportedViewTo = cm.display.viewTo;
      }
    }
    function updateDisplaySimple(cm, viewport) {
      var update = new DisplayUpdate(cm, viewport);
      if (updateDisplayIfNeeded(cm, update)) {
        updateHeightsInViewport(cm);
        postUpdateDisplay(cm, update);
        var barMeasure = measureForScrollbars(cm);
        updateSelection(cm);
        updateScrollbars(cm, barMeasure);
        setDocumentHeight(cm, barMeasure);
        update.finish();
      }
    }
    function patchDisplay(cm, updateNumbersFrom, dims) {
      var display = cm.display, lineNumbers = cm.options.lineNumbers;
      var container = display.lineDiv, cur = container.firstChild;
      function rm(node2) {
        var next = node2.nextSibling;
        if (webkit && mac && cm.display.currentWheelTarget == node2) {
          node2.style.display = "none";
        } else {
          node2.parentNode.removeChild(node2);
        }
        return next;
      }
      var view = display.view, lineN = display.viewFrom;
      for (var i2 = 0; i2 < view.length; i2++) {
        var lineView = view[i2];
        if (lineView.hidden)
          ;
        else if (!lineView.node || lineView.node.parentNode != container) {
          var node = buildLineElement(cm, lineView, lineN, dims);
          container.insertBefore(node, cur);
        } else {
          while (cur != lineView.node) {
            cur = rm(cur);
          }
          var updateNumber = lineNumbers && updateNumbersFrom != null && updateNumbersFrom <= lineN && lineView.lineNumber;
          if (lineView.changes) {
            if (indexOf(lineView.changes, "gutter") > -1) {
              updateNumber = false;
            }
            updateLineForChanges(cm, lineView, lineN, dims);
          }
          if (updateNumber) {
            removeChildren(lineView.lineNumber);
            lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));
          }
          cur = lineView.node.nextSibling;
        }
        lineN += lineView.size;
      }
      while (cur) {
        cur = rm(cur);
      }
    }
    function updateGutterSpace(display) {
      var width = display.gutters.offsetWidth;
      display.sizer.style.marginLeft = width + "px";
    }
    function setDocumentHeight(cm, measure) {
      cm.display.sizer.style.minHeight = measure.docHeight + "px";
      cm.display.heightForcer.style.top = measure.docHeight + "px";
      cm.display.gutters.style.height = measure.docHeight + cm.display.barHeight + scrollGap(cm) + "px";
    }
    function alignHorizontally(cm) {
      var display = cm.display, view = display.view;
      if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) {
        return;
      }
      var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;
      var gutterW = display.gutters.offsetWidth, left = comp + "px";
      for (var i2 = 0; i2 < view.length; i2++) {
        if (!view[i2].hidden) {
          if (cm.options.fixedGutter) {
            if (view[i2].gutter) {
              view[i2].gutter.style.left = left;
            }
            if (view[i2].gutterBackground) {
              view[i2].gutterBackground.style.left = left;
            }
          }
          var align = view[i2].alignable;
          if (align) {
            for (var j = 0; j < align.length; j++) {
              align[j].style.left = left;
            }
          }
        }
      }
      if (cm.options.fixedGutter) {
        display.gutters.style.left = comp + gutterW + "px";
      }
    }
    function maybeUpdateLineNumberWidth(cm) {
      if (!cm.options.lineNumbers) {
        return false;
      }
      var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;
      if (last.length != display.lineNumChars) {
        var test = display.measure.appendChild(elt("div", [elt("div", last)], "CodeMirror-linenumber CodeMirror-gutter-elt"));
        var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;
        display.lineGutter.style.width = "";
        display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;
        display.lineNumWidth = display.lineNumInnerWidth + padding;
        display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;
        display.lineGutter.style.width = display.lineNumWidth + "px";
        updateGutterSpace(cm.display);
        return true;
      }
      return false;
    }
    function getGutters(gutters, lineNumbers) {
      var result = [], sawLineNumbers = false;
      for (var i2 = 0; i2 < gutters.length; i2++) {
        var name = gutters[i2], style = null;
        if (typeof name != "string") {
          style = name.style;
          name = name.className;
        }
        if (name == "CodeMirror-linenumbers") {
          if (!lineNumbers) {
            continue;
          } else {
            sawLineNumbers = true;
          }
        }
        result.push({className: name, style});
      }
      if (lineNumbers && !sawLineNumbers) {
        result.push({className: "CodeMirror-linenumbers", style: null});
      }
      return result;
    }
    function renderGutters(display) {
      var gutters = display.gutters, specs = display.gutterSpecs;
      removeChildren(gutters);
      display.lineGutter = null;
      for (var i2 = 0; i2 < specs.length; ++i2) {
        var ref = specs[i2];
        var className = ref.className;
        var style = ref.style;
        var gElt = gutters.appendChild(elt("div", null, "CodeMirror-gutter " + className));
        if (style) {
          gElt.style.cssText = style;
        }
        if (className == "CodeMirror-linenumbers") {
          display.lineGutter = gElt;
          gElt.style.width = (display.lineNumWidth || 1) + "px";
        }
      }
      gutters.style.display = specs.length ? "" : "none";
      updateGutterSpace(display);
    }
    function updateGutters(cm) {
      renderGutters(cm.display);
      regChange(cm);
      alignHorizontally(cm);
    }
    function Display(place, doc, input, options) {
      var d = this;
      this.input = input;
      d.scrollbarFiller = elt("div", null, "CodeMirror-scrollbar-filler");
      d.scrollbarFiller.setAttribute("cm-not-content", "true");
      d.gutterFiller = elt("div", null, "CodeMirror-gutter-filler");
      d.gutterFiller.setAttribute("cm-not-content", "true");
      d.lineDiv = eltP("div", null, "CodeMirror-code");
      d.selectionDiv = elt("div", null, null, "position: relative; z-index: 1");
      d.cursorDiv = elt("div", null, "CodeMirror-cursors");
      d.measure = elt("div", null, "CodeMirror-measure");
      d.lineMeasure = elt("div", null, "CodeMirror-measure");
      d.lineSpace = eltP("div", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv], null, "position: relative; outline: none");
      var lines = eltP("div", [d.lineSpace], "CodeMirror-lines");
      d.mover = elt("div", [lines], null, "position: relative");
      d.sizer = elt("div", [d.mover], "CodeMirror-sizer");
      d.sizerWidth = null;
      d.heightForcer = elt("div", null, null, "position: absolute; height: " + scrollerGap + "px; width: 1px;");
      d.gutters = elt("div", null, "CodeMirror-gutters");
      d.lineGutter = null;
      d.scroller = elt("div", [d.sizer, d.heightForcer, d.gutters], "CodeMirror-scroll");
      d.scroller.setAttribute("tabIndex", "-1");
      d.wrapper = elt("div", [d.scrollbarFiller, d.gutterFiller, d.scroller], "CodeMirror");
      if (ie && ie_version < 8) {
        d.gutters.style.zIndex = -1;
        d.scroller.style.paddingRight = 0;
      }
      if (!webkit && !(gecko && mobile)) {
        d.scroller.draggable = true;
      }
      if (place) {
        if (place.appendChild) {
          place.appendChild(d.wrapper);
        } else {
          place(d.wrapper);
        }
      }
      d.viewFrom = d.viewTo = doc.first;
      d.reportedViewFrom = d.reportedViewTo = doc.first;
      d.view = [];
      d.renderedView = null;
      d.externalMeasured = null;
      d.viewOffset = 0;
      d.lastWrapHeight = d.lastWrapWidth = 0;
      d.updateLineNumbers = null;
      d.nativeBarWidth = d.barHeight = d.barWidth = 0;
      d.scrollbarsClipped = false;
      d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;
      d.alignWidgets = false;
      d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;
      d.maxLine = null;
      d.maxLineLength = 0;
      d.maxLineChanged = false;
      d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;
      d.shift = false;
      d.selForContextMenu = null;
      d.activeTouch = null;
      d.gutterSpecs = getGutters(options.gutters, options.lineNumbers);
      renderGutters(d);
      input.init(d);
    }
    var wheelSamples = 0, wheelPixelsPerUnit = null;
    if (ie) {
      wheelPixelsPerUnit = -0.53;
    } else if (gecko) {
      wheelPixelsPerUnit = 15;
    } else if (chrome) {
      wheelPixelsPerUnit = -0.7;
    } else if (safari) {
      wheelPixelsPerUnit = -1 / 3;
    }
    function wheelEventDelta(e) {
      var dx = e.wheelDeltaX, dy = e.wheelDeltaY;
      if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) {
        dx = e.detail;
      }
      if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) {
        dy = e.detail;
      } else if (dy == null) {
        dy = e.wheelDelta;
      }
      return {x: dx, y: dy};
    }
    function wheelEventPixels(e) {
      var delta = wheelEventDelta(e);
      delta.x *= wheelPixelsPerUnit;
      delta.y *= wheelPixelsPerUnit;
      return delta;
    }
    function onScrollWheel(cm, e) {
      var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;
      var display = cm.display, scroll = display.scroller;
      var canScrollX = scroll.scrollWidth > scroll.clientWidth;
      var canScrollY = scroll.scrollHeight > scroll.clientHeight;
      if (!(dx && canScrollX || dy && canScrollY)) {
        return;
      }
      if (dy && mac && webkit) {
        outer:
          for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {
            for (var i2 = 0; i2 < view.length; i2++) {
              if (view[i2].node == cur) {
                cm.display.currentWheelTarget = cur;
                break outer;
              }
            }
          }
      }
      if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {
        if (dy && canScrollY) {
          updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit));
        }
        setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit));
        if (!dy || dy && canScrollY) {
          e_preventDefault(e);
        }
        display.wheelStartX = null;
        return;
      }
      if (dy && wheelPixelsPerUnit != null) {
        var pixels = dy * wheelPixelsPerUnit;
        var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;
        if (pixels < 0) {
          top = Math.max(0, top + pixels - 50);
        } else {
          bot = Math.min(cm.doc.height, bot + pixels + 50);
        }
        updateDisplaySimple(cm, {top, bottom: bot});
      }
      if (wheelSamples < 20) {
        if (display.wheelStartX == null) {
          display.wheelStartX = scroll.scrollLeft;
          display.wheelStartY = scroll.scrollTop;
          display.wheelDX = dx;
          display.wheelDY = dy;
          setTimeout(function() {
            if (display.wheelStartX == null) {
              return;
            }
            var movedX = scroll.scrollLeft - display.wheelStartX;
            var movedY = scroll.scrollTop - display.wheelStartY;
            var sample = movedY && display.wheelDY && movedY / display.wheelDY || movedX && display.wheelDX && movedX / display.wheelDX;
            display.wheelStartX = display.wheelStartY = null;
            if (!sample) {
              return;
            }
            wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);
            ++wheelSamples;
          }, 200);
        } else {
          display.wheelDX += dx;
          display.wheelDY += dy;
        }
      }
    }
    var Selection = function(ranges, primIndex) {
      this.ranges = ranges;
      this.primIndex = primIndex;
    };
    Selection.prototype.primary = function() {
      return this.ranges[this.primIndex];
    };
    Selection.prototype.equals = function(other) {
      if (other == this) {
        return true;
      }
      if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) {
        return false;
      }
      for (var i2 = 0; i2 < this.ranges.length; i2++) {
        var here = this.ranges[i2], there = other.ranges[i2];
        if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) {
          return false;
        }
      }
      return true;
    };
    Selection.prototype.deepCopy = function() {
      var out = [];
      for (var i2 = 0; i2 < this.ranges.length; i2++) {
        out[i2] = new Range(copyPos(this.ranges[i2].anchor), copyPos(this.ranges[i2].head));
      }
      return new Selection(out, this.primIndex);
    };
    Selection.prototype.somethingSelected = function() {
      for (var i2 = 0; i2 < this.ranges.length; i2++) {
        if (!this.ranges[i2].empty()) {
          return true;
        }
      }
      return false;
    };
    Selection.prototype.contains = function(pos, end) {
      if (!end) {
        end = pos;
      }
      for (var i2 = 0; i2 < this.ranges.length; i2++) {
        var range2 = this.ranges[i2];
        if (cmp(end, range2.from()) >= 0 && cmp(pos, range2.to()) <= 0) {
          return i2;
        }
      }
      return -1;
    };
    var Range = function(anchor, head) {
      this.anchor = anchor;
      this.head = head;
    };
    Range.prototype.from = function() {
      return minPos(this.anchor, this.head);
    };
    Range.prototype.to = function() {
      return maxPos(this.anchor, this.head);
    };
    Range.prototype.empty = function() {
      return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;
    };
    function normalizeSelection(cm, ranges, primIndex) {
      var mayTouch = cm && cm.options.selectionsMayTouch;
      var prim = ranges[primIndex];
      ranges.sort(function(a, b) {
        return cmp(a.from(), b.from());
      });
      primIndex = indexOf(ranges, prim);
      for (var i2 = 1; i2 < ranges.length; i2++) {
        var cur = ranges[i2], prev = ranges[i2 - 1];
        var diff = cmp(prev.to(), cur.from());
        if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {
          var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());
          var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;
          if (i2 <= primIndex) {
            --primIndex;
          }
          ranges.splice(--i2, 2, new Range(inv ? to : from, inv ? from : to));
        }
      }
      return new Selection(ranges, primIndex);
    }
    function simpleSelection(anchor, head) {
      return new Selection([new Range(anchor, head || anchor)], 0);
    }
    function changeEnd(change) {
      if (!change.text) {
        return change.to;
      }
      return Pos(change.from.line + change.text.length - 1, lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0));
    }
    function adjustForChange(pos, change) {
      if (cmp(pos, change.from) < 0) {
        return pos;
      }
      if (cmp(pos, change.to) <= 0) {
        return changeEnd(change);
      }
      var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;
      if (pos.line == change.to.line) {
        ch += changeEnd(change).ch - change.to.ch;
      }
      return Pos(line, ch);
    }
    function computeSelAfterChange(doc, change) {
      var out = [];
      for (var i2 = 0; i2 < doc.sel.ranges.length; i2++) {
        var range2 = doc.sel.ranges[i2];
        out.push(new Range(adjustForChange(range2.anchor, change), adjustForChange(range2.head, change)));
      }
      return normalizeSelection(doc.cm, out, doc.sel.primIndex);
    }
    function offsetPos(pos, old, nw) {
      if (pos.line == old.line) {
        return Pos(nw.line, pos.ch - old.ch + nw.ch);
      } else {
        return Pos(nw.line + (pos.line - old.line), pos.ch);
      }
    }
    function computeReplacedSel(doc, changes, hint) {
      var out = [];
      var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;
      for (var i2 = 0; i2 < changes.length; i2++) {
        var change = changes[i2];
        var from = offsetPos(change.from, oldPrev, newPrev);
        var to = offsetPos(changeEnd(change), oldPrev, newPrev);
        oldPrev = change.to;
        newPrev = to;
        if (hint == "around") {
          var range2 = doc.sel.ranges[i2], inv = cmp(range2.head, range2.anchor) < 0;
          out[i2] = new Range(inv ? to : from, inv ? from : to);
        } else {
          out[i2] = new Range(from, from);
        }
      }
      return new Selection(out, doc.sel.primIndex);
    }
    function loadMode(cm) {
      cm.doc.mode = getMode(cm.options, cm.doc.modeOption);
      resetModeState(cm);
    }
    function resetModeState(cm) {
      cm.doc.iter(function(line) {
        if (line.stateAfter) {
          line.stateAfter = null;
        }
        if (line.styles) {
          line.styles = null;
        }
      });
      cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;
      startWorker(cm, 100);
      cm.state.modeGen++;
      if (cm.curOp) {
        regChange(cm);
      }
    }
    function isWholeLineUpdate(doc, change) {
      return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == "" && (!doc.cm || doc.cm.options.wholeLineUpdateBefore);
    }
    function updateDoc(doc, change, markedSpans, estimateHeight2) {
      function spansFor(n) {
        return markedSpans ? markedSpans[n] : null;
      }
      function update(line, text2, spans) {
        updateLine(line, text2, spans, estimateHeight2);
        signalLater(line, "change", line, change);
      }
      function linesFor(start, end) {
        var result = [];
        for (var i2 = start; i2 < end; ++i2) {
          result.push(new Line(text[i2], spansFor(i2), estimateHeight2));
        }
        return result;
      }
      var from = change.from, to = change.to, text = change.text;
      var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);
      var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;
      if (change.full) {
        doc.insert(0, linesFor(0, text.length));
        doc.remove(text.length, doc.size - text.length);
      } else if (isWholeLineUpdate(doc, change)) {
        var added = linesFor(0, text.length - 1);
        update(lastLine, lastLine.text, lastSpans);
        if (nlines) {
          doc.remove(from.line, nlines);
        }
        if (added.length) {
          doc.insert(from.line, added);
        }
      } else if (firstLine == lastLine) {
        if (text.length == 1) {
          update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);
        } else {
          var added$1 = linesFor(1, text.length - 1);
          added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight2));
          update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));
          doc.insert(from.line + 1, added$1);
        }
      } else if (text.length == 1) {
        update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));
        doc.remove(from.line + 1, nlines);
      } else {
        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));
        update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);
        var added$2 = linesFor(1, text.length - 1);
        if (nlines > 1) {
          doc.remove(from.line + 1, nlines - 1);
        }
        doc.insert(from.line + 1, added$2);
      }
      signalLater(doc, "change", doc, change);
    }
    function linkedDocs(doc, f, sharedHistOnly) {
      function propagate(doc2, skip, sharedHist) {
        if (doc2.linked) {
          for (var i2 = 0; i2 < doc2.linked.length; ++i2) {
            var rel = doc2.linked[i2];
            if (rel.doc == skip) {
              continue;
            }
            var shared = sharedHist && rel.sharedHist;
            if (sharedHistOnly && !shared) {
              continue;
            }
            f(rel.doc, shared);
            propagate(rel.doc, doc2, shared);
          }
        }
      }
      propagate(doc, null, true);
    }
    function attachDoc(cm, doc) {
      if (doc.cm) {
        throw new Error("This document is already in use.");
      }
      cm.doc = doc;
      doc.cm = cm;
      estimateLineHeights(cm);
      loadMode(cm);
      setDirectionClass(cm);
      if (!cm.options.lineWrapping) {
        findMaxLine(cm);
      }
      cm.options.mode = doc.modeOption;
      regChange(cm);
    }
    function setDirectionClass(cm) {
      (cm.doc.direction == "rtl" ? addClass : rmClass)(cm.display.lineDiv, "CodeMirror-rtl");
    }
    function directionChanged(cm) {
      runInOp(cm, function() {
        setDirectionClass(cm);
        regChange(cm);
      });
    }
    function History(startGen) {
      this.done = [];
      this.undone = [];
      this.undoDepth = Infinity;
      this.lastModTime = this.lastSelTime = 0;
      this.lastOp = this.lastSelOp = null;
      this.lastOrigin = this.lastSelOrigin = null;
      this.generation = this.maxGeneration = startGen || 1;
    }
    function historyChangeFromChange(doc, change) {
      var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};
      attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);
      linkedDocs(doc, function(doc2) {
        return attachLocalSpans(doc2, histChange, change.from.line, change.to.line + 1);
      }, true);
      return histChange;
    }
    function clearSelectionEvents(array) {
      while (array.length) {
        var last = lst(array);
        if (last.ranges) {
          array.pop();
        } else {
          break;
        }
      }
    }
    function lastChangeEvent(hist, force) {
      if (force) {
        clearSelectionEvents(hist.done);
        return lst(hist.done);
      } else if (hist.done.length && !lst(hist.done).ranges) {
        return lst(hist.done);
      } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {
        hist.done.pop();
        return lst(hist.done);
      }
    }
    function addChangeToHistory(doc, change, selAfter, opId) {
      var hist = doc.history;
      hist.undone.length = 0;
      var time = +new Date(), cur;
      var last;
      if ((hist.lastOp == opId || hist.lastOrigin == change.origin && change.origin && (change.origin.charAt(0) == "+" && hist.lastModTime > time - (doc.cm ? doc.cm.options.historyEventDelay : 500) || change.origin.charAt(0) == "*")) && (cur = lastChangeEvent(hist, hist.lastOp == opId))) {
        last = lst(cur.changes);
        if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {
          last.to = changeEnd(change);
        } else {
          cur.changes.push(historyChangeFromChange(doc, change));
        }
      } else {
        var before = lst(hist.done);
        if (!before || !before.ranges) {
          pushSelectionToHistory(doc.sel, hist.done);
        }
        cur = {
          changes: [historyChangeFromChange(doc, change)],
          generation: hist.generation
        };
        hist.done.push(cur);
        while (hist.done.length > hist.undoDepth) {
          hist.done.shift();
          if (!hist.done[0].ranges) {
            hist.done.shift();
          }
        }
      }
      hist.done.push(selAfter);
      hist.generation = ++hist.maxGeneration;
      hist.lastModTime = hist.lastSelTime = time;
      hist.lastOp = hist.lastSelOp = opId;
      hist.lastOrigin = hist.lastSelOrigin = change.origin;
      if (!last) {
        signal(doc, "historyAdded");
      }
    }
    function selectionEventCanBeMerged(doc, origin, prev, sel) {
      var ch = origin.charAt(0);
      return ch == "*" || ch == "+" && prev.ranges.length == sel.ranges.length && prev.somethingSelected() == sel.somethingSelected() && new Date() - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500);
    }
    function addSelectionToHistory(doc, sel, opId, options) {
      var hist = doc.history, origin = options && options.origin;
      if (opId == hist.lastSelOp || origin && hist.lastSelOrigin == origin && (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin || selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))) {
        hist.done[hist.done.length - 1] = sel;
      } else {
        pushSelectionToHistory(sel, hist.done);
      }
      hist.lastSelTime = +new Date();
      hist.lastSelOrigin = origin;
      hist.lastSelOp = opId;
      if (options && options.clearRedo !== false) {
        clearSelectionEvents(hist.undone);
      }
    }
    function pushSelectionToHistory(sel, dest) {
      var top = lst(dest);
      if (!(top && top.ranges && top.equals(sel))) {
        dest.push(sel);
      }
    }
    function attachLocalSpans(doc, change, from, to) {
      var existing = change["spans_" + doc.id], n = 0;
      doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function(line) {
        if (line.markedSpans) {
          (existing || (existing = change["spans_" + doc.id] = {}))[n] = line.markedSpans;
        }
        ++n;
      });
    }
    function removeClearedSpans(spans) {
      if (!spans) {
        return null;
      }
      var out;
      for (var i2 = 0; i2 < spans.length; ++i2) {
        if (spans[i2].marker.explicitlyCleared) {
          if (!out) {
            out = spans.slice(0, i2);
          }
        } else if (out) {
          out.push(spans[i2]);
        }
      }
      return !out ? spans : out.length ? out : null;
    }
    function getOldSpans(doc, change) {
      var found = change["spans_" + doc.id];
      if (!found) {
        return null;
      }
      var nw = [];
      for (var i2 = 0; i2 < change.text.length; ++i2) {
        nw.push(removeClearedSpans(found[i2]));
      }
      return nw;
    }
    function mergeOldSpans(doc, change) {
      var old = getOldSpans(doc, change);
      var stretched = stretchSpansOverChange(doc, change);
      if (!old) {
        return stretched;
      }
      if (!stretched) {
        return old;
      }
      for (var i2 = 0; i2 < old.length; ++i2) {
        var oldCur = old[i2], stretchCur = stretched[i2];
        if (oldCur && stretchCur) {
          spans:
            for (var j = 0; j < stretchCur.length; ++j) {
              var span = stretchCur[j];
              for (var k = 0; k < oldCur.length; ++k) {
                if (oldCur[k].marker == span.marker) {
                  continue spans;
                }
              }
              oldCur.push(span);
            }
        } else if (stretchCur) {
          old[i2] = stretchCur;
        }
      }
      return old;
    }
    function copyHistoryArray(events, newGroup, instantiateSel) {
      var copy = [];
      for (var i2 = 0; i2 < events.length; ++i2) {
        var event = events[i2];
        if (event.ranges) {
          copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);
          continue;
        }
        var changes = event.changes, newChanges = [];
        copy.push({changes: newChanges});
        for (var j = 0; j < changes.length; ++j) {
          var change = changes[j], m = void 0;
          newChanges.push({from: change.from, to: change.to, text: change.text});
          if (newGroup) {
            for (var prop2 in change) {
              if (m = prop2.match(/^spans_(\d+)$/)) {
                if (indexOf(newGroup, Number(m[1])) > -1) {
                  lst(newChanges)[prop2] = change[prop2];
                  delete change[prop2];
                }
              }
            }
          }
        }
      }
      return copy;
    }
    function extendRange(range2, head, other, extend) {
      if (extend) {
        var anchor = range2.anchor;
        if (other) {
          var posBefore = cmp(head, anchor) < 0;
          if (posBefore != cmp(other, anchor) < 0) {
            anchor = head;
            head = other;
          } else if (posBefore != cmp(head, other) < 0) {
            head = other;
          }
        }
        return new Range(anchor, head);
      } else {
        return new Range(other || head, head);
      }
    }
    function extendSelection(doc, head, other, options, extend) {
      if (extend == null) {
        extend = doc.cm && (doc.cm.display.shift || doc.extend);
      }
      setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);
    }
    function extendSelections(doc, heads, options) {
      var out = [];
      var extend = doc.cm && (doc.cm.display.shift || doc.extend);
      for (var i2 = 0; i2 < doc.sel.ranges.length; i2++) {
        out[i2] = extendRange(doc.sel.ranges[i2], heads[i2], null, extend);
      }
      var newSel = normalizeSelection(doc.cm, out, doc.sel.primIndex);
      setSelection(doc, newSel, options);
    }
    function replaceOneSelection(doc, i2, range2, options) {
      var ranges = doc.sel.ranges.slice(0);
      ranges[i2] = range2;
      setSelection(doc, normalizeSelection(doc.cm, ranges, doc.sel.primIndex), options);
    }
    function setSimpleSelection(doc, anchor, head, options) {
      setSelection(doc, simpleSelection(anchor, head), options);
    }
    function filterSelectionChange(doc, sel, options) {
      var obj = {
        ranges: sel.ranges,
        update: function(ranges) {
          this.ranges = [];
          for (var i2 = 0; i2 < ranges.length; i2++) {
            this.ranges[i2] = new Range(clipPos(doc, ranges[i2].anchor), clipPos(doc, ranges[i2].head));
          }
        },
        origin: options && options.origin
      };
      signal(doc, "beforeSelectionChange", doc, obj);
      if (doc.cm) {
        signal(doc.cm, "beforeSelectionChange", doc.cm, obj);
      }
      if (obj.ranges != sel.ranges) {
        return normalizeSelection(doc.cm, obj.ranges, obj.ranges.length - 1);
      } else {
        return sel;
      }
    }
    function setSelectionReplaceHistory(doc, sel, options) {
      var done = doc.history.done, last = lst(done);
      if (last && last.ranges) {
        done[done.length - 1] = sel;
        setSelectionNoUndo(doc, sel, options);
      } else {
        setSelection(doc, sel, options);
      }
    }
    function setSelection(doc, sel, options) {
      setSelectionNoUndo(doc, sel, options);
      addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);
    }
    function setSelectionNoUndo(doc, sel, options) {
      if (hasHandler(doc, "beforeSelectionChange") || doc.cm && hasHandler(doc.cm, "beforeSelectionChange")) {
        sel = filterSelectionChange(doc, sel, options);
      }
      var bias = options && options.bias || (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);
      setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));
      if (!(options && options.scroll === false) && doc.cm) {
        ensureCursorVisible(doc.cm);
      }
    }
    function setSelectionInner(doc, sel) {
      if (sel.equals(doc.sel)) {
        return;
      }
      doc.sel = sel;
      if (doc.cm) {
        doc.cm.curOp.updateInput = 1;
        doc.cm.curOp.selectionChanged = true;
        signalCursorActivity(doc.cm);
      }
      signalLater(doc, "cursorActivity", doc);
    }
    function reCheckSelection(doc) {
      setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));
    }
    function skipAtomicInSelection(doc, sel, bias, mayClear) {
      var out;
      for (var i2 = 0; i2 < sel.ranges.length; i2++) {
        var range2 = sel.ranges[i2];
        var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i2];
        var newAnchor = skipAtomic(doc, range2.anchor, old && old.anchor, bias, mayClear);
        var newHead = skipAtomic(doc, range2.head, old && old.head, bias, mayClear);
        if (out || newAnchor != range2.anchor || newHead != range2.head) {
          if (!out) {
            out = sel.ranges.slice(0, i2);
          }
          out[i2] = new Range(newAnchor, newHead);
        }
      }
      return out ? normalizeSelection(doc.cm, out, sel.primIndex) : sel;
    }
    function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {
      var line = getLine(doc, pos.line);
      if (line.markedSpans) {
        for (var i2 = 0; i2 < line.markedSpans.length; ++i2) {
          var sp = line.markedSpans[i2], m = sp.marker;
          var preventCursorLeft = "selectLeft" in m ? !m.selectLeft : m.inclusiveLeft;
          var preventCursorRight = "selectRight" in m ? !m.selectRight : m.inclusiveRight;
          if ((sp.from == null || (preventCursorLeft ? sp.from <= pos.ch : sp.from < pos.ch)) && (sp.to == null || (preventCursorRight ? sp.to >= pos.ch : sp.to > pos.ch))) {
            if (mayClear) {
              signal(m, "beforeCursorEnter");
              if (m.explicitlyCleared) {
                if (!line.markedSpans) {
                  break;
                } else {
                  --i2;
                  continue;
                }
              }
            }
            if (!m.atomic) {
              continue;
            }
            if (oldPos) {
              var near = m.find(dir < 0 ? 1 : -1), diff = void 0;
              if (dir < 0 ? preventCursorRight : preventCursorLeft) {
                near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null);
              }
              if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0)) {
                return skipAtomicInner(doc, near, pos, dir, mayClear);
              }
            }
            var far = m.find(dir < 0 ? -1 : 1);
            if (dir < 0 ? preventCursorLeft : preventCursorRight) {
              far = movePos(doc, far, dir, far.line == pos.line ? line : null);
            }
            return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null;
          }
        }
      }
      return pos;
    }
    function skipAtomic(doc, pos, oldPos, bias, mayClear) {
      var dir = bias || 1;
      var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) || !mayClear && skipAtomicInner(doc, pos, oldPos, dir, true) || skipAtomicInner(doc, pos, oldPos, -dir, mayClear) || !mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true);
      if (!found) {
        doc.cantEdit = true;
        return Pos(doc.first, 0);
      }
      return found;
    }
    function movePos(doc, pos, dir, line) {
      if (dir < 0 && pos.ch == 0) {
        if (pos.line > doc.first) {
          return clipPos(doc, Pos(pos.line - 1));
        } else {
          return null;
        }
      } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {
        if (pos.line < doc.first + doc.size - 1) {
          return Pos(pos.line + 1, 0);
        } else {
          return null;
        }
      } else {
        return new Pos(pos.line, pos.ch + dir);
      }
    }
    function selectAll(cm) {
      cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);
    }
    function filterChange(doc, change, update) {
      var obj = {
        canceled: false,
        from: change.from,
        to: change.to,
        text: change.text,
        origin: change.origin,
        cancel: function() {
          return obj.canceled = true;
        }
      };
      if (update) {
        obj.update = function(from, to, text, origin) {
          if (from) {
            obj.from = clipPos(doc, from);
          }
          if (to) {
            obj.to = clipPos(doc, to);
          }
          if (text) {
            obj.text = text;
          }
          if (origin !== void 0) {
            obj.origin = origin;
          }
        };
      }
      signal(doc, "beforeChange", doc, obj);
      if (doc.cm) {
        signal(doc.cm, "beforeChange", doc.cm, obj);
      }
      if (obj.canceled) {
        if (doc.cm) {
          doc.cm.curOp.updateInput = 2;
        }
        return null;
      }
      return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin};
    }
    function makeChange(doc, change, ignoreReadOnly) {
      if (doc.cm) {
        if (!doc.cm.curOp) {
          return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly);
        }
        if (doc.cm.state.suppressEdits) {
          return;
        }
      }
      if (hasHandler(doc, "beforeChange") || doc.cm && hasHandler(doc.cm, "beforeChange")) {
        change = filterChange(doc, change, true);
        if (!change) {
          return;
        }
      }
      var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);
      if (split) {
        for (var i2 = split.length - 1; i2 >= 0; --i2) {
          makeChangeInner(doc, {from: split[i2].from, to: split[i2].to, text: i2 ? [""] : change.text, origin: change.origin});
        }
      } else {
        makeChangeInner(doc, change);
      }
    }
    function makeChangeInner(doc, change) {
      if (change.text.length == 1 && change.text[0] == "" && cmp(change.from, change.to) == 0) {
        return;
      }
      var selAfter = computeSelAfterChange(doc, change);
      addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);
      makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));
      var rebased = [];
      linkedDocs(doc, function(doc2, sharedHist) {
        if (!sharedHist && indexOf(rebased, doc2.history) == -1) {
          rebaseHist(doc2.history, change);
          rebased.push(doc2.history);
        }
        makeChangeSingleDoc(doc2, change, null, stretchSpansOverChange(doc2, change));
      });
    }
    function makeChangeFromHistory(doc, type, allowSelectionOnly) {
      var suppress = doc.cm && doc.cm.state.suppressEdits;
      if (suppress && !allowSelectionOnly) {
        return;
      }
      var hist = doc.history, event, selAfter = doc.sel;
      var source = type == "undo" ? hist.done : hist.undone, dest = type == "undo" ? hist.undone : hist.done;
      var i2 = 0;
      for (; i2 < source.length; i2++) {
        event = source[i2];
        if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges) {
          break;
        }
      }
      if (i2 == source.length) {
        return;
      }
      hist.lastOrigin = hist.lastSelOrigin = null;
      for (; ; ) {
        event = source.pop();
        if (event.ranges) {
          pushSelectionToHistory(event, dest);
          if (allowSelectionOnly && !event.equals(doc.sel)) {
            setSelection(doc, event, {clearRedo: false});
            return;
          }
          selAfter = event;
        } else if (suppress) {
          source.push(event);
          return;
        } else {
          break;
        }
      }
      var antiChanges = [];
      pushSelectionToHistory(selAfter, dest);
      dest.push({changes: antiChanges, generation: hist.generation});
      hist.generation = event.generation || ++hist.maxGeneration;
      var filter = hasHandler(doc, "beforeChange") || doc.cm && hasHandler(doc.cm, "beforeChange");
      var loop = function(i3) {
        var change = event.changes[i3];
        change.origin = type;
        if (filter && !filterChange(doc, change, false)) {
          source.length = 0;
          return {};
        }
        antiChanges.push(historyChangeFromChange(doc, change));
        var after = i3 ? computeSelAfterChange(doc, change) : lst(source);
        makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));
        if (!i3 && doc.cm) {
          doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)});
        }
        var rebased = [];
        linkedDocs(doc, function(doc2, sharedHist) {
          if (!sharedHist && indexOf(rebased, doc2.history) == -1) {
            rebaseHist(doc2.history, change);
            rebased.push(doc2.history);
          }
          makeChangeSingleDoc(doc2, change, null, mergeOldSpans(doc2, change));
        });
      };
      for (var i$12 = event.changes.length - 1; i$12 >= 0; --i$12) {
        var returned = loop(i$12);
        if (returned)
          return returned.v;
      }
    }
    function shiftDoc(doc, distance) {
      if (distance == 0) {
        return;
      }
      doc.first += distance;
      doc.sel = new Selection(map(doc.sel.ranges, function(range2) {
        return new Range(Pos(range2.anchor.line + distance, range2.anchor.ch), Pos(range2.head.line + distance, range2.head.ch));
      }), doc.sel.primIndex);
      if (doc.cm) {
        regChange(doc.cm, doc.first, doc.first - distance, distance);
        for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++) {
          regLineChange(doc.cm, l, "gutter");
        }
      }
    }
    function makeChangeSingleDoc(doc, change, selAfter, spans) {
      if (doc.cm && !doc.cm.curOp) {
        return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans);
      }
      if (change.to.line < doc.first) {
        shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));
        return;
      }
      if (change.from.line > doc.lastLine()) {
        return;
      }
      if (change.from.line < doc.first) {
        var shift = change.text.length - 1 - (doc.first - change.from.line);
        shiftDoc(doc, shift);
        change = {
          from: Pos(doc.first, 0),
          to: Pos(change.to.line + shift, change.to.ch),
          text: [lst(change.text)],
          origin: change.origin
        };
      }
      var last = doc.lastLine();
      if (change.to.line > last) {
        change = {
          from: change.from,
          to: Pos(last, getLine(doc, last).text.length),
          text: [change.text[0]],
          origin: change.origin
        };
      }
      change.removed = getBetween(doc, change.from, change.to);
      if (!selAfter) {
        selAfter = computeSelAfterChange(doc, change);
      }
      if (doc.cm) {
        makeChangeSingleDocInEditor(doc.cm, change, spans);
      } else {
        updateDoc(doc, change, spans);
      }
      setSelectionNoUndo(doc, selAfter, sel_dontScroll);
      if (doc.cantEdit && skipAtomic(doc, Pos(doc.firstLine(), 0))) {
        doc.cantEdit = false;
      }
    }
    function makeChangeSingleDocInEditor(cm, change, spans) {
      var doc = cm.doc, display = cm.display, from = change.from, to = change.to;
      var recomputeMaxLength = false, checkWidthStart = from.line;
      if (!cm.options.lineWrapping) {
        checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));
        doc.iter(checkWidthStart, to.line + 1, function(line) {
          if (line == display.maxLine) {
            recomputeMaxLength = true;
            return true;
          }
        });
      }
      if (doc.sel.contains(change.from, change.to) > -1) {
        signalCursorActivity(cm);
      }
      updateDoc(doc, change, spans, estimateHeight(cm));
      if (!cm.options.lineWrapping) {
        doc.iter(checkWidthStart, from.line + change.text.length, function(line) {
          var len = lineLength(line);
          if (len > display.maxLineLength) {
            display.maxLine = line;
            display.maxLineLength = len;
            display.maxLineChanged = true;
            recomputeMaxLength = false;
          }
        });
        if (recomputeMaxLength) {
          cm.curOp.updateMaxLine = true;
        }
      }
      retreatFrontier(doc, from.line);
      startWorker(cm, 400);
      var lendiff = change.text.length - (to.line - from.line) - 1;
      if (change.full) {
        regChange(cm);
      } else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change)) {
        regLineChange(cm, from.line, "text");
      } else {
        regChange(cm, from.line, to.line + 1, lendiff);
      }
      var changesHandler = hasHandler(cm, "changes"), changeHandler = hasHandler(cm, "change");
      if (changeHandler || changesHandler) {
        var obj = {
          from,
          to,
          text: change.text,
          removed: change.removed,
          origin: change.origin
        };
        if (changeHandler) {
          signalLater(cm, "change", cm, obj);
        }
        if (changesHandler) {
          (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj);
        }
      }
      cm.display.selForContextMenu = null;
    }
    function replaceRange(doc, code, from, to, origin) {
      var assign;
      if (!to) {
        to = from;
      }
      if (cmp(to, from) < 0) {
        assign = [to, from], from = assign[0], to = assign[1];
      }
      if (typeof code == "string") {
        code = doc.splitLines(code);
      }
      makeChange(doc, {from, to, text: code, origin});
    }
    function rebaseHistSelSingle(pos, from, to, diff) {
      if (to < pos.line) {
        pos.line += diff;
      } else if (from < pos.line) {
        pos.line = from;
        pos.ch = 0;
      }
    }
    function rebaseHistArray(array, from, to, diff) {
      for (var i2 = 0; i2 < array.length; ++i2) {
        var sub = array[i2], ok = true;
        if (sub.ranges) {
          if (!sub.copied) {
            sub = array[i2] = sub.deepCopy();
            sub.copied = true;
          }
          for (var j = 0; j < sub.ranges.length; j++) {
            rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);
            rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);
          }
          continue;
        }
        for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {
          var cur = sub.changes[j$1];
          if (to < cur.from.line) {
            cur.from = Pos(cur.from.line + diff, cur.from.ch);
            cur.to = Pos(cur.to.line + diff, cur.to.ch);
          } else if (from <= cur.to.line) {
            ok = false;
            break;
          }
        }
        if (!ok) {
          array.splice(0, i2 + 1);
          i2 = 0;
        }
      }
    }
    function rebaseHist(hist, change) {
      var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;
      rebaseHistArray(hist.done, from, to, diff);
      rebaseHistArray(hist.undone, from, to, diff);
    }
    function changeLine(doc, handle, changeType, op) {
      var no = handle, line = handle;
      if (typeof handle == "number") {
        line = getLine(doc, clipLine(doc, handle));
      } else {
        no = lineNo(handle);
      }
      if (no == null) {
        return null;
      }
      if (op(line, no) && doc.cm) {
        regLineChange(doc.cm, no, changeType);
      }
      return line;
    }
    function LeafChunk(lines) {
      this.lines = lines;
      this.parent = null;
      var height = 0;
      for (var i2 = 0; i2 < lines.length; ++i2) {
        lines[i2].parent = this;
        height += lines[i2].height;
      }
      this.height = height;
    }
    LeafChunk.prototype = {
      chunkSize: function() {
        return this.lines.length;
      },
      removeInner: function(at, n) {
        for (var i2 = at, e = at + n; i2 < e; ++i2) {
          var line = this.lines[i2];
          this.height -= line.height;
          cleanUpLine(line);
          signalLater(line, "delete");
        }
        this.lines.splice(at, n);
      },
      collapse: function(lines) {
        lines.push.apply(lines, this.lines);
      },
      insertInner: function(at, lines, height) {
        this.height += height;
        this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));
        for (var i2 = 0; i2 < lines.length; ++i2) {
          lines[i2].parent = this;
        }
      },
      iterN: function(at, n, op) {
        for (var e = at + n; at < e; ++at) {
          if (op(this.lines[at])) {
            return true;
          }
        }
      }
    };
    function BranchChunk(children) {
      this.children = children;
      var size = 0, height = 0;
      for (var i2 = 0; i2 < children.length; ++i2) {
        var ch = children[i2];
        size += ch.chunkSize();
        height += ch.height;
        ch.parent = this;
      }
      this.size = size;
      this.height = height;
      this.parent = null;
    }
    BranchChunk.prototype = {
      chunkSize: function() {
        return this.size;
      },
      removeInner: function(at, n) {
        this.size -= n;
        for (var i2 = 0; i2 < this.children.length; ++i2) {
          var child = this.children[i2], sz = child.chunkSize();
          if (at < sz) {
            var rm = Math.min(n, sz - at), oldHeight = child.height;
            child.removeInner(at, rm);
            this.height -= oldHeight - child.height;
            if (sz == rm) {
              this.children.splice(i2--, 1);
              child.parent = null;
            }
            if ((n -= rm) == 0) {
              break;
            }
            at = 0;
          } else {
            at -= sz;
          }
        }
        if (this.size - n < 25 && (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {
          var lines = [];
          this.collapse(lines);
          this.children = [new LeafChunk(lines)];
          this.children[0].parent = this;
        }
      },
      collapse: function(lines) {
        for (var i2 = 0; i2 < this.children.length; ++i2) {
          this.children[i2].collapse(lines);
        }
      },
      insertInner: function(at, lines, height) {
        this.size += lines.length;
        this.height += height;
        for (var i2 = 0; i2 < this.children.length; ++i2) {
          var child = this.children[i2], sz = child.chunkSize();
          if (at <= sz) {
            child.insertInner(at, lines, height);
            if (child.lines && child.lines.length > 50) {
              var remaining = child.lines.length % 25 + 25;
              for (var pos = remaining; pos < child.lines.length; ) {
                var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));
                child.height -= leaf.height;
                this.children.splice(++i2, 0, leaf);
                leaf.parent = this;
              }
              child.lines = child.lines.slice(0, remaining);
              this.maybeSpill();
            }
            break;
          }
          at -= sz;
        }
      },
      maybeSpill: function() {
        if (this.children.length <= 10) {
          return;
        }
        var me = this;
        do {
          var spilled = me.children.splice(me.children.length - 5, 5);
          var sibling = new BranchChunk(spilled);
          if (!me.parent) {
            var copy = new BranchChunk(me.children);
            copy.parent = me;
            me.children = [copy, sibling];
            me = copy;
          } else {
            me.size -= sibling.size;
            me.height -= sibling.height;
            var myIndex = indexOf(me.parent.children, me);
            me.parent.children.splice(myIndex + 1, 0, sibling);
          }
          sibling.parent = me.parent;
        } while (me.children.length > 10);
        me.parent.maybeSpill();
      },
      iterN: function(at, n, op) {
        for (var i2 = 0; i2 < this.children.length; ++i2) {
          var child = this.children[i2], sz = child.chunkSize();
          if (at < sz) {
            var used = Math.min(n, sz - at);
            if (child.iterN(at, used, op)) {
              return true;
            }
            if ((n -= used) == 0) {
              break;
            }
            at = 0;
          } else {
            at -= sz;
          }
        }
      }
    };
    var LineWidget = function(doc, node, options) {
      if (options) {
        for (var opt in options) {
          if (options.hasOwnProperty(opt)) {
            this[opt] = options[opt];
          }
        }
      }
      this.doc = doc;
      this.node = node;
    };
    LineWidget.prototype.clear = function() {
      var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);
      if (no == null || !ws) {
        return;
      }
      for (var i2 = 0; i2 < ws.length; ++i2) {
        if (ws[i2] == this) {
          ws.splice(i2--, 1);
        }
      }
      if (!ws.length) {
        line.widgets = null;
      }
      var height = widgetHeight(this);
      updateLineHeight(line, Math.max(0, line.height - height));
      if (cm) {
        runInOp(cm, function() {
          adjustScrollWhenAboveVisible(cm, line, -height);
          regLineChange(cm, no, "widget");
        });
        signalLater(cm, "lineWidgetCleared", cm, this, no);
      }
    };
    LineWidget.prototype.changed = function() {
      var this$1 = this;
      var oldH = this.height, cm = this.doc.cm, line = this.line;
      this.height = null;
      var diff = widgetHeight(this) - oldH;
      if (!diff) {
        return;
      }
      if (!lineIsHidden(this.doc, line)) {
        updateLineHeight(line, line.height + diff);
      }
      if (cm) {
        runInOp(cm, function() {
          cm.curOp.forceUpdate = true;
          adjustScrollWhenAboveVisible(cm, line, diff);
          signalLater(cm, "lineWidgetChanged", cm, this$1, lineNo(line));
        });
      }
    };
    eventMixin(LineWidget);
    function adjustScrollWhenAboveVisible(cm, line, diff) {
      if (heightAtLine(line) < (cm.curOp && cm.curOp.scrollTop || cm.doc.scrollTop)) {
        addToScrollTop(cm, diff);
      }
    }
    function addLineWidget(doc, handle, node, options) {
      var widget = new LineWidget(doc, node, options);
      var cm = doc.cm;
      if (cm && widget.noHScroll) {
        cm.display.alignWidgets = true;
      }
      changeLine(doc, handle, "widget", function(line) {
        var widgets = line.widgets || (line.widgets = []);
        if (widget.insertAt == null) {
          widgets.push(widget);
        } else {
          widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget);
        }
        widget.line = line;
        if (cm && !lineIsHidden(doc, line)) {
          var aboveVisible = heightAtLine(line) < doc.scrollTop;
          updateLineHeight(line, line.height + widgetHeight(widget));
          if (aboveVisible) {
            addToScrollTop(cm, widget.height);
          }
          cm.curOp.forceUpdate = true;
        }
        return true;
      });
      if (cm) {
        signalLater(cm, "lineWidgetAdded", cm, widget, typeof handle == "number" ? handle : lineNo(handle));
      }
      return widget;
    }
    var nextMarkerId = 0;
    var TextMarker = function(doc, type) {
      this.lines = [];
      this.type = type;
      this.doc = doc;
      this.id = ++nextMarkerId;
    };
    TextMarker.prototype.clear = function() {
      if (this.explicitlyCleared) {
        return;
      }
      var cm = this.doc.cm, withOp = cm && !cm.curOp;
      if (withOp) {
        startOperation(cm);
      }
      if (hasHandler(this, "clear")) {
        var found = this.find();
        if (found) {
          signalLater(this, "clear", found.from, found.to);
        }
      }
      var min = null, max = null;
      for (var i2 = 0; i2 < this.lines.length; ++i2) {
        var line = this.lines[i2];
        var span = getMarkedSpanFor(line.markedSpans, this);
        if (cm && !this.collapsed) {
          regLineChange(cm, lineNo(line), "text");
        } else if (cm) {
          if (span.to != null) {
            max = lineNo(line);
          }
          if (span.from != null) {
            min = lineNo(line);
          }
        }
        line.markedSpans = removeMarkedSpan(line.markedSpans, span);
        if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm) {
          updateLineHeight(line, textHeight(cm.display));
        }
      }
      if (cm && this.collapsed && !cm.options.lineWrapping) {
        for (var i$12 = 0; i$12 < this.lines.length; ++i$12) {
          var visual = visualLine(this.lines[i$12]), len = lineLength(visual);
          if (len > cm.display.maxLineLength) {
            cm.display.maxLine = visual;
            cm.display.maxLineLength = len;
            cm.display.maxLineChanged = true;
          }
        }
      }
      if (min != null && cm && this.collapsed) {
        regChange(cm, min, max + 1);
      }
      this.lines.length = 0;
      this.explicitlyCleared = true;
      if (this.atomic && this.doc.cantEdit) {
        this.doc.cantEdit = false;
        if (cm) {
          reCheckSelection(cm.doc);
        }
      }
      if (cm) {
        signalLater(cm, "markerCleared", cm, this, min, max);
      }
      if (withOp) {
        endOperation(cm);
      }
      if (this.parent) {
        this.parent.clear();
      }
    };
    TextMarker.prototype.find = function(side, lineObj) {
      if (side == null && this.type == "bookmark") {
        side = 1;
      }
      var from, to;
      for (var i2 = 0; i2 < this.lines.length; ++i2) {
        var line = this.lines[i2];
        var span = getMarkedSpanFor(line.markedSpans, this);
        if (span.from != null) {
          from = Pos(lineObj ? line : lineNo(line), span.from);
          if (side == -1) {
            return from;
          }
        }
        if (span.to != null) {
          to = Pos(lineObj ? line : lineNo(line), span.to);
          if (side == 1) {
            return to;
          }
        }
      }
      return from && {from, to};
    };
    TextMarker.prototype.changed = function() {
      var this$1 = this;
      var pos = this.find(-1, true), widget = this, cm = this.doc.cm;
      if (!pos || !cm) {
        return;
      }
      runInOp(cm, function() {
        var line = pos.line, lineN = lineNo(pos.line);
        var view = findViewForLine(cm, lineN);
        if (view) {
          clearLineMeasurementCacheFor(view);
          cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;
        }
        cm.curOp.updateMaxLine = true;
        if (!lineIsHidden(widget.doc, line) && widget.height != null) {
          var oldHeight = widget.height;
          widget.height = null;
          var dHeight = widgetHeight(widget) - oldHeight;
          if (dHeight) {
            updateLineHeight(line, line.height + dHeight);
          }
        }
        signalLater(cm, "markerChanged", cm, this$1);
      });
    };
    TextMarker.prototype.attachLine = function(line) {
      if (!this.lines.length && this.doc.cm) {
        var op = this.doc.cm.curOp;
        if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1) {
          (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this);
        }
      }
      this.lines.push(line);
    };
    TextMarker.prototype.detachLine = function(line) {
      this.lines.splice(indexOf(this.lines, line), 1);
      if (!this.lines.length && this.doc.cm) {
        var op = this.doc.cm.curOp;
        (op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);
      }
    };
    eventMixin(TextMarker);
    function markText(doc, from, to, options, type) {
      if (options && options.shared) {
        return markTextShared(doc, from, to, options, type);
      }
      if (doc.cm && !doc.cm.curOp) {
        return operation(doc.cm, markText)(doc, from, to, options, type);
      }
      var marker = new TextMarker(doc, type), diff = cmp(from, to);
      if (options) {
        copyObj(options, marker, false);
      }
      if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false) {
        return marker;
      }
      if (marker.replacedWith) {
        marker.collapsed = true;
        marker.widgetNode = eltP("span", [marker.replacedWith], "CodeMirror-widget");
        if (!options.handleMouseEvents) {
          marker.widgetNode.setAttribute("cm-ignore-events", "true");
        }
        if (options.insertLeft) {
          marker.widgetNode.insertLeft = true;
        }
      }
      if (marker.collapsed) {
        if (conflictingCollapsedRange(doc, from.line, from, to, marker) || from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker)) {
          throw new Error("Inserting collapsed marker partially overlapping an existing one");
        }
        seeCollapsedSpans();
      }
      if (marker.addToHistory) {
        addChangeToHistory(doc, {from, to, origin: "markText"}, doc.sel, NaN);
      }
      var curLine = from.line, cm = doc.cm, updateMaxLine;
      doc.iter(curLine, to.line + 1, function(line) {
        if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine) {
          updateMaxLine = true;
        }
        if (marker.collapsed && curLine != from.line) {
          updateLineHeight(line, 0);
        }
        addMarkedSpan(line, new MarkedSpan(marker, curLine == from.line ? from.ch : null, curLine == to.line ? to.ch : null));
        ++curLine;
      });
      if (marker.collapsed) {
        doc.iter(from.line, to.line + 1, function(line) {
          if (lineIsHidden(doc, line)) {
            updateLineHeight(line, 0);
          }
        });
      }
      if (marker.clearOnEnter) {
        on(marker, "beforeCursorEnter", function() {
          return marker.clear();
        });
      }
      if (marker.readOnly) {
        seeReadOnlySpans();
        if (doc.history.done.length || doc.history.undone.length) {
          doc.clearHistory();
        }
      }
      if (marker.collapsed) {
        marker.id = ++nextMarkerId;
        marker.atomic = true;
      }
      if (cm) {
        if (updateMaxLine) {
          cm.curOp.updateMaxLine = true;
        }
        if (marker.collapsed) {
          regChange(cm, from.line, to.line + 1);
        } else if (marker.className || marker.startStyle || marker.endStyle || marker.css || marker.attributes || marker.title) {
          for (var i2 = from.line; i2 <= to.line; i2++) {
            regLineChange(cm, i2, "text");
          }
        }
        if (marker.atomic) {
          reCheckSelection(cm.doc);
        }
        signalLater(cm, "markerAdded", cm, marker);
      }
      return marker;
    }
    var SharedTextMarker = function(markers, primary) {
      this.markers = markers;
      this.primary = primary;
      for (var i2 = 0; i2 < markers.length; ++i2) {
        markers[i2].parent = this;
      }
    };
    SharedTextMarker.prototype.clear = function() {
      if (this.explicitlyCleared) {
        return;
      }
      this.explicitlyCleared = true;
      for (var i2 = 0; i2 < this.markers.length; ++i2) {
        this.markers[i2].clear();
      }
      signalLater(this, "clear");
    };
    SharedTextMarker.prototype.find = function(side, lineObj) {
      return this.primary.find(side, lineObj);
    };
    eventMixin(SharedTextMarker);
    function markTextShared(doc, from, to, options, type) {
      options = copyObj(options);
      options.shared = false;
      var markers = [markText(doc, from, to, options, type)], primary = markers[0];
      var widget = options.widgetNode;
      linkedDocs(doc, function(doc2) {
        if (widget) {
          options.widgetNode = widget.cloneNode(true);
        }
        markers.push(markText(doc2, clipPos(doc2, from), clipPos(doc2, to), options, type));
        for (var i2 = 0; i2 < doc2.linked.length; ++i2) {
          if (doc2.linked[i2].isParent) {
            return;
          }
        }
        primary = lst(markers);
      });
      return new SharedTextMarker(markers, primary);
    }
    function findSharedMarkers(doc) {
      return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function(m) {
        return m.parent;
      });
    }
    function copySharedMarkers(doc, markers) {
      for (var i2 = 0; i2 < markers.length; i2++) {
        var marker = markers[i2], pos = marker.find();
        var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);
        if (cmp(mFrom, mTo)) {
          var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);
          marker.markers.push(subMark);
          subMark.parent = marker;
        }
      }
    }
    function detachSharedMarkers(markers) {
      var loop = function(i3) {
        var marker = markers[i3], linked = [marker.primary.doc];
        linkedDocs(marker.primary.doc, function(d) {
          return linked.push(d);
        });
        for (var j = 0; j < marker.markers.length; j++) {
          var subMarker = marker.markers[j];
          if (indexOf(linked, subMarker.doc) == -1) {
            subMarker.parent = null;
            marker.markers.splice(j--, 1);
          }
        }
      };
      for (var i2 = 0; i2 < markers.length; i2++)
        loop(i2);
    }
    var nextDocId = 0;
    var Doc = function(text, mode, firstLine, lineSep, direction) {
      if (!(this instanceof Doc)) {
        return new Doc(text, mode, firstLine, lineSep, direction);
      }
      if (firstLine == null) {
        firstLine = 0;
      }
      BranchChunk.call(this, [new LeafChunk([new Line("", null)])]);
      this.first = firstLine;
      this.scrollTop = this.scrollLeft = 0;
      this.cantEdit = false;
      this.cleanGeneration = 1;
      this.modeFrontier = this.highlightFrontier = firstLine;
      var start = Pos(firstLine, 0);
      this.sel = simpleSelection(start);
      this.history = new History(null);
      this.id = ++nextDocId;
      this.modeOption = mode;
      this.lineSep = lineSep;
      this.direction = direction == "rtl" ? "rtl" : "ltr";
      this.extend = false;
      if (typeof text == "string") {
        text = this.splitLines(text);
      }
      updateDoc(this, {from: start, to: start, text});
      setSelection(this, simpleSelection(start), sel_dontScroll);
    };
    Doc.prototype = createObj(BranchChunk.prototype, {
      constructor: Doc,
      iter: function(from, to, op) {
        if (op) {
          this.iterN(from - this.first, to - from, op);
        } else {
          this.iterN(this.first, this.first + this.size, from);
        }
      },
      insert: function(at, lines) {
        var height = 0;
        for (var i2 = 0; i2 < lines.length; ++i2) {
          height += lines[i2].height;
        }
        this.insertInner(at - this.first, lines, height);
      },
      remove: function(at, n) {
        this.removeInner(at - this.first, n);
      },
      getValue: function(lineSep) {
        var lines = getLines(this, this.first, this.first + this.size);
        if (lineSep === false) {
          return lines;
        }
        return lines.join(lineSep || this.lineSeparator());
      },
      setValue: docMethodOp(function(code) {
        var top = Pos(this.first, 0), last = this.first + this.size - 1;
        makeChange(this, {
          from: top,
          to: Pos(last, getLine(this, last).text.length),
          text: this.splitLines(code),
          origin: "setValue",
          full: true
        }, true);
        if (this.cm) {
          scrollToCoords(this.cm, 0, 0);
        }
        setSelection(this, simpleSelection(top), sel_dontScroll);
      }),
      replaceRange: function(code, from, to, origin) {
        from = clipPos(this, from);
        to = to ? clipPos(this, to) : from;
        replaceRange(this, code, from, to, origin);
      },
      getRange: function(from, to, lineSep) {
        var lines = getBetween(this, clipPos(this, from), clipPos(this, to));
        if (lineSep === false) {
          return lines;
        }
        return lines.join(lineSep || this.lineSeparator());
      },
      getLine: function(line) {
        var l = this.getLineHandle(line);
        return l && l.text;
      },
      getLineHandle: function(line) {
        if (isLine(this, line)) {
          return getLine(this, line);
        }
      },
      getLineNumber: function(line) {
        return lineNo(line);
      },
      getLineHandleVisualStart: function(line) {
        if (typeof line == "number") {
          line = getLine(this, line);
        }
        return visualLine(line);
      },
      lineCount: function() {
        return this.size;
      },
      firstLine: function() {
        return this.first;
      },
      lastLine: function() {
        return this.first + this.size - 1;
      },
      clipPos: function(pos) {
        return clipPos(this, pos);
      },
      getCursor: function(start) {
        var range2 = this.sel.primary(), pos;
        if (start == null || start == "head") {
          pos = range2.head;
        } else if (start == "anchor") {
          pos = range2.anchor;
        } else if (start == "end" || start == "to" || start === false) {
          pos = range2.to();
        } else {
          pos = range2.from();
        }
        return pos;
      },
      listSelections: function() {
        return this.sel.ranges;
      },
      somethingSelected: function() {
        return this.sel.somethingSelected();
      },
      setCursor: docMethodOp(function(line, ch, options) {
        setSimpleSelection(this, clipPos(this, typeof line == "number" ? Pos(line, ch || 0) : line), null, options);
      }),
      setSelection: docMethodOp(function(anchor, head, options) {
        setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);
      }),
      extendSelection: docMethodOp(function(head, other, options) {
        extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);
      }),
      extendSelections: docMethodOp(function(heads, options) {
        extendSelections(this, clipPosArray(this, heads), options);
      }),
      extendSelectionsBy: docMethodOp(function(f, options) {
        var heads = map(this.sel.ranges, f);
        extendSelections(this, clipPosArray(this, heads), options);
      }),
      setSelections: docMethodOp(function(ranges, primary, options) {
        if (!ranges.length) {
          return;
        }
        var out = [];
        for (var i2 = 0; i2 < ranges.length; i2++) {
          out[i2] = new Range(clipPos(this, ranges[i2].anchor), clipPos(this, ranges[i2].head));
        }
        if (primary == null) {
          primary = Math.min(ranges.length - 1, this.sel.primIndex);
        }
        setSelection(this, normalizeSelection(this.cm, out, primary), options);
      }),
      addSelection: docMethodOp(function(anchor, head, options) {
        var ranges = this.sel.ranges.slice(0);
        ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));
        setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options);
      }),
      getSelection: function(lineSep) {
        var ranges = this.sel.ranges, lines;
        for (var i2 = 0; i2 < ranges.length; i2++) {
          var sel = getBetween(this, ranges[i2].from(), ranges[i2].to());
          lines = lines ? lines.concat(sel) : sel;
        }
        if (lineSep === false) {
          return lines;
        } else {
          return lines.join(lineSep || this.lineSeparator());
        }
      },
      getSelections: function(lineSep) {
        var parts = [], ranges = this.sel.ranges;
        for (var i2 = 0; i2 < ranges.length; i2++) {
          var sel = getBetween(this, ranges[i2].from(), ranges[i2].to());
          if (lineSep !== false) {
            sel = sel.join(lineSep || this.lineSeparator());
          }
          parts[i2] = sel;
        }
        return parts;
      },
      replaceSelection: function(code, collapse, origin) {
        var dup = [];
        for (var i2 = 0; i2 < this.sel.ranges.length; i2++) {
          dup[i2] = code;
        }
        this.replaceSelections(dup, collapse, origin || "+input");
      },
      replaceSelections: docMethodOp(function(code, collapse, origin) {
        var changes = [], sel = this.sel;
        for (var i2 = 0; i2 < sel.ranges.length; i2++) {
          var range2 = sel.ranges[i2];
          changes[i2] = {from: range2.from(), to: range2.to(), text: this.splitLines(code[i2]), origin};
        }
        var newSel = collapse && collapse != "end" && computeReplacedSel(this, changes, collapse);
        for (var i$12 = changes.length - 1; i$12 >= 0; i$12--) {
          makeChange(this, changes[i$12]);
        }
        if (newSel) {
          setSelectionReplaceHistory(this, newSel);
        } else if (this.cm) {
          ensureCursorVisible(this.cm);
        }
      }),
      undo: docMethodOp(function() {
        makeChangeFromHistory(this, "undo");
      }),
      redo: docMethodOp(function() {
        makeChangeFromHistory(this, "redo");
      }),
      undoSelection: docMethodOp(function() {
        makeChangeFromHistory(this, "undo", true);
      }),
      redoSelection: docMethodOp(function() {
        makeChangeFromHistory(this, "redo", true);
      }),
      setExtending: function(val) {
        this.extend = val;
      },
      getExtending: function() {
        return this.extend;
      },
      historySize: function() {
        var hist = this.history, done = 0, undone = 0;
        for (var i2 = 0; i2 < hist.done.length; i2++) {
          if (!hist.done[i2].ranges) {
            ++done;
          }
        }
        for (var i$12 = 0; i$12 < hist.undone.length; i$12++) {
          if (!hist.undone[i$12].ranges) {
            ++undone;
          }
        }
        return {undo: done, redo: undone};
      },
      clearHistory: function() {
        var this$1 = this;
        this.history = new History(this.history.maxGeneration);
        linkedDocs(this, function(doc) {
          return doc.history = this$1.history;
        }, true);
      },
      markClean: function() {
        this.cleanGeneration = this.changeGeneration(true);
      },
      changeGeneration: function(forceSplit) {
        if (forceSplit) {
          this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null;
        }
        return this.history.generation;
      },
      isClean: function(gen) {
        return this.history.generation == (gen || this.cleanGeneration);
      },
      getHistory: function() {
        return {
          done: copyHistoryArray(this.history.done),
          undone: copyHistoryArray(this.history.undone)
        };
      },
      setHistory: function(histData) {
        var hist = this.history = new History(this.history.maxGeneration);
        hist.done = copyHistoryArray(histData.done.slice(0), null, true);
        hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);
      },
      setGutterMarker: docMethodOp(function(line, gutterID, value) {
        return changeLine(this, line, "gutter", function(line2) {
          var markers = line2.gutterMarkers || (line2.gutterMarkers = {});
          markers[gutterID] = value;
          if (!value && isEmpty(markers)) {
            line2.gutterMarkers = null;
          }
          return true;
        });
      }),
      clearGutter: docMethodOp(function(gutterID) {
        var this$1 = this;
        this.iter(function(line) {
          if (line.gutterMarkers && line.gutterMarkers[gutterID]) {
            changeLine(this$1, line, "gutter", function() {
              line.gutterMarkers[gutterID] = null;
              if (isEmpty(line.gutterMarkers)) {
                line.gutterMarkers = null;
              }
              return true;
            });
          }
        });
      }),
      lineInfo: function(line) {
        var n;
        if (typeof line == "number") {
          if (!isLine(this, line)) {
            return null;
          }
          n = line;
          line = getLine(this, line);
          if (!line) {
            return null;
          }
        } else {
          n = lineNo(line);
          if (n == null) {
            return null;
          }
        }
        return {
          line: n,
          handle: line,
          text: line.text,
          gutterMarkers: line.gutterMarkers,
          textClass: line.textClass,
          bgClass: line.bgClass,
          wrapClass: line.wrapClass,
          widgets: line.widgets
        };
      },
      addLineClass: docMethodOp(function(handle, where, cls) {
        return changeLine(this, handle, where == "gutter" ? "gutter" : "class", function(line) {
          var prop2 = where == "text" ? "textClass" : where == "background" ? "bgClass" : where == "gutter" ? "gutterClass" : "wrapClass";
          if (!line[prop2]) {
            line[prop2] = cls;
          } else if (classTest(cls).test(line[prop2])) {
            return false;
          } else {
            line[prop2] += " " + cls;
          }
          return true;
        });
      }),
      removeLineClass: docMethodOp(function(handle, where, cls) {
        return changeLine(this, handle, where == "gutter" ? "gutter" : "class", function(line) {
          var prop2 = where == "text" ? "textClass" : where == "background" ? "bgClass" : where == "gutter" ? "gutterClass" : "wrapClass";
          var cur = line[prop2];
          if (!cur) {
            return false;
          } else if (cls == null) {
            line[prop2] = null;
          } else {
            var found = cur.match(classTest(cls));
            if (!found) {
              return false;
            }
            var end = found.index + found[0].length;
            line[prop2] = cur.slice(0, found.index) + (!found.index || end == cur.length ? "" : " ") + cur.slice(end) || null;
          }
          return true;
        });
      }),
      addLineWidget: docMethodOp(function(handle, node, options) {
        return addLineWidget(this, handle, node, options);
      }),
      removeLineWidget: function(widget) {
        widget.clear();
      },
      markText: function(from, to, options) {
        return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || "range");
      },
      setBookmark: function(pos, options) {
        var realOpts = {
          replacedWith: options && (options.nodeType == null ? options.widget : options),
          insertLeft: options && options.insertLeft,
          clearWhenEmpty: false,
          shared: options && options.shared,
          handleMouseEvents: options && options.handleMouseEvents
        };
        pos = clipPos(this, pos);
        return markText(this, pos, pos, realOpts, "bookmark");
      },
      findMarksAt: function(pos) {
        pos = clipPos(this, pos);
        var markers = [], spans = getLine(this, pos.line).markedSpans;
        if (spans) {
          for (var i2 = 0; i2 < spans.length; ++i2) {
            var span = spans[i2];
            if ((span.from == null || span.from <= pos.ch) && (span.to == null || span.to >= pos.ch)) {
              markers.push(span.marker.parent || span.marker);
            }
          }
        }
        return markers;
      },
      findMarks: function(from, to, filter) {
        from = clipPos(this, from);
        to = clipPos(this, to);
        var found = [], lineNo2 = from.line;
        this.iter(from.line, to.line + 1, function(line) {
          var spans = line.markedSpans;
          if (spans) {
            for (var i2 = 0; i2 < spans.length; i2++) {
              var span = spans[i2];
              if (!(span.to != null && lineNo2 == from.line && from.ch >= span.to || span.from == null && lineNo2 != from.line || span.from != null && lineNo2 == to.line && span.from >= to.ch) && (!filter || filter(span.marker))) {
                found.push(span.marker.parent || span.marker);
              }
            }
          }
          ++lineNo2;
        });
        return found;
      },
      getAllMarks: function() {
        var markers = [];
        this.iter(function(line) {
          var sps = line.markedSpans;
          if (sps) {
            for (var i2 = 0; i2 < sps.length; ++i2) {
              if (sps[i2].from != null) {
                markers.push(sps[i2].marker);
              }
            }
          }
        });
        return markers;
      },
      posFromIndex: function(off2) {
        var ch, lineNo2 = this.first, sepSize = this.lineSeparator().length;
        this.iter(function(line) {
          var sz = line.text.length + sepSize;
          if (sz > off2) {
            ch = off2;
            return true;
          }
          off2 -= sz;
          ++lineNo2;
        });
        return clipPos(this, Pos(lineNo2, ch));
      },
      indexFromPos: function(coords) {
        coords = clipPos(this, coords);
        var index = coords.ch;
        if (coords.line < this.first || coords.ch < 0) {
          return 0;
        }
        var sepSize = this.lineSeparator().length;
        this.iter(this.first, coords.line, function(line) {
          index += line.text.length + sepSize;
        });
        return index;
      },
      copy: function(copyHistory) {
        var doc = new Doc(getLines(this, this.first, this.first + this.size), this.modeOption, this.first, this.lineSep, this.direction);
        doc.scrollTop = this.scrollTop;
        doc.scrollLeft = this.scrollLeft;
        doc.sel = this.sel;
        doc.extend = false;
        if (copyHistory) {
          doc.history.undoDepth = this.history.undoDepth;
          doc.setHistory(this.getHistory());
        }
        return doc;
      },
      linkedDoc: function(options) {
        if (!options) {
          options = {};
        }
        var from = this.first, to = this.first + this.size;
        if (options.from != null && options.from > from) {
          from = options.from;
        }
        if (options.to != null && options.to < to) {
          to = options.to;
        }
        var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);
        if (options.sharedHist) {
          copy.history = this.history;
        }
        (this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});
        copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];
        copySharedMarkers(copy, findSharedMarkers(this));
        return copy;
      },
      unlinkDoc: function(other) {
        if (other instanceof CodeMirror4) {
          other = other.doc;
        }
        if (this.linked) {
          for (var i2 = 0; i2 < this.linked.length; ++i2) {
            var link = this.linked[i2];
            if (link.doc != other) {
              continue;
            }
            this.linked.splice(i2, 1);
            other.unlinkDoc(this);
            detachSharedMarkers(findSharedMarkers(this));
            break;
          }
        }
        if (other.history == this.history) {
          var splitIds = [other.id];
          linkedDocs(other, function(doc) {
            return splitIds.push(doc.id);
          }, true);
          other.history = new History(null);
          other.history.done = copyHistoryArray(this.history.done, splitIds);
          other.history.undone = copyHistoryArray(this.history.undone, splitIds);
        }
      },
      iterLinkedDocs: function(f) {
        linkedDocs(this, f);
      },
      getMode: function() {
        return this.mode;
      },
      getEditor: function() {
        return this.cm;
      },
      splitLines: function(str) {
        if (this.lineSep) {
          return str.split(this.lineSep);
        }
        return splitLinesAuto(str);
      },
      lineSeparator: function() {
        return this.lineSep || "\n";
      },
      setDirection: docMethodOp(function(dir) {
        if (dir != "rtl") {
          dir = "ltr";
        }
        if (dir == this.direction) {
          return;
        }
        this.direction = dir;
        this.iter(function(line) {
          return line.order = null;
        });
        if (this.cm) {
          directionChanged(this.cm);
        }
      })
    });
    Doc.prototype.eachLine = Doc.prototype.iter;
    var lastDrop = 0;
    function onDrop(e) {
      var cm = this;
      clearDragCursor(cm);
      if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) {
        return;
      }
      e_preventDefault(e);
      if (ie) {
        lastDrop = +new Date();
      }
      var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;
      if (!pos || cm.isReadOnly()) {
        return;
      }
      if (files && files.length && window.FileReader && window.File) {
        var n = files.length, text = Array(n), read = 0;
        var markAsReadAndPasteIfAllFilesAreRead = function() {
          if (++read == n) {
            operation(cm, function() {
              pos = clipPos(cm.doc, pos);
              var change = {
                from: pos,
                to: pos,
                text: cm.doc.splitLines(text.filter(function(t) {
                  return t != null;
                }).join(cm.doc.lineSeparator())),
                origin: "paste"
              };
              makeChange(cm.doc, change);
              setSelectionReplaceHistory(cm.doc, simpleSelection(clipPos(cm.doc, pos), clipPos(cm.doc, changeEnd(change))));
            })();
          }
        };
        var readTextFromFile = function(file, i3) {
          if (cm.options.allowDropFileTypes && indexOf(cm.options.allowDropFileTypes, file.type) == -1) {
            markAsReadAndPasteIfAllFilesAreRead();
            return;
          }
          var reader = new FileReader();
          reader.onerror = function() {
            return markAsReadAndPasteIfAllFilesAreRead();
          };
          reader.onload = function() {
            var content = reader.result;
            if (/[\x00-\x08\x0e-\x1f]{2}/.test(content)) {
              markAsReadAndPasteIfAllFilesAreRead();
              return;
            }
            text[i3] = content;
            markAsReadAndPasteIfAllFilesAreRead();
          };
          reader.readAsText(file);
        };
        for (var i2 = 0; i2 < files.length; i2++) {
          readTextFromFile(files[i2], i2);
        }
      } else {
        if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {
          cm.state.draggingText(e);
          setTimeout(function() {
            return cm.display.input.focus();
          }, 20);
          return;
        }
        try {
          var text$1 = e.dataTransfer.getData("Text");
          if (text$1) {
            var selected;
            if (cm.state.draggingText && !cm.state.draggingText.copy) {
              selected = cm.listSelections();
            }
            setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));
            if (selected) {
              for (var i$12 = 0; i$12 < selected.length; ++i$12) {
                replaceRange(cm.doc, "", selected[i$12].anchor, selected[i$12].head, "drag");
              }
            }
            cm.replaceSelection(text$1, "around", "paste");
            cm.display.input.focus();
          }
        } catch (e$1) {
        }
      }
    }
    function onDragStart(cm, e) {
      if (ie && (!cm.state.draggingText || +new Date() - lastDrop < 100)) {
        e_stop(e);
        return;
      }
      if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) {
        return;
      }
      e.dataTransfer.setData("Text", cm.getSelection());
      e.dataTransfer.effectAllowed = "copyMove";
      if (e.dataTransfer.setDragImage && !safari) {
        var img = elt("img", null, null, "position: fixed; left: 0; top: 0;");
        img.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";
        if (presto) {
          img.width = img.height = 1;
          cm.display.wrapper.appendChild(img);
          img._top = img.offsetTop;
        }
        e.dataTransfer.setDragImage(img, 0, 0);
        if (presto) {
          img.parentNode.removeChild(img);
        }
      }
    }
    function onDragOver(cm, e) {
      var pos = posFromMouse(cm, e);
      if (!pos) {
        return;
      }
      var frag = document.createDocumentFragment();
      drawSelectionCursor(cm, pos, frag);
      if (!cm.display.dragCursor) {
        cm.display.dragCursor = elt("div", null, "CodeMirror-cursors CodeMirror-dragcursors");
        cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);
      }
      removeChildrenAndAdd(cm.display.dragCursor, frag);
    }
    function clearDragCursor(cm) {
      if (cm.display.dragCursor) {
        cm.display.lineSpace.removeChild(cm.display.dragCursor);
        cm.display.dragCursor = null;
      }
    }
    function forEachCodeMirror(f) {
      if (!document.getElementsByClassName) {
        return;
      }
      var byClass = document.getElementsByClassName("CodeMirror"), editors = [];
      for (var i2 = 0; i2 < byClass.length; i2++) {
        var cm = byClass[i2].CodeMirror;
        if (cm) {
          editors.push(cm);
        }
      }
      if (editors.length) {
        editors[0].operation(function() {
          for (var i3 = 0; i3 < editors.length; i3++) {
            f(editors[i3]);
          }
        });
      }
    }
    var globalsRegistered = false;
    function ensureGlobalHandlers() {
      if (globalsRegistered) {
        return;
      }
      registerGlobalHandlers();
      globalsRegistered = true;
    }
    function registerGlobalHandlers() {
      var resizeTimer;
      on(window, "resize", function() {
        if (resizeTimer == null) {
          resizeTimer = setTimeout(function() {
            resizeTimer = null;
            forEachCodeMirror(onResize);
          }, 100);
        }
      });
      on(window, "blur", function() {
        return forEachCodeMirror(onBlur);
      });
    }
    function onResize(cm) {
      var d = cm.display;
      d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;
      d.scrollbarsClipped = false;
      cm.setSize();
    }
    var keyNames = {
      3: "Pause",
      8: "Backspace",
      9: "Tab",
      13: "Enter",
      16: "Shift",
      17: "Ctrl",
      18: "Alt",
      19: "Pause",
      20: "CapsLock",
      27: "Esc",
      32: "Space",
      33: "PageUp",
      34: "PageDown",
      35: "End",
      36: "Home",
      37: "Left",
      38: "Up",
      39: "Right",
      40: "Down",
      44: "PrintScrn",
      45: "Insert",
      46: "Delete",
      59: ";",
      61: "=",
      91: "Mod",
      92: "Mod",
      93: "Mod",
      106: "*",
      107: "=",
      109: "-",
      110: ".",
      111: "/",
      145: "ScrollLock",
      173: "-",
      186: ";",
      187: "=",
      188: ",",
      189: "-",
      190: ".",
      191: "/",
      192: "`",
      219: "[",
      220: "\\",
      221: "]",
      222: "'",
      63232: "Up",
      63233: "Down",
      63234: "Left",
      63235: "Right",
      63272: "Delete",
      63273: "Home",
      63275: "End",
      63276: "PageUp",
      63277: "PageDown",
      63302: "Insert"
    };
    for (var i = 0; i < 10; i++) {
      keyNames[i + 48] = keyNames[i + 96] = String(i);
    }
    for (var i$1 = 65; i$1 <= 90; i$1++) {
      keyNames[i$1] = String.fromCharCode(i$1);
    }
    for (var i$2 = 1; i$2 <= 12; i$2++) {
      keyNames[i$2 + 111] = keyNames[i$2 + 63235] = "F" + i$2;
    }
    var keyMap = {};
    keyMap.basic = {
      Left: "goCharLeft",
      Right: "goCharRight",
      Up: "goLineUp",
      Down: "goLineDown",
      End: "goLineEnd",
      Home: "goLineStartSmart",
      PageUp: "goPageUp",
      PageDown: "goPageDown",
      Delete: "delCharAfter",
      Backspace: "delCharBefore",
      "Shift-Backspace": "delCharBefore",
      Tab: "defaultTab",
      "Shift-Tab": "indentAuto",
      Enter: "newlineAndIndent",
      Insert: "toggleOverwrite",
      Esc: "singleSelection"
    };
    keyMap.pcDefault = {
      "Ctrl-A": "selectAll",
      "Ctrl-D": "deleteLine",
      "Ctrl-Z": "undo",
      "Shift-Ctrl-Z": "redo",
      "Ctrl-Y": "redo",
      "Ctrl-Home": "goDocStart",
      "Ctrl-End": "goDocEnd",
      "Ctrl-Up": "goLineUp",
      "Ctrl-Down": "goLineDown",
      "Ctrl-Left": "goGroupLeft",
      "Ctrl-Right": "goGroupRight",
      "Alt-Left": "goLineStart",
      "Alt-Right": "goLineEnd",
      "Ctrl-Backspace": "delGroupBefore",
      "Ctrl-Delete": "delGroupAfter",
      "Ctrl-S": "save",
      "Ctrl-F": "find",
      "Ctrl-G": "findNext",
      "Shift-Ctrl-G": "findPrev",
      "Shift-Ctrl-F": "replace",
      "Shift-Ctrl-R": "replaceAll",
      "Ctrl-[": "indentLess",
      "Ctrl-]": "indentMore",
      "Ctrl-U": "undoSelection",
      "Shift-Ctrl-U": "redoSelection",
      "Alt-U": "redoSelection",
      fallthrough: "basic"
    };
    keyMap.emacsy = {
      "Ctrl-F": "goCharRight",
      "Ctrl-B": "goCharLeft",
      "Ctrl-P": "goLineUp",
      "Ctrl-N": "goLineDown",
      "Alt-F": "goWordRight",
      "Alt-B": "goWordLeft",
      "Ctrl-A": "goLineStart",
      "Ctrl-E": "goLineEnd",
      "Ctrl-V": "goPageDown",
      "Shift-Ctrl-V": "goPageUp",
      "Ctrl-D": "delCharAfter",
      "Ctrl-H": "delCharBefore",
      "Alt-D": "delWordAfter",
      "Alt-Backspace": "delWordBefore",
      "Ctrl-K": "killLine",
      "Ctrl-T": "transposeChars",
      "Ctrl-O": "openLine"
    };
    keyMap.macDefault = {
      "Cmd-A": "selectAll",
      "Cmd-D": "deleteLine",
      "Cmd-Z": "undo",
      "Shift-Cmd-Z": "redo",
      "Cmd-Y": "redo",
      "Cmd-Home": "goDocStart",
      "Cmd-Up": "goDocStart",
      "Cmd-End": "goDocEnd",
      "Cmd-Down": "goDocEnd",
      "Alt-Left": "goGroupLeft",
      "Alt-Right": "goGroupRight",
      "Cmd-Left": "goLineLeft",
      "Cmd-Right": "goLineRight",
      "Alt-Backspace": "delGroupBefore",
      "Ctrl-Alt-Backspace": "delGroupAfter",
      "Alt-Delete": "delGroupAfter",
      "Cmd-S": "save",
      "Cmd-F": "find",
      "Cmd-G": "findNext",
      "Shift-Cmd-G": "findPrev",
      "Cmd-Alt-F": "replace",
      "Shift-Cmd-Alt-F": "replaceAll",
      "Cmd-[": "indentLess",
      "Cmd-]": "indentMore",
      "Cmd-Backspace": "delWrappedLineLeft",
      "Cmd-Delete": "delWrappedLineRight",
      "Cmd-U": "undoSelection",
      "Shift-Cmd-U": "redoSelection",
      "Ctrl-Up": "goDocStart",
      "Ctrl-Down": "goDocEnd",
      fallthrough: ["basic", "emacsy"]
    };
    keyMap["default"] = mac ? keyMap.macDefault : keyMap.pcDefault;
    function normalizeKeyName(name) {
      var parts = name.split(/-(?!$)/);
      name = parts[parts.length - 1];
      var alt, ctrl, shift, cmd;
      for (var i2 = 0; i2 < parts.length - 1; i2++) {
        var mod = parts[i2];
        if (/^(cmd|meta|m)$/i.test(mod)) {
          cmd = true;
        } else if (/^a(lt)?$/i.test(mod)) {
          alt = true;
        } else if (/^(c|ctrl|control)$/i.test(mod)) {
          ctrl = true;
        } else if (/^s(hift)?$/i.test(mod)) {
          shift = true;
        } else {
          throw new Error("Unrecognized modifier name: " + mod);
        }
      }
      if (alt) {
        name = "Alt-" + name;
      }
      if (ctrl) {
        name = "Ctrl-" + name;
      }
      if (cmd) {
        name = "Cmd-" + name;
      }
      if (shift) {
        name = "Shift-" + name;
      }
      return name;
    }
    function normalizeKeyMap(keymap) {
      var copy = {};
      for (var keyname in keymap) {
        if (keymap.hasOwnProperty(keyname)) {
          var value = keymap[keyname];
          if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) {
            continue;
          }
          if (value == "...") {
            delete keymap[keyname];
            continue;
          }
          var keys = map(keyname.split(" "), normalizeKeyName);
          for (var i2 = 0; i2 < keys.length; i2++) {
            var val = void 0, name = void 0;
            if (i2 == keys.length - 1) {
              name = keys.join(" ");
              val = value;
            } else {
              name = keys.slice(0, i2 + 1).join(" ");
              val = "...";
            }
            var prev = copy[name];
            if (!prev) {
              copy[name] = val;
            } else if (prev != val) {
              throw new Error("Inconsistent bindings for " + name);
            }
          }
          delete keymap[keyname];
        }
      }
      for (var prop2 in copy) {
        keymap[prop2] = copy[prop2];
      }
      return keymap;
    }
    function lookupKey(key, map2, handle, context) {
      map2 = getKeyMap(map2);
      var found = map2.call ? map2.call(key, context) : map2[key];
      if (found === false) {
        return "nothing";
      }
      if (found === "...") {
        return "multi";
      }
      if (found != null && handle(found)) {
        return "handled";
      }
      if (map2.fallthrough) {
        if (Object.prototype.toString.call(map2.fallthrough) != "[object Array]") {
          return lookupKey(key, map2.fallthrough, handle, context);
        }
        for (var i2 = 0; i2 < map2.fallthrough.length; i2++) {
          var result = lookupKey(key, map2.fallthrough[i2], handle, context);
          if (result) {
            return result;
          }
        }
      }
    }
    function isModifierKey(value) {
      var name = typeof value == "string" ? value : keyNames[value.keyCode];
      return name == "Ctrl" || name == "Alt" || name == "Shift" || name == "Mod";
    }
    function addModifierNames(name, event, noShift) {
      var base = name;
      if (event.altKey && base != "Alt") {
        name = "Alt-" + name;
      }
      if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != "Ctrl") {
        name = "Ctrl-" + name;
      }
      if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != "Cmd") {
        name = "Cmd-" + name;
      }
      if (!noShift && event.shiftKey && base != "Shift") {
        name = "Shift-" + name;
      }
      return name;
    }
    function keyName(event, noShift) {
      if (presto && event.keyCode == 34 && event["char"]) {
        return false;
      }
      var name = keyNames[event.keyCode];
      if (name == null || event.altGraphKey) {
        return false;
      }
      if (event.keyCode == 3 && event.code) {
        name = event.code;
      }
      return addModifierNames(name, event, noShift);
    }
    function getKeyMap(val) {
      return typeof val == "string" ? keyMap[val] : val;
    }
    function deleteNearSelection(cm, compute) {
      var ranges = cm.doc.sel.ranges, kill = [];
      for (var i2 = 0; i2 < ranges.length; i2++) {
        var toKill = compute(ranges[i2]);
        while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {
          var replaced = kill.pop();
          if (cmp(replaced.from, toKill.from) < 0) {
            toKill.from = replaced.from;
            break;
          }
        }
        kill.push(toKill);
      }
      runInOp(cm, function() {
        for (var i3 = kill.length - 1; i3 >= 0; i3--) {
          replaceRange(cm.doc, "", kill[i3].from, kill[i3].to, "+delete");
        }
        ensureCursorVisible(cm);
      });
    }
    function moveCharLogically(line, ch, dir) {
      var target = skipExtendingChars(line.text, ch + dir, dir);
      return target < 0 || target > line.text.length ? null : target;
    }
    function moveLogically(line, start, dir) {
      var ch = moveCharLogically(line, start.ch, dir);
      return ch == null ? null : new Pos(start.line, ch, dir < 0 ? "after" : "before");
    }
    function endOfLine(visually, cm, lineObj, lineNo2, dir) {
      if (visually) {
        if (cm.doc.direction == "rtl") {
          dir = -dir;
        }
        var order = getOrder(lineObj, cm.doc.direction);
        if (order) {
          var part = dir < 0 ? lst(order) : order[0];
          var moveInStorageOrder = dir < 0 == (part.level == 1);
          var sticky = moveInStorageOrder ? "after" : "before";
          var ch;
          if (part.level > 0 || cm.doc.direction == "rtl") {
            var prep = prepareMeasureForLine(cm, lineObj);
            ch = dir < 0 ? lineObj.text.length - 1 : 0;
            var targetTop = measureCharPrepared(cm, prep, ch).top;
            ch = findFirst(function(ch2) {
              return measureCharPrepared(cm, prep, ch2).top == targetTop;
            }, dir < 0 == (part.level == 1) ? part.from : part.to - 1, ch);
            if (sticky == "before") {
              ch = moveCharLogically(lineObj, ch, 1);
            }
          } else {
            ch = dir < 0 ? part.to : part.from;
          }
          return new Pos(lineNo2, ch, sticky);
        }
      }
      return new Pos(lineNo2, dir < 0 ? lineObj.text.length : 0, dir < 0 ? "before" : "after");
    }
    function moveVisually(cm, line, start, dir) {
      var bidi = getOrder(line, cm.doc.direction);
      if (!bidi) {
        return moveLogically(line, start, dir);
      }
      if (start.ch >= line.text.length) {
        start.ch = line.text.length;
        start.sticky = "before";
      } else if (start.ch <= 0) {
        start.ch = 0;
        start.sticky = "after";
      }
      var partPos = getBidiPartAt(bidi, start.ch, start.sticky), part = bidi[partPos];
      if (cm.doc.direction == "ltr" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {
        return moveLogically(line, start, dir);
      }
      var mv = function(pos, dir2) {
        return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir2);
      };
      var prep;
      var getWrappedLineExtent = function(ch2) {
        if (!cm.options.lineWrapping) {
          return {begin: 0, end: line.text.length};
        }
        prep = prep || prepareMeasureForLine(cm, line);
        return wrappedLineExtentChar(cm, line, prep, ch2);
      };
      var wrappedLineExtent2 = getWrappedLineExtent(start.sticky == "before" ? mv(start, -1) : start.ch);
      if (cm.doc.direction == "rtl" || part.level == 1) {
        var moveInStorageOrder = part.level == 1 == dir < 0;
        var ch = mv(start, moveInStorageOrder ? 1 : -1);
        if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent2.begin : ch <= part.to && ch <= wrappedLineExtent2.end)) {
          var sticky = moveInStorageOrder ? "before" : "after";
          return new Pos(start.line, ch, sticky);
        }
      }
      var searchInVisualLine = function(partPos2, dir2, wrappedLineExtent3) {
        var getRes = function(ch3, moveInStorageOrder3) {
          return moveInStorageOrder3 ? new Pos(start.line, mv(ch3, 1), "before") : new Pos(start.line, ch3, "after");
        };
        for (; partPos2 >= 0 && partPos2 < bidi.length; partPos2 += dir2) {
          var part2 = bidi[partPos2];
          var moveInStorageOrder2 = dir2 > 0 == (part2.level != 1);
          var ch2 = moveInStorageOrder2 ? wrappedLineExtent3.begin : mv(wrappedLineExtent3.end, -1);
          if (part2.from <= ch2 && ch2 < part2.to) {
            return getRes(ch2, moveInStorageOrder2);
          }
          ch2 = moveInStorageOrder2 ? part2.from : mv(part2.to, -1);
          if (wrappedLineExtent3.begin <= ch2 && ch2 < wrappedLineExtent3.end) {
            return getRes(ch2, moveInStorageOrder2);
          }
        }
      };
      var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent2);
      if (res) {
        return res;
      }
      var nextCh = dir > 0 ? wrappedLineExtent2.end : mv(wrappedLineExtent2.begin, -1);
      if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {
        res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));
        if (res) {
          return res;
        }
      }
      return null;
    }
    var commands = {
      selectAll,
      singleSelection: function(cm) {
        return cm.setSelection(cm.getCursor("anchor"), cm.getCursor("head"), sel_dontScroll);
      },
      killLine: function(cm) {
        return deleteNearSelection(cm, function(range2) {
          if (range2.empty()) {
            var len = getLine(cm.doc, range2.head.line).text.length;
            if (range2.head.ch == len && range2.head.line < cm.lastLine()) {
              return {from: range2.head, to: Pos(range2.head.line + 1, 0)};
            } else {
              return {from: range2.head, to: Pos(range2.head.line, len)};
            }
          } else {
            return {from: range2.from(), to: range2.to()};
          }
        });
      },
      deleteLine: function(cm) {
        return deleteNearSelection(cm, function(range2) {
          return {
            from: Pos(range2.from().line, 0),
            to: clipPos(cm.doc, Pos(range2.to().line + 1, 0))
          };
        });
      },
      delLineLeft: function(cm) {
        return deleteNearSelection(cm, function(range2) {
          return {
            from: Pos(range2.from().line, 0),
            to: range2.from()
          };
        });
      },
      delWrappedLineLeft: function(cm) {
        return deleteNearSelection(cm, function(range2) {
          var top = cm.charCoords(range2.head, "div").top + 5;
          var leftPos = cm.coordsChar({left: 0, top}, "div");
          return {from: leftPos, to: range2.from()};
        });
      },
      delWrappedLineRight: function(cm) {
        return deleteNearSelection(cm, function(range2) {
          var top = cm.charCoords(range2.head, "div").top + 5;
          var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top}, "div");
          return {from: range2.from(), to: rightPos};
        });
      },
      undo: function(cm) {
        return cm.undo();
      },
      redo: function(cm) {
        return cm.redo();
      },
      undoSelection: function(cm) {
        return cm.undoSelection();
      },
      redoSelection: function(cm) {
        return cm.redoSelection();
      },
      goDocStart: function(cm) {
        return cm.extendSelection(Pos(cm.firstLine(), 0));
      },
      goDocEnd: function(cm) {
        return cm.extendSelection(Pos(cm.lastLine()));
      },
      goLineStart: function(cm) {
        return cm.extendSelectionsBy(function(range2) {
          return lineStart(cm, range2.head.line);
        }, {origin: "+move", bias: 1});
      },
      goLineStartSmart: function(cm) {
        return cm.extendSelectionsBy(function(range2) {
          return lineStartSmart(cm, range2.head);
        }, {origin: "+move", bias: 1});
      },
      goLineEnd: function(cm) {
        return cm.extendSelectionsBy(function(range2) {
          return lineEnd(cm, range2.head.line);
        }, {origin: "+move", bias: -1});
      },
      goLineRight: function(cm) {
        return cm.extendSelectionsBy(function(range2) {
          var top = cm.cursorCoords(range2.head, "div").top + 5;
          return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top}, "div");
        }, sel_move);
      },
      goLineLeft: function(cm) {
        return cm.extendSelectionsBy(function(range2) {
          var top = cm.cursorCoords(range2.head, "div").top + 5;
          return cm.coordsChar({left: 0, top}, "div");
        }, sel_move);
      },
      goLineLeftSmart: function(cm) {
        return cm.extendSelectionsBy(function(range2) {
          var top = cm.cursorCoords(range2.head, "div").top + 5;
          var pos = cm.coordsChar({left: 0, top}, "div");
          if (pos.ch < cm.getLine(pos.line).search(/\S/)) {
            return lineStartSmart(cm, range2.head);
          }
          return pos;
        }, sel_move);
      },
      goLineUp: function(cm) {
        return cm.moveV(-1, "line");
      },
      goLineDown: function(cm) {
        return cm.moveV(1, "line");
      },
      goPageUp: function(cm) {
        return cm.moveV(-1, "page");
      },
      goPageDown: function(cm) {
        return cm.moveV(1, "page");
      },
      goCharLeft: function(cm) {
        return cm.moveH(-1, "char");
      },
      goCharRight: function(cm) {
        return cm.moveH(1, "char");
      },
      goColumnLeft: function(cm) {
        return cm.moveH(-1, "column");
      },
      goColumnRight: function(cm) {
        return cm.moveH(1, "column");
      },
      goWordLeft: function(cm) {
        return cm.moveH(-1, "word");
      },
      goGroupRight: function(cm) {
        return cm.moveH(1, "group");
      },
      goGroupLeft: function(cm) {
        return cm.moveH(-1, "group");
      },
      goWordRight: function(cm) {
        return cm.moveH(1, "word");
      },
      delCharBefore: function(cm) {
        return cm.deleteH(-1, "char");
      },
      delCharAfter: function(cm) {
        return cm.deleteH(1, "char");
      },
      delWordBefore: function(cm) {
        return cm.deleteH(-1, "word");
      },
      delWordAfter: function(cm) {
        return cm.deleteH(1, "word");
      },
      delGroupBefore: function(cm) {
        return cm.deleteH(-1, "group");
      },
      delGroupAfter: function(cm) {
        return cm.deleteH(1, "group");
      },
      indentAuto: function(cm) {
        return cm.indentSelection("smart");
      },
      indentMore: function(cm) {
        return cm.indentSelection("add");
      },
      indentLess: function(cm) {
        return cm.indentSelection("subtract");
      },
      insertTab: function(cm) {
        return cm.replaceSelection("	");
      },
      insertSoftTab: function(cm) {
        var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;
        for (var i2 = 0; i2 < ranges.length; i2++) {
          var pos = ranges[i2].from();
          var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);
          spaces.push(spaceStr(tabSize - col % tabSize));
        }
        cm.replaceSelections(spaces);
      },
      defaultTab: function(cm) {
        if (cm.somethingSelected()) {
          cm.indentSelection("add");
        } else {
          cm.execCommand("insertTab");
        }
      },
      transposeChars: function(cm) {
        return runInOp(cm, function() {
          var ranges = cm.listSelections(), newSel = [];
          for (var i2 = 0; i2 < ranges.length; i2++) {
            if (!ranges[i2].empty()) {
              continue;
            }
            var cur = ranges[i2].head, line = getLine(cm.doc, cur.line).text;
            if (line) {
              if (cur.ch == line.length) {
                cur = new Pos(cur.line, cur.ch - 1);
              }
              if (cur.ch > 0) {
                cur = new Pos(cur.line, cur.ch + 1);
                cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2), Pos(cur.line, cur.ch - 2), cur, "+transpose");
              } else if (cur.line > cm.doc.first) {
                var prev = getLine(cm.doc, cur.line - 1).text;
                if (prev) {
                  cur = new Pos(cur.line, 1);
                  cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() + prev.charAt(prev.length - 1), Pos(cur.line - 1, prev.length - 1), cur, "+transpose");
                }
              }
            }
            newSel.push(new Range(cur, cur));
          }
          cm.setSelections(newSel);
        });
      },
      newlineAndIndent: function(cm) {
        return runInOp(cm, function() {
          var sels = cm.listSelections();
          for (var i2 = sels.length - 1; i2 >= 0; i2--) {
            cm.replaceRange(cm.doc.lineSeparator(), sels[i2].anchor, sels[i2].head, "+input");
          }
          sels = cm.listSelections();
          for (var i$12 = 0; i$12 < sels.length; i$12++) {
            cm.indentLine(sels[i$12].from().line, null, true);
          }
          ensureCursorVisible(cm);
        });
      },
      openLine: function(cm) {
        return cm.replaceSelection("\n", "start");
      },
      toggleOverwrite: function(cm) {
        return cm.toggleOverwrite();
      }
    };
    function lineStart(cm, lineN) {
      var line = getLine(cm.doc, lineN);
      var visual = visualLine(line);
      if (visual != line) {
        lineN = lineNo(visual);
      }
      return endOfLine(true, cm, visual, lineN, 1);
    }
    function lineEnd(cm, lineN) {
      var line = getLine(cm.doc, lineN);
      var visual = visualLineEnd(line);
      if (visual != line) {
        lineN = lineNo(visual);
      }
      return endOfLine(true, cm, line, lineN, -1);
    }
    function lineStartSmart(cm, pos) {
      var start = lineStart(cm, pos.line);
      var line = getLine(cm.doc, start.line);
      var order = getOrder(line, cm.doc.direction);
      if (!order || order[0].level == 0) {
        var firstNonWS = Math.max(start.ch, line.text.search(/\S/));
        var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;
        return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky);
      }
      return start;
    }
    function doHandleBinding(cm, bound, dropShift) {
      if (typeof bound == "string") {
        bound = commands[bound];
        if (!bound) {
          return false;
        }
      }
      cm.display.input.ensurePolled();
      var prevShift = cm.display.shift, done = false;
      try {
        if (cm.isReadOnly()) {
          cm.state.suppressEdits = true;
        }
        if (dropShift) {
          cm.display.shift = false;
        }
        done = bound(cm) != Pass;
      } finally {
        cm.display.shift = prevShift;
        cm.state.suppressEdits = false;
      }
      return done;
    }
    function lookupKeyForEditor(cm, name, handle) {
      for (var i2 = 0; i2 < cm.state.keyMaps.length; i2++) {
        var result = lookupKey(name, cm.state.keyMaps[i2], handle, cm);
        if (result) {
          return result;
        }
      }
      return cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm) || lookupKey(name, cm.options.keyMap, handle, cm);
    }
    var stopSeq = new Delayed();
    function dispatchKey(cm, name, e, handle) {
      var seq = cm.state.keySeq;
      if (seq) {
        if (isModifierKey(name)) {
          return "handled";
        }
        if (/\'$/.test(name)) {
          cm.state.keySeq = null;
        } else {
          stopSeq.set(50, function() {
            if (cm.state.keySeq == seq) {
              cm.state.keySeq = null;
              cm.display.input.reset();
            }
          });
        }
        if (dispatchKeyInner(cm, seq + " " + name, e, handle)) {
          return true;
        }
      }
      return dispatchKeyInner(cm, name, e, handle);
    }
    function dispatchKeyInner(cm, name, e, handle) {
      var result = lookupKeyForEditor(cm, name, handle);
      if (result == "multi") {
        cm.state.keySeq = name;
      }
      if (result == "handled") {
        signalLater(cm, "keyHandled", cm, name, e);
      }
      if (result == "handled" || result == "multi") {
        e_preventDefault(e);
        restartBlink(cm);
      }
      return !!result;
    }
    function handleKeyBinding(cm, e) {
      var name = keyName(e, true);
      if (!name) {
        return false;
      }
      if (e.shiftKey && !cm.state.keySeq) {
        return dispatchKey(cm, "Shift-" + name, e, function(b) {
          return doHandleBinding(cm, b, true);
        }) || dispatchKey(cm, name, e, function(b) {
          if (typeof b == "string" ? /^go[A-Z]/.test(b) : b.motion) {
            return doHandleBinding(cm, b);
          }
        });
      } else {
        return dispatchKey(cm, name, e, function(b) {
          return doHandleBinding(cm, b);
        });
      }
    }
    function handleCharBinding(cm, e, ch) {
      return dispatchKey(cm, "'" + ch + "'", e, function(b) {
        return doHandleBinding(cm, b, true);
      });
    }
    var lastStoppedKey = null;
    function onKeyDown(e) {
      var cm = this;
      if (e.target && e.target != cm.display.input.getField()) {
        return;
      }
      cm.curOp.focus = activeElt();
      if (signalDOMEvent(cm, e)) {
        return;
      }
      if (ie && ie_version < 11 && e.keyCode == 27) {
        e.returnValue = false;
      }
      var code = e.keyCode;
      cm.display.shift = code == 16 || e.shiftKey;
      var handled = handleKeyBinding(cm, e);
      if (presto) {
        lastStoppedKey = handled ? code : null;
        if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey)) {
          cm.replaceSelection("", null, "cut");
        }
      }
      if (gecko && !mac && !handled && code == 46 && e.shiftKey && !e.ctrlKey && document.execCommand) {
        document.execCommand("cut");
      }
      if (code == 18 && !/\bCodeMirror-crosshair\b/.test(cm.display.lineDiv.className)) {
        showCrossHair(cm);
      }
    }
    function showCrossHair(cm) {
      var lineDiv = cm.display.lineDiv;
      addClass(lineDiv, "CodeMirror-crosshair");
      function up(e) {
        if (e.keyCode == 18 || !e.altKey) {
          rmClass(lineDiv, "CodeMirror-crosshair");
          off(document, "keyup", up);
          off(document, "mouseover", up);
        }
      }
      on(document, "keyup", up);
      on(document, "mouseover", up);
    }
    function onKeyUp(e) {
      if (e.keyCode == 16) {
        this.doc.sel.shift = false;
      }
      signalDOMEvent(this, e);
    }
    function onKeyPress(e) {
      var cm = this;
      if (e.target && e.target != cm.display.input.getField()) {
        return;
      }
      if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) {
        return;
      }
      var keyCode = e.keyCode, charCode = e.charCode;
      if (presto && keyCode == lastStoppedKey) {
        lastStoppedKey = null;
        e_preventDefault(e);
        return;
      }
      if (presto && (!e.which || e.which < 10) && handleKeyBinding(cm, e)) {
        return;
      }
      var ch = String.fromCharCode(charCode == null ? keyCode : charCode);
      if (ch == "\b") {
        return;
      }
      if (handleCharBinding(cm, e, ch)) {
        return;
      }
      cm.display.input.onKeyPress(e);
    }
    var DOUBLECLICK_DELAY = 400;
    var PastClick = function(time, pos, button) {
      this.time = time;
      this.pos = pos;
      this.button = button;
    };
    PastClick.prototype.compare = function(time, pos, button) {
      return this.time + DOUBLECLICK_DELAY > time && cmp(pos, this.pos) == 0 && button == this.button;
    };
    var lastClick, lastDoubleClick;
    function clickRepeat(pos, button) {
      var now = +new Date();
      if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {
        lastClick = lastDoubleClick = null;
        return "triple";
      } else if (lastClick && lastClick.compare(now, pos, button)) {
        lastDoubleClick = new PastClick(now, pos, button);
        lastClick = null;
        return "double";
      } else {
        lastClick = new PastClick(now, pos, button);
        lastDoubleClick = null;
        return "single";
      }
    }
    function onMouseDown(e) {
      var cm = this, display = cm.display;
      if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) {
        return;
      }
      display.input.ensurePolled();
      display.shift = e.shiftKey;
      if (eventInWidget(display, e)) {
        if (!webkit) {
          display.scroller.draggable = false;
          setTimeout(function() {
            return display.scroller.draggable = true;
          }, 100);
        }
        return;
      }
      if (clickInGutter(cm, e)) {
        return;
      }
      var pos = posFromMouse(cm, e), button = e_button(e), repeat = pos ? clickRepeat(pos, button) : "single";
      window.focus();
      if (button == 1 && cm.state.selectingText) {
        cm.state.selectingText(e);
      }
      if (pos && handleMappedButton(cm, button, pos, repeat, e)) {
        return;
      }
      if (button == 1) {
        if (pos) {
          leftButtonDown(cm, pos, repeat, e);
        } else if (e_target(e) == display.scroller) {
          e_preventDefault(e);
        }
      } else if (button == 2) {
        if (pos) {
          extendSelection(cm.doc, pos);
        }
        setTimeout(function() {
          return display.input.focus();
        }, 20);
      } else if (button == 3) {
        if (captureRightClick) {
          cm.display.input.onContextMenu(e);
        } else {
          delayBlurEvent(cm);
        }
      }
    }
    function handleMappedButton(cm, button, pos, repeat, event) {
      var name = "Click";
      if (repeat == "double") {
        name = "Double" + name;
      } else if (repeat == "triple") {
        name = "Triple" + name;
      }
      name = (button == 1 ? "Left" : button == 2 ? "Middle" : "Right") + name;
      return dispatchKey(cm, addModifierNames(name, event), event, function(bound) {
        if (typeof bound == "string") {
          bound = commands[bound];
        }
        if (!bound) {
          return false;
        }
        var done = false;
        try {
          if (cm.isReadOnly()) {
            cm.state.suppressEdits = true;
          }
          done = bound(cm, pos) != Pass;
        } finally {
          cm.state.suppressEdits = false;
        }
        return done;
      });
    }
    function configureMouse(cm, repeat, event) {
      var option = cm.getOption("configureMouse");
      var value = option ? option(cm, repeat, event) : {};
      if (value.unit == null) {
        var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;
        value.unit = rect ? "rectangle" : repeat == "single" ? "char" : repeat == "double" ? "word" : "line";
      }
      if (value.extend == null || cm.doc.extend) {
        value.extend = cm.doc.extend || event.shiftKey;
      }
      if (value.addNew == null) {
        value.addNew = mac ? event.metaKey : event.ctrlKey;
      }
      if (value.moveOnDrag == null) {
        value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey);
      }
      return value;
    }
    function leftButtonDown(cm, pos, repeat, event) {
      if (ie) {
        setTimeout(bind(ensureFocus, cm), 0);
      } else {
        cm.curOp.focus = activeElt();
      }
      var behavior = configureMouse(cm, repeat, event);
      var sel = cm.doc.sel, contained;
      if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() && repeat == "single" && (contained = sel.contains(pos)) > -1 && (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) && (cmp(contained.to(), pos) > 0 || pos.xRel < 0)) {
        leftButtonStartDrag(cm, event, pos, behavior);
      } else {
        leftButtonSelect(cm, event, pos, behavior);
      }
    }
    function leftButtonStartDrag(cm, event, pos, behavior) {
      var display = cm.display, moved = false;
      var dragEnd = operation(cm, function(e) {
        if (webkit) {
          display.scroller.draggable = false;
        }
        cm.state.draggingText = false;
        off(display.wrapper.ownerDocument, "mouseup", dragEnd);
        off(display.wrapper.ownerDocument, "mousemove", mouseMove);
        off(display.scroller, "dragstart", dragStart);
        off(display.scroller, "drop", dragEnd);
        if (!moved) {
          e_preventDefault(e);
          if (!behavior.addNew) {
            extendSelection(cm.doc, pos, null, null, behavior.extend);
          }
          if (webkit && !safari || ie && ie_version == 9) {
            setTimeout(function() {
              display.wrapper.ownerDocument.body.focus({preventScroll: true});
              display.input.focus();
            }, 20);
          } else {
            display.input.focus();
          }
        }
      });
      var mouseMove = function(e2) {
        moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;
      };
      var dragStart = function() {
        return moved = true;
      };
      if (webkit) {
        display.scroller.draggable = true;
      }
      cm.state.draggingText = dragEnd;
      dragEnd.copy = !behavior.moveOnDrag;
      if (display.scroller.dragDrop) {
        display.scroller.dragDrop();
      }
      on(display.wrapper.ownerDocument, "mouseup", dragEnd);
      on(display.wrapper.ownerDocument, "mousemove", mouseMove);
      on(display.scroller, "dragstart", dragStart);
      on(display.scroller, "drop", dragEnd);
      delayBlurEvent(cm);
      setTimeout(function() {
        return display.input.focus();
      }, 20);
    }
    function rangeForUnit(cm, pos, unit) {
      if (unit == "char") {
        return new Range(pos, pos);
      }
      if (unit == "word") {
        return cm.findWordAt(pos);
      }
      if (unit == "line") {
        return new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0)));
      }
      var result = unit(cm, pos);
      return new Range(result.from, result.to);
    }
    function leftButtonSelect(cm, event, start, behavior) {
      var display = cm.display, doc = cm.doc;
      e_preventDefault(event);
      var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges;
      if (behavior.addNew && !behavior.extend) {
        ourIndex = doc.sel.contains(start);
        if (ourIndex > -1) {
          ourRange = ranges[ourIndex];
        } else {
          ourRange = new Range(start, start);
        }
      } else {
        ourRange = doc.sel.primary();
        ourIndex = doc.sel.primIndex;
      }
      if (behavior.unit == "rectangle") {
        if (!behavior.addNew) {
          ourRange = new Range(start, start);
        }
        start = posFromMouse(cm, event, true, true);
        ourIndex = -1;
      } else {
        var range2 = rangeForUnit(cm, start, behavior.unit);
        if (behavior.extend) {
          ourRange = extendRange(ourRange, range2.anchor, range2.head, behavior.extend);
        } else {
          ourRange = range2;
        }
      }
      if (!behavior.addNew) {
        ourIndex = 0;
        setSelection(doc, new Selection([ourRange], 0), sel_mouse);
        startSel = doc.sel;
      } else if (ourIndex == -1) {
        ourIndex = ranges.length;
        setSelection(doc, normalizeSelection(cm, ranges.concat([ourRange]), ourIndex), {scroll: false, origin: "*mouse"});
      } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == "char" && !behavior.extend) {
        setSelection(doc, normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0), {scroll: false, origin: "*mouse"});
        startSel = doc.sel;
      } else {
        replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);
      }
      var lastPos = start;
      function extendTo(pos) {
        if (cmp(lastPos, pos) == 0) {
          return;
        }
        lastPos = pos;
        if (behavior.unit == "rectangle") {
          var ranges2 = [], tabSize = cm.options.tabSize;
          var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);
          var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);
          var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);
          for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line)); line <= end; line++) {
            var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);
            if (left == right) {
              ranges2.push(new Range(Pos(line, leftPos), Pos(line, leftPos)));
            } else if (text.length > leftPos) {
              ranges2.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize))));
            }
          }
          if (!ranges2.length) {
            ranges2.push(new Range(start, start));
          }
          setSelection(doc, normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges2), ourIndex), {origin: "*mouse", scroll: false});
          cm.scrollIntoView(pos);
        } else {
          var oldRange = ourRange;
          var range3 = rangeForUnit(cm, pos, behavior.unit);
          var anchor = oldRange.anchor, head;
          if (cmp(range3.anchor, anchor) > 0) {
            head = range3.head;
            anchor = minPos(oldRange.from(), range3.anchor);
          } else {
            head = range3.anchor;
            anchor = maxPos(oldRange.to(), range3.head);
          }
          var ranges$1 = startSel.ranges.slice(0);
          ranges$1[ourIndex] = bidiSimplify(cm, new Range(clipPos(doc, anchor), head));
          setSelection(doc, normalizeSelection(cm, ranges$1, ourIndex), sel_mouse);
        }
      }
      var editorSize = display.wrapper.getBoundingClientRect();
      var counter = 0;
      function extend(e) {
        var curCount = ++counter;
        var cur = posFromMouse(cm, e, true, behavior.unit == "rectangle");
        if (!cur) {
          return;
        }
        if (cmp(cur, lastPos) != 0) {
          cm.curOp.focus = activeElt();
          extendTo(cur);
          var visible = visibleLines(display, doc);
          if (cur.line >= visible.to || cur.line < visible.from) {
            setTimeout(operation(cm, function() {
              if (counter == curCount) {
                extend(e);
              }
            }), 150);
          }
        } else {
          var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;
          if (outside) {
            setTimeout(operation(cm, function() {
              if (counter != curCount) {
                return;
              }
              display.scroller.scrollTop += outside;
              extend(e);
            }), 50);
          }
        }
      }
      function done(e) {
        cm.state.selectingText = false;
        counter = Infinity;
        if (e) {
          e_preventDefault(e);
          display.input.focus();
        }
        off(display.wrapper.ownerDocument, "mousemove", move);
        off(display.wrapper.ownerDocument, "mouseup", up);
        doc.history.lastSelOrigin = null;
      }
      var move = operation(cm, function(e) {
        if (e.buttons === 0 || !e_button(e)) {
          done(e);
        } else {
          extend(e);
        }
      });
      var up = operation(cm, done);
      cm.state.selectingText = up;
      on(display.wrapper.ownerDocument, "mousemove", move);
      on(display.wrapper.ownerDocument, "mouseup", up);
    }
    function bidiSimplify(cm, range2) {
      var anchor = range2.anchor;
      var head = range2.head;
      var anchorLine = getLine(cm.doc, anchor.line);
      if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) {
        return range2;
      }
      var order = getOrder(anchorLine);
      if (!order) {
        return range2;
      }
      var index = getBidiPartAt(order, anchor.ch, anchor.sticky), part = order[index];
      if (part.from != anchor.ch && part.to != anchor.ch) {
        return range2;
      }
      var boundary = index + (part.from == anchor.ch == (part.level != 1) ? 0 : 1);
      if (boundary == 0 || boundary == order.length) {
        return range2;
      }
      var leftSide;
      if (head.line != anchor.line) {
        leftSide = (head.line - anchor.line) * (cm.doc.direction == "ltr" ? 1 : -1) > 0;
      } else {
        var headIndex = getBidiPartAt(order, head.ch, head.sticky);
        var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);
        if (headIndex == boundary - 1 || headIndex == boundary) {
          leftSide = dir < 0;
        } else {
          leftSide = dir > 0;
        }
      }
      var usePart = order[boundary + (leftSide ? -1 : 0)];
      var from = leftSide == (usePart.level == 1);
      var ch = from ? usePart.from : usePart.to, sticky = from ? "after" : "before";
      return anchor.ch == ch && anchor.sticky == sticky ? range2 : new Range(new Pos(anchor.line, ch, sticky), head);
    }
    function gutterEvent(cm, e, type, prevent) {
      var mX, mY;
      if (e.touches) {
        mX = e.touches[0].clientX;
        mY = e.touches[0].clientY;
      } else {
        try {
          mX = e.clientX;
          mY = e.clientY;
        } catch (e$1) {
          return false;
        }
      }
      if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) {
        return false;
      }
      if (prevent) {
        e_preventDefault(e);
      }
      var display = cm.display;
      var lineBox = display.lineDiv.getBoundingClientRect();
      if (mY > lineBox.bottom || !hasHandler(cm, type)) {
        return e_defaultPrevented(e);
      }
      mY -= lineBox.top - display.viewOffset;
      for (var i2 = 0; i2 < cm.display.gutterSpecs.length; ++i2) {
        var g = display.gutters.childNodes[i2];
        if (g && g.getBoundingClientRect().right >= mX) {
          var line = lineAtHeight(cm.doc, mY);
          var gutter = cm.display.gutterSpecs[i2];
          signal(cm, type, cm, line, gutter.className, e);
          return e_defaultPrevented(e);
        }
      }
    }
    function clickInGutter(cm, e) {
      return gutterEvent(cm, e, "gutterClick", true);
    }
    function onContextMenu(cm, e) {
      if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) {
        return;
      }
      if (signalDOMEvent(cm, e, "contextmenu")) {
        return;
      }
      if (!captureRightClick) {
        cm.display.input.onContextMenu(e);
      }
    }
    function contextMenuInGutter(cm, e) {
      if (!hasHandler(cm, "gutterContextMenu")) {
        return false;
      }
      return gutterEvent(cm, e, "gutterContextMenu", false);
    }
    function themeChanged(cm) {
      cm.display.wrapper.className = cm.display.wrapper.className.replace(/\s*cm-s-\S+/g, "") + cm.options.theme.replace(/(^|\s)\s*/g, " cm-s-");
      clearCaches(cm);
    }
    var Init = {toString: function() {
      return "CodeMirror.Init";
    }};
    var defaults = {};
    var optionHandlers = {};
    function defineOptions(CodeMirror5) {
      var optionHandlers2 = CodeMirror5.optionHandlers;
      function option(name, deflt, handle, notOnInit) {
        CodeMirror5.defaults[name] = deflt;
        if (handle) {
          optionHandlers2[name] = notOnInit ? function(cm, val, old) {
            if (old != Init) {
              handle(cm, val, old);
            }
          } : handle;
        }
      }
      CodeMirror5.defineOption = option;
      CodeMirror5.Init = Init;
      option("value", "", function(cm, val) {
        return cm.setValue(val);
      }, true);
      option("mode", null, function(cm, val) {
        cm.doc.modeOption = val;
        loadMode(cm);
      }, true);
      option("indentUnit", 2, loadMode, true);
      option("indentWithTabs", false);
      option("smartIndent", true);
      option("tabSize", 4, function(cm) {
        resetModeState(cm);
        clearCaches(cm);
        regChange(cm);
      }, true);
      option("lineSeparator", null, function(cm, val) {
        cm.doc.lineSep = val;
        if (!val) {
          return;
        }
        var newBreaks = [], lineNo2 = cm.doc.first;
        cm.doc.iter(function(line) {
          for (var pos = 0; ; ) {
            var found = line.text.indexOf(val, pos);
            if (found == -1) {
              break;
            }
            pos = found + val.length;
            newBreaks.push(Pos(lineNo2, found));
          }
          lineNo2++;
        });
        for (var i2 = newBreaks.length - 1; i2 >= 0; i2--) {
          replaceRange(cm.doc, val, newBreaks[i2], Pos(newBreaks[i2].line, newBreaks[i2].ch + val.length));
        }
      });
      option("specialChars", /[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200c\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g, function(cm, val, old) {
        cm.state.specialChars = new RegExp(val.source + (val.test("	") ? "" : "|	"), "g");
        if (old != Init) {
          cm.refresh();
        }
      });
      option("specialCharPlaceholder", defaultSpecialCharPlaceholder, function(cm) {
        return cm.refresh();
      }, true);
      option("electricChars", true);
      option("inputStyle", mobile ? "contenteditable" : "textarea", function() {
        throw new Error("inputStyle can not (yet) be changed in a running editor");
      }, true);
      option("spellcheck", false, function(cm, val) {
        return cm.getInputField().spellcheck = val;
      }, true);
      option("autocorrect", false, function(cm, val) {
        return cm.getInputField().autocorrect = val;
      }, true);
      option("autocapitalize", false, function(cm, val) {
        return cm.getInputField().autocapitalize = val;
      }, true);
      option("rtlMoveVisually", !windows);
      option("wholeLineUpdateBefore", true);
      option("theme", "default", function(cm) {
        themeChanged(cm);
        updateGutters(cm);
      }, true);
      option("keyMap", "default", function(cm, val, old) {
        var next = getKeyMap(val);
        var prev = old != Init && getKeyMap(old);
        if (prev && prev.detach) {
          prev.detach(cm, next);
        }
        if (next.attach) {
          next.attach(cm, prev || null);
        }
      });
      option("extraKeys", null);
      option("configureMouse", null);
      option("lineWrapping", false, wrappingChanged, true);
      option("gutters", [], function(cm, val) {
        cm.display.gutterSpecs = getGutters(val, cm.options.lineNumbers);
        updateGutters(cm);
      }, true);
      option("fixedGutter", true, function(cm, val) {
        cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + "px" : "0";
        cm.refresh();
      }, true);
      option("coverGutterNextToScrollbar", false, function(cm) {
        return updateScrollbars(cm);
      }, true);
      option("scrollbarStyle", "native", function(cm) {
        initScrollbars(cm);
        updateScrollbars(cm);
        cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);
        cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);
      }, true);
      option("lineNumbers", false, function(cm, val) {
        cm.display.gutterSpecs = getGutters(cm.options.gutters, val);
        updateGutters(cm);
      }, true);
      option("firstLineNumber", 1, updateGutters, true);
      option("lineNumberFormatter", function(integer) {
        return integer;
      }, updateGutters, true);
      option("showCursorWhenSelecting", false, updateSelection, true);
      option("resetSelectionOnContextMenu", true);
      option("lineWiseCopyCut", true);
      option("pasteLinesPerSelection", true);
      option("selectionsMayTouch", false);
      option("readOnly", false, function(cm, val) {
        if (val == "nocursor") {
          onBlur(cm);
          cm.display.input.blur();
        }
        cm.display.input.readOnlyChanged(val);
      });
      option("screenReaderLabel", null, function(cm, val) {
        val = val === "" ? null : val;
        cm.display.input.screenReaderLabelChanged(val);
      });
      option("disableInput", false, function(cm, val) {
        if (!val) {
          cm.display.input.reset();
        }
      }, true);
      option("dragDrop", true, dragDropChanged);
      option("allowDropFileTypes", null);
      option("cursorBlinkRate", 530);
      option("cursorScrollMargin", 0);
      option("cursorHeight", 1, updateSelection, true);
      option("singleCursorHeightPerLine", true, updateSelection, true);
      option("workTime", 100);
      option("workDelay", 100);
      option("flattenSpans", true, resetModeState, true);
      option("addModeClass", false, resetModeState, true);
      option("pollInterval", 100);
      option("undoDepth", 200, function(cm, val) {
        return cm.doc.history.undoDepth = val;
      });
      option("historyEventDelay", 1250);
      option("viewportMargin", 10, function(cm) {
        return cm.refresh();
      }, true);
      option("maxHighlightLength", 1e4, resetModeState, true);
      option("moveInputWithCursor", true, function(cm, val) {
        if (!val) {
          cm.display.input.resetPosition();
        }
      });
      option("tabindex", null, function(cm, val) {
        return cm.display.input.getField().tabIndex = val || "";
      });
      option("autofocus", null);
      option("direction", "ltr", function(cm, val) {
        return cm.doc.setDirection(val);
      }, true);
      option("phrases", null);
    }
    function dragDropChanged(cm, value, old) {
      var wasOn = old && old != Init;
      if (!value != !wasOn) {
        var funcs = cm.display.dragFunctions;
        var toggle = value ? on : off;
        toggle(cm.display.scroller, "dragstart", funcs.start);
        toggle(cm.display.scroller, "dragenter", funcs.enter);
        toggle(cm.display.scroller, "dragover", funcs.over);
        toggle(cm.display.scroller, "dragleave", funcs.leave);
        toggle(cm.display.scroller, "drop", funcs.drop);
      }
    }
    function wrappingChanged(cm) {
      if (cm.options.lineWrapping) {
        addClass(cm.display.wrapper, "CodeMirror-wrap");
        cm.display.sizer.style.minWidth = "";
        cm.display.sizerWidth = null;
      } else {
        rmClass(cm.display.wrapper, "CodeMirror-wrap");
        findMaxLine(cm);
      }
      estimateLineHeights(cm);
      regChange(cm);
      clearCaches(cm);
      setTimeout(function() {
        return updateScrollbars(cm);
      }, 100);
    }
    function CodeMirror4(place, options) {
      var this$1 = this;
      if (!(this instanceof CodeMirror4)) {
        return new CodeMirror4(place, options);
      }
      this.options = options = options ? copyObj(options) : {};
      copyObj(defaults, options, false);
      var doc = options.value;
      if (typeof doc == "string") {
        doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction);
      } else if (options.mode) {
        doc.modeOption = options.mode;
      }
      this.doc = doc;
      var input = new CodeMirror4.inputStyles[options.inputStyle](this);
      var display = this.display = new Display(place, doc, input, options);
      display.wrapper.CodeMirror = this;
      themeChanged(this);
      if (options.lineWrapping) {
        this.display.wrapper.className += " CodeMirror-wrap";
      }
      initScrollbars(this);
      this.state = {
        keyMaps: [],
        overlays: [],
        modeGen: 0,
        overwrite: false,
        delayingBlurEvent: false,
        focused: false,
        suppressEdits: false,
        pasteIncoming: -1,
        cutIncoming: -1,
        selectingText: false,
        draggingText: false,
        highlight: new Delayed(),
        keySeq: null,
        specialChars: null
      };
      if (options.autofocus && !mobile) {
        display.input.focus();
      }
      if (ie && ie_version < 11) {
        setTimeout(function() {
          return this$1.display.input.reset(true);
        }, 20);
      }
      registerEventHandlers(this);
      ensureGlobalHandlers();
      startOperation(this);
      this.curOp.forceUpdate = true;
      attachDoc(this, doc);
      if (options.autofocus && !mobile || this.hasFocus()) {
        setTimeout(bind(onFocus, this), 20);
      } else {
        onBlur(this);
      }
      for (var opt in optionHandlers) {
        if (optionHandlers.hasOwnProperty(opt)) {
          optionHandlers[opt](this, options[opt], Init);
        }
      }
      maybeUpdateLineNumberWidth(this);
      if (options.finishInit) {
        options.finishInit(this);
      }
      for (var i2 = 0; i2 < initHooks.length; ++i2) {
        initHooks[i2](this);
      }
      endOperation(this);
      if (webkit && options.lineWrapping && getComputedStyle(display.lineDiv).textRendering == "optimizelegibility") {
        display.lineDiv.style.textRendering = "auto";
      }
    }
    CodeMirror4.defaults = defaults;
    CodeMirror4.optionHandlers = optionHandlers;
    function registerEventHandlers(cm) {
      var d = cm.display;
      on(d.scroller, "mousedown", operation(cm, onMouseDown));
      if (ie && ie_version < 11) {
        on(d.scroller, "dblclick", operation(cm, function(e) {
          if (signalDOMEvent(cm, e)) {
            return;
          }
          var pos = posFromMouse(cm, e);
          if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) {
            return;
          }
          e_preventDefault(e);
          var word = cm.findWordAt(pos);
          extendSelection(cm.doc, word.anchor, word.head);
        }));
      } else {
        on(d.scroller, "dblclick", function(e) {
          return signalDOMEvent(cm, e) || e_preventDefault(e);
        });
      }
      on(d.scroller, "contextmenu", function(e) {
        return onContextMenu(cm, e);
      });
      on(d.input.getField(), "contextmenu", function(e) {
        if (!d.scroller.contains(e.target)) {
          onContextMenu(cm, e);
        }
      });
      var touchFinished, prevTouch = {end: 0};
      function finishTouch() {
        if (d.activeTouch) {
          touchFinished = setTimeout(function() {
            return d.activeTouch = null;
          }, 1e3);
          prevTouch = d.activeTouch;
          prevTouch.end = +new Date();
        }
      }
      function isMouseLikeTouchEvent(e) {
        if (e.touches.length != 1) {
          return false;
        }
        var touch = e.touches[0];
        return touch.radiusX <= 1 && touch.radiusY <= 1;
      }
      function farAway(touch, other) {
        if (other.left == null) {
          return true;
        }
        var dx = other.left - touch.left, dy = other.top - touch.top;
        return dx * dx + dy * dy > 20 * 20;
      }
      on(d.scroller, "touchstart", function(e) {
        if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {
          d.input.ensurePolled();
          clearTimeout(touchFinished);
          var now = +new Date();
          d.activeTouch = {
            start: now,
            moved: false,
            prev: now - prevTouch.end <= 300 ? prevTouch : null
          };
          if (e.touches.length == 1) {
            d.activeTouch.left = e.touches[0].pageX;
            d.activeTouch.top = e.touches[0].pageY;
          }
        }
      });
      on(d.scroller, "touchmove", function() {
        if (d.activeTouch) {
          d.activeTouch.moved = true;
        }
      });
      on(d.scroller, "touchend", function(e) {
        var touch = d.activeTouch;
        if (touch && !eventInWidget(d, e) && touch.left != null && !touch.moved && new Date() - touch.start < 300) {
          var pos = cm.coordsChar(d.activeTouch, "page"), range2;
          if (!touch.prev || farAway(touch, touch.prev)) {
            range2 = new Range(pos, pos);
          } else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) {
            range2 = cm.findWordAt(pos);
          } else {
            range2 = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0)));
          }
          cm.setSelection(range2.anchor, range2.head);
          cm.focus();
          e_preventDefault(e);
        }
        finishTouch();
      });
      on(d.scroller, "touchcancel", finishTouch);
      on(d.scroller, "scroll", function() {
        if (d.scroller.clientHeight) {
          updateScrollTop(cm, d.scroller.scrollTop);
          setScrollLeft(cm, d.scroller.scrollLeft, true);
          signal(cm, "scroll", cm);
        }
      });
      on(d.scroller, "mousewheel", function(e) {
        return onScrollWheel(cm, e);
      });
      on(d.scroller, "DOMMouseScroll", function(e) {
        return onScrollWheel(cm, e);
      });
      on(d.wrapper, "scroll", function() {
        return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0;
      });
      d.dragFunctions = {
        enter: function(e) {
          if (!signalDOMEvent(cm, e)) {
            e_stop(e);
          }
        },
        over: function(e) {
          if (!signalDOMEvent(cm, e)) {
            onDragOver(cm, e);
            e_stop(e);
          }
        },
        start: function(e) {
          return onDragStart(cm, e);
        },
        drop: operation(cm, onDrop),
        leave: function(e) {
          if (!signalDOMEvent(cm, e)) {
            clearDragCursor(cm);
          }
        }
      };
      var inp = d.input.getField();
      on(inp, "keyup", function(e) {
        return onKeyUp.call(cm, e);
      });
      on(inp, "keydown", operation(cm, onKeyDown));
      on(inp, "keypress", operation(cm, onKeyPress));
      on(inp, "focus", function(e) {
        return onFocus(cm, e);
      });
      on(inp, "blur", function(e) {
        return onBlur(cm, e);
      });
    }
    var initHooks = [];
    CodeMirror4.defineInitHook = function(f) {
      return initHooks.push(f);
    };
    function indentLine(cm, n, how, aggressive) {
      var doc = cm.doc, state;
      if (how == null) {
        how = "add";
      }
      if (how == "smart") {
        if (!doc.mode.indent) {
          how = "prev";
        } else {
          state = getContextBefore(cm, n).state;
        }
      }
      var tabSize = cm.options.tabSize;
      var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);
      if (line.stateAfter) {
        line.stateAfter = null;
      }
      var curSpaceString = line.text.match(/^\s*/)[0], indentation;
      if (!aggressive && !/\S/.test(line.text)) {
        indentation = 0;
        how = "not";
      } else if (how == "smart") {
        indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);
        if (indentation == Pass || indentation > 150) {
          if (!aggressive) {
            return;
          }
          how = "prev";
        }
      }
      if (how == "prev") {
        if (n > doc.first) {
          indentation = countColumn(getLine(doc, n - 1).text, null, tabSize);
        } else {
          indentation = 0;
        }
      } else if (how == "add") {
        indentation = curSpace + cm.options.indentUnit;
      } else if (how == "subtract") {
        indentation = curSpace - cm.options.indentUnit;
      } else if (typeof how == "number") {
        indentation = curSpace + how;
      }
      indentation = Math.max(0, indentation);
      var indentString = "", pos = 0;
      if (cm.options.indentWithTabs) {
        for (var i2 = Math.floor(indentation / tabSize); i2; --i2) {
          pos += tabSize;
          indentString += "	";
        }
      }
      if (pos < indentation) {
        indentString += spaceStr(indentation - pos);
      }
      if (indentString != curSpaceString) {
        replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), "+input");
        line.stateAfter = null;
        return true;
      } else {
        for (var i$12 = 0; i$12 < doc.sel.ranges.length; i$12++) {
          var range2 = doc.sel.ranges[i$12];
          if (range2.head.line == n && range2.head.ch < curSpaceString.length) {
            var pos$1 = Pos(n, curSpaceString.length);
            replaceOneSelection(doc, i$12, new Range(pos$1, pos$1));
            break;
          }
        }
      }
    }
    var lastCopied = null;
    function setLastCopied(newLastCopied) {
      lastCopied = newLastCopied;
    }
    function applyTextInput(cm, inserted, deleted, sel, origin) {
      var doc = cm.doc;
      cm.display.shift = false;
      if (!sel) {
        sel = doc.sel;
      }
      var recent = +new Date() - 200;
      var paste = origin == "paste" || cm.state.pasteIncoming > recent;
      var textLines = splitLinesAuto(inserted), multiPaste = null;
      if (paste && sel.ranges.length > 1) {
        if (lastCopied && lastCopied.text.join("\n") == inserted) {
          if (sel.ranges.length % lastCopied.text.length == 0) {
            multiPaste = [];
            for (var i2 = 0; i2 < lastCopied.text.length; i2++) {
              multiPaste.push(doc.splitLines(lastCopied.text[i2]));
            }
          }
        } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {
          multiPaste = map(textLines, function(l) {
            return [l];
          });
        }
      }
      var updateInput = cm.curOp.updateInput;
      for (var i$12 = sel.ranges.length - 1; i$12 >= 0; i$12--) {
        var range2 = sel.ranges[i$12];
        var from = range2.from(), to = range2.to();
        if (range2.empty()) {
          if (deleted && deleted > 0) {
            from = Pos(from.line, from.ch - deleted);
          } else if (cm.state.overwrite && !paste) {
            to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length));
          } else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join("\n") == inserted) {
            from = to = Pos(from.line, 0);
          }
        }
        var changeEvent = {
          from,
          to,
          text: multiPaste ? multiPaste[i$12 % multiPaste.length] : textLines,
          origin: origin || (paste ? "paste" : cm.state.cutIncoming > recent ? "cut" : "+input")
        };
        makeChange(cm.doc, changeEvent);
        signalLater(cm, "inputRead", cm, changeEvent);
      }
      if (inserted && !paste) {
        triggerElectric(cm, inserted);
      }
      ensureCursorVisible(cm);
      if (cm.curOp.updateInput < 2) {
        cm.curOp.updateInput = updateInput;
      }
      cm.curOp.typing = true;
      cm.state.pasteIncoming = cm.state.cutIncoming = -1;
    }
    function handlePaste(e, cm) {
      var pasted = e.clipboardData && e.clipboardData.getData("Text");
      if (pasted) {
        e.preventDefault();
        if (!cm.isReadOnly() && !cm.options.disableInput) {
          runInOp(cm, function() {
            return applyTextInput(cm, pasted, 0, null, "paste");
          });
        }
        return true;
      }
    }
    function triggerElectric(cm, inserted) {
      if (!cm.options.electricChars || !cm.options.smartIndent) {
        return;
      }
      var sel = cm.doc.sel;
      for (var i2 = sel.ranges.length - 1; i2 >= 0; i2--) {
        var range2 = sel.ranges[i2];
        if (range2.head.ch > 100 || i2 && sel.ranges[i2 - 1].head.line == range2.head.line) {
          continue;
        }
        var mode = cm.getModeAt(range2.head);
        var indented = false;
        if (mode.electricChars) {
          for (var j = 0; j < mode.electricChars.length; j++) {
            if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {
              indented = indentLine(cm, range2.head.line, "smart");
              break;
            }
          }
        } else if (mode.electricInput) {
          if (mode.electricInput.test(getLine(cm.doc, range2.head.line).text.slice(0, range2.head.ch))) {
            indented = indentLine(cm, range2.head.line, "smart");
          }
        }
        if (indented) {
          signalLater(cm, "electricInput", cm, range2.head.line);
        }
      }
    }
    function copyableRanges(cm) {
      var text = [], ranges = [];
      for (var i2 = 0; i2 < cm.doc.sel.ranges.length; i2++) {
        var line = cm.doc.sel.ranges[i2].head.line;
        var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};
        ranges.push(lineRange);
        text.push(cm.getRange(lineRange.anchor, lineRange.head));
      }
      return {text, ranges};
    }
    function disableBrowserMagic(field, spellcheck, autocorrect, autocapitalize) {
      field.setAttribute("autocorrect", autocorrect ? "" : "off");
      field.setAttribute("autocapitalize", autocapitalize ? "" : "off");
      field.setAttribute("spellcheck", !!spellcheck);
    }
    function hiddenTextarea() {
      var te = elt("textarea", null, null, "position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none");
      var div = elt("div", [te], null, "overflow: hidden; position: relative; width: 3px; height: 0px;");
      if (webkit) {
        te.style.width = "1000px";
      } else {
        te.setAttribute("wrap", "off");
      }
      if (ios) {
        te.style.border = "1px solid black";
      }
      disableBrowserMagic(te);
      return div;
    }
    function addEditorMethods(CodeMirror5) {
      var optionHandlers2 = CodeMirror5.optionHandlers;
      var helpers = CodeMirror5.helpers = {};
      CodeMirror5.prototype = {
        constructor: CodeMirror5,
        focus: function() {
          window.focus();
          this.display.input.focus();
        },
        setOption: function(option, value) {
          var options = this.options, old = options[option];
          if (options[option] == value && option != "mode") {
            return;
          }
          options[option] = value;
          if (optionHandlers2.hasOwnProperty(option)) {
            operation(this, optionHandlers2[option])(this, value, old);
          }
          signal(this, "optionChange", this, option);
        },
        getOption: function(option) {
          return this.options[option];
        },
        getDoc: function() {
          return this.doc;
        },
        addKeyMap: function(map2, bottom) {
          this.state.keyMaps[bottom ? "push" : "unshift"](getKeyMap(map2));
        },
        removeKeyMap: function(map2) {
          var maps = this.state.keyMaps;
          for (var i2 = 0; i2 < maps.length; ++i2) {
            if (maps[i2] == map2 || maps[i2].name == map2) {
              maps.splice(i2, 1);
              return true;
            }
          }
        },
        addOverlay: methodOp(function(spec, options) {
          var mode = spec.token ? spec : CodeMirror5.getMode(this.options, spec);
          if (mode.startState) {
            throw new Error("Overlays may not be stateful.");
          }
          insertSorted(this.state.overlays, {
            mode,
            modeSpec: spec,
            opaque: options && options.opaque,
            priority: options && options.priority || 0
          }, function(overlay) {
            return overlay.priority;
          });
          this.state.modeGen++;
          regChange(this);
        }),
        removeOverlay: methodOp(function(spec) {
          var overlays = this.state.overlays;
          for (var i2 = 0; i2 < overlays.length; ++i2) {
            var cur = overlays[i2].modeSpec;
            if (cur == spec || typeof spec == "string" && cur.name == spec) {
              overlays.splice(i2, 1);
              this.state.modeGen++;
              regChange(this);
              return;
            }
          }
        }),
        indentLine: methodOp(function(n, dir, aggressive) {
          if (typeof dir != "string" && typeof dir != "number") {
            if (dir == null) {
              dir = this.options.smartIndent ? "smart" : "prev";
            } else {
              dir = dir ? "add" : "subtract";
            }
          }
          if (isLine(this.doc, n)) {
            indentLine(this, n, dir, aggressive);
          }
        }),
        indentSelection: methodOp(function(how) {
          var ranges = this.doc.sel.ranges, end = -1;
          for (var i2 = 0; i2 < ranges.length; i2++) {
            var range2 = ranges[i2];
            if (!range2.empty()) {
              var from = range2.from(), to = range2.to();
              var start = Math.max(end, from.line);
              end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;
              for (var j = start; j < end; ++j) {
                indentLine(this, j, how);
              }
              var newRanges = this.doc.sel.ranges;
              if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i2].from().ch > 0) {
                replaceOneSelection(this.doc, i2, new Range(from, newRanges[i2].to()), sel_dontScroll);
              }
            } else if (range2.head.line > end) {
              indentLine(this, range2.head.line, how, true);
              end = range2.head.line;
              if (i2 == this.doc.sel.primIndex) {
                ensureCursorVisible(this);
              }
            }
          }
        }),
        getTokenAt: function(pos, precise) {
          return takeToken(this, pos, precise);
        },
        getLineTokens: function(line, precise) {
          return takeToken(this, Pos(line), precise, true);
        },
        getTokenTypeAt: function(pos) {
          pos = clipPos(this.doc, pos);
          var styles = getLineStyles(this, getLine(this.doc, pos.line));
          var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;
          var type;
          if (ch == 0) {
            type = styles[2];
          } else {
            for (; ; ) {
              var mid = before + after >> 1;
              if ((mid ? styles[mid * 2 - 1] : 0) >= ch) {
                after = mid;
              } else if (styles[mid * 2 + 1] < ch) {
                before = mid + 1;
              } else {
                type = styles[mid * 2 + 2];
                break;
              }
            }
          }
          var cut = type ? type.indexOf("overlay ") : -1;
          return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1);
        },
        getModeAt: function(pos) {
          var mode = this.doc.mode;
          if (!mode.innerMode) {
            return mode;
          }
          return CodeMirror5.innerMode(mode, this.getTokenAt(pos).state).mode;
        },
        getHelper: function(pos, type) {
          return this.getHelpers(pos, type)[0];
        },
        getHelpers: function(pos, type) {
          var found = [];
          if (!helpers.hasOwnProperty(type)) {
            return found;
          }
          var help = helpers[type], mode = this.getModeAt(pos);
          if (typeof mode[type] == "string") {
            if (help[mode[type]]) {
              found.push(help[mode[type]]);
            }
          } else if (mode[type]) {
            for (var i2 = 0; i2 < mode[type].length; i2++) {
              var val = help[mode[type][i2]];
              if (val) {
                found.push(val);
              }
            }
          } else if (mode.helperType && help[mode.helperType]) {
            found.push(help[mode.helperType]);
          } else if (help[mode.name]) {
            found.push(help[mode.name]);
          }
          for (var i$12 = 0; i$12 < help._global.length; i$12++) {
            var cur = help._global[i$12];
            if (cur.pred(mode, this) && indexOf(found, cur.val) == -1) {
              found.push(cur.val);
            }
          }
          return found;
        },
        getStateAfter: function(line, precise) {
          var doc = this.doc;
          line = clipLine(doc, line == null ? doc.first + doc.size - 1 : line);
          return getContextBefore(this, line + 1, precise).state;
        },
        cursorCoords: function(start, mode) {
          var pos, range2 = this.doc.sel.primary();
          if (start == null) {
            pos = range2.head;
          } else if (typeof start == "object") {
            pos = clipPos(this.doc, start);
          } else {
            pos = start ? range2.from() : range2.to();
          }
          return cursorCoords(this, pos, mode || "page");
        },
        charCoords: function(pos, mode) {
          return charCoords(this, clipPos(this.doc, pos), mode || "page");
        },
        coordsChar: function(coords, mode) {
          coords = fromCoordSystem(this, coords, mode || "page");
          return coordsChar(this, coords.left, coords.top);
        },
        lineAtHeight: function(height, mode) {
          height = fromCoordSystem(this, {top: height, left: 0}, mode || "page").top;
          return lineAtHeight(this.doc, height + this.display.viewOffset);
        },
        heightAtLine: function(line, mode, includeWidgets) {
          var end = false, lineObj;
          if (typeof line == "number") {
            var last = this.doc.first + this.doc.size - 1;
            if (line < this.doc.first) {
              line = this.doc.first;
            } else if (line > last) {
              line = last;
              end = true;
            }
            lineObj = getLine(this.doc, line);
          } else {
            lineObj = line;
          }
          return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || "page", includeWidgets || end).top + (end ? this.doc.height - heightAtLine(lineObj) : 0);
        },
        defaultTextHeight: function() {
          return textHeight(this.display);
        },
        defaultCharWidth: function() {
          return charWidth(this.display);
        },
        getViewport: function() {
          return {from: this.display.viewFrom, to: this.display.viewTo};
        },
        addWidget: function(pos, node, scroll, vert, horiz) {
          var display = this.display;
          pos = cursorCoords(this, clipPos(this.doc, pos));
          var top = pos.bottom, left = pos.left;
          node.style.position = "absolute";
          node.setAttribute("cm-ignore-events", "true");
          this.display.input.setUneditable(node);
          display.sizer.appendChild(node);
          if (vert == "over") {
            top = pos.top;
          } else if (vert == "above" || vert == "near") {
            var vspace = Math.max(display.wrapper.clientHeight, this.doc.height), hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);
            if ((vert == "above" || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight) {
              top = pos.top - node.offsetHeight;
            } else if (pos.bottom + node.offsetHeight <= vspace) {
              top = pos.bottom;
            }
            if (left + node.offsetWidth > hspace) {
              left = hspace - node.offsetWidth;
            }
          }
          node.style.top = top + "px";
          node.style.left = node.style.right = "";
          if (horiz == "right") {
            left = display.sizer.clientWidth - node.offsetWidth;
            node.style.right = "0px";
          } else {
            if (horiz == "left") {
              left = 0;
            } else if (horiz == "middle") {
              left = (display.sizer.clientWidth - node.offsetWidth) / 2;
            }
            node.style.left = left + "px";
          }
          if (scroll) {
            scrollIntoView(this, {left, top, right: left + node.offsetWidth, bottom: top + node.offsetHeight});
          }
        },
        triggerOnKeyDown: methodOp(onKeyDown),
        triggerOnKeyPress: methodOp(onKeyPress),
        triggerOnKeyUp: onKeyUp,
        triggerOnMouseDown: methodOp(onMouseDown),
        execCommand: function(cmd) {
          if (commands.hasOwnProperty(cmd)) {
            return commands[cmd].call(null, this);
          }
        },
        triggerElectric: methodOp(function(text) {
          triggerElectric(this, text);
        }),
        findPosH: function(from, amount, unit, visually) {
          var dir = 1;
          if (amount < 0) {
            dir = -1;
            amount = -amount;
          }
          var cur = clipPos(this.doc, from);
          for (var i2 = 0; i2 < amount; ++i2) {
            cur = findPosH(this.doc, cur, dir, unit, visually);
            if (cur.hitSide) {
              break;
            }
          }
          return cur;
        },
        moveH: methodOp(function(dir, unit) {
          var this$1 = this;
          this.extendSelectionsBy(function(range2) {
            if (this$1.display.shift || this$1.doc.extend || range2.empty()) {
              return findPosH(this$1.doc, range2.head, dir, unit, this$1.options.rtlMoveVisually);
            } else {
              return dir < 0 ? range2.from() : range2.to();
            }
          }, sel_move);
        }),
        deleteH: methodOp(function(dir, unit) {
          var sel = this.doc.sel, doc = this.doc;
          if (sel.somethingSelected()) {
            doc.replaceSelection("", null, "+delete");
          } else {
            deleteNearSelection(this, function(range2) {
              var other = findPosH(doc, range2.head, dir, unit, false);
              return dir < 0 ? {from: other, to: range2.head} : {from: range2.head, to: other};
            });
          }
        }),
        findPosV: function(from, amount, unit, goalColumn) {
          var dir = 1, x = goalColumn;
          if (amount < 0) {
            dir = -1;
            amount = -amount;
          }
          var cur = clipPos(this.doc, from);
          for (var i2 = 0; i2 < amount; ++i2) {
            var coords = cursorCoords(this, cur, "div");
            if (x == null) {
              x = coords.left;
            } else {
              coords.left = x;
            }
            cur = findPosV(this, coords, dir, unit);
            if (cur.hitSide) {
              break;
            }
          }
          return cur;
        },
        moveV: methodOp(function(dir, unit) {
          var this$1 = this;
          var doc = this.doc, goals = [];
          var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();
          doc.extendSelectionsBy(function(range2) {
            if (collapse) {
              return dir < 0 ? range2.from() : range2.to();
            }
            var headPos = cursorCoords(this$1, range2.head, "div");
            if (range2.goalColumn != null) {
              headPos.left = range2.goalColumn;
            }
            goals.push(headPos.left);
            var pos = findPosV(this$1, headPos, dir, unit);
            if (unit == "page" && range2 == doc.sel.primary()) {
              addToScrollTop(this$1, charCoords(this$1, pos, "div").top - headPos.top);
            }
            return pos;
          }, sel_move);
          if (goals.length) {
            for (var i2 = 0; i2 < doc.sel.ranges.length; i2++) {
              doc.sel.ranges[i2].goalColumn = goals[i2];
            }
          }
        }),
        findWordAt: function(pos) {
          var doc = this.doc, line = getLine(doc, pos.line).text;
          var start = pos.ch, end = pos.ch;
          if (line) {
            var helper = this.getHelper(pos, "wordChars");
            if ((pos.sticky == "before" || end == line.length) && start) {
              --start;
            } else {
              ++end;
            }
            var startChar = line.charAt(start);
            var check = isWordChar(startChar, helper) ? function(ch) {
              return isWordChar(ch, helper);
            } : /\s/.test(startChar) ? function(ch) {
              return /\s/.test(ch);
            } : function(ch) {
              return !/\s/.test(ch) && !isWordChar(ch);
            };
            while (start > 0 && check(line.charAt(start - 1))) {
              --start;
            }
            while (end < line.length && check(line.charAt(end))) {
              ++end;
            }
          }
          return new Range(Pos(pos.line, start), Pos(pos.line, end));
        },
        toggleOverwrite: function(value) {
          if (value != null && value == this.state.overwrite) {
            return;
          }
          if (this.state.overwrite = !this.state.overwrite) {
            addClass(this.display.cursorDiv, "CodeMirror-overwrite");
          } else {
            rmClass(this.display.cursorDiv, "CodeMirror-overwrite");
          }
          signal(this, "overwriteToggle", this, this.state.overwrite);
        },
        hasFocus: function() {
          return this.display.input.getField() == activeElt();
        },
        isReadOnly: function() {
          return !!(this.options.readOnly || this.doc.cantEdit);
        },
        scrollTo: methodOp(function(x, y) {
          scrollToCoords(this, x, y);
        }),
        getScrollInfo: function() {
          var scroller = this.display.scroller;
          return {
            left: scroller.scrollLeft,
            top: scroller.scrollTop,
            height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,
            width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,
            clientHeight: displayHeight(this),
            clientWidth: displayWidth(this)
          };
        },
        scrollIntoView: methodOp(function(range2, margin) {
          if (range2 == null) {
            range2 = {from: this.doc.sel.primary().head, to: null};
            if (margin == null) {
              margin = this.options.cursorScrollMargin;
            }
          } else if (typeof range2 == "number") {
            range2 = {from: Pos(range2, 0), to: null};
          } else if (range2.from == null) {
            range2 = {from: range2, to: null};
          }
          if (!range2.to) {
            range2.to = range2.from;
          }
          range2.margin = margin || 0;
          if (range2.from.line != null) {
            scrollToRange(this, range2);
          } else {
            scrollToCoordsRange(this, range2.from, range2.to, range2.margin);
          }
        }),
        setSize: methodOp(function(width, height) {
          var this$1 = this;
          var interpret = function(val) {
            return typeof val == "number" || /^\d+$/.test(String(val)) ? val + "px" : val;
          };
          if (width != null) {
            this.display.wrapper.style.width = interpret(width);
          }
          if (height != null) {
            this.display.wrapper.style.height = interpret(height);
          }
          if (this.options.lineWrapping) {
            clearLineMeasurementCache(this);
          }
          var lineNo2 = this.display.viewFrom;
          this.doc.iter(lineNo2, this.display.viewTo, function(line) {
            if (line.widgets) {
              for (var i2 = 0; i2 < line.widgets.length; i2++) {
                if (line.widgets[i2].noHScroll) {
                  regLineChange(this$1, lineNo2, "widget");
                  break;
                }
              }
            }
            ++lineNo2;
          });
          this.curOp.forceUpdate = true;
          signal(this, "refresh", this);
        }),
        operation: function(f) {
          return runInOp(this, f);
        },
        startOperation: function() {
          return startOperation(this);
        },
        endOperation: function() {
          return endOperation(this);
        },
        refresh: methodOp(function() {
          var oldHeight = this.display.cachedTextHeight;
          regChange(this);
          this.curOp.forceUpdate = true;
          clearCaches(this);
          scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);
          updateGutterSpace(this.display);
          if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > 0.5 || this.options.lineWrapping) {
            estimateLineHeights(this);
          }
          signal(this, "refresh", this);
        }),
        swapDoc: methodOp(function(doc) {
          var old = this.doc;
          old.cm = null;
          if (this.state.selectingText) {
            this.state.selectingText();
          }
          attachDoc(this, doc);
          clearCaches(this);
          this.display.input.reset();
          scrollToCoords(this, doc.scrollLeft, doc.scrollTop);
          this.curOp.forceScroll = true;
          signalLater(this, "swapDoc", this, old);
          return old;
        }),
        phrase: function(phraseText) {
          var phrases = this.options.phrases;
          return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText;
        },
        getInputField: function() {
          return this.display.input.getField();
        },
        getWrapperElement: function() {
          return this.display.wrapper;
        },
        getScrollerElement: function() {
          return this.display.scroller;
        },
        getGutterElement: function() {
          return this.display.gutters;
        }
      };
      eventMixin(CodeMirror5);
      CodeMirror5.registerHelper = function(type, name, value) {
        if (!helpers.hasOwnProperty(type)) {
          helpers[type] = CodeMirror5[type] = {_global: []};
        }
        helpers[type][name] = value;
      };
      CodeMirror5.registerGlobalHelper = function(type, name, predicate, value) {
        CodeMirror5.registerHelper(type, name, value);
        helpers[type]._global.push({pred: predicate, val: value});
      };
    }
    function findPosH(doc, pos, dir, unit, visually) {
      var oldPos = pos;
      var origDir = dir;
      var lineObj = getLine(doc, pos.line);
      var lineDir = visually && doc.direction == "rtl" ? -dir : dir;
      function findNextLine() {
        var l = pos.line + lineDir;
        if (l < doc.first || l >= doc.first + doc.size) {
          return false;
        }
        pos = new Pos(l, pos.ch, pos.sticky);
        return lineObj = getLine(doc, l);
      }
      function moveOnce(boundToLine) {
        var next;
        if (visually) {
          next = moveVisually(doc.cm, lineObj, pos, dir);
        } else {
          next = moveLogically(lineObj, pos, dir);
        }
        if (next == null) {
          if (!boundToLine && findNextLine()) {
            pos = endOfLine(visually, doc.cm, lineObj, pos.line, lineDir);
          } else {
            return false;
          }
        } else {
          pos = next;
        }
        return true;
      }
      if (unit == "char") {
        moveOnce();
      } else if (unit == "column") {
        moveOnce(true);
      } else if (unit == "word" || unit == "group") {
        var sawType = null, group = unit == "group";
        var helper = doc.cm && doc.cm.getHelper(pos, "wordChars");
        for (var first = true; ; first = false) {
          if (dir < 0 && !moveOnce(!first)) {
            break;
          }
          var cur = lineObj.text.charAt(pos.ch) || "\n";
          var type = isWordChar(cur, helper) ? "w" : group && cur == "\n" ? "n" : !group || /\s/.test(cur) ? null : "p";
          if (group && !first && !type) {
            type = "s";
          }
          if (sawType && sawType != type) {
            if (dir < 0) {
              dir = 1;
              moveOnce();
              pos.sticky = "after";
            }
            break;
          }
          if (type) {
            sawType = type;
          }
          if (dir > 0 && !moveOnce(!first)) {
            break;
          }
        }
      }
      var result = skipAtomic(doc, pos, oldPos, origDir, true);
      if (equalCursorPos(oldPos, result)) {
        result.hitSide = true;
      }
      return result;
    }
    function findPosV(cm, pos, dir, unit) {
      var doc = cm.doc, x = pos.left, y;
      if (unit == "page") {
        var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);
        var moveAmount = Math.max(pageSize - 0.5 * textHeight(cm.display), 3);
        y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;
      } else if (unit == "line") {
        y = dir > 0 ? pos.bottom + 3 : pos.top - 3;
      }
      var target;
      for (; ; ) {
        target = coordsChar(cm, x, y);
        if (!target.outside) {
          break;
        }
        if (dir < 0 ? y <= 0 : y >= doc.height) {
          target.hitSide = true;
          break;
        }
        y += dir * 5;
      }
      return target;
    }
    var ContentEditableInput = function(cm) {
      this.cm = cm;
      this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;
      this.polling = new Delayed();
      this.composing = null;
      this.gracePeriod = false;
      this.readDOMTimeout = null;
    };
    ContentEditableInput.prototype.init = function(display) {
      var this$1 = this;
      var input = this, cm = input.cm;
      var div = input.div = display.lineDiv;
      disableBrowserMagic(div, cm.options.spellcheck, cm.options.autocorrect, cm.options.autocapitalize);
      function belongsToInput(e) {
        for (var t = e.target; t; t = t.parentNode) {
          if (t == div) {
            return true;
          }
          if (/\bCodeMirror-(?:line)?widget\b/.test(t.className)) {
            break;
          }
        }
        return false;
      }
      on(div, "paste", function(e) {
        if (!belongsToInput(e) || signalDOMEvent(cm, e) || handlePaste(e, cm)) {
          return;
        }
        if (ie_version <= 11) {
          setTimeout(operation(cm, function() {
            return this$1.updateFromDOM();
          }), 20);
        }
      });
      on(div, "compositionstart", function(e) {
        this$1.composing = {data: e.data, done: false};
      });
      on(div, "compositionupdate", function(e) {
        if (!this$1.composing) {
          this$1.composing = {data: e.data, done: false};
        }
      });
      on(div, "compositionend", function(e) {
        if (this$1.composing) {
          if (e.data != this$1.composing.data) {
            this$1.readFromDOMSoon();
          }
          this$1.composing.done = true;
        }
      });
      on(div, "touchstart", function() {
        return input.forceCompositionEnd();
      });
      on(div, "input", function() {
        if (!this$1.composing) {
          this$1.readFromDOMSoon();
        }
      });
      function onCopyCut(e) {
        if (!belongsToInput(e) || signalDOMEvent(cm, e)) {
          return;
        }
        if (cm.somethingSelected()) {
          setLastCopied({lineWise: false, text: cm.getSelections()});
          if (e.type == "cut") {
            cm.replaceSelection("", null, "cut");
          }
        } else if (!cm.options.lineWiseCopyCut) {
          return;
        } else {
          var ranges = copyableRanges(cm);
          setLastCopied({lineWise: true, text: ranges.text});
          if (e.type == "cut") {
            cm.operation(function() {
              cm.setSelections(ranges.ranges, 0, sel_dontScroll);
              cm.replaceSelection("", null, "cut");
            });
          }
        }
        if (e.clipboardData) {
          e.clipboardData.clearData();
          var content = lastCopied.text.join("\n");
          e.clipboardData.setData("Text", content);
          if (e.clipboardData.getData("Text") == content) {
            e.preventDefault();
            return;
          }
        }
        var kludge = hiddenTextarea(), te = kludge.firstChild;
        cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);
        te.value = lastCopied.text.join("\n");
        var hadFocus = document.activeElement;
        selectInput(te);
        setTimeout(function() {
          cm.display.lineSpace.removeChild(kludge);
          hadFocus.focus();
          if (hadFocus == div) {
            input.showPrimarySelection();
          }
        }, 50);
      }
      on(div, "copy", onCopyCut);
      on(div, "cut", onCopyCut);
    };
    ContentEditableInput.prototype.screenReaderLabelChanged = function(label) {
      if (label) {
        this.div.setAttribute("aria-label", label);
      } else {
        this.div.removeAttribute("aria-label");
      }
    };
    ContentEditableInput.prototype.prepareSelection = function() {
      var result = prepareSelection(this.cm, false);
      result.focus = document.activeElement == this.div;
      return result;
    };
    ContentEditableInput.prototype.showSelection = function(info, takeFocus) {
      if (!info || !this.cm.display.view.length) {
        return;
      }
      if (info.focus || takeFocus) {
        this.showPrimarySelection();
      }
      this.showMultipleSelections(info);
    };
    ContentEditableInput.prototype.getSelection = function() {
      return this.cm.display.wrapper.ownerDocument.getSelection();
    };
    ContentEditableInput.prototype.showPrimarySelection = function() {
      var sel = this.getSelection(), cm = this.cm, prim = cm.doc.sel.primary();
      var from = prim.from(), to = prim.to();
      if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {
        sel.removeAllRanges();
        return;
      }
      var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);
      var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);
      if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad && cmp(minPos(curAnchor, curFocus), from) == 0 && cmp(maxPos(curAnchor, curFocus), to) == 0) {
        return;
      }
      var view = cm.display.view;
      var start = from.line >= cm.display.viewFrom && posToDOM(cm, from) || {node: view[0].measure.map[2], offset: 0};
      var end = to.line < cm.display.viewTo && posToDOM(cm, to);
      if (!end) {
        var measure = view[view.length - 1].measure;
        var map2 = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;
        end = {node: map2[map2.length - 1], offset: map2[map2.length - 2] - map2[map2.length - 3]};
      }
      if (!start || !end) {
        sel.removeAllRanges();
        return;
      }
      var old = sel.rangeCount && sel.getRangeAt(0), rng;
      try {
        rng = range(start.node, start.offset, end.offset, end.node);
      } catch (e) {
      }
      if (rng) {
        if (!gecko && cm.state.focused) {
          sel.collapse(start.node, start.offset);
          if (!rng.collapsed) {
            sel.removeAllRanges();
            sel.addRange(rng);
          }
        } else {
          sel.removeAllRanges();
          sel.addRange(rng);
        }
        if (old && sel.anchorNode == null) {
          sel.addRange(old);
        } else if (gecko) {
          this.startGracePeriod();
        }
      }
      this.rememberSelection();
    };
    ContentEditableInput.prototype.startGracePeriod = function() {
      var this$1 = this;
      clearTimeout(this.gracePeriod);
      this.gracePeriod = setTimeout(function() {
        this$1.gracePeriod = false;
        if (this$1.selectionChanged()) {
          this$1.cm.operation(function() {
            return this$1.cm.curOp.selectionChanged = true;
          });
        }
      }, 20);
    };
    ContentEditableInput.prototype.showMultipleSelections = function(info) {
      removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);
      removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);
    };
    ContentEditableInput.prototype.rememberSelection = function() {
      var sel = this.getSelection();
      this.lastAnchorNode = sel.anchorNode;
      this.lastAnchorOffset = sel.anchorOffset;
      this.lastFocusNode = sel.focusNode;
      this.lastFocusOffset = sel.focusOffset;
    };
    ContentEditableInput.prototype.selectionInEditor = function() {
      var sel = this.getSelection();
      if (!sel.rangeCount) {
        return false;
      }
      var node = sel.getRangeAt(0).commonAncestorContainer;
      return contains(this.div, node);
    };
    ContentEditableInput.prototype.focus = function() {
      if (this.cm.options.readOnly != "nocursor") {
        if (!this.selectionInEditor() || document.activeElement != this.div) {
          this.showSelection(this.prepareSelection(), true);
        }
        this.div.focus();
      }
    };
    ContentEditableInput.prototype.blur = function() {
      this.div.blur();
    };
    ContentEditableInput.prototype.getField = function() {
      return this.div;
    };
    ContentEditableInput.prototype.supportsTouch = function() {
      return true;
    };
    ContentEditableInput.prototype.receivedFocus = function() {
      var input = this;
      if (this.selectionInEditor()) {
        this.pollSelection();
      } else {
        runInOp(this.cm, function() {
          return input.cm.curOp.selectionChanged = true;
        });
      }
      function poll() {
        if (input.cm.state.focused) {
          input.pollSelection();
          input.polling.set(input.cm.options.pollInterval, poll);
        }
      }
      this.polling.set(this.cm.options.pollInterval, poll);
    };
    ContentEditableInput.prototype.selectionChanged = function() {
      var sel = this.getSelection();
      return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset || sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset;
    };
    ContentEditableInput.prototype.pollSelection = function() {
      if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) {
        return;
      }
      var sel = this.getSelection(), cm = this.cm;
      if (android && chrome && this.cm.display.gutterSpecs.length && isInGutter(sel.anchorNode)) {
        this.cm.triggerOnKeyDown({type: "keydown", keyCode: 8, preventDefault: Math.abs});
        this.blur();
        this.focus();
        return;
      }
      if (this.composing) {
        return;
      }
      this.rememberSelection();
      var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);
      var head = domToPos(cm, sel.focusNode, sel.focusOffset);
      if (anchor && head) {
        runInOp(cm, function() {
          setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);
          if (anchor.bad || head.bad) {
            cm.curOp.selectionChanged = true;
          }
        });
      }
    };
    ContentEditableInput.prototype.pollContent = function() {
      if (this.readDOMTimeout != null) {
        clearTimeout(this.readDOMTimeout);
        this.readDOMTimeout = null;
      }
      var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();
      var from = sel.from(), to = sel.to();
      if (from.ch == 0 && from.line > cm.firstLine()) {
        from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length);
      }
      if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine()) {
        to = Pos(to.line + 1, 0);
      }
      if (from.line < display.viewFrom || to.line > display.viewTo - 1) {
        return false;
      }
      var fromIndex, fromLine, fromNode;
      if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {
        fromLine = lineNo(display.view[0].line);
        fromNode = display.view[0].node;
      } else {
        fromLine = lineNo(display.view[fromIndex].line);
        fromNode = display.view[fromIndex - 1].node.nextSibling;
      }
      var toIndex = findViewIndex(cm, to.line);
      var toLine, toNode;
      if (toIndex == display.view.length - 1) {
        toLine = display.viewTo - 1;
        toNode = display.lineDiv.lastChild;
      } else {
        toLine = lineNo(display.view[toIndex + 1].line) - 1;
        toNode = display.view[toIndex + 1].node.previousSibling;
      }
      if (!fromNode) {
        return false;
      }
      var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));
      var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));
      while (newText.length > 1 && oldText.length > 1) {
        if (lst(newText) == lst(oldText)) {
          newText.pop();
          oldText.pop();
          toLine--;
        } else if (newText[0] == oldText[0]) {
          newText.shift();
          oldText.shift();
          fromLine++;
        } else {
          break;
        }
      }
      var cutFront = 0, cutEnd = 0;
      var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);
      while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront)) {
        ++cutFront;
      }
      var newBot = lst(newText), oldBot = lst(oldText);
      var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0), oldBot.length - (oldText.length == 1 ? cutFront : 0));
      while (cutEnd < maxCutEnd && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {
        ++cutEnd;
      }
      if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {
        while (cutFront && cutFront > from.ch && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {
          cutFront--;
          cutEnd++;
        }
      }
      newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\u200b+/, "");
      newText[0] = newText[0].slice(cutFront).replace(/\u200b+$/, "");
      var chFrom = Pos(fromLine, cutFront);
      var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);
      if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {
        replaceRange(cm.doc, newText, chFrom, chTo, "+input");
        return true;
      }
    };
    ContentEditableInput.prototype.ensurePolled = function() {
      this.forceCompositionEnd();
    };
    ContentEditableInput.prototype.reset = function() {
      this.forceCompositionEnd();
    };
    ContentEditableInput.prototype.forceCompositionEnd = function() {
      if (!this.composing) {
        return;
      }
      clearTimeout(this.readDOMTimeout);
      this.composing = null;
      this.updateFromDOM();
      this.div.blur();
      this.div.focus();
    };
    ContentEditableInput.prototype.readFromDOMSoon = function() {
      var this$1 = this;
      if (this.readDOMTimeout != null) {
        return;
      }
      this.readDOMTimeout = setTimeout(function() {
        this$1.readDOMTimeout = null;
        if (this$1.composing) {
          if (this$1.composing.done) {
            this$1.composing = null;
          } else {
            return;
          }
        }
        this$1.updateFromDOM();
      }, 80);
    };
    ContentEditableInput.prototype.updateFromDOM = function() {
      var this$1 = this;
      if (this.cm.isReadOnly() || !this.pollContent()) {
        runInOp(this.cm, function() {
          return regChange(this$1.cm);
        });
      }
    };
    ContentEditableInput.prototype.setUneditable = function(node) {
      node.contentEditable = "false";
    };
    ContentEditableInput.prototype.onKeyPress = function(e) {
      if (e.charCode == 0 || this.composing) {
        return;
      }
      e.preventDefault();
      if (!this.cm.isReadOnly()) {
        operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0);
      }
    };
    ContentEditableInput.prototype.readOnlyChanged = function(val) {
      this.div.contentEditable = String(val != "nocursor");
    };
    ContentEditableInput.prototype.onContextMenu = function() {
    };
    ContentEditableInput.prototype.resetPosition = function() {
    };
    ContentEditableInput.prototype.needsContentAttribute = true;
    function posToDOM(cm, pos) {
      var view = findViewForLine(cm, pos.line);
      if (!view || view.hidden) {
        return null;
      }
      var line = getLine(cm.doc, pos.line);
      var info = mapFromLineView(view, line, pos.line);
      var order = getOrder(line, cm.doc.direction), side = "left";
      if (order) {
        var partPos = getBidiPartAt(order, pos.ch);
        side = partPos % 2 ? "right" : "left";
      }
      var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);
      result.offset = result.collapse == "right" ? result.end : result.start;
      return result;
    }
    function isInGutter(node) {
      for (var scan = node; scan; scan = scan.parentNode) {
        if (/CodeMirror-gutter-wrapper/.test(scan.className)) {
          return true;
        }
      }
      return false;
    }
    function badPos(pos, bad) {
      if (bad) {
        pos.bad = true;
      }
      return pos;
    }
    function domTextBetween(cm, from, to, fromLine, toLine) {
      var text = "", closing = false, lineSep = cm.doc.lineSeparator(), extraLinebreak = false;
      function recognizeMarker(id) {
        return function(marker) {
          return marker.id == id;
        };
      }
      function close() {
        if (closing) {
          text += lineSep;
          if (extraLinebreak) {
            text += lineSep;
          }
          closing = extraLinebreak = false;
        }
      }
      function addText(str) {
        if (str) {
          close();
          text += str;
        }
      }
      function walk(node) {
        if (node.nodeType == 1) {
          var cmText = node.getAttribute("cm-text");
          if (cmText) {
            addText(cmText);
            return;
          }
          var markerID = node.getAttribute("cm-marker"), range2;
          if (markerID) {
            var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));
            if (found.length && (range2 = found[0].find(0))) {
              addText(getBetween(cm.doc, range2.from, range2.to).join(lineSep));
            }
            return;
          }
          if (node.getAttribute("contenteditable") == "false") {
            return;
          }
          var isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName);
          if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) {
            return;
          }
          if (isBlock) {
            close();
          }
          for (var i2 = 0; i2 < node.childNodes.length; i2++) {
            walk(node.childNodes[i2]);
          }
          if (/^(pre|p)$/i.test(node.nodeName)) {
            extraLinebreak = true;
          }
          if (isBlock) {
            closing = true;
          }
        } else if (node.nodeType == 3) {
          addText(node.nodeValue.replace(/\u200b/g, "").replace(/\u00a0/g, " "));
        }
      }
      for (; ; ) {
        walk(from);
        if (from == to) {
          break;
        }
        from = from.nextSibling;
        extraLinebreak = false;
      }
      return text;
    }
    function domToPos(cm, node, offset) {
      var lineNode;
      if (node == cm.display.lineDiv) {
        lineNode = cm.display.lineDiv.childNodes[offset];
        if (!lineNode) {
          return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true);
        }
        node = null;
        offset = 0;
      } else {
        for (lineNode = node; ; lineNode = lineNode.parentNode) {
          if (!lineNode || lineNode == cm.display.lineDiv) {
            return null;
          }
          if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) {
            break;
          }
        }
      }
      for (var i2 = 0; i2 < cm.display.view.length; i2++) {
        var lineView = cm.display.view[i2];
        if (lineView.node == lineNode) {
          return locateNodeInLineView(lineView, node, offset);
        }
      }
    }
    function locateNodeInLineView(lineView, node, offset) {
      var wrapper = lineView.text.firstChild, bad = false;
      if (!node || !contains(wrapper, node)) {
        return badPos(Pos(lineNo(lineView.line), 0), true);
      }
      if (node == wrapper) {
        bad = true;
        node = wrapper.childNodes[offset];
        offset = 0;
        if (!node) {
          var line = lineView.rest ? lst(lineView.rest) : lineView.line;
          return badPos(Pos(lineNo(line), line.text.length), bad);
        }
      }
      var textNode = node.nodeType == 3 ? node : null, topNode = node;
      if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {
        textNode = node.firstChild;
        if (offset) {
          offset = textNode.nodeValue.length;
        }
      }
      while (topNode.parentNode != wrapper) {
        topNode = topNode.parentNode;
      }
      var measure = lineView.measure, maps = measure.maps;
      function find(textNode2, topNode2, offset2) {
        for (var i2 = -1; i2 < (maps ? maps.length : 0); i2++) {
          var map2 = i2 < 0 ? measure.map : maps[i2];
          for (var j = 0; j < map2.length; j += 3) {
            var curNode = map2[j + 2];
            if (curNode == textNode2 || curNode == topNode2) {
              var line2 = lineNo(i2 < 0 ? lineView.line : lineView.rest[i2]);
              var ch = map2[j] + offset2;
              if (offset2 < 0 || curNode != textNode2) {
                ch = map2[j + (offset2 ? 1 : 0)];
              }
              return Pos(line2, ch);
            }
          }
        }
      }
      var found = find(textNode, topNode, offset);
      if (found) {
        return badPos(found, bad);
      }
      for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {
        found = find(after, after.firstChild, 0);
        if (found) {
          return badPos(Pos(found.line, found.ch - dist), bad);
        } else {
          dist += after.textContent.length;
        }
      }
      for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {
        found = find(before, before.firstChild, -1);
        if (found) {
          return badPos(Pos(found.line, found.ch + dist$1), bad);
        } else {
          dist$1 += before.textContent.length;
        }
      }
    }
    var TextareaInput = function(cm) {
      this.cm = cm;
      this.prevInput = "";
      this.pollingFast = false;
      this.polling = new Delayed();
      this.hasSelection = false;
      this.composing = null;
    };
    TextareaInput.prototype.init = function(display) {
      var this$1 = this;
      var input = this, cm = this.cm;
      this.createField(display);
      var te = this.textarea;
      display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild);
      if (ios) {
        te.style.width = "0px";
      }
      on(te, "input", function() {
        if (ie && ie_version >= 9 && this$1.hasSelection) {
          this$1.hasSelection = null;
        }
        input.poll();
      });
      on(te, "paste", function(e) {
        if (signalDOMEvent(cm, e) || handlePaste(e, cm)) {
          return;
        }
        cm.state.pasteIncoming = +new Date();
        input.fastPoll();
      });
      function prepareCopyCut(e) {
        if (signalDOMEvent(cm, e)) {
          return;
        }
        if (cm.somethingSelected()) {
          setLastCopied({lineWise: false, text: cm.getSelections()});
        } else if (!cm.options.lineWiseCopyCut) {
          return;
        } else {
          var ranges = copyableRanges(cm);
          setLastCopied({lineWise: true, text: ranges.text});
          if (e.type == "cut") {
            cm.setSelections(ranges.ranges, null, sel_dontScroll);
          } else {
            input.prevInput = "";
            te.value = ranges.text.join("\n");
            selectInput(te);
          }
        }
        if (e.type == "cut") {
          cm.state.cutIncoming = +new Date();
        }
      }
      on(te, "cut", prepareCopyCut);
      on(te, "copy", prepareCopyCut);
      on(display.scroller, "paste", function(e) {
        if (eventInWidget(display, e) || signalDOMEvent(cm, e)) {
          return;
        }
        if (!te.dispatchEvent) {
          cm.state.pasteIncoming = +new Date();
          input.focus();
          return;
        }
        var event = new Event("paste");
        event.clipboardData = e.clipboardData;
        te.dispatchEvent(event);
      });
      on(display.lineSpace, "selectstart", function(e) {
        if (!eventInWidget(display, e)) {
          e_preventDefault(e);
        }
      });
      on(te, "compositionstart", function() {
        var start = cm.getCursor("from");
        if (input.composing) {
          input.composing.range.clear();
        }
        input.composing = {
          start,
          range: cm.markText(start, cm.getCursor("to"), {className: "CodeMirror-composing"})
        };
      });
      on(te, "compositionend", function() {
        if (input.composing) {
          input.poll();
          input.composing.range.clear();
          input.composing = null;
        }
      });
    };
    TextareaInput.prototype.createField = function(_display) {
      this.wrapper = hiddenTextarea();
      this.textarea = this.wrapper.firstChild;
    };
    TextareaInput.prototype.screenReaderLabelChanged = function(label) {
      if (label) {
        this.textarea.setAttribute("aria-label", label);
      } else {
        this.textarea.removeAttribute("aria-label");
      }
    };
    TextareaInput.prototype.prepareSelection = function() {
      var cm = this.cm, display = cm.display, doc = cm.doc;
      var result = prepareSelection(cm);
      if (cm.options.moveInputWithCursor) {
        var headPos = cursorCoords(cm, doc.sel.primary().head, "div");
        var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();
        result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10, headPos.top + lineOff.top - wrapOff.top));
        result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10, headPos.left + lineOff.left - wrapOff.left));
      }
      return result;
    };
    TextareaInput.prototype.showSelection = function(drawn) {
      var cm = this.cm, display = cm.display;
      removeChildrenAndAdd(display.cursorDiv, drawn.cursors);
      removeChildrenAndAdd(display.selectionDiv, drawn.selection);
      if (drawn.teTop != null) {
        this.wrapper.style.top = drawn.teTop + "px";
        this.wrapper.style.left = drawn.teLeft + "px";
      }
    };
    TextareaInput.prototype.reset = function(typing) {
      if (this.contextMenuPending || this.composing) {
        return;
      }
      var cm = this.cm;
      if (cm.somethingSelected()) {
        this.prevInput = "";
        var content = cm.getSelection();
        this.textarea.value = content;
        if (cm.state.focused) {
          selectInput(this.textarea);
        }
        if (ie && ie_version >= 9) {
          this.hasSelection = content;
        }
      } else if (!typing) {
        this.prevInput = this.textarea.value = "";
        if (ie && ie_version >= 9) {
          this.hasSelection = null;
        }
      }
    };
    TextareaInput.prototype.getField = function() {
      return this.textarea;
    };
    TextareaInput.prototype.supportsTouch = function() {
      return false;
    };
    TextareaInput.prototype.focus = function() {
      if (this.cm.options.readOnly != "nocursor" && (!mobile || activeElt() != this.textarea)) {
        try {
          this.textarea.focus();
        } catch (e) {
        }
      }
    };
    TextareaInput.prototype.blur = function() {
      this.textarea.blur();
    };
    TextareaInput.prototype.resetPosition = function() {
      this.wrapper.style.top = this.wrapper.style.left = 0;
    };
    TextareaInput.prototype.receivedFocus = function() {
      this.slowPoll();
    };
    TextareaInput.prototype.slowPoll = function() {
      var this$1 = this;
      if (this.pollingFast) {
        return;
      }
      this.polling.set(this.cm.options.pollInterval, function() {
        this$1.poll();
        if (this$1.cm.state.focused) {
          this$1.slowPoll();
        }
      });
    };
    TextareaInput.prototype.fastPoll = function() {
      var missed = false, input = this;
      input.pollingFast = true;
      function p() {
        var changed = input.poll();
        if (!changed && !missed) {
          missed = true;
          input.polling.set(60, p);
        } else {
          input.pollingFast = false;
          input.slowPoll();
        }
      }
      input.polling.set(20, p);
    };
    TextareaInput.prototype.poll = function() {
      var this$1 = this;
      var cm = this.cm, input = this.textarea, prevInput = this.prevInput;
      if (this.contextMenuPending || !cm.state.focused || hasSelection(input) && !prevInput && !this.composing || cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq) {
        return false;
      }
      var text = input.value;
      if (text == prevInput && !cm.somethingSelected()) {
        return false;
      }
      if (ie && ie_version >= 9 && this.hasSelection === text || mac && /[\uf700-\uf7ff]/.test(text)) {
        cm.display.input.reset();
        return false;
      }
      if (cm.doc.sel == cm.display.selForContextMenu) {
        var first = text.charCodeAt(0);
        if (first == 8203 && !prevInput) {
          prevInput = "\u200B";
        }
        if (first == 8666) {
          this.reset();
          return this.cm.execCommand("undo");
        }
      }
      var same = 0, l = Math.min(prevInput.length, text.length);
      while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) {
        ++same;
      }
      runInOp(cm, function() {
        applyTextInput(cm, text.slice(same), prevInput.length - same, null, this$1.composing ? "*compose" : null);
        if (text.length > 1e3 || text.indexOf("\n") > -1) {
          input.value = this$1.prevInput = "";
        } else {
          this$1.prevInput = text;
        }
        if (this$1.composing) {
          this$1.composing.range.clear();
          this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor("to"), {className: "CodeMirror-composing"});
        }
      });
      return true;
    };
    TextareaInput.prototype.ensurePolled = function() {
      if (this.pollingFast && this.poll()) {
        this.pollingFast = false;
      }
    };
    TextareaInput.prototype.onKeyPress = function() {
      if (ie && ie_version >= 9) {
        this.hasSelection = null;
      }
      this.fastPoll();
    };
    TextareaInput.prototype.onContextMenu = function(e) {
      var input = this, cm = input.cm, display = cm.display, te = input.textarea;
      if (input.contextMenuPending) {
        input.contextMenuPending();
      }
      var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;
      if (!pos || presto) {
        return;
      }
      var reset = cm.options.resetSelectionOnContextMenu;
      if (reset && cm.doc.sel.contains(pos) == -1) {
        operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll);
      }
      var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;
      var wrapperBox = input.wrapper.offsetParent.getBoundingClientRect();
      input.wrapper.style.cssText = "position: static";
      te.style.cssText = "position: absolute; width: 30px; height: 30px;\n      top: " + (e.clientY - wrapperBox.top - 5) + "px; left: " + (e.clientX - wrapperBox.left - 5) + "px;\n      z-index: 1000; background: " + (ie ? "rgba(255, 255, 255, .05)" : "transparent") + ";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";
      var oldScrollY;
      if (webkit) {
        oldScrollY = window.scrollY;
      }
      display.input.focus();
      if (webkit) {
        window.scrollTo(null, oldScrollY);
      }
      display.input.reset();
      if (!cm.somethingSelected()) {
        te.value = input.prevInput = " ";
      }
      input.contextMenuPending = rehide;
      display.selForContextMenu = cm.doc.sel;
      clearTimeout(display.detectingSelectAll);
      function prepareSelectAllHack() {
        if (te.selectionStart != null) {
          var selected = cm.somethingSelected();
          var extval = "\u200B" + (selected ? te.value : "");
          te.value = "\u21DA";
          te.value = extval;
          input.prevInput = selected ? "" : "\u200B";
          te.selectionStart = 1;
          te.selectionEnd = extval.length;
          display.selForContextMenu = cm.doc.sel;
        }
      }
      function rehide() {
        if (input.contextMenuPending != rehide) {
          return;
        }
        input.contextMenuPending = false;
        input.wrapper.style.cssText = oldWrapperCSS;
        te.style.cssText = oldCSS;
        if (ie && ie_version < 9) {
          display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos);
        }
        if (te.selectionStart != null) {
          if (!ie || ie && ie_version < 9) {
            prepareSelectAllHack();
          }
          var i2 = 0, poll = function() {
            if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 && te.selectionEnd > 0 && input.prevInput == "\u200B") {
              operation(cm, selectAll)(cm);
            } else if (i2++ < 10) {
              display.detectingSelectAll = setTimeout(poll, 500);
            } else {
              display.selForContextMenu = null;
              display.input.reset();
            }
          };
          display.detectingSelectAll = setTimeout(poll, 200);
        }
      }
      if (ie && ie_version >= 9) {
        prepareSelectAllHack();
      }
      if (captureRightClick) {
        e_stop(e);
        var mouseup = function() {
          off(window, "mouseup", mouseup);
          setTimeout(rehide, 20);
        };
        on(window, "mouseup", mouseup);
      } else {
        setTimeout(rehide, 50);
      }
    };
    TextareaInput.prototype.readOnlyChanged = function(val) {
      if (!val) {
        this.reset();
      }
      this.textarea.disabled = val == "nocursor";
    };
    TextareaInput.prototype.setUneditable = function() {
    };
    TextareaInput.prototype.needsContentAttribute = false;
    function fromTextArea(textarea, options) {
      options = options ? copyObj(options) : {};
      options.value = textarea.value;
      if (!options.tabindex && textarea.tabIndex) {
        options.tabindex = textarea.tabIndex;
      }
      if (!options.placeholder && textarea.placeholder) {
        options.placeholder = textarea.placeholder;
      }
      if (options.autofocus == null) {
        var hasFocus = activeElt();
        options.autofocus = hasFocus == textarea || textarea.getAttribute("autofocus") != null && hasFocus == document.body;
      }
      function save() {
        textarea.value = cm.getValue();
      }
      var realSubmit;
      if (textarea.form) {
        on(textarea.form, "submit", save);
        if (!options.leaveSubmitMethodAlone) {
          var form = textarea.form;
          realSubmit = form.submit;
          try {
            var wrappedSubmit = form.submit = function() {
              save();
              form.submit = realSubmit;
              form.submit();
              form.submit = wrappedSubmit;
            };
          } catch (e) {
          }
        }
      }
      options.finishInit = function(cm2) {
        cm2.save = save;
        cm2.getTextArea = function() {
          return textarea;
        };
        cm2.toTextArea = function() {
          cm2.toTextArea = isNaN;
          save();
          textarea.parentNode.removeChild(cm2.getWrapperElement());
          textarea.style.display = "";
          if (textarea.form) {
            off(textarea.form, "submit", save);
            if (!options.leaveSubmitMethodAlone && typeof textarea.form.submit == "function") {
              textarea.form.submit = realSubmit;
            }
          }
        };
      };
      textarea.style.display = "none";
      var cm = CodeMirror4(function(node) {
        return textarea.parentNode.insertBefore(node, textarea.nextSibling);
      }, options);
      return cm;
    }
    function addLegacyProps(CodeMirror5) {
      CodeMirror5.off = off;
      CodeMirror5.on = on;
      CodeMirror5.wheelEventPixels = wheelEventPixels;
      CodeMirror5.Doc = Doc;
      CodeMirror5.splitLines = splitLinesAuto;
      CodeMirror5.countColumn = countColumn;
      CodeMirror5.findColumn = findColumn;
      CodeMirror5.isWordChar = isWordCharBasic;
      CodeMirror5.Pass = Pass;
      CodeMirror5.signal = signal;
      CodeMirror5.Line = Line;
      CodeMirror5.changeEnd = changeEnd;
      CodeMirror5.scrollbarModel = scrollbarModel;
      CodeMirror5.Pos = Pos;
      CodeMirror5.cmpPos = cmp;
      CodeMirror5.modes = modes;
      CodeMirror5.mimeModes = mimeModes;
      CodeMirror5.resolveMode = resolveMode;
      CodeMirror5.getMode = getMode;
      CodeMirror5.modeExtensions = modeExtensions;
      CodeMirror5.extendMode = extendMode;
      CodeMirror5.copyState = copyState;
      CodeMirror5.startState = startState;
      CodeMirror5.innerMode = innerMode;
      CodeMirror5.commands = commands;
      CodeMirror5.keyMap = keyMap;
      CodeMirror5.keyName = keyName;
      CodeMirror5.isModifierKey = isModifierKey;
      CodeMirror5.lookupKey = lookupKey;
      CodeMirror5.normalizeKeyMap = normalizeKeyMap;
      CodeMirror5.StringStream = StringStream;
      CodeMirror5.SharedTextMarker = SharedTextMarker;
      CodeMirror5.TextMarker = TextMarker;
      CodeMirror5.LineWidget = LineWidget;
      CodeMirror5.e_preventDefault = e_preventDefault;
      CodeMirror5.e_stopPropagation = e_stopPropagation;
      CodeMirror5.e_stop = e_stop;
      CodeMirror5.addClass = addClass;
      CodeMirror5.contains = contains;
      CodeMirror5.rmClass = rmClass;
      CodeMirror5.keyNames = keyNames;
    }
    defineOptions(CodeMirror4);
    addEditorMethods(CodeMirror4);
    var dontDelegate = "iter insert remove copy getEditor constructor".split(" ");
    for (var prop in Doc.prototype) {
      if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0) {
        CodeMirror4.prototype[prop] = function(method) {
          return function() {
            return method.apply(this.doc, arguments);
          };
        }(Doc.prototype[prop]);
      }
    }
    eventMixin(Doc);
    CodeMirror4.inputStyles = {textarea: TextareaInput, contenteditable: ContentEditableInput};
    CodeMirror4.defineMode = function(name) {
      if (!CodeMirror4.defaults.mode && name != "null") {
        CodeMirror4.defaults.mode = name;
      }
      defineMode.apply(this, arguments);
    };
    CodeMirror4.defineMIME = defineMIME;
    CodeMirror4.defineMode("null", function() {
      return {token: function(stream) {
        return stream.skipToEnd();
      }};
    });
    CodeMirror4.defineMIME("text/plain", "null");
    CodeMirror4.defineExtension = function(name, func) {
      CodeMirror4.prototype[name] = func;
    };
    CodeMirror4.defineDocExtension = function(name, func) {
      Doc.prototype[name] = func;
    };
    CodeMirror4.fromTextArea = fromTextArea;
    addLegacyProps(CodeMirror4);
    CodeMirror4.version = "5.55.0";
    return CodeMirror4;
  });
});

// node_modules/file-saver/dist/FileSaver.min.js
var require_FileSaver_min = __commonJS((exports, module) => {
  (function(a, b) {
    if (typeof define == "function" && define.amd)
      define([], b);
    else if (typeof exports != "undefined")
      b();
    else {
      b(), a.FileSaver = {exports: {}}.exports;
    }
  })(exports, function() {
    "use strict";
    function b(a2, b2) {
      return typeof b2 == "undefined" ? b2 = {autoBom: false} : typeof b2 != "object" && (console.warn("Deprecated: Expected third argument to be a object"), b2 = {autoBom: !b2}), b2.autoBom && /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a2.type) ? new Blob(["\uFEFF", a2], {type: a2.type}) : a2;
    }
    function c(a2, b2, c2) {
      var d2 = new XMLHttpRequest();
      d2.open("GET", a2), d2.responseType = "blob", d2.onload = function() {
        g(d2.response, b2, c2);
      }, d2.onerror = function() {
        console.error("could not download file");
      }, d2.send();
    }
    function d(a2) {
      var b2 = new XMLHttpRequest();
      b2.open("HEAD", a2, false);
      try {
        b2.send();
      } catch (a3) {
      }
      return 200 <= b2.status && 299 >= b2.status;
    }
    function e(a2) {
      try {
        a2.dispatchEvent(new MouseEvent("click"));
      } catch (c2) {
        var b2 = document.createEvent("MouseEvents");
        b2.initMouseEvent("click", true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null), a2.dispatchEvent(b2);
      }
    }
    var f = typeof window == "object" && window.window === window ? window : typeof self == "object" && self.self === self ? self : typeof global == "object" && global.global === global ? global : void 0, a = f.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent), g = f.saveAs || (typeof window != "object" || window !== f ? function() {
    } : "download" in HTMLAnchorElement.prototype && !a ? function(b2, g2, h) {
      var i = f.URL || f.webkitURL, j = document.createElement("a");
      g2 = g2 || b2.name || "download", j.download = g2, j.rel = "noopener", typeof b2 == "string" ? (j.href = b2, j.origin === location.origin ? e(j) : d(j.href) ? c(b2, g2, h) : e(j, j.target = "_blank")) : (j.href = i.createObjectURL(b2), setTimeout(function() {
        i.revokeObjectURL(j.href);
      }, 4e4), setTimeout(function() {
        e(j);
      }, 0));
    } : "msSaveOrOpenBlob" in navigator ? function(f2, g2, h) {
      if (g2 = g2 || f2.name || "download", typeof f2 != "string")
        navigator.msSaveOrOpenBlob(b(f2, h), g2);
      else if (d(f2))
        c(f2, g2, h);
      else {
        var i = document.createElement("a");
        i.href = f2, i.target = "_blank", setTimeout(function() {
          e(i);
        });
      }
    } : function(b2, d2, e2, g2) {
      if (g2 = g2 || open("", "_blank"), g2 && (g2.document.title = g2.document.body.innerText = "downloading..."), typeof b2 == "string")
        return c(b2, d2, e2);
      var h = b2.type === "application/octet-stream", i = /constructor/i.test(f.HTMLElement) || f.safari, j = /CriOS\/[\d]+/.test(navigator.userAgent);
      if ((j || h && i || a) && typeof FileReader != "undefined") {
        var k = new FileReader();
        k.onloadend = function() {
          var a2 = k.result;
          a2 = j ? a2 : a2.replace(/^data:[^;]*;/, "data:attachment/file;"), g2 ? g2.location.href = a2 : location = a2, g2 = null;
        }, k.readAsDataURL(b2);
      } else {
        var l = f.URL || f.webkitURL, m = l.createObjectURL(b2);
        g2 ? g2.location = m : location.href = m, g2 = null, setTimeout(function() {
          l.revokeObjectURL(m);
        }, 4e4);
      }
    });
    f.saveAs = g.saveAs = g, typeof module != "undefined" && (module.exports = g);
  });
});

// src/IDE/utils/getSiteURL.js
function getSiteURL() {
  return window.location.href.replace(window.location.pathname, "").replace(window.location.hash, "");
}

// src/IDE/BlobURLGenerator/utils/getRegexMatches.js
function getRegexMatches(string, regex, index = 1) {
  const matches = [];
  let match;
  while (match = regex.exec(string)) {
    matches.push(match[index]);
  }
  return matches;
}

// src/IDE/BlobURLGenerator/utils/importURLConverter.js
function importURLConverter(url, currentURL) {
  if (url.indexOf("./") === 0)
    return url.replace("./", currentURL);
  if (url.indexOf("../") === 0) {
    const currentURLParts = currentURL.split("/").filter(String);
    while (url.indexOf("../") === 0) {
      if (currentURLParts.length === 0) {
        console.error(`Could not resolve import ${url} relative to ${currentURL}`);
        return "";
      }
      url = url.replace("../", "");
      currentURLParts.pop();
    }
    return currentURLParts.length ? currentURLParts.join("/") + "/" + url : url;
  }
  return url;
}

// src/IDE/BlobURLGenerator/utils/cleanURL.js
var cleanURL = (url) => {
  return url.replace(/(\.\.\/)/g, "").replace(/^(\.\/)/, "").replace(/^(\/)/, "");
};

// src/IDE/BlobURLGenerator/BlobURLGenerator.js
var BlobURLGenerator = class {
  constructor(files, assetsLocation, entry) {
    this.files = files;
    this.assetsLocation = assetsLocation;
    this.vendorLocation = assetsLocation.replace("assets", "vendor");
    this.entry = entry;
  }
  generateSrcURL() {
    if (!this.files[this.entry]) {
      return this.createBlobURL("entry file not found!", "text/html");
    }
    return this.generateFileURL(this.files[this.entry]);
  }
  generateFileURL(file) {
    switch (file.type) {
      case "html":
        return this.generateHtmlURL(file);
      case "css":
        return this.generateCssURL(file);
      case "js":
        return this.generateJsURL(file);
      default:
        return this.createBlobURL(`File type ".${file.type} is unknown`);
    }
  }
  generateHtmlURL(file) {
    const parser = new DOMParser();
    const document3 = parser.parseFromString(file.contents, file.mimeType);
    const styles = document3.querySelectorAll('link[rel="stylesheet"]');
    styles.forEach((style) => {
      const ref = cleanURL(style.getAttribute("href"));
      const cssFile = this.files[ref];
      if (cssFile)
        style.href = this.generateFileURL(cssFile);
    });
    const scriptTags = document3.querySelectorAll("script");
    scriptTags.forEach((script) => {
      const src = script.getAttribute("src");
      if (!src)
        return;
      const ref = cleanURL(src);
      const jsFile = this.files[ref];
      if (jsFile)
        script.src = this.generateFileURL(jsFile);
    });
    const serializer = new XMLSerializer();
    const htmlString = serializer.serializeToString(document3);
    return this.createBlobURL(htmlString, "text/html");
  }
  generateCssURL(file) {
    return this.createBlobURL(file.contents, file.mimeType);
  }
  generateJsURL(file) {
    const currentURL = file.url.substring(0, file.url.lastIndexOf("/") + 1);
    let text = file.contents;
    const importURLs = getRegexMatches(text, /\b\s*from\s*['"](.*?)['"]/g, 1);
    const convertedURLs = importURLs.map((url) => {
      if (!url.includes("three")) {
        return importURLConverter(url, currentURL);
      }
    });
    convertedURLs.forEach((url, i) => {
      if (this.files[url]) {
        const blobURL = this.generateFileURL(this.files[url]);
        text = text.replace(importURLs[i], blobURL);
      }
    });
    text = this.replaceAssetsURLs(text);
    text = this.replaceVendorURLs(text);
    const processedURL = this.createBlobURL(text, file.mimeType);
    return processedURL;
  }
  replaceVendorURLs(text) {
    let newText = text.replace(/from 'three'/gi, `from '${getSiteURL()}/static/vendor/three/build/three.module.js'`);
    newText = newText.replace(/from 'three/gi, `from '${getSiteURL()}/static/vendor/three`);
    return newText;
  }
  replaceAssetsURLs(text) {
    const serverURL = text.replace(/\/assets\//g, this.assetsLocation);
    return serverURL;
  }
  createBlobURL(code, type) {
    const blob = new Blob([code], {
      type
    });
    return URL.createObjectURL(blob);
  }
};

// src/IDE/Editor/setupCodeMirror.js
var import_codemirror2 = __toModule(require_codemirror());

// src/IDE/Editor/utils/addFunctionToCodeMirror.js
var import_codemirror = __toModule(require_codemirror());

// src/IDE/Editor/vendor/custom/CodeMirrorES6/modes/htmlmixed/htmlmixed.js
function addHTMLMixedMode(CodeMirror4) {
  const defaultTags = {
    script: [
      ["lang", /(javascript|babel)/i, "javascript"],
      ["type", /^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i, "javascript"],
      ["type", /./, "text/plain"],
      [null, null, "javascript"]
    ],
    style: [
      ["lang", /^css$/i, "css"],
      ["type", /^(text\/)?(x-)?(stylesheet|css)$/i, "css"],
      ["type", /./, "text/plain"],
      [null, null, "css"]
    ]
  };
  function maybeBackup(stream, pat, style) {
    const cur = stream.current();
    const close = cur.search(pat);
    if (close > -1) {
      stream.backUp(cur.length - close);
    } else if (cur.match(/<\/?$/)) {
      stream.backUp(cur.length);
      if (!stream.match(pat, false))
        stream.match(cur);
    }
    return style;
  }
  const attrRegexpCache = {};
  function getAttrRegexp(attr) {
    const regexp = attrRegexpCache[attr];
    if (regexp)
      return regexp;
    return attrRegexpCache[attr] = new RegExp("\\s+" + attr + `\\s*=\\s*('|")?([^'"]+)('|")?\\s*`);
  }
  function getAttrValue(text, attr) {
    const match = text.match(getAttrRegexp(attr));
    return match ? /^\s*(.*?)\s*$/.exec(match[2])[1] : "";
  }
  function getTagRegexp(tagName, anchored) {
    return new RegExp((anchored ? "^" : "") + "</s*" + tagName + "s*>", "i");
  }
  function addTags(from, to) {
    for (const tag in from) {
      const dest = to[tag] || (to[tag] = []);
      const source = from[tag];
      for (let i = source.length - 1; i >= 0; i--) {
        dest.unshift(source[i]);
      }
    }
  }
  function findMatchingMode(tagInfo, tagText) {
    for (let i = 0; i < tagInfo.length; i++) {
      const spec = tagInfo[i];
      if (!spec[0] || spec[1].test(getAttrValue(tagText, spec[0])))
        return spec[2];
    }
  }
  CodeMirror4.defineMode("htmlmixed", (config2, parserConfig) => {
    const htmlMode = CodeMirror4.getMode(config2, {
      name: "xml",
      htmlMode: true,
      multilineTagIndentFactor: parserConfig.multilineTagIndentFactor,
      multilineTagIndentPastTag: parserConfig.multilineTagIndentPastTag
    });
    const tags = {};
    const configTags = parserConfig && parserConfig.tags;
    const configScript = parserConfig && parserConfig.scriptTypes;
    addTags(defaultTags, tags);
    if (configTags)
      addTags(configTags, tags);
    if (configScript) {
      for (let i = configScript.length - 1; i >= 0; i--) {
        tags.script.unshift(["type", configScript[i].matches, configScript[i].mode]);
      }
    }
    function html(stream, state) {
      const style = htmlMode.token(stream, state.htmlState);
      const tag = /\btag\b/.test(style);
      let tagName;
      if (tag && !/[<>\s\/]/.test(stream.current()) && (tagName = state.htmlState.tagName && state.htmlState.tagName.toLowerCase()) && tags.hasOwnProperty(tagName)) {
        state.inTag = tagName + " ";
      } else if (state.inTag && tag && />$/.test(stream.current())) {
        const inTag = /^([\S]+) (.*)/.exec(state.inTag);
        state.inTag = null;
        const modeSpec = stream.current() == ">" && findMatchingMode(tags[inTag[1]], inTag[2]);
        const mode = CodeMirror4.getMode(config2, modeSpec);
        const endTagA = getTagRegexp(inTag[1], true);
        const endTag = getTagRegexp(inTag[1], false);
        state.token = function(stream2, state2) {
          if (stream2.match(endTagA, false)) {
            state2.token = html;
            state2.localState = state2.localMode = null;
            return null;
          }
          return maybeBackup(stream2, endTag, state2.localMode.token(stream2, state2.localState));
        };
        state.localMode = mode;
        state.localState = CodeMirror4.startState(mode, htmlMode.indent(state.htmlState, "", ""));
      } else if (state.inTag) {
        state.inTag += stream.current();
        if (stream.eol())
          state.inTag += " ";
      }
      return style;
    }
    return {
      startState() {
        const state = CodeMirror4.startState(htmlMode);
        return {
          token: html,
          inTag: null,
          localMode: null,
          localState: null,
          htmlState: state
        };
      },
      copyState(state) {
        let local;
        if (state.localState) {
          local = CodeMirror4.copyState(state.localMode, state.localState);
        }
        return {
          token: state.token,
          inTag: state.inTag,
          localMode: state.localMode,
          localState: local,
          htmlState: CodeMirror4.copyState(htmlMode, state.htmlState)
        };
      },
      token(stream, state) {
        return state.token(stream, state);
      },
      indent(state, textAfter, line) {
        if (!state.localMode || /^\s*<\//.test(textAfter)) {
          return htmlMode.indent(state.htmlState, textAfter, line);
        }
        if (state.localMode.indent) {
          return state.localMode.indent(state.localState, textAfter, line);
        }
        return CodeMirror4.Pass;
      },
      innerMode(state) {
        return {
          state: state.localState || state.htmlState,
          mode: state.localMode || htmlMode
        };
      }
    };
  }, "xml", "javascript", "css");
  CodeMirror4.defineMIME("text/html", "htmlmixed");
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/modes/css/css.js
function addCSSMode(CodeMirror4) {
  CodeMirror4.defineMode("css", (config2, parserConfig) => {
    const inline = parserConfig.inline;
    if (!parserConfig.propertyKeywords)
      parserConfig = CodeMirror4.resolveMode("text/css");
    const indentUnit = config2.indentUnit;
    const tokenHooks = parserConfig.tokenHooks;
    const documentTypes2 = parserConfig.documentTypes || {};
    const mediaTypes2 = parserConfig.mediaTypes || {};
    const mediaFeatures2 = parserConfig.mediaFeatures || {};
    const mediaValueKeywords2 = parserConfig.mediaValueKeywords || {};
    const propertyKeywords2 = parserConfig.propertyKeywords || {};
    const nonStandardPropertyKeywords2 = parserConfig.nonStandardPropertyKeywords || {};
    const fontProperties2 = parserConfig.fontProperties || {};
    const counterDescriptors2 = parserConfig.counterDescriptors || {};
    const colorKeywords2 = parserConfig.colorKeywords || {};
    const valueKeywords2 = parserConfig.valueKeywords || {};
    const allowNested = parserConfig.allowNested;
    const lineComment = parserConfig.lineComment;
    const supportsAtComponent = parserConfig.supportsAtComponent === true;
    let type;
    let override;
    function ret(style, tp) {
      type = tp;
      return style;
    }
    function tokenBase(stream, state) {
      var ch = stream.next();
      if (tokenHooks[ch]) {
        var result = tokenHooks[ch](stream, state);
        if (result !== false)
          return result;
      }
      if (ch == "@") {
        stream.eatWhile(/[\w\\\-]/);
        return ret("def", stream.current());
      }
      if (ch == "=" || (ch == "~" || ch == "|") && stream.eat("=")) {
        return ret(null, "compare");
      }
      if (ch == '"' || ch == "'") {
        state.tokenize = tokenString(ch);
        return state.tokenize(stream, state);
      }
      if (ch == "#") {
        stream.eatWhile(/[\w\\\-]/);
        return ret("atom", "hash");
      }
      if (ch == "!") {
        stream.match(/^\s*\w*/);
        return ret("keyword", "important");
      }
      if (/\d/.test(ch) || ch == "." && stream.eat(/\d/)) {
        stream.eatWhile(/[\w.%]/);
        return ret("number", "unit");
      }
      if (ch === "-") {
        if (/[\d.]/.test(stream.peek())) {
          stream.eatWhile(/[\w.%]/);
          return ret("number", "unit");
        }
        if (stream.match(/^-[\w\\\-]*/)) {
          stream.eatWhile(/[\w\\\-]/);
          if (stream.match(/^\s*:/, false))
            return ret("variable-2", "variable-definition");
          return ret("variable-2", "variable");
        }
        if (stream.match(/^\w+-/)) {
          return ret("meta", "meta");
        }
      } else if (/[,+>*\/]/.test(ch)) {
        return ret(null, "select-op");
      } else if (ch == "." && stream.match(/^-?[_a-z][_a-z0-9-]*/i)) {
        return ret("qualifier", "qualifier");
      } else if (/[:;{}\[\]\(\)]/.test(ch)) {
        return ret(null, ch);
      } else if (stream.match(/[\w-.]+(?=\()/)) {
        if (/^(url(-prefix)?|domain|regexp)$/.test(stream.current().toLowerCase())) {
          state.tokenize = tokenParenthesized;
        }
        return ret("variable callee", "variable");
      } else if (/[\w\\\-]/.test(ch)) {
        stream.eatWhile(/[\w\\\-]/);
        return ret("property", "word");
      } else {
        return ret(null, null);
      }
    }
    function tokenString(quote) {
      return function(stream, state) {
        let escaped = false;
        let ch;
        while ((ch = stream.next()) != null) {
          if (ch == quote && !escaped) {
            if (quote == ")")
              stream.backUp(1);
            break;
          }
          escaped = !escaped && ch == "\\";
        }
        if (ch == quote || !escaped && quote != ")")
          state.tokenize = null;
        return ret("string", "string");
      };
    }
    function tokenParenthesized(stream, state) {
      stream.next();
      if (!stream.match(/\s*[\"\')]/, false)) {
        state.tokenize = tokenString(")");
      } else {
        state.tokenize = null;
      }
      return ret(null, "(");
    }
    function Context(type2, indent, prev) {
      this.type = type2;
      this.indent = indent;
      this.prev = prev;
    }
    function pushContext(state, stream, type2, indent) {
      state.context = new Context(type2, stream.indentation() + (indent === false ? 0 : indentUnit), state.context);
      return type2;
    }
    function popContext(state) {
      if (state.context.prev) {
        state.context = state.context.prev;
      }
      return state.context.type;
    }
    function pass(type2, stream, state) {
      return states[state.context.type](type2, stream, state);
    }
    function popAndPass(type2, stream, state, n) {
      for (let i = n || 1; i > 0; i--) {
        state.context = state.context.prev;
      }
      return pass(type2, stream, state);
    }
    function wordAsValue(stream) {
      const word = stream.current().toLowerCase();
      if (valueKeywords2.hasOwnProperty(word)) {
        override = "atom";
      } else if (colorKeywords2.hasOwnProperty(word)) {
        override = "keyword";
      } else {
        override = "variable";
      }
    }
    var states = {};
    states.top = function(type2, stream, state) {
      if (type2 == "{") {
        return pushContext(state, stream, "block");
      }
      if (type2 == "}" && state.context.prev) {
        return popContext(state);
      }
      if (supportsAtComponent && /@component/i.test(type2)) {
        return pushContext(state, stream, "atComponentBlock");
      }
      if (/^@(-moz-)?document$/i.test(type2)) {
        return pushContext(state, stream, "documentTypes");
      }
      if (/^@(media|supports|(-moz-)?document|import)$/i.test(type2)) {
        return pushContext(state, stream, "atBlock");
      }
      if (/^@(font-face|counter-style)/i.test(type2)) {
        state.stateArg = type2;
        return "restricted_atBlock_before";
      }
      if (/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(type2)) {
        return "keyframes";
      }
      if (type2 && type2.charAt(0) == "@") {
        return pushContext(state, stream, "at");
      }
      if (type2 == "hash") {
        override = "builtin";
      } else if (type2 == "word") {
        override = "tag";
      } else if (type2 == "variable-definition") {
        return "maybeprop";
      } else if (type2 == "interpolation") {
        return pushContext(state, stream, "interpolation");
      } else if (type2 == ":") {
        return "pseudo";
      } else if (allowNested && type2 == "(") {
        return pushContext(state, stream, "parens");
      }
      return state.context.type;
    };
    states.block = function(type2, stream, state) {
      if (type2 == "word") {
        const word = stream.current().toLowerCase();
        if (propertyKeywords2.hasOwnProperty(word)) {
          override = "property";
          return "maybeprop";
        }
        if (nonStandardPropertyKeywords2.hasOwnProperty(word)) {
          override = "string-2";
          return "maybeprop";
        }
        if (allowNested) {
          override = stream.match(/^\s*:(?:\s|$)/, false) ? "property" : "tag";
          return "block";
        }
        override += " error";
        return "maybeprop";
      }
      if (type2 == "meta") {
        return "block";
      }
      if (!allowNested && (type2 == "hash" || type2 == "qualifier")) {
        override = "error";
        return "block";
      }
      return states.top(type2, stream, state);
    };
    states.maybeprop = function(type2, stream, state) {
      if (type2 == ":")
        return pushContext(state, stream, "prop");
      return pass(type2, stream, state);
    };
    states.prop = function(type2, stream, state) {
      if (type2 == ";")
        return popContext(state);
      if (type2 == "{" && allowNested)
        return pushContext(state, stream, "propBlock");
      if (type2 == "}" || type2 == "{")
        return popAndPass(type2, stream, state);
      if (type2 == "(")
        return pushContext(state, stream, "parens");
      if (type2 == "hash" && !/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(stream.current())) {
        override += " error";
      } else if (type2 == "word") {
        wordAsValue(stream);
      } else if (type2 == "interpolation") {
        return pushContext(state, stream, "interpolation");
      }
      return "prop";
    };
    states.propBlock = function(type2, _stream, state) {
      if (type2 == "}")
        return popContext(state);
      if (type2 == "word") {
        override = "property";
        return "maybeprop";
      }
      return state.context.type;
    };
    states.parens = function(type2, stream, state) {
      if (type2 == "{" || type2 == "}")
        return popAndPass(type2, stream, state);
      if (type2 == ")")
        return popContext(state);
      if (type2 == "(")
        return pushContext(state, stream, "parens");
      if (type2 == "interpolation")
        return pushContext(state, stream, "interpolation");
      if (type2 == "word")
        wordAsValue(stream);
      return "parens";
    };
    states.pseudo = function(type2, stream, state) {
      if (type2 == "meta")
        return "pseudo";
      if (type2 == "word") {
        override = "variable-3";
        return state.context.type;
      }
      return pass(type2, stream, state);
    };
    states.documentTypes = function(type2, stream, state) {
      if (type2 == "word" && documentTypes2.hasOwnProperty(stream.current())) {
        override = "tag";
        return state.context.type;
      }
      return states.atBlock(type2, stream, state);
    };
    states.atBlock = function(type2, stream, state) {
      if (type2 == "(")
        return pushContext(state, stream, "atBlock_parens");
      if (type2 == "}" || type2 == ";")
        return popAndPass(type2, stream, state);
      if (type2 == "{") {
        return popContext(state) && pushContext(state, stream, allowNested ? "block" : "top");
      }
      if (type2 == "interpolation")
        return pushContext(state, stream, "interpolation");
      if (type2 == "word") {
        const word = stream.current().toLowerCase();
        if (word == "only" || word == "not" || word == "and" || word == "or") {
          override = "keyword";
        } else if (mediaTypes2.hasOwnProperty(word)) {
          override = "attribute";
        } else if (mediaFeatures2.hasOwnProperty(word)) {
          override = "property";
        } else if (mediaValueKeywords2.hasOwnProperty(word)) {
          override = "keyword";
        } else if (propertyKeywords2.hasOwnProperty(word)) {
          override = "property";
        } else if (nonStandardPropertyKeywords2.hasOwnProperty(word)) {
          override = "string-2";
        } else if (valueKeywords2.hasOwnProperty(word)) {
          override = "atom";
        } else if (colorKeywords2.hasOwnProperty(word)) {
          override = "keyword";
        } else {
          override = "error";
        }
      }
      return state.context.type;
    };
    states.atComponentBlock = function(type2, stream, state) {
      if (type2 == "}") {
        return popAndPass(type2, stream, state);
      }
      if (type2 == "{") {
        return popContext(state) && pushContext(state, stream, allowNested ? "block" : "top", false);
      }
      if (type2 == "word") {
        override = "error";
      }
      return state.context.type;
    };
    states.atBlock_parens = function(type2, stream, state) {
      if (type2 == ")")
        return popContext(state);
      if (type2 == "{" || type2 == "}")
        return popAndPass(type2, stream, state, 2);
      return states.atBlock(type2, stream, state);
    };
    states.restricted_atBlock_before = function(type2, stream, state) {
      if (type2 == "{") {
        return pushContext(state, stream, "restricted_atBlock");
      }
      if (type2 == "word" && state.stateArg == "@counter-style") {
        override = "variable";
        return "restricted_atBlock_before";
      }
      return pass(type2, stream, state);
    };
    states.restricted_atBlock = function(type2, stream, state) {
      if (type2 == "}") {
        state.stateArg = null;
        return popContext(state);
      }
      if (type2 == "word") {
        if (state.stateArg == "@font-face" && !fontProperties2.hasOwnProperty(stream.current().toLowerCase()) || state.stateArg == "@counter-style" && !counterDescriptors2.hasOwnProperty(stream.current().toLowerCase())) {
          override = "error";
        } else {
          override = "property";
        }
        return "maybeprop";
      }
      return "restricted_atBlock";
    };
    states.keyframes = function(type2, stream, state) {
      if (type2 == "word") {
        override = "variable";
        return "keyframes";
      }
      if (type2 == "{")
        return pushContext(state, stream, "top");
      return pass(type2, stream, state);
    };
    states.at = function(type2, stream, state) {
      if (type2 == ";")
        return popContext(state);
      if (type2 == "{" || type2 == "}")
        return popAndPass(type2, stream, state);
      if (type2 == "word")
        override = "tag";
      else if (type2 == "hash")
        override = "builtin";
      return "at";
    };
    states.interpolation = function(type2, stream, state) {
      if (type2 == "}")
        return popContext(state);
      if (type2 == "{" || type2 == ";")
        return popAndPass(type2, stream, state);
      if (type2 == "word")
        override = "variable";
      else if (type2 != "variable" && type2 != "(" && type2 != ")")
        override = "error";
      return "interpolation";
    };
    return {
      startState(base) {
        return {
          tokenize: null,
          state: inline ? "block" : "top",
          stateArg: null,
          context: new Context(inline ? "block" : "top", base || 0, null)
        };
      },
      token(stream, state) {
        if (!state.tokenize && stream.eatSpace())
          return null;
        let style = (state.tokenize || tokenBase)(stream, state);
        if (style && typeof style === "object") {
          type = style[1];
          style = style[0];
        }
        override = style;
        if (type != "comment") {
          state.state = states[state.state](type, stream, state);
        }
        return override;
      },
      indent(state, textAfter) {
        let cx = state.context;
        const ch = textAfter && textAfter.charAt(0);
        let indent = cx.indent;
        if (cx.type == "prop" && (ch == "}" || ch == ")"))
          cx = cx.prev;
        if (cx.prev) {
          if (ch == "}" && (cx.type == "block" || cx.type == "top" || cx.type == "interpolation" || cx.type == "restricted_atBlock")) {
            cx = cx.prev;
            indent = cx.indent;
          } else if (ch == ")" && (cx.type == "parens" || cx.type == "atBlock_parens") || ch == "{" && (cx.type == "at" || cx.type == "atBlock")) {
            indent = Math.max(0, cx.indent - indentUnit);
          }
        }
        return indent;
      },
      electricChars: "}",
      blockCommentStart: "/*",
      blockCommentEnd: "*/",
      blockCommentContinue: " * ",
      lineComment,
      fold: "brace"
    };
  });
  function keySet(array) {
    const keys = {};
    for (let i = 0; i < array.length; ++i) {
      keys[array[i].toLowerCase()] = true;
    }
    return keys;
  }
  const documentTypes_ = [
    "domain",
    "regexp",
    "url",
    "url-prefix"
  ];
  const documentTypes = keySet(documentTypes_);
  const mediaTypes_ = [
    "all",
    "aural",
    "braille",
    "handheld",
    "print",
    "projection",
    "screen",
    "tty",
    "tv",
    "embossed"
  ];
  const mediaTypes = keySet(mediaTypes_);
  const mediaFeatures_ = [
    "width",
    "min-width",
    "max-width",
    "height",
    "min-height",
    "max-height",
    "device-width",
    "min-device-width",
    "max-device-width",
    "device-height",
    "min-device-height",
    "max-device-height",
    "aspect-ratio",
    "min-aspect-ratio",
    "max-aspect-ratio",
    "device-aspect-ratio",
    "min-device-aspect-ratio",
    "max-device-aspect-ratio",
    "color",
    "min-color",
    "max-color",
    "color-index",
    "min-color-index",
    "max-color-index",
    "monochrome",
    "min-monochrome",
    "max-monochrome",
    "resolution",
    "min-resolution",
    "max-resolution",
    "scan",
    "grid",
    "orientation",
    "device-pixel-ratio",
    "min-device-pixel-ratio",
    "max-device-pixel-ratio",
    "pointer",
    "any-pointer",
    "hover",
    "any-hover"
  ];
  const mediaFeatures = keySet(mediaFeatures_);
  const mediaValueKeywords_ = [
    "landscape",
    "portrait",
    "none",
    "coarse",
    "fine",
    "on-demand",
    "hover",
    "interlace",
    "progressive"
  ];
  const mediaValueKeywords = keySet(mediaValueKeywords_);
  const propertyKeywords_ = [
    "align-content",
    "align-items",
    "align-self",
    "alignment-adjust",
    "alignment-baseline",
    "anchor-point",
    "animation",
    "animation-delay",
    "animation-direction",
    "animation-duration",
    "animation-fill-mode",
    "animation-iteration-count",
    "animation-name",
    "animation-play-state",
    "animation-timing-function",
    "appearance",
    "azimuth",
    "backface-visibility",
    "background",
    "background-attachment",
    "background-blend-mode",
    "background-clip",
    "background-color",
    "background-image",
    "background-origin",
    "background-position",
    "background-repeat",
    "background-size",
    "baseline-shift",
    "binding",
    "bleed",
    "bookmark-label",
    "bookmark-level",
    "bookmark-state",
    "bookmark-target",
    "border",
    "border-bottom",
    "border-bottom-color",
    "border-bottom-left-radius",
    "border-bottom-right-radius",
    "border-bottom-style",
    "border-bottom-width",
    "border-collapse",
    "border-color",
    "border-image",
    "border-image-outset",
    "border-image-repeat",
    "border-image-slice",
    "border-image-source",
    "border-image-width",
    "border-left",
    "border-left-color",
    "border-left-style",
    "border-left-width",
    "border-radius",
    "border-right",
    "border-right-color",
    "border-right-style",
    "border-right-width",
    "border-spacing",
    "border-style",
    "border-top",
    "border-top-color",
    "border-top-left-radius",
    "border-top-right-radius",
    "border-top-style",
    "border-top-width",
    "border-width",
    "bottom",
    "box-decoration-break",
    "box-shadow",
    "box-sizing",
    "break-after",
    "break-before",
    "break-inside",
    "caption-side",
    "caret-color",
    "clear",
    "clip",
    "color",
    "color-profile",
    "column-count",
    "column-fill",
    "column-gap",
    "column-rule",
    "column-rule-color",
    "column-rule-style",
    "column-rule-width",
    "column-span",
    "column-width",
    "columns",
    "content",
    "counter-increment",
    "counter-reset",
    "crop",
    "cue",
    "cue-after",
    "cue-before",
    "cursor",
    "direction",
    "display",
    "dominant-baseline",
    "drop-initial-after-adjust",
    "drop-initial-after-align",
    "drop-initial-before-adjust",
    "drop-initial-before-align",
    "drop-initial-size",
    "drop-initial-value",
    "elevation",
    "empty-cells",
    "fit",
    "fit-position",
    "flex",
    "flex-basis",
    "flex-direction",
    "flex-flow",
    "flex-grow",
    "flex-shrink",
    "flex-wrap",
    "float",
    "float-offset",
    "flow-from",
    "flow-into",
    "font",
    "font-feature-settings",
    "font-family",
    "font-kerning",
    "font-language-override",
    "font-size",
    "font-size-adjust",
    "font-stretch",
    "font-style",
    "font-synthesis",
    "font-variant",
    "font-variant-alternates",
    "font-variant-caps",
    "font-variant-east-asian",
    "font-variant-ligatures",
    "font-variant-numeric",
    "font-variant-position",
    "font-weight",
    "grid",
    "grid-area",
    "grid-auto-columns",
    "grid-auto-flow",
    "grid-auto-rows",
    "grid-column",
    "grid-column-end",
    "grid-column-gap",
    "grid-column-start",
    "grid-gap",
    "grid-row",
    "grid-row-end",
    "grid-row-gap",
    "grid-row-start",
    "grid-template",
    "grid-template-areas",
    "grid-template-columns",
    "grid-template-rows",
    "hanging-punctuation",
    "height",
    "hyphens",
    "icon",
    "image-orientation",
    "image-rendering",
    "image-resolution",
    "inline-box-align",
    "justify-content",
    "justify-items",
    "justify-self",
    "left",
    "letter-spacing",
    "line-break",
    "line-height",
    "line-stacking",
    "line-stacking-ruby",
    "line-stacking-shift",
    "line-stacking-strategy",
    "list-style",
    "list-style-image",
    "list-style-position",
    "list-style-type",
    "margin",
    "margin-bottom",
    "margin-left",
    "margin-right",
    "margin-top",
    "marks",
    "marquee-direction",
    "marquee-loop",
    "marquee-play-count",
    "marquee-speed",
    "marquee-style",
    "max-height",
    "max-width",
    "min-height",
    "min-width",
    "mix-blend-mode",
    "move-to",
    "nav-down",
    "nav-index",
    "nav-left",
    "nav-right",
    "nav-up",
    "object-fit",
    "object-position",
    "opacity",
    "order",
    "orphans",
    "outline",
    "outline-color",
    "outline-offset",
    "outline-style",
    "outline-width",
    "overflow",
    "overflow-style",
    "overflow-wrap",
    "overflow-x",
    "overflow-y",
    "padding",
    "padding-bottom",
    "padding-left",
    "padding-right",
    "padding-top",
    "page",
    "page-break-after",
    "page-break-before",
    "page-break-inside",
    "page-policy",
    "pause",
    "pause-after",
    "pause-before",
    "perspective",
    "perspective-origin",
    "pitch",
    "pitch-range",
    "place-content",
    "place-items",
    "place-self",
    "play-during",
    "position",
    "presentation-level",
    "punctuation-trim",
    "quotes",
    "region-break-after",
    "region-break-before",
    "region-break-inside",
    "region-fragment",
    "rendering-intent",
    "resize",
    "rest",
    "rest-after",
    "rest-before",
    "richness",
    "right",
    "rotation",
    "rotation-point",
    "ruby-align",
    "ruby-overhang",
    "ruby-position",
    "ruby-span",
    "shape-image-threshold",
    "shape-inside",
    "shape-margin",
    "shape-outside",
    "size",
    "speak",
    "speak-as",
    "speak-header",
    "speak-numeral",
    "speak-punctuation",
    "speech-rate",
    "stress",
    "string-set",
    "tab-size",
    "table-layout",
    "target",
    "target-name",
    "target-new",
    "target-position",
    "text-align",
    "text-align-last",
    "text-decoration",
    "text-decoration-color",
    "text-decoration-line",
    "text-decoration-skip",
    "text-decoration-style",
    "text-emphasis",
    "text-emphasis-color",
    "text-emphasis-position",
    "text-emphasis-style",
    "text-height",
    "text-indent",
    "text-justify",
    "text-outline",
    "text-overflow",
    "text-shadow",
    "text-size-adjust",
    "text-space-collapse",
    "text-transform",
    "text-underline-position",
    "text-wrap",
    "top",
    "transform",
    "transform-origin",
    "transform-style",
    "transition",
    "transition-delay",
    "transition-duration",
    "transition-property",
    "transition-timing-function",
    "unicode-bidi",
    "user-select",
    "vertical-align",
    "visibility",
    "voice-balance",
    "voice-duration",
    "voice-family",
    "voice-pitch",
    "voice-range",
    "voice-rate",
    "voice-stress",
    "voice-volume",
    "volume",
    "white-space",
    "widows",
    "width",
    "will-change",
    "word-break",
    "word-spacing",
    "word-wrap",
    "z-index",
    "clip-path",
    "clip-rule",
    "mask",
    "enable-background",
    "filter",
    "flood-color",
    "flood-opacity",
    "lighting-color",
    "stop-color",
    "stop-opacity",
    "pointer-events",
    "color-interpolation",
    "color-interpolation-filters",
    "color-rendering",
    "fill",
    "fill-opacity",
    "fill-rule",
    "image-rendering",
    "marker",
    "marker-end",
    "marker-mid",
    "marker-start",
    "shape-rendering",
    "stroke",
    "stroke-dasharray",
    "stroke-dashoffset",
    "stroke-linecap",
    "stroke-linejoin",
    "stroke-miterlimit",
    "stroke-opacity",
    "stroke-width",
    "text-rendering",
    "baseline-shift",
    "dominant-baseline",
    "glyph-orientation-horizontal",
    "glyph-orientation-vertical",
    "text-anchor",
    "writing-mode"
  ];
  const propertyKeywords = keySet(propertyKeywords_);
  const nonStandardPropertyKeywords_ = [
    "scrollbar-arrow-color",
    "scrollbar-base-color",
    "scrollbar-dark-shadow-color",
    "scrollbar-face-color",
    "scrollbar-highlight-color",
    "scrollbar-shadow-color",
    "scrollbar-3d-light-color",
    "scrollbar-track-color",
    "shape-inside",
    "searchfield-cancel-button",
    "searchfield-decoration",
    "searchfield-results-button",
    "searchfield-results-decoration",
    "zoom"
  ];
  const nonStandardPropertyKeywords = keySet(nonStandardPropertyKeywords_);
  const fontProperties_ = [
    "font-family",
    "src",
    "unicode-range",
    "font-variant",
    "font-feature-settings",
    "font-stretch",
    "font-weight",
    "font-style"
  ];
  const fontProperties = keySet(fontProperties_);
  const counterDescriptors_ = [
    "additive-symbols",
    "fallback",
    "negative",
    "pad",
    "prefix",
    "range",
    "speak-as",
    "suffix",
    "symbols",
    "system"
  ];
  const counterDescriptors = keySet(counterDescriptors_);
  const colorKeywords_ = [
    "aliceblue",
    "antiquewhite",
    "aqua",
    "aquamarine",
    "azure",
    "beige",
    "bisque",
    "black",
    "blanchedalmond",
    "blue",
    "blueviolet",
    "brown",
    "burlywood",
    "cadetblue",
    "chartreuse",
    "chocolate",
    "coral",
    "cornflowerblue",
    "cornsilk",
    "crimson",
    "cyan",
    "darkblue",
    "darkcyan",
    "darkgoldenrod",
    "darkgray",
    "darkgreen",
    "darkkhaki",
    "darkmagenta",
    "darkolivegreen",
    "darkorange",
    "darkorchid",
    "darkred",
    "darksalmon",
    "darkseagreen",
    "darkslateblue",
    "darkslategray",
    "darkturquoise",
    "darkviolet",
    "deeppink",
    "deepskyblue",
    "dimgray",
    "dodgerblue",
    "firebrick",
    "floralwhite",
    "forestgreen",
    "fuchsia",
    "gainsboro",
    "ghostwhite",
    "gold",
    "goldenrod",
    "gray",
    "grey",
    "green",
    "greenyellow",
    "honeydew",
    "hotpink",
    "indianred",
    "indigo",
    "ivory",
    "khaki",
    "lavender",
    "lavenderblush",
    "lawngreen",
    "lemonchiffon",
    "lightblue",
    "lightcoral",
    "lightcyan",
    "lightgoldenrodyellow",
    "lightgray",
    "lightgreen",
    "lightpink",
    "lightsalmon",
    "lightseagreen",
    "lightskyblue",
    "lightslategray",
    "lightsteelblue",
    "lightyellow",
    "lime",
    "limegreen",
    "linen",
    "magenta",
    "maroon",
    "mediumaquamarine",
    "mediumblue",
    "mediumorchid",
    "mediumpurple",
    "mediumseagreen",
    "mediumslateblue",
    "mediumspringgreen",
    "mediumturquoise",
    "mediumvioletred",
    "midnightblue",
    "mintcream",
    "mistyrose",
    "moccasin",
    "navajowhite",
    "navy",
    "oldlace",
    "olive",
    "olivedrab",
    "orange",
    "orangered",
    "orchid",
    "palegoldenrod",
    "palegreen",
    "paleturquoise",
    "palevioletred",
    "papayawhip",
    "peachpuff",
    "peru",
    "pink",
    "plum",
    "powderblue",
    "purple",
    "rebeccapurple",
    "red",
    "rosybrown",
    "royalblue",
    "saddlebrown",
    "salmon",
    "sandybrown",
    "seagreen",
    "seashell",
    "sienna",
    "silver",
    "skyblue",
    "slateblue",
    "slategray",
    "snow",
    "springgreen",
    "steelblue",
    "tan",
    "teal",
    "thistle",
    "tomato",
    "turquoise",
    "violet",
    "wheat",
    "white",
    "whitesmoke",
    "yellow",
    "yellowgreen"
  ];
  const colorKeywords = keySet(colorKeywords_);
  const valueKeywords_ = [
    "above",
    "absolute",
    "activeborder",
    "additive",
    "activecaption",
    "afar",
    "after-white-space",
    "ahead",
    "alias",
    "all",
    "all-scroll",
    "alphabetic",
    "alternate",
    "always",
    "amharic",
    "amharic-abegede",
    "antialiased",
    "appworkspace",
    "arabic-indic",
    "armenian",
    "asterisks",
    "attr",
    "auto",
    "auto-flow",
    "avoid",
    "avoid-column",
    "avoid-page",
    "avoid-region",
    "background",
    "backwards",
    "baseline",
    "below",
    "bidi-override",
    "binary",
    "bengali",
    "blink",
    "block",
    "block-axis",
    "bold",
    "bolder",
    "border",
    "border-box",
    "both",
    "bottom",
    "break",
    "break-all",
    "break-word",
    "bullets",
    "button",
    "button-bevel",
    "buttonface",
    "buttonhighlight",
    "buttonshadow",
    "buttontext",
    "calc",
    "cambodian",
    "capitalize",
    "caps-lock-indicator",
    "caption",
    "captiontext",
    "caret",
    "cell",
    "center",
    "checkbox",
    "circle",
    "cjk-decimal",
    "cjk-earthly-branch",
    "cjk-heavenly-stem",
    "cjk-ideographic",
    "clear",
    "clip",
    "close-quote",
    "col-resize",
    "collapse",
    "color",
    "color-burn",
    "color-dodge",
    "column",
    "column-reverse",
    "compact",
    "condensed",
    "contain",
    "content",
    "contents",
    "content-box",
    "context-menu",
    "continuous",
    "copy",
    "counter",
    "counters",
    "cover",
    "crop",
    "cross",
    "crosshair",
    "currentcolor",
    "cursive",
    "cyclic",
    "darken",
    "dashed",
    "decimal",
    "decimal-leading-zero",
    "default",
    "default-button",
    "dense",
    "destination-atop",
    "destination-in",
    "destination-out",
    "destination-over",
    "devanagari",
    "difference",
    "disc",
    "discard",
    "disclosure-closed",
    "disclosure-open",
    "document",
    "dot-dash",
    "dot-dot-dash",
    "dotted",
    "double",
    "down",
    "e-resize",
    "ease",
    "ease-in",
    "ease-in-out",
    "ease-out",
    "element",
    "ellipse",
    "ellipsis",
    "embed",
    "end",
    "ethiopic",
    "ethiopic-abegede",
    "ethiopic-abegede-am-et",
    "ethiopic-abegede-gez",
    "ethiopic-abegede-ti-er",
    "ethiopic-abegede-ti-et",
    "ethiopic-halehame-aa-er",
    "ethiopic-halehame-aa-et",
    "ethiopic-halehame-am-et",
    "ethiopic-halehame-gez",
    "ethiopic-halehame-om-et",
    "ethiopic-halehame-sid-et",
    "ethiopic-halehame-so-et",
    "ethiopic-halehame-ti-er",
    "ethiopic-halehame-ti-et",
    "ethiopic-halehame-tig",
    "ethiopic-numeric",
    "ew-resize",
    "exclusion",
    "expanded",
    "extends",
    "extra-condensed",
    "extra-expanded",
    "fantasy",
    "fast",
    "fill",
    "fixed",
    "flat",
    "flex",
    "flex-end",
    "flex-start",
    "footnotes",
    "forwards",
    "from",
    "geometricPrecision",
    "georgian",
    "graytext",
    "grid",
    "groove",
    "gujarati",
    "gurmukhi",
    "hand",
    "hangul",
    "hangul-consonant",
    "hard-light",
    "hebrew",
    "help",
    "hidden",
    "hide",
    "higher",
    "highlight",
    "highlighttext",
    "hiragana",
    "hiragana-iroha",
    "horizontal",
    "hsl",
    "hsla",
    "hue",
    "icon",
    "ignore",
    "inactiveborder",
    "inactivecaption",
    "inactivecaptiontext",
    "infinite",
    "infobackground",
    "infotext",
    "inherit",
    "initial",
    "inline",
    "inline-axis",
    "inline-block",
    "inline-flex",
    "inline-grid",
    "inline-table",
    "inset",
    "inside",
    "intrinsic",
    "invert",
    "italic",
    "japanese-formal",
    "japanese-informal",
    "justify",
    "kannada",
    "katakana",
    "katakana-iroha",
    "keep-all",
    "khmer",
    "korean-hangul-formal",
    "korean-hanja-formal",
    "korean-hanja-informal",
    "landscape",
    "lao",
    "large",
    "larger",
    "left",
    "level",
    "lighter",
    "lighten",
    "line-through",
    "linear",
    "linear-gradient",
    "lines",
    "list-item",
    "listbox",
    "listitem",
    "local",
    "logical",
    "loud",
    "lower",
    "lower-alpha",
    "lower-armenian",
    "lower-greek",
    "lower-hexadecimal",
    "lower-latin",
    "lower-norwegian",
    "lower-roman",
    "lowercase",
    "ltr",
    "luminosity",
    "malayalam",
    "match",
    "matrix",
    "matrix3d",
    "media-controls-background",
    "media-current-time-display",
    "media-fullscreen-button",
    "media-mute-button",
    "media-play-button",
    "media-return-to-realtime-button",
    "media-rewind-button",
    "media-seek-back-button",
    "media-seek-forward-button",
    "media-slider",
    "media-sliderthumb",
    "media-time-remaining-display",
    "media-volume-slider",
    "media-volume-slider-container",
    "media-volume-sliderthumb",
    "medium",
    "menu",
    "menulist",
    "menulist-button",
    "menulist-text",
    "menulist-textfield",
    "menutext",
    "message-box",
    "middle",
    "min-intrinsic",
    "mix",
    "mongolian",
    "monospace",
    "move",
    "multiple",
    "multiply",
    "myanmar",
    "n-resize",
    "narrower",
    "ne-resize",
    "nesw-resize",
    "no-close-quote",
    "no-drop",
    "no-open-quote",
    "no-repeat",
    "none",
    "normal",
    "not-allowed",
    "nowrap",
    "ns-resize",
    "numbers",
    "numeric",
    "nw-resize",
    "nwse-resize",
    "oblique",
    "octal",
    "opacity",
    "open-quote",
    "optimizeLegibility",
    "optimizeSpeed",
    "oriya",
    "oromo",
    "outset",
    "outside",
    "outside-shape",
    "overlay",
    "overline",
    "padding",
    "padding-box",
    "painted",
    "page",
    "paused",
    "persian",
    "perspective",
    "plus-darker",
    "plus-lighter",
    "pointer",
    "polygon",
    "portrait",
    "pre",
    "pre-line",
    "pre-wrap",
    "preserve-3d",
    "progress",
    "push-button",
    "radial-gradient",
    "radio",
    "read-only",
    "read-write",
    "read-write-plaintext-only",
    "rectangle",
    "region",
    "relative",
    "repeat",
    "repeating-linear-gradient",
    "repeating-radial-gradient",
    "repeat-x",
    "repeat-y",
    "reset",
    "reverse",
    "rgb",
    "rgba",
    "ridge",
    "right",
    "rotate",
    "rotate3d",
    "rotateX",
    "rotateY",
    "rotateZ",
    "round",
    "row",
    "row-resize",
    "row-reverse",
    "rtl",
    "run-in",
    "running",
    "s-resize",
    "sans-serif",
    "saturation",
    "scale",
    "scale3d",
    "scaleX",
    "scaleY",
    "scaleZ",
    "screen",
    "scroll",
    "scrollbar",
    "scroll-position",
    "se-resize",
    "searchfield",
    "searchfield-cancel-button",
    "searchfield-decoration",
    "searchfield-results-button",
    "searchfield-results-decoration",
    "self-start",
    "self-end",
    "semi-condensed",
    "semi-expanded",
    "separate",
    "serif",
    "show",
    "sidama",
    "simp-chinese-formal",
    "simp-chinese-informal",
    "single",
    "skew",
    "skewX",
    "skewY",
    "skip-white-space",
    "slide",
    "slider-horizontal",
    "slider-vertical",
    "sliderthumb-horizontal",
    "sliderthumb-vertical",
    "slow",
    "small",
    "small-caps",
    "small-caption",
    "smaller",
    "soft-light",
    "solid",
    "somali",
    "source-atop",
    "source-in",
    "source-out",
    "source-over",
    "space",
    "space-around",
    "space-between",
    "space-evenly",
    "spell-out",
    "square",
    "square-button",
    "start",
    "static",
    "status-bar",
    "stretch",
    "stroke",
    "sub",
    "subpixel-antialiased",
    "super",
    "sw-resize",
    "symbolic",
    "symbols",
    "system-ui",
    "table",
    "table-caption",
    "table-cell",
    "table-column",
    "table-column-group",
    "table-footer-group",
    "table-header-group",
    "table-row",
    "table-row-group",
    "tamil",
    "telugu",
    "text",
    "text-bottom",
    "text-top",
    "textarea",
    "textfield",
    "thai",
    "thick",
    "thin",
    "threeddarkshadow",
    "threedface",
    "threedhighlight",
    "threedlightshadow",
    "threedshadow",
    "tibetan",
    "tigre",
    "tigrinya-er",
    "tigrinya-er-abegede",
    "tigrinya-et",
    "tigrinya-et-abegede",
    "to",
    "top",
    "trad-chinese-formal",
    "trad-chinese-informal",
    "transform",
    "translate",
    "translate3d",
    "translateX",
    "translateY",
    "translateZ",
    "transparent",
    "ultra-condensed",
    "ultra-expanded",
    "underline",
    "unset",
    "up",
    "upper-alpha",
    "upper-armenian",
    "upper-greek",
    "upper-hexadecimal",
    "upper-latin",
    "upper-norwegian",
    "upper-roman",
    "uppercase",
    "urdu",
    "url",
    "var",
    "vertical",
    "vertical-text",
    "visible",
    "visibleFill",
    "visiblePainted",
    "visibleStroke",
    "visual",
    "w-resize",
    "wait",
    "wave",
    "wider",
    "window",
    "windowframe",
    "windowtext",
    "words",
    "wrap",
    "wrap-reverse",
    "x-large",
    "x-small",
    "xor",
    "xx-large",
    "xx-small"
  ];
  const valueKeywords = keySet(valueKeywords_);
  const allWords = documentTypes_.concat(mediaTypes_).concat(mediaFeatures_).concat(mediaValueKeywords_).concat(propertyKeywords_).concat(nonStandardPropertyKeywords_).concat(colorKeywords_).concat(valueKeywords_);
  CodeMirror4.registerHelper("hintWords", "css", allWords);
  function tokenCComment(stream, state) {
    let maybeEnd = false;
    let ch;
    while ((ch = stream.next()) != null) {
      if (maybeEnd && ch == "/") {
        state.tokenize = null;
        break;
      }
      maybeEnd = ch == "*";
    }
    return ["comment", "comment"];
  }
  CodeMirror4.defineMIME("text/css", {
    documentTypes,
    mediaTypes,
    mediaFeatures,
    mediaValueKeywords,
    propertyKeywords,
    nonStandardPropertyKeywords,
    fontProperties,
    counterDescriptors,
    colorKeywords,
    valueKeywords,
    tokenHooks: {
      "/": function(stream, state) {
        if (!stream.eat("*"))
          return false;
        state.tokenize = tokenCComment;
        return tokenCComment(stream, state);
      }
    },
    name: "css"
  });
  CodeMirror4.defineMIME("text/x-scss", {
    mediaTypes,
    mediaFeatures,
    mediaValueKeywords,
    propertyKeywords,
    nonStandardPropertyKeywords,
    colorKeywords,
    valueKeywords,
    fontProperties,
    allowNested: true,
    lineComment: "//",
    tokenHooks: {
      "/": function(stream, state) {
        if (stream.eat("/")) {
          stream.skipToEnd();
          return ["comment", "comment"];
        }
        if (stream.eat("*")) {
          state.tokenize = tokenCComment;
          return tokenCComment(stream, state);
        }
        return ["operator", "operator"];
      },
      ":": function(stream) {
        if (stream.match(/\s*\{/, false)) {
          return [null, null];
        }
        return false;
      },
      $(stream) {
        stream.match(/^[\w-]+/);
        if (stream.match(/^\s*:/, false)) {
          return ["variable-2", "variable-definition"];
        }
        return ["variable-2", "variable"];
      },
      "#": function(stream) {
        if (!stream.eat("{"))
          return false;
        return [null, "interpolation"];
      }
    },
    name: "css",
    helperType: "scss"
  });
  CodeMirror4.defineMIME("text/x-less", {
    mediaTypes,
    mediaFeatures,
    mediaValueKeywords,
    propertyKeywords,
    nonStandardPropertyKeywords,
    colorKeywords,
    valueKeywords,
    fontProperties,
    allowNested: true,
    lineComment: "//",
    tokenHooks: {
      "/": function(stream, state) {
        if (stream.eat("/")) {
          stream.skipToEnd();
          return ["comment", "comment"];
        }
        if (stream.eat("*")) {
          state.tokenize = tokenCComment;
          return tokenCComment(stream, state);
        }
        return ["operator", "operator"];
      },
      "@": function(stream) {
        if (stream.eat("{"))
          return [null, "interpolation"];
        if (stream.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i, false))
          return false;
        stream.eatWhile(/[\w\\\-]/);
        if (stream.match(/^\s*:/, false)) {
          return ["variable-2", "variable-definition"];
        }
        return ["variable-2", "variable"];
      },
      "&": function() {
        return ["atom", "atom"];
      }
    },
    name: "css",
    helperType: "less"
  });
  CodeMirror4.defineMIME("text/x-gss", {
    documentTypes,
    mediaTypes,
    mediaFeatures,
    propertyKeywords,
    nonStandardPropertyKeywords,
    fontProperties,
    counterDescriptors,
    colorKeywords,
    valueKeywords,
    supportsAtComponent: true,
    tokenHooks: {
      "/": function(stream, state) {
        if (!stream.eat("*"))
          return false;
        state.tokenize = tokenCComment;
        return tokenCComment(stream, state);
      }
    },
    name: "css",
    helperType: "gss"
  });
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/modes/xml/xml.js
function addXMLMode(CodeMirror4) {
  const htmlConfig = {
    autoSelfClosers: {
      area: true,
      base: true,
      br: true,
      col: true,
      command: true,
      embed: true,
      frame: true,
      hr: true,
      img: true,
      input: true,
      keygen: true,
      link: true,
      meta: true,
      param: true,
      source: true,
      track: true,
      wbr: true,
      menuitem: true
    },
    implicitlyClosed: {
      dd: true,
      li: true,
      optgroup: true,
      option: true,
      p: true,
      rp: true,
      rt: true,
      tbody: true,
      td: true,
      tfoot: true,
      th: true,
      tr: true
    },
    contextGrabbers: {
      dd: {
        dd: true,
        dt: true
      },
      dt: {
        dd: true,
        dt: true
      },
      li: {
        li: true
      },
      option: {
        option: true,
        optgroup: true
      },
      optgroup: {
        optgroup: true
      },
      p: {
        address: true,
        article: true,
        aside: true,
        blockquote: true,
        dir: true,
        div: true,
        dl: true,
        fieldset: true,
        footer: true,
        form: true,
        h1: true,
        h2: true,
        h3: true,
        h4: true,
        h5: true,
        h6: true,
        header: true,
        hgroup: true,
        hr: true,
        menu: true,
        nav: true,
        ol: true,
        p: true,
        pre: true,
        section: true,
        table: true,
        ul: true
      },
      rp: {
        rp: true,
        rt: true
      },
      rt: {
        rp: true,
        rt: true
      },
      tbody: {
        tbody: true,
        tfoot: true
      },
      td: {
        td: true,
        th: true
      },
      tfoot: {
        tbody: true
      },
      th: {
        td: true,
        th: true
      },
      thead: {
        tbody: true,
        tfoot: true
      },
      tr: {
        tr: true
      }
    },
    doNotIndent: {
      pre: true
    },
    allowUnquoted: true,
    allowMissing: true,
    caseFold: true
  };
  const xmlConfig = {
    autoSelfClosers: {},
    implicitlyClosed: {},
    contextGrabbers: {},
    doNotIndent: {},
    allowUnquoted: false,
    allowMissing: false,
    allowMissingTagName: false,
    caseFold: false
  };
  CodeMirror4.defineMode("xml", (editorConf, config_) => {
    const indentUnit = editorConf.indentUnit;
    const config2 = {};
    const defaults = config_.htmlMode ? htmlConfig : xmlConfig;
    for (var prop in defaults)
      config2[prop] = defaults[prop];
    for (var prop in config_)
      config2[prop] = config_[prop];
    let type;
    let setStyle;
    function inText(stream, state) {
      function chain(parser) {
        state.tokenize = parser;
        return parser(stream, state);
      }
      var ch = stream.next();
      if (ch == "<") {
        if (stream.eat("!")) {
          if (stream.eat("[")) {
            if (stream.match("CDATA["))
              return chain(inBlock("atom", "]]>"));
            return null;
          }
          if (stream.match("--")) {
            return chain(inBlock("comment", "-->"));
          }
          if (stream.match("DOCTYPE", true, true)) {
            stream.eatWhile(/[\w\._\-]/);
            return chain(doctype(1));
          }
          return null;
        }
        if (stream.eat("?")) {
          stream.eatWhile(/[\w\._\-]/);
          state.tokenize = inBlock("meta", "?>");
          return "meta";
        }
        type = stream.eat("/") ? "closeTag" : "openTag";
        state.tokenize = inTag;
        return "tag bracket";
      }
      if (ch == "&") {
        var ok;
        if (stream.eat("#")) {
          if (stream.eat("x")) {
            ok = stream.eatWhile(/[a-fA-F\d]/) && stream.eat(";");
          } else {
            ok = stream.eatWhile(/[\d]/) && stream.eat(";");
          }
        } else {
          ok = stream.eatWhile(/[\w\.\-:]/) && stream.eat(";");
        }
        return ok ? "atom" : "error";
      }
      stream.eatWhile(/[^&<]/);
      return null;
    }
    inText.isInText = true;
    function inTag(stream, state) {
      const ch = stream.next();
      if (ch == ">" || ch == "/" && stream.eat(">")) {
        state.tokenize = inText;
        type = ch == ">" ? "endTag" : "selfcloseTag";
        return "tag bracket";
      }
      if (ch == "=") {
        type = "equals";
        return null;
      }
      if (ch == "<") {
        state.tokenize = inText;
        state.state = baseState;
        state.tagName = state.tagStart = null;
        const next = state.tokenize(stream, state);
        return next ? next + " tag error" : "tag error";
      }
      if (/[\'\"]/.test(ch)) {
        state.tokenize = inAttribute(ch);
        state.stringStartCol = stream.column();
        return state.tokenize(stream, state);
      }
      stream.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/);
      return "word";
    }
    function inAttribute(quote) {
      const closure = function(stream, state) {
        while (!stream.eol()) {
          if (stream.next() == quote) {
            state.tokenize = inTag;
            break;
          }
        }
        return "string";
      };
      closure.isInAttribute = true;
      return closure;
    }
    function inBlock(style, terminator) {
      return function(stream, state) {
        while (!stream.eol()) {
          if (stream.match(terminator)) {
            state.tokenize = inText;
            break;
          }
          stream.next();
        }
        return style;
      };
    }
    function doctype(depth) {
      return function(stream, state) {
        let ch;
        while ((ch = stream.next()) != null) {
          if (ch == "<") {
            state.tokenize = doctype(depth + 1);
            return state.tokenize(stream, state);
          }
          if (ch == ">") {
            if (depth == 1) {
              state.tokenize = inText;
              break;
            } else {
              state.tokenize = doctype(depth - 1);
              return state.tokenize(stream, state);
            }
          }
        }
        return "meta";
      };
    }
    function Context(state, tagName, startOfLine) {
      this.prev = state.context;
      this.tagName = tagName;
      this.indent = state.indented;
      this.startOfLine = startOfLine;
      if (config2.doNotIndent.hasOwnProperty(tagName) || state.context && state.context.noIndent) {
        this.noIndent = true;
      }
    }
    function popContext(state) {
      if (state.context)
        state.context = state.context.prev;
    }
    function maybePopContext(state, nextTagName) {
      let parentTagName;
      while (true) {
        if (!state.context) {
          return;
        }
        parentTagName = state.context.tagName;
        if (!config2.contextGrabbers.hasOwnProperty(parentTagName) || !config2.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)) {
          return;
        }
        popContext(state);
      }
    }
    function baseState(type2, stream, state) {
      if (type2 == "openTag") {
        state.tagStart = stream.column();
        return tagNameState;
      }
      if (type2 == "closeTag") {
        return closeTagNameState;
      }
      return baseState;
    }
    function tagNameState(type2, stream, state) {
      if (type2 == "word") {
        state.tagName = stream.current();
        setStyle = "tag";
        return attrState;
      }
      if (config2.allowMissingTagName && type2 == "endTag") {
        setStyle = "tag bracket";
        return attrState(type2, stream, state);
      }
      setStyle = "error";
      return tagNameState;
    }
    function closeTagNameState(type2, stream, state) {
      if (type2 == "word") {
        const tagName = stream.current();
        if (state.context && state.context.tagName != tagName && config2.implicitlyClosed.hasOwnProperty(state.context.tagName)) {
          popContext(state);
        }
        if (state.context && state.context.tagName == tagName || config2.matchClosing === false) {
          setStyle = "tag";
          return closeState;
        }
        setStyle = "tag error";
        return closeStateErr;
      }
      if (config2.allowMissingTagName && type2 == "endTag") {
        setStyle = "tag bracket";
        return closeState(type2, stream, state);
      }
      setStyle = "error";
      return closeStateErr;
    }
    function closeState(type2, _stream, state) {
      if (type2 != "endTag") {
        setStyle = "error";
        return closeState;
      }
      popContext(state);
      return baseState;
    }
    function closeStateErr(type2, stream, state) {
      setStyle = "error";
      return closeState(type2, stream, state);
    }
    function attrState(type2, _stream, state) {
      if (type2 == "word") {
        setStyle = "attribute";
        return attrEqState;
      }
      if (type2 == "endTag" || type2 == "selfcloseTag") {
        const tagName = state.tagName;
        const tagStart = state.tagStart;
        state.tagName = state.tagStart = null;
        if (type2 == "selfcloseTag" || config2.autoSelfClosers.hasOwnProperty(tagName)) {
          maybePopContext(state, tagName);
        } else {
          maybePopContext(state, tagName);
          state.context = new Context(state, tagName, tagStart == state.indented);
        }
        return baseState;
      }
      setStyle = "error";
      return attrState;
    }
    function attrEqState(type2, stream, state) {
      if (type2 == "equals")
        return attrValueState;
      if (!config2.allowMissing)
        setStyle = "error";
      return attrState(type2, stream, state);
    }
    function attrValueState(type2, stream, state) {
      if (type2 == "string")
        return attrContinuedState;
      if (type2 == "word" && config2.allowUnquoted) {
        setStyle = "string";
        return attrState;
      }
      setStyle = "error";
      return attrState(type2, stream, state);
    }
    function attrContinuedState(type2, stream, state) {
      if (type2 == "string")
        return attrContinuedState;
      return attrState(type2, stream, state);
    }
    return {
      startState(baseIndent) {
        const state = {
          tokenize: inText,
          state: baseState,
          indented: baseIndent || 0,
          tagName: null,
          tagStart: null,
          context: null
        };
        if (baseIndent != null)
          state.baseIndent = baseIndent;
        return state;
      },
      token(stream, state) {
        if (!state.tagName && stream.sol()) {
          state.indented = stream.indentation();
        }
        if (stream.eatSpace())
          return null;
        type = null;
        let style = state.tokenize(stream, state);
        if ((style || type) && style != "comment") {
          setStyle = null;
          state.state = state.state(type || style, stream, state);
          if (setStyle) {
            style = setStyle == "error" ? style + " error" : setStyle;
          }
        }
        return style;
      },
      indent(state, textAfter, fullLine) {
        let context = state.context;
        if (state.tokenize.isInAttribute) {
          if (state.tagStart == state.indented) {
            return state.stringStartCol + 1;
          }
          return state.indented + indentUnit;
        }
        if (context && context.noIndent)
          return CodeMirror4.Pass;
        if (state.tokenize != inTag && state.tokenize != inText) {
          return fullLine ? fullLine.match(/^(\s*)/)[0].length : 0;
        }
        if (state.tagName) {
          if (config2.multilineTagIndentPastTag !== false) {
            return state.tagStart + state.tagName.length + 2;
          }
          return state.tagStart + indentUnit * (config2.multilineTagIndentFactor || 1);
        }
        if (config2.alignCDATA && /<!\[CDATA\[/.test(textAfter))
          return 0;
        const tagAfter = textAfter && /^<(\/)?([\w_:\.-]*)/.exec(textAfter);
        if (tagAfter && tagAfter[1]) {
          while (context) {
            if (context.tagName == tagAfter[2]) {
              context = context.prev;
              break;
            } else if (config2.implicitlyClosed.hasOwnProperty(context.tagName)) {
              context = context.prev;
            } else {
              break;
            }
          }
        } else if (tagAfter) {
          while (context) {
            const grabbers = config2.contextGrabbers[context.tagName];
            if (grabbers && grabbers.hasOwnProperty(tagAfter[2])) {
              context = context.prev;
            } else {
              break;
            }
          }
        }
        while (context && context.prev && !context.startOfLine) {
          context = context.prev;
        }
        if (context)
          return context.indent + indentUnit;
        return state.baseIndent || 0;
      },
      electricInput: /<\/[\s\w:]+>$/,
      blockCommentStart: "<!--",
      blockCommentEnd: "-->",
      configuration: config2.htmlMode ? "html" : "xml",
      helperType: config2.htmlMode ? "html" : "xml",
      skipAttribute(state) {
        if (state.state == attrValueState) {
          state.state = attrState;
        }
      }
    };
  });
  CodeMirror4.defineMIME("text/xml", "xml");
  CodeMirror4.defineMIME("application/xml", "xml");
  if (!CodeMirror4.mimeModes.hasOwnProperty("text/html")) {
    CodeMirror4.defineMIME("text/html", {
      name: "xml",
      htmlMode: true
    });
  }
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/modes/javascript/javascript.js
function addJavaScriptMode(CodeMirror4) {
  CodeMirror4.defineMode("javascript", (config2, parserConfig) => {
    const indentUnit = config2.indentUnit;
    const statementIndent = parserConfig.statementIndent;
    const jsonldMode = parserConfig.jsonld;
    const jsonMode = parserConfig.json || jsonldMode;
    const isTS = parserConfig.typescript;
    const wordRE = parserConfig.wordCharacters || /[\w$\xa1-\uffff]/;
    const keywords = function() {
      function kw(type2) {
        return {
          type: type2,
          style: "keyword"
        };
      }
      const A = kw("keyword a");
      const B = kw("keyword b");
      const C = kw("keyword c");
      const D = kw("keyword d");
      const operator = kw("operator");
      const atom = {
        type: "atom",
        style: "atom"
      };
      return {
        if: kw("if"),
        while: A,
        with: A,
        else: B,
        do: B,
        try: B,
        finally: B,
        return: D,
        break: D,
        continue: D,
        new: kw("new"),
        delete: C,
        void: C,
        throw: C,
        debugger: kw("debugger"),
        var: kw("var"),
        const: kw("var"),
        let: kw("var"),
        function: kw("function"),
        catch: kw("catch"),
        for: kw("for"),
        switch: kw("switch"),
        case: kw("case"),
        default: kw("default"),
        in: operator,
        typeof: operator,
        instanceof: operator,
        true: atom,
        false: atom,
        null: atom,
        undefined: atom,
        NaN: atom,
        Infinity: atom,
        this: kw("this"),
        class: kw("class"),
        super: kw("atom"),
        yield: C,
        export: kw("export"),
        import: kw("import"),
        extends: C,
        await: C
      };
    }();
    const isOperatorChar = /[+\-*&%=<>!?|~^@]/;
    const isJsonldKeyword = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;
    function readRegexp(stream) {
      let escaped = false;
      let next;
      let inSet = false;
      while ((next = stream.next()) != null) {
        if (!escaped) {
          if (next == "/" && !inSet)
            return;
          if (next == "[")
            inSet = true;
          else if (inSet && next == "]")
            inSet = false;
        }
        escaped = !escaped && next == "\\";
      }
    }
    let type;
    let content;
    function ret(tp, style, cont2) {
      type = tp;
      content = cont2;
      return style;
    }
    function tokenBase(stream, state) {
      const ch = stream.next();
      if (ch == '"' || ch == "'") {
        state.tokenize = tokenString(ch);
        return state.tokenize(stream, state);
      }
      if (ch == "." && stream.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/)) {
        return ret("number", "number");
      }
      if (ch == "." && stream.match("..")) {
        return ret("spread", "meta");
      }
      if (/[\[\]{}\(\),;\:\.]/.test(ch)) {
        return ret(ch);
      }
      if (ch == "=" && stream.eat(">")) {
        return ret("=>", "operator");
      }
      if (ch == "0" && stream.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/)) {
        return ret("number", "number");
      }
      if (/\d/.test(ch)) {
        stream.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/);
        return ret("number", "number");
      }
      if (ch == "/") {
        if (stream.eat("*")) {
          state.tokenize = tokenComment;
          return tokenComment(stream, state);
        }
        if (stream.eat("/")) {
          stream.skipToEnd();
          return ret("comment", "comment");
        }
        if (expressionAllowed(stream, state, 1)) {
          readRegexp(stream);
          stream.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/);
          return ret("regexp", "string-2");
        }
        stream.eat("=");
        return ret("operator", "operator", stream.current());
      }
      if (ch == "`") {
        state.tokenize = tokenQuasi;
        return tokenQuasi(stream, state);
      }
      if (ch == "#") {
        stream.skipToEnd();
        return ret("error", "error");
      }
      if (ch == "<" && stream.match("!--") || ch == "-" && stream.match("->")) {
        stream.skipToEnd();
        return ret("comment", "comment");
      }
      if (isOperatorChar.test(ch)) {
        if (ch != ">" || !state.lexical || state.lexical.type != ">") {
          if (stream.eat("=")) {
            if (ch == "!" || ch == "=")
              stream.eat("=");
          } else if (/[<>*+\-]/.test(ch)) {
            stream.eat(ch);
            if (ch == ">")
              stream.eat(ch);
          }
        }
        return ret("operator", "operator", stream.current());
      }
      if (wordRE.test(ch)) {
        stream.eatWhile(wordRE);
        const word = stream.current();
        if (state.lastType != ".") {
          if (keywords.propertyIsEnumerable(word)) {
            const kw = keywords[word];
            return ret(kw.type, kw.style, word);
          }
          if (word == "async" && stream.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/, false))
            return ret("async", "keyword", word);
        }
        return ret("variable", "variable", word);
      }
    }
    function tokenString(quote) {
      return function(stream, state) {
        let escaped = false;
        let next;
        if (jsonldMode && stream.peek() == "@" && stream.match(isJsonldKeyword)) {
          state.tokenize = tokenBase;
          return ret("jsonld-keyword", "meta");
        }
        while ((next = stream.next()) != null) {
          if (next == quote && !escaped)
            break;
          escaped = !escaped && next == "\\";
        }
        if (!escaped)
          state.tokenize = tokenBase;
        return ret("string", "string");
      };
    }
    function tokenComment(stream, state) {
      let maybeEnd = false;
      let ch;
      while (ch = stream.next()) {
        if (ch == "/" && maybeEnd) {
          state.tokenize = tokenBase;
          break;
        }
        maybeEnd = ch == "*";
      }
      return ret("comment", "comment");
    }
    function tokenQuasi(stream, state) {
      let escaped = false;
      let next;
      while ((next = stream.next()) != null) {
        if (!escaped && (next == "`" || next == "$" && stream.eat("{"))) {
          state.tokenize = tokenBase;
          break;
        }
        escaped = !escaped && next == "\\";
      }
      return ret("quasi", "string-2", stream.current());
    }
    const brackets = "([{}])";
    function findFatArrow(stream, state) {
      if (state.fatArrowAt)
        state.fatArrowAt = null;
      let arrow = stream.string.indexOf("=>", stream.start);
      if (arrow < 0)
        return;
      if (isTS) {
        const m = /:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(stream.string.slice(stream.start, arrow));
        if (m)
          arrow = m.index;
      }
      let depth = 0;
      let sawSomething = false;
      for (var pos = arrow - 1; pos >= 0; --pos) {
        const ch = stream.string.charAt(pos);
        const bracket = brackets.indexOf(ch);
        if (bracket >= 0 && bracket < 3) {
          if (!depth) {
            ++pos;
            break;
          }
          if (--depth == 0) {
            if (ch == "(")
              sawSomething = true;
            break;
          }
        } else if (bracket >= 3 && bracket < 6) {
          ++depth;
        } else if (wordRE.test(ch)) {
          sawSomething = true;
        } else if (/["'\/`]/.test(ch)) {
          for (; ; --pos) {
            if (pos == 0)
              return;
            const next = stream.string.charAt(pos - 1);
            if (next == ch && stream.string.charAt(pos - 2) != "\\") {
              pos--;
              break;
            }
          }
        } else if (sawSomething && !depth) {
          ++pos;
          break;
        }
      }
      if (sawSomething && !depth)
        state.fatArrowAt = pos;
    }
    const atomicTypes = {
      atom: true,
      number: true,
      variable: true,
      string: true,
      regexp: true,
      this: true,
      "jsonld-keyword": true
    };
    function JSLexical(indented, column, type2, align, prev, info) {
      this.indented = indented;
      this.column = column;
      this.type = type2;
      this.prev = prev;
      this.info = info;
      if (align != null)
        this.align = align;
    }
    function inScope(state, varname) {
      for (var v = state.localVars; v; v = v.next) {
        if (v.name == varname)
          return true;
      }
      for (let cx2 = state.context; cx2; cx2 = cx2.prev) {
        for (var v = cx2.vars; v; v = v.next) {
          if (v.name == varname)
            return true;
        }
      }
    }
    function parseJS(state, style, type2, content2, stream) {
      const cc = state.cc;
      cx.state = state;
      cx.stream = stream;
      cx.marked = null, cx.cc = cc;
      cx.style = style;
      if (!state.lexical.hasOwnProperty("align")) {
        state.lexical.align = true;
      }
      while (true) {
        const combinator = cc.length ? cc.pop() : jsonMode ? expression : statement;
        if (combinator(type2, content2)) {
          while (cc.length && cc[cc.length - 1].lex) {
            cc.pop()();
          }
          if (cx.marked)
            return cx.marked;
          if (type2 == "variable" && inScope(state, content2))
            return "variable-2";
          return style;
        }
      }
    }
    var cx = {
      state: null,
      column: null,
      marked: null,
      cc: null
    };
    function pass() {
      for (let i = arguments.length - 1; i >= 0; i--)
        cx.cc.push(arguments[i]);
    }
    function cont() {
      pass.apply(null, arguments);
      return true;
    }
    function inList(name, list) {
      for (let v = list; v; v = v.next) {
        if (v.name == name)
          return true;
      }
      return false;
    }
    function register(varname) {
      const state = cx.state;
      cx.marked = "def";
      if (state.context) {
        if (state.lexical.info == "var" && state.context && state.context.block) {
          const newContext = registerVarScoped(varname, state.context);
          if (newContext != null) {
            state.context = newContext;
            return;
          }
        } else if (!inList(varname, state.localVars)) {
          state.localVars = new Var(varname, state.localVars);
          return;
        }
      }
      if (parserConfig.globalVars && !inList(varname, state.globalVars)) {
        state.globalVars = new Var(varname, state.globalVars);
      }
    }
    function registerVarScoped(varname, context) {
      if (!context) {
        return null;
      }
      if (context.block) {
        const inner = registerVarScoped(varname, context.prev);
        if (!inner)
          return null;
        if (inner == context.prev)
          return context;
        return new Context(inner, context.vars, true);
      }
      if (inList(varname, context.vars)) {
        return context;
      }
      return new Context(context.prev, new Var(varname, context.vars), false);
    }
    function isModifier(name) {
      return name == "public" || name == "private" || name == "protected" || name == "abstract" || name == "readonly";
    }
    function Context(prev, vars, block2) {
      this.prev = prev;
      this.vars = vars;
      this.block = block2;
    }
    function Var(name, next) {
      this.name = name;
      this.next = next;
    }
    const defaultVars = new Var("this", new Var("arguments", null));
    function pushcontext() {
      cx.state.context = new Context(cx.state.context, cx.state.localVars, false);
      cx.state.localVars = defaultVars;
    }
    function pushblockcontext() {
      cx.state.context = new Context(cx.state.context, cx.state.localVars, true);
      cx.state.localVars = null;
    }
    function popcontext() {
      cx.state.localVars = cx.state.context.vars;
      cx.state.context = cx.state.context.prev;
    }
    popcontext.lex = true;
    function pushlex(type2, info) {
      const result = function() {
        const state = cx.state;
        let indent = state.indented;
        if (state.lexical.type == "stat")
          indent = state.lexical.indented;
        else {
          for (let outer = state.lexical; outer && outer.type == ")" && outer.align; outer = outer.prev) {
            indent = outer.indented;
          }
        }
        state.lexical = new JSLexical(indent, cx.stream.column(), type2, null, state.lexical, info);
      };
      result.lex = true;
      return result;
    }
    function poplex() {
      const state = cx.state;
      if (state.lexical.prev) {
        if (state.lexical.type == ")") {
          state.indented = state.lexical.indented;
        }
        state.lexical = state.lexical.prev;
      }
    }
    poplex.lex = true;
    function expect(wanted) {
      function exp(type2) {
        if (type2 == wanted)
          return cont();
        if (wanted == ";" || type2 == "}" || type2 == ")" || type2 == "]")
          return pass();
        return cont(exp);
      }
      return exp;
    }
    function statement(type2, value) {
      if (type2 == "var")
        return cont(pushlex("vardef", value), vardef, expect(";"), poplex);
      if (type2 == "keyword a")
        return cont(pushlex("form"), parenExpr, statement, poplex);
      if (type2 == "keyword b")
        return cont(pushlex("form"), statement, poplex);
      if (type2 == "keyword d") {
        return cx.stream.match(/^\s*$/, false) ? cont() : cont(pushlex("stat"), maybeexpression, expect(";"), poplex);
      }
      if (type2 == "debugger")
        return cont(expect(";"));
      if (type2 == "{")
        return cont(pushlex("}"), pushblockcontext, block, poplex, popcontext);
      if (type2 == ";")
        return cont();
      if (type2 == "if") {
        if (cx.state.lexical.info == "else" && cx.state.cc[cx.state.cc.length - 1] == poplex) {
          cx.state.cc.pop()();
        }
        return cont(pushlex("form"), parenExpr, statement, poplex, maybeelse);
      }
      if (type2 == "function")
        return cont(functiondef);
      if (type2 == "for")
        return cont(pushlex("form"), forspec, statement, poplex);
      if (type2 == "class" || isTS && value == "interface") {
        cx.marked = "keyword";
        return cont(pushlex("form", type2 == "class" ? type2 : value), className, poplex);
      }
      if (type2 == "variable") {
        if (isTS && value == "declare") {
          cx.marked = "keyword";
          return cont(statement);
        }
        if (isTS && (value == "module" || value == "enum" || value == "type") && cx.stream.match(/^\s*\w/, false)) {
          cx.marked = "keyword";
          if (value == "enum")
            return cont(enumdef);
          if (value == "type")
            return cont(typename, expect("operator"), typeexpr, expect(";"));
          return cont(pushlex("form"), pattern, expect("{"), pushlex("}"), block, poplex, poplex);
        }
        if (isTS && value == "namespace") {
          cx.marked = "keyword";
          return cont(pushlex("form"), expression, statement, poplex);
        }
        if (isTS && value == "abstract") {
          cx.marked = "keyword";
          return cont(statement);
        }
        return cont(pushlex("stat"), maybelabel);
      }
      if (type2 == "switch") {
        return cont(pushlex("form"), parenExpr, expect("{"), pushlex("}", "switch"), pushblockcontext, block, poplex, poplex, popcontext);
      }
      if (type2 == "case")
        return cont(expression, expect(":"));
      if (type2 == "default")
        return cont(expect(":"));
      if (type2 == "catch") {
        return cont(pushlex("form"), pushcontext, maybeCatchBinding, statement, poplex, popcontext);
      }
      if (type2 == "export")
        return cont(pushlex("stat"), afterExport, poplex);
      if (type2 == "import")
        return cont(pushlex("stat"), afterImport, poplex);
      if (type2 == "async")
        return cont(statement);
      if (value == "@")
        return cont(expression, statement);
      return pass(pushlex("stat"), expression, expect(";"), poplex);
    }
    function maybeCatchBinding(type2) {
      if (type2 == "(")
        return cont(funarg, expect(")"));
    }
    function expression(type2, value) {
      return expressionInner(type2, value, false);
    }
    function expressionNoComma(type2, value) {
      return expressionInner(type2, value, true);
    }
    function parenExpr(type2) {
      if (type2 != "(")
        return pass();
      return cont(pushlex(")"), expression, expect(")"), poplex);
    }
    function expressionInner(type2, value, noComma) {
      if (cx.state.fatArrowAt == cx.stream.start) {
        const body = noComma ? arrowBodyNoComma : arrowBody;
        if (type2 == "(") {
          return cont(pushcontext, pushlex(")"), commasep(funarg, ")"), poplex, expect("=>"), body, popcontext);
        }
        if (type2 == "variable")
          return pass(pushcontext, pattern, expect("=>"), body, popcontext);
      }
      const maybeop = noComma ? maybeoperatorNoComma : maybeoperatorComma;
      if (atomicTypes.hasOwnProperty(type2))
        return cont(maybeop);
      if (type2 == "function")
        return cont(functiondef, maybeop);
      if (type2 == "class" || isTS && value == "interface") {
        cx.marked = "keyword";
        return cont(pushlex("form"), classExpression, poplex);
      }
      if (type2 == "keyword c" || type2 == "async")
        return cont(noComma ? expressionNoComma : expression);
      if (type2 == "(")
        return cont(pushlex(")"), maybeexpression, expect(")"), poplex, maybeop);
      if (type2 == "operator" || type2 == "spread")
        return cont(noComma ? expressionNoComma : expression);
      if (type2 == "[")
        return cont(pushlex("]"), arrayLiteral, poplex, maybeop);
      if (type2 == "{")
        return contCommasep(objprop, "}", null, maybeop);
      if (type2 == "quasi")
        return pass(quasi, maybeop);
      if (type2 == "new")
        return cont(maybeTarget(noComma));
      if (type2 == "import")
        return cont(expression);
      return cont();
    }
    function maybeexpression(type2) {
      if (type2.match(/[;\}\)\],]/))
        return pass();
      return pass(expression);
    }
    function maybeoperatorComma(type2, value) {
      if (type2 == ",")
        return cont(expression);
      return maybeoperatorNoComma(type2, value, false);
    }
    function maybeoperatorNoComma(type2, value, noComma) {
      const me = noComma == false ? maybeoperatorComma : maybeoperatorNoComma;
      const expr = noComma == false ? expression : expressionNoComma;
      if (type2 == "=>")
        return cont(pushcontext, noComma ? arrowBodyNoComma : arrowBody, popcontext);
      if (type2 == "operator") {
        if (/\+\+|--/.test(value) || isTS && value == "!")
          return cont(me);
        if (isTS && value == "<" && cx.stream.match(/^([^>]|<.*?>)*>\s*\(/, false)) {
          return cont(pushlex(">"), commasep(typeexpr, ">"), poplex, me);
        }
        if (value == "?")
          return cont(expression, expect(":"), expr);
        return cont(expr);
      }
      if (type2 == "quasi") {
        return pass(quasi, me);
      }
      if (type2 == ";")
        return;
      if (type2 == "(")
        return contCommasep(expressionNoComma, ")", "call", me);
      if (type2 == ".")
        return cont(property, me);
      if (type2 == "[")
        return cont(pushlex("]"), maybeexpression, expect("]"), poplex, me);
      if (isTS && value == "as") {
        cx.marked = "keyword";
        return cont(typeexpr, me);
      }
      if (type2 == "regexp") {
        cx.state.lastType = cx.marked = "operator";
        cx.stream.backUp(cx.stream.pos - cx.stream.start - 1);
        return cont(expr);
      }
    }
    function quasi(type2, value) {
      if (type2 != "quasi")
        return pass();
      if (value.slice(value.length - 2) != "${")
        return cont(quasi);
      return cont(expression, continueQuasi);
    }
    function continueQuasi(type2) {
      if (type2 == "}") {
        cx.marked = "string-2";
        cx.state.tokenize = tokenQuasi;
        return cont(quasi);
      }
    }
    function arrowBody(type2) {
      findFatArrow(cx.stream, cx.state);
      return pass(type2 == "{" ? statement : expression);
    }
    function arrowBodyNoComma(type2) {
      findFatArrow(cx.stream, cx.state);
      return pass(type2 == "{" ? statement : expressionNoComma);
    }
    function maybeTarget(noComma) {
      return function(type2) {
        if (type2 == ".")
          return cont(noComma ? targetNoComma : target);
        if (type2 == "variable" && isTS) {
          return cont(maybeTypeArgs, noComma ? maybeoperatorNoComma : maybeoperatorComma);
        }
        return pass(noComma ? expressionNoComma : expression);
      };
    }
    function target(_, value) {
      if (value == "target") {
        cx.marked = "keyword";
        return cont(maybeoperatorComma);
      }
    }
    function targetNoComma(_, value) {
      if (value == "target") {
        cx.marked = "keyword";
        return cont(maybeoperatorNoComma);
      }
    }
    function maybelabel(type2) {
      if (type2 == ":")
        return cont(poplex, statement);
      return pass(maybeoperatorComma, expect(";"), poplex);
    }
    function property(type2) {
      if (type2 == "variable") {
        cx.marked = "property";
        return cont();
      }
    }
    function objprop(type2, value) {
      if (type2 == "async") {
        cx.marked = "property";
        return cont(objprop);
      }
      if (type2 == "variable" || cx.style == "keyword") {
        cx.marked = "property";
        if (value == "get" || value == "set")
          return cont(getterSetter);
        let m;
        if (isTS && cx.state.fatArrowAt == cx.stream.start && (m = cx.stream.match(/^\s*:\s*/, false))) {
          cx.state.fatArrowAt = cx.stream.pos + m[0].length;
        }
        return cont(afterprop);
      }
      if (type2 == "number" || type2 == "string") {
        cx.marked = jsonldMode ? "property" : `${cx.style} property`;
        return cont(afterprop);
      }
      if (type2 == "jsonld-keyword") {
        return cont(afterprop);
      }
      if (isTS && isModifier(value)) {
        cx.marked = "keyword";
        return cont(objprop);
      }
      if (type2 == "[") {
        return cont(expression, maybetype, expect("]"), afterprop);
      }
      if (type2 == "spread") {
        return cont(expressionNoComma, afterprop);
      }
      if (value == "*") {
        cx.marked = "keyword";
        return cont(objprop);
      }
      if (type2 == ":") {
        return pass(afterprop);
      }
    }
    function getterSetter(type2) {
      if (type2 != "variable")
        return pass(afterprop);
      cx.marked = "property";
      return cont(functiondef);
    }
    function afterprop(type2) {
      if (type2 == ":")
        return cont(expressionNoComma);
      if (type2 == "(")
        return pass(functiondef);
    }
    function commasep(what, end, sep) {
      function proceed(type2, value) {
        if (sep ? sep.indexOf(type2) > -1 : type2 == ",") {
          const lex = cx.state.lexical;
          if (lex.info == "call")
            lex.pos = (lex.pos || 0) + 1;
          return cont((type3, value2) => {
            if (type3 == end || value2 == end)
              return pass();
            return pass(what);
          }, proceed);
        }
        if (type2 == end || value == end)
          return cont();
        if (sep && sep.indexOf(";") > -1)
          return pass(what);
        return cont(expect(end));
      }
      return function(type2, value) {
        if (type2 == end || value == end)
          return cont();
        return pass(what, proceed);
      };
    }
    function contCommasep(what, end, info) {
      for (let i = 3; i < arguments.length; i++) {
        cx.cc.push(arguments[i]);
      }
      return cont(pushlex(end, info), commasep(what, end), poplex);
    }
    function block(type2) {
      if (type2 == "}")
        return cont();
      return pass(statement, block);
    }
    function maybetype(type2, value) {
      if (isTS) {
        if (type2 == ":")
          return cont(typeexpr);
        if (value == "?")
          return cont(maybetype);
      }
    }
    function maybetypeOrIn(type2, value) {
      if (isTS && (type2 == ":" || value == "in"))
        return cont(typeexpr);
    }
    function mayberettype(type2) {
      if (isTS && type2 == ":") {
        if (cx.stream.match(/^\s*\w+\s+is\b/, false))
          return cont(expression, isKW, typeexpr);
        return cont(typeexpr);
      }
    }
    function isKW(_, value) {
      if (value == "is") {
        cx.marked = "keyword";
        return cont();
      }
    }
    function typeexpr(type2, value) {
      if (value == "keyof" || value == "typeof" || value == "infer") {
        cx.marked = "keyword";
        return cont(value == "typeof" ? expressionNoComma : typeexpr);
      }
      if (type2 == "variable" || value == "void") {
        cx.marked = "type";
        return cont(afterType);
      }
      if (value == "|" || value == "&")
        return cont(typeexpr);
      if (type2 == "string" || type2 == "number" || type2 == "atom")
        return cont(afterType);
      if (type2 == "[")
        return cont(pushlex("]"), commasep(typeexpr, "]", ","), poplex, afterType);
      if (type2 == "{")
        return cont(pushlex("}"), commasep(typeprop, "}", ",;"), poplex, afterType);
      if (type2 == "(")
        return cont(commasep(typearg, ")"), maybeReturnType, afterType);
      if (type2 == "<")
        return cont(commasep(typeexpr, ">"), typeexpr);
    }
    function maybeReturnType(type2) {
      if (type2 == "=>")
        return cont(typeexpr);
    }
    function typeprop(type2, value) {
      if (type2 == "variable" || cx.style == "keyword") {
        cx.marked = "property";
        return cont(typeprop);
      }
      if (value == "?" || type2 == "number" || type2 == "string") {
        return cont(typeprop);
      }
      if (type2 == ":") {
        return cont(typeexpr);
      }
      if (type2 == "[") {
        return cont(expect("variable"), maybetypeOrIn, expect("]"), typeprop);
      }
      if (type2 == "(") {
        return pass(functiondecl, typeprop);
      }
    }
    function typearg(type2, value) {
      if (type2 == "variable" && cx.stream.match(/^\s*[?:]/, false) || value == "?")
        return cont(typearg);
      if (type2 == ":")
        return cont(typeexpr);
      if (type2 == "spread")
        return cont(typearg);
      return pass(typeexpr);
    }
    function afterType(type2, value) {
      if (value == "<")
        return cont(pushlex(">"), commasep(typeexpr, ">"), poplex, afterType);
      if (value == "|" || type2 == "." || value == "&")
        return cont(typeexpr);
      if (type2 == "[")
        return cont(typeexpr, expect("]"), afterType);
      if (value == "extends" || value == "implements") {
        cx.marked = "keyword";
        return cont(typeexpr);
      }
      if (value == "?")
        return cont(typeexpr, expect(":"), typeexpr);
    }
    function maybeTypeArgs(_, value) {
      if (value == "<")
        return cont(pushlex(">"), commasep(typeexpr, ">"), poplex, afterType);
    }
    function typeparam() {
      return pass(typeexpr, maybeTypeDefault);
    }
    function maybeTypeDefault(_, value) {
      if (value == "=")
        return cont(typeexpr);
    }
    function vardef(_, value) {
      if (value == "enum") {
        cx.marked = "keyword";
        return cont(enumdef);
      }
      return pass(pattern, maybetype, maybeAssign, vardefCont);
    }
    function pattern(type2, value) {
      if (isTS && isModifier(value)) {
        cx.marked = "keyword";
        return cont(pattern);
      }
      if (type2 == "variable") {
        register(value);
        return cont();
      }
      if (type2 == "spread")
        return cont(pattern);
      if (type2 == "[")
        return contCommasep(eltpattern, "]");
      if (type2 == "{")
        return contCommasep(proppattern, "}");
    }
    function proppattern(type2, value) {
      if (type2 == "variable" && !cx.stream.match(/^\s*:/, false)) {
        register(value);
        return cont(maybeAssign);
      }
      if (type2 == "variable")
        cx.marked = "property";
      if (type2 == "spread")
        return cont(pattern);
      if (type2 == "}")
        return pass();
      if (type2 == "[")
        return cont(expression, expect("]"), expect(":"), proppattern);
      return cont(expect(":"), pattern, maybeAssign);
    }
    function eltpattern() {
      return pass(pattern, maybeAssign);
    }
    function maybeAssign(_type, value) {
      if (value == "=")
        return cont(expressionNoComma);
    }
    function vardefCont(type2) {
      if (type2 == ",")
        return cont(vardef);
    }
    function maybeelse(type2, value) {
      if (type2 == "keyword b" && value == "else")
        return cont(pushlex("form", "else"), statement, poplex);
    }
    function forspec(type2, value) {
      if (value == "await")
        return cont(forspec);
      if (type2 == "(")
        return cont(pushlex(")"), forspec1, poplex);
    }
    function forspec1(type2) {
      if (type2 == "var")
        return cont(vardef, forspec2);
      if (type2 == "variable")
        return cont(forspec2);
      return pass(forspec2);
    }
    function forspec2(type2, value) {
      if (type2 == ")")
        return cont();
      if (type2 == ";")
        return cont(forspec2);
      if (value == "in" || value == "of") {
        cx.marked = "keyword";
        return cont(expression, forspec2);
      }
      return pass(expression, forspec2);
    }
    function functiondef(type2, value) {
      if (value == "*") {
        cx.marked = "keyword";
        return cont(functiondef);
      }
      if (type2 == "variable") {
        register(value);
        return cont(functiondef);
      }
      if (type2 == "(") {
        return cont(pushcontext, pushlex(")"), commasep(funarg, ")"), poplex, mayberettype, statement, popcontext);
      }
      if (isTS && value == "<")
        return cont(pushlex(">"), commasep(typeparam, ">"), poplex, functiondef);
    }
    function functiondecl(type2, value) {
      if (value == "*") {
        cx.marked = "keyword";
        return cont(functiondecl);
      }
      if (type2 == "variable") {
        register(value);
        return cont(functiondecl);
      }
      if (type2 == "(") {
        return cont(pushcontext, pushlex(")"), commasep(funarg, ")"), poplex, mayberettype, popcontext);
      }
      if (isTS && value == "<")
        return cont(pushlex(">"), commasep(typeparam, ">"), poplex, functiondecl);
    }
    function typename(type2, value) {
      if (type2 == "keyword" || type2 == "variable") {
        cx.marked = "type";
        return cont(typename);
      }
      if (value == "<") {
        return cont(pushlex(">"), commasep(typeparam, ">"), poplex);
      }
    }
    function funarg(type2, value) {
      if (value == "@")
        cont(expression, funarg);
      if (type2 == "spread")
        return cont(funarg);
      if (isTS && isModifier(value)) {
        cx.marked = "keyword";
        return cont(funarg);
      }
      if (isTS && type2 == "this")
        return cont(maybetype, maybeAssign);
      return pass(pattern, maybetype, maybeAssign);
    }
    function classExpression(type2, value) {
      if (type2 == "variable")
        return className(type2, value);
      return classNameAfter(type2, value);
    }
    function className(type2, value) {
      if (type2 == "variable") {
        register(value);
        return cont(classNameAfter);
      }
    }
    function classNameAfter(type2, value) {
      if (value == "<")
        return cont(pushlex(">"), commasep(typeparam, ">"), poplex, classNameAfter);
      if (value == "extends" || value == "implements" || isTS && type2 == ",") {
        if (value == "implements")
          cx.marked = "keyword";
        return cont(isTS ? typeexpr : expression, classNameAfter);
      }
      if (type2 == "{")
        return cont(pushlex("}"), classBody, poplex);
    }
    function classBody(type2, value) {
      if (type2 == "async" || type2 == "variable" && (value == "static" || value == "get" || value == "set" || isTS && isModifier(value)) && cx.stream.match(/^\s+[\w$\xa1-\uffff]/, false)) {
        cx.marked = "keyword";
        return cont(classBody);
      }
      if (type2 == "variable" || cx.style == "keyword") {
        cx.marked = "property";
        return cont(isTS ? classfield : functiondef, classBody);
      }
      if (type2 == "number" || type2 == "string")
        return cont(isTS ? classfield : functiondef, classBody);
      if (type2 == "[") {
        return cont(expression, maybetype, expect("]"), isTS ? classfield : functiondef, classBody);
      }
      if (value == "*") {
        cx.marked = "keyword";
        return cont(classBody);
      }
      if (isTS && type2 == "(")
        return pass(functiondecl, classBody);
      if (type2 == ";" || type2 == ",")
        return cont(classBody);
      if (type2 == "}")
        return cont();
      if (value == "@")
        return cont(expression, classBody);
    }
    function classfield(type2, value) {
      if (value == "?")
        return cont(classfield);
      if (type2 == ":")
        return cont(typeexpr, maybeAssign);
      if (value == "=")
        return cont(expressionNoComma);
      const context = cx.state.lexical.prev;
      const isInterface = context && context.info == "interface";
      return pass(isInterface ? functiondecl : functiondef);
    }
    function afterExport(type2, value) {
      if (value == "*") {
        cx.marked = "keyword";
        return cont(maybeFrom, expect(";"));
      }
      if (value == "default") {
        cx.marked = "keyword";
        return cont(expression, expect(";"));
      }
      if (type2 == "{")
        return cont(commasep(exportField, "}"), maybeFrom, expect(";"));
      return pass(statement);
    }
    function exportField(type2, value) {
      if (value == "as") {
        cx.marked = "keyword";
        return cont(expect("variable"));
      }
      if (type2 == "variable")
        return pass(expressionNoComma, exportField);
    }
    function afterImport(type2) {
      if (type2 == "string")
        return cont();
      if (type2 == "(")
        return pass(expression);
      return pass(importSpec, maybeMoreImports, maybeFrom);
    }
    function importSpec(type2, value) {
      if (type2 == "{")
        return contCommasep(importSpec, "}");
      if (type2 == "variable")
        register(value);
      if (value == "*")
        cx.marked = "keyword";
      return cont(maybeAs);
    }
    function maybeMoreImports(type2) {
      if (type2 == ",")
        return cont(importSpec, maybeMoreImports);
    }
    function maybeAs(_type, value) {
      if (value == "as") {
        cx.marked = "keyword";
        return cont(importSpec);
      }
    }
    function maybeFrom(_type, value) {
      if (value == "from") {
        cx.marked = "keyword";
        return cont(expression);
      }
    }
    function arrayLiteral(type2) {
      if (type2 == "]")
        return cont();
      return pass(commasep(expressionNoComma, "]"));
    }
    function enumdef() {
      return pass(pushlex("form"), pattern, expect("{"), pushlex("}"), commasep(enummember, "}"), poplex, poplex);
    }
    function enummember() {
      return pass(pattern, maybeAssign);
    }
    function isContinuedStatement(state, textAfter) {
      return state.lastType == "operator" || state.lastType == "," || isOperatorChar.test(textAfter.charAt(0)) || /[,.]/.test(textAfter.charAt(0));
    }
    function expressionAllowed(stream, state, backUp) {
      return state.tokenize == tokenBase && /^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(state.lastType) || state.lastType == "quasi" && /\{\s*$/.test(stream.string.slice(0, stream.pos - (backUp || 0)));
    }
    return {
      startState(basecolumn) {
        const state = {
          tokenize: tokenBase,
          lastType: "sof",
          cc: [],
          lexical: new JSLexical((basecolumn || 0) - indentUnit, 0, "block", false),
          localVars: parserConfig.localVars,
          context: parserConfig.localVars && new Context(null, null, false),
          indented: basecolumn || 0
        };
        if (parserConfig.globalVars && typeof parserConfig.globalVars === "object") {
          state.globalVars = parserConfig.globalVars;
        }
        return state;
      },
      token(stream, state) {
        if (stream.sol()) {
          if (!state.lexical.hasOwnProperty("align")) {
            state.lexical.align = false;
          }
          state.indented = stream.indentation();
          findFatArrow(stream, state);
        }
        if (state.tokenize != tokenComment && stream.eatSpace())
          return null;
        const style = state.tokenize(stream, state);
        if (type == "comment")
          return style;
        state.lastType = type == "operator" && (content == "++" || content == "--") ? "incdec" : type;
        return parseJS(state, style, type, content, stream);
      },
      indent(state, textAfter) {
        if (state.tokenize == tokenComment)
          return CodeMirror4.Pass;
        if (state.tokenize != tokenBase)
          return 0;
        const firstChar = textAfter && textAfter.charAt(0);
        let lexical = state.lexical;
        let top;
        if (!/^\s*else\b/.test(textAfter)) {
          for (let i = state.cc.length - 1; i >= 0; --i) {
            const c = state.cc[i];
            if (c == poplex)
              lexical = lexical.prev;
            else if (c != maybeelse)
              break;
          }
        }
        while ((lexical.type == "stat" || lexical.type == "form") && (firstChar == "}" || (top = state.cc[state.cc.length - 1]) && (top == maybeoperatorComma || top == maybeoperatorNoComma) && !/^[,\.=+\-*:?[\(]/.test(textAfter))) {
          lexical = lexical.prev;
        }
        if (statementIndent && lexical.type == ")" && lexical.prev.type == "stat") {
          lexical = lexical.prev;
        }
        const type2 = lexical.type;
        const closing = firstChar == type2;
        if (type2 == "vardef") {
          return lexical.indented + (state.lastType == "operator" || state.lastType == "," ? lexical.info.length + 1 : 0);
        }
        if (type2 == "form" && firstChar == "{")
          return lexical.indented;
        if (type2 == "form")
          return lexical.indented + indentUnit;
        if (type2 == "stat") {
          return lexical.indented + (isContinuedStatement(state, textAfter) ? statementIndent || indentUnit : 0);
        }
        if (lexical.info == "switch" && !closing && parserConfig.doubleIndentSwitch != false) {
          return lexical.indented + (/^(?:case|default)\b/.test(textAfter) ? indentUnit : 2 * indentUnit);
        }
        if (lexical.align)
          return lexical.column + (closing ? 0 : 1);
        return lexical.indented + (closing ? 0 : indentUnit);
      },
      electricInput: /^\s*(?:case .*?:|default:|\{|\})$/,
      blockCommentStart: jsonMode ? null : "/*",
      blockCommentEnd: jsonMode ? null : "*/",
      blockCommentContinue: jsonMode ? null : " * ",
      lineComment: jsonMode ? null : "//",
      fold: "brace",
      closeBrackets: "()[]{}''\"\"``",
      helperType: jsonMode ? "json" : "javascript",
      jsonldMode,
      jsonMode,
      expressionAllowed,
      skipExpression(state) {
        const top = state.cc[state.cc.length - 1];
        if (top == expression || top == expressionNoComma)
          state.cc.pop();
      }
    };
  });
  CodeMirror4.registerHelper("wordChars", "javascript", /[\w$]/);
  CodeMirror4.defineMIME("text/javascript", "javascript");
  CodeMirror4.defineMIME("text/ecmascript", "javascript");
  CodeMirror4.defineMIME("application/javascript", "javascript");
  CodeMirror4.defineMIME("application/x-javascript", "javascript");
  CodeMirror4.defineMIME("application/ecmascript", "javascript");
  CodeMirror4.defineMIME("application/json", {
    name: "javascript",
    json: true
  });
  CodeMirror4.defineMIME("application/x-json", {
    name: "javascript",
    json: true
  });
  CodeMirror4.defineMIME("application/ld+json", {
    name: "javascript",
    jsonld: true
  });
  CodeMirror4.defineMIME("text/typescript", {
    name: "javascript",
    typescript: true
  });
  CodeMirror4.defineMIME("application/typescript", {
    name: "javascript",
    typescript: true
  });
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/scroll/annotatescrollbar.js
function addAnnotateScrollbar(CodeMirror4) {
  CodeMirror4.defineExtension("annotateScrollbar", function(options) {
    if (typeof options === "string") {
      options = {
        className: options
      };
    }
    return new Annotation(this, options);
  });
  CodeMirror4.defineOption("scrollButtonHeight", 0);
  function Annotation(cm, options) {
    this.cm = cm;
    this.options = options;
    this.buttonHeight = options.scrollButtonHeight || cm.getOption("scrollButtonHeight");
    this.annotations = [];
    this.doRedraw = this.doUpdate = null;
    this.div = cm.getWrapperElement().appendChild(document.createElement("div"));
    this.div.style.cssText = "position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none";
    this.computeScale();
    function scheduleRedraw(delay) {
      clearTimeout(self2.doRedraw);
      self2.doRedraw = setTimeout(() => {
        self2.redraw();
      }, delay);
    }
    var self2 = this;
    cm.on("refresh", this.resizeHandler = function() {
      clearTimeout(self2.doUpdate);
      self2.doUpdate = setTimeout(() => {
        if (self2.computeScale())
          scheduleRedraw(20);
      }, 100);
    });
    cm.on("markerAdded", this.resizeHandler);
    cm.on("markerCleared", this.resizeHandler);
    if (options.listenForChanges !== false) {
      cm.on("change", this.changeHandler = function() {
        scheduleRedraw(250);
      });
    }
  }
  Annotation.prototype.computeScale = function() {
    const cm = this.cm;
    const hScale = (cm.getWrapperElement().clientHeight - cm.display.barHeight - this.buttonHeight * 2) / cm.getScrollerElement().scrollHeight;
    if (hScale != this.hScale) {
      this.hScale = hScale;
      return true;
    }
  };
  Annotation.prototype.update = function(annotations) {
    this.annotations = annotations;
    this.redraw();
  };
  Annotation.prototype.redraw = function(compute) {
    if (compute !== false)
      this.computeScale();
    const cm = this.cm;
    const hScale = this.hScale;
    const frag = document.createDocumentFragment();
    const anns = this.annotations;
    const wrapping = cm.getOption("lineWrapping");
    const singleLineH = wrapping && cm.defaultTextHeight() * 1.5;
    let curLine = null;
    let curLineObj = null;
    function getY(pos, top) {
      if (curLine != pos.line) {
        curLine = pos.line;
        curLineObj = cm.getLineHandle(curLine);
      }
      if (curLineObj.widgets && curLineObj.widgets.length || wrapping && curLineObj.height > singleLineH) {
        return cm.charCoords(pos, "local")[top ? "top" : "bottom"];
      }
      const topY = cm.heightAtLine(curLineObj, "local");
      return topY + (top ? 0 : curLineObj.height);
    }
    const lastLine = cm.lastLine();
    if (cm.display.barWidth) {
      for (var i = 0, nextTop; i < anns.length; i++) {
        let ann = anns[i];
        if (ann.to.line > lastLine)
          continue;
        const top = nextTop || getY(ann.from, true) * hScale;
        let bottom = getY(ann.to, false) * hScale;
        while (i < anns.length - 1) {
          if (anns[i + 1].to.line > lastLine)
            break;
          nextTop = getY(anns[i + 1].from, true) * hScale;
          if (nextTop > bottom + 0.9)
            break;
          ann = anns[++i];
          bottom = getY(ann.to, false) * hScale;
        }
        if (bottom == top)
          continue;
        const height = Math.max(bottom - top, 3);
        const elt = frag.appendChild(document.createElement("div"));
        elt.style.cssText = "position: absolute; right: 0px; width: " + Math.max(cm.display.barWidth - 1, 2) + "px; top: " + (top + this.buttonHeight) + "px; height: " + height + "px";
        elt.className = this.options.className;
        if (ann.id) {
          elt.setAttribute("annotation-id", ann.id);
        }
      }
    }
    this.div.textContent = "";
    this.div.appendChild(frag);
  };
  Annotation.prototype.clear = function() {
    this.cm.off("refresh", this.resizeHandler);
    this.cm.off("markerAdded", this.resizeHandler);
    this.cm.off("markerCleared", this.resizeHandler);
    if (this.changeHandler)
      this.cm.off("change", this.changeHandler);
    this.div.parentNode.removeChild(this.div);
  };
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/comment/comment.js
function addComment(CodeMirror4) {
  const noOptions = {};
  const nonWS = /[^\s\u00a0]/;
  const Pos = CodeMirror4.Pos;
  function firstNonWS(str) {
    const found = str.search(nonWS);
    return found == -1 ? 0 : found;
  }
  CodeMirror4.commands.toggleComment = function(cm) {
    cm.toggleComment();
  };
  CodeMirror4.defineExtension("toggleComment", function(options) {
    if (!options)
      options = noOptions;
    const cm = this;
    let minLine = Infinity;
    const ranges = this.listSelections();
    let mode = null;
    for (let i = ranges.length - 1; i >= 0; i--) {
      const from = ranges[i].from();
      let to = ranges[i].to();
      if (from.line >= minLine)
        continue;
      if (to.line >= minLine)
        to = Pos(minLine, 0);
      minLine = from.line;
      if (mode == null) {
        if (cm.uncomment(from, to, options))
          mode = "un";
        else {
          cm.lineComment(from, to, options);
          mode = "line";
        }
      } else if (mode == "un") {
        cm.uncomment(from, to, options);
      } else {
        cm.lineComment(from, to, options);
      }
    }
  });
  function probablyInsideString(cm, pos, line) {
    return /\bstring\b/.test(cm.getTokenTypeAt(Pos(pos.line, 0))) && !/^[\'\"\`]/.test(line);
  }
  function getMode(cm, pos) {
    const mode = cm.getMode();
    return mode.useInnerComments === false || !mode.innerMode ? mode : cm.getModeAt(pos);
  }
  CodeMirror4.defineExtension("lineComment", function(from, to, options) {
    if (!options)
      options = noOptions;
    const self2 = this;
    const mode = getMode(self2, from);
    const firstLine = self2.getLine(from.line);
    if (firstLine == null || probablyInsideString(self2, from, firstLine))
      return;
    const commentString = options.lineComment || mode.lineComment;
    if (!commentString) {
      if (options.blockCommentStart || mode.blockCommentStart) {
        options.fullLines = true;
        self2.blockComment(from, to, options);
      }
      return;
    }
    const end = Math.min(to.ch != 0 || to.line == from.line ? to.line + 1 : to.line, self2.lastLine() + 1);
    const pad = options.padding == null ? " " : options.padding;
    const blankLines = options.commentBlankLines || from.line == to.line;
    self2.operation(() => {
      if (options.indent) {
        let baseString = null;
        for (var i = from.line; i < end; ++i) {
          var line = self2.getLine(i);
          const whitespace = line.slice(0, firstNonWS(line));
          if (baseString == null || baseString.length > whitespace.length) {
            baseString = whitespace;
          }
        }
        for (var i = from.line; i < end; ++i) {
          var line = self2.getLine(i);
          let cut = baseString.length;
          if (!blankLines && !nonWS.test(line))
            continue;
          if (line.slice(0, cut) != baseString)
            cut = firstNonWS(line);
          self2.replaceRange(baseString + commentString + pad, Pos(i, 0), Pos(i, cut));
        }
      } else {
        for (var i = from.line; i < end; ++i) {
          if (blankLines || nonWS.test(self2.getLine(i))) {
            self2.replaceRange(commentString + pad, Pos(i, 0));
          }
        }
      }
    });
  });
  CodeMirror4.defineExtension("blockComment", function(from, to, options) {
    if (!options)
      options = noOptions;
    const self2 = this;
    const mode = getMode(self2, from);
    const startString = options.blockCommentStart || mode.blockCommentStart;
    const endString = options.blockCommentEnd || mode.blockCommentEnd;
    if (!startString || !endString) {
      if ((options.lineComment || mode.lineComment) && options.fullLines != false) {
        self2.lineComment(from, to, options);
      }
      return;
    }
    if (/\bcomment\b/.test(self2.getTokenTypeAt(Pos(from.line, 0))))
      return;
    let end = Math.min(to.line, self2.lastLine());
    if (end != from.line && to.ch == 0 && nonWS.test(self2.getLine(end)))
      --end;
    const pad = options.padding == null ? " " : options.padding;
    if (from.line > end)
      return;
    self2.operation(() => {
      if (options.fullLines != false) {
        const lastLineHasText = nonWS.test(self2.getLine(end));
        self2.replaceRange(pad + endString, Pos(end));
        self2.replaceRange(startString + pad, Pos(from.line, 0));
        const lead = options.blockCommentLead || mode.blockCommentLead;
        if (lead != null) {
          for (let i = from.line + 1; i <= end; ++i) {
            if (i != end || lastLineHasText) {
              self2.replaceRange(lead + pad, Pos(i, 0));
            }
          }
        }
      } else {
        self2.replaceRange(endString, to);
        self2.replaceRange(startString, from);
      }
    });
  });
  CodeMirror4.defineExtension("uncomment", function(from, to, options) {
    if (!options)
      options = noOptions;
    const self2 = this;
    const mode = getMode(self2, from);
    const end = Math.min(to.ch != 0 || to.line == from.line ? to.line : to.line - 1, self2.lastLine());
    const start = Math.min(from.line, end);
    const lineString = options.lineComment || mode.lineComment;
    const lines = [];
    const pad = options.padding == null ? " " : options.padding;
    let didSomething;
    lineComment: {
      if (!lineString)
        break lineComment;
      for (let i = start; i <= end; ++i) {
        const line = self2.getLine(i);
        let found = line.indexOf(lineString);
        if (found > -1 && !/comment/.test(self2.getTokenTypeAt(Pos(i, found + 1))))
          found = -1;
        if (found == -1 && nonWS.test(line))
          break lineComment;
        if (found > -1 && nonWS.test(line.slice(0, found)))
          break lineComment;
        lines.push(line);
      }
      self2.operation(() => {
        for (let i = start; i <= end; ++i) {
          const line = lines[i - start];
          const pos = line.indexOf(lineString);
          let endPos = pos + lineString.length;
          if (pos < 0)
            continue;
          if (line.slice(endPos, endPos + pad.length) == pad)
            endPos += pad.length;
          didSomething = true;
          self2.replaceRange("", Pos(i, pos), Pos(i, endPos));
        }
      });
      if (didSomething)
        return true;
    }
    const startString = options.blockCommentStart || mode.blockCommentStart;
    const endString = options.blockCommentEnd || mode.blockCommentEnd;
    if (!startString || !endString)
      return false;
    const lead = options.blockCommentLead || mode.blockCommentLead;
    const startLine = self2.getLine(start);
    const open2 = startLine.indexOf(startString);
    if (open2 == -1)
      return false;
    const endLine = end == start ? startLine : self2.getLine(end);
    const close = endLine.indexOf(endString, end == start ? open2 + startString.length : 0);
    const insideStart = Pos(start, open2 + 1);
    const insideEnd = Pos(end, close + 1);
    if (close == -1 || !/comment/.test(self2.getTokenTypeAt(insideStart)) || !/comment/.test(self2.getTokenTypeAt(insideEnd)) || self2.getRange(insideStart, insideEnd, "\n").indexOf(endString) > -1) {
      return false;
    }
    let lastStart = startLine.lastIndexOf(startString, from.ch);
    let firstEnd = lastStart == -1 ? -1 : startLine.slice(0, from.ch).indexOf(endString, lastStart + startString.length);
    if (lastStart != -1 && firstEnd != -1 && firstEnd + endString.length != from.ch)
      return false;
    firstEnd = endLine.indexOf(endString, to.ch);
    const almostLastStart = endLine.slice(to.ch).lastIndexOf(startString, firstEnd - to.ch);
    lastStart = firstEnd == -1 || almostLastStart == -1 ? -1 : to.ch + almostLastStart;
    if (firstEnd != -1 && lastStart != -1 && lastStart != to.ch)
      return false;
    self2.operation(() => {
      self2.replaceRange("", Pos(end, close - (pad && endLine.slice(close - pad.length, close) == pad ? pad.length : 0)), Pos(end, close + endString.length));
      let openEnd = open2 + startString.length;
      if (pad && startLine.slice(openEnd, openEnd + pad.length) == pad)
        openEnd += pad.length;
      self2.replaceRange("", Pos(start, open2), Pos(start, openEnd));
      if (lead) {
        for (let i = start + 1; i <= end; ++i) {
          const line = self2.getLine(i);
          const found = line.indexOf(lead);
          if (found == -1 || nonWS.test(line.slice(0, found)))
            continue;
          let foundEnd = found + lead.length;
          if (pad && line.slice(foundEnd, foundEnd + pad.length) == pad)
            foundEnd += pad.length;
          self2.replaceRange("", Pos(i, found), Pos(i, foundEnd));
        }
      }
    });
    return true;
  });
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/display/fullscreen.js
function addFullscreen(CodeMirror4) {
  CodeMirror4.defineOption("fullScreen", false, (cm, val, old) => {
    if (old == CodeMirror4.Init)
      old = false;
    if (!old == !val)
      return;
    if (val)
      setFullscreen(cm);
    else
      setNormal(cm);
  });
  function setFullscreen(cm) {
    const wrap = cm.getWrapperElement();
    cm.state.fullScreenRestore = {
      scrollTop: window.pageYOffset,
      scrollLeft: window.pageXOffset,
      width: wrap.style.width,
      height: wrap.style.height
    };
    wrap.style.width = "";
    wrap.style.height = "auto";
    wrap.className += " CodeMirror-fullscreen";
    document.documentElement.style.overflow = "hidden";
    cm.refresh();
  }
  function setNormal(cm) {
    const wrap = cm.getWrapperElement();
    wrap.className = wrap.className.replace(/\s*CodeMirror-fullscreen\b/, "");
    document.documentElement.style.overflow = "";
    const info = cm.state.fullScreenRestore;
    wrap.style.width = info.width;
    wrap.style.height = info.height;
    window.scrollTo(info.scrollLeft, info.scrollTop);
    cm.refresh();
  }
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/selection/active-line.js
function addActiveLine(CodeMirror4) {
  const WRAP_CLASS = "CodeMirror-activeline";
  const BACK_CLASS = "CodeMirror-activeline-background";
  const GUTT_CLASS = "CodeMirror-activeline-gutter";
  CodeMirror4.defineOption("styleActiveLine", false, (cm, val, old) => {
    const prev = old == CodeMirror4.Init ? false : old;
    if (val == prev)
      return;
    if (prev) {
      cm.off("beforeSelectionChange", selectionChange);
      clearActiveLines(cm);
      delete cm.state.activeLines;
    }
    if (val) {
      cm.state.activeLines = [];
      updateActiveLines(cm, cm.listSelections());
      cm.on("beforeSelectionChange", selectionChange);
    }
  });
  function clearActiveLines(cm) {
    for (let i = 0; i < cm.state.activeLines.length; i++) {
      cm.removeLineClass(cm.state.activeLines[i], "wrap", WRAP_CLASS);
      cm.removeLineClass(cm.state.activeLines[i], "background", BACK_CLASS);
      cm.removeLineClass(cm.state.activeLines[i], "gutter", GUTT_CLASS);
    }
  }
  function sameArray(a, b) {
    if (a.length != b.length)
      return false;
    for (let i = 0; i < a.length; i++) {
      if (a[i] != b[i])
        return false;
    }
    return true;
  }
  function updateActiveLines(cm, ranges) {
    const active = [];
    for (let i = 0; i < ranges.length; i++) {
      const range = ranges[i];
      const option = cm.getOption("styleActiveLine");
      if (typeof option === "object" && option.nonEmpty ? range.anchor.line != range.head.line : !range.empty()) {
        continue;
      }
      const line = cm.getLineHandleVisualStart(range.head.line);
      if (active[active.length - 1] != line)
        active.push(line);
    }
    if (sameArray(cm.state.activeLines, active))
      return;
    cm.operation(() => {
      clearActiveLines(cm);
      for (let i = 0; i < active.length; i++) {
        cm.addLineClass(active[i], "wrap", WRAP_CLASS);
        cm.addLineClass(active[i], "background", BACK_CLASS);
        cm.addLineClass(active[i], "gutter", GUTT_CLASS);
      }
      cm.state.activeLines = active;
    });
  }
  function selectionChange(cm, sel) {
    updateActiveLines(cm, sel.ranges);
  }
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/dialog/dialog.js
function addDialog(CodeMirror4) {
  function dialogDiv(cm, template, bottom) {
    const wrap = cm.getWrapperElement();
    let dialog;
    dialog = wrap.appendChild(document.createElement("div"));
    if (bottom) {
      dialog.className = "CodeMirror-dialog CodeMirror-dialog-bottom";
    } else {
      dialog.className = "CodeMirror-dialog CodeMirror-dialog-top";
    }
    if (typeof template === "string") {
      dialog.innerHTML = template;
    } else {
      dialog.appendChild(template);
    }
    CodeMirror4.addClass(wrap, "dialog-opened");
    return dialog;
  }
  function closeNotification(cm, newVal) {
    if (cm.state.currentNotificationClose) {
      cm.state.currentNotificationClose();
    }
    cm.state.currentNotificationClose = newVal;
  }
  CodeMirror4.defineExtension("openDialog", function(template, callback, options) {
    if (!options)
      options = {};
    closeNotification(this, null);
    const dialog = dialogDiv(this, template, options.bottom);
    let closed = false;
    const me = this;
    function close(newVal) {
      if (typeof newVal === "string") {
        inp.value = newVal;
      } else {
        if (closed)
          return;
        closed = true;
        CodeMirror4.rmClass(dialog.parentNode, "dialog-opened");
        dialog.parentNode.removeChild(dialog);
        me.focus();
        if (options.onClose)
          options.onClose(dialog);
      }
    }
    var inp = dialog.getElementsByTagName("input")[0];
    let button;
    if (inp) {
      inp.focus();
      if (options.value) {
        inp.value = options.value;
        if (options.selectValueOnOpen !== false) {
          inp.select();
        }
      }
      if (options.onInput) {
        CodeMirror4.on(inp, "input", (e) => {
          options.onInput(e, inp.value, close);
        });
      }
      if (options.onKeyUp) {
        CodeMirror4.on(inp, "keyup", (e) => {
          options.onKeyUp(e, inp.value, close);
        });
      }
      CodeMirror4.on(inp, "keydown", (e) => {
        if (options && options.onKeyDown && options.onKeyDown(e, inp.value, close)) {
          return;
        }
        if (e.keyCode == 27 || options.closeOnEnter !== false && e.keyCode == 13) {
          inp.blur();
          CodeMirror4.e_stop(e);
          close();
        }
        if (e.keyCode == 13)
          callback(inp.value, e);
      });
      if (options.closeOnBlur !== false)
        CodeMirror4.on(inp, "blur", close);
    } else if (button = dialog.getElementsByTagName("button")[0]) {
      CodeMirror4.on(button, "click", () => {
        close();
        me.focus();
      });
      if (options.closeOnBlur !== false)
        CodeMirror4.on(button, "blur", close);
      button.focus();
    }
    return close;
  });
  CodeMirror4.defineExtension("openConfirm", function(template, callbacks, options) {
    closeNotification(this, null);
    const dialog = dialogDiv(this, template, options && options.bottom);
    const buttons = dialog.getElementsByTagName("button");
    let closed = false;
    const me = this;
    let blurring = 1;
    function close() {
      if (closed)
        return;
      closed = true;
      CodeMirror4.rmClass(dialog.parentNode, "dialog-opened");
      dialog.parentNode.removeChild(dialog);
      me.focus();
    }
    buttons[0].focus();
    for (let i = 0; i < buttons.length; ++i) {
      var b = buttons[i];
      (function(callback) {
        CodeMirror4.on(b, "click", (e) => {
          CodeMirror4.e_preventDefault(e);
          close();
          if (callback)
            callback(me);
        });
      })(callbacks[i]);
      CodeMirror4.on(b, "blur", () => {
        --blurring;
        setTimeout(() => {
          if (blurring <= 0)
            close();
        }, 200);
      });
      CodeMirror4.on(b, "focus", () => {
        ++blurring;
      });
    }
  });
  CodeMirror4.defineExtension("openNotification", function(template, options) {
    closeNotification(this, close);
    const dialog = dialogDiv(this, template, options && options.bottom);
    let closed = false;
    let doneTimer;
    const duration = options && typeof options.duration !== "undefined" ? options.duration : 5e3;
    function close() {
      if (closed)
        return;
      closed = true;
      clearTimeout(doneTimer);
      CodeMirror4.rmClass(dialog.parentNode, "dialog-opened");
      dialog.parentNode.removeChild(dialog);
    }
    CodeMirror4.on(dialog, "click", (e) => {
      CodeMirror4.e_preventDefault(e);
      close();
    });
    if (duration) {
      doneTimer = setTimeout(close, duration);
    }
    return close;
  });
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/search/jump-to-line.js
function addJumptoline(CodeMirror4) {
  function dialog(cm, text, shortText, deflt, f) {
    if (cm.openDialog) {
      cm.openDialog(text, f, {
        value: deflt,
        selectValueOnOpen: true
      });
    } else
      f(prompt(shortText, deflt));
  }
  function getJumpDialog(cm) {
    return cm.phrase("Jump to line:") + ' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">' + cm.phrase("(Use line:column or scroll% syntax)") + "</span>";
  }
  function interpretLine(cm, string) {
    const num = Number(string);
    if (/^[-+]/.test(string)) {
      return cm.getCursor().line + num;
    }
    return num - 1;
  }
  CodeMirror4.commands.jumpToLine = function(cm) {
    const cur = cm.getCursor();
    dialog(cm, getJumpDialog(cm), cm.phrase("Jump to line:"), cur.line + 1 + ":" + cur.ch, (posStr) => {
      if (!posStr)
        return;
      let match;
      if (match = /^\s*([\+\-]?\d+)\s*\:\s*(\d+)\s*$/.exec(posStr)) {
        cm.setCursor(interpretLine(cm, match[1]), Number(match[2]));
      } else if (match = /^\s*([\+\-]?\d+(\.\d+)?)\%\s*/.exec(posStr)) {
        let line = Math.round(cm.lineCount() * Number(match[1]) / 100);
        if (/^[-+]/.test(match[1]))
          line = cur.line + line + 1;
        cm.setCursor(line - 1, cur.ch);
      } else if (match = /^\s*\:?\s*([\+\-]?\d+)\s*/.exec(posStr)) {
        cm.setCursor(interpretLine(cm, match[1]), cur.ch);
      }
    });
  };
  CodeMirror4.keyMap.default["Alt-G"] = "jumpToLine";
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/search/match-highlighter.js
function addMatchhighlighter(CodeMirror4) {
  const defaults = {
    style: "matchhighlight",
    minChars: 2,
    delay: 100,
    wordsOnly: false,
    annotateScrollbar: false,
    showToken: false,
    trim: true
  };
  function State(options) {
    this.options = {};
    for (const name in defaults) {
      this.options[name] = (options && options.hasOwnProperty(name) ? options : defaults)[name];
    }
    this.overlay = this.timeout = null;
    this.matchesonscroll = null;
    this.active = false;
  }
  CodeMirror4.defineOption("highlightSelectionMatches", false, (cm, val, old) => {
    if (old && old != CodeMirror4.Init) {
      removeOverlay(cm);
      clearTimeout(cm.state.matchHighlighter.timeout);
      cm.state.matchHighlighter = null;
      cm.off("cursorActivity", cursorActivity);
      cm.off("focus", onFocus);
    }
    if (val) {
      const state = cm.state.matchHighlighter = new State(val);
      if (cm.hasFocus()) {
        state.active = true;
        highlightMatches(cm);
      } else {
        cm.on("focus", onFocus);
      }
      cm.on("cursorActivity", cursorActivity);
    }
  });
  function cursorActivity(cm) {
    const state = cm.state.matchHighlighter;
    if (state.active || cm.hasFocus())
      scheduleHighlight(cm, state);
  }
  function onFocus(cm) {
    const state = cm.state.matchHighlighter;
    if (!state.active) {
      state.active = true;
      scheduleHighlight(cm, state);
    }
  }
  function scheduleHighlight(cm, state) {
    clearTimeout(state.timeout);
    state.timeout = setTimeout(() => {
      highlightMatches(cm);
    }, state.options.delay);
  }
  function addOverlay(cm, query, hasBoundary, style) {
    const state = cm.state.matchHighlighter;
    cm.addOverlay(state.overlay = makeOverlay(query, hasBoundary, style));
    if (state.options.annotateScrollbar && cm.showMatchesOnScrollbar) {
      const searchFor = hasBoundary ? new RegExp("\\b" + query.replace(/[\\\[.+*?(){|^$]/g, "\\$&") + "\\b") : query;
      state.matchesonscroll = cm.showMatchesOnScrollbar(searchFor, false, {
        className: "CodeMirror-selection-highlight-scrollbar"
      });
    }
  }
  function removeOverlay(cm) {
    const state = cm.state.matchHighlighter;
    if (state.overlay) {
      cm.removeOverlay(state.overlay);
      state.overlay = null;
      if (state.matchesonscroll) {
        state.matchesonscroll.clear();
        state.matchesonscroll = null;
      }
    }
  }
  function highlightMatches(cm) {
    cm.operation(() => {
      const state = cm.state.matchHighlighter;
      removeOverlay(cm);
      if (!cm.somethingSelected() && state.options.showToken) {
        const re = state.options.showToken === true ? /[\w$]/ : state.options.showToken;
        const cur = cm.getCursor();
        const line = cm.getLine(cur.line);
        let start = cur.ch;
        let end = start;
        while (start && re.test(line.charAt(start - 1)))
          --start;
        while (end < line.length && re.test(line.charAt(end)))
          ++end;
        if (start < end) {
          addOverlay(cm, line.slice(start, end), re, state.options.style);
        }
        return;
      }
      const from = cm.getCursor("from");
      const to = cm.getCursor("to");
      if (from.line != to.line)
        return;
      if (state.options.wordsOnly && !isWord(cm, from, to))
        return;
      let selection = cm.getRange(from, to);
      if (state.options.trim)
        selection = selection.replace(/^\s+|\s+$/g, "");
      if (selection.length >= state.options.minChars) {
        addOverlay(cm, selection, false, state.options.style);
      }
    });
  }
  function isWord(cm, from, to) {
    const str = cm.getRange(from, to);
    if (str.match(/^\w+$/) !== null) {
      if (from.ch > 0) {
        var pos = {
          line: from.line,
          ch: from.ch - 1
        };
        var chr = cm.getRange(pos, from);
        if (chr.match(/\W/) === null)
          return false;
      }
      if (to.ch < cm.getLine(from.line).length) {
        var pos = {
          line: to.line,
          ch: to.ch + 1
        };
        var chr = cm.getRange(to, pos);
        if (chr.match(/\W/) === null)
          return false;
      }
      return true;
    }
    return false;
  }
  function boundariesAround(stream, re) {
    return (!stream.start || !re.test(stream.string.charAt(stream.start - 1))) && (stream.pos == stream.string.length || !re.test(stream.string.charAt(stream.pos)));
  }
  function makeOverlay(query, hasBoundary, style) {
    return {
      token(stream) {
        if (stream.match(query) && (!hasBoundary || boundariesAround(stream, hasBoundary))) {
          return style;
        }
        stream.next();
        stream.skipTo(query.charAt(0)) || stream.skipToEnd();
      }
    };
  }
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/search/matchesonscrollbar.js
function addMatchesonscroll(CodeMirror4) {
  CodeMirror4.defineExtension("showMatchesOnScrollbar", function(query, caseFold, options) {
    if (typeof options === "string") {
      options = {
        className: options
      };
    }
    if (!options)
      options = {};
    return new SearchAnnotation(this, query, caseFold, options);
  });
  function SearchAnnotation(cm, query, caseFold, options) {
    this.cm = cm;
    this.options = options;
    const annotateOptions = {
      listenForChanges: false
    };
    for (const prop in options)
      annotateOptions[prop] = options[prop];
    if (!annotateOptions.className)
      annotateOptions.className = "CodeMirror-search-match";
    this.annotation = cm.annotateScrollbar(annotateOptions);
    this.query = query;
    this.caseFold = caseFold;
    this.gap = {
      from: cm.firstLine(),
      to: cm.lastLine() + 1
    };
    this.matches = [];
    this.update = null;
    this.findMatches();
    this.annotation.update(this.matches);
    const self2 = this;
    cm.on("change", this.changeHandler = function(_cm, change) {
      self2.onChange(change);
    });
  }
  const MAX_MATCHES = 1e3;
  SearchAnnotation.prototype.findMatches = function() {
    if (!this.gap)
      return;
    for (var i = 0; i < this.matches.length; i++) {
      var match = this.matches[i];
      if (match.from.line >= this.gap.to)
        break;
      if (match.to.line >= this.gap.from)
        this.matches.splice(i--, 1);
    }
    const cursor = this.cm.getSearchCursor(this.query, CodeMirror4.Pos(this.gap.from, 0), {
      caseFold: this.caseFold,
      multiline: this.options.multiline
    });
    const maxMatches = this.options && this.options.maxMatches || MAX_MATCHES;
    while (cursor.findNext()) {
      var match = {
        from: cursor.from(),
        to: cursor.to()
      };
      if (match.from.line >= this.gap.to)
        break;
      this.matches.splice(i++, 0, match);
      if (this.matches.length > maxMatches)
        break;
    }
    this.gap = null;
  };
  function offsetLine(line, changeStart, sizeChange) {
    if (line <= changeStart)
      return line;
    return Math.max(changeStart, line + sizeChange);
  }
  SearchAnnotation.prototype.onChange = function(change) {
    const startLine = change.from.line;
    const endLine = CodeMirror4.changeEnd(change).line;
    const sizeChange = endLine - change.to.line;
    if (this.gap) {
      this.gap.from = Math.min(offsetLine(this.gap.from, startLine, sizeChange), change.from.line);
      this.gap.to = Math.max(offsetLine(this.gap.to, startLine, sizeChange), change.from.line);
    } else {
      this.gap = {
        from: change.from.line,
        to: endLine + 1
      };
    }
    if (sizeChange) {
      for (let i = 0; i < this.matches.length; i++) {
        const match = this.matches[i];
        const newFrom = offsetLine(match.from.line, startLine, sizeChange);
        if (newFrom != match.from.line)
          match.from = CodeMirror4.Pos(newFrom, match.from.ch);
        const newTo = offsetLine(match.to.line, startLine, sizeChange);
        if (newTo != match.to.line)
          match.to = CodeMirror4.Pos(newTo, match.to.ch);
      }
    }
    clearTimeout(this.update);
    const self2 = this;
    this.update = setTimeout(() => {
      self2.updateAfterChange();
    }, 250);
  };
  SearchAnnotation.prototype.updateAfterChange = function() {
    this.findMatches();
    this.annotation.update(this.matches);
  };
  SearchAnnotation.prototype.clear = function() {
    this.cm.off("change", this.changeHandler);
    this.annotation.clear();
  };
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/search/search.js
function addSearch(CodeMirror4) {
  function searchOverlay(query, caseInsensitive) {
    if (typeof query === "string") {
      query = new RegExp(query.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&"), caseInsensitive ? "gi" : "g");
    } else if (!query.global) {
      query = new RegExp(query.source, query.ignoreCase ? "gi" : "g");
    }
    return {
      token(stream) {
        query.lastIndex = stream.pos;
        const match = query.exec(stream.string);
        if (match && match.index == stream.pos) {
          stream.pos += match[0].length || 1;
          return "searching";
        }
        if (match) {
          stream.pos = match.index;
        } else {
          stream.skipToEnd();
        }
      }
    };
  }
  function SearchState() {
    this.posFrom = this.posTo = this.lastQuery = this.query = null;
    this.overlay = null;
  }
  function getSearchState(cm) {
    return cm.state.search || (cm.state.search = new SearchState());
  }
  function queryCaseInsensitive(query) {
    return typeof query === "string" && query == query.toLowerCase();
  }
  function getSearchCursor(cm, query, pos) {
    return cm.getSearchCursor(query, pos, {
      caseFold: queryCaseInsensitive(query),
      multiline: true
    });
  }
  function persistentDialog(cm, text, deflt, onEnter, onKeyDown) {
    cm.openDialog(text, onEnter, {
      value: deflt,
      selectValueOnOpen: true,
      closeOnEnter: false,
      onClose() {
        clearSearch(cm);
      },
      onKeyDown
    });
  }
  function dialog(cm, text, shortText, deflt, f) {
    if (cm.openDialog) {
      cm.openDialog(text, f, {
        value: deflt,
        selectValueOnOpen: true
      });
    } else
      f(prompt(shortText, deflt));
  }
  function confirmDialog(cm, text, shortText, fs) {
    if (cm.openConfirm)
      cm.openConfirm(text, fs);
    else if (confirm(shortText))
      fs[0]();
  }
  function parseString(string) {
    return string.replace(/\\([nrt\\])/g, (match, ch) => {
      if (ch == "n")
        return "\n";
      if (ch == "r")
        return "\r";
      if (ch == "t")
        return "	";
      if (ch == "\\")
        return "\\";
      return match;
    });
  }
  function parseQuery(query) {
    const isRE = query.match(/^\/(.*)\/([a-z]*)$/);
    if (isRE) {
      try {
        query = new RegExp(isRE[1], isRE[2].indexOf("i") == -1 ? "" : "i");
      } catch (e) {
      }
    } else {
      query = parseString(query);
    }
    if (typeof query === "string" ? query == "" : query.test("")) {
      query = /x^/;
    }
    return query;
  }
  function startSearch(cm, state, query) {
    state.queryText = query;
    state.query = parseQuery(query);
    cm.removeOverlay(state.overlay, queryCaseInsensitive(state.query));
    state.overlay = searchOverlay(state.query, queryCaseInsensitive(state.query));
    cm.addOverlay(state.overlay);
    if (cm.showMatchesOnScrollbar) {
      if (state.annotate) {
        state.annotate.clear();
        state.annotate = null;
      }
      state.annotate = cm.showMatchesOnScrollbar(state.query, queryCaseInsensitive(state.query));
    }
  }
  function doSearch(cm, rev, persistent, immediate) {
    const state = getSearchState(cm);
    if (state.query)
      return findNext(cm, rev);
    let q = cm.getSelection() || state.lastQuery;
    if (q instanceof RegExp && q.source == "x^")
      q = null;
    if (persistent && cm.openDialog) {
      let hiding = null;
      const searchNext = function(query, event) {
        CodeMirror4.e_stop(event);
        if (!query)
          return;
        if (query != state.queryText) {
          startSearch(cm, state, query);
          state.posFrom = state.posTo = cm.getCursor();
        }
        if (hiding)
          hiding.style.opacity = 1;
        findNext(cm, event.shiftKey, (_, to) => {
          let dialog2;
          if (to.line < 3 && document.querySelector && (dialog2 = cm.display.wrapper.querySelector(".CodeMirror-dialog")) && dialog2.getBoundingClientRect().bottom - 4 > cm.cursorCoords(to, "window").top) {
            (hiding = dialog2).style.opacity = 0.4;
          }
        });
      };
      persistentDialog(cm, getQueryDialog(cm), q, searchNext, (event, query) => {
        const keyName = CodeMirror4.keyName(event);
        const extra = cm.getOption("extraKeys");
        const cmd = extra && extra[keyName] || CodeMirror4.keyMap[cm.getOption("keyMap")][keyName];
        if (cmd == "findNext" || cmd == "findPrev" || cmd == "findPersistentNext" || cmd == "findPersistentPrev") {
          CodeMirror4.e_stop(event);
          startSearch(cm, getSearchState(cm), query);
          cm.execCommand(cmd);
        } else if (cmd == "find" || cmd == "findPersistent") {
          CodeMirror4.e_stop(event);
          searchNext(query, event);
        }
      });
      if (immediate && q) {
        startSearch(cm, state, q);
        findNext(cm, rev);
      }
    } else {
      dialog(cm, getQueryDialog(cm), "Search for:", q, (query) => {
        if (query && !state.query) {
          cm.operation(() => {
            startSearch(cm, state, query);
            state.posFrom = state.posTo = cm.getCursor();
            findNext(cm, rev);
          });
        }
      });
    }
  }
  function findNext(cm, rev, callback) {
    cm.operation(() => {
      const state = getSearchState(cm);
      let cursor = getSearchCursor(cm, state.query, rev ? state.posFrom : state.posTo);
      if (!cursor.find(rev)) {
        cursor = getSearchCursor(cm, state.query, rev ? CodeMirror4.Pos(cm.lastLine()) : CodeMirror4.Pos(cm.firstLine(), 0));
        if (!cursor.find(rev))
          return;
      }
      cm.setSelection(cursor.from(), cursor.to());
      cm.scrollIntoView({
        from: cursor.from(),
        to: cursor.to()
      }, 20);
      state.posFrom = cursor.from();
      state.posTo = cursor.to();
      if (callback)
        callback(cursor.from(), cursor.to());
    });
  }
  function clearSearch(cm) {
    cm.operation(() => {
      const state = getSearchState(cm);
      state.lastQuery = state.query;
      if (!state.query)
        return;
      state.query = state.queryText = null;
      cm.removeOverlay(state.overlay);
      if (state.annotate) {
        state.annotate.clear();
        state.annotate = null;
      }
    });
  }
  function getQueryDialog(cm) {
    return '<span class="CodeMirror-search-label">' + cm.phrase("Search:") + '</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">' + cm.phrase("(Use /re/ syntax for regexp search)") + "</span>";
  }
  function getReplaceQueryDialog(cm) {
    return ' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">' + cm.phrase("(Use /re/ syntax for regexp search)") + "</span>";
  }
  function getReplacementQueryDialog(cm) {
    return '<span class="CodeMirror-search-label">' + cm.phrase("With:") + '</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/>';
  }
  function getDoReplaceConfirm(cm) {
    return '<span class="CodeMirror-search-label">' + cm.phrase("Replace?") + "</span> <button>" + cm.phrase("Yes") + "</button> <button>" + cm.phrase("No") + "</button> <button>" + cm.phrase("All") + "</button> <button>" + cm.phrase("Stop") + "</button> ";
  }
  function replaceAll(cm, query, text) {
    cm.operation(() => {
      for (let cursor = getSearchCursor(cm, query); cursor.findNext(); ) {
        if (typeof query !== "string") {
          var match = cm.getRange(cursor.from(), cursor.to()).match(query);
          cursor.replace(text.replace(/\$(\d)/g, (_, i) => {
            return match[i];
          }));
        } else
          cursor.replace(text);
      }
    });
  }
  function replace(cm, all) {
    if (cm.getOption("readOnly"))
      return;
    const query = cm.getSelection() || getSearchState(cm).lastQuery;
    const dialogText = '<span class="CodeMirror-search-label">' + (all ? cm.phrase("Replace all:") : cm.phrase("Replace:")) + "</span>";
    dialog(cm, dialogText + getReplaceQueryDialog(cm), dialogText, query, (query2) => {
      if (!query2)
        return;
      query2 = parseQuery(query2);
      dialog(cm, getReplacementQueryDialog(cm), cm.phrase("Replace with:"), "", (text) => {
        text = parseString(text);
        if (all) {
          replaceAll(cm, query2, text);
        } else {
          clearSearch(cm);
          let cursor = getSearchCursor(cm, query2, cm.getCursor("from"));
          var advance = function() {
            const start = cursor.from();
            let match;
            if (!(match = cursor.findNext())) {
              cursor = getSearchCursor(cm, query2);
              if (!(match = cursor.findNext()) || start && cursor.from().line == start.line && cursor.from().ch == start.ch)
                return;
            }
            cm.setSelection(cursor.from(), cursor.to());
            cm.scrollIntoView({
              from: cursor.from(),
              to: cursor.to()
            });
            confirmDialog(cm, getDoReplaceConfirm(cm), cm.phrase("Replace?"), [
              function() {
                doReplace(match);
              },
              advance,
              function() {
                replaceAll(cm, query2, text);
              }
            ]);
          };
          var doReplace = function(match) {
            cursor.replace(typeof query2 === "string" ? text : text.replace(/\$(\d)/g, (_, i) => {
              return match[i];
            }));
            advance();
          };
          advance();
        }
      });
    });
  }
  CodeMirror4.commands.find = function(cm) {
    clearSearch(cm);
    doSearch(cm);
  };
  CodeMirror4.commands.findPersistent = function(cm) {
    clearSearch(cm);
    doSearch(cm, false, true);
  };
  CodeMirror4.commands.findPersistentNext = function(cm) {
    doSearch(cm, false, true, true);
  };
  CodeMirror4.commands.findPersistentPrev = function(cm) {
    doSearch(cm, true, true, true);
  };
  CodeMirror4.commands.findNext = doSearch;
  CodeMirror4.commands.findPrev = function(cm) {
    doSearch(cm, true);
  };
  CodeMirror4.commands.clearSearch = clearSearch;
  CodeMirror4.commands.replace = replace;
  CodeMirror4.commands.replaceAll = function(cm) {
    replace(cm, true);
  };
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/search/searchcursor.js
function addSearchcursor(CodeMirror4) {
  let Pos = CodeMirror4.Pos;
  function regexpFlags(regexp) {
    let flags = regexp.flags;
    return flags != null ? flags : (regexp.ignoreCase ? "i" : "") + (regexp.global ? "g" : "") + (regexp.multiline ? "m" : "");
  }
  function ensureFlags(regexp, flags) {
    let current = regexpFlags(regexp);
    var target = current;
    for (let i = 0; i < flags.length; i++) {
      if (target.indexOf(flags.charAt(i)) == -1)
        target += flags.charAt(i);
    }
    ;
    return current == target ? regexp : new RegExp(regexp.source, target);
  }
  function maybeMultiline(regexp) {
    return /\\s|\\n|\n|\\W|\\D|\[\^/.test(regexp.source);
  }
  function searchRegexpForward(doc, regexp, start) {
    regexp = ensureFlags(regexp, "g");
    for (let line = start.line, ch = start.ch, last = doc.lastLine(); line <= last; line++, ch = 0) {
      regexp.lastIndex = ch;
      let string = doc.getLine(line);
      var match = regexp.exec(string);
      if (match) {
        return {
          from: Pos(line, match.index),
          to: Pos(line, match.index + match[0].length),
          match
        };
      }
      ;
    }
  }
  function searchRegexpForwardMultiline(doc, regexp, start) {
    if (!maybeMultiline(regexp))
      return searchRegexpForward(doc, regexp, start);
    regexp = ensureFlags(regexp, "gm");
    let string;
    var chunk = 1;
    for (let line = start.line, last = doc.lastLine(); line <= last; ) {
      for (let i = 0; i < chunk; i++) {
        if (line > last)
          break;
        let curLine = doc.getLine(line++);
        string = string == null ? curLine : string + "\n" + curLine;
      }
      chunk *= 2;
      regexp.lastIndex = start.ch;
      let match = regexp.exec(string);
      if (match) {
        let before = string.slice(0, match.index).split("\n");
        var inside = match[0].split("\n");
        let startLine = start.line + before.length - 1;
        var startCh = before[before.length - 1].length;
        return {
          from: Pos(startLine, startCh),
          to: Pos(startLine + inside.length - 1, inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),
          match
        };
      }
    }
  }
  function lastMatchIn(string, regexp) {
    let cutOff = 0;
    var match;
    for (; ; ) {
      regexp.lastIndex = cutOff;
      let newMatch = regexp.exec(string);
      if (!newMatch)
        return match;
      match = newMatch;
      cutOff = match.index + (match[0].length || 1);
      if (cutOff == string.length)
        return match;
    }
  }
  function searchRegexpBackward(doc, regexp, start) {
    regexp = ensureFlags(regexp, "g");
    for (let line = start.line, ch = start.ch, first = doc.firstLine(); line >= first; line--, ch = -1) {
      let string = doc.getLine(line);
      if (ch > -1)
        string = string.slice(0, ch);
      let match = lastMatchIn(string, regexp);
      if (match) {
        return {
          from: Pos(line, match.index),
          to: Pos(line, match.index + match[0].length),
          match
        };
      }
      ;
    }
  }
  function searchRegexpBackwardMultiline(doc, regexp, start) {
    regexp = ensureFlags(regexp, "gm");
    let string;
    var chunk = 1;
    for (let line = start.line, first = doc.firstLine(); line >= first; ) {
      for (let i = 0; i < chunk; i++) {
        let curLine = doc.getLine(line--);
        string = string == null ? curLine.slice(0, start.ch) : curLine + "\n" + string;
      }
      chunk *= 2;
      let match = lastMatchIn(string, regexp);
      if (match) {
        let before = string.slice(0, match.index).split("\n");
        var inside = match[0].split("\n");
        let startLine = line + before.length;
        var startCh = before[before.length - 1].length;
        return {
          from: Pos(startLine, startCh),
          to: Pos(startLine + inside.length - 1, inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),
          match
        };
      }
    }
  }
  let doFold;
  var noFold;
  if (String.prototype.normalize) {
    doFold = function(str) {
      return str.normalize("NFD").toLowerCase();
    };
    noFold = function(str) {
      return str.normalize("NFD");
    };
  } else {
    doFold = function(str) {
      return str.toLowerCase();
    };
    noFold = function(str) {
      return str;
    };
  }
  function adjustPos(orig, folded, pos, foldFunc) {
    if (orig.length == folded.length)
      return pos;
    for (var min = 0, max = pos + Math.max(0, orig.length - folded.length); ; ) {
      if (min == max)
        return min;
      var mid = min + max >> 1;
      var len = foldFunc(orig.slice(0, mid)).length;
      if (len == pos)
        return mid;
      if (len > pos)
        max = mid;
      else
        min = mid + 1;
    }
  }
  function searchStringForward(doc, query, start, caseFold) {
    if (!query.length)
      return null;
    var fold = caseFold ? doFold : noFold;
    var lines = fold(query).split(/\r|\n\r?/);
    search:
      for (var line = start.line, ch = start.ch, last = doc.lastLine() + 1 - lines.length; line <= last; line++, ch = 0) {
        var orig = doc.getLine(line).slice(ch), string = fold(orig);
        if (lines.length == 1) {
          var found = string.indexOf(lines[0]);
          if (found == -1)
            continue search;
          var start = adjustPos(orig, string, found, fold) + ch;
          return {
            from: Pos(line, adjustPos(orig, string, found, fold) + ch),
            to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold) + ch)
          };
        }
        var cutFrom = string.length - lines[0].length;
        if (string.slice(cutFrom) != lines[0])
          continue search;
        for (var i = 1; i < lines.length - 1; i++)
          if (fold(doc.getLine(line + i)) != lines[i])
            continue search;
        var end = doc.getLine(line + lines.length - 1), endString = fold(end), lastLine = lines[lines.length - 1];
        if (endString.slice(0, lastLine.length) != lastLine)
          continue search;
        return {
          from: Pos(line, adjustPos(orig, string, cutFrom, fold) + ch),
          to: Pos(line + lines.length - 1, adjustPos(end, endString, lastLine.length, fold))
        };
      }
  }
  function searchStringBackward(doc, query, start, caseFold) {
    if (!query.length)
      return null;
    var fold = caseFold ? doFold : noFold;
    var lines = fold(query).split(/\r|\n\r?/);
    search:
      for (var line = start.line, ch = start.ch, first = doc.firstLine() - 1 + lines.length; line >= first; line--, ch = -1) {
        var orig = doc.getLine(line);
        if (ch > -1)
          orig = orig.slice(0, ch);
        var string = fold(orig);
        if (lines.length == 1) {
          var found = string.lastIndexOf(lines[0]);
          if (found == -1)
            continue search;
          return {
            from: Pos(line, adjustPos(orig, string, found, fold)),
            to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold))
          };
        }
        var lastLine = lines[lines.length - 1];
        if (string.slice(0, lastLine.length) != lastLine)
          continue search;
        for (var i = 1, start = line - lines.length + 1; i < lines.length - 1; i++)
          if (fold(doc.getLine(start + i)) != lines[i])
            continue search;
        var top = doc.getLine(line + 1 - lines.length), topString = fold(top);
        if (topString.slice(topString.length - lines[0].length) != lines[0])
          continue search;
        return {
          from: Pos(line + 1 - lines.length, adjustPos(top, topString, top.length - lines[0].length, fold)),
          to: Pos(line, adjustPos(orig, string, lastLine.length, fold))
        };
      }
  }
  function SearchCursor(doc, query, pos, options) {
    this.atOccurrence = false;
    this.doc = doc;
    pos = pos ? doc.clipPos(pos) : Pos(0, 0);
    this.pos = {
      from: pos,
      to: pos
    };
    let caseFold;
    if (typeof options === "object") {
      caseFold = options.caseFold;
    } else {
      caseFold = options;
      options = null;
    }
    if (typeof query === "string") {
      if (caseFold == null)
        caseFold = false;
      this.matches = function(reverse, pos2) {
        return (reverse ? searchStringBackward : searchStringForward)(doc, query, pos2, caseFold);
      };
    } else {
      query = ensureFlags(query, "gm");
      if (!options || options.multiline !== false) {
        this.matches = function(reverse, pos2) {
          return (reverse ? searchRegexpBackwardMultiline : searchRegexpForwardMultiline)(doc, query, pos2);
        };
      } else {
        this.matches = function(reverse, pos2) {
          return (reverse ? searchRegexpBackward : searchRegexpForward)(doc, query, pos2);
        };
      }
      ;
    }
  }
  SearchCursor.prototype = {
    findNext() {
      return this.find(false);
    },
    findPrevious() {
      return this.find(true);
    },
    find(reverse) {
      var result = this.matches(reverse, this.doc.clipPos(reverse ? this.pos.from : this.pos.to));
      while (result && CodeMirror4.cmpPos(result.from, result.to) == 0) {
        if (reverse) {
          if (result.from.ch)
            result.from = Pos(result.from.line, result.from.ch - 1);
          else if (result.from.line == this.doc.firstLine())
            result = null;
          else
            result = this.matches(reverse, this.doc.clipPos(Pos(result.from.line - 1)));
        } else {
          if (result.to.ch < this.doc.getLine(result.to.line).length)
            result.to = Pos(result.to.line, result.to.ch + 1);
          else if (result.to.line == this.doc.lastLine())
            result = null;
          else
            result = this.matches(reverse, Pos(result.to.line + 1, 0));
        }
      }
      if (result) {
        this.pos = result;
        this.atOccurrence = true;
        return this.pos.match || true;
      } else {
        var end = Pos(reverse ? this.doc.firstLine() : this.doc.lastLine() + 1, 0);
        this.pos = {
          from: end,
          to: end
        };
        return this.atOccurrence = false;
      }
    },
    from() {
      if (this.atOccurrence)
        return this.pos.from;
    },
    to() {
      if (this.atOccurrence)
        return this.pos.to;
    },
    replace(newText, origin) {
      if (!this.atOccurrence)
        return;
      var lines = CodeMirror4.splitLines(newText);
      this.doc.replaceRange(lines, this.pos.from, this.pos.to, origin);
      this.pos.to = Pos(this.pos.from.line + lines.length - 1, lines[lines.length - 1].length + (lines.length == 1 ? this.pos.from.ch : 0));
    }
  };
  CodeMirror4.defineExtension("getSearchCursor", function(query, pos, caseFold) {
    return new SearchCursor(this.doc, query, pos, caseFold);
  });
  CodeMirror4.defineDocExtension("getSearchCursor", function(query, pos, caseFold) {
    return new SearchCursor(this, query, pos, caseFold);
  });
  CodeMirror4.defineExtension("selectMatches", function(query, caseFold) {
    let ranges = [];
    let cur = this.getSearchCursor(query, this.getCursor("from"), caseFold);
    while (cur.findNext()) {
      if (CodeMirror4.cmpPos(cur.to(), this.getCursor("to")) > 0)
        break;
      ranges.push({
        anchor: cur.from(),
        head: cur.to()
      });
    }
    if (ranges.length) {
      this.setSelections(ranges, 0);
    }
    ;
  });
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/fold/foldcode.js
function addFoldcode(CodeMirror4) {
  function doFold(cm, pos, options, force) {
    if (options && options.call) {
      var finder = options;
      options = null;
    } else {
      var finder = getOption2(cm, options, "rangeFinder");
    }
    if (typeof pos === "number")
      pos = CodeMirror4.Pos(pos, 0);
    const minSize = getOption2(cm, options, "minFoldSize");
    function getRange(allowFolded) {
      const range2 = finder(cm, pos);
      if (!range2 || range2.to.line - range2.from.line < minSize)
        return null;
      const marks = cm.findMarksAt(range2.from);
      for (let i = 0; i < marks.length; ++i) {
        if (marks[i].__isFold && force !== "fold") {
          if (!allowFolded)
            return null;
          range2.cleared = true;
          marks[i].clear();
        }
      }
      return range2;
    }
    let range = getRange(true);
    if (getOption2(cm, options, "scanUp")) {
      while (!range && pos.line > cm.firstLine()) {
        pos = CodeMirror4.Pos(pos.line - 1, 0);
        range = getRange(false);
      }
    }
    if (!range || range.cleared || force === "unfold")
      return;
    const myWidget = makeWidget(cm, options);
    CodeMirror4.on(myWidget, "mousedown", (e) => {
      myRange.clear();
      CodeMirror4.e_preventDefault(e);
    });
    var myRange = cm.markText(range.from, range.to, {
      replacedWith: myWidget,
      clearOnEnter: getOption2(cm, options, "clearOnEnter"),
      __isFold: true
    });
    myRange.on("clear", (from, to) => {
      CodeMirror4.signal(cm, "unfold", cm, from, to);
    });
    CodeMirror4.signal(cm, "fold", cm, range.from, range.to);
  }
  function makeWidget(cm, options) {
    let widget = getOption2(cm, options, "widget");
    if (typeof widget === "string") {
      const text = document.createTextNode(widget);
      widget = document.createElement("span");
      widget.appendChild(text);
      widget.className = "CodeMirror-foldmarker";
    } else if (widget) {
      widget = widget.cloneNode(true);
    }
    return widget;
  }
  CodeMirror4.newFoldFunction = function(rangeFinder, widget) {
    return function(cm, pos) {
      doFold(cm, pos, {
        rangeFinder,
        widget
      });
    };
  };
  CodeMirror4.defineExtension("foldCode", function(pos, options, force) {
    doFold(this, pos, options, force);
  });
  CodeMirror4.defineExtension("isFolded", function(pos) {
    const marks = this.findMarksAt(pos);
    for (let i = 0; i < marks.length; ++i) {
      if (marks[i].__isFold)
        return true;
    }
  });
  CodeMirror4.commands.toggleFold = function(cm) {
    cm.foldCode(cm.getCursor());
  };
  CodeMirror4.commands.fold = function(cm) {
    cm.foldCode(cm.getCursor(), null, "fold");
  };
  CodeMirror4.commands.unfold = function(cm) {
    cm.foldCode(cm.getCursor(), null, "unfold");
  };
  CodeMirror4.commands.foldAll = function(cm) {
    cm.operation(() => {
      for (let i = cm.firstLine(), e = cm.lastLine(); i <= e; i++) {
        cm.foldCode(CodeMirror4.Pos(i, 0), null, "fold");
      }
    });
  };
  CodeMirror4.commands.unfoldAll = function(cm) {
    cm.operation(() => {
      for (let i = cm.firstLine(), e = cm.lastLine(); i <= e; i++) {
        cm.foldCode(CodeMirror4.Pos(i, 0), null, "unfold");
      }
    });
  };
  CodeMirror4.registerHelper("fold", "combine", function() {
    const funcs = Array.prototype.slice.call(arguments, 0);
    return function(cm, start) {
      for (let i = 0; i < funcs.length; ++i) {
        const found = funcs[i](cm, start);
        if (found)
          return found;
      }
    };
  });
  CodeMirror4.registerHelper("fold", "auto", (cm, start) => {
    const helpers = cm.getHelpers(start, "fold");
    for (let i = 0; i < helpers.length; i++) {
      const cur = helpers[i](cm, start);
      if (cur)
        return cur;
    }
  });
  const defaultOptions = {
    rangeFinder: CodeMirror4.fold.auto,
    widget: "\u2194",
    minFoldSize: 0,
    scanUp: false,
    clearOnEnter: true
  };
  CodeMirror4.defineOption("foldOptions", null);
  function getOption2(cm, options, name) {
    if (options && options[name] !== void 0) {
      return options[name];
    }
    const editorOptions = cm.options.foldOptions;
    if (editorOptions && editorOptions[name] !== void 0) {
      return editorOptions[name];
    }
    return defaultOptions[name];
  }
  CodeMirror4.defineExtension("foldOption", function(options, name) {
    return getOption2(this, options, name);
  });
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/fold/brace-fold.js
function addBracefold(CodeMirror4) {
  CodeMirror4.registerHelper("fold", "brace", (cm, start) => {
    const line = start.line;
    const lineText = cm.getLine(line);
    let tokenType;
    function findOpening(openCh) {
      for (let at = start.ch, pass = 0; ; ) {
        const found = at <= 0 ? -1 : lineText.lastIndexOf(openCh, at - 1);
        if (found == -1) {
          if (pass == 1)
            break;
          pass = 1;
          at = lineText.length;
          continue;
        }
        if (pass == 1 && found < start.ch)
          break;
        tokenType = cm.getTokenTypeAt(CodeMirror4.Pos(line, found + 1));
        if (!/^(comment|string)/.test(tokenType))
          return found + 1;
        at = found - 1;
      }
    }
    let startToken = "{";
    let endToken = "}";
    let startCh = findOpening("{");
    if (startCh == null) {
      startToken = "[", endToken = "]";
      startCh = findOpening("[");
    }
    if (startCh == null)
      return;
    let count = 1;
    const lastLine = cm.lastLine();
    let end;
    let endCh;
    outer:
      for (let i = line; i <= lastLine; ++i) {
        const text = cm.getLine(i);
        let pos = i == line ? startCh : 0;
        for (; ; ) {
          let nextOpen = text.indexOf(startToken, pos);
          let nextClose = text.indexOf(endToken, pos);
          if (nextOpen < 0)
            nextOpen = text.length;
          if (nextClose < 0)
            nextClose = text.length;
          pos = Math.min(nextOpen, nextClose);
          if (pos == text.length)
            break;
          if (cm.getTokenTypeAt(CodeMirror4.Pos(i, pos + 1)) == tokenType) {
            if (pos == nextOpen)
              ++count;
            else if (!--count) {
              end = i;
              endCh = pos;
              break outer;
            }
          }
          ++pos;
        }
      }
    if (end == null || line == end)
      return;
    return {
      from: CodeMirror4.Pos(line, startCh),
      to: CodeMirror4.Pos(end, endCh)
    };
  });
  CodeMirror4.registerHelper("fold", "import", (cm, start) => {
    function hasImport(line) {
      if (line < cm.firstLine() || line > cm.lastLine())
        return null;
      let start2 = cm.getTokenAt(CodeMirror4.Pos(line, 1));
      if (!/\S/.test(start2.string))
        start2 = cm.getTokenAt(CodeMirror4.Pos(line, start2.end + 1));
      if (start2.type != "keyword" || start2.string != "import")
        return null;
      for (let i = line, e = Math.min(cm.lastLine(), line + 10); i <= e; ++i) {
        const text = cm.getLine(i);
        const semi = text.indexOf(";");
        if (semi != -1) {
          return {
            startCh: start2.end,
            end: CodeMirror4.Pos(i, semi)
          };
        }
      }
    }
    const startLine = start.line;
    const has = hasImport(startLine);
    let prev;
    if (!has || hasImport(startLine - 1) || (prev = hasImport(startLine - 2)) && prev.end.line == startLine - 1) {
      return null;
    }
    for (var end = has.end; ; ) {
      const next = hasImport(end.line + 1);
      if (next == null)
        break;
      end = next.end;
    }
    return {
      from: cm.clipPos(CodeMirror4.Pos(startLine, has.startCh + 1)),
      to: end
    };
  });
  CodeMirror4.registerHelper("fold", "include", (cm, start) => {
    function hasInclude(line) {
      if (line < cm.firstLine() || line > cm.lastLine())
        return null;
      let start2 = cm.getTokenAt(CodeMirror4.Pos(line, 1));
      if (!/\S/.test(start2.string))
        start2 = cm.getTokenAt(CodeMirror4.Pos(line, start2.end + 1));
      if (start2.type == "meta" && start2.string.slice(0, 8) == "#include")
        return start2.start + 8;
    }
    const startLine = start.line;
    const has = hasInclude(startLine);
    if (has == null || hasInclude(startLine - 1) != null)
      return null;
    for (var end = startLine; ; ) {
      const next = hasInclude(end + 1);
      if (next == null)
        break;
      ++end;
    }
    return {
      from: CodeMirror4.Pos(startLine, has + 1),
      to: cm.clipPos(CodeMirror4.Pos(end))
    };
  });
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/fold/comment-fold.js
function addCommentfold(CodeMirror4) {
  CodeMirror4.registerGlobalHelper("fold", "comment", (mode) => {
    return mode.blockCommentStart && mode.blockCommentEnd;
  }, (cm, start) => {
    const mode = cm.getModeAt(start);
    const startToken = mode.blockCommentStart;
    const endToken = mode.blockCommentEnd;
    if (!startToken || !endToken)
      return;
    const line = start.line;
    const lineText = cm.getLine(line);
    let startCh;
    for (let at = start.ch, pass = 0; ; ) {
      const found = at <= 0 ? -1 : lineText.lastIndexOf(startToken, at - 1);
      if (found == -1) {
        if (pass == 1)
          return;
        pass = 1;
        at = lineText.length;
        continue;
      }
      if (pass == 1 && found < start.ch)
        return;
      if (/comment/.test(cm.getTokenTypeAt(CodeMirror4.Pos(line, found + 1))) && (found == 0 || lineText.slice(found - endToken.length, found) == endToken || !/comment/.test(cm.getTokenTypeAt(CodeMirror4.Pos(line, found))))) {
        startCh = found + startToken.length;
        break;
      }
      at = found - 1;
    }
    let depth = 1;
    const lastLine = cm.lastLine();
    let end;
    let endCh;
    outer:
      for (let i = line; i <= lastLine; ++i) {
        const text = cm.getLine(i);
        let pos = i == line ? startCh : 0;
        for (; ; ) {
          let nextOpen = text.indexOf(startToken, pos);
          let nextClose = text.indexOf(endToken, pos);
          if (nextOpen < 0)
            nextOpen = text.length;
          if (nextClose < 0)
            nextClose = text.length;
          pos = Math.min(nextOpen, nextClose);
          if (pos == text.length)
            break;
          if (pos == nextOpen)
            ++depth;
          else if (!--depth) {
            end = i;
            endCh = pos;
            break outer;
          }
          ++pos;
        }
      }
    if (end == null || line == end && endCh == startCh)
      return;
    return {
      from: CodeMirror4.Pos(line, startCh),
      to: CodeMirror4.Pos(end, endCh)
    };
  });
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/fold/foldgutter.js
function addFoldgutter(CodeMirror4) {
  CodeMirror4.defineOption("foldGutter", false, (cm, val, old) => {
    if (old && old != CodeMirror4.Init) {
      cm.clearGutter(cm.state.foldGutter.options.gutter);
      cm.state.foldGutter = null;
      cm.off("gutterClick", onGutterClick);
      cm.off("change", onChange);
      cm.off("viewportChange", onViewportChange);
      cm.off("fold", onFold);
      cm.off("unfold", onFold);
      cm.off("swapDoc", onChange);
    }
    if (val) {
      cm.state.foldGutter = new State(parseOptions(val));
      updateInViewport(cm);
      cm.on("gutterClick", onGutterClick);
      cm.on("change", onChange);
      cm.on("viewportChange", onViewportChange);
      cm.on("fold", onFold);
      cm.on("unfold", onFold);
      cm.on("swapDoc", onChange);
    }
  });
  const Pos = CodeMirror4.Pos;
  function State(options) {
    this.options = options;
    this.from = this.to = 0;
  }
  function parseOptions(opts) {
    if (opts === true)
      opts = {};
    if (opts.gutter == null)
      opts.gutter = "CodeMirror-foldgutter";
    if (opts.indicatorOpen == null)
      opts.indicatorOpen = "CodeMirror-foldgutter-open";
    if (opts.indicatorFolded == null)
      opts.indicatorFolded = "CodeMirror-foldgutter-folded";
    return opts;
  }
  function isFolded(cm, line) {
    const marks = cm.findMarks(Pos(line, 0), Pos(line + 1, 0));
    for (let i = 0; i < marks.length; ++i) {
      if (marks[i].__isFold) {
        const fromPos = marks[i].find(-1);
        if (fromPos && fromPos.line === line) {
          return marks[i];
        }
      }
    }
  }
  function marker(spec) {
    if (typeof spec === "string") {
      const elt = document.createElement("div");
      elt.className = spec + " CodeMirror-guttermarker-subtle";
      return elt;
    }
    return spec.cloneNode(true);
  }
  function updateFoldInfo(cm, from, to) {
    const opts = cm.state.foldGutter.options;
    let cur = from;
    const minSize = cm.foldOption(opts, "minFoldSize");
    const func = cm.foldOption(opts, "rangeFinder");
    cm.eachLine(from, to, (line) => {
      let mark = null;
      if (isFolded(cm, cur)) {
        mark = marker(opts.indicatorFolded);
      } else {
        const pos = Pos(cur, 0);
        const range = func && func(cm, pos);
        if (range && range.to.line - range.from.line >= minSize) {
          mark = marker(opts.indicatorOpen);
        }
      }
      cm.setGutterMarker(line, opts.gutter, mark);
      ++cur;
    });
  }
  function updateInViewport(cm) {
    const vp = cm.getViewport();
    const state = cm.state.foldGutter;
    if (!state)
      return;
    cm.operation(() => {
      updateFoldInfo(cm, vp.from, vp.to);
    });
    state.from = vp.from;
    state.to = vp.to;
  }
  function onGutterClick(cm, line, gutter) {
    const state = cm.state.foldGutter;
    if (!state)
      return;
    const opts = state.options;
    if (gutter != opts.gutter)
      return;
    const folded = isFolded(cm, line);
    if (folded)
      folded.clear();
    else
      cm.foldCode(Pos(line, 0), opts);
  }
  function onChange(cm) {
    const state = cm.state.foldGutter;
    if (!state)
      return;
    const opts = state.options;
    state.from = state.to = 0;
    clearTimeout(state.changeUpdate);
    state.changeUpdate = setTimeout(() => {
      updateInViewport(cm);
    }, opts.foldOnChangeTimeSpan || 600);
  }
  function onViewportChange(cm) {
    const state = cm.state.foldGutter;
    if (!state)
      return;
    const opts = state.options;
    clearTimeout(state.changeUpdate);
    state.changeUpdate = setTimeout(() => {
      const vp = cm.getViewport();
      if (state.from == state.to || vp.from - state.to > 20 || state.from - vp.to > 20) {
        updateInViewport(cm);
      } else {
        cm.operation(() => {
          if (vp.from < state.from) {
            updateFoldInfo(cm, vp.from, state.from);
            state.from = vp.from;
          }
          if (vp.to > state.to) {
            updateFoldInfo(cm, state.to, vp.to);
            state.to = vp.to;
          }
        });
      }
    }, opts.updateViewportTimeSpan || 400);
  }
  function onFold(cm, from) {
    const state = cm.state.foldGutter;
    if (!state)
      return;
    const line = from.line;
    if (line >= state.from && line < state.to) {
      updateFoldInfo(cm, line, line + 1);
    }
  }
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/fold/indent-fold.js
function addIndentfold(CodeMirror4) {
  function lineIndent(cm, lineNo) {
    const text = cm.getLine(lineNo);
    const spaceTo = text.search(/\S/);
    if (spaceTo == -1 || /\bcomment\b/.test(cm.getTokenTypeAt(CodeMirror4.Pos(lineNo, spaceTo + 1)))) {
      return -1;
    }
    return CodeMirror4.countColumn(text, null, cm.getOption("tabSize"));
  }
  CodeMirror4.registerHelper("fold", "indent", (cm, start) => {
    const myIndent = lineIndent(cm, start.line);
    if (myIndent < 0)
      return;
    let lastLineInFold = null;
    for (let i = start.line + 1, end = cm.lastLine(); i <= end; ++i) {
      const indent = lineIndent(cm, i);
      if (indent == -1) {
      } else if (indent > myIndent) {
        lastLineInFold = i;
      } else {
        break;
      }
    }
    if (lastLineInFold) {
      return {
        from: CodeMirror4.Pos(start.line, cm.getLine(start.line).length),
        to: CodeMirror4.Pos(lastLineInFold, cm.getLine(lastLineInFold).length)
      };
    }
  });
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/fold/xml-fold.js
function addXmlfold(CodeMirror4) {
  const Pos = CodeMirror4.Pos;
  function cmp(a, b) {
    return a.line - b.line || a.ch - b.ch;
  }
  const nameStartChar = "A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD";
  const nameChar = nameStartChar + "-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040";
  const xmlTagStart = new RegExp("<(/?)([" + nameStartChar + "][" + nameChar + "]*)", "g");
  function Iter(cm, line, ch, range) {
    this.line = line;
    this.ch = ch;
    this.cm = cm;
    this.text = cm.getLine(line);
    this.min = range ? Math.max(range.from, cm.firstLine()) : cm.firstLine();
    this.max = range ? Math.min(range.to - 1, cm.lastLine()) : cm.lastLine();
  }
  function tagAt(iter, ch) {
    const type = iter.cm.getTokenTypeAt(Pos(iter.line, ch));
    return type && /\btag\b/.test(type);
  }
  function nextLine(iter) {
    if (iter.line >= iter.max)
      return;
    iter.ch = 0;
    iter.text = iter.cm.getLine(++iter.line);
    return true;
  }
  function prevLine(iter) {
    if (iter.line <= iter.min)
      return;
    iter.text = iter.cm.getLine(--iter.line);
    iter.ch = iter.text.length;
    return true;
  }
  function toTagEnd(iter) {
    for (; ; ) {
      const gt = iter.text.indexOf(">", iter.ch);
      if (gt == -1) {
        if (nextLine(iter))
          continue;
        else
          return;
      }
      if (!tagAt(iter, gt + 1)) {
        iter.ch = gt + 1;
        continue;
      }
      const lastSlash = iter.text.lastIndexOf("/", gt);
      const selfClose = lastSlash > -1 && !/\S/.test(iter.text.slice(lastSlash + 1, gt));
      iter.ch = gt + 1;
      return selfClose ? "selfClose" : "regular";
    }
  }
  function toTagStart(iter) {
    for (; ; ) {
      const lt = iter.ch ? iter.text.lastIndexOf("<", iter.ch - 1) : -1;
      if (lt == -1) {
        if (prevLine(iter))
          continue;
        else
          return;
      }
      if (!tagAt(iter, lt + 1)) {
        iter.ch = lt;
        continue;
      }
      xmlTagStart.lastIndex = lt;
      iter.ch = lt;
      const match = xmlTagStart.exec(iter.text);
      if (match && match.index == lt)
        return match;
    }
  }
  function toNextTag(iter) {
    for (; ; ) {
      xmlTagStart.lastIndex = iter.ch;
      const found = xmlTagStart.exec(iter.text);
      if (!found) {
        if (nextLine(iter))
          continue;
        else
          return;
      }
      if (!tagAt(iter, found.index + 1)) {
        iter.ch = found.index + 1;
        continue;
      }
      iter.ch = found.index + found[0].length;
      return found;
    }
  }
  function toPrevTag(iter) {
    for (; ; ) {
      const gt = iter.ch ? iter.text.lastIndexOf(">", iter.ch - 1) : -1;
      if (gt == -1) {
        if (prevLine(iter))
          continue;
        else
          return;
      }
      if (!tagAt(iter, gt + 1)) {
        iter.ch = gt;
        continue;
      }
      const lastSlash = iter.text.lastIndexOf("/", gt);
      const selfClose = lastSlash > -1 && !/\S/.test(iter.text.slice(lastSlash + 1, gt));
      iter.ch = gt + 1;
      return selfClose ? "selfClose" : "regular";
    }
  }
  function findMatchingClose(iter, tag) {
    const stack = [];
    for (; ; ) {
      const next = toNextTag(iter);
      var end;
      const startLine = iter.line;
      const startCh = iter.ch - (next ? next[0].length : 0);
      if (!next || !(end = toTagEnd(iter)))
        return;
      if (end == "selfClose")
        continue;
      if (next[1]) {
        for (var i = stack.length - 1; i >= 0; --i) {
          if (stack[i] == next[2]) {
            stack.length = i;
            break;
          }
        }
        if (i < 0 && (!tag || tag == next[2])) {
          return {
            tag: next[2],
            from: Pos(startLine, startCh),
            to: Pos(iter.line, iter.ch)
          };
        }
      } else {
        stack.push(next[2]);
      }
    }
  }
  function findMatchingOpen(iter, tag) {
    const stack = [];
    for (; ; ) {
      const prev = toPrevTag(iter);
      if (!prev)
        return;
      if (prev == "selfClose") {
        toTagStart(iter);
        continue;
      }
      const endLine = iter.line;
      const endCh = iter.ch;
      const start = toTagStart(iter);
      if (!start)
        return;
      if (start[1]) {
        stack.push(start[2]);
      } else {
        for (var i = stack.length - 1; i >= 0; --i) {
          if (stack[i] == start[2]) {
            stack.length = i;
            break;
          }
        }
        if (i < 0 && (!tag || tag == start[2])) {
          return {
            tag: start[2],
            from: Pos(iter.line, iter.ch),
            to: Pos(endLine, endCh)
          };
        }
      }
    }
  }
  CodeMirror4.registerHelper("fold", "xml", (cm, start) => {
    const iter = new Iter(cm, start.line, 0);
    for (; ; ) {
      const openTag = toNextTag(iter);
      if (!openTag || iter.line != start.line)
        return;
      const end = toTagEnd(iter);
      if (!end)
        return;
      if (!openTag[1] && end != "selfClose") {
        const startPos = Pos(iter.line, iter.ch);
        const endPos = findMatchingClose(iter, openTag[2]);
        return endPos && cmp(endPos.from, startPos) > 0 ? {
          from: startPos,
          to: endPos.from
        } : null;
      }
    }
  });
  CodeMirror4.findMatchingTag = function(cm, pos, range) {
    let iter = new Iter(cm, pos.line, pos.ch, range);
    if (iter.text.indexOf(">") == -1 && iter.text.indexOf("<") == -1)
      return;
    const end = toTagEnd(iter);
    const to = end && Pos(iter.line, iter.ch);
    const start = end && toTagStart(iter);
    if (!end || !start || cmp(iter, pos) > 0)
      return;
    const here = {
      from: Pos(iter.line, iter.ch),
      to,
      tag: start[2]
    };
    if (end == "selfClose") {
      return {
        open: here,
        close: null,
        at: "open"
      };
    }
    if (start[1]) {
      return {
        open: findMatchingOpen(iter, start[2]),
        close: here,
        at: "close"
      };
    }
    iter = new Iter(cm, to.line, to.ch, range);
    return {
      open: here,
      close: findMatchingClose(iter, start[2]),
      at: "open"
    };
  };
  CodeMirror4.findEnclosingTag = function(cm, pos, range, tag) {
    const iter = new Iter(cm, pos.line, pos.ch, range);
    for (; ; ) {
      const open2 = findMatchingOpen(iter, tag);
      if (!open2)
        break;
      const forward = new Iter(cm, pos.line, pos.ch, range);
      const close = findMatchingClose(forward, open2.tag);
      if (close) {
        return {
          open: open2,
          close
        };
      }
    }
  };
  CodeMirror4.scanForClosingTag = function(cm, pos, name, end) {
    const iter = new Iter(cm, pos.line, pos.ch, end ? {
      from: 0,
      to: end
    } : null);
    return findMatchingClose(iter, name);
  };
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/edit/closebrackets.js
function addClosebrackets(CodeMirror4) {
  const defaults = {
    pairs: `()[]{}''""`,
    closeBefore: `)]}'":;>`,
    triples: "",
    explode: "[]{}"
  };
  const Pos = CodeMirror4.Pos;
  CodeMirror4.defineOption("autoCloseBrackets", false, (cm, val, old) => {
    if (old && old != CodeMirror4.Init) {
      cm.removeKeyMap(keyMap);
      cm.state.closeBrackets = null;
    }
    if (val) {
      ensureBound(getOption2(val, "pairs"));
      cm.state.closeBrackets = val;
      cm.addKeyMap(keyMap);
    }
  });
  function getOption2(conf, name) {
    if (name == "pairs" && typeof conf === "string")
      return conf;
    if (typeof conf === "object" && conf[name] != null)
      return conf[name];
    return defaults[name];
  }
  var keyMap = {
    Backspace: handleBackspace,
    Enter: handleEnter
  };
  function ensureBound(chars) {
    for (let i = 0; i < chars.length; i++) {
      const ch = chars.charAt(i);
      const key = "'" + ch + "'";
      if (!keyMap[key])
        keyMap[key] = handler(ch);
    }
  }
  ensureBound(defaults.pairs + "`");
  function handler(ch) {
    return function(cm) {
      return handleChar(cm, ch);
    };
  }
  function getConfig(cm) {
    const deflt = cm.state.closeBrackets;
    if (!deflt || deflt.override)
      return deflt;
    const mode = cm.getModeAt(cm.getCursor());
    return mode.closeBrackets || deflt;
  }
  function handleBackspace(cm) {
    const conf = getConfig(cm);
    if (!conf || cm.getOption("disableInput"))
      return CodeMirror4.Pass;
    const pairs = getOption2(conf, "pairs");
    const ranges = cm.listSelections();
    for (var i = 0; i < ranges.length; i++) {
      if (!ranges[i].empty())
        return CodeMirror4.Pass;
      const around = charsAround(cm, ranges[i].head);
      if (!around || pairs.indexOf(around) % 2 != 0)
        return CodeMirror4.Pass;
    }
    for (var i = ranges.length - 1; i >= 0; i--) {
      const cur = ranges[i].head;
      cm.replaceRange("", Pos(cur.line, cur.ch - 1), Pos(cur.line, cur.ch + 1), "+delete");
    }
  }
  function handleEnter(cm) {
    const conf = getConfig(cm);
    const explode = conf && getOption2(conf, "explode");
    if (!explode || cm.getOption("disableInput"))
      return CodeMirror4.Pass;
    let ranges = cm.listSelections();
    for (let i = 0; i < ranges.length; i++) {
      if (!ranges[i].empty())
        return CodeMirror4.Pass;
      const around = charsAround(cm, ranges[i].head);
      if (!around || explode.indexOf(around) % 2 != 0)
        return CodeMirror4.Pass;
    }
    cm.operation(() => {
      const linesep = cm.lineSeparator() || "\n";
      cm.replaceSelection(linesep + linesep, null);
      cm.execCommand("goCharLeft");
      ranges = cm.listSelections();
      for (let i = 0; i < ranges.length; i++) {
        const line = ranges[i].head.line;
        cm.indentLine(line, null, true);
        cm.indentLine(line + 1, null, true);
      }
    });
  }
  function contractSelection(sel) {
    const inverted = CodeMirror4.cmpPos(sel.anchor, sel.head) > 0;
    return {
      anchor: new Pos(sel.anchor.line, sel.anchor.ch + (inverted ? -1 : 1)),
      head: new Pos(sel.head.line, sel.head.ch + (inverted ? 1 : -1))
    };
  }
  function handleChar(cm, ch) {
    const conf = getConfig(cm);
    if (!conf || cm.getOption("disableInput"))
      return CodeMirror4.Pass;
    const pairs = getOption2(conf, "pairs");
    const pos = pairs.indexOf(ch);
    if (pos == -1)
      return CodeMirror4.Pass;
    const closeBefore = getOption2(conf, "closeBefore");
    const triples = getOption2(conf, "triples");
    const identical = pairs.charAt(pos + 1) == ch;
    const ranges = cm.listSelections();
    const opening = pos % 2 == 0;
    let type;
    for (let i = 0; i < ranges.length; i++) {
      const range = ranges[i];
      const cur = range.head;
      var curType;
      const next = cm.getRange(cur, Pos(cur.line, cur.ch + 1));
      if (opening && !range.empty()) {
        curType = "surround";
      } else if ((identical || !opening) && next == ch) {
        if (identical && stringStartsAfter(cm, cur)) {
          curType = "both";
        } else if (triples.indexOf(ch) >= 0 && cm.getRange(cur, Pos(cur.line, cur.ch + 3)) == ch + ch + ch) {
          curType = "skipThree";
        } else {
          curType = "skip";
        }
      } else if (identical && cur.ch > 1 && triples.indexOf(ch) >= 0 && cm.getRange(Pos(cur.line, cur.ch - 2), cur) == ch + ch) {
        if (cur.ch > 2 && /\bstring/.test(cm.getTokenTypeAt(Pos(cur.line, cur.ch - 2))))
          return CodeMirror4.Pass;
        curType = "addFour";
      } else if (identical) {
        const prev = cur.ch == 0 ? " " : cm.getRange(Pos(cur.line, cur.ch - 1), cur);
        if (!CodeMirror4.isWordChar(next) && prev != ch && !CodeMirror4.isWordChar(prev))
          curType = "both";
        else
          return CodeMirror4.Pass;
      } else if (opening && (next.length === 0 || /\s/.test(next) || closeBefore.indexOf(next) > -1)) {
        curType = "both";
      } else {
        return CodeMirror4.Pass;
      }
      if (!type)
        type = curType;
      else if (type != curType)
        return CodeMirror4.Pass;
    }
    const left = pos % 2 ? pairs.charAt(pos - 1) : ch;
    const right = pos % 2 ? ch : pairs.charAt(pos + 1);
    cm.operation(() => {
      if (type == "skip") {
        cm.execCommand("goCharRight");
      } else if (type == "skipThree") {
        for (var i = 0; i < 3; i++) {
          cm.execCommand("goCharRight");
        }
      } else if (type == "surround") {
        let sels = cm.getSelections();
        for (var i = 0; i < sels.length; i++) {
          sels[i] = left + sels[i] + right;
        }
        cm.replaceSelections(sels, "around");
        sels = cm.listSelections().slice();
        for (var i = 0; i < sels.length; i++) {
          sels[i] = contractSelection(sels[i]);
        }
        cm.setSelections(sels);
      } else if (type == "both") {
        cm.replaceSelection(left + right, null);
        cm.triggerElectric(left + right);
        cm.execCommand("goCharLeft");
      } else if (type == "addFour") {
        cm.replaceSelection(left + left + left + left, "before");
        cm.execCommand("goCharRight");
      }
    });
  }
  function charsAround(cm, pos) {
    const str = cm.getRange(Pos(pos.line, pos.ch - 1), Pos(pos.line, pos.ch + 1));
    return str.length == 2 ? str : null;
  }
  function stringStartsAfter(cm, pos) {
    const token = cm.getTokenAt(Pos(pos.line, pos.ch + 1));
    return /\bstring/.test(token.type) && token.start == pos.ch && (pos.ch == 0 || !/\bstring/.test(cm.getTokenTypeAt(pos)));
  }
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/edit/closetag.js
function addClosetag(CodeMirror4) {
  CodeMirror4.defineOption("autoCloseTags", false, (cm, val, old) => {
    if (old != CodeMirror4.Init && old) {
      cm.removeKeyMap("autoCloseTags");
    }
    if (!val)
      return;
    const map = {
      name: "autoCloseTags"
    };
    if (typeof val !== "object" || val.whenClosing) {
      map["'/'"] = function(cm2) {
        return autoCloseSlash(cm2);
      };
    }
    if (typeof val !== "object" || val.whenOpening) {
      map["'>'"] = function(cm2) {
        return autoCloseGT(cm2);
      };
    }
    cm.addKeyMap(map);
  });
  const htmlDontClose = [
    "area",
    "base",
    "br",
    "col",
    "command",
    "embed",
    "hr",
    "img",
    "input",
    "keygen",
    "link",
    "meta",
    "param",
    "source",
    "track",
    "wbr"
  ];
  const htmlIndent = [
    "applet",
    "blockquote",
    "body",
    "button",
    "div",
    "dl",
    "fieldset",
    "form",
    "frameset",
    "h1",
    "h2",
    "h3",
    "h4",
    "h5",
    "h6",
    "head",
    "html",
    "iframe",
    "layer",
    "legend",
    "object",
    "ol",
    "p",
    "select",
    "table",
    "ul"
  ];
  function autoCloseGT(cm) {
    if (cm.getOption("disableInput"))
      return CodeMirror4.Pass;
    const ranges = cm.listSelections();
    const replacements = [];
    const opt = cm.getOption("autoCloseTags");
    for (var i = 0; i < ranges.length; i++) {
      if (!ranges[i].empty())
        return CodeMirror4.Pass;
      const pos = ranges[i].head;
      const tok = cm.getTokenAt(pos);
      const inner = CodeMirror4.innerMode(cm.getMode(), tok.state);
      const state = inner.state;
      if (inner.mode.name != "xml" || !state.tagName)
        return CodeMirror4.Pass;
      const html = inner.mode.configuration == "html";
      const dontCloseTags = typeof opt === "object" && opt.dontCloseTags || html && htmlDontClose;
      const indentTags = typeof opt === "object" && opt.indentTags || html && htmlIndent;
      let tagName = state.tagName;
      if (tok.end > pos.ch)
        tagName = tagName.slice(0, tagName.length - tok.end + pos.ch);
      const lowerTagName = tagName.toLowerCase();
      if (!tagName || tok.type == "string" && (tok.end != pos.ch || !/[\"\']/.test(tok.string.charAt(tok.string.length - 1)) || tok.string.length == 1) || tok.type == "tag" && state.type == "closeTag" || tok.string.indexOf("/") == tok.string.length - 1 || dontCloseTags && indexOf(dontCloseTags, lowerTagName) > -1 || closingTagExists(cm, tagName, pos, state, true)) {
        return CodeMirror4.Pass;
      }
      const emptyTags = typeof opt === "object" && opt.emptyTags;
      if (emptyTags && indexOf(emptyTags, tagName) > -1) {
        replacements[i] = {
          text: "/>",
          newPos: CodeMirror4.Pos(pos.line, pos.ch + 2)
        };
        continue;
      }
      const indent = indentTags && indexOf(indentTags, lowerTagName) > -1;
      replacements[i] = {
        indent,
        text: ">" + (indent ? "\n\n" : "") + "</" + tagName + ">",
        newPos: indent ? CodeMirror4.Pos(pos.line + 1, 0) : CodeMirror4.Pos(pos.line, pos.ch + 1)
      };
    }
    const dontIndentOnAutoClose = typeof opt === "object" && opt.dontIndentOnAutoClose;
    for (var i = ranges.length - 1; i >= 0; i--) {
      const info = replacements[i];
      cm.replaceRange(info.text, ranges[i].head, ranges[i].anchor, "+insert");
      const sel = cm.listSelections().slice(0);
      sel[i] = {
        head: info.newPos,
        anchor: info.newPos
      };
      cm.setSelections(sel);
      if (!dontIndentOnAutoClose && info.indent) {
        cm.indentLine(info.newPos.line, null, true);
        cm.indentLine(info.newPos.line + 1, null, true);
      }
    }
  }
  function autoCloseCurrent(cm, typingSlash) {
    let ranges = cm.listSelections();
    const replacements = [];
    const head = typingSlash ? "/" : "</";
    const opt = cm.getOption("autoCloseTags");
    const dontIndentOnAutoClose = typeof opt === "object" && opt.dontIndentOnSlash;
    for (var i = 0; i < ranges.length; i++) {
      if (!ranges[i].empty())
        return CodeMirror4.Pass;
      const pos = ranges[i].head;
      const tok = cm.getTokenAt(pos);
      const inner = CodeMirror4.innerMode(cm.getMode(), tok.state);
      const state = inner.state;
      if (typingSlash && (tok.type == "string" || tok.string.charAt(0) != "<" || tok.start != pos.ch - 1)) {
        return CodeMirror4.Pass;
      }
      var replacement;
      if (inner.mode.name != "xml") {
        if (cm.getMode().name == "htmlmixed" && inner.mode.name == "javascript") {
          replacement = head + "script";
        } else if (cm.getMode().name == "htmlmixed" && inner.mode.name == "css") {
          replacement = head + "style";
        } else {
          return CodeMirror4.Pass;
        }
      } else {
        if (!state.context || !state.context.tagName || closingTagExists(cm, state.context.tagName, pos, state)) {
          return CodeMirror4.Pass;
        }
        replacement = head + state.context.tagName;
      }
      if (cm.getLine(pos.line).charAt(tok.end) != ">")
        replacement += ">";
      replacements[i] = replacement;
    }
    cm.replaceSelections(replacements);
    ranges = cm.listSelections();
    if (!dontIndentOnAutoClose) {
      for (var i = 0; i < ranges.length; i++) {
        if (i == ranges.length - 1 || ranges[i].head.line < ranges[i + 1].head.line) {
          cm.indentLine(ranges[i].head.line);
        }
      }
    }
  }
  function autoCloseSlash(cm) {
    if (cm.getOption("disableInput"))
      return CodeMirror4.Pass;
    return autoCloseCurrent(cm, true);
  }
  CodeMirror4.commands.closeTag = function(cm) {
    return autoCloseCurrent(cm);
  };
  function indexOf(collection, elt) {
    if (collection.indexOf)
      return collection.indexOf(elt);
    for (let i = 0, e = collection.length; i < e; ++i) {
      if (collection[i] == elt)
        return i;
    }
    return -1;
  }
  function closingTagExists(cm, tagName, pos, state, newTag) {
    if (!CodeMirror4.scanForClosingTag)
      return false;
    const end = Math.min(cm.lastLine() + 1, pos.line + 500);
    const nextClose = CodeMirror4.scanForClosingTag(cm, pos, null, end);
    if (!nextClose || nextClose.tag != tagName)
      return false;
    let cx = state.context;
    for (var onCx = newTag ? 1 : 0; cx && cx.tagName == tagName; cx = cx.prev)
      ++onCx;
    pos = nextClose.to;
    for (let i = 1; i < onCx; i++) {
      const next = CodeMirror4.scanForClosingTag(cm, pos, null, end);
      if (!next || next.tag != tagName)
        return false;
      pos = next.to;
    }
    return true;
  }
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/hint/show-hint.js
function addShowhint(CodeMirror4) {
  const HINT_ELEMENT_CLASS = "CodeMirror-hint";
  const ACTIVE_HINT_ELEMENT_CLASS = "CodeMirror-hint-active";
  CodeMirror4.showHint = function(cm, getHints, options) {
    if (!getHints)
      return cm.showHint(options);
    if (options && options.async)
      getHints.async = true;
    const newOpts = {
      hint: getHints
    };
    if (options) {
      for (const prop in options)
        newOpts[prop] = options[prop];
    }
    return cm.showHint(newOpts);
  };
  CodeMirror4.defineExtension("showHint", function(options) {
    options = parseOptions(this, this.getCursor("start"), options);
    const selections = this.listSelections();
    if (selections.length > 1)
      return;
    if (this.somethingSelected()) {
      if (!options.hint.supportsSelection)
        return;
      for (let i = 0; i < selections.length; i++) {
        if (selections[i].head.line != selections[i].anchor.line)
          return;
      }
    }
    if (this.state.completionActive)
      this.state.completionActive.close();
    const completion = this.state.completionActive = new Completion(this, options);
    if (!completion.options.hint)
      return;
    CodeMirror4.signal(this, "startCompletion", this);
    completion.update(true);
  });
  CodeMirror4.defineExtension("closeHint", function() {
    if (this.state.completionActive)
      this.state.completionActive.close();
  });
  function Completion(cm, options) {
    this.cm = cm;
    this.options = options;
    this.widget = null;
    this.debounce = 0;
    this.tick = 0;
    this.startPos = this.cm.getCursor("start");
    this.startLen = this.cm.getLine(this.startPos.line).length - this.cm.getSelection().length;
    const self2 = this;
    cm.on("cursorActivity", this.activityFunc = function() {
      self2.cursorActivity();
    });
  }
  const requestAnimationFrame = window.requestAnimationFrame || function(fn) {
    return setTimeout(fn, 1e3 / 60);
  };
  const cancelAnimationFrame = window.cancelAnimationFrame || clearTimeout;
  Completion.prototype = {
    close() {
      if (!this.active())
        return;
      this.cm.state.completionActive = null;
      this.tick = null;
      this.cm.off("cursorActivity", this.activityFunc);
      if (this.widget && this.data)
        CodeMirror4.signal(this.data, "close");
      if (this.widget)
        this.widget.close();
      CodeMirror4.signal(this.cm, "endCompletion", this.cm);
    },
    active() {
      return this.cm.state.completionActive == this;
    },
    pick(data, i) {
      const completion = data.list[i];
      if (completion.hint)
        completion.hint(this.cm, data, completion);
      else {
        this.cm.replaceRange(getText(completion), completion.from || data.from, completion.to || data.to, "complete");
      }
      CodeMirror4.signal(data, "pick", completion);
      this.close();
    },
    cursorActivity() {
      if (this.debounce) {
        cancelAnimationFrame(this.debounce);
        this.debounce = 0;
      }
      const pos = this.cm.getCursor();
      const line = this.cm.getLine(pos.line);
      if (pos.line != this.startPos.line || line.length - pos.ch != this.startLen - this.startPos.ch || pos.ch < this.startPos.ch || this.cm.somethingSelected() || (!pos.ch || this.options.closeCharacters.test(line.charAt(pos.ch - 1)))) {
        this.close();
      } else {
        const self2 = this;
        this.debounce = requestAnimationFrame(() => {
          self2.update();
        });
        if (this.widget)
          this.widget.disable();
      }
    },
    update(first) {
      if (this.tick == null)
        return;
      const self2 = this;
      const myTick = ++this.tick;
      fetchHints(this.options.hint, this.cm, this.options, (data) => {
        if (self2.tick == myTick)
          self2.finishUpdate(data, first);
      });
    },
    finishUpdate(data, first) {
      if (this.data)
        CodeMirror4.signal(this.data, "update");
      const picked = this.widget && this.widget.picked || first && this.options.completeSingle;
      if (this.widget)
        this.widget.close();
      this.data = data;
      if (data && data.list.length) {
        if (picked && data.list.length == 1) {
          this.pick(data, 0);
        } else {
          this.widget = new Widget(this, data);
          CodeMirror4.signal(data, "shown");
        }
      }
    }
  };
  function parseOptions(cm, pos, options) {
    const editor = cm.options.hintOptions;
    const out = {};
    for (var prop in defaultOptions)
      out[prop] = defaultOptions[prop];
    if (editor) {
      for (var prop in editor) {
        if (editor[prop] !== void 0)
          out[prop] = editor[prop];
      }
    }
    if (options) {
      for (var prop in options) {
        if (options[prop] !== void 0)
          out[prop] = options[prop];
      }
    }
    if (out.hint.resolve)
      out.hint = out.hint.resolve(cm, pos);
    return out;
  }
  function getText(completion) {
    if (typeof completion === "string")
      return completion;
    return completion.text;
  }
  function buildKeyMap(completion, handle) {
    const baseMap = {
      Up() {
        handle.moveFocus(-1);
      },
      Down() {
        handle.moveFocus(1);
      },
      PageUp() {
        handle.moveFocus(-handle.menuSize() + 1, true);
      },
      PageDown() {
        handle.moveFocus(handle.menuSize() - 1, true);
      },
      Home() {
        handle.setFocus(0);
      },
      End() {
        handle.setFocus(handle.length - 1);
      },
      Enter: handle.pick,
      Tab: handle.pick,
      Esc: handle.close
    };
    const mac = /Mac/.test(navigator.platform);
    if (mac) {
      baseMap["Ctrl-P"] = function() {
        handle.moveFocus(-1);
      };
      baseMap["Ctrl-N"] = function() {
        handle.moveFocus(1);
      };
    }
    const custom = completion.options.customKeys;
    const ourMap = custom ? {} : baseMap;
    function addBinding(key2, val) {
      let bound;
      if (typeof val !== "string") {
        bound = function(cm) {
          return val(cm, handle);
        };
      } else if (baseMap.hasOwnProperty(val)) {
        bound = baseMap[val];
      } else {
        bound = val;
      }
      ourMap[key2] = bound;
    }
    if (custom) {
      for (var key in custom) {
        if (custom.hasOwnProperty(key)) {
          addBinding(key, custom[key]);
        }
      }
    }
    const extra = completion.options.extraKeys;
    if (extra) {
      for (var key in extra) {
        if (extra.hasOwnProperty(key)) {
          addBinding(key, extra[key]);
        }
      }
    }
    return ourMap;
  }
  function getHintElement(hintsElement, el) {
    while (el && el != hintsElement) {
      if (el.nodeName.toUpperCase() === "LI" && el.parentNode == hintsElement)
        return el;
      el = el.parentNode;
    }
  }
  function Widget(completion, data) {
    this.completion = completion;
    this.data = data;
    this.picked = false;
    const widget = this;
    const cm = completion.cm;
    const ownerDocument = cm.getInputField().ownerDocument;
    const parentWindow = ownerDocument.defaultView || ownerDocument.parentWindow;
    const hints = this.hints = ownerDocument.createElement("ul");
    const theme = completion.cm.options.theme;
    hints.className = "CodeMirror-hints " + theme;
    this.selectedHint = data.selectedHint || 0;
    const completions = data.list;
    for (let i = 0; i < completions.length; ++i) {
      const elt = hints.appendChild(ownerDocument.createElement("li"));
      const cur = completions[i];
      let className = HINT_ELEMENT_CLASS + (i != this.selectedHint ? "" : " " + ACTIVE_HINT_ELEMENT_CLASS);
      if (cur.className != null)
        className = cur.className + " " + className;
      elt.className = className;
      if (cur.render)
        cur.render(elt, data, cur);
      else
        elt.appendChild(ownerDocument.createTextNode(cur.displayText || getText(cur)));
      elt.hintId = i;
    }
    const container = completion.options.container || ownerDocument.body;
    let pos = cm.cursorCoords(completion.options.alignWithWord ? data.from : null);
    let left = pos.left;
    let top = pos.bottom;
    let below = true;
    let offsetLeft = 0;
    let offsetTop = 0;
    if (container !== ownerDocument.body) {
      const isContainerPositioned = ["absolute", "relative", "fixed"].indexOf(parentWindow.getComputedStyle(container).position) !== -1;
      const offsetParent = isContainerPositioned ? container : container.offsetParent;
      const offsetParentPosition = offsetParent.getBoundingClientRect();
      const bodyPosition = ownerDocument.body.getBoundingClientRect();
      offsetLeft = offsetParentPosition.left - bodyPosition.left - offsetParent.scrollLeft;
      offsetTop = offsetParentPosition.top - bodyPosition.top - offsetParent.scrollTop;
    }
    hints.style.left = left - offsetLeft + "px";
    hints.style.top = top - offsetTop + "px";
    const winW = parentWindow.innerWidth || Math.max(ownerDocument.body.offsetWidth, ownerDocument.documentElement.offsetWidth);
    const winH = parentWindow.innerHeight || Math.max(ownerDocument.body.offsetHeight, ownerDocument.documentElement.offsetHeight);
    container.appendChild(hints);
    let box = hints.getBoundingClientRect();
    const overlapY = box.bottom - winH;
    const scrolls = hints.scrollHeight > hints.clientHeight + 1;
    const startScroll = cm.getScrollInfo();
    if (overlapY > 0) {
      const height = box.bottom - box.top;
      const curTop = pos.top - (pos.bottom - box.top);
      if (curTop - height > 0) {
        hints.style.top = (top = pos.top - height - offsetTop) + "px";
        below = false;
      } else if (height > winH) {
        hints.style.height = winH - 5 + "px";
        hints.style.top = (top = pos.bottom - box.top - offsetTop) + "px";
        const cursor = cm.getCursor();
        if (data.from.ch != cursor.ch) {
          pos = cm.cursorCoords(cursor);
          hints.style.left = (left = pos.left - offsetLeft) + "px";
          box = hints.getBoundingClientRect();
        }
      }
    }
    let overlapX = box.right - winW;
    if (overlapX > 0) {
      if (box.right - box.left > winW) {
        hints.style.width = winW - 5 + "px";
        overlapX -= box.right - box.left - winW;
      }
      hints.style.left = (left = pos.left - overlapX - offsetLeft) + "px";
    }
    if (scrolls) {
      for (let node = hints.firstChild; node; node = node.nextSibling) {
        node.style.paddingRight = cm.display.nativeBarWidth + "px";
      }
    }
    cm.addKeyMap(this.keyMap = buildKeyMap(completion, {
      moveFocus(n, avoidWrap) {
        widget.changeActive(widget.selectedHint + n, avoidWrap);
      },
      setFocus(n) {
        widget.changeActive(n);
      },
      menuSize() {
        return widget.screenAmount();
      },
      length: completions.length,
      close() {
        completion.close();
      },
      pick() {
        widget.pick();
      },
      data
    }));
    if (completion.options.closeOnUnfocus) {
      let closingOnBlur;
      cm.on("blur", this.onBlur = function() {
        closingOnBlur = setTimeout(() => {
          completion.close();
        }, 100);
      });
      cm.on("focus", this.onFocus = function() {
        clearTimeout(closingOnBlur);
      });
    }
    cm.on("scroll", this.onScroll = function() {
      const curScroll = cm.getScrollInfo();
      const editor = cm.getWrapperElement().getBoundingClientRect();
      const newTop = top + startScroll.top - curScroll.top;
      let point = newTop - (parentWindow.pageYOffset || (ownerDocument.documentElement || ownerDocument.body).scrollTop);
      if (!below)
        point += hints.offsetHeight;
      if (point <= editor.top || point >= editor.bottom)
        return completion.close();
      hints.style.top = newTop + "px";
      hints.style.left = left + startScroll.left - curScroll.left + "px";
    });
    CodeMirror4.on(hints, "dblclick", (e) => {
      const t = getHintElement(hints, e.target || e.srcElement);
      if (t && t.hintId != null) {
        widget.changeActive(t.hintId);
        widget.pick();
      }
    });
    CodeMirror4.on(hints, "click", (e) => {
      const t = getHintElement(hints, e.target || e.srcElement);
      if (t && t.hintId != null) {
        widget.changeActive(t.hintId);
        if (completion.options.completeOnSingleClick)
          widget.pick();
      }
    });
    CodeMirror4.on(hints, "mousedown", () => {
      setTimeout(() => {
        cm.focus();
      }, 20);
    });
    CodeMirror4.signal(data, "select", completions[this.selectedHint], hints.childNodes[this.selectedHint]);
    return true;
  }
  Widget.prototype = {
    close() {
      if (this.completion.widget != this)
        return;
      this.completion.widget = null;
      this.hints.parentNode.removeChild(this.hints);
      this.completion.cm.removeKeyMap(this.keyMap);
      const cm = this.completion.cm;
      if (this.completion.options.closeOnUnfocus) {
        cm.off("blur", this.onBlur);
        cm.off("focus", this.onFocus);
      }
      cm.off("scroll", this.onScroll);
    },
    disable() {
      this.completion.cm.removeKeyMap(this.keyMap);
      const widget = this;
      this.keyMap = {
        Enter() {
          widget.picked = true;
        }
      };
      this.completion.cm.addKeyMap(this.keyMap);
    },
    pick() {
      this.completion.pick(this.data, this.selectedHint);
    },
    changeActive(i, avoidWrap) {
      if (i >= this.data.list.length) {
        i = avoidWrap ? this.data.list.length - 1 : 0;
      } else if (i < 0) {
        i = avoidWrap ? 0 : this.data.list.length - 1;
      }
      if (this.selectedHint == i)
        return;
      let node = this.hints.childNodes[this.selectedHint];
      if (node)
        node.className = node.className.replace(" " + ACTIVE_HINT_ELEMENT_CLASS, "");
      node = this.hints.childNodes[this.selectedHint = i];
      node.className += " " + ACTIVE_HINT_ELEMENT_CLASS;
      if (node.offsetTop < this.hints.scrollTop) {
        this.hints.scrollTop = node.offsetTop - 3;
      } else if (node.offsetTop + node.offsetHeight > this.hints.scrollTop + this.hints.clientHeight) {
        this.hints.scrollTop = node.offsetTop + node.offsetHeight - this.hints.clientHeight + 3;
      }
      CodeMirror4.signal(this.data, "select", this.data.list[this.selectedHint], node);
    },
    screenAmount() {
      return Math.floor(this.hints.clientHeight / this.hints.firstChild.offsetHeight) || 1;
    }
  };
  function applicableHelpers(cm, helpers) {
    if (!cm.somethingSelected())
      return helpers;
    const result = [];
    for (let i = 0; i < helpers.length; i++) {
      if (helpers[i].supportsSelection)
        result.push(helpers[i]);
    }
    return result;
  }
  function fetchHints(hint, cm, options, callback) {
    if (hint.async) {
      hint(cm, callback, options);
    } else {
      const result = hint(cm, options);
      if (result && result.then)
        result.then(callback);
      else
        callback(result);
    }
  }
  function resolveAutoHints(cm, pos) {
    const helpers = cm.getHelpers(pos, "hint");
    let words;
    if (helpers.length) {
      const resolved = function(cm2, callback, options) {
        const app = applicableHelpers(cm2, helpers);
        function run(i) {
          if (i == app.length)
            return callback(null);
          fetchHints(app[i], cm2, options, (result) => {
            if (result && result.list.length > 0)
              callback(result);
            else
              run(i + 1);
          });
        }
        run(0);
      };
      resolved.async = true;
      resolved.supportsSelection = true;
      return resolved;
    }
    if (words = cm.getHelper(cm.getCursor(), "hintWords")) {
      return function(cm2) {
        return CodeMirror4.hint.fromList(cm2, {
          words
        });
      };
    }
    if (CodeMirror4.hint.anyword) {
      return function(cm2, options) {
        return CodeMirror4.hint.anyword(cm2, options);
      };
    }
    return function() {
    };
  }
  CodeMirror4.registerHelper("hint", "auto", {
    resolve: resolveAutoHints
  });
  CodeMirror4.registerHelper("hint", "fromList", (cm, options) => {
    const cur = cm.getCursor();
    const token = cm.getTokenAt(cur);
    let term;
    let from = CodeMirror4.Pos(cur.line, token.start);
    const to = cur;
    if (token.start < cur.ch && /\w/.test(token.string.charAt(cur.ch - token.start - 1))) {
      term = token.string.substr(0, cur.ch - token.start);
    } else {
      term = "";
      from = cur;
    }
    const found = [];
    for (let i = 0; i < options.words.length; i++) {
      const word = options.words[i];
      if (word.slice(0, term.length) == term) {
        found.push(word);
      }
    }
    if (found.length) {
      return {
        list: found,
        from,
        to
      };
    }
  });
  CodeMirror4.commands.autocomplete = CodeMirror4.showHint;
  var defaultOptions = {
    hint: CodeMirror4.hint.auto,
    completeSingle: true,
    alignWithWord: true,
    closeCharacters: /[\s()\[\]{};:>,]/,
    closeOnUnfocus: true,
    completeOnSingleClick: true,
    container: null,
    customKeys: null,
    extraKeys: null
  };
  CodeMirror4.defineOption("hintOptions", null);
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/hint/anyword-hint.js
function addAnywordhint(CodeMirror4) {
  const WORD = /[\w$]+/;
  const RANGE = 500;
  CodeMirror4.registerHelper("hint", "anyword", (editor, options) => {
    const word = options && options.word || WORD;
    const range = options && options.range || RANGE;
    const cur = editor.getCursor();
    const curLine = editor.getLine(cur.line);
    const end = cur.ch;
    let start = end;
    while (start && word.test(curLine.charAt(start - 1)))
      --start;
    const curWord = start != end && curLine.slice(start, end);
    const list = options && options.list || [];
    const seen = {};
    const re = new RegExp(word.source, "g");
    for (let dir = -1; dir <= 1; dir += 2) {
      let line = cur.line;
      const endLine = Math.min(Math.max(line + dir * range, editor.firstLine()), editor.lastLine()) + dir;
      for (; line != endLine; line += dir) {
        const text = editor.getLine(line);
        var m;
        while (m = re.exec(text)) {
          if (line == cur.line && m[0] === curWord)
            continue;
          if ((!curWord || m[0].lastIndexOf(curWord, 0) == 0) && !Object.prototype.hasOwnProperty.call(seen, m[0])) {
            seen[m[0]] = true;
            list.push(m[0]);
          }
        }
      }
    }
    return {
      list,
      from: CodeMirror4.Pos(cur.line, start),
      to: CodeMirror4.Pos(cur.line, end)
    };
  });
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/hint/xml-hint.js
function addXMLhint(CodeMirror4) {
  const Pos = CodeMirror4.Pos;
  function matches(hint, typed, matchInMiddle) {
    if (matchInMiddle)
      return hint.indexOf(typed) >= 0;
    return hint.lastIndexOf(typed, 0) == 0;
  }
  function getHints(cm, options) {
    const tags = options && options.schemaInfo;
    let quote = options && options.quoteChar || '"';
    const matchInMiddle = options && options.matchInMiddle;
    if (!tags)
      return;
    const cur = cm.getCursor();
    const token = cm.getTokenAt(cur);
    if (token.end > cur.ch) {
      token.end = cur.ch;
      token.string = token.string.slice(0, cur.ch - token.start);
    }
    const inner = CodeMirror4.innerMode(cm.getMode(), token.state);
    if (inner.mode.name != "xml")
      return;
    const result = [];
    let replaceToken = false;
    let prefix;
    const tag = /\btag\b/.test(token.type) && !/>$/.test(token.string);
    const tagName = tag && /^\w/.test(token.string);
    let tagStart;
    if (tagName) {
      var before = cm.getLine(cur.line).slice(Math.max(0, token.start - 2), token.start);
      var tagType = /<\/$/.test(before) ? "close" : /<$/.test(before) ? "open" : null;
      if (tagType)
        tagStart = token.start - (tagType == "close" ? 2 : 1);
    } else if (tag && token.string == "<") {
      tagType = "open";
    } else if (tag && token.string == "</") {
      tagType = "close";
    }
    if (!tag && !inner.state.tagName || tagType) {
      if (tagName) {
        prefix = token.string;
      }
      replaceToken = tagType;
      const cx = inner.state.context;
      var curTag = cx && tags[cx.tagName];
      const childList = cx ? curTag && curTag.children : tags["!top"];
      if (childList && tagType != "close") {
        for (var i = 0; i < childList.length; ++i) {
          if (!prefix || matches(childList[i], prefix, matchInMiddle)) {
            result.push("<" + childList[i]);
          }
        }
      } else if (tagType != "close") {
        for (const name in tags) {
          if (tags.hasOwnProperty(name) && name != "!top" && name != "!attrs" && (!prefix || matches(name, prefix, matchInMiddle))) {
            result.push("<" + name);
          }
        }
      }
      if (cx && (!prefix || tagType == "close" && matches(cx.tagName, prefix, matchInMiddle))) {
        result.push("</" + cx.tagName + ">");
      }
    } else {
      var curTag = tags[inner.state.tagName];
      let attrs = curTag && curTag.attrs;
      const globalAttrs = tags["!attrs"];
      if (!attrs && !globalAttrs)
        return;
      if (!attrs) {
        attrs = globalAttrs;
      } else if (globalAttrs) {
        const set = {};
        for (var nm in globalAttrs) {
          if (globalAttrs.hasOwnProperty(nm))
            set[nm] = globalAttrs[nm];
        }
        for (var nm in attrs) {
          if (attrs.hasOwnProperty(nm))
            set[nm] = attrs[nm];
        }
        attrs = set;
      }
      if (token.type == "string" || token.string == "=") {
        var before = cm.getRange(Pos(cur.line, Math.max(0, cur.ch - 60)), Pos(cur.line, token.type == "string" ? token.start : token.end));
        const atName = before.match(/([^\s\u00a0=<>\"\']+)=$/);
        let atValues;
        if (!atName || !attrs.hasOwnProperty(atName[1]) || !(atValues = attrs[atName[1]]))
          return;
        if (typeof atValues === "function") {
          atValues = atValues.call(this, cm);
        }
        if (token.type == "string") {
          prefix = token.string;
          let n = 0;
          if (/['"]/.test(token.string.charAt(0))) {
            quote = token.string.charAt(0);
            prefix = token.string.slice(1);
            n++;
          }
          const len = token.string.length;
          if (/['"]/.test(token.string.charAt(len - 1))) {
            quote = token.string.charAt(len - 1);
            prefix = token.string.substr(n, len - 2);
          }
          if (n) {
            const line = cm.getLine(cur.line);
            if (line.length > token.end && line.charAt(token.end) == quote)
              token.end++;
          }
          replaceToken = true;
        }
        for (var i = 0; i < atValues.length; ++i) {
          if (!prefix || matches(atValues[i], prefix, matchInMiddle)) {
            result.push(quote + atValues[i] + quote);
          }
        }
      } else {
        if (token.type == "attribute") {
          prefix = token.string;
          replaceToken = true;
        }
        for (const attr in attrs) {
          if (attrs.hasOwnProperty(attr) && (!prefix || matches(attr, prefix, matchInMiddle))) {
            result.push(attr);
          }
        }
      }
    }
    return {
      list: result,
      from: replaceToken ? Pos(cur.line, tagStart == null ? token.start : tagStart) : cur,
      to: replaceToken ? Pos(cur.line, token.end) : cur
    };
  }
  CodeMirror4.registerHelper("hint", "xml", getHints);
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/hint/css-hint.js
function addCSSHint(CodeMirror4) {
  const pseudoClasses = {
    link: 1,
    visited: 1,
    active: 1,
    hover: 1,
    focus: 1,
    "first-letter": 1,
    "first-line": 1,
    "first-child": 1,
    before: 1,
    after: 1,
    lang: 1
  };
  CodeMirror4.registerHelper("hint", "css", (cm) => {
    const cur = cm.getCursor();
    const token = cm.getTokenAt(cur);
    const inner = CodeMirror4.innerMode(cm.getMode(), token.state);
    if (inner.mode.name != "css")
      return;
    if (token.type == "keyword" && "!important".indexOf(token.string) == 0) {
      return {
        list: ["!important"],
        from: CodeMirror4.Pos(cur.line, token.start),
        to: CodeMirror4.Pos(cur.line, token.end)
      };
    }
    let start = token.start;
    let end = cur.ch;
    let word = token.string.slice(0, end - start);
    if (/[^\w$_-]/.test(word)) {
      word = "";
      start = end = cur.ch;
    }
    const spec = CodeMirror4.resolveMode("text/css");
    const result = [];
    function add(keywords) {
      for (const name in keywords) {
        if (!word || name.lastIndexOf(word, 0) == 0) {
          result.push(name);
        }
      }
    }
    const st = inner.state.state;
    if (st == "pseudo" || token.type == "variable-3") {
      add(pseudoClasses);
    } else if (st == "block" || st == "maybeprop") {
      add(spec.propertyKeywords);
    } else if (st == "prop" || st == "parens" || st == "at" || st == "params") {
      add(spec.valueKeywords);
      add(spec.colorKeywords);
    } else if (st == "media" || st == "media_parens") {
      add(spec.mediaTypes);
      add(spec.mediaFeatures);
    }
    if (result.length) {
      return {
        list: result,
        from: CodeMirror4.Pos(cur.line, start),
        to: CodeMirror4.Pos(cur.line, end)
      };
    }
  });
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/hint/html-hint.js
function addHTMLhint(CodeMirror4) {
  const langs = "ab aa af ak sq am ar an hy as av ae ay az bm ba eu be bn bh bi bs br bg my ca ch ce ny zh cv kw co cr hr cs da dv nl dz en eo et ee fo fj fi fr ff gl ka de el gn gu ht ha he hz hi ho hu ia id ie ga ig ik io is it iu ja jv kl kn kr ks kk km ki rw ky kv kg ko ku kj la lb lg li ln lo lt lu lv gv mk mg ms ml mt mi mr mh mn na nv nb nd ne ng nn no ii nr oc oj cu om or os pa pi fa pl ps pt qu rm rn ro ru sa sc sd se sm sg sr gd sn si sk sl so st es su sw ss sv ta te tg th ti bo tk tl tn to tr ts tt tw ty ug uk ur uz ve vi vo wa cy wo fy xh yi yo za zu".split(" ");
  const targets = ["_blank", "_self", "_top", "_parent"];
  const charsets = ["ascii", "utf-8", "utf-16", "latin1", "latin1"];
  const methods = ["get", "post", "put", "delete"];
  const encs = ["application/x-www-form-urlencoded", "multipart/form-data", "text/plain"];
  const media = [
    "all",
    "screen",
    "print",
    "embossed",
    "braille",
    "handheld",
    "print",
    "projection",
    "screen",
    "tty",
    "tv",
    "speech",
    "3d-glasses",
    "resolution [>][<][=] [X]",
    "device-aspect-ratio: X/Y",
    "orientation:portrait",
    "orientation:landscape",
    "device-height: [X]",
    "device-width: [X]"
  ];
  const s = {
    attrs: {}
  };
  const data = {
    a: {
      attrs: {
        href: null,
        ping: null,
        type: null,
        media,
        target: targets,
        hreflang: langs
      }
    },
    abbr: s,
    acronym: s,
    address: s,
    applet: s,
    area: {
      attrs: {
        alt: null,
        coords: null,
        href: null,
        target: null,
        ping: null,
        media,
        hreflang: langs,
        type: null,
        shape: ["default", "rect", "circle", "poly"]
      }
    },
    article: s,
    aside: s,
    audio: {
      attrs: {
        src: null,
        mediagroup: null,
        crossorigin: ["anonymous", "use-credentials"],
        preload: ["none", "metadata", "auto"],
        autoplay: ["", "autoplay"],
        loop: ["", "loop"],
        controls: ["", "controls"]
      }
    },
    b: s,
    base: {
      attrs: {
        href: null,
        target: targets
      }
    },
    basefont: s,
    bdi: s,
    bdo: s,
    big: s,
    blockquote: {
      attrs: {
        cite: null
      }
    },
    body: s,
    br: s,
    button: {
      attrs: {
        form: null,
        formaction: null,
        name: null,
        value: null,
        autofocus: ["", "autofocus"],
        disabled: ["", "autofocus"],
        formenctype: encs,
        formmethod: methods,
        formnovalidate: ["", "novalidate"],
        formtarget: targets,
        type: ["submit", "reset", "button"]
      }
    },
    canvas: {
      attrs: {
        width: null,
        height: null
      }
    },
    caption: s,
    center: s,
    cite: s,
    code: s,
    col: {
      attrs: {
        span: null
      }
    },
    colgroup: {
      attrs: {
        span: null
      }
    },
    command: {
      attrs: {
        type: ["command", "checkbox", "radio"],
        label: null,
        icon: null,
        radiogroup: null,
        command: null,
        title: null,
        disabled: ["", "disabled"],
        checked: ["", "checked"]
      }
    },
    data: {
      attrs: {
        value: null
      }
    },
    datagrid: {
      attrs: {
        disabled: ["", "disabled"],
        multiple: ["", "multiple"]
      }
    },
    datalist: {
      attrs: {
        data: null
      }
    },
    dd: s,
    del: {
      attrs: {
        cite: null,
        datetime: null
      }
    },
    details: {
      attrs: {
        open: ["", "open"]
      }
    },
    dfn: s,
    dir: s,
    div: s,
    dl: s,
    dt: s,
    em: s,
    embed: {
      attrs: {
        src: null,
        type: null,
        width: null,
        height: null
      }
    },
    eventsource: {
      attrs: {
        src: null
      }
    },
    fieldset: {
      attrs: {
        disabled: ["", "disabled"],
        form: null,
        name: null
      }
    },
    figcaption: s,
    figure: s,
    font: s,
    footer: s,
    form: {
      attrs: {
        action: null,
        name: null,
        "accept-charset": charsets,
        autocomplete: ["on", "off"],
        enctype: encs,
        method: methods,
        novalidate: ["", "novalidate"],
        target: targets
      }
    },
    frame: s,
    frameset: s,
    h1: s,
    h2: s,
    h3: s,
    h4: s,
    h5: s,
    h6: s,
    head: {
      attrs: {},
      children: ["title", "base", "link", "style", "meta", "script", "noscript", "command"]
    },
    header: s,
    hgroup: s,
    hr: s,
    html: {
      attrs: {
        manifest: null
      },
      children: ["head", "body"]
    },
    i: s,
    iframe: {
      attrs: {
        src: null,
        srcdoc: null,
        name: null,
        width: null,
        height: null,
        sandbox: ["allow-top-navigation", "allow-same-origin", "allow-forms", "allow-scripts"],
        seamless: ["", "seamless"]
      }
    },
    img: {
      attrs: {
        alt: null,
        src: null,
        ismap: null,
        usemap: null,
        width: null,
        height: null,
        crossorigin: ["anonymous", "use-credentials"]
      }
    },
    input: {
      attrs: {
        alt: null,
        dirname: null,
        form: null,
        formaction: null,
        height: null,
        list: null,
        max: null,
        maxlength: null,
        min: null,
        name: null,
        pattern: null,
        placeholder: null,
        size: null,
        src: null,
        step: null,
        value: null,
        width: null,
        accept: ["audio/*", "video/*", "image/*"],
        autocomplete: ["on", "off"],
        autofocus: ["", "autofocus"],
        checked: ["", "checked"],
        disabled: ["", "disabled"],
        formenctype: encs,
        formmethod: methods,
        formnovalidate: ["", "novalidate"],
        formtarget: targets,
        multiple: ["", "multiple"],
        readonly: ["", "readonly"],
        required: ["", "required"],
        type: [
          "hidden",
          "text",
          "search",
          "tel",
          "url",
          "email",
          "password",
          "datetime",
          "date",
          "month",
          "week",
          "time",
          "datetime-local",
          "number",
          "range",
          "color",
          "checkbox",
          "radio",
          "file",
          "submit",
          "image",
          "reset",
          "button"
        ]
      }
    },
    ins: {
      attrs: {
        cite: null,
        datetime: null
      }
    },
    kbd: s,
    keygen: {
      attrs: {
        challenge: null,
        form: null,
        name: null,
        autofocus: ["", "autofocus"],
        disabled: ["", "disabled"],
        keytype: ["RSA"]
      }
    },
    label: {
      attrs: {
        for: null,
        form: null
      }
    },
    legend: s,
    li: {
      attrs: {
        value: null
      }
    },
    link: {
      attrs: {
        href: null,
        type: null,
        hreflang: langs,
        media,
        sizes: ["all", "16x16", "16x16 32x32", "16x16 32x32 64x64"]
      }
    },
    map: {
      attrs: {
        name: null
      }
    },
    mark: s,
    menu: {
      attrs: {
        label: null,
        type: ["list", "context", "toolbar"]
      }
    },
    meta: {
      attrs: {
        content: null,
        charset: charsets,
        name: ["viewport", "application-name", "author", "description", "generator", "keywords"],
        "http-equiv": ["content-language", "content-type", "default-style", "refresh"]
      }
    },
    meter: {
      attrs: {
        value: null,
        min: null,
        low: null,
        high: null,
        max: null,
        optimum: null
      }
    },
    nav: s,
    noframes: s,
    noscript: s,
    object: {
      attrs: {
        data: null,
        type: null,
        name: null,
        usemap: null,
        form: null,
        width: null,
        height: null,
        typemustmatch: ["", "typemustmatch"]
      }
    },
    ol: {
      attrs: {
        reversed: ["", "reversed"],
        start: null,
        type: ["1", "a", "A", "i", "I"]
      }
    },
    optgroup: {
      attrs: {
        disabled: ["", "disabled"],
        label: null
      }
    },
    option: {
      attrs: {
        disabled: ["", "disabled"],
        label: null,
        selected: ["", "selected"],
        value: null
      }
    },
    output: {
      attrs: {
        for: null,
        form: null,
        name: null
      }
    },
    p: s,
    param: {
      attrs: {
        name: null,
        value: null
      }
    },
    pre: s,
    progress: {
      attrs: {
        value: null,
        max: null
      }
    },
    q: {
      attrs: {
        cite: null
      }
    },
    rp: s,
    rt: s,
    ruby: s,
    s,
    samp: s,
    script: {
      attrs: {
        type: ["text/javascript"],
        src: null,
        async: ["", "async"],
        defer: ["", "defer"],
        charset: charsets
      }
    },
    section: s,
    select: {
      attrs: {
        form: null,
        name: null,
        size: null,
        autofocus: ["", "autofocus"],
        disabled: ["", "disabled"],
        multiple: ["", "multiple"]
      }
    },
    small: s,
    source: {
      attrs: {
        src: null,
        type: null,
        media: null
      }
    },
    span: s,
    strike: s,
    strong: s,
    style: {
      attrs: {
        type: ["text/css"],
        media,
        scoped: null
      }
    },
    sub: s,
    summary: s,
    sup: s,
    table: s,
    tbody: s,
    td: {
      attrs: {
        colspan: null,
        rowspan: null,
        headers: null
      }
    },
    textarea: {
      attrs: {
        dirname: null,
        form: null,
        maxlength: null,
        name: null,
        placeholder: null,
        rows: null,
        cols: null,
        autofocus: ["", "autofocus"],
        disabled: ["", "disabled"],
        readonly: ["", "readonly"],
        required: ["", "required"],
        wrap: ["soft", "hard"]
      }
    },
    tfoot: s,
    th: {
      attrs: {
        colspan: null,
        rowspan: null,
        headers: null,
        scope: ["row", "col", "rowgroup", "colgroup"]
      }
    },
    thead: s,
    time: {
      attrs: {
        datetime: null
      }
    },
    title: s,
    tr: s,
    track: {
      attrs: {
        src: null,
        label: null,
        default: null,
        kind: ["subtitles", "captions", "descriptions", "chapters", "metadata"],
        srclang: langs
      }
    },
    tt: s,
    u: s,
    ul: s,
    var: s,
    video: {
      attrs: {
        src: null,
        poster: null,
        width: null,
        height: null,
        crossorigin: ["anonymous", "use-credentials"],
        preload: ["auto", "metadata", "none"],
        autoplay: ["", "autoplay"],
        mediagroup: ["movie"],
        muted: ["", "muted"],
        controls: ["", "controls"]
      }
    },
    wbr: s
  };
  const globalAttrs = {
    accesskey: [
      "a",
      "b",
      "c",
      "d",
      "e",
      "f",
      "g",
      "h",
      "i",
      "j",
      "k",
      "l",
      "m",
      "n",
      "o",
      "p",
      "q",
      "r",
      "s",
      "t",
      "u",
      "v",
      "w",
      "x",
      "y",
      "z",
      "0",
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "7",
      "8",
      "9"
    ],
    class: null,
    contenteditable: ["true", "false"],
    contextmenu: null,
    dir: ["ltr", "rtl", "auto"],
    draggable: ["true", "false", "auto"],
    dropzone: ["copy", "move", "link", "string:", "file:"],
    hidden: ["hidden"],
    id: null,
    inert: ["inert"],
    itemid: null,
    itemprop: null,
    itemref: null,
    itemscope: ["itemscope"],
    itemtype: null,
    lang: ["en", "es"],
    spellcheck: ["true", "false"],
    autocorrect: ["true", "false"],
    autocapitalize: ["true", "false"],
    style: null,
    tabindex: ["1", "2", "3", "4", "5", "6", "7", "8", "9"],
    title: null,
    translate: ["yes", "no"],
    onclick: null,
    rel: [
      "stylesheet",
      "alternate",
      "author",
      "bookmark",
      "help",
      "license",
      "next",
      "nofollow",
      "noreferrer",
      "prefetch",
      "prev",
      "search",
      "tag"
    ]
  };
  function populate(obj) {
    for (const attr in globalAttrs) {
      if (globalAttrs.hasOwnProperty(attr)) {
        obj.attrs[attr] = globalAttrs[attr];
      }
    }
  }
  populate(s);
  for (const tag in data) {
    if (data.hasOwnProperty(tag) && data[tag] != s) {
      populate(data[tag]);
    }
  }
  CodeMirror4.htmlSchema = data;
  function htmlHint(cm, options) {
    const local = {
      schemaInfo: data
    };
    if (options) {
      for (const opt in options)
        local[opt] = options[opt];
    }
    return CodeMirror4.hint.xml(cm, local);
  }
  CodeMirror4.registerHelper("hint", "html", htmlHint);
  CodeMirror4.htmlHint = htmlHint;
}

// src/IDE/Editor/vendor/custom/CodeMirrorES6/addons/hint/javascript-hint.js
function addJShint(CodeMirror4) {
  const Pos = CodeMirror4.Pos;
  function forEach(arr, f) {
    for (let i = 0, e = arr.length; i < e; ++i)
      f(arr[i]);
  }
  function arrayContains(arr, item) {
    if (!Array.prototype.indexOf) {
      let i = arr.length;
      while (i--) {
        if (arr[i] === item) {
          return true;
        }
      }
      return false;
    }
    return arr.indexOf(item) != -1;
  }
  function scriptHint(editor, keywords, getToken, options) {
    const cur = editor.getCursor();
    let token = getToken(editor, cur);
    if (/\b(?:string|comment)\b/.test(token.type))
      return;
    const innerMode = CodeMirror4.innerMode(editor.getMode(), token.state);
    if (innerMode.mode.helperType === "json")
      return;
    token.state = innerMode.state;
    if (!/^[\w$_]*$/.test(token.string)) {
      token = {
        start: cur.ch,
        end: cur.ch,
        string: "",
        state: token.state,
        type: token.string == "." ? "property" : null
      };
    } else if (token.end > cur.ch) {
      token.end = cur.ch;
      token.string = token.string.slice(0, cur.ch - token.start);
    }
    let tprop = token;
    while (tprop.type == "property") {
      tprop = getToken(editor, Pos(cur.line, tprop.start));
      if (tprop.string != ".")
        return;
      tprop = getToken(editor, Pos(cur.line, tprop.start));
      if (!context)
        var context = [];
      context.push(tprop);
    }
    return {
      list: getCompletions(token, context, keywords, options),
      from: Pos(cur.line, token.start),
      to: Pos(cur.line, token.end)
    };
  }
  function javascriptHint(editor, options) {
    return scriptHint(editor, javascriptKeywords, (e, cur) => {
      return e.getTokenAt(cur);
    }, options);
  }
  CodeMirror4.registerHelper("hint", "javascript", javascriptHint);
  function getCoffeeScriptToken(editor, cur) {
    const token = editor.getTokenAt(cur);
    if (cur.ch == token.start + 1 && token.string.charAt(0) == ".") {
      token.end = token.start;
      token.string = ".";
      token.type = "property";
    } else if (/^\.[\w$_]*$/.test(token.string)) {
      token.type = "property";
      token.start++;
      token.string = token.string.replace(/\./, "");
    }
    return token;
  }
  function coffeescriptHint(editor, options) {
    return scriptHint(editor, coffeescriptKeywords, getCoffeeScriptToken, options);
  }
  CodeMirror4.registerHelper("hint", "coffeescript", coffeescriptHint);
  const stringProps = "charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight toUpperCase toLowerCase split concat match replace search".split(" ");
  const arrayProps = "length concat join splice push pop shift unshift slice reverse sort indexOf lastIndexOf every some filter forEach map reduce reduceRight ".split(" ");
  const funcProps = "prototype apply call bind".split(" ");
  var javascriptKeywords = "break case catch class const continue debugger default delete do else export extends false finally for function if in import instanceof new null return super switch this throw true try typeof var void while with yield".split(" ");
  var coffeescriptKeywords = "and break catch class continue delete do else extends false finally for if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes".split(" ");
  function forAllProps(obj, callback) {
    if (!Object.getOwnPropertyNames || !Object.getPrototypeOf) {
      for (const name in obj)
        callback(name);
    } else {
      for (let o = obj; o; o = Object.getPrototypeOf(o)) {
        Object.getOwnPropertyNames(o).forEach(callback);
      }
    }
  }
  function getCompletions(token, context, keywords, options) {
    const found = [];
    const start = token.string;
    const global3 = options && options.globalScope || window;
    function maybeAdd(str) {
      if (str.lastIndexOf(start, 0) == 0 && !arrayContains(found, str))
        found.push(str);
    }
    function gatherCompletions(obj) {
      if (typeof obj === "string")
        forEach(stringProps, maybeAdd);
      else if (obj instanceof Array)
        forEach(arrayProps, maybeAdd);
      else if (obj instanceof Function)
        forEach(funcProps, maybeAdd);
      forAllProps(obj, maybeAdd);
    }
    if (context && context.length) {
      const obj = context.pop();
      let base;
      if (obj.type && obj.type.indexOf("variable") === 0) {
        if (options && options.additionalContext) {
          base = options.additionalContext[obj.string];
        }
        if (!options || options.useGlobalScope !== false) {
          base = base || global3[obj.string];
        }
      } else if (obj.type == "string") {
        base = "";
      } else if (obj.type == "atom") {
        base = 1;
      } else if (obj.type == "function") {
        if (global3.jQuery != null && (obj.string == "$" || obj.string == "jQuery") && typeof global3.jQuery === "function") {
          base = global3.jQuery();
        } else if (global3._ != null && obj.string == "_" && typeof global3._ === "function") {
          base = global3._();
        }
      }
      while (base != null && context.length) {
        base = base[context.pop().string];
      }
      if (base != null)
        gatherCompletions(base);
    } else {
      for (var v = token.state.localVars; v; v = v.next)
        maybeAdd(v.name);
      for (var v = token.state.globalVars; v; v = v.next)
        maybeAdd(v.name);
      if (!options || options.useGlobalScope !== false) {
        gatherCompletions(global3);
      }
      forEach(keywords, maybeAdd);
    }
    return found;
  }
}

// src/IDE/Editor/utils/addFunctionToCodeMirror.js
function addFunctionsToCodeMirror() {
  addXMLMode(import_codemirror.default);
  addCSSMode(import_codemirror.default);
  addJavaScriptMode(import_codemirror.default);
  addHTMLMixedMode(import_codemirror.default);
  addAnnotateScrollbar(import_codemirror.default);
  addComment(import_codemirror.default);
  addFullscreen(import_codemirror.default);
  addActiveLine(import_codemirror.default);
  addDialog(import_codemirror.default);
  addJumptoline(import_codemirror.default);
  addMatchhighlighter(import_codemirror.default);
  addMatchesonscroll(import_codemirror.default);
  addSearch(import_codemirror.default);
  addSearchcursor(import_codemirror.default);
  addFoldcode(import_codemirror.default);
  addBracefold(import_codemirror.default);
  addCommentfold(import_codemirror.default);
  addFoldgutter(import_codemirror.default);
  addIndentfold(import_codemirror.default);
  addXmlfold(import_codemirror.default);
  addClosebrackets(import_codemirror.default);
  addClosetag(import_codemirror.default);
  addShowhint(import_codemirror.default);
  addAnywordhint(import_codemirror.default);
  addXMLhint(import_codemirror.default);
  addCSSHint(import_codemirror.default);
  addHTMLhint(import_codemirror.default);
  addJShint(import_codemirror.default);
}

// src/IDE/Editor/setupCodeMirror.js
function setupCodeMirror(textArea) {
  addFunctionsToCodeMirror();
  return import_codemirror2.default.fromTextArea(textArea, {
    autoCloseBrackets: true,
    autoCloseTags: true,
    autoFocus: true,
    autoCorrect: true,
    flattenSpans: true,
    foldGutter: true,
    lineNumbers: true,
    lint: true,
    matchBrackets: true,
    mode: "text/html",
    pollInterval: 200,
    resetSelectionOnContextMenu: false,
    screenReaderLabel: "Inline Code Editor Text Area",
    showCursorWhenSelecting: false,
    smartIndent: true,
    spellcheck: true,
    styleActiveLine: true,
    tabIndex: 2,
    tabSize: 2,
    extraKeys: {
      "Ctrl-Space": "autocomplete",
      "Cmd-Space": "autocomplete",
      "Ctrl-Q": (cm) => {
        cm.foldCode(cm.getCursor());
      },
      "Cmd-Q": (cm) => {
        cm.foldCode(cm.getCursor());
      },
      "Cmd-/": "toggleComment",
      "Ctrl-/": "toggleComment",
      F11(cm) {
        cm.setOption("fullScreen", !cm.getOption("fullScreen"));
      },
      Esc(cm) {
        if (cm.getOption("fullScreen"))
          cm.setOption("fullScreen", false);
      }
    },
    gutters: [
      "CodeMirror-linenumbers",
      "CodeMirror-foldgutter",
      "CodeMirror-lint-markers"
    ]
  });
}

// src/IDE/HTML/HTMLBuilder.js
var HTMLBuilder = class {
  static buildEditor() {
    const container = document.querySelector("#editor");
    const textArea = document.createElement("textarea");
    textArea.name = "editor-textarea";
    textArea.classList.add("editor-textarea");
    container.appendChild(textArea);
    return textArea;
  }
  static buildPreviewFrame() {
    const container = document.querySelector("#preview");
    const frame = document.createElement("iframe");
    frame.title = "Preview Window";
    frame.name = "preview-frame";
    frame.classList.add("preview-frame");
    container.appendChild(frame);
    return frame;
  }
};

// src/IDE/Editor/Editor.js
var Editor = class {
  constructor(files) {
    this.files = files;
    this.activeFile = null;
    this.fileDirty = false;
    const textArea = HTMLBuilder.buildEditor();
    this.cm = setupCodeMirror(textArea);
    this.container = document.querySelector(".CodeMirror");
  }
  get isDirty() {
    return Object.values(this.files).some((file) => {
      return file.isDirty;
    });
  }
  setActiveDocument(file) {
    this.activeFile = file;
    if (file === null) {
      this.cm.setValue("");
      this.cm.clearHistory();
      this.setReadOnly(true);
      this.cm.display.input.blur();
    } else if (file.document) {
      this.cm.swapDoc(file.document);
      this.cm.refresh();
      this.setReadOnly(file.readOnly);
      this.focus();
    } else {
      console.warn(`Editor could not open file: ${file}`);
    }
  }
  setEventCallback(eventType, callback) {
    this.cm.on(eventType, callback);
  }
  resetActiveFile() {
    if (this.activeFile) {
      this.activeFile.reset();
    }
  }
  resetAllFiles() {
    Object.values(this.files).forEach((file) => {
      file.reset();
    });
  }
  refresh() {
    if (this.cm) {
      this.cm.refresh();
    }
  }
  focus() {
    if (this.cm)
      this.cm.focus();
  }
  setReadOnly(bool) {
    this.cm.setOption("readOnly", bool);
    if (bool) {
      this.container.classList.add("read-only");
    } else {
      this.container.classList.remove("read-only");
    }
  }
  setComparisonState(state) {
    for (const file of Object.values(this.files)) {
      if (file.comparisonEnabled) {
        file.setState(state);
      }
    }
    this.setActiveDocument(this.activeFile);
  }
};

// src/IDE/utils/classifyURL.js
var textURLS = ["css", "html", "js", "json"];
var imageURLS = ["jpg", "png"];
var modelsURLS = ["glb"];
function classifyURL(url) {
  const ext = url.split(".").pop();
  if (textURLS.includes(ext)) {
    return "text";
  } else if (imageURLS.includes(ext)) {
    return "image";
  } else if (modelsURLS.includes(ext)) {
    return "model";
  }
  return "text";
}

// src/IDE/Fetcher/utils/fetchFiles.js
async function fetchFiles(urls, as = "text", serverDirectory) {
  const filePromises = [];
  for (const url of urls) {
    const serverURL = url.replace(/assets\//g, serverDirectory);
    filePromises.push(fetch(serverURL));
  }
  const responses = await Promise.all(filePromises);
  return await Promise.all(responses.map((response) => {
    switch (as) {
      case "text":
        return response.text();
      case "blob":
        return response.blob();
    }
  }));
}

// src/IDE/File/File.js
var import_codemirror3 = __toModule(require_codemirror());

// src/IDE/File/utils/getMimetype.js
function getMimetype(type) {
  switch (type) {
    case "html":
      return "text/html";
    case "css":
      return "text/css";
    case "js":
      return "text/javascript";
    case "jpg":
    case "jpeg":
      return "image/jpeg";
    case "png":
      return "image/png";
    case "glb":
      return "model/gltf-binary";
    default:
      return "text/plain";
  }
}

// node_modules/three/src/constants.js
var REVISION = "127";

// src/IDE/File/utils/convertImportsInText.js
function convertImportsInText(text, oldStyle, newStyle) {
  if (!text)
    return;
  let convertedText = text;
  const npmBuildImport = "from 'three'";
  const npmExampleImport = "from 'three/examples";
  const cdnBuildImport = `from 'https://unpkg.com/three@0.${REVISION}.0/build/three.module.js'`;
  const cdnExampleImport = `from 'https://unpkg.com/three@0.${REVISION}.0/examples`;
  let newBuildURl = npmBuildImport;
  let newExampleURl = npmExampleImport;
  if (newStyle === "cdn") {
    newBuildURl = cdnBuildImport;
    newExampleURl = cdnExampleImport;
  }
  switch (oldStyle) {
    case "npm":
      convertedText = convertedText.replace(new RegExp(npmBuildImport, "g"), newBuildURl);
      convertedText = convertedText.replace(new RegExp(npmExampleImport, "g"), newExampleURl);
      break;
    case "cdn":
      convertedText = convertedText.replace(new RegExp(cdnBuildImport, "g"), newBuildURl);
      convertedText = convertedText.replace(new RegExp(cdnExampleImport, "g"), newExampleURl);
      break;
    default:
      break;
  }
  return convertedText;
}

// src/IDE/File/utils/getNameFromURL.js
function getNameFromURL(url) {
  const list = url.split("/");
  return list[list.length - 1];
}

// src/IDE/File/File.js
var File = class {
  constructor(data) {
    this.comparisonEnabled = data.comparisonsEnabled;
    this.deletable = data.deletable || false;
    this.name = getNameFromURL(data.url);
    this.url = data.url;
    this.type = data.url.split(".").pop();
    this.dataType = classifyURL(this.url);
    this.mimeType = getMimetype(this.type);
    if (this.dataType === "text") {
      this.setupText(data.text);
    }
    this.serverURL = this.setServerURL(data.serverDirectory);
    this.importStyle = this.type === "js" ? "npm" : null;
    this.readOnly = !!this.url.includes("vendor");
    this.cmDoc = null;
    this.setState("start");
    this.inactiveStateHistory = null;
  }
  setupText(text) {
    if (this.readOnly || !this.comparisonEnabled) {
      this.originalText = text || "";
      this.workingText = this.originalText;
    } else if (this.comparisonEnabled && !text.start) {
      this.originalStartText = text || "";
      this.workingStartText = this.originalStartText;
      this.originalFinalText = text || "";
      this.workingFinalText = this.originalFinalText;
    } else {
      this.originalStartText = text.start || "";
      this.workingStartText = this.originalStartText;
      this.originalFinalText = text.final || "";
      this.workingFinalText = this.originalFinalText;
    }
  }
  setState(state) {
    this.state = state;
    if (!this.cmDoc)
      return;
    if (this.isDirty) {
      if (state === "start") {
        this.workingFinalText = this.contents;
      } else {
        this.workingStartText = this.contents;
      }
    }
    const history = this.cmDoc.getHistory();
    const cursorPos = this.cmDoc.getCursor();
    this.cmDoc.setValue(this.activeText);
    this.cmDoc.clearHistory();
    this.cmDoc.setCursor(cursorPos);
    if (this.inactiveStateHistory) {
      this.cmDoc.setHistory(this.inactiveStateHistory);
    }
    this.inactiveStateHistory = history;
    if (state === "start") {
      if (this.workingStartText === this.originalStartText) {
        this.cmDoc.markClean();
      }
    }
    if (state === "final") {
      if (this.workingFinalText === this.originalFinalText) {
        this.cmDoc.markClean();
      }
    }
  }
  setServerURL(serverDirectory) {
    return `/${serverDirectory}/${this.url}`.replace(/\/\//g, "/");
  }
  get activeText() {
    if (!this.comparisonEnabled) {
      return this.workingText;
    } else if (this.state === "start") {
      return this.workingStartText;
    }
    return this.workingFinalText;
  }
  get folder() {
    const res = this.url.split("/");
    res.pop();
    return res.join("/");
  }
  get document() {
    if (!this.cmDoc) {
      this.cmDoc = import_codemirror3.default.Doc(this.activeText, this.mimeType);
    }
    return this.cmDoc;
  }
  get contents() {
    if (!this.cmDoc) {
      return this.activeText;
    }
    return this.document.getValue();
  }
  set contents(text) {
    this.document.setValue(text);
  }
  get isDirty() {
    if (!this.cmDoc)
      return false;
    else
      return !this.cmDoc.isClean();
  }
  reset() {
    if (!this.comparisonEnabled) {
      this.workingText = this.originalText;
    } else if (this.state === "start") {
      this.workingStartText = this.originalStartText;
    } else {
      this.workingFinalText = this.originalFinalText;
    }
    if (this.cmDoc) {
      this.contents = this.activeText;
      this.cmDoc.markClean();
    }
  }
  getContentsWithImportStyle(style) {
    if (this.importStyle === style || this.type !== "js" || this.url.indexOf("src") !== 0) {
      return this.contents;
    }
    return convertImportsInText(this.contents, this.importStyle, style);
  }
  setImportStyle(style) {
    if (this.type !== "js" || this.url.includes("vendor") || this.importStyle === style) {
      return;
    }
    this.workingText = convertImportsInText(this.workingText, this.importStyle, style);
    this.workingStartText = convertImportsInText(this.workingStartText, this.importStyle, style);
    this.workingFinalText = convertImportsInText(this.workingFinalText, this.importStyle, style);
    if (this.cmDoc) {
      this.contents = convertImportsInText(this.contents, this.importStyle, style);
    }
    this.importStyle = style;
  }
};

// src/IDE/Fetcher/Fetcher.js
var Fetcher = class {
  static async fetchFiles(urls, startURLS, finalURLS, serverDirectory, stripDirectory, comparisonsEnabled) {
    this.urls = urls;
    this.serverDirectory = serverDirectory;
    this.stripDirectory = stripDirectory;
    const textURLs = [];
    const assetURLs = [];
    for (const url of this.urls) {
      if (classifyURL(url) === "text") {
        textURLs.push(url);
      } else {
        assetURLs.push(url);
      }
    }
    const textFiles = await this.fetchTextURLs(textURLs, comparisonsEnabled);
    const assetFiles = this.processAssetsURLs(assetURLs);
    return {...textFiles, ...assetFiles};
  }
  static async fetchTextURLs(urls, comparisonsEnabled) {
    const serverURLs = urls.map((url) => `/${this.serverDirectory}/${url}`.replace(/\/\//g, "/"));
    const textData = await fetchFiles(serverURLs, "text", this.serverDirectory);
    const fileData = {};
    for (const [index, text] of textData.entries()) {
      fileData[urls[index].replace(this.stripDirectory, "")] = text;
    }
    const fileDataPaired = {};
    for (const [key, value] of Object.entries(fileData)) {
      if (key.includes(".start.js")) {
        fileDataPaired[key.replace(".start.js", ".js")] = {
          start: value,
          final: fileData[key.replace(".start.js", ".final.js")]
        };
      } else if (!key.includes(".final.js")) {
        fileDataPaired[key] = value;
      }
    }
    const results = {};
    for (const [key, text] of Object.entries(fileDataPaired)) {
      const url = key.replace(this.stripDirectory, "");
      results[url] = new File({
        url,
        text,
        serverDirectory: this.serverDirectory,
        comparisonsEnabled
      });
    }
    return results;
  }
  static processAssetsURLs(urls) {
    const results = {};
    for (const url of urls) {
      results[url.replace(this.stripDirectory, "")] = new File({
        url,
        serverDirectory: this.serverDirectory
      });
    }
    return results;
  }
};

// src/IDE/FileTree/utils/createIcon.js
var paths = {
  folderOpen: "M527.9 224H480v-48c0-26.5-21.5-48-48-48H272l-64-64H48C21.5 64 0 85.5 0 112v288c0 26.5 21.5 48 48 48h400c16.5 0 31.9-8.5 40.7-22.6l79.9-128c20-31.9-3-73.4-40.7-73.4zM48 118c0-3.3 2.7-6 6-6h134.1l64 64H426c3.3 0 6 2.7 6 6v42H152c-16.8 0-32.4 8.8-41.1 23.2L48 351.4zm400 282H72l77.2-128H528z",
  folderClosed: "M464 128H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48zm0 272H48V112h140.12l54.63 54.63c6 6 14.14 9.37 22.63 9.37H464v224z",
  html: "M0 32l34.9 395.8L191.5 480l157.6-52.2L384 32H0zm308.2 127.9H124.4l4.1 49.4h175.6l-13.6 148.4-97.9 27v.3h-1.1l-98.7-27.3-6-75.8h47.7L138 320l53.5 14.5 53.7-14.5 6-62.2H84.3L71.5 112.2h241.1l-4.4 47.7z",
  css: "M480 32l-64 368-223.3 80L0 400l19.6-94.8h82l-8 40.6L210 390.2l134.1-44.4 18.8-97.1H29.5l16-82h333.7l10.5-52.7H56.3l16.3-82H480z",
  js: "M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM243.8 381.4c0 43.6-25.6 63.5-62.9 63.5-33.7 0-53.2-17.4-63.2-38.5l34.3-20.7c6.6 11.7 12.6 21.6 27.1 21.6 13.8 0 22.6-5.4 22.6-26.5V237.7h42.1v143.7zm99.6 63.5c-39.1 0-64.4-18.6-76.7-43l34.3-19.8c9 14.7 20.8 25.6 41.5 25.6 17.4 0 28.6-8.7 28.6-20.8 0-14.4-11.4-19.5-30.7-28l-10.5-4.5c-30.4-12.9-50.5-29.2-50.5-63.5 0-31.6 24.1-55.6 61.6-55.6 26.8 0 46 9.3 59.8 33.7L368 290c-7.2-12.9-15-18-27.1-18-12.3 0-20.1 7.8-20.1 18 0 12.6 7.8 17.7 25.9 25.6l10.5 4.5c35.8 15.3 55.9 31 55.9 66.2 0 37.8-29.8 58.6-69.7 58.6z",
  image: "M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z",
  cube: "M239.1 6.3l-208 78c-18.7 7-31.1 25-31.1 45v225.1c0 18.2 10.3 34.8 26.5 42.9l208 104c13.5 6.8 29.4 6.8 42.9 0l208-104c16.3-8.1 26.5-24.8 26.5-42.9V129.3c0-20-12.4-37.9-31.1-44.9l-208-78C262 2.2 250 2.2 239.1 6.3zM256 68.4l192 72v1.1l-192 78-192-78v-1.1l192-72zm32 356V275.5l160-65v133.9l-160 80z"
};
function createIcon(name, classes) {
  const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  svg.classList.add("icon");
  if (classes)
    svg.classList.add(...classes.split(" "));
  svg.setAttribute("aria-hidden", "true");
  svg.setAttribute("viewBox", "0 0 512 512");
  svg.setAttribute("role", "img");
  svg.setAttribute("width", "1em");
  svg.setAttribute("height", "1em");
  const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
  path.setAttribute("fill", "currentColor");
  path.setAttribute("d", paths[name]);
  svg.append(path);
  return svg;
}

// src/IDE/FileTree/vendor/custom/es6tree.js
var EzTree = class {
  constructor(parentId, config2, data) {
    this.selectedId = null;
    this.parentId = parentId;
    this.parentEl = document.getElementById(parentId);
    if (!this.parentEl) {
      throw new Error(`Can't find element with id ${parentId}`);
    }
    this.parentEl.classList.add("es6-tree");
    this.config = config2 || {};
    this.data = data;
    this.handleInternalSelect();
    this.append(this.parentEl, this.data);
  }
  append(elem, data) {
    data.forEach((node) => {
      const details = document.createElement("details");
      if (node.expanded) {
        details.open = true;
      }
      elem.appendChild(details);
      const summary = document.createElement("summary");
      const span = document.createElement("span");
      if (node.id) {
        summary.dataset.id = node.id;
        span.dataset.id = node.id;
      }
      if (node.href) {
        const a = document.createElement("a");
        a.innerText = node.name;
        a.dataset.id = node.id;
        a.setAttribute("href", node.href);
        span.appendChild(a);
      } else {
        span.innerText = node.name;
      }
      span.classList.add("node-text");
      summary.appendChild(span);
      this.handleType(node, span);
      details.appendChild(summary);
      if (node.children && Array.isArray(node.children) && node.children.length > 0) {
        this.append(details, node.folders);
        this.append(details, node.files);
        details.classList.add("folder");
      } else {
        details.classList.add("file");
      }
    });
  }
  handleType(node, elem) {
    if (node.type === "folder")
      elem.classList.add("folder");
    else
      elem.classList.add("file");
    if (node.type && this.config.classes) {
      if (this.config.classes[node.type]) {
        const classes = this.config.classes[node.type].split(" ");
        elem.classList.add(...classes);
      }
    }
    if (node.type && this.config.icons) {
      if (node.type === "folder") {
        const openIcon = createIcon("folderOpen", "open-icon");
        elem.parentNode.insertBefore(openIcon, elem);
        const closedIcon = createIcon("folderClosed", "closed-icon");
        elem.parentNode.insertBefore(closedIcon, elem);
      } else if (this.config.icons[node.type]) {
        const icon = createIcon(this.config.icons[node.type].icon);
        elem.parentNode.insertBefore(icon, elem);
      }
    }
  }
  onSelect(callback, dontPreventDefault = false) {
    this.onSelectCallback = (cev) => {
      if (["SPAN", "A", "SUMMARY"].includes(cev.target.nodeName) && cev.target.dataset.id) {
        const id = cev.target.dataset.id;
        const node = this.findNode(id);
        this.handleOpen(node);
        if (!dontPreventDefault) {
          cev.preventDefault();
        } else {
          cev.stopPropagation();
        }
        if (node && node.id) {
          callback(node);
        } else {
          callback({id});
        }
      }
      if (cev.target.nodeName === "DETAILS") {
        cev.preventDefault();
      }
    };
    this.parentEl.addEventListener("click", this.onSelectCallback);
  }
  dispose() {
    this.parentEl.removeEventListener("click", this.onSelectCallback);
    this.parentEl.removeEventListener("click", this.onInternalSelectCallback);
    this.parentEl.textContent = "";
  }
  select(id) {
    this.handleSelect(id);
    this.openContainingFolder(id);
  }
  getElemByDataID(id) {
    return [...document.querySelectorAll("[data-id]")].filter((elem) => {
      return elem.dataset.id === id && elem.nodeName === "SUMMARY";
    })[0];
  }
  getContainingFolder(id) {
    let node = this.getElemByDataID(id);
    while (node.parentNode.nodeName === "DETAILS") {
      node = node.parentNode;
    }
    return node;
  }
  openContainingFolder(id) {
    this.getContainingFolder(id).setAttribute("open", "");
  }
  handleOpen(node) {
    if (node.id && node.children && Array.isArray(node.children)) {
      this.toggleOpen(node.id);
    }
  }
  toggleOpen(id) {
    const details = this.getElemByDataID(id).parentElement;
    if (details)
      details.open = !details.open;
  }
  handleInternalSelect() {
    this.onInternalSelectCallback = (cev) => {
      if (["SPAN", "A", "SUMMARY"].includes(cev.target.nodeName) && cev.target.id) {
        const id = cev.target.id;
        const node = this.findNode(id);
        if (node && node.id) {
          this.handleSelect(node.id);
        } else {
          this.handleSelect({
            id
          });
        }
      }
    };
    this.parentEl.addEventListener("click", this.onInternalSelectCallback);
  }
  handleSelect(id) {
    if (!id) {
      return;
    }
    const node = this.findNode(id);
    if (node.children) {
      this.toggleOpen(id);
    }
    if (this.selectedId) {
      if (this.selectedId === id) {
        return;
      }
      const currentSelectedEl = this.parentEl.querySelector(`span#${this.selectedId}`);
      if (currentSelectedEl) {
        this.unsetSelected(currentSelectedEl);
      }
    }
    this.selectedId = id;
    const selectedEl = this.parentEl.querySelector(`span#${id}`);
    this.setSelected(selectedEl);
  }
  setSelected(elem) {
    if (elem) {
      elem.parentElement.setAttribute("selected", "true");
    }
  }
  unsetSelected(elem) {
    elem.parentElement.removeAttribute("selected");
  }
  findNode(id) {
    const itemPath = this.findPath(id, {
      children: this.data
    });
    if (!itemPath) {
      return false;
    }
    if (!Array.isArray(itemPath) || itemPath.length === 0) {
      return false;
    }
    const last = itemPath.pop();
    return last;
  }
  selectNodeByPath(path) {
    let type = path.split(".").pop();
    if (type === void 0) {
      type = "folder";
    }
    let result = null;
    function traverse(parent) {
      if (parent.src === path && parent.type === type) {
        result = parent.id;
        return;
      }
      if (parent.children && Array.isArray(parent.children) && parent.children.length > 0) {
        for (let index = 0; index < parent.children.length; index++) {
          const child = parent.children[index];
          traverse(child);
        }
      }
    }
    traverse(this.data[0]);
    if (result)
      this.select(result);
  }
  findPath(id, root) {
    root = root || {
      children: this.data
    };
    const found = [];
    if (root.children && Array.isArray(root.children) && root.children.length > 0) {
      const children = root.children;
      for (let i = 0; i < children.length; i++) {
        const child = children[i];
        if (child.id === id) {
          found.push(child);
          return found;
        }
      }
      for (let i = 0; i < children.length; i++) {
        const child = children[i];
        const grandChild = this.findPath(id, child);
        if (grandChild && Array.isArray(grandChild) && grandChild.length > 0) {
          found.push(child);
          found.push(...grandChild);
          return found;
        }
      }
    }
    return null;
  }
};

// src/IDE/FileTree/utils/buildDirectories.js
function buildDirectories(files, fileTypes, closedFolders) {
  const paths2 = Object.keys(files).sort();
  const data = {
    id: "root",
    name: "Files",
    folder: "",
    type: "folder",
    expanded: true,
    children: [],
    files: [],
    folders: []
  };
  let currentID = 0;
  paths2.forEach((path) => {
    path.split("/").reduce((dir, sub) => {
      let child = dir.children.find((el) => el.name === sub);
      if (child) {
        return child;
      }
      const expanded = !closedFolders.includes(sub);
      child = {
        id: `item_${currentID++}`,
        name: sub,
        expanded,
        children: [],
        files: [],
        folders: []
      };
      const type = fileTypes.filter((ext) => sub.includes(ext))[0];
      if (type) {
        child.type = type.replace(".", "");
        let folder = path.split("/");
        folder.pop();
        child.folder = `${folder.join("/")}`;
        dir.files.push(child);
      } else {
        child.type = "folder";
        child.folder = `${path.split(sub)[0]}${sub}`;
        dir.folders.push(child);
      }
      child.file = files[path];
      child.src = path;
      dir.children.push(child);
      return child;
    }, data);
  });
  return data;
}

// src/IDE/FileTree/buildFileTree.js
var config = {
  icons: {
    folderOpen: {
      icon: "folderOpen",
      classes: "open-icon"
    },
    folderClosed: {
      icon: "folderClosed",
      classes: "closed-icon"
    },
    html: {
      icon: "html"
    },
    css: {
      icon: "css"
    },
    js: {
      icon: "js"
    },
    jpg: {
      icon: "image"
    },
    png: {
      icon: "image"
    },
    glb: {
      icon: "cube"
    }
  }
};
function buildFileTree(files, fileTypes, closedFolders) {
  const directories = buildDirectories(files, fileTypes, closedFolders);
  return new EzTree("filetree", config, [directories]);
}

// src/IDE/FileTree/utils/validateFileName.js
function validateFileName(name) {
  const validExtensions = ["js", "css", "html"];
  if (!name.includes(".")) {
    return false;
  } else if (validExtensions.includes(name.split(".").pop())) {
    return true;
  }
  return false;
}

// src/IDE/FileTree/utils/sanitiseFileName.js
function sanitiseFileName(name) {
  const sanitisedName = name.replace(/[^a-z0-9_.\/]/gi, "").replace(/\/$/, "");
  if (!validateFileName(sanitisedName)) {
    return null;
  }
  return sanitisedName;
}

// src/IDE/FileTree/FileTree.js
var FileTree = class {
  constructor(files, fileTypes, closedFolders = [], editor, imagePreview, comparisonsEnabled) {
    this.files = files;
    this.fileTypes = fileTypes;
    this.closedFolders = closedFolders;
    this.editor = editor;
    this.imagePreview = imagePreview;
    this.currentFolder = "";
    this.currentFile = null;
    this.comparisonsEnabled = comparisonsEnabled;
    this.init();
    this.setupCreateFileButton();
    this.setupDeleteFileButton();
  }
  dispose() {
    this.tree.dispose();
  }
  init() {
    this.tree = this.buildTree();
    this.setupOnSelect();
  }
  buildTree() {
    return buildFileTree(this.files, this.fileTypes, this.closedFolders);
  }
  setEventCallback(eventType, callback) {
    this.tree.on(eventType, callback);
  }
  setSelectedFile(file) {
    this.onSelectFile(file);
    this.currentFolder = file.folder;
    this.tree.selectNodeByPath(file.url);
  }
  selectItem(item) {
    this.currentFolder = item.folder;
    if (item.file) {
      this.onSelectFile(item.file);
    } else {
      this.currentFile = null;
    }
  }
  onSelectFile(file) {
    switch (file.type) {
      case "js":
      case "html":
      case "css":
        this.onSelectTextFile(file);
        break;
      case "png":
      case "jpg":
        this.onSelectImage(file);
        break;
      case "glb":
        this.onSelectModel(file);
        break;
      default:
        break;
    }
    this.currentFile = file;
    this.setControlsState(file);
  }
  onSelectModel(file) {
  }
  onSelectImage(file) {
    this.editor.container.classList.add("show-image");
    this.imagePreview.src = file.serverURL;
  }
  onSelectTextFile(file) {
    this.editor.container.classList.remove("show-image");
    this.editor.setActiveDocument(file);
  }
  setupOnSelect() {
    this.tree.onSelect(this.selectItem.bind(this));
  }
  setControlsState(file) {
    if (file && file.deletable && !(file.type === "folder")) {
      this.deleteFileButton.disabled = false;
    } else {
      this.deleteFileButton.disabled = true;
    }
  }
  createFile() {
    const defaultText = this.currentFolder === "styles" ? "file.css" : "file.js";
    const name = prompt("Enter a file name with extension .js, .html, or .css. \nInclude slashes (folder/file.js) to create folders.", defaultText);
    if (!name)
      return;
    const sanitisedName = sanitiseFileName(name);
    if (!sanitisedName) {
      alert("Invalid file name!");
      return;
    }
    const url = this.currentFolder ? `${this.currentFolder}/${sanitisedName}` : name;
    const data = {
      url,
      text: "",
      deletable: true
    };
    data.type = name.includes(".") ? name.split(".").pop() : "folder";
    data.comparisonsEnabled = this.comparisonsEnabled;
    const file = new File(data);
    this.files[data.url] = file;
    return file;
  }
  deleteFile(file) {
    delete this.files[file.url];
  }
  setupCreateFileButton() {
    const button = document.querySelector("#create-file-button");
    button.addEventListener("click", (e) => {
      e.preventDefault();
      const file = this.createFile();
      button.blur();
      if (!file)
        return;
      this.dispose();
      this.init();
      this.setSelectedFile(file);
    });
  }
  setupDeleteFileButton() {
    this.deleteFileButton = document.querySelector("#delete-file-button");
    this.deleteFileButton.addEventListener("click", (e) => {
      e.preventDefault();
      if (!this.currentFile) {
        return;
      }
      this.deleteFile(this.currentFile);
      this.dispose();
      this.init();
      this.setControlsState();
      this.currentFolder = "";
      this.editor.setActiveDocument(null);
    });
  }
};

// src/IDE/Preview/utils/uuid.js
function uuid() {
  return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) => (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16));
}

// src/IDE/Preview/Preview.js
var Preview = class {
  constructor() {
    this.frame = HTMLBuilder.buildPreviewFrame();
    this.externalPreviews = {};
    this.setupLogging();
    this.previewHider = document.querySelector("#preview-overlay");
    this.frame.onload = () => {
      this.onLoad();
      this.previewHider.style.display = "none";
    };
  }
  setupLogging() {
  }
  update(src) {
    this.previewHider.style.display = "block";
    this.frame.src = src;
    for (const name of Object.keys(this.externalPreviews)) {
      if (this.externalPreviews[name].closed) {
        delete this.externalPreviews[name];
      } else {
        this.externalPreviews[name].location.href = this.frame.src;
      }
    }
  }
  createWindow(name) {
    const childWindow = window.open(this.frame.src, "_blank");
    if (childWindow) {
      this.externalPreviews[name] = childWindow;
    } else {
      alert("Error: window was prevented from opening.");
    }
  }
  createExternalPreview() {
    if (this.frame && this.frame.src) {
      const name = `${document.title} Preview ${uuid()}`;
      this.createWindow(name);
    }
  }
  onLoad() {
  }
};

// src/IDE/Controls/Reset.js
var Reset = class {
  constructor(editor) {
    this.editor = editor;
    this.resetActiveFileButton = document.querySelector("#reset-active-file");
    this.resetAllButton = document.querySelector("#reset-all-files");
    this.setupResetActiveButton();
    this.setupResetAllButton();
  }
  setButtonStates() {
    this.resetActiveFileButton.disabled = !!this.editor.activeFile && !this.editor.activeFile.isDirty;
    this.resetAllButton.disabled = !this.editor.isDirty;
  }
  setupResetActiveButton() {
    this.resetActiveFileButton.addEventListener("click", () => {
      this.editor.resetActiveFile();
      this.setButtonStates();
    });
  }
  setupResetAllButton() {
    this.resetAllButton.addEventListener("click", () => {
      this.editor.resetAllFiles();
      this.setButtonStates();
    });
  }
};

// src/IDE/Controls/Controls.js
var Controls = class {
  static setupResetButtons(editor) {
    return new Reset(editor);
  }
  static setupDownloadPackageButton(downloader) {
    const downloadButton = document.querySelector("#download-button");
    downloadButton.addEventListener("click", () => {
      downloader.downloadPackage();
    });
  }
  static setupImportStyleSelect(files, enabled) {
    if (enabled !== "true") {
      return;
    }
    const selectMenu = document.querySelector("#select-import-style");
    selectMenu.disabled = false;
    selectMenu.addEventListener("change", (e) => {
      const value = e.target.options[e.target.selectedIndex].value;
      for (const file of Object.values(files)) {
        file.setImportStyle(value);
      }
    });
  }
  static openPreviewInNewWindow(preview) {
    const newWindowPreviewButton = document.querySelector("#new-window-preview");
    newWindowPreviewButton.addEventListener("click", () => {
      preview.createExternalPreview();
      newWindowPreviewButton.blur();
    });
  }
  static setupStartFinalCodeToggle(editor) {
    const toggle = document.querySelector("#toggle-complete");
    toggle.disabled = false;
    toggle.addEventListener("click", (e) => {
      if (e.target.checked) {
        editor.setComparisonState("final");
      } else {
        editor.setComparisonState("start");
      }
      editor.focus();
    });
  }
};

// src/IDE/Panels/vendor/custom/split.js
var global2 = typeof window !== "undefined" ? window : null;
var ssr = global2 === null;
var document2 = !ssr ? global2.document : void 0;
var addEventListener = "addEventListener";
var removeEventListener = "removeEventListener";
var getBoundingClientRect = "getBoundingClientRect";
var gutterStartDragging = "_a";
var aGutterSize = "_b";
var bGutterSize = "_c";
var HORIZONTAL = "horizontal";
var NOOP = function() {
  return false;
};
var calc = ssr ? "calc" : ["", "-webkit-", "-moz-", "-o-"].filter(function(prefix) {
  var el = document2.createElement("div");
  el.style.cssText = "width:" + prefix + "calc(9px)";
  return !!el.style.length;
}).shift() + "calc";
var isString = function(v) {
  return typeof v === "string" || v instanceof String;
};
var elementOrSelector = function(el) {
  if (isString(el)) {
    var ele = document2.querySelector(el);
    if (!ele) {
      throw new Error("Selector " + el + " did not match a DOM element");
    }
    return ele;
  }
  return el;
};
var getOption = function(options, propName, def) {
  var value = options[propName];
  if (value !== void 0) {
    return value;
  }
  return def;
};
var getGutterSize = function(gutterSize, isFirst, isLast, gutterAlign) {
  if (isFirst) {
    if (gutterAlign === "end") {
      return 0;
    }
    if (gutterAlign === "center") {
      return gutterSize / 2;
    }
  } else if (isLast) {
    if (gutterAlign === "start") {
      return 0;
    }
    if (gutterAlign === "center") {
      return gutterSize / 2;
    }
  }
  return gutterSize;
};
var defaultGutterFn = function(i, gutterDirection) {
  var gut = document2.createElement("div");
  gut.className = "gutter gutter-" + gutterDirection;
  return gut;
};
var defaultElementStyleFn = function(dim, size, gutSize) {
  var style = {};
  if (!isString(size)) {
    style[dim] = calc + "(" + size + "% - " + gutSize + "px)";
  } else {
    style[dim] = size;
  }
  return style;
};
var defaultGutterStyleFn = function(dim, gutSize) {
  var obj;
  return obj = {}, obj[dim] = gutSize + "px", obj;
};
var Split = function(idsOption, options) {
  if (options === void 0)
    options = {};
  if (ssr) {
    return {};
  }
  var ids = idsOption;
  var dimension;
  var clientAxis;
  var position;
  var positionEnd;
  var clientSize;
  var elements;
  if (Array.from) {
    ids = Array.from(ids);
  }
  var firstElement = elementOrSelector(ids[0]);
  var parent = firstElement.parentNode;
  var parentStyle = getComputedStyle ? getComputedStyle(parent) : null;
  var parentFlexDirection = parentStyle ? parentStyle.flexDirection : null;
  var sizes = getOption(options, "sizes") || ids.map(function() {
    return 100 / ids.length;
  });
  var minSize = getOption(options, "minSize", 100);
  var minSizes = Array.isArray(minSize) ? minSize : ids.map(function() {
    return minSize;
  });
  var expandToMin = getOption(options, "expandToMin", false);
  var gutterSize = getOption(options, "gutterSize", 10);
  var gutterAlign = getOption(options, "gutterAlign", "center");
  var snapOffset = getOption(options, "snapOffset", 30);
  var dragInterval = getOption(options, "dragInterval", 1);
  var direction = getOption(options, "direction", HORIZONTAL);
  var cursor = getOption(options, "cursor", direction === HORIZONTAL ? "col-resize" : "row-resize");
  var gutter = getOption(options, "gutter", defaultGutterFn);
  var elementStyle = getOption(options, "elementStyle", defaultElementStyleFn);
  var gutterStyle = getOption(options, "gutterStyle", defaultGutterStyleFn);
  if (direction === HORIZONTAL) {
    dimension = "width";
    clientAxis = "clientX";
    position = "left";
    positionEnd = "right";
    clientSize = "clientWidth";
  } else if (direction === "vertical") {
    dimension = "height";
    clientAxis = "clientY";
    position = "top";
    positionEnd = "bottom";
    clientSize = "clientHeight";
  }
  function setElementSize(el, size, gutSize, i) {
    var style = elementStyle(dimension, size, gutSize, i);
    Object.keys(style).forEach(function(prop) {
      el.style[prop] = style[prop];
    });
  }
  function setGutterSize(gutterElement, gutSize, i) {
    var style = gutterStyle(dimension, gutSize, i);
    Object.keys(style).forEach(function(prop) {
      gutterElement.style[prop] = style[prop];
    });
  }
  function getSizes() {
    return elements.map(function(element) {
      return element.size;
    });
  }
  function getMousePosition(e) {
    if ("touches" in e) {
      return e.touches[0][clientAxis];
    }
    return e[clientAxis];
  }
  function adjust(offset) {
    var a = elements[this.a];
    var b = elements[this.b];
    var percentage = a.size + b.size;
    a.size = offset / this.size * percentage;
    b.size = percentage - offset / this.size * percentage;
    setElementSize(a.element, a.size, this[aGutterSize], a.i);
    setElementSize(b.element, b.size, this[bGutterSize], b.i);
  }
  function drag(e) {
    var offset;
    var a = elements[this.a];
    var b = elements[this.b];
    if (!this.dragging) {
      return;
    }
    offset = getMousePosition(e) - this.start + (this[aGutterSize] - this.dragOffset);
    if (dragInterval > 1) {
      offset = Math.round(offset / dragInterval) * dragInterval;
    }
    if (offset <= a.minSize + snapOffset + this[aGutterSize]) {
      offset = a.minSize + this[aGutterSize];
    } else if (offset >= this.size - (b.minSize + snapOffset + this[bGutterSize])) {
      offset = this.size - (b.minSize + this[bGutterSize]);
    }
    adjust.call(this, offset);
    getOption(options, "onDrag", NOOP)();
  }
  function calculateSizes() {
    var a = elements[this.a].element;
    var b = elements[this.b].element;
    var aBounds = a[getBoundingClientRect]();
    var bBounds = b[getBoundingClientRect]();
    this.size = aBounds[dimension] + bBounds[dimension] + this[aGutterSize] + this[bGutterSize];
    this.start = aBounds[position];
    this.end = aBounds[positionEnd];
  }
  function innerSize(element) {
    if (!getComputedStyle) {
      return null;
    }
    var computedStyle = getComputedStyle(element);
    if (!computedStyle) {
      return null;
    }
    var size = element[clientSize];
    if (size === 0) {
      return null;
    }
    if (direction === HORIZONTAL) {
      size -= parseFloat(computedStyle.paddingLeft) + parseFloat(computedStyle.paddingRight);
    } else {
      size -= parseFloat(computedStyle.paddingTop) + parseFloat(computedStyle.paddingBottom);
    }
    return size;
  }
  function trimToMin(sizesToTrim) {
    var parentSize = innerSize(parent);
    if (parentSize === null) {
      return sizesToTrim;
    }
    if (minSizes.reduce(function(a, b) {
      return a + b;
    }, 0) > parentSize) {
      return sizesToTrim;
    }
    var excessPixels = 0;
    var toSpare = [];
    var pixelSizes = sizesToTrim.map(function(size, i) {
      var pixelSize = parentSize * size / 100;
      var elementGutterSize = getGutterSize(gutterSize, i === 0, i === sizesToTrim.length - 1, gutterAlign);
      var elementMinSize = minSizes[i] + elementGutterSize;
      if (pixelSize < elementMinSize) {
        excessPixels += elementMinSize - pixelSize;
        toSpare.push(0);
        return elementMinSize;
      }
      toSpare.push(pixelSize - elementMinSize);
      return pixelSize;
    });
    if (excessPixels === 0) {
      return sizesToTrim;
    }
    return pixelSizes.map(function(pixelSize, i) {
      var newPixelSize = pixelSize;
      if (excessPixels > 0 && toSpare[i] - excessPixels > 0) {
        var takenPixels = Math.min(excessPixels, toSpare[i] - excessPixels);
        excessPixels -= takenPixels;
        newPixelSize = pixelSize - takenPixels;
      }
      return newPixelSize / parentSize * 100;
    });
  }
  function stopDragging() {
    var self2 = this;
    var a = elements[self2.a].element;
    var b = elements[self2.b].element;
    if (self2.dragging) {
      getOption(options, "onDragEnd", NOOP)(getSizes());
    }
    self2.dragging = false;
    global2[removeEventListener]("mouseup", self2.stop);
    global2[removeEventListener]("touchend", self2.stop);
    global2[removeEventListener]("touchcancel", self2.stop);
    global2[removeEventListener]("mousemove", self2.move);
    global2[removeEventListener]("touchmove", self2.move);
    self2.stop = null;
    self2.move = null;
    a[removeEventListener]("selectstart", NOOP);
    a[removeEventListener]("dragstart", NOOP);
    b[removeEventListener]("selectstart", NOOP);
    b[removeEventListener]("dragstart", NOOP);
    a.style.userSelect = "";
    a.style.webkitUserSelect = "";
    a.style.MozUserSelect = "";
    a.style.pointerEvents = "";
    b.style.userSelect = "";
    b.style.webkitUserSelect = "";
    b.style.MozUserSelect = "";
    b.style.pointerEvents = "";
    self2.gutter.style.cursor = "";
    self2.parent.style.cursor = "";
    document2.body.style.cursor = "";
  }
  function startDragging(e) {
    if ("button" in e && e.button !== 0) {
      return;
    }
    var self2 = this;
    var a = elements[self2.a].element;
    var b = elements[self2.b].element;
    if (!self2.dragging) {
      getOption(options, "onDragStart", NOOP)(getSizes());
    }
    e.preventDefault();
    self2.dragging = true;
    self2.move = drag.bind(self2);
    self2.stop = stopDragging.bind(self2);
    global2[addEventListener]("mouseup", self2.stop);
    global2[addEventListener]("touchend", self2.stop);
    global2[addEventListener]("touchcancel", self2.stop);
    global2[addEventListener]("mousemove", self2.move);
    global2[addEventListener]("touchmove", self2.move);
    a[addEventListener]("selectstart", NOOP);
    a[addEventListener]("dragstart", NOOP);
    b[addEventListener]("selectstart", NOOP);
    b[addEventListener]("dragstart", NOOP);
    a.style.userSelect = "none";
    a.style.webkitUserSelect = "none";
    a.style.MozUserSelect = "none";
    a.style.pointerEvents = "none";
    b.style.userSelect = "none";
    b.style.webkitUserSelect = "none";
    b.style.MozUserSelect = "none";
    b.style.pointerEvents = "none";
    self2.gutter.style.cursor = cursor;
    self2.parent.style.cursor = cursor;
    document2.body.style.cursor = cursor;
    calculateSizes.call(self2);
    self2.dragOffset = getMousePosition(e) - self2.end;
  }
  sizes = trimToMin(sizes);
  var pairs = [];
  elements = ids.map(function(id, i) {
    var element = {
      element: elementOrSelector(id),
      size: sizes[i],
      minSize: minSizes[i],
      i
    };
    var pair;
    if (i > 0) {
      pair = {
        a: i - 1,
        b: i,
        dragging: false,
        direction,
        parent
      };
      pair[aGutterSize] = getGutterSize(gutterSize, i - 1 === 0, false, gutterAlign);
      pair[bGutterSize] = getGutterSize(gutterSize, false, i === ids.length - 1, gutterAlign);
      if (parentFlexDirection === "row-reverse" || parentFlexDirection === "column-reverse") {
        var temp = pair.a;
        pair.a = pair.b;
        pair.b = temp;
      }
    }
    if (i > 0) {
      var gutterElement = gutter(i, direction, element.element);
      setGutterSize(gutterElement, gutterSize, i);
      pair[gutterStartDragging] = startDragging.bind(pair);
      gutterElement[addEventListener]("mousedown", pair[gutterStartDragging]);
      gutterElement[addEventListener]("touchstart", pair[gutterStartDragging]);
      parent.insertBefore(gutterElement, element.element);
      pair.gutter = gutterElement;
    }
    setElementSize(element.element, element.size, getGutterSize(gutterSize, i === 0, i === ids.length - 1, gutterAlign), i);
    if (i > 0) {
      pairs.push(pair);
    }
    return element;
  });
  function adjustToMin(element) {
    var isLast = element.i === pairs.length;
    var pair = isLast ? pairs[element.i - 1] : pairs[element.i];
    calculateSizes.call(pair);
    var size = isLast ? pair.size - element.minSize - pair[bGutterSize] : element.minSize + pair[aGutterSize];
    adjust.call(pair, size);
  }
  elements.forEach(function(element) {
    var computedSize = element.element[getBoundingClientRect]()[dimension];
    if (computedSize < element.minSize) {
      if (expandToMin) {
        adjustToMin(element);
      } else {
        element.minSize = computedSize;
      }
    }
  });
  function setSizes(newSizes) {
    var trimmed = trimToMin(newSizes);
    trimmed.forEach(function(newSize, i) {
      if (i > 0) {
        var pair = pairs[i - 1];
        var a = elements[pair.a];
        var b = elements[pair.b];
        a.size = trimmed[i - 1];
        b.size = newSize;
        setElementSize(a.element, a.size, pair[aGutterSize], a.i);
        setElementSize(b.element, b.size, pair[bGutterSize], b.i);
      }
    });
  }
  function destroy(preserveStyles, preserveGutter) {
    pairs.forEach(function(pair) {
      if (preserveGutter !== true) {
        pair.parent.removeChild(pair.gutter);
      } else {
        pair.gutter[removeEventListener]("mousedown", pair[gutterStartDragging]);
        pair.gutter[removeEventListener]("touchstart", pair[gutterStartDragging]);
      }
      if (preserveStyles !== true) {
        var style = elementStyle(dimension, pair.a.size, pair[aGutterSize]);
        Object.keys(style).forEach(function(prop) {
          elements[pair.a].element.style[prop] = "";
          elements[pair.b].element.style[prop] = "";
        });
      }
    });
  }
  return {
    setSizes,
    getSizes,
    collapse: function collapse(i) {
      adjustToMin(elements[i]);
    },
    destroy,
    parent,
    pairs
  };
};
var split_default = Split;

// src/IDE/Panels/Panels.js
var Panels = class {
  constructor(ide, preview) {
    this.ide = ide;
  }
  init(config2) {
    this.panelElements = document.querySelectorAll(".panel");
    this.config = config2 || {};
    this.panels = this.createPanels(config2);
    this.restoreState();
  }
  saveState() {
    const state = {};
    Object.keys(this.panels).forEach((name) => {
      const panel = this.panels[name];
      if (panel.split) {
        state[name] = {
          sizes: panel.split.getSizes()
        };
        if (panel.toggle) {
          state[name].toggleChecked = panel.toggle.elem.checked;
        }
      }
    });
    localStorage.setItem("split-state", JSON.stringify(state));
  }
  restoreState() {
    const state = JSON.parse(localStorage.getItem("split-state"));
    if (!state)
      return;
    Object.keys(this.panels).forEach((name) => {
      const panel = this.panels[name];
      if (state[name]) {
        if (state[name].sizes)
          panel.split.setSizes(state[name].sizes);
        if (state[name].toggleChecked !== void 0) {
          panel.enable(state[name].toggleChecked);
          panel.toggle.elem.checked = state[name].toggleChecked;
        }
      }
    });
  }
  createPanels(config2) {
    const panels2 = {};
    for (const name of Object.keys(config2.splits)) {
      const details = config2.splits[name];
      const panel = {
        name,
        config: details,
        breakpoint: details.breakpoint || 0,
        isOpen: null,
        mainPanelIndex: details.mainPanel || 0
      };
      panel.minorPanelIndex = (panel.mainPanelIndex + 1) % 2;
      panel.toggle = this.createToggle(panel);
      panel.elements = details.selectors.map((selector) => document.querySelector(selector));
      panel.split = this.createSplit(panel);
      panel.enable = (bool) => {
        if (bool === false) {
          panel.isOpen = false;
          panel.elements[panel.minorPanelIndex].classList.add("disabled");
          panel.elements[panel.mainPanelIndex].classList.add("maximise");
          panel.split.pairs[0].gutter.classList.add("disabled");
        } else {
          panel.isOpen = true;
          panel.elements[panel.minorPanelIndex].classList.remove("disabled");
          panel.elements[panel.mainPanelIndex].classList.remove("maximise");
          panel.split.pairs[0].gutter.classList.remove("disabled");
          if (panel.name === "main") {
            setTimeout(() => {
              this.ide.editor.refresh();
              this.ide.editor.focus();
              this.ide.updatePreview();
            }, 1);
          }
        }
      };
      panels2[name] = panel;
      if (panel.toggle)
        this.setupOnToggle(panel);
      this.collapseBelowBreakpoint(panel);
    }
    return panels2;
  }
  createSplit(panel) {
    return new split_default(panel.config.selectors, {
      direction: panel.config.direction || "horizontal",
      dragInterval: panel.config.dragInterval || this.config.dragInterval || 1,
      elementStyle: panel.config.elementStyle || this.config.elementStyle || void 0,
      gutterSize: panel.config.gutterSize || this.config.gutterSize || 1,
      gutterStyle: panel.config.gutterStyle || this.config.gutterStyle || void 0,
      minSize: panel.config.minSize,
      sizes: panel.config.size,
      snapOffset: panel.config.snapOffset || 0,
      onDragStart: () => {
        this.enablePanelAnimation(false);
      },
      onDragEnd: (sizes) => {
        if (!panel.toggle)
          return;
        const minorPanelSize = sizes[panel.minorPanelIndex];
        if (minorPanelSize > 1) {
          panel.toggle.elem.checked = true;
          panel.enable(true);
        } else {
          panel.toggle.elem.checked = false;
          panel.enable(false);
        }
        this.saveState();
        this.enablePanelAnimation(true);
      }
    });
  }
  collapseBelowBreakpoint(panel) {
    if (panel.breakpoint > 0) {
      const direction = panel.split.pairs[0].direction;
      let parentSize;
      if (direction === "horizontal")
        parentSize = panel.split.parent.clientWidth;
      else
        parentSize = panel.split.parent.clientHeight;
      if (parentSize > panel.breakpoint) {
        panel.enable(true);
      } else {
        panel.enable(false);
      }
    }
  }
  createToggle(panel) {
    if (!panel.config.toggle)
      return null;
    const toggleElem = document.querySelector(panel.config.toggle);
    const toggle = {
      elem: toggleElem,
      onIcon: toggleElem.labels[0].querySelector(".on-icon"),
      offIcon: toggleElem.labels[0].querySelector(".off-icon")
    };
    return toggle;
  }
  setupOnToggle(panel) {
    const onToggle = () => {
      if (panel.toggle.elem.checked) {
        panel.enable(true);
        if (panel.config.toggleSize)
          panel.split.setSizes(panel.config.toggleSize);
        else
          panel.split.setSizes(panel.config.size);
      } else {
        panel.enable(false);
        panel.split.collapse(panel.minorPanelIndex);
      }
      this.saveState();
    };
    panel.toggle.elem.addEventListener("click", onToggle);
    panel.toggle.dispose = () => {
      panel.toggle.elem.removeEventListener("click", onToggle);
    };
  }
  enablePanelAnimation(bool) {
    this.panelElements.forEach((panel) => {
      if (bool)
        panel.classList.add("animate");
      else
        panel.classList.remove("animate");
    });
  }
  dispose() {
    if (!this.panels)
      return;
    Object.values(this.panels).forEach((panel) => {
      panel.split.destroy();
      if (panel.toggle)
        panel.toggle.dispose();
    });
    this.panels = null;
  }
};

// src/IDE/Panels/createPanelConfig.js
var panelBreakpoint = 1024;
function createPanelConfig(direction, fullscreen) {
  let gutterSize = 5;
  if (window.innerWidth < 768)
    gutterSize = 10;
  const config2 = {
    elementStyle: (dimension, size, gutterSize2) => {
      return {
        "flex-basis": `calc(${size}% - ${gutterSize2}px)`
      };
    },
    gutterStyle: (dimension, gutterSize2) => {
      return {
        "flex-basis": `${gutterSize2}px`
      };
    },
    splits: {
      ide: {
        isTopPanel: fullscreen,
        direction: "vertical",
        gutterSize,
        snapOffset: 50,
        selectors: ["#editor-panel", "#preview"],
        mainPanel: 0,
        size: [60, 40],
        minSize: [0, 0],
        toggle: "#toggle-preview"
      },
      editor: {
        direction: "horizontal",
        gutterSize,
        snapOffset: 50,
        selectors: ["#filetree-panel", "#editor"],
        mainPanel: 1,
        size: [0, 100],
        minSize: [0, 0],
        toggleSize: [50, 50],
        toggle: "#toggle-filetree"
      }
    }
  };
  if (!fullscreen) {
    config2.splits.main = {
      isTopPanel: true,
      direction,
      breakpoint: panelBreakpoint,
      gutterSize,
      snapOffset: 0,
      selectors: ["main", "#ide-wrapper"],
      mainPanel: 0,
      size: [0, 0],
      minSize: [0, 0],
      toggle: "#toggle-ide"
    };
  }
  return config2;
}

// src/IDE/Panels/orientationControl.js
function saveState(string) {
  const state = {
    orientation: string
  };
  localStorage.setItem("orientation-lock-state", JSON.stringify(state));
}
function getState() {
  const state = JSON.parse(localStorage.getItem("orientation-lock-state"));
  if (state && state.orientation)
    return state.orientation;
  return "auto";
}
var OrientationControl = class {
  constructor() {
    this.wrapper = document.querySelector(".wrapper");
    const toggle = document.querySelector("#orientation-toggle");
    if (!toggle)
      return;
    this.label = toggle.labels[0];
    this.onChange = () => {
    };
    this.label.classList.remove("hide");
    const stateValues = ["auto", "portrait", "landscape"];
    this.state = getState();
    this.setOrientationLock(this.state, this.onChange);
    toggle.addEventListener("click", (e) => {
      e.preventDefault();
      const nextState = stateValues[(stateValues.indexOf(this.state) + 1) % stateValues.length];
      this.state = nextState;
      this.setOrientationLock(this.state);
      this.onChange(this.getLayout());
    });
  }
  setOrientationLock(value) {
    switch (value) {
      case "auto":
        this.wrapper.classList.remove("orientation-portrait", "orientation-landscape");
        this.wrapper.classList.add("orientation-auto");
        this.label.querySelector(".auto-icon").classList.remove("hide");
        this.label.querySelector(".portrait-icon").classList.add("hide");
        this.label.querySelector(".landscape-icon").classList.add("hide");
        break;
      case "portrait":
        this.wrapper.classList.remove("orientation-auto", "orientation-landscape");
        this.wrapper.classList.add("orientation-portrait");
        this.label.querySelector(".auto-icon").classList.add("hide");
        this.label.querySelector(".portrait-icon").classList.remove("hide");
        this.label.querySelector(".landscape-icon").classList.add("hide");
        break;
      case "landscape":
        this.wrapper.classList.remove("orientation-auto", "orientation-portrait");
        this.wrapper.classList.add("orientation-landscape");
        this.label.querySelector(".auto-icon").classList.add("hide");
        this.label.querySelector(".portrait-icon").classList.add("hide");
        this.label.querySelector(".landscape-icon").classList.remove("hide");
        break;
      default:
        break;
    }
    this.state = value;
    saveState(value);
  }
  getLayout() {
    switch (this.state) {
      case "landscape":
        return "horizontal";
      case "portrait":
        return "vertical";
      case "auto":
      default:
        return window.innerHeight > window.innerWidth ? "vertical" : "horizontal";
    }
  }
};

// src/IDE/Panels/setupPanels.js
var panels;
var layout;
var orientationControls;
var fullScreen;
var initPanels = () => {
  const newLayout = orientationControls.getLayout();
  if (newLayout === layout && panels)
    return;
  layout = newLayout;
  panels.dispose();
  const config2 = createPanelConfig(layout, fullScreen);
  panels.init(config2);
};
function setupPanels(ide, isFullScreen) {
  fullScreen = isFullScreen;
  orientationControls = new OrientationControl();
  panels = new Panels(ide);
  initPanels();
  window.addEventListener("resize", initPanels);
  if (!fullScreen) {
    orientationControls.onChange = initPanels;
  }
}

// src/IDE/Downloader/Downloader.js
var import_file_saver = __toModule(require_FileSaver_min());

// src/IDE/Downloader/utils/generateNameFromPageTitle.js
function generateNameFromPageTitle() {
  return document.title.split("|")[0].trim().replace(/ /g, "_").replace(/[^a-z0-9_]/gi, "");
}

// src/IDE/Downloader/vendor/custom/UZIP.js
var UZIP = {};
UZIP["parse"] = function(buf, onlyNames) {
  var rUs = UZIP.bin.readUshort, rUi = UZIP.bin.readUint, o = 0, out = {};
  var data = new Uint8Array(buf);
  var eocd = data.length - 4;
  while (rUi(data, eocd) != 101010256)
    eocd--;
  var o = eocd;
  o += 4;
  o += 4;
  var cnu = rUs(data, o);
  o += 2;
  var cnt = rUs(data, o);
  o += 2;
  var csize = rUi(data, o);
  o += 4;
  var coffs = rUi(data, o);
  o += 4;
  o = coffs;
  for (var i = 0; i < cnu; i++) {
    var sign = rUi(data, o);
    o += 4;
    o += 4;
    o += 4;
    o += 4;
    var crc32 = rUi(data, o);
    o += 4;
    var csize = rUi(data, o);
    o += 4;
    var usize = rUi(data, o);
    o += 4;
    var nl = rUs(data, o), el = rUs(data, o + 2), cl = rUs(data, o + 4);
    o += 6;
    o += 8;
    var roff = rUi(data, o);
    o += 4;
    o += nl + el + cl;
    UZIP._readLocal(data, roff, out, csize, usize, onlyNames);
  }
  return out;
};
UZIP._readLocal = function(data, o, out, csize, usize, onlyNames) {
  var rUs = UZIP.bin.readUshort, rUi = UZIP.bin.readUint;
  var sign = rUi(data, o);
  o += 4;
  var ver = rUs(data, o);
  o += 2;
  var gpflg = rUs(data, o);
  o += 2;
  var cmpr = rUs(data, o);
  o += 2;
  var time = rUi(data, o);
  o += 4;
  var crc32 = rUi(data, o);
  o += 4;
  o += 8;
  var nlen = rUs(data, o);
  o += 2;
  var elen = rUs(data, o);
  o += 2;
  var name = UZIP.bin.readUTF8(data, o, nlen);
  o += nlen;
  o += elen;
  if (onlyNames) {
    out[name] = {size: usize, csize};
    return;
  }
  var file = new Uint8Array(data.buffer, o);
  if (false) {
  } else if (cmpr == 0)
    out[name] = new Uint8Array(file.buffer.slice(o, o + csize));
  else if (cmpr == 8) {
    var buf = new Uint8Array(usize);
    UZIP.inflateRaw(file, buf);
    out[name] = buf;
  } else
    throw "unknown compression method: " + cmpr;
};
UZIP.inflateRaw = function(file, buf) {
  return UZIP.F.inflate(file, buf);
};
UZIP.inflate = function(file, buf) {
  var CMF = file[0], FLG = file[1];
  var CM = CMF & 15, CINFO = CMF >>> 4;
  return UZIP.inflateRaw(new Uint8Array(file.buffer, file.byteOffset + 2, file.length - 6), buf);
};
UZIP.deflate = function(data, opts) {
  if (opts == null)
    opts = {level: 6};
  var off = 0, buf = new Uint8Array(50 + Math.floor(data.length * 1.1));
  buf[off] = 120;
  buf[off + 1] = 156;
  off += 2;
  off = UZIP.F.deflateRaw(data, buf, off, opts.level);
  var crc = UZIP.adler(data, 0, data.length);
  buf[off + 0] = crc >>> 24 & 255;
  buf[off + 1] = crc >>> 16 & 255;
  buf[off + 2] = crc >>> 8 & 255;
  buf[off + 3] = crc >>> 0 & 255;
  return new Uint8Array(buf.buffer, 0, off + 4);
};
UZIP.deflateRaw = function(data, opts) {
  if (opts == null)
    opts = {level: 6};
  var buf = new Uint8Array(50 + Math.floor(data.length * 1.1));
  var off = UZIP.F.deflateRaw(data, buf, off, opts.level);
  return new Uint8Array(buf.buffer, 0, off);
};
UZIP.encode = function(obj, noCmpr) {
  if (noCmpr == null)
    noCmpr = false;
  var tot = 0, wUi = UZIP.bin.writeUint, wUs = UZIP.bin.writeUshort;
  var zpd = {};
  for (var p in obj) {
    var cpr = !UZIP._noNeed(p) && !noCmpr, buf = obj[p], crc = UZIP.crc.crc(buf, 0, buf.length);
    zpd[p] = {
      cpr,
      usize: buf.length,
      crc,
      file: cpr ? UZIP.deflateRaw(buf) : buf
    };
  }
  for (var p in zpd)
    tot += zpd[p].file.length + 30 + 46 + 2 * UZIP.bin.sizeUTF8(p);
  tot += 22;
  var data = new Uint8Array(tot), o = 0;
  var fof = [];
  for (var p in zpd) {
    var file = zpd[p];
    fof.push(o);
    o = UZIP._writeHeader(data, o, p, file, 0);
  }
  var i = 0, ioff = o;
  for (var p in zpd) {
    var file = zpd[p];
    fof.push(o);
    o = UZIP._writeHeader(data, o, p, file, 1, fof[i++]);
  }
  var csize = o - ioff;
  wUi(data, o, 101010256);
  o += 4;
  o += 4;
  wUs(data, o, i);
  o += 2;
  wUs(data, o, i);
  o += 2;
  wUi(data, o, csize);
  o += 4;
  wUi(data, o, ioff);
  o += 4;
  o += 2;
  return data.buffer;
};
UZIP._noNeed = function(fn) {
  var ext = fn.split(".").pop().toLowerCase();
  return "png,jpg,jpeg,zip".indexOf(ext) != -1;
};
UZIP._writeHeader = function(data, o, p, obj, t, roff) {
  var wUi = UZIP.bin.writeUint, wUs = UZIP.bin.writeUshort;
  var file = obj.file;
  wUi(data, o, t == 0 ? 67324752 : 33639248);
  o += 4;
  if (t == 1)
    o += 2;
  wUs(data, o, 20);
  o += 2;
  wUs(data, o, 0);
  o += 2;
  wUs(data, o, obj.cpr ? 8 : 0);
  o += 2;
  wUi(data, o, 0);
  o += 4;
  wUi(data, o, obj.crc);
  o += 4;
  wUi(data, o, file.length);
  o += 4;
  wUi(data, o, obj.usize);
  o += 4;
  wUs(data, o, UZIP.bin.sizeUTF8(p));
  o += 2;
  wUs(data, o, 0);
  o += 2;
  if (t == 1) {
    o += 2;
    o += 2;
    o += 6;
    wUi(data, o, roff);
    o += 4;
  }
  var nlen = UZIP.bin.writeUTF8(data, o, p);
  o += nlen;
  if (t == 0) {
    data.set(file, o);
    o += file.length;
  }
  return o;
};
UZIP.crc = {
  table: function() {
    var tab = new Uint32Array(256);
    for (var n = 0; n < 256; n++) {
      var c = n;
      for (var k = 0; k < 8; k++) {
        if (c & 1)
          c = 3988292384 ^ c >>> 1;
        else
          c = c >>> 1;
      }
      tab[n] = c;
    }
    return tab;
  }(),
  update: function(c, buf, off, len) {
    for (var i = 0; i < len; i++)
      c = UZIP.crc.table[(c ^ buf[off + i]) & 255] ^ c >>> 8;
    return c;
  },
  crc: function(b, o, l) {
    return UZIP.crc.update(4294967295, b, o, l) ^ 4294967295;
  }
};
UZIP.adler = function(data, o, len) {
  var a = 1, b = 0;
  var off = o, end = o + len;
  while (off < end) {
    var eend = Math.min(off + 5552, end);
    while (off < eend) {
      a += data[off++];
      b += a;
    }
    a = a % 65521;
    b = b % 65521;
  }
  return b << 16 | a;
};
UZIP.bin = {
  readUshort: function(buff, p) {
    return buff[p] | buff[p + 1] << 8;
  },
  writeUshort: function(buff, p, n) {
    buff[p] = n & 255;
    buff[p + 1] = n >> 8 & 255;
  },
  readUint: function(buff, p) {
    return buff[p + 3] * (256 * 256 * 256) + (buff[p + 2] << 16 | buff[p + 1] << 8 | buff[p]);
  },
  writeUint: function(buff, p, n) {
    buff[p] = n & 255;
    buff[p + 1] = n >> 8 & 255;
    buff[p + 2] = n >> 16 & 255;
    buff[p + 3] = n >> 24 & 255;
  },
  readASCII: function(buff, p, l) {
    var s = "";
    for (var i = 0; i < l; i++)
      s += String.fromCharCode(buff[p + i]);
    return s;
  },
  writeASCII: function(data, p, s) {
    for (var i = 0; i < s.length; i++)
      data[p + i] = s.charCodeAt(i);
  },
  pad: function(n) {
    return n.length < 2 ? "0" + n : n;
  },
  readUTF8: function(buff, p, l) {
    var s = "", ns;
    for (var i = 0; i < l; i++)
      s += "%" + UZIP.bin.pad(buff[p + i].toString(16));
    try {
      ns = decodeURIComponent(s);
    } catch (e) {
      return UZIP.bin.readASCII(buff, p, l);
    }
    return ns;
  },
  writeUTF8: function(buff, p, str) {
    var strl = str.length, i = 0;
    for (var ci = 0; ci < strl; ci++) {
      var code = str.charCodeAt(ci);
      if ((code & 4294967295 - (1 << 7) + 1) == 0) {
        buff[p + i] = code;
        i++;
      } else if ((code & 4294967295 - (1 << 11) + 1) == 0) {
        buff[p + i] = 192 | code >> 6;
        buff[p + i + 1] = 128 | code >> 0 & 63;
        i += 2;
      } else if ((code & 4294967295 - (1 << 16) + 1) == 0) {
        buff[p + i] = 224 | code >> 12;
        buff[p + i + 1] = 128 | code >> 6 & 63;
        buff[p + i + 2] = 128 | code >> 0 & 63;
        i += 3;
      } else if ((code & 4294967295 - (1 << 21) + 1) == 0) {
        buff[p + i] = 240 | code >> 18;
        buff[p + i + 1] = 128 | code >> 12 & 63;
        buff[p + i + 2] = 128 | code >> 6 & 63;
        buff[p + i + 3] = 128 | code >> 0 & 63;
        i += 4;
      } else
        throw "e";
    }
    return i;
  },
  sizeUTF8: function(str) {
    var strl = str.length, i = 0;
    for (var ci = 0; ci < strl; ci++) {
      var code = str.charCodeAt(ci);
      if ((code & 4294967295 - (1 << 7) + 1) == 0) {
        i++;
      } else if ((code & 4294967295 - (1 << 11) + 1) == 0) {
        i += 2;
      } else if ((code & 4294967295 - (1 << 16) + 1) == 0) {
        i += 3;
      } else if ((code & 4294967295 - (1 << 21) + 1) == 0) {
        i += 4;
      } else
        throw "e";
    }
    return i;
  }
};
UZIP.F = {};
UZIP.F.deflateRaw = function(data, out, opos, lvl) {
  var opts = [
    [0, 0, 0, 0, 0],
    [4, 4, 8, 4, 0],
    [4, 5, 16, 8, 0],
    [4, 6, 16, 16, 0],
    [4, 10, 16, 32, 0],
    [8, 16, 32, 32, 0],
    [8, 16, 128, 128, 0],
    [8, 32, 128, 256, 0],
    [32, 128, 258, 1024, 1],
    [32, 258, 258, 4096, 1]
  ];
  var opt = opts[lvl];
  var U = UZIP.F.U, goodIndex = UZIP.F._goodIndex, hash = UZIP.F._hash, putsE = UZIP.F._putsE;
  var i = 0, pos = opos << 3, cvrd = 0, dlen = data.length;
  if (lvl == 0) {
    while (i < dlen) {
      var len = Math.min(65535, dlen - i);
      putsE(out, pos, i + len == dlen ? 1 : 0);
      pos = UZIP.F._copyExact(data, i, len, out, pos + 8);
      i += len;
    }
    return pos >>> 3;
  }
  var lits = U.lits, strt = U.strt, prev = U.prev, li = 0, lc = 0, bs = 0, ebits = 0, c = 0, nc = 0;
  if (dlen > 2) {
    nc = UZIP.F._hash(data, 0);
    strt[nc] = 0;
  }
  var nmch = 0, nmci = 0;
  for (i = 0; i < dlen; i++) {
    c = nc;
    if (i + 1 < dlen - 2) {
      nc = UZIP.F._hash(data, i + 1);
      var ii = i + 1 & 32767;
      prev[ii] = strt[nc];
      strt[nc] = ii;
    }
    if (cvrd <= i) {
      if ((li > 14e3 || lc > 26697) && dlen - i > 100) {
        if (cvrd < i) {
          lits[li] = i - cvrd;
          li += 2;
          cvrd = i;
        }
        pos = UZIP.F._writeBlock(i == dlen - 1 || cvrd == dlen ? 1 : 0, lits, li, ebits, data, bs, i - bs, out, pos);
        li = lc = ebits = 0;
        bs = i;
      }
      var mch = 0;
      if (i < dlen - 2)
        mch = UZIP.F._bestMatch(data, i, prev, c, Math.min(opt[2], dlen - i), opt[3]);
      var len = mch >>> 16, dst = mch & 65535;
      if (mch != 0) {
        var len = mch >>> 16, dst = mch & 65535;
        var lgi = goodIndex(len, U.of0);
        U.lhst[257 + lgi]++;
        var dgi = goodIndex(dst, U.df0);
        U.dhst[dgi]++;
        ebits += U.exb[lgi] + U.dxb[dgi];
        lits[li] = len << 23 | i - cvrd;
        lits[li + 1] = dst << 16 | lgi << 8 | dgi;
        li += 2;
        cvrd = i + len;
      } else {
        U.lhst[data[i]]++;
      }
      lc++;
    }
  }
  if (bs != i || data.length == 0) {
    if (cvrd < i) {
      lits[li] = i - cvrd;
      li += 2;
      cvrd = i;
    }
    pos = UZIP.F._writeBlock(1, lits, li, ebits, data, bs, i - bs, out, pos);
    li = 0;
    lc = 0;
    li = lc = ebits = 0;
    bs = i;
  }
  while ((pos & 7) != 0)
    pos++;
  return pos >>> 3;
};
UZIP.F._bestMatch = function(data, i, prev, c, nice, chain) {
  var ci = i & 32767, pi = prev[ci];
  var dif = ci - pi + (1 << 15) & 32767;
  if (pi == ci || c != UZIP.F._hash(data, i - dif))
    return 0;
  var tl = 0, td = 0;
  var dlim = Math.min(32767, i);
  while (dif <= dlim && --chain != 0 && pi != ci) {
    if (tl == 0 || data[i + tl] == data[i + tl - dif]) {
      var cl = UZIP.F._howLong(data, i, dif);
      if (cl > tl) {
        tl = cl;
        td = dif;
        if (tl >= nice)
          break;
        if (dif + 2 < cl)
          cl = dif + 2;
        var maxd = 0;
        for (var j = 0; j < cl - 2; j++) {
          var ei = i - dif + j + (1 << 15) & 32767;
          var li = prev[ei];
          var curd = ei - li + (1 << 15) & 32767;
          if (curd > maxd) {
            maxd = curd;
            pi = ei;
          }
        }
      }
    }
    ci = pi;
    pi = prev[ci];
    dif += ci - pi + (1 << 15) & 32767;
  }
  return tl << 16 | td;
};
UZIP.F._howLong = function(data, i, dif) {
  if (data[i] != data[i - dif] || data[i + 1] != data[i + 1 - dif] || data[i + 2] != data[i + 2 - dif])
    return 0;
  var oi = i, l = Math.min(data.length, i + 258);
  i += 3;
  while (i < l && data[i] == data[i - dif])
    i++;
  return i - oi;
};
UZIP.F._hash = function(data, i) {
  return (data[i] << 8 | data[i + 1]) + (data[i + 2] << 4) & 65535;
};
UZIP.saved = 0;
UZIP.F._writeBlock = function(BFINAL, lits, li, ebits, data, o0, l0, out, pos) {
  var U = UZIP.F.U, putsF = UZIP.F._putsF, putsE = UZIP.F._putsE;
  var T, ML, MD, MH, numl, numd, numh, lset, dset;
  U.lhst[256]++;
  T = UZIP.F.getTrees();
  ML = T[0];
  MD = T[1];
  MH = T[2];
  numl = T[3];
  numd = T[4];
  numh = T[5];
  lset = T[6];
  dset = T[7];
  var cstSize = ((pos + 3 & 7) == 0 ? 0 : 8 - (pos + 3 & 7)) + 32 + (l0 << 3);
  var fxdSize = ebits + UZIP.F.contSize(U.fltree, U.lhst) + UZIP.F.contSize(U.fdtree, U.dhst);
  var dynSize = ebits + UZIP.F.contSize(U.ltree, U.lhst) + UZIP.F.contSize(U.dtree, U.dhst);
  dynSize += 14 + 3 * numh + UZIP.F.contSize(U.itree, U.ihst) + (U.ihst[16] * 2 + U.ihst[17] * 3 + U.ihst[18] * 7);
  for (var j = 0; j < 286; j++)
    U.lhst[j] = 0;
  for (var j = 0; j < 30; j++)
    U.dhst[j] = 0;
  for (var j = 0; j < 19; j++)
    U.ihst[j] = 0;
  var BTYPE = cstSize < fxdSize && cstSize < dynSize ? 0 : fxdSize < dynSize ? 1 : 2;
  putsF(out, pos, BFINAL);
  putsF(out, pos + 1, BTYPE);
  pos += 3;
  var opos = pos;
  if (BTYPE == 0) {
    while ((pos & 7) != 0)
      pos++;
    pos = UZIP.F._copyExact(data, o0, l0, out, pos);
  } else {
    var ltree, dtree;
    if (BTYPE == 1) {
      ltree = U.fltree;
      dtree = U.fdtree;
    }
    if (BTYPE == 2) {
      UZIP.F.makeCodes(U.ltree, ML);
      UZIP.F.revCodes(U.ltree, ML);
      UZIP.F.makeCodes(U.dtree, MD);
      UZIP.F.revCodes(U.dtree, MD);
      UZIP.F.makeCodes(U.itree, MH);
      UZIP.F.revCodes(U.itree, MH);
      ltree = U.ltree;
      dtree = U.dtree;
      putsE(out, pos, numl - 257);
      pos += 5;
      putsE(out, pos, numd - 1);
      pos += 5;
      putsE(out, pos, numh - 4);
      pos += 4;
      for (var i = 0; i < numh; i++)
        putsE(out, pos + i * 3, U.itree[(U.ordr[i] << 1) + 1]);
      pos += 3 * numh;
      pos = UZIP.F._codeTiny(lset, U.itree, out, pos);
      pos = UZIP.F._codeTiny(dset, U.itree, out, pos);
    }
    var off = o0;
    for (var si = 0; si < li; si += 2) {
      var qb = lits[si], len = qb >>> 23, end = off + (qb & (1 << 23) - 1);
      while (off < end)
        pos = UZIP.F._writeLit(data[off++], ltree, out, pos);
      if (len != 0) {
        var qc = lits[si + 1], dst = qc >> 16, lgi = qc >> 8 & 255, dgi = qc & 255;
        pos = UZIP.F._writeLit(257 + lgi, ltree, out, pos);
        putsE(out, pos, len - U.of0[lgi]);
        pos += U.exb[lgi];
        pos = UZIP.F._writeLit(dgi, dtree, out, pos);
        putsF(out, pos, dst - U.df0[dgi]);
        pos += U.dxb[dgi];
        off += len;
      }
    }
    pos = UZIP.F._writeLit(256, ltree, out, pos);
  }
  return pos;
};
UZIP.F._copyExact = function(data, off, len, out, pos) {
  var p8 = pos >>> 3;
  out[p8] = len;
  out[p8 + 1] = len >>> 8;
  out[p8 + 2] = 255 - out[p8];
  out[p8 + 3] = 255 - out[p8 + 1];
  p8 += 4;
  out.set(new Uint8Array(data.buffer, off, len), p8);
  return pos + (len + 4 << 3);
};
UZIP.F.getTrees = function() {
  var U = UZIP.F.U;
  var ML = UZIP.F._hufTree(U.lhst, U.ltree, 15);
  var MD = UZIP.F._hufTree(U.dhst, U.dtree, 15);
  var lset = [], numl = UZIP.F._lenCodes(U.ltree, lset);
  var dset = [], numd = UZIP.F._lenCodes(U.dtree, dset);
  for (var i = 0; i < lset.length; i += 2)
    U.ihst[lset[i]]++;
  for (var i = 0; i < dset.length; i += 2)
    U.ihst[dset[i]]++;
  var MH = UZIP.F._hufTree(U.ihst, U.itree, 7);
  var numh = 19;
  while (numh > 4 && U.itree[(U.ordr[numh - 1] << 1) + 1] == 0)
    numh--;
  return [ML, MD, MH, numl, numd, numh, lset, dset];
};
UZIP.F.getSecond = function(a) {
  var b = [];
  for (var i = 0; i < a.length; i += 2)
    b.push(a[i + 1]);
  return b;
};
UZIP.F.nonZero = function(a) {
  var b = "";
  for (var i = 0; i < a.length; i += 2)
    if (a[i + 1] != 0)
      b += (i >> 1) + ",";
  return b;
};
UZIP.F.contSize = function(tree, hst) {
  var s = 0;
  for (var i = 0; i < hst.length; i++)
    s += hst[i] * tree[(i << 1) + 1];
  return s;
};
UZIP.F._codeTiny = function(set, tree, out, pos) {
  for (var i = 0; i < set.length; i += 2) {
    var l = set[i], rst = set[i + 1];
    pos = UZIP.F._writeLit(l, tree, out, pos);
    var rsl = l == 16 ? 2 : l == 17 ? 3 : 7;
    if (l > 15) {
      UZIP.F._putsE(out, pos, rst, rsl);
      pos += rsl;
    }
  }
  return pos;
};
UZIP.F._lenCodes = function(tree, set) {
  var len = tree.length;
  while (len != 2 && tree[len - 1] == 0)
    len -= 2;
  for (var i = 0; i < len; i += 2) {
    var l = tree[i + 1], nxt = i + 3 < len ? tree[i + 3] : -1, nnxt = i + 5 < len ? tree[i + 5] : -1, prv = i == 0 ? -1 : tree[i - 1];
    if (l == 0 && nxt == l && nnxt == l) {
      var lz = i + 5;
      while (lz + 2 < len && tree[lz + 2] == l)
        lz += 2;
      var zc = Math.min(lz + 1 - i >>> 1, 138);
      if (zc < 11)
        set.push(17, zc - 3);
      else
        set.push(18, zc - 11);
      i += zc * 2 - 2;
    } else if (l == prv && nxt == l && nnxt == l) {
      var lz = i + 5;
      while (lz + 2 < len && tree[lz + 2] == l)
        lz += 2;
      var zc = Math.min(lz + 1 - i >>> 1, 6);
      set.push(16, zc - 3);
      i += zc * 2 - 2;
    } else
      set.push(l, 0);
  }
  return len >>> 1;
};
UZIP.F._hufTree = function(hst, tree, MAXL) {
  var list = [], hl = hst.length, tl = tree.length, i = 0;
  for (i = 0; i < tl; i += 2) {
    tree[i] = 0;
    tree[i + 1] = 0;
  }
  for (i = 0; i < hl; i++)
    if (hst[i] != 0)
      list.push({lit: i, f: hst[i]});
  var end = list.length, l2 = list.slice(0);
  if (end == 0)
    return 0;
  if (end == 1) {
    var lit = list[0].lit, l2 = lit == 0 ? 1 : 0;
    tree[(lit << 1) + 1] = 1;
    tree[(l2 << 1) + 1] = 1;
    return 1;
  }
  list.sort(function(a2, b2) {
    return a2.f - b2.f;
  });
  var a = list[0], b = list[1], i0 = 0, i1 = 1, i2 = 2;
  list[0] = {lit: -1, f: a.f + b.f, l: a, r: b, d: 0};
  while (i1 != end - 1) {
    if (i0 != i1 && (i2 == end || list[i0].f < list[i2].f)) {
      a = list[i0++];
    } else {
      a = list[i2++];
    }
    if (i0 != i1 && (i2 == end || list[i0].f < list[i2].f)) {
      b = list[i0++];
    } else {
      b = list[i2++];
    }
    list[i1++] = {lit: -1, f: a.f + b.f, l: a, r: b};
  }
  var maxl = UZIP.F.setDepth(list[i1 - 1], 0);
  if (maxl > MAXL) {
    UZIP.F.restrictDepth(l2, MAXL, maxl);
    maxl = MAXL;
  }
  for (i = 0; i < end; i++)
    tree[(l2[i].lit << 1) + 1] = l2[i].d;
  return maxl;
};
UZIP.F.setDepth = function(t, d) {
  if (t.lit != -1) {
    t.d = d;
    return d;
  }
  return Math.max(UZIP.F.setDepth(t.l, d + 1), UZIP.F.setDepth(t.r, d + 1));
};
UZIP.F.restrictDepth = function(dps, MD, maxl) {
  var i = 0, bCost = 1 << maxl - MD, dbt = 0;
  dps.sort(function(a, b) {
    return b.d == a.d ? a.f - b.f : b.d - a.d;
  });
  for (i = 0; i < dps.length; i++)
    if (dps[i].d > MD) {
      var od = dps[i].d;
      dps[i].d = MD;
      dbt += bCost - (1 << maxl - od);
    } else
      break;
  dbt = dbt >>> maxl - MD;
  while (dbt > 0) {
    var od = dps[i].d;
    if (od < MD) {
      dps[i].d++;
      dbt -= 1 << MD - od - 1;
    } else
      i++;
  }
  for (; i >= 0; i--)
    if (dps[i].d == MD && dbt < 0) {
      dps[i].d--;
      dbt++;
    }
  if (dbt != 0)
    console.log("debt left");
};
UZIP.F._goodIndex = function(v, arr) {
  var i = 0;
  if (arr[i | 16] <= v)
    i |= 16;
  if (arr[i | 8] <= v)
    i |= 8;
  if (arr[i | 4] <= v)
    i |= 4;
  if (arr[i | 2] <= v)
    i |= 2;
  if (arr[i | 1] <= v)
    i |= 1;
  return i;
};
UZIP.F._writeLit = function(ch, ltree, out, pos) {
  UZIP.F._putsF(out, pos, ltree[ch << 1]);
  return pos + ltree[(ch << 1) + 1];
};
UZIP.F.inflate = function(data, buf) {
  var u8 = Uint8Array;
  if (data[0] == 3 && data[1] == 0)
    return buf ? buf : new u8(0);
  var F = UZIP.F, bitsF = F._bitsF, bitsE = F._bitsE, decodeTiny = F._decodeTiny, makeCodes = F.makeCodes, codes2map = F.codes2map, get17 = F._get17;
  var U = F.U;
  var noBuf = buf == null;
  if (noBuf)
    buf = new u8(data.length >>> 2 << 3);
  var BFINAL = 0, BTYPE = 0, HLIT = 0, HDIST = 0, HCLEN = 0, ML = 0, MD = 0;
  var off = 0, pos = 0;
  var lmap, dmap;
  while (BFINAL == 0) {
    BFINAL = bitsF(data, pos, 1);
    BTYPE = bitsF(data, pos + 1, 2);
    pos += 3;
    if (BTYPE == 0) {
      if ((pos & 7) != 0)
        pos += 8 - (pos & 7);
      var p8 = (pos >>> 3) + 4, len = data[p8 - 4] | data[p8 - 3] << 8;
      if (noBuf)
        buf = UZIP.F._check(buf, off + len);
      buf.set(new u8(data.buffer, data.byteOffset + p8, len), off);
      pos = p8 + len << 3;
      off += len;
      continue;
    }
    if (noBuf)
      buf = UZIP.F._check(buf, off + (1 << 17));
    if (BTYPE == 1) {
      lmap = U.flmap;
      dmap = U.fdmap;
      ML = (1 << 9) - 1;
      MD = (1 << 5) - 1;
    }
    if (BTYPE == 2) {
      HLIT = bitsE(data, pos, 5) + 257;
      HDIST = bitsE(data, pos + 5, 5) + 1;
      HCLEN = bitsE(data, pos + 10, 4) + 4;
      pos += 14;
      var ppos = pos;
      for (var i = 0; i < 38; i += 2) {
        U.itree[i] = 0;
        U.itree[i + 1] = 0;
      }
      var tl = 1;
      for (var i = 0; i < HCLEN; i++) {
        var l = bitsE(data, pos + i * 3, 3);
        U.itree[(U.ordr[i] << 1) + 1] = l;
        if (l > tl)
          tl = l;
      }
      pos += 3 * HCLEN;
      makeCodes(U.itree, tl);
      codes2map(U.itree, tl, U.imap);
      lmap = U.lmap;
      dmap = U.dmap;
      pos = decodeTiny(U.imap, (1 << tl) - 1, HLIT + HDIST, data, pos, U.ttree);
      var mx0 = F._copyOut(U.ttree, 0, HLIT, U.ltree);
      ML = (1 << mx0) - 1;
      var mx1 = F._copyOut(U.ttree, HLIT, HDIST, U.dtree);
      MD = (1 << mx1) - 1;
      makeCodes(U.ltree, mx0);
      codes2map(U.ltree, mx0, lmap);
      makeCodes(U.dtree, mx1);
      codes2map(U.dtree, mx1, dmap);
    }
    while (true) {
      var code = lmap[get17(data, pos) & ML];
      pos += code & 15;
      var lit = code >>> 4;
      if (lit >>> 8 == 0) {
        buf[off++] = lit;
      } else if (lit == 256) {
        break;
      } else {
        var end = off + lit - 254;
        if (lit > 264) {
          var ebs = U.ldef[lit - 257];
          end = off + (ebs >>> 3) + bitsE(data, pos, ebs & 7);
          pos += ebs & 7;
        }
        var dcode = dmap[get17(data, pos) & MD];
        pos += dcode & 15;
        var dlit = dcode >>> 4;
        var dbs = U.ddef[dlit], dst = (dbs >>> 4) + bitsF(data, pos, dbs & 15);
        pos += dbs & 15;
        if (noBuf)
          buf = UZIP.F._check(buf, off + (1 << 17));
        while (off < end) {
          buf[off] = buf[off++ - dst];
          buf[off] = buf[off++ - dst];
          buf[off] = buf[off++ - dst];
          buf[off] = buf[off++ - dst];
        }
        off = end;
      }
    }
  }
  return buf.length == off ? buf : buf.slice(0, off);
};
UZIP.F._check = function(buf, len) {
  var bl = buf.length;
  if (len <= bl)
    return buf;
  var nbuf = new Uint8Array(Math.max(bl << 1, len));
  nbuf.set(buf, 0);
  return nbuf;
};
UZIP.F._decodeTiny = function(lmap, LL, len, data, pos, tree) {
  var bitsE = UZIP.F._bitsE, get17 = UZIP.F._get17;
  var i = 0;
  while (i < len) {
    var code = lmap[get17(data, pos) & LL];
    pos += code & 15;
    var lit = code >>> 4;
    if (lit <= 15) {
      tree[i] = lit;
      i++;
    } else {
      var ll = 0, n = 0;
      if (lit == 16) {
        n = 3 + bitsE(data, pos, 2);
        pos += 2;
        ll = tree[i - 1];
      } else if (lit == 17) {
        n = 3 + bitsE(data, pos, 3);
        pos += 3;
      } else if (lit == 18) {
        n = 11 + bitsE(data, pos, 7);
        pos += 7;
      }
      var ni = i + n;
      while (i < ni) {
        tree[i] = ll;
        i++;
      }
    }
  }
  return pos;
};
UZIP.F._copyOut = function(src, off, len, tree) {
  var mx = 0, i = 0, tl = tree.length >>> 1;
  while (i < len) {
    var v = src[i + off];
    tree[i << 1] = 0;
    tree[(i << 1) + 1] = v;
    if (v > mx)
      mx = v;
    i++;
  }
  while (i < tl) {
    tree[i << 1] = 0;
    tree[(i << 1) + 1] = 0;
    i++;
  }
  return mx;
};
UZIP.F.makeCodes = function(tree, MAX_BITS) {
  var U = UZIP.F.U;
  var max_code = tree.length;
  var code, bits, n, i, len;
  var bl_count = U.bl_count;
  for (var i = 0; i <= MAX_BITS; i++)
    bl_count[i] = 0;
  for (i = 1; i < max_code; i += 2)
    bl_count[tree[i]]++;
  var next_code = U.next_code;
  code = 0;
  bl_count[0] = 0;
  for (bits = 1; bits <= MAX_BITS; bits++) {
    code = code + bl_count[bits - 1] << 1;
    next_code[bits] = code;
  }
  for (n = 0; n < max_code; n += 2) {
    len = tree[n + 1];
    if (len != 0) {
      tree[n] = next_code[len];
      next_code[len]++;
    }
  }
};
UZIP.F.codes2map = function(tree, MAX_BITS, map) {
  var max_code = tree.length;
  var U = UZIP.F.U, r15 = U.rev15;
  for (var i = 0; i < max_code; i += 2)
    if (tree[i + 1] != 0) {
      var lit = i >> 1;
      var cl = tree[i + 1], val = lit << 4 | cl;
      var rest = MAX_BITS - cl, i0 = tree[i] << rest, i1 = i0 + (1 << rest);
      while (i0 != i1) {
        var p0 = r15[i0] >>> 15 - MAX_BITS;
        map[p0] = val;
        i0++;
      }
    }
};
UZIP.F.revCodes = function(tree, MAX_BITS) {
  var r15 = UZIP.F.U.rev15, imb = 15 - MAX_BITS;
  for (var i = 0; i < tree.length; i += 2) {
    var i0 = tree[i] << MAX_BITS - tree[i + 1];
    tree[i] = r15[i0] >>> imb;
  }
};
UZIP.F._putsE = function(dt, pos, val) {
  val = val << (pos & 7);
  var o = pos >>> 3;
  dt[o] |= val;
  dt[o + 1] |= val >>> 8;
};
UZIP.F._putsF = function(dt, pos, val) {
  val = val << (pos & 7);
  var o = pos >>> 3;
  dt[o] |= val;
  dt[o + 1] |= val >>> 8;
  dt[o + 2] |= val >>> 16;
};
UZIP.F._bitsE = function(dt, pos, length) {
  return (dt[pos >>> 3] | dt[(pos >>> 3) + 1] << 8) >>> (pos & 7) & (1 << length) - 1;
};
UZIP.F._bitsF = function(dt, pos, length) {
  return (dt[pos >>> 3] | dt[(pos >>> 3) + 1] << 8 | dt[(pos >>> 3) + 2] << 16) >>> (pos & 7) & (1 << length) - 1;
};
UZIP.F._get17 = function(dt, pos) {
  return (dt[pos >>> 3] | dt[(pos >>> 3) + 1] << 8 | dt[(pos >>> 3) + 2] << 16) >>> (pos & 7);
};
UZIP.F._get25 = function(dt, pos) {
  return (dt[pos >>> 3] | dt[(pos >>> 3) + 1] << 8 | dt[(pos >>> 3) + 2] << 16 | dt[(pos >>> 3) + 3] << 24) >>> (pos & 7);
};
UZIP.F.U = function() {
  var u16 = Uint16Array, u32 = Uint32Array;
  return {
    next_code: new u16(16),
    bl_count: new u16(16),
    ordr: [
      16,
      17,
      18,
      0,
      8,
      7,
      9,
      6,
      10,
      5,
      11,
      4,
      12,
      3,
      13,
      2,
      14,
      1,
      15
    ],
    of0: [
      3,
      4,
      5,
      6,
      7,
      8,
      9,
      10,
      11,
      13,
      15,
      17,
      19,
      23,
      27,
      31,
      35,
      43,
      51,
      59,
      67,
      83,
      99,
      115,
      131,
      163,
      195,
      227,
      258,
      999,
      999,
      999
    ],
    exb: [
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      1,
      1,
      1,
      1,
      2,
      2,
      2,
      2,
      3,
      3,
      3,
      3,
      4,
      4,
      4,
      4,
      5,
      5,
      5,
      5,
      0,
      0,
      0,
      0
    ],
    ldef: new u16(32),
    df0: [
      1,
      2,
      3,
      4,
      5,
      7,
      9,
      13,
      17,
      25,
      33,
      49,
      65,
      97,
      129,
      193,
      257,
      385,
      513,
      769,
      1025,
      1537,
      2049,
      3073,
      4097,
      6145,
      8193,
      12289,
      16385,
      24577,
      65535,
      65535
    ],
    dxb: [
      0,
      0,
      0,
      0,
      1,
      1,
      2,
      2,
      3,
      3,
      4,
      4,
      5,
      5,
      6,
      6,
      7,
      7,
      8,
      8,
      9,
      9,
      10,
      10,
      11,
      11,
      12,
      12,
      13,
      13,
      0,
      0
    ],
    ddef: new u32(32),
    flmap: new u16(512),
    fltree: [],
    fdmap: new u16(32),
    fdtree: [],
    lmap: new u16(32768),
    ltree: [],
    ttree: [],
    dmap: new u16(32768),
    dtree: [],
    imap: new u16(512),
    itree: [],
    rev15: new u16(1 << 15),
    lhst: new u32(286),
    dhst: new u32(30),
    ihst: new u32(19),
    lits: new u32(15e3),
    strt: new u16(1 << 16),
    prev: new u16(1 << 15)
  };
}();
(function() {
  var U = UZIP.F.U;
  var len = 1 << 15;
  for (var i = 0; i < len; i++) {
    var x = i;
    x = (x & 2863311530) >>> 1 | (x & 1431655765) << 1;
    x = (x & 3435973836) >>> 2 | (x & 858993459) << 2;
    x = (x & 4042322160) >>> 4 | (x & 252645135) << 4;
    x = (x & 4278255360) >>> 8 | (x & 16711935) << 8;
    U.rev15[i] = (x >>> 16 | x << 16) >>> 17;
  }
  function pushV(tgt, n, sv) {
    while (n-- != 0)
      tgt.push(0, sv);
  }
  for (var i = 0; i < 32; i++) {
    U.ldef[i] = U.of0[i] << 3 | U.exb[i];
    U.ddef[i] = U.df0[i] << 4 | U.dxb[i];
  }
  pushV(U.fltree, 144, 8);
  pushV(U.fltree, 255 - 143, 9);
  pushV(U.fltree, 279 - 255, 7);
  pushV(U.fltree, 287 - 279, 8);
  UZIP.F.makeCodes(U.fltree, 9);
  UZIP.F.codes2map(U.fltree, 9, U.flmap);
  UZIP.F.revCodes(U.fltree, 9);
  pushV(U.fdtree, 32, 5);
  UZIP.F.makeCodes(U.fdtree, 5);
  UZIP.F.codes2map(U.fdtree, 5, U.fdmap);
  UZIP.F.revCodes(U.fdtree, 5);
  pushV(U.itree, 19, 0);
  pushV(U.ltree, 286, 0);
  pushV(U.dtree, 30, 0);
  pushV(U.ttree, 320, 0);
})();

// src/IDE/Downloader/vendor/custom/readAs.js
function readAs(file, as) {
  if (!(file instanceof Blob)) {
    throw new TypeError("Must be a File or Blob");
  }
  return new Promise(function(resolve, reject) {
    var reader = new FileReader();
    reader.onload = function(e) {
      resolve(e.target.result);
    };
    reader.onerror = function(e) {
      reject(new Error("Error reading" + file.name + ": " + e.target.result));
    };
    reader["readAs" + as](file);
  });
}
function readAsArrayBuffer(file) {
  return readAs(file, "ArrayBuffer");
}

// src/IDE/Downloader/utils/stringToUint8.js
function stringToUint8(string) {
  const uint = new Uint8Array(string.length);
  for (let i = 0, j = string.length; i < j; ++i) {
    uint[i] = string.charCodeAt(i);
  }
  return uint;
}

// src/IDE/Downloader/Downloader.js
var Downloader = class {
  constructor(files, assetsLocation) {
    this.files = files;
    this.assetsLocation = assetsLocation;
  }
  async prepareFiles() {
    const zipFiles = {};
    const assets = [];
    for (const file of Object.values(this.files)) {
      if (file.dataType === "text") {
        this.addTextFile(file, zipFiles);
      } else {
        assets.push(file);
      }
    }
    await this.addAssetsToZip(assets, zipFiles);
    return zipFiles;
  }
  addTextFile(file, zipFiles) {
    const text = file.getContentsWithImportStyle("cdn");
    zipFiles[`${file.url}`] = stringToUint8(text);
  }
  async addAssetsToZip(assets, zipFiles) {
    const fileData = await this.fetchAssets(assets);
    for (const [index, file] of assets.entries()) {
      zipFiles[`${file.url}`] = new Uint8Array(await readAsArrayBuffer(fileData[index]));
    }
  }
  async fetchAssets(assets) {
    const filePromises = [];
    for (const file of assets) {
      const serverURL = file.url.replace(/assets\//g, this.assetsLocation);
      filePromises.push(fetch(serverURL));
    }
    const responses = await Promise.all(filePromises);
    return Promise.all(responses.map((response) => response.blob()));
  }
  async downloadPackage() {
    const name = generateNameFromPageTitle();
    const zipFiles = await this.prepareFiles();
    const zipped = UZIP.encode(zipFiles, false);
    const blob = new Blob([zipped], {type: "application/zip"});
    (0, import_file_saver.saveAs)(blob, `${name}.zip`);
  }
};

// src/IDE/IDE.js
var IDE = class {
  constructor(config2) {
    this.config = config2;
    this.config.siteURL = getSiteURL();
    this.config.assetsLocation = `${this.config.siteURL}/static/assets/`;
    this.fileTypes = [".js", ".html", ".css", ".glb", ".png", ".jpg"];
    this.textTypes = ["js", "html", "css"];
    this.imageTypes = ["png", "jpg"];
    this.otherTypes = ["glb"];
    this.comparisonsEnabled = this.config.comparisonMode === true;
    this.container = document.querySelector(config2.container);
  }
  async init() {
    this.files = await Fetcher.fetchFiles(this.config.files, this.config.startFiles, this.config.finalFiles, this.config.serverDirectory, this.config.stripDirectory, this.comparisonsEnabled);
    this.editor = new Editor(this.files);
    this.preview = new Preview();
    this.imagePreview = document.querySelector("#image-preview");
    this.fileTree = new FileTree(this.files, this.fileTypes, this.config.closedFolders, this.editor, this.imagePreview, this.comparisonsEnabled);
    this.urlGenerator = new BlobURLGenerator(this.files, this.config.assetsLocation, this.config.entry);
    if (this.config.activeDocument) {
      this.setActiveDocument(this.config.activeDocument);
    }
    this.preview.update(this.urlGenerator.generateSrcURL());
    this.downloader = new Downloader(this.files, this.config.assetsLocation);
    this.setupControls();
    this.setupEvents();
    setupPanels(this, this.config.fullScreen);
  }
  setActiveDocument(doc) {
    this.editor.setActiveDocument(this.files[doc]);
    this.fileTree.setSelectedFile(this.files[doc]);
  }
  setupEvents() {
    let refreshCountDown;
    this.editor.setEventCallback("changes", () => {
      clearTimeout(refreshCountDown);
      refreshCountDown = setTimeout(() => this.updatePreview(), 700);
      this.resetControls.setButtonStates();
    });
    this.editor.setEventCallback("refresh", () => {
      this.resetControls.setButtonStates();
    });
  }
  setupControls() {
    Controls.setupDownloadPackageButton(this.downloader);
    Controls.setupImportStyleSelect(this.files, this.config.switchImportsAllowed);
    Controls.openPreviewInNewWindow(this.preview);
    this.resetControls = Controls.setupResetButtons(this.editor);
    if (this.comparisonsEnabled) {
      Controls.setupStartFinalCodeToggle(this.editor);
    }
  }
  updatePreview() {
    this.preview.update(this.urlGenerator.generateSrcURL());
  }
  update() {
    this.updatePreview();
    this.editor.refresh();
  }
};

// src/main.js
async function setupIDE(config2) {
  const ideWrapper = document.querySelector("#ide-wrapper");
  const ideControls = document.querySelectorAll(".ide-control");
  if (config2.showIDE === true && ideWrapper) {
    ideControls.forEach((ctrl) => ctrl.classList.remove("hide"));
    const ide = new IDE(config2.IDE);
    await ide.init();
    ideWrapper.classList.remove("hide");
  } else if (ideWrapper) {
    ideWrapper.classList.add("hide");
  }
}
export {
  setupIDE
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vbm9kZV9tb2R1bGVzL2NvZGVtaXJyb3IvbGliL2NvZGVtaXJyb3IuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZpbGUtc2F2ZXIvc3JjL0ZpbGVTYXZlci5qcyIsICIuLi9zcmMvSURFL3V0aWxzL2dldFNpdGVVUkwuanMiLCAiLi4vc3JjL0lERS9CbG9iVVJMR2VuZXJhdG9yL3V0aWxzL2dldFJlZ2V4TWF0Y2hlcy5qcyIsICIuLi9zcmMvSURFL0Jsb2JVUkxHZW5lcmF0b3IvdXRpbHMvaW1wb3J0VVJMQ29udmVydGVyLmpzIiwgIi4uL3NyYy9JREUvQmxvYlVSTEdlbmVyYXRvci91dGlscy9jbGVhblVSTC5qcyIsICIuLi9zcmMvSURFL0Jsb2JVUkxHZW5lcmF0b3IvQmxvYlVSTEdlbmVyYXRvci5qcyIsICIuLi9zcmMvSURFL0VkaXRvci9zZXR1cENvZGVNaXJyb3IuanMiLCAiLi4vc3JjL0lERS9FZGl0b3IvdXRpbHMvYWRkRnVuY3Rpb25Ub0NvZGVNaXJyb3IuanMiLCAiLi4vc3JjL0lERS9FZGl0b3IvdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L21vZGVzL2h0bWxtaXhlZC9odG1sbWl4ZWQuanMiLCAiLi4vc3JjL0lERS9FZGl0b3IvdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L21vZGVzL2Nzcy9jc3MuanMiLCAiLi4vc3JjL0lERS9FZGl0b3IvdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L21vZGVzL3htbC94bWwuanMiLCAiLi4vc3JjL0lERS9FZGl0b3IvdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L21vZGVzL2phdmFzY3JpcHQvamF2YXNjcmlwdC5qcyIsICIuLi9zcmMvSURFL0VkaXRvci92ZW5kb3IvY3VzdG9tL0NvZGVNaXJyb3JFUzYvYWRkb25zL3Njcm9sbC9hbm5vdGF0ZXNjcm9sbGJhci5qcyIsICIuLi9zcmMvSURFL0VkaXRvci92ZW5kb3IvY3VzdG9tL0NvZGVNaXJyb3JFUzYvYWRkb25zL2NvbW1lbnQvY29tbWVudC5qcyIsICIuLi9zcmMvSURFL0VkaXRvci92ZW5kb3IvY3VzdG9tL0NvZGVNaXJyb3JFUzYvYWRkb25zL2Rpc3BsYXkvZnVsbHNjcmVlbi5qcyIsICIuLi9zcmMvSURFL0VkaXRvci92ZW5kb3IvY3VzdG9tL0NvZGVNaXJyb3JFUzYvYWRkb25zL3NlbGVjdGlvbi9hY3RpdmUtbGluZS5qcyIsICIuLi9zcmMvSURFL0VkaXRvci92ZW5kb3IvY3VzdG9tL0NvZGVNaXJyb3JFUzYvYWRkb25zL2RpYWxvZy9kaWFsb2cuanMiLCAiLi4vc3JjL0lERS9FZGl0b3IvdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L2FkZG9ucy9zZWFyY2gvanVtcC10by1saW5lLmpzIiwgIi4uL3NyYy9JREUvRWRpdG9yL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9hZGRvbnMvc2VhcmNoL21hdGNoLWhpZ2hsaWdodGVyLmpzIiwgIi4uL3NyYy9JREUvRWRpdG9yL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9hZGRvbnMvc2VhcmNoL21hdGNoZXNvbnNjcm9sbGJhci5qcyIsICIuLi9zcmMvSURFL0VkaXRvci92ZW5kb3IvY3VzdG9tL0NvZGVNaXJyb3JFUzYvYWRkb25zL3NlYXJjaC9zZWFyY2guanMiLCAiLi4vc3JjL0lERS9FZGl0b3IvdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L2FkZG9ucy9zZWFyY2gvc2VhcmNoY3Vyc29yLmpzIiwgIi4uL3NyYy9JREUvRWRpdG9yL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9hZGRvbnMvZm9sZC9mb2xkY29kZS5qcyIsICIuLi9zcmMvSURFL0VkaXRvci92ZW5kb3IvY3VzdG9tL0NvZGVNaXJyb3JFUzYvYWRkb25zL2ZvbGQvYnJhY2UtZm9sZC5qcyIsICIuLi9zcmMvSURFL0VkaXRvci92ZW5kb3IvY3VzdG9tL0NvZGVNaXJyb3JFUzYvYWRkb25zL2ZvbGQvY29tbWVudC1mb2xkLmpzIiwgIi4uL3NyYy9JREUvRWRpdG9yL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9hZGRvbnMvZm9sZC9mb2xkZ3V0dGVyLmpzIiwgIi4uL3NyYy9JREUvRWRpdG9yL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9hZGRvbnMvZm9sZC9pbmRlbnQtZm9sZC5qcyIsICIuLi9zcmMvSURFL0VkaXRvci92ZW5kb3IvY3VzdG9tL0NvZGVNaXJyb3JFUzYvYWRkb25zL2ZvbGQveG1sLWZvbGQuanMiLCAiLi4vc3JjL0lERS9FZGl0b3IvdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L2FkZG9ucy9lZGl0L2Nsb3NlYnJhY2tldHMuanMiLCAiLi4vc3JjL0lERS9FZGl0b3IvdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L2FkZG9ucy9lZGl0L2Nsb3NldGFnLmpzIiwgIi4uL3NyYy9JREUvRWRpdG9yL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9hZGRvbnMvaGludC9zaG93LWhpbnQuanMiLCAiLi4vc3JjL0lERS9FZGl0b3IvdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L2FkZG9ucy9oaW50L2FueXdvcmQtaGludC5qcyIsICIuLi9zcmMvSURFL0VkaXRvci92ZW5kb3IvY3VzdG9tL0NvZGVNaXJyb3JFUzYvYWRkb25zL2hpbnQveG1sLWhpbnQuanMiLCAiLi4vc3JjL0lERS9FZGl0b3IvdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L2FkZG9ucy9oaW50L2Nzcy1oaW50LmpzIiwgIi4uL3NyYy9JREUvRWRpdG9yL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9hZGRvbnMvaGludC9odG1sLWhpbnQuanMiLCAiLi4vc3JjL0lERS9FZGl0b3IvdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L2FkZG9ucy9oaW50L2phdmFzY3JpcHQtaGludC5qcyIsICIuLi9zcmMvSURFL0hUTUwvSFRNTEJ1aWxkZXIuanMiLCAiLi4vc3JjL0lERS9FZGl0b3IvRWRpdG9yLmpzIiwgIi4uL3NyYy9JREUvdXRpbHMvY2xhc3NpZnlVUkwuanMiLCAiLi4vc3JjL0lERS9GZXRjaGVyL3V0aWxzL2ZldGNoRmlsZXMuanMiLCAiLi4vc3JjL0lERS9GaWxlL0ZpbGUuanMiLCAiLi4vc3JjL0lERS9GaWxlL3V0aWxzL2dldE1pbWV0eXBlLmpzIiwgIi4uL25vZGVfbW9kdWxlcy90aHJlZS9zcmMvY29uc3RhbnRzLmpzIiwgIi4uL3NyYy9JREUvRmlsZS91dGlscy9jb252ZXJ0SW1wb3J0c0luVGV4dC5qcyIsICIuLi9zcmMvSURFL0ZpbGUvdXRpbHMvZ2V0TmFtZUZyb21VUkwuanMiLCAiLi4vc3JjL0lERS9GZXRjaGVyL0ZldGNoZXIuanMiLCAiLi4vc3JjL0lERS9GaWxlVHJlZS91dGlscy9jcmVhdGVJY29uLmpzIiwgIi4uL3NyYy9JREUvRmlsZVRyZWUvdmVuZG9yL2N1c3RvbS9lczZ0cmVlLmpzIiwgIi4uL3NyYy9JREUvRmlsZVRyZWUvdXRpbHMvYnVpbGREaXJlY3Rvcmllcy5qcyIsICIuLi9zcmMvSURFL0ZpbGVUcmVlL2J1aWxkRmlsZVRyZWUuanMiLCAiLi4vc3JjL0lERS9GaWxlVHJlZS91dGlscy92YWxpZGF0ZUZpbGVOYW1lLmpzIiwgIi4uL3NyYy9JREUvRmlsZVRyZWUvdXRpbHMvc2FuaXRpc2VGaWxlTmFtZS5qcyIsICIuLi9zcmMvSURFL0ZpbGVUcmVlL0ZpbGVUcmVlLmpzIiwgIi4uL3NyYy9JREUvUHJldmlldy91dGlscy91dWlkLmpzIiwgIi4uL3NyYy9JREUvUHJldmlldy9QcmV2aWV3LmpzIiwgIi4uL3NyYy9JREUvQ29udHJvbHMvUmVzZXQuanMiLCAiLi4vc3JjL0lERS9Db250cm9scy9Db250cm9scy5qcyIsICIuLi9zcmMvSURFL1BhbmVscy92ZW5kb3IvY3VzdG9tL3NwbGl0LmpzIiwgIi4uL3NyYy9JREUvUGFuZWxzL1BhbmVscy5qcyIsICIuLi9zcmMvSURFL1BhbmVscy9jcmVhdGVQYW5lbENvbmZpZy5qcyIsICIuLi9zcmMvSURFL1BhbmVscy9vcmllbnRhdGlvbkNvbnRyb2wuanMiLCAiLi4vc3JjL0lERS9QYW5lbHMvc2V0dXBQYW5lbHMuanMiLCAiLi4vc3JjL0lERS9Eb3dubG9hZGVyL0Rvd25sb2FkZXIuanMiLCAiLi4vc3JjL0lERS9Eb3dubG9hZGVyL3V0aWxzL2dlbmVyYXRlTmFtZUZyb21QYWdlVGl0bGUuanMiLCAiLi4vc3JjL0lERS9Eb3dubG9hZGVyL3ZlbmRvci9jdXN0b20vVVpJUC5qcyIsICIuLi9zcmMvSURFL0Rvd25sb2FkZXIvdmVuZG9yL2N1c3RvbS9yZWFkQXMuanMiLCAiLi4vc3JjL0lERS9Eb3dubG9hZGVyL3V0aWxzL3N0cmluZ1RvVWludDguanMiLCAiLi4vc3JjL0lERS9JREUuanMiLCAiLi4vc3JjL21haW4uanMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbi8vIFRoaXMgaXMgQ29kZU1pcnJvciAoaHR0cHM6Ly9jb2RlbWlycm9yLm5ldCksIGEgY29kZSBlZGl0b3Jcbi8vIGltcGxlbWVudGVkIGluIEphdmFTY3JpcHQgb24gdG9wIG9mIHRoZSBicm93c2VyJ3MgRE9NLlxuLy9cbi8vIFlvdSBjYW4gZmluZCBzb21lIHRlY2huaWNhbCBiYWNrZ3JvdW5kIGZvciBzb21lIG9mIHRoZSBjb2RlIGJlbG93XG4vLyBhdCBodHRwOi8vbWFyaWpuaGF2ZXJiZWtlLm5sL2Jsb2cvI2NtLWludGVybmFscyAuXG5cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgKGdsb2JhbCA9IGdsb2JhbCB8fCBzZWxmLCBnbG9iYWwuQ29kZU1pcnJvciA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuICAvLyBLbHVkZ2VzIGZvciBidWdzIGFuZCBiZWhhdmlvciBkaWZmZXJlbmNlcyB0aGF0IGNhbid0IGJlIGZlYXR1cmVcbiAgLy8gZGV0ZWN0ZWQgYXJlIGVuYWJsZWQgYmFzZWQgb24gdXNlckFnZW50IGV0YyBzbmlmZmluZy5cbiAgdmFyIHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XG4gIHZhciBwbGF0Zm9ybSA9IG5hdmlnYXRvci5wbGF0Zm9ybTtcblxuICB2YXIgZ2Vja28gPSAvZ2Vja29cXC9cXGQvaS50ZXN0KHVzZXJBZ2VudCk7XG4gIHZhciBpZV91cHRvMTAgPSAvTVNJRSBcXGQvLnRlc3QodXNlckFnZW50KTtcbiAgdmFyIGllXzExdXAgPSAvVHJpZGVudFxcLyg/Ols3LTldfFxcZHsyLH0pXFwuLipydjooXFxkKykvLmV4ZWModXNlckFnZW50KTtcbiAgdmFyIGVkZ2UgPSAvRWRnZVxcLyhcXGQrKS8uZXhlYyh1c2VyQWdlbnQpO1xuICB2YXIgaWUgPSBpZV91cHRvMTAgfHwgaWVfMTF1cCB8fCBlZGdlO1xuICB2YXIgaWVfdmVyc2lvbiA9IGllICYmIChpZV91cHRvMTAgPyBkb2N1bWVudC5kb2N1bWVudE1vZGUgfHwgNiA6ICsoZWRnZSB8fCBpZV8xMXVwKVsxXSk7XG4gIHZhciB3ZWJraXQgPSAhZWRnZSAmJiAvV2ViS2l0XFwvLy50ZXN0KHVzZXJBZ2VudCk7XG4gIHZhciBxdHdlYmtpdCA9IHdlYmtpdCAmJiAvUXRcXC9cXGQrXFwuXFxkKy8udGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgY2hyb21lID0gIWVkZ2UgJiYgL0Nocm9tZVxcLy8udGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgcHJlc3RvID0gL09wZXJhXFwvLy50ZXN0KHVzZXJBZ2VudCk7XG4gIHZhciBzYWZhcmkgPSAvQXBwbGUgQ29tcHV0ZXIvLnRlc3QobmF2aWdhdG9yLnZlbmRvcik7XG4gIHZhciBtYWNfZ2VNb3VudGFpbkxpb24gPSAvTWFjIE9TIFggMVxcZFxcRChbOC05XXxcXGRcXGQpXFxELy50ZXN0KHVzZXJBZ2VudCk7XG4gIHZhciBwaGFudG9tID0gL1BoYW50b21KUy8udGVzdCh1c2VyQWdlbnQpO1xuXG4gIHZhciBpb3MgPSAhZWRnZSAmJiAvQXBwbGVXZWJLaXQvLnRlc3QodXNlckFnZW50KSAmJiAvTW9iaWxlXFwvXFx3Ky8udGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgYW5kcm9pZCA9IC9BbmRyb2lkLy50ZXN0KHVzZXJBZ2VudCk7XG4gIC8vIFRoaXMgaXMgd29lZnVsbHkgaW5jb21wbGV0ZS4gU3VnZ2VzdGlvbnMgZm9yIGFsdGVybmF0aXZlIG1ldGhvZHMgd2VsY29tZS5cbiAgdmFyIG1vYmlsZSA9IGlvcyB8fCBhbmRyb2lkIHx8IC93ZWJPU3xCbGFja0JlcnJ5fE9wZXJhIE1pbml8T3BlcmEgTW9iaXxJRU1vYmlsZS9pLnRlc3QodXNlckFnZW50KTtcbiAgdmFyIG1hYyA9IGlvcyB8fCAvTWFjLy50ZXN0KHBsYXRmb3JtKTtcbiAgdmFyIGNocm9tZU9TID0gL1xcYkNyT1NcXGIvLnRlc3QodXNlckFnZW50KTtcbiAgdmFyIHdpbmRvd3MgPSAvd2luL2kudGVzdChwbGF0Zm9ybSk7XG5cbiAgdmFyIHByZXN0b192ZXJzaW9uID0gcHJlc3RvICYmIHVzZXJBZ2VudC5tYXRjaCgvVmVyc2lvblxcLyhcXGQqXFwuXFxkKikvKTtcbiAgaWYgKHByZXN0b192ZXJzaW9uKSB7IHByZXN0b192ZXJzaW9uID0gTnVtYmVyKHByZXN0b192ZXJzaW9uWzFdKTsgfVxuICBpZiAocHJlc3RvX3ZlcnNpb24gJiYgcHJlc3RvX3ZlcnNpb24gPj0gMTUpIHsgcHJlc3RvID0gZmFsc2U7IHdlYmtpdCA9IHRydWU7IH1cbiAgLy8gU29tZSBicm93c2VycyB1c2UgdGhlIHdyb25nIGV2ZW50IHByb3BlcnRpZXMgdG8gc2lnbmFsIGNtZC9jdHJsIG9uIE9TIFhcbiAgdmFyIGZsaXBDdHJsQ21kID0gbWFjICYmIChxdHdlYmtpdCB8fCBwcmVzdG8gJiYgKHByZXN0b192ZXJzaW9uID09IG51bGwgfHwgcHJlc3RvX3ZlcnNpb24gPCAxMi4xMSkpO1xuICB2YXIgY2FwdHVyZVJpZ2h0Q2xpY2sgPSBnZWNrbyB8fCAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5KTtcblxuICBmdW5jdGlvbiBjbGFzc1Rlc3QoY2xzKSB7IHJldHVybiBuZXcgUmVnRXhwKFwiKF58XFxcXHMpXCIgKyBjbHMgKyBcIig/OiR8XFxcXHMpXFxcXHMqXCIpIH1cblxuICB2YXIgcm1DbGFzcyA9IGZ1bmN0aW9uKG5vZGUsIGNscykge1xuICAgIHZhciBjdXJyZW50ID0gbm9kZS5jbGFzc05hbWU7XG4gICAgdmFyIG1hdGNoID0gY2xhc3NUZXN0KGNscykuZXhlYyhjdXJyZW50KTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIHZhciBhZnRlciA9IGN1cnJlbnQuc2xpY2UobWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgpO1xuICAgICAgbm9kZS5jbGFzc05hbWUgPSBjdXJyZW50LnNsaWNlKDAsIG1hdGNoLmluZGV4KSArIChhZnRlciA/IG1hdGNoWzFdICsgYWZ0ZXIgOiBcIlwiKTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW4oZSkge1xuICAgIGZvciAodmFyIGNvdW50ID0gZS5jaGlsZE5vZGVzLmxlbmd0aDsgY291bnQgPiAwOyAtLWNvdW50KVxuICAgICAgeyBlLnJlbW92ZUNoaWxkKGUuZmlyc3RDaGlsZCk7IH1cbiAgICByZXR1cm4gZVxuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW5BbmRBZGQocGFyZW50LCBlKSB7XG4gICAgcmV0dXJuIHJlbW92ZUNoaWxkcmVuKHBhcmVudCkuYXBwZW5kQ2hpbGQoZSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGVsdCh0YWcsIGNvbnRlbnQsIGNsYXNzTmFtZSwgc3R5bGUpIHtcbiAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgICBpZiAoY2xhc3NOYW1lKSB7IGUuY2xhc3NOYW1lID0gY2xhc3NOYW1lOyB9XG4gICAgaWYgKHN0eWxlKSB7IGUuc3R5bGUuY3NzVGV4dCA9IHN0eWxlOyB9XG4gICAgaWYgKHR5cGVvZiBjb250ZW50ID09IFwic3RyaW5nXCIpIHsgZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjb250ZW50KSk7IH1cbiAgICBlbHNlIGlmIChjb250ZW50KSB7IGZvciAodmFyIGkgPSAwOyBpIDwgY29udGVudC5sZW5ndGg7ICsraSkgeyBlLmFwcGVuZENoaWxkKGNvbnRlbnRbaV0pOyB9IH1cbiAgICByZXR1cm4gZVxuICB9XG4gIC8vIHdyYXBwZXIgZm9yIGVsdCwgd2hpY2ggcmVtb3ZlcyB0aGUgZWx0IGZyb20gdGhlIGFjY2Vzc2liaWxpdHkgdHJlZVxuICBmdW5jdGlvbiBlbHRQKHRhZywgY29udGVudCwgY2xhc3NOYW1lLCBzdHlsZSkge1xuICAgIHZhciBlID0gZWx0KHRhZywgY29udGVudCwgY2xhc3NOYW1lLCBzdHlsZSk7XG4gICAgZS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwicHJlc2VudGF0aW9uXCIpO1xuICAgIHJldHVybiBlXG4gIH1cblxuICB2YXIgcmFuZ2U7XG4gIGlmIChkb2N1bWVudC5jcmVhdGVSYW5nZSkgeyByYW5nZSA9IGZ1bmN0aW9uKG5vZGUsIHN0YXJ0LCBlbmQsIGVuZE5vZGUpIHtcbiAgICB2YXIgciA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgci5zZXRFbmQoZW5kTm9kZSB8fCBub2RlLCBlbmQpO1xuICAgIHIuc2V0U3RhcnQobm9kZSwgc3RhcnQpO1xuICAgIHJldHVybiByXG4gIH07IH1cbiAgZWxzZSB7IHJhbmdlID0gZnVuY3Rpb24obm9kZSwgc3RhcnQsIGVuZCkge1xuICAgIHZhciByID0gZG9jdW1lbnQuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKTtcbiAgICB0cnkgeyByLm1vdmVUb0VsZW1lbnRUZXh0KG5vZGUucGFyZW50Tm9kZSk7IH1cbiAgICBjYXRjaChlKSB7IHJldHVybiByIH1cbiAgICByLmNvbGxhcHNlKHRydWUpO1xuICAgIHIubW92ZUVuZChcImNoYXJhY3RlclwiLCBlbmQpO1xuICAgIHIubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsIHN0YXJ0KTtcbiAgICByZXR1cm4gclxuICB9OyB9XG5cbiAgZnVuY3Rpb24gY29udGFpbnMocGFyZW50LCBjaGlsZCkge1xuICAgIGlmIChjaGlsZC5ub2RlVHlwZSA9PSAzKSAvLyBBbmRyb2lkIGJyb3dzZXIgYWx3YXlzIHJldHVybnMgZmFsc2Ugd2hlbiBjaGlsZCBpcyBhIHRleHRub2RlXG4gICAgICB7IGNoaWxkID0gY2hpbGQucGFyZW50Tm9kZTsgfVxuICAgIGlmIChwYXJlbnQuY29udGFpbnMpXG4gICAgICB7IHJldHVybiBwYXJlbnQuY29udGFpbnMoY2hpbGQpIH1cbiAgICBkbyB7XG4gICAgICBpZiAoY2hpbGQubm9kZVR5cGUgPT0gMTEpIHsgY2hpbGQgPSBjaGlsZC5ob3N0OyB9XG4gICAgICBpZiAoY2hpbGQgPT0gcGFyZW50KSB7IHJldHVybiB0cnVlIH1cbiAgICB9IHdoaWxlIChjaGlsZCA9IGNoaWxkLnBhcmVudE5vZGUpXG4gIH1cblxuICBmdW5jdGlvbiBhY3RpdmVFbHQoKSB7XG4gICAgLy8gSUUgYW5kIEVkZ2UgbWF5IHRocm93IGFuIFwiVW5zcGVjaWZpZWQgRXJyb3JcIiB3aGVuIGFjY2Vzc2luZyBkb2N1bWVudC5hY3RpdmVFbGVtZW50LlxuICAgIC8vIElFIDwgMTAgd2lsbCB0aHJvdyB3aGVuIGFjY2Vzc2VkIHdoaWxlIHRoZSBwYWdlIGlzIGxvYWRpbmcgb3IgaW4gYW4gaWZyYW1lLlxuICAgIC8vIElFID4gOSBhbmQgRWRnZSB3aWxsIHRocm93IHdoZW4gYWNjZXNzZWQgaW4gYW4gaWZyYW1lIGlmIGRvY3VtZW50LmJvZHkgaXMgdW5hdmFpbGFibGUuXG4gICAgdmFyIGFjdGl2ZUVsZW1lbnQ7XG4gICAgdHJ5IHtcbiAgICAgIGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmJvZHkgfHwgbnVsbDtcbiAgICB9XG4gICAgd2hpbGUgKGFjdGl2ZUVsZW1lbnQgJiYgYWN0aXZlRWxlbWVudC5zaGFkb3dSb290ICYmIGFjdGl2ZUVsZW1lbnQuc2hhZG93Um9vdC5hY3RpdmVFbGVtZW50KVxuICAgICAgeyBhY3RpdmVFbGVtZW50ID0gYWN0aXZlRWxlbWVudC5zaGFkb3dSb290LmFjdGl2ZUVsZW1lbnQ7IH1cbiAgICByZXR1cm4gYWN0aXZlRWxlbWVudFxuICB9XG5cbiAgZnVuY3Rpb24gYWRkQ2xhc3Mobm9kZSwgY2xzKSB7XG4gICAgdmFyIGN1cnJlbnQgPSBub2RlLmNsYXNzTmFtZTtcbiAgICBpZiAoIWNsYXNzVGVzdChjbHMpLnRlc3QoY3VycmVudCkpIHsgbm9kZS5jbGFzc05hbWUgKz0gKGN1cnJlbnQgPyBcIiBcIiA6IFwiXCIpICsgY2xzOyB9XG4gIH1cbiAgZnVuY3Rpb24gam9pbkNsYXNzZXMoYSwgYikge1xuICAgIHZhciBhcyA9IGEuc3BsaXQoXCIgXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXMubGVuZ3RoOyBpKyspXG4gICAgICB7IGlmIChhc1tpXSAmJiAhY2xhc3NUZXN0KGFzW2ldKS50ZXN0KGIpKSB7IGIgKz0gXCIgXCIgKyBhc1tpXTsgfSB9XG4gICAgcmV0dXJuIGJcbiAgfVxuXG4gIHZhciBzZWxlY3RJbnB1dCA9IGZ1bmN0aW9uKG5vZGUpIHsgbm9kZS5zZWxlY3QoKTsgfTtcbiAgaWYgKGlvcykgLy8gTW9iaWxlIFNhZmFyaSBhcHBhcmVudGx5IGhhcyBhIGJ1ZyB3aGVyZSBzZWxlY3QoKSBpcyBicm9rZW4uXG4gICAgeyBzZWxlY3RJbnB1dCA9IGZ1bmN0aW9uKG5vZGUpIHsgbm9kZS5zZWxlY3Rpb25TdGFydCA9IDA7IG5vZGUuc2VsZWN0aW9uRW5kID0gbm9kZS52YWx1ZS5sZW5ndGg7IH07IH1cbiAgZWxzZSBpZiAoaWUpIC8vIFN1cHByZXNzIG15c3RlcmlvdXMgSUUxMCBlcnJvcnNcbiAgICB7IHNlbGVjdElucHV0ID0gZnVuY3Rpb24obm9kZSkgeyB0cnkgeyBub2RlLnNlbGVjdCgpOyB9IGNhdGNoKF9lKSB7fSB9OyB9XG5cbiAgZnVuY3Rpb24gYmluZChmKSB7XG4gICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIHJldHVybiBmdW5jdGlvbigpe3JldHVybiBmLmFwcGx5KG51bGwsIGFyZ3MpfVxuICB9XG5cbiAgZnVuY3Rpb24gY29weU9iaihvYmosIHRhcmdldCwgb3ZlcndyaXRlKSB7XG4gICAgaWYgKCF0YXJnZXQpIHsgdGFyZ2V0ID0ge307IH1cbiAgICBmb3IgKHZhciBwcm9wIGluIG9iailcbiAgICAgIHsgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSAmJiAob3ZlcndyaXRlICE9PSBmYWxzZSB8fCAhdGFyZ2V0Lmhhc093blByb3BlcnR5KHByb3ApKSlcbiAgICAgICAgeyB0YXJnZXRbcHJvcF0gPSBvYmpbcHJvcF07IH0gfVxuICAgIHJldHVybiB0YXJnZXRcbiAgfVxuXG4gIC8vIENvdW50cyB0aGUgY29sdW1uIG9mZnNldCBpbiBhIHN0cmluZywgdGFraW5nIHRhYnMgaW50byBhY2NvdW50LlxuICAvLyBVc2VkIG1vc3RseSB0byBmaW5kIGluZGVudGF0aW9uLlxuICBmdW5jdGlvbiBjb3VudENvbHVtbihzdHJpbmcsIGVuZCwgdGFiU2l6ZSwgc3RhcnRJbmRleCwgc3RhcnRWYWx1ZSkge1xuICAgIGlmIChlbmQgPT0gbnVsbCkge1xuICAgICAgZW5kID0gc3RyaW5nLnNlYXJjaCgvW15cXHNcXHUwMGEwXS8pO1xuICAgICAgaWYgKGVuZCA9PSAtMSkgeyBlbmQgPSBzdHJpbmcubGVuZ3RoOyB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4IHx8IDAsIG4gPSBzdGFydFZhbHVlIHx8IDA7Oykge1xuICAgICAgdmFyIG5leHRUYWIgPSBzdHJpbmcuaW5kZXhPZihcIlxcdFwiLCBpKTtcbiAgICAgIGlmIChuZXh0VGFiIDwgMCB8fCBuZXh0VGFiID49IGVuZClcbiAgICAgICAgeyByZXR1cm4gbiArIChlbmQgLSBpKSB9XG4gICAgICBuICs9IG5leHRUYWIgLSBpO1xuICAgICAgbiArPSB0YWJTaXplIC0gKG4gJSB0YWJTaXplKTtcbiAgICAgIGkgPSBuZXh0VGFiICsgMTtcbiAgICB9XG4gIH1cblxuICB2YXIgRGVsYXllZCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaWQgPSBudWxsO1xuICAgIHRoaXMuZiA9IG51bGw7XG4gICAgdGhpcy50aW1lID0gMDtcbiAgICB0aGlzLmhhbmRsZXIgPSBiaW5kKHRoaXMub25UaW1lb3V0LCB0aGlzKTtcbiAgfTtcbiAgRGVsYXllZC5wcm90b3R5cGUub25UaW1lb3V0ID0gZnVuY3Rpb24gKHNlbGYpIHtcbiAgICBzZWxmLmlkID0gMDtcbiAgICBpZiAoc2VsZi50aW1lIDw9ICtuZXcgRGF0ZSkge1xuICAgICAgc2VsZi5mKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFRpbWVvdXQoc2VsZi5oYW5kbGVyLCBzZWxmLnRpbWUgLSArbmV3IERhdGUpO1xuICAgIH1cbiAgfTtcbiAgRGVsYXllZC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKG1zLCBmKSB7XG4gICAgdGhpcy5mID0gZjtcbiAgICB2YXIgdGltZSA9ICtuZXcgRGF0ZSArIG1zO1xuICAgIGlmICghdGhpcy5pZCB8fCB0aW1lIDwgdGhpcy50aW1lKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5pZCk7XG4gICAgICB0aGlzLmlkID0gc2V0VGltZW91dCh0aGlzLmhhbmRsZXIsIG1zKTtcbiAgICAgIHRoaXMudGltZSA9IHRpbWU7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIGluZGV4T2YoYXJyYXksIGVsdCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyArK2kpXG4gICAgICB7IGlmIChhcnJheVtpXSA9PSBlbHQpIHsgcmV0dXJuIGkgfSB9XG4gICAgcmV0dXJuIC0xXG4gIH1cblxuICAvLyBOdW1iZXIgb2YgcGl4ZWxzIGFkZGVkIHRvIHNjcm9sbGVyIGFuZCBzaXplciB0byBoaWRlIHNjcm9sbGJhclxuICB2YXIgc2Nyb2xsZXJHYXAgPSA1MDtcblxuICAvLyBSZXR1cm5lZCBvciB0aHJvd24gYnkgdmFyaW91cyBwcm90b2NvbHMgdG8gc2lnbmFsICdJJ20gbm90XG4gIC8vIGhhbmRsaW5nIHRoaXMnLlxuICB2YXIgUGFzcyA9IHt0b1N0cmluZzogZnVuY3Rpb24oKXtyZXR1cm4gXCJDb2RlTWlycm9yLlBhc3NcIn19O1xuXG4gIC8vIFJldXNlZCBvcHRpb24gb2JqZWN0cyBmb3Igc2V0U2VsZWN0aW9uICYgZnJpZW5kc1xuICB2YXIgc2VsX2RvbnRTY3JvbGwgPSB7c2Nyb2xsOiBmYWxzZX0sIHNlbF9tb3VzZSA9IHtvcmlnaW46IFwiKm1vdXNlXCJ9LCBzZWxfbW92ZSA9IHtvcmlnaW46IFwiK21vdmVcIn07XG5cbiAgLy8gVGhlIGludmVyc2Ugb2YgY291bnRDb2x1bW4gLS0gZmluZCB0aGUgb2Zmc2V0IHRoYXQgY29ycmVzcG9uZHMgdG9cbiAgLy8gYSBwYXJ0aWN1bGFyIGNvbHVtbi5cbiAgZnVuY3Rpb24gZmluZENvbHVtbihzdHJpbmcsIGdvYWwsIHRhYlNpemUpIHtcbiAgICBmb3IgKHZhciBwb3MgPSAwLCBjb2wgPSAwOzspIHtcbiAgICAgIHZhciBuZXh0VGFiID0gc3RyaW5nLmluZGV4T2YoXCJcXHRcIiwgcG9zKTtcbiAgICAgIGlmIChuZXh0VGFiID09IC0xKSB7IG5leHRUYWIgPSBzdHJpbmcubGVuZ3RoOyB9XG4gICAgICB2YXIgc2tpcHBlZCA9IG5leHRUYWIgLSBwb3M7XG4gICAgICBpZiAobmV4dFRhYiA9PSBzdHJpbmcubGVuZ3RoIHx8IGNvbCArIHNraXBwZWQgPj0gZ29hbClcbiAgICAgICAgeyByZXR1cm4gcG9zICsgTWF0aC5taW4oc2tpcHBlZCwgZ29hbCAtIGNvbCkgfVxuICAgICAgY29sICs9IG5leHRUYWIgLSBwb3M7XG4gICAgICBjb2wgKz0gdGFiU2l6ZSAtIChjb2wgJSB0YWJTaXplKTtcbiAgICAgIHBvcyA9IG5leHRUYWIgKyAxO1xuICAgICAgaWYgKGNvbCA+PSBnb2FsKSB7IHJldHVybiBwb3MgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBzcGFjZVN0cnMgPSBbXCJcIl07XG4gIGZ1bmN0aW9uIHNwYWNlU3RyKG4pIHtcbiAgICB3aGlsZSAoc3BhY2VTdHJzLmxlbmd0aCA8PSBuKVxuICAgICAgeyBzcGFjZVN0cnMucHVzaChsc3Qoc3BhY2VTdHJzKSArIFwiIFwiKTsgfVxuICAgIHJldHVybiBzcGFjZVN0cnNbbl1cbiAgfVxuXG4gIGZ1bmN0aW9uIGxzdChhcnIpIHsgcmV0dXJuIGFyclthcnIubGVuZ3RoLTFdIH1cblxuICBmdW5jdGlvbiBtYXAoYXJyYXksIGYpIHtcbiAgICB2YXIgb3V0ID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykgeyBvdXRbaV0gPSBmKGFycmF5W2ldLCBpKTsgfVxuICAgIHJldHVybiBvdXRcbiAgfVxuXG4gIGZ1bmN0aW9uIGluc2VydFNvcnRlZChhcnJheSwgdmFsdWUsIHNjb3JlKSB7XG4gICAgdmFyIHBvcyA9IDAsIHByaW9yaXR5ID0gc2NvcmUodmFsdWUpO1xuICAgIHdoaWxlIChwb3MgPCBhcnJheS5sZW5ndGggJiYgc2NvcmUoYXJyYXlbcG9zXSkgPD0gcHJpb3JpdHkpIHsgcG9zKys7IH1cbiAgICBhcnJheS5zcGxpY2UocG9zLCAwLCB2YWx1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBub3RoaW5nKCkge31cblxuICBmdW5jdGlvbiBjcmVhdGVPYmooYmFzZSwgcHJvcHMpIHtcbiAgICB2YXIgaW5zdDtcbiAgICBpZiAoT2JqZWN0LmNyZWF0ZSkge1xuICAgICAgaW5zdCA9IE9iamVjdC5jcmVhdGUoYmFzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vdGhpbmcucHJvdG90eXBlID0gYmFzZTtcbiAgICAgIGluc3QgPSBuZXcgbm90aGluZygpO1xuICAgIH1cbiAgICBpZiAocHJvcHMpIHsgY29weU9iaihwcm9wcywgaW5zdCk7IH1cbiAgICByZXR1cm4gaW5zdFxuICB9XG5cbiAgdmFyIG5vbkFTQ0lJU2luZ2xlQ2FzZVdvcmRDaGFyID0gL1tcXHUwMGRmXFx1MDU4N1xcdTA1OTAtXFx1MDVmNFxcdTA2MDAtXFx1MDZmZlxcdTMwNDAtXFx1MzA5ZlxcdTMwYTAtXFx1MzBmZlxcdTM0MDAtXFx1NGRiNVxcdTRlMDAtXFx1OWZjY1xcdWFjMDAtXFx1ZDdhZl0vO1xuICBmdW5jdGlvbiBpc1dvcmRDaGFyQmFzaWMoY2gpIHtcbiAgICByZXR1cm4gL1xcdy8udGVzdChjaCkgfHwgY2ggPiBcIlxceDgwXCIgJiZcbiAgICAgIChjaC50b1VwcGVyQ2FzZSgpICE9IGNoLnRvTG93ZXJDYXNlKCkgfHwgbm9uQVNDSUlTaW5nbGVDYXNlV29yZENoYXIudGVzdChjaCkpXG4gIH1cbiAgZnVuY3Rpb24gaXNXb3JkQ2hhcihjaCwgaGVscGVyKSB7XG4gICAgaWYgKCFoZWxwZXIpIHsgcmV0dXJuIGlzV29yZENoYXJCYXNpYyhjaCkgfVxuICAgIGlmIChoZWxwZXIuc291cmNlLmluZGV4T2YoXCJcXFxcd1wiKSA+IC0xICYmIGlzV29yZENoYXJCYXNpYyhjaCkpIHsgcmV0dXJuIHRydWUgfVxuICAgIHJldHVybiBoZWxwZXIudGVzdChjaClcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzRW1wdHkob2JqKSB7XG4gICAgZm9yICh2YXIgbiBpbiBvYmopIHsgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShuKSAmJiBvYmpbbl0pIHsgcmV0dXJuIGZhbHNlIH0gfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICAvLyBFeHRlbmRpbmcgdW5pY29kZSBjaGFyYWN0ZXJzLiBBIHNlcmllcyBvZiBhIG5vbi1leHRlbmRpbmcgY2hhciArXG4gIC8vIGFueSBudW1iZXIgb2YgZXh0ZW5kaW5nIGNoYXJzIGlzIHRyZWF0ZWQgYXMgYSBzaW5nbGUgdW5pdCBhcyBmYXJcbiAgLy8gYXMgZWRpdGluZyBhbmQgbWVhc3VyaW5nIGlzIGNvbmNlcm5lZC4gVGhpcyBpcyBub3QgZnVsbHkgY29ycmVjdCxcbiAgLy8gc2luY2Ugc29tZSBzY3JpcHRzL2ZvbnRzL2Jyb3dzZXJzIGFsc28gdHJlYXQgb3RoZXIgY29uZmlndXJhdGlvbnNcbiAgLy8gb2YgY29kZSBwb2ludHMgYXMgYSBncm91cC5cbiAgdmFyIGV4dGVuZGluZ0NoYXJzID0gL1tcXHUwMzAwLVxcdTAzNmZcXHUwNDgzLVxcdTA0ODlcXHUwNTkxLVxcdTA1YmRcXHUwNWJmXFx1MDVjMVxcdTA1YzJcXHUwNWM0XFx1MDVjNVxcdTA1YzdcXHUwNjEwLVxcdTA2MWFcXHUwNjRiLVxcdTA2NWVcXHUwNjcwXFx1MDZkNi1cXHUwNmRjXFx1MDZkZS1cXHUwNmU0XFx1MDZlN1xcdTA2ZThcXHUwNmVhLVxcdTA2ZWRcXHUwNzExXFx1MDczMC1cXHUwNzRhXFx1MDdhNi1cXHUwN2IwXFx1MDdlYi1cXHUwN2YzXFx1MDgxNi1cXHUwODE5XFx1MDgxYi1cXHUwODIzXFx1MDgyNS1cXHUwODI3XFx1MDgyOS1cXHUwODJkXFx1MDkwMC1cXHUwOTAyXFx1MDkzY1xcdTA5NDEtXFx1MDk0OFxcdTA5NGRcXHUwOTUxLVxcdTA5NTVcXHUwOTYyXFx1MDk2M1xcdTA5ODFcXHUwOWJjXFx1MDliZVxcdTA5YzEtXFx1MDljNFxcdTA5Y2RcXHUwOWQ3XFx1MDllMlxcdTA5ZTNcXHUwYTAxXFx1MGEwMlxcdTBhM2NcXHUwYTQxXFx1MGE0MlxcdTBhNDdcXHUwYTQ4XFx1MGE0Yi1cXHUwYTRkXFx1MGE1MVxcdTBhNzBcXHUwYTcxXFx1MGE3NVxcdTBhODFcXHUwYTgyXFx1MGFiY1xcdTBhYzEtXFx1MGFjNVxcdTBhYzdcXHUwYWM4XFx1MGFjZFxcdTBhZTJcXHUwYWUzXFx1MGIwMVxcdTBiM2NcXHUwYjNlXFx1MGIzZlxcdTBiNDEtXFx1MGI0NFxcdTBiNGRcXHUwYjU2XFx1MGI1N1xcdTBiNjJcXHUwYjYzXFx1MGI4MlxcdTBiYmVcXHUwYmMwXFx1MGJjZFxcdTBiZDdcXHUwYzNlLVxcdTBjNDBcXHUwYzQ2LVxcdTBjNDhcXHUwYzRhLVxcdTBjNGRcXHUwYzU1XFx1MGM1NlxcdTBjNjJcXHUwYzYzXFx1MGNiY1xcdTBjYmZcXHUwY2MyXFx1MGNjNlxcdTBjY2NcXHUwY2NkXFx1MGNkNVxcdTBjZDZcXHUwY2UyXFx1MGNlM1xcdTBkM2VcXHUwZDQxLVxcdTBkNDRcXHUwZDRkXFx1MGQ1N1xcdTBkNjJcXHUwZDYzXFx1MGRjYVxcdTBkY2ZcXHUwZGQyLVxcdTBkZDRcXHUwZGQ2XFx1MGRkZlxcdTBlMzFcXHUwZTM0LVxcdTBlM2FcXHUwZTQ3LVxcdTBlNGVcXHUwZWIxXFx1MGViNC1cXHUwZWI5XFx1MGViYlxcdTBlYmNcXHUwZWM4LVxcdTBlY2RcXHUwZjE4XFx1MGYxOVxcdTBmMzVcXHUwZjM3XFx1MGYzOVxcdTBmNzEtXFx1MGY3ZVxcdTBmODAtXFx1MGY4NFxcdTBmODZcXHUwZjg3XFx1MGY5MC1cXHUwZjk3XFx1MGY5OS1cXHUwZmJjXFx1MGZjNlxcdTEwMmQtXFx1MTAzMFxcdTEwMzItXFx1MTAzN1xcdTEwMzlcXHUxMDNhXFx1MTAzZFxcdTEwM2VcXHUxMDU4XFx1MTA1OVxcdTEwNWUtXFx1MTA2MFxcdTEwNzEtXFx1MTA3NFxcdTEwODJcXHUxMDg1XFx1MTA4NlxcdTEwOGRcXHUxMDlkXFx1MTM1ZlxcdTE3MTItXFx1MTcxNFxcdTE3MzItXFx1MTczNFxcdTE3NTJcXHUxNzUzXFx1MTc3MlxcdTE3NzNcXHUxN2I3LVxcdTE3YmRcXHUxN2M2XFx1MTdjOS1cXHUxN2QzXFx1MTdkZFxcdTE4MGItXFx1MTgwZFxcdTE4YTlcXHUxOTIwLVxcdTE5MjJcXHUxOTI3XFx1MTkyOFxcdTE5MzJcXHUxOTM5LVxcdTE5M2JcXHUxYTE3XFx1MWExOFxcdTFhNTZcXHUxYTU4LVxcdTFhNWVcXHUxYTYwXFx1MWE2MlxcdTFhNjUtXFx1MWE2Y1xcdTFhNzMtXFx1MWE3Y1xcdTFhN2ZcXHUxYjAwLVxcdTFiMDNcXHUxYjM0XFx1MWIzNi1cXHUxYjNhXFx1MWIzY1xcdTFiNDJcXHUxYjZiLVxcdTFiNzNcXHUxYjgwXFx1MWI4MVxcdTFiYTItXFx1MWJhNVxcdTFiYThcXHUxYmE5XFx1MWMyYy1cXHUxYzMzXFx1MWMzNlxcdTFjMzdcXHUxY2QwLVxcdTFjZDJcXHUxY2Q0LVxcdTFjZTBcXHUxY2UyLVxcdTFjZThcXHUxY2VkXFx1MWRjMC1cXHUxZGU2XFx1MWRmZC1cXHUxZGZmXFx1MjAwY1xcdTIwMGRcXHUyMGQwLVxcdTIwZjBcXHUyY2VmLVxcdTJjZjFcXHUyZGUwLVxcdTJkZmZcXHUzMDJhLVxcdTMwMmZcXHUzMDk5XFx1MzA5YVxcdWE2NmYtXFx1YTY3MlxcdWE2N2NcXHVhNjdkXFx1YTZmMFxcdWE2ZjFcXHVhODAyXFx1YTgwNlxcdWE4MGJcXHVhODI1XFx1YTgyNlxcdWE4YzRcXHVhOGUwLVxcdWE4ZjFcXHVhOTI2LVxcdWE5MmRcXHVhOTQ3LVxcdWE5NTFcXHVhOTgwLVxcdWE5ODJcXHVhOWIzXFx1YTliNi1cXHVhOWI5XFx1YTliY1xcdWFhMjktXFx1YWEyZVxcdWFhMzFcXHVhYTMyXFx1YWEzNVxcdWFhMzZcXHVhYTQzXFx1YWE0Y1xcdWFhYjBcXHVhYWIyLVxcdWFhYjRcXHVhYWI3XFx1YWFiOFxcdWFhYmVcXHVhYWJmXFx1YWFjMVxcdWFiZTVcXHVhYmU4XFx1YWJlZFxcdWRjMDAtXFx1ZGZmZlxcdWZiMWVcXHVmZTAwLVxcdWZlMGZcXHVmZTIwLVxcdWZlMjZcXHVmZjllXFx1ZmY5Zl0vO1xuICBmdW5jdGlvbiBpc0V4dGVuZGluZ0NoYXIoY2gpIHsgcmV0dXJuIGNoLmNoYXJDb2RlQXQoMCkgPj0gNzY4ICYmIGV4dGVuZGluZ0NoYXJzLnRlc3QoY2gpIH1cblxuICAvLyBSZXR1cm5zIGEgbnVtYmVyIGZyb20gdGhlIHJhbmdlIFtgMGA7IGBzdHIubGVuZ3RoYF0gdW5sZXNzIGBwb3NgIGlzIG91dHNpZGUgdGhhdCByYW5nZS5cbiAgZnVuY3Rpb24gc2tpcEV4dGVuZGluZ0NoYXJzKHN0ciwgcG9zLCBkaXIpIHtcbiAgICB3aGlsZSAoKGRpciA8IDAgPyBwb3MgPiAwIDogcG9zIDwgc3RyLmxlbmd0aCkgJiYgaXNFeHRlbmRpbmdDaGFyKHN0ci5jaGFyQXQocG9zKSkpIHsgcG9zICs9IGRpcjsgfVxuICAgIHJldHVybiBwb3NcbiAgfVxuXG4gIC8vIFJldHVybnMgdGhlIHZhbHVlIGZyb20gdGhlIHJhbmdlIFtgZnJvbWA7IGB0b2BdIHRoYXQgc2F0aXNmaWVzXG4gIC8vIGBwcmVkYCBhbmQgaXMgY2xvc2VzdCB0byBgZnJvbWAuIEFzc3VtZXMgdGhhdCBhdCBsZWFzdCBgdG9gXG4gIC8vIHNhdGlzZmllcyBgcHJlZGAuIFN1cHBvcnRzIGBmcm9tYCBiZWluZyBncmVhdGVyIHRoYW4gYHRvYC5cbiAgZnVuY3Rpb24gZmluZEZpcnN0KHByZWQsIGZyb20sIHRvKSB7XG4gICAgLy8gQXQgYW55IHBvaW50IHdlIGFyZSBjZXJ0YWluIGB0b2Agc2F0aXNmaWVzIGBwcmVkYCwgZG9uJ3Qga25vd1xuICAgIC8vIHdoZXRoZXIgYGZyb21gIGRvZXMuXG4gICAgdmFyIGRpciA9IGZyb20gPiB0byA/IC0xIDogMTtcbiAgICBmb3IgKDs7KSB7XG4gICAgICBpZiAoZnJvbSA9PSB0bykgeyByZXR1cm4gZnJvbSB9XG4gICAgICB2YXIgbWlkRiA9IChmcm9tICsgdG8pIC8gMiwgbWlkID0gZGlyIDwgMCA/IE1hdGguY2VpbChtaWRGKSA6IE1hdGguZmxvb3IobWlkRik7XG4gICAgICBpZiAobWlkID09IGZyb20pIHsgcmV0dXJuIHByZWQobWlkKSA/IGZyb20gOiB0byB9XG4gICAgICBpZiAocHJlZChtaWQpKSB7IHRvID0gbWlkOyB9XG4gICAgICBlbHNlIHsgZnJvbSA9IG1pZCArIGRpcjsgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEJJREkgSEVMUEVSU1xuXG4gIGZ1bmN0aW9uIGl0ZXJhdGVCaWRpU2VjdGlvbnMob3JkZXIsIGZyb20sIHRvLCBmKSB7XG4gICAgaWYgKCFvcmRlcikgeyByZXR1cm4gZihmcm9tLCB0bywgXCJsdHJcIiwgMCkgfVxuICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3JkZXIubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBwYXJ0ID0gb3JkZXJbaV07XG4gICAgICBpZiAocGFydC5mcm9tIDwgdG8gJiYgcGFydC50byA+IGZyb20gfHwgZnJvbSA9PSB0byAmJiBwYXJ0LnRvID09IGZyb20pIHtcbiAgICAgICAgZihNYXRoLm1heChwYXJ0LmZyb20sIGZyb20pLCBNYXRoLm1pbihwYXJ0LnRvLCB0byksIHBhcnQubGV2ZWwgPT0gMSA/IFwicnRsXCIgOiBcImx0clwiLCBpKTtcbiAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWZvdW5kKSB7IGYoZnJvbSwgdG8sIFwibHRyXCIpOyB9XG4gIH1cblxuICB2YXIgYmlkaU90aGVyID0gbnVsbDtcbiAgZnVuY3Rpb24gZ2V0QmlkaVBhcnRBdChvcmRlciwgY2gsIHN0aWNreSkge1xuICAgIHZhciBmb3VuZDtcbiAgICBiaWRpT3RoZXIgPSBudWxsO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3JkZXIubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBjdXIgPSBvcmRlcltpXTtcbiAgICAgIGlmIChjdXIuZnJvbSA8IGNoICYmIGN1ci50byA+IGNoKSB7IHJldHVybiBpIH1cbiAgICAgIGlmIChjdXIudG8gPT0gY2gpIHtcbiAgICAgICAgaWYgKGN1ci5mcm9tICE9IGN1ci50byAmJiBzdGlja3kgPT0gXCJiZWZvcmVcIikgeyBmb3VuZCA9IGk7IH1cbiAgICAgICAgZWxzZSB7IGJpZGlPdGhlciA9IGk7IH1cbiAgICAgIH1cbiAgICAgIGlmIChjdXIuZnJvbSA9PSBjaCkge1xuICAgICAgICBpZiAoY3VyLmZyb20gIT0gY3VyLnRvICYmIHN0aWNreSAhPSBcImJlZm9yZVwiKSB7IGZvdW5kID0gaTsgfVxuICAgICAgICBlbHNlIHsgYmlkaU90aGVyID0gaTsgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZm91bmQgIT0gbnVsbCA/IGZvdW5kIDogYmlkaU90aGVyXG4gIH1cblxuICAvLyBCaWRpcmVjdGlvbmFsIG9yZGVyaW5nIGFsZ29yaXRobVxuICAvLyBTZWUgaHR0cDovL3VuaWNvZGUub3JnL3JlcG9ydHMvdHI5L3RyOS0xMy5odG1sIGZvciB0aGUgYWxnb3JpdGhtXG4gIC8vIHRoYXQgdGhpcyAocGFydGlhbGx5KSBpbXBsZW1lbnRzLlxuXG4gIC8vIE9uZS1jaGFyIGNvZGVzIHVzZWQgZm9yIGNoYXJhY3RlciB0eXBlczpcbiAgLy8gTCAoTCk6ICAgTGVmdC10by1SaWdodFxuICAvLyBSIChSKTogICBSaWdodC10by1MZWZ0XG4gIC8vIHIgKEFMKTogIFJpZ2h0LXRvLUxlZnQgQXJhYmljXG4gIC8vIDEgKEVOKTogIEV1cm9wZWFuIE51bWJlclxuICAvLyArIChFUyk6ICBFdXJvcGVhbiBOdW1iZXIgU2VwYXJhdG9yXG4gIC8vICUgKEVUKTogIEV1cm9wZWFuIE51bWJlciBUZXJtaW5hdG9yXG4gIC8vIG4gKEFOKTogIEFyYWJpYyBOdW1iZXJcbiAgLy8gLCAoQ1MpOiAgQ29tbW9uIE51bWJlciBTZXBhcmF0b3JcbiAgLy8gbSAoTlNNKTogTm9uLVNwYWNpbmcgTWFya1xuICAvLyBiIChCTik6ICBCb3VuZGFyeSBOZXV0cmFsXG4gIC8vIHMgKEIpOiAgIFBhcmFncmFwaCBTZXBhcmF0b3JcbiAgLy8gdCAoUyk6ICAgU2VnbWVudCBTZXBhcmF0b3JcbiAgLy8gdyAoV1MpOiAgV2hpdGVzcGFjZVxuICAvLyBOIChPTik6ICBPdGhlciBOZXV0cmFsc1xuXG4gIC8vIFJldHVybnMgbnVsbCBpZiBjaGFyYWN0ZXJzIGFyZSBvcmRlcmVkIGFzIHRoZXkgYXBwZWFyXG4gIC8vIChsZWZ0LXRvLXJpZ2h0KSwgb3IgYW4gYXJyYXkgb2Ygc2VjdGlvbnMgKHtmcm9tLCB0bywgbGV2ZWx9XG4gIC8vIG9iamVjdHMpIGluIHRoZSBvcmRlciBpbiB3aGljaCB0aGV5IG9jY3VyIHZpc3VhbGx5LlxuICB2YXIgYmlkaU9yZGVyaW5nID0gKGZ1bmN0aW9uKCkge1xuICAgIC8vIENoYXJhY3RlciB0eXBlcyBmb3IgY29kZXBvaW50cyAwIHRvIDB4ZmZcbiAgICB2YXIgbG93VHlwZXMgPSBcImJiYmJiYmJiYnRzdHdzYmJiYmJiYmJiYmJiYmJzc3N0d05OJSUlTk5OTk5OLE4sTjExMTExMTExMTFOTk5OTk5OTExMTExMTExMTExMTExMTExMTExMTExMTExOTk5OTk5MTExMTExMTExMTExMTExMTExMTExMTExMTE5OTk5iYmJiYmJzYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmIsTiUlJSVOTk5OTE5OTk5OJSUxMU5MTk5OMUxOTk5OTkxMTExMTExMTExMTExMTExMTExMTExMTkxMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExOXCI7XG4gICAgLy8gQ2hhcmFjdGVyIHR5cGVzIGZvciBjb2RlcG9pbnRzIDB4NjAwIHRvIDB4NmY5XG4gICAgdmFyIGFyYWJpY1R5cGVzID0gXCJubm5ubm5OTnIlJXIsck5ObW1tbW1tbW1tbW1ycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJtbW1tbW1tbW1tbW1tbW1tbW1tbW1ubm5ubm5ubm5uJW5ucnJybXJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJybW1tbW1tbW5ObW1tbW1tcnJtbU5tbW1tcnIxMTExMTExMTExXCI7XG4gICAgZnVuY3Rpb24gY2hhclR5cGUoY29kZSkge1xuICAgICAgaWYgKGNvZGUgPD0gMHhmNykgeyByZXR1cm4gbG93VHlwZXMuY2hhckF0KGNvZGUpIH1cbiAgICAgIGVsc2UgaWYgKDB4NTkwIDw9IGNvZGUgJiYgY29kZSA8PSAweDVmNCkgeyByZXR1cm4gXCJSXCIgfVxuICAgICAgZWxzZSBpZiAoMHg2MDAgPD0gY29kZSAmJiBjb2RlIDw9IDB4NmY5KSB7IHJldHVybiBhcmFiaWNUeXBlcy5jaGFyQXQoY29kZSAtIDB4NjAwKSB9XG4gICAgICBlbHNlIGlmICgweDZlZSA8PSBjb2RlICYmIGNvZGUgPD0gMHg4YWMpIHsgcmV0dXJuIFwiclwiIH1cbiAgICAgIGVsc2UgaWYgKDB4MjAwMCA8PSBjb2RlICYmIGNvZGUgPD0gMHgyMDBiKSB7IHJldHVybiBcIndcIiB9XG4gICAgICBlbHNlIGlmIChjb2RlID09IDB4MjAwYykgeyByZXR1cm4gXCJiXCIgfVxuICAgICAgZWxzZSB7IHJldHVybiBcIkxcIiB9XG4gICAgfVxuXG4gICAgdmFyIGJpZGlSRSA9IC9bXFx1MDU5MC1cXHUwNWY0XFx1MDYwMC1cXHUwNmZmXFx1MDcwMC1cXHUwOGFjXS87XG4gICAgdmFyIGlzTmV1dHJhbCA9IC9bc3R3Tl0vLCBpc1N0cm9uZyA9IC9bTFJyXS8sIGNvdW50c0FzTGVmdCA9IC9bTGIxbl0vLCBjb3VudHNBc051bSA9IC9bMW5dLztcblxuICAgIGZ1bmN0aW9uIEJpZGlTcGFuKGxldmVsLCBmcm9tLCB0bykge1xuICAgICAgdGhpcy5sZXZlbCA9IGxldmVsO1xuICAgICAgdGhpcy5mcm9tID0gZnJvbTsgdGhpcy50byA9IHRvO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbihzdHIsIGRpcmVjdGlvbikge1xuICAgICAgdmFyIG91dGVyVHlwZSA9IGRpcmVjdGlvbiA9PSBcImx0clwiID8gXCJMXCIgOiBcIlJcIjtcblxuICAgICAgaWYgKHN0ci5sZW5ndGggPT0gMCB8fCBkaXJlY3Rpb24gPT0gXCJsdHJcIiAmJiAhYmlkaVJFLnRlc3Qoc3RyKSkgeyByZXR1cm4gZmFsc2UgfVxuICAgICAgdmFyIGxlbiA9IHN0ci5sZW5ndGgsIHR5cGVzID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKVxuICAgICAgICB7IHR5cGVzLnB1c2goY2hhclR5cGUoc3RyLmNoYXJDb2RlQXQoaSkpKTsgfVxuXG4gICAgICAvLyBXMS4gRXhhbWluZSBlYWNoIG5vbi1zcGFjaW5nIG1hcmsgKE5TTSkgaW4gdGhlIGxldmVsIHJ1biwgYW5kXG4gICAgICAvLyBjaGFuZ2UgdGhlIHR5cGUgb2YgdGhlIE5TTSB0byB0aGUgdHlwZSBvZiB0aGUgcHJldmlvdXNcbiAgICAgIC8vIGNoYXJhY3Rlci4gSWYgdGhlIE5TTSBpcyBhdCB0aGUgc3RhcnQgb2YgdGhlIGxldmVsIHJ1biwgaXQgd2lsbFxuICAgICAgLy8gZ2V0IHRoZSB0eXBlIG9mIHNvci5cbiAgICAgIGZvciAodmFyIGkkMSA9IDAsIHByZXYgPSBvdXRlclR5cGU7IGkkMSA8IGxlbjsgKytpJDEpIHtcbiAgICAgICAgdmFyIHR5cGUgPSB0eXBlc1tpJDFdO1xuICAgICAgICBpZiAodHlwZSA9PSBcIm1cIikgeyB0eXBlc1tpJDFdID0gcHJldjsgfVxuICAgICAgICBlbHNlIHsgcHJldiA9IHR5cGU7IH1cbiAgICAgIH1cblxuICAgICAgLy8gVzIuIFNlYXJjaCBiYWNrd2FyZHMgZnJvbSBlYWNoIGluc3RhbmNlIG9mIGEgRXVyb3BlYW4gbnVtYmVyXG4gICAgICAvLyB1bnRpbCB0aGUgZmlyc3Qgc3Ryb25nIHR5cGUgKFIsIEwsIEFMLCBvciBzb3IpIGlzIGZvdW5kLiBJZiBhblxuICAgICAgLy8gQUwgaXMgZm91bmQsIGNoYW5nZSB0aGUgdHlwZSBvZiB0aGUgRXVyb3BlYW4gbnVtYmVyIHRvIEFyYWJpY1xuICAgICAgLy8gbnVtYmVyLlxuICAgICAgLy8gVzMuIENoYW5nZSBhbGwgQUxzIHRvIFIuXG4gICAgICBmb3IgKHZhciBpJDIgPSAwLCBjdXIgPSBvdXRlclR5cGU7IGkkMiA8IGxlbjsgKytpJDIpIHtcbiAgICAgICAgdmFyIHR5cGUkMSA9IHR5cGVzW2kkMl07XG4gICAgICAgIGlmICh0eXBlJDEgPT0gXCIxXCIgJiYgY3VyID09IFwiclwiKSB7IHR5cGVzW2kkMl0gPSBcIm5cIjsgfVxuICAgICAgICBlbHNlIGlmIChpc1N0cm9uZy50ZXN0KHR5cGUkMSkpIHsgY3VyID0gdHlwZSQxOyBpZiAodHlwZSQxID09IFwiclwiKSB7IHR5cGVzW2kkMl0gPSBcIlJcIjsgfSB9XG4gICAgICB9XG5cbiAgICAgIC8vIFc0LiBBIHNpbmdsZSBFdXJvcGVhbiBzZXBhcmF0b3IgYmV0d2VlbiB0d28gRXVyb3BlYW4gbnVtYmVyc1xuICAgICAgLy8gY2hhbmdlcyB0byBhIEV1cm9wZWFuIG51bWJlci4gQSBzaW5nbGUgY29tbW9uIHNlcGFyYXRvciBiZXR3ZWVuXG4gICAgICAvLyB0d28gbnVtYmVycyBvZiB0aGUgc2FtZSB0eXBlIGNoYW5nZXMgdG8gdGhhdCB0eXBlLlxuICAgICAgZm9yICh2YXIgaSQzID0gMSwgcHJldiQxID0gdHlwZXNbMF07IGkkMyA8IGxlbiAtIDE7ICsraSQzKSB7XG4gICAgICAgIHZhciB0eXBlJDIgPSB0eXBlc1tpJDNdO1xuICAgICAgICBpZiAodHlwZSQyID09IFwiK1wiICYmIHByZXYkMSA9PSBcIjFcIiAmJiB0eXBlc1tpJDMrMV0gPT0gXCIxXCIpIHsgdHlwZXNbaSQzXSA9IFwiMVwiOyB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGUkMiA9PSBcIixcIiAmJiBwcmV2JDEgPT0gdHlwZXNbaSQzKzFdICYmXG4gICAgICAgICAgICAgICAgIChwcmV2JDEgPT0gXCIxXCIgfHwgcHJldiQxID09IFwiblwiKSkgeyB0eXBlc1tpJDNdID0gcHJldiQxOyB9XG4gICAgICAgIHByZXYkMSA9IHR5cGUkMjtcbiAgICAgIH1cblxuICAgICAgLy8gVzUuIEEgc2VxdWVuY2Ugb2YgRXVyb3BlYW4gdGVybWluYXRvcnMgYWRqYWNlbnQgdG8gRXVyb3BlYW5cbiAgICAgIC8vIG51bWJlcnMgY2hhbmdlcyB0byBhbGwgRXVyb3BlYW4gbnVtYmVycy5cbiAgICAgIC8vIFc2LiBPdGhlcndpc2UsIHNlcGFyYXRvcnMgYW5kIHRlcm1pbmF0b3JzIGNoYW5nZSB0byBPdGhlclxuICAgICAgLy8gTmV1dHJhbC5cbiAgICAgIGZvciAodmFyIGkkNCA9IDA7IGkkNCA8IGxlbjsgKytpJDQpIHtcbiAgICAgICAgdmFyIHR5cGUkMyA9IHR5cGVzW2kkNF07XG4gICAgICAgIGlmICh0eXBlJDMgPT0gXCIsXCIpIHsgdHlwZXNbaSQ0XSA9IFwiTlwiOyB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGUkMyA9PSBcIiVcIikge1xuICAgICAgICAgIHZhciBlbmQgPSAodm9pZCAwKTtcbiAgICAgICAgICBmb3IgKGVuZCA9IGkkNCArIDE7IGVuZCA8IGxlbiAmJiB0eXBlc1tlbmRdID09IFwiJVwiOyArK2VuZCkge31cbiAgICAgICAgICB2YXIgcmVwbGFjZSA9IChpJDQgJiYgdHlwZXNbaSQ0LTFdID09IFwiIVwiKSB8fCAoZW5kIDwgbGVuICYmIHR5cGVzW2VuZF0gPT0gXCIxXCIpID8gXCIxXCIgOiBcIk5cIjtcbiAgICAgICAgICBmb3IgKHZhciBqID0gaSQ0OyBqIDwgZW5kOyArK2opIHsgdHlwZXNbal0gPSByZXBsYWNlOyB9XG4gICAgICAgICAgaSQ0ID0gZW5kIC0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBXNy4gU2VhcmNoIGJhY2t3YXJkcyBmcm9tIGVhY2ggaW5zdGFuY2Ugb2YgYSBFdXJvcGVhbiBudW1iZXJcbiAgICAgIC8vIHVudGlsIHRoZSBmaXJzdCBzdHJvbmcgdHlwZSAoUiwgTCwgb3Igc29yKSBpcyBmb3VuZC4gSWYgYW4gTCBpc1xuICAgICAgLy8gZm91bmQsIHRoZW4gY2hhbmdlIHRoZSB0eXBlIG9mIHRoZSBFdXJvcGVhbiBudW1iZXIgdG8gTC5cbiAgICAgIGZvciAodmFyIGkkNSA9IDAsIGN1ciQxID0gb3V0ZXJUeXBlOyBpJDUgPCBsZW47ICsraSQ1KSB7XG4gICAgICAgIHZhciB0eXBlJDQgPSB0eXBlc1tpJDVdO1xuICAgICAgICBpZiAoY3VyJDEgPT0gXCJMXCIgJiYgdHlwZSQ0ID09IFwiMVwiKSB7IHR5cGVzW2kkNV0gPSBcIkxcIjsgfVxuICAgICAgICBlbHNlIGlmIChpc1N0cm9uZy50ZXN0KHR5cGUkNCkpIHsgY3VyJDEgPSB0eXBlJDQ7IH1cbiAgICAgIH1cblxuICAgICAgLy8gTjEuIEEgc2VxdWVuY2Ugb2YgbmV1dHJhbHMgdGFrZXMgdGhlIGRpcmVjdGlvbiBvZiB0aGVcbiAgICAgIC8vIHN1cnJvdW5kaW5nIHN0cm9uZyB0ZXh0IGlmIHRoZSB0ZXh0IG9uIGJvdGggc2lkZXMgaGFzIHRoZSBzYW1lXG4gICAgICAvLyBkaXJlY3Rpb24uIEV1cm9wZWFuIGFuZCBBcmFiaWMgbnVtYmVycyBhY3QgYXMgaWYgdGhleSB3ZXJlIFIgaW5cbiAgICAgIC8vIHRlcm1zIG9mIHRoZWlyIGluZmx1ZW5jZSBvbiBuZXV0cmFscy4gU3RhcnQtb2YtbGV2ZWwtcnVuIChzb3IpXG4gICAgICAvLyBhbmQgZW5kLW9mLWxldmVsLXJ1biAoZW9yKSBhcmUgdXNlZCBhdCBsZXZlbCBydW4gYm91bmRhcmllcy5cbiAgICAgIC8vIE4yLiBBbnkgcmVtYWluaW5nIG5ldXRyYWxzIHRha2UgdGhlIGVtYmVkZGluZyBkaXJlY3Rpb24uXG4gICAgICBmb3IgKHZhciBpJDYgPSAwOyBpJDYgPCBsZW47ICsraSQ2KSB7XG4gICAgICAgIGlmIChpc05ldXRyYWwudGVzdCh0eXBlc1tpJDZdKSkge1xuICAgICAgICAgIHZhciBlbmQkMSA9ICh2b2lkIDApO1xuICAgICAgICAgIGZvciAoZW5kJDEgPSBpJDYgKyAxOyBlbmQkMSA8IGxlbiAmJiBpc05ldXRyYWwudGVzdCh0eXBlc1tlbmQkMV0pOyArK2VuZCQxKSB7fVxuICAgICAgICAgIHZhciBiZWZvcmUgPSAoaSQ2ID8gdHlwZXNbaSQ2LTFdIDogb3V0ZXJUeXBlKSA9PSBcIkxcIjtcbiAgICAgICAgICB2YXIgYWZ0ZXIgPSAoZW5kJDEgPCBsZW4gPyB0eXBlc1tlbmQkMV0gOiBvdXRlclR5cGUpID09IFwiTFwiO1xuICAgICAgICAgIHZhciByZXBsYWNlJDEgPSBiZWZvcmUgPT0gYWZ0ZXIgPyAoYmVmb3JlID8gXCJMXCIgOiBcIlJcIikgOiBvdXRlclR5cGU7XG4gICAgICAgICAgZm9yICh2YXIgaiQxID0gaSQ2OyBqJDEgPCBlbmQkMTsgKytqJDEpIHsgdHlwZXNbaiQxXSA9IHJlcGxhY2UkMTsgfVxuICAgICAgICAgIGkkNiA9IGVuZCQxIC0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBIZXJlIHdlIGRlcGFydCBmcm9tIHRoZSBkb2N1bWVudGVkIGFsZ29yaXRobSwgaW4gb3JkZXIgdG8gYXZvaWRcbiAgICAgIC8vIGJ1aWxkaW5nIHVwIGFuIGFjdHVhbCBsZXZlbHMgYXJyYXkuIFNpbmNlIHRoZXJlIGFyZSBvbmx5IHRocmVlXG4gICAgICAvLyBsZXZlbHMgKDAsIDEsIDIpIGluIGFuIGltcGxlbWVudGF0aW9uIHRoYXQgZG9lc24ndCB0YWtlXG4gICAgICAvLyBleHBsaWNpdCBlbWJlZGRpbmcgaW50byBhY2NvdW50LCB3ZSBjYW4gYnVpbGQgdXAgdGhlIG9yZGVyIG9uXG4gICAgICAvLyB0aGUgZmx5LCB3aXRob3V0IGZvbGxvd2luZyB0aGUgbGV2ZWwtYmFzZWQgYWxnb3JpdGhtLlxuICAgICAgdmFyIG9yZGVyID0gW10sIG07XG4gICAgICBmb3IgKHZhciBpJDcgPSAwOyBpJDcgPCBsZW47KSB7XG4gICAgICAgIGlmIChjb3VudHNBc0xlZnQudGVzdCh0eXBlc1tpJDddKSkge1xuICAgICAgICAgIHZhciBzdGFydCA9IGkkNztcbiAgICAgICAgICBmb3IgKCsraSQ3OyBpJDcgPCBsZW4gJiYgY291bnRzQXNMZWZ0LnRlc3QodHlwZXNbaSQ3XSk7ICsraSQ3KSB7fVxuICAgICAgICAgIG9yZGVyLnB1c2gobmV3IEJpZGlTcGFuKDAsIHN0YXJ0LCBpJDcpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgcG9zID0gaSQ3LCBhdCA9IG9yZGVyLmxlbmd0aCwgaXNSVEwgPSBkaXJlY3Rpb24gPT0gXCJydGxcIiA/IDEgOiAwO1xuICAgICAgICAgIGZvciAoKytpJDc7IGkkNyA8IGxlbiAmJiB0eXBlc1tpJDddICE9IFwiTFwiOyArK2kkNykge31cbiAgICAgICAgICBmb3IgKHZhciBqJDIgPSBwb3M7IGokMiA8IGkkNzspIHtcbiAgICAgICAgICAgIGlmIChjb3VudHNBc051bS50ZXN0KHR5cGVzW2okMl0pKSB7XG4gICAgICAgICAgICAgIGlmIChwb3MgPCBqJDIpIHsgb3JkZXIuc3BsaWNlKGF0LCAwLCBuZXcgQmlkaVNwYW4oMSwgcG9zLCBqJDIpKTsgYXQgKz0gaXNSVEw7IH1cbiAgICAgICAgICAgICAgdmFyIG5zdGFydCA9IGokMjtcbiAgICAgICAgICAgICAgZm9yICgrK2okMjsgaiQyIDwgaSQ3ICYmIGNvdW50c0FzTnVtLnRlc3QodHlwZXNbaiQyXSk7ICsraiQyKSB7fVxuICAgICAgICAgICAgICBvcmRlci5zcGxpY2UoYXQsIDAsIG5ldyBCaWRpU3BhbigyLCBuc3RhcnQsIGokMikpO1xuICAgICAgICAgICAgICBhdCArPSBpc1JUTDtcbiAgICAgICAgICAgICAgcG9zID0gaiQyO1xuICAgICAgICAgICAgfSBlbHNlIHsgKytqJDI7IH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHBvcyA8IGkkNykgeyBvcmRlci5zcGxpY2UoYXQsIDAsIG5ldyBCaWRpU3BhbigxLCBwb3MsIGkkNykpOyB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChkaXJlY3Rpb24gPT0gXCJsdHJcIikge1xuICAgICAgICBpZiAob3JkZXJbMF0ubGV2ZWwgPT0gMSAmJiAobSA9IHN0ci5tYXRjaCgvXlxccysvKSkpIHtcbiAgICAgICAgICBvcmRlclswXS5mcm9tID0gbVswXS5sZW5ndGg7XG4gICAgICAgICAgb3JkZXIudW5zaGlmdChuZXcgQmlkaVNwYW4oMCwgMCwgbVswXS5sZW5ndGgpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobHN0KG9yZGVyKS5sZXZlbCA9PSAxICYmIChtID0gc3RyLm1hdGNoKC9cXHMrJC8pKSkge1xuICAgICAgICAgIGxzdChvcmRlcikudG8gLT0gbVswXS5sZW5ndGg7XG4gICAgICAgICAgb3JkZXIucHVzaChuZXcgQmlkaVNwYW4oMCwgbGVuIC0gbVswXS5sZW5ndGgsIGxlbikpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkaXJlY3Rpb24gPT0gXCJydGxcIiA/IG9yZGVyLnJldmVyc2UoKSA6IG9yZGVyXG4gICAgfVxuICB9KSgpO1xuXG4gIC8vIEdldCB0aGUgYmlkaSBvcmRlcmluZyBmb3IgdGhlIGdpdmVuIGxpbmUgKGFuZCBjYWNoZSBpdCkuIFJldHVybnNcbiAgLy8gZmFsc2UgZm9yIGxpbmVzIHRoYXQgYXJlIGZ1bGx5IGxlZnQtdG8tcmlnaHQsIGFuZCBhbiBhcnJheSBvZlxuICAvLyBCaWRpU3BhbiBvYmplY3RzIG90aGVyd2lzZS5cbiAgZnVuY3Rpb24gZ2V0T3JkZXIobGluZSwgZGlyZWN0aW9uKSB7XG4gICAgdmFyIG9yZGVyID0gbGluZS5vcmRlcjtcbiAgICBpZiAob3JkZXIgPT0gbnVsbCkgeyBvcmRlciA9IGxpbmUub3JkZXIgPSBiaWRpT3JkZXJpbmcobGluZS50ZXh0LCBkaXJlY3Rpb24pOyB9XG4gICAgcmV0dXJuIG9yZGVyXG4gIH1cblxuICAvLyBFVkVOVCBIQU5ETElOR1xuXG4gIC8vIExpZ2h0d2VpZ2h0IGV2ZW50IGZyYW1ld29yay4gb24vb2ZmIGFsc28gd29yayBvbiBET00gbm9kZXMsXG4gIC8vIHJlZ2lzdGVyaW5nIG5hdGl2ZSBET00gaGFuZGxlcnMuXG5cbiAgdmFyIG5vSGFuZGxlcnMgPSBbXTtcblxuICB2YXIgb24gPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlLCBmKSB7XG4gICAgaWYgKGVtaXR0ZXIuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGYsIGZhbHNlKTtcbiAgICB9IGVsc2UgaWYgKGVtaXR0ZXIuYXR0YWNoRXZlbnQpIHtcbiAgICAgIGVtaXR0ZXIuYXR0YWNoRXZlbnQoXCJvblwiICsgdHlwZSwgZik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBtYXAgPSBlbWl0dGVyLl9oYW5kbGVycyB8fCAoZW1pdHRlci5faGFuZGxlcnMgPSB7fSk7XG4gICAgICBtYXBbdHlwZV0gPSAobWFwW3R5cGVdIHx8IG5vSGFuZGxlcnMpLmNvbmNhdChmKTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gZ2V0SGFuZGxlcnMoZW1pdHRlciwgdHlwZSkge1xuICAgIHJldHVybiBlbWl0dGVyLl9oYW5kbGVycyAmJiBlbWl0dGVyLl9oYW5kbGVyc1t0eXBlXSB8fCBub0hhbmRsZXJzXG4gIH1cblxuICBmdW5jdGlvbiBvZmYoZW1pdHRlciwgdHlwZSwgZikge1xuICAgIGlmIChlbWl0dGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIGVtaXR0ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmLCBmYWxzZSk7XG4gICAgfSBlbHNlIGlmIChlbWl0dGVyLmRldGFjaEV2ZW50KSB7XG4gICAgICBlbWl0dGVyLmRldGFjaEV2ZW50KFwib25cIiArIHR5cGUsIGYpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbWFwID0gZW1pdHRlci5faGFuZGxlcnMsIGFyciA9IG1hcCAmJiBtYXBbdHlwZV07XG4gICAgICBpZiAoYXJyKSB7XG4gICAgICAgIHZhciBpbmRleCA9IGluZGV4T2YoYXJyLCBmKTtcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpXG4gICAgICAgICAgeyBtYXBbdHlwZV0gPSBhcnIuc2xpY2UoMCwgaW5kZXgpLmNvbmNhdChhcnIuc2xpY2UoaW5kZXggKyAxKSk7IH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzaWduYWwoZW1pdHRlciwgdHlwZSAvKiwgdmFsdWVzLi4uKi8pIHtcbiAgICB2YXIgaGFuZGxlcnMgPSBnZXRIYW5kbGVycyhlbWl0dGVyLCB0eXBlKTtcbiAgICBpZiAoIWhhbmRsZXJzLmxlbmd0aCkgeyByZXR1cm4gfVxuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhhbmRsZXJzLmxlbmd0aDsgKytpKSB7IGhhbmRsZXJzW2ldLmFwcGx5KG51bGwsIGFyZ3MpOyB9XG4gIH1cblxuICAvLyBUaGUgRE9NIGV2ZW50cyB0aGF0IENvZGVNaXJyb3IgaGFuZGxlcyBjYW4gYmUgb3ZlcnJpZGRlbiBieVxuICAvLyByZWdpc3RlcmluZyBhIChub24tRE9NKSBoYW5kbGVyIG9uIHRoZSBlZGl0b3IgZm9yIHRoZSBldmVudCBuYW1lLFxuICAvLyBhbmQgcHJldmVudERlZmF1bHQtaW5nIHRoZSBldmVudCBpbiB0aGF0IGhhbmRsZXIuXG4gIGZ1bmN0aW9uIHNpZ25hbERPTUV2ZW50KGNtLCBlLCBvdmVycmlkZSkge1xuICAgIGlmICh0eXBlb2YgZSA9PSBcInN0cmluZ1wiKVxuICAgICAgeyBlID0ge3R5cGU6IGUsIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHsgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTsgfX07IH1cbiAgICBzaWduYWwoY20sIG92ZXJyaWRlIHx8IGUudHlwZSwgY20sIGUpO1xuICAgIHJldHVybiBlX2RlZmF1bHRQcmV2ZW50ZWQoZSkgfHwgZS5jb2RlbWlycm9ySWdub3JlXG4gIH1cblxuICBmdW5jdGlvbiBzaWduYWxDdXJzb3JBY3Rpdml0eShjbSkge1xuICAgIHZhciBhcnIgPSBjbS5faGFuZGxlcnMgJiYgY20uX2hhbmRsZXJzLmN1cnNvckFjdGl2aXR5O1xuICAgIGlmICghYXJyKSB7IHJldHVybiB9XG4gICAgdmFyIHNldCA9IGNtLmN1ck9wLmN1cnNvckFjdGl2aXR5SGFuZGxlcnMgfHwgKGNtLmN1ck9wLmN1cnNvckFjdGl2aXR5SGFuZGxlcnMgPSBbXSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpIHsgaWYgKGluZGV4T2Yoc2V0LCBhcnJbaV0pID09IC0xKVxuICAgICAgeyBzZXQucHVzaChhcnJbaV0pOyB9IH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhc0hhbmRsZXIoZW1pdHRlciwgdHlwZSkge1xuICAgIHJldHVybiBnZXRIYW5kbGVycyhlbWl0dGVyLCB0eXBlKS5sZW5ndGggPiAwXG4gIH1cblxuICAvLyBBZGQgb24gYW5kIG9mZiBtZXRob2RzIHRvIGEgY29uc3RydWN0b3IncyBwcm90b3R5cGUsIHRvIG1ha2VcbiAgLy8gcmVnaXN0ZXJpbmcgZXZlbnRzIG9uIHN1Y2ggb2JqZWN0cyBtb3JlIGNvbnZlbmllbnQuXG4gIGZ1bmN0aW9uIGV2ZW50TWl4aW4oY3Rvcikge1xuICAgIGN0b3IucHJvdG90eXBlLm9uID0gZnVuY3Rpb24odHlwZSwgZikge29uKHRoaXMsIHR5cGUsIGYpO307XG4gICAgY3Rvci5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24odHlwZSwgZikge29mZih0aGlzLCB0eXBlLCBmKTt9O1xuICB9XG5cbiAgLy8gRHVlIHRvIHRoZSBmYWN0IHRoYXQgd2Ugc3RpbGwgc3VwcG9ydCBqdXJhc3NpYyBJRSB2ZXJzaW9ucywgc29tZVxuICAvLyBjb21wYXRpYmlsaXR5IHdyYXBwZXJzIGFyZSBuZWVkZWQuXG5cbiAgZnVuY3Rpb24gZV9wcmV2ZW50RGVmYXVsdChlKSB7XG4gICAgaWYgKGUucHJldmVudERlZmF1bHQpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyB9XG4gICAgZWxzZSB7IGUucmV0dXJuVmFsdWUgPSBmYWxzZTsgfVxuICB9XG4gIGZ1bmN0aW9uIGVfc3RvcFByb3BhZ2F0aW9uKGUpIHtcbiAgICBpZiAoZS5zdG9wUHJvcGFnYXRpb24pIHsgZS5zdG9wUHJvcGFnYXRpb24oKTsgfVxuICAgIGVsc2UgeyBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7IH1cbiAgfVxuICBmdW5jdGlvbiBlX2RlZmF1bHRQcmV2ZW50ZWQoZSkge1xuICAgIHJldHVybiBlLmRlZmF1bHRQcmV2ZW50ZWQgIT0gbnVsbCA/IGUuZGVmYXVsdFByZXZlbnRlZCA6IGUucmV0dXJuVmFsdWUgPT0gZmFsc2VcbiAgfVxuICBmdW5jdGlvbiBlX3N0b3AoZSkge2VfcHJldmVudERlZmF1bHQoZSk7IGVfc3RvcFByb3BhZ2F0aW9uKGUpO31cblxuICBmdW5jdGlvbiBlX3RhcmdldChlKSB7cmV0dXJuIGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudH1cbiAgZnVuY3Rpb24gZV9idXR0b24oZSkge1xuICAgIHZhciBiID0gZS53aGljaDtcbiAgICBpZiAoYiA9PSBudWxsKSB7XG4gICAgICBpZiAoZS5idXR0b24gJiAxKSB7IGIgPSAxOyB9XG4gICAgICBlbHNlIGlmIChlLmJ1dHRvbiAmIDIpIHsgYiA9IDM7IH1cbiAgICAgIGVsc2UgaWYgKGUuYnV0dG9uICYgNCkgeyBiID0gMjsgfVxuICAgIH1cbiAgICBpZiAobWFjICYmIGUuY3RybEtleSAmJiBiID09IDEpIHsgYiA9IDM7IH1cbiAgICByZXR1cm4gYlxuICB9XG5cbiAgLy8gRGV0ZWN0IGRyYWctYW5kLWRyb3BcbiAgdmFyIGRyYWdBbmREcm9wID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gVGhlcmUgaXMgKnNvbWUqIGtpbmQgb2YgZHJhZy1hbmQtZHJvcCBzdXBwb3J0IGluIElFNi04LCBidXQgSVxuICAgIC8vIGNvdWxkbid0IGdldCBpdCB0byB3b3JrIHlldC5cbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDkpIHsgcmV0dXJuIGZhbHNlIH1cbiAgICB2YXIgZGl2ID0gZWx0KCdkaXYnKTtcbiAgICByZXR1cm4gXCJkcmFnZ2FibGVcIiBpbiBkaXYgfHwgXCJkcmFnRHJvcFwiIGluIGRpdlxuICB9KCk7XG5cbiAgdmFyIHp3c3BTdXBwb3J0ZWQ7XG4gIGZ1bmN0aW9uIHplcm9XaWR0aEVsZW1lbnQobWVhc3VyZSkge1xuICAgIGlmICh6d3NwU3VwcG9ydGVkID09IG51bGwpIHtcbiAgICAgIHZhciB0ZXN0ID0gZWx0KFwic3BhblwiLCBcIlxcdTIwMGJcIik7XG4gICAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChtZWFzdXJlLCBlbHQoXCJzcGFuXCIsIFt0ZXN0LCBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcInhcIildKSk7XG4gICAgICBpZiAobWVhc3VyZS5maXJzdENoaWxkLm9mZnNldEhlaWdodCAhPSAwKVxuICAgICAgICB7IHp3c3BTdXBwb3J0ZWQgPSB0ZXN0Lm9mZnNldFdpZHRoIDw9IDEgJiYgdGVzdC5vZmZzZXRIZWlnaHQgPiAyICYmICEoaWUgJiYgaWVfdmVyc2lvbiA8IDgpOyB9XG4gICAgfVxuICAgIHZhciBub2RlID0gendzcFN1cHBvcnRlZCA/IGVsdChcInNwYW5cIiwgXCJcXHUyMDBiXCIpIDpcbiAgICAgIGVsdChcInNwYW5cIiwgXCJcXHUwMGEwXCIsIG51bGwsIFwiZGlzcGxheTogaW5saW5lLWJsb2NrOyB3aWR0aDogMXB4OyBtYXJnaW4tcmlnaHQ6IC0xcHhcIik7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbS10ZXh0XCIsIFwiXCIpO1xuICAgIHJldHVybiBub2RlXG4gIH1cblxuICAvLyBGZWF0dXJlLWRldGVjdCBJRSdzIGNydW1teSBjbGllbnQgcmVjdCByZXBvcnRpbmcgZm9yIGJpZGkgdGV4dFxuICB2YXIgYmFkQmlkaVJlY3RzO1xuICBmdW5jdGlvbiBoYXNCYWRCaWRpUmVjdHMobWVhc3VyZSkge1xuICAgIGlmIChiYWRCaWRpUmVjdHMgIT0gbnVsbCkgeyByZXR1cm4gYmFkQmlkaVJlY3RzIH1cbiAgICB2YXIgdHh0ID0gcmVtb3ZlQ2hpbGRyZW5BbmRBZGQobWVhc3VyZSwgZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJBXFx1MDYyZUFcIikpO1xuICAgIHZhciByMCA9IHJhbmdlKHR4dCwgMCwgMSkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdmFyIHIxID0gcmFuZ2UodHh0LCAxLCAyKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZW1vdmVDaGlsZHJlbihtZWFzdXJlKTtcbiAgICBpZiAoIXIwIHx8IHIwLmxlZnQgPT0gcjAucmlnaHQpIHsgcmV0dXJuIGZhbHNlIH0gLy8gU2FmYXJpIHJldHVybnMgbnVsbCBpbiBzb21lIGNhc2VzICgjMjc4MClcbiAgICByZXR1cm4gYmFkQmlkaVJlY3RzID0gKHIxLnJpZ2h0IC0gcjAucmlnaHQgPCAzKVxuICB9XG5cbiAgLy8gU2VlIGlmIFwiXCIuc3BsaXQgaXMgdGhlIGJyb2tlbiBJRSB2ZXJzaW9uLCBpZiBzbywgcHJvdmlkZSBhblxuICAvLyBhbHRlcm5hdGl2ZSB3YXkgdG8gc3BsaXQgbGluZXMuXG4gIHZhciBzcGxpdExpbmVzQXV0byA9IFwiXFxuXFxuYlwiLnNwbGl0KC9cXG4vKS5sZW5ndGggIT0gMyA/IGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgICB2YXIgcG9zID0gMCwgcmVzdWx0ID0gW10sIGwgPSBzdHJpbmcubGVuZ3RoO1xuICAgIHdoaWxlIChwb3MgPD0gbCkge1xuICAgICAgdmFyIG5sID0gc3RyaW5nLmluZGV4T2YoXCJcXG5cIiwgcG9zKTtcbiAgICAgIGlmIChubCA9PSAtMSkgeyBubCA9IHN0cmluZy5sZW5ndGg7IH1cbiAgICAgIHZhciBsaW5lID0gc3RyaW5nLnNsaWNlKHBvcywgc3RyaW5nLmNoYXJBdChubCAtIDEpID09IFwiXFxyXCIgPyBubCAtIDEgOiBubCk7XG4gICAgICB2YXIgcnQgPSBsaW5lLmluZGV4T2YoXCJcXHJcIik7XG4gICAgICBpZiAocnQgIT0gLTEpIHtcbiAgICAgICAgcmVzdWx0LnB1c2gobGluZS5zbGljZSgwLCBydCkpO1xuICAgICAgICBwb3MgKz0gcnQgKyAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LnB1c2gobGluZSk7XG4gICAgICAgIHBvcyA9IG5sICsgMTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdFxuICB9IDogZnVuY3Rpb24gKHN0cmluZykgeyByZXR1cm4gc3RyaW5nLnNwbGl0KC9cXHJcXG4/fFxcbi8pOyB9O1xuXG4gIHZhciBoYXNTZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uID8gZnVuY3Rpb24gKHRlKSB7XG4gICAgdHJ5IHsgcmV0dXJuIHRlLnNlbGVjdGlvblN0YXJ0ICE9IHRlLnNlbGVjdGlvbkVuZCB9XG4gICAgY2F0Y2goZSkgeyByZXR1cm4gZmFsc2UgfVxuICB9IDogZnVuY3Rpb24gKHRlKSB7XG4gICAgdmFyIHJhbmdlO1xuICAgIHRyeSB7cmFuZ2UgPSB0ZS5vd25lckRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO31cbiAgICBjYXRjaChlKSB7fVxuICAgIGlmICghcmFuZ2UgfHwgcmFuZ2UucGFyZW50RWxlbWVudCgpICE9IHRlKSB7IHJldHVybiBmYWxzZSB9XG4gICAgcmV0dXJuIHJhbmdlLmNvbXBhcmVFbmRQb2ludHMoXCJTdGFydFRvRW5kXCIsIHJhbmdlKSAhPSAwXG4gIH07XG5cbiAgdmFyIGhhc0NvcHlFdmVudCA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGUgPSBlbHQoXCJkaXZcIik7XG4gICAgaWYgKFwib25jb3B5XCIgaW4gZSkgeyByZXR1cm4gdHJ1ZSB9XG4gICAgZS5zZXRBdHRyaWJ1dGUoXCJvbmNvcHlcIiwgXCJyZXR1cm47XCIpO1xuICAgIHJldHVybiB0eXBlb2YgZS5vbmNvcHkgPT0gXCJmdW5jdGlvblwiXG4gIH0pKCk7XG5cbiAgdmFyIGJhZFpvb21lZFJlY3RzID0gbnVsbDtcbiAgZnVuY3Rpb24gaGFzQmFkWm9vbWVkUmVjdHMobWVhc3VyZSkge1xuICAgIGlmIChiYWRab29tZWRSZWN0cyAhPSBudWxsKSB7IHJldHVybiBiYWRab29tZWRSZWN0cyB9XG4gICAgdmFyIG5vZGUgPSByZW1vdmVDaGlsZHJlbkFuZEFkZChtZWFzdXJlLCBlbHQoXCJzcGFuXCIsIFwieFwiKSk7XG4gICAgdmFyIG5vcm1hbCA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdmFyIGZyb21SYW5nZSA9IHJhbmdlKG5vZGUsIDAsIDEpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiBiYWRab29tZWRSZWN0cyA9IE1hdGguYWJzKG5vcm1hbC5sZWZ0IC0gZnJvbVJhbmdlLmxlZnQpID4gMVxuICB9XG5cbiAgLy8gS25vd24gbW9kZXMsIGJ5IG5hbWUgYW5kIGJ5IE1JTUVcbiAgdmFyIG1vZGVzID0ge30sIG1pbWVNb2RlcyA9IHt9O1xuXG4gIC8vIEV4dHJhIGFyZ3VtZW50cyBhcmUgc3RvcmVkIGFzIHRoZSBtb2RlJ3MgZGVwZW5kZW5jaWVzLCB3aGljaCBpc1xuICAvLyB1c2VkIGJ5IChsZWdhY3kpIG1lY2hhbmlzbXMgbGlrZSBsb2FkbW9kZS5qcyB0byBhdXRvbWF0aWNhbGx5XG4gIC8vIGxvYWQgYSBtb2RlLiAoUHJlZmVycmVkIG1lY2hhbmlzbSBpcyB0aGUgcmVxdWlyZS9kZWZpbmUgY2FsbHMuKVxuICBmdW5jdGlvbiBkZWZpbmVNb2RlKG5hbWUsIG1vZGUpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIpXG4gICAgICB7IG1vZGUuZGVwZW5kZW5jaWVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTsgfVxuICAgIG1vZGVzW25hbWVdID0gbW9kZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlZmluZU1JTUUobWltZSwgc3BlYykge1xuICAgIG1pbWVNb2Rlc1ttaW1lXSA9IHNwZWM7XG4gIH1cblxuICAvLyBHaXZlbiBhIE1JTUUgdHlwZSwgYSB7bmFtZSwgLi4ub3B0aW9uc30gY29uZmlnIG9iamVjdCwgb3IgYSBuYW1lXG4gIC8vIHN0cmluZywgcmV0dXJuIGEgbW9kZSBjb25maWcgb2JqZWN0LlxuICBmdW5jdGlvbiByZXNvbHZlTW9kZShzcGVjKSB7XG4gICAgaWYgKHR5cGVvZiBzcGVjID09IFwic3RyaW5nXCIgJiYgbWltZU1vZGVzLmhhc093blByb3BlcnR5KHNwZWMpKSB7XG4gICAgICBzcGVjID0gbWltZU1vZGVzW3NwZWNdO1xuICAgIH0gZWxzZSBpZiAoc3BlYyAmJiB0eXBlb2Ygc3BlYy5uYW1lID09IFwic3RyaW5nXCIgJiYgbWltZU1vZGVzLmhhc093blByb3BlcnR5KHNwZWMubmFtZSkpIHtcbiAgICAgIHZhciBmb3VuZCA9IG1pbWVNb2Rlc1tzcGVjLm5hbWVdO1xuICAgICAgaWYgKHR5cGVvZiBmb3VuZCA9PSBcInN0cmluZ1wiKSB7IGZvdW5kID0ge25hbWU6IGZvdW5kfTsgfVxuICAgICAgc3BlYyA9IGNyZWF0ZU9iaihmb3VuZCwgc3BlYyk7XG4gICAgICBzcGVjLm5hbWUgPSBmb3VuZC5uYW1lO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHNwZWMgPT0gXCJzdHJpbmdcIiAmJiAvXltcXHdcXC1dK1xcL1tcXHdcXC1dK1xcK3htbCQvLnRlc3Qoc3BlYykpIHtcbiAgICAgIHJldHVybiByZXNvbHZlTW9kZShcImFwcGxpY2F0aW9uL3htbFwiKVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHNwZWMgPT0gXCJzdHJpbmdcIiAmJiAvXltcXHdcXC1dK1xcL1tcXHdcXC1dK1xcK2pzb24kLy50ZXN0KHNwZWMpKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZU1vZGUoXCJhcHBsaWNhdGlvbi9qc29uXCIpXG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc3BlYyA9PSBcInN0cmluZ1wiKSB7IHJldHVybiB7bmFtZTogc3BlY30gfVxuICAgIGVsc2UgeyByZXR1cm4gc3BlYyB8fCB7bmFtZTogXCJudWxsXCJ9IH1cbiAgfVxuXG4gIC8vIEdpdmVuIGEgbW9kZSBzcGVjIChhbnl0aGluZyB0aGF0IHJlc29sdmVNb2RlIGFjY2VwdHMpLCBmaW5kIGFuZFxuICAvLyBpbml0aWFsaXplIGFuIGFjdHVhbCBtb2RlIG9iamVjdC5cbiAgZnVuY3Rpb24gZ2V0TW9kZShvcHRpb25zLCBzcGVjKSB7XG4gICAgc3BlYyA9IHJlc29sdmVNb2RlKHNwZWMpO1xuICAgIHZhciBtZmFjdG9yeSA9IG1vZGVzW3NwZWMubmFtZV07XG4gICAgaWYgKCFtZmFjdG9yeSkgeyByZXR1cm4gZ2V0TW9kZShvcHRpb25zLCBcInRleHQvcGxhaW5cIikgfVxuICAgIHZhciBtb2RlT2JqID0gbWZhY3Rvcnkob3B0aW9ucywgc3BlYyk7XG4gICAgaWYgKG1vZGVFeHRlbnNpb25zLmhhc093blByb3BlcnR5KHNwZWMubmFtZSkpIHtcbiAgICAgIHZhciBleHRzID0gbW9kZUV4dGVuc2lvbnNbc3BlYy5uYW1lXTtcbiAgICAgIGZvciAodmFyIHByb3AgaW4gZXh0cykge1xuICAgICAgICBpZiAoIWV4dHMuaGFzT3duUHJvcGVydHkocHJvcCkpIHsgY29udGludWUgfVxuICAgICAgICBpZiAobW9kZU9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgeyBtb2RlT2JqW1wiX1wiICsgcHJvcF0gPSBtb2RlT2JqW3Byb3BdOyB9XG4gICAgICAgIG1vZGVPYmpbcHJvcF0gPSBleHRzW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBtb2RlT2JqLm5hbWUgPSBzcGVjLm5hbWU7XG4gICAgaWYgKHNwZWMuaGVscGVyVHlwZSkgeyBtb2RlT2JqLmhlbHBlclR5cGUgPSBzcGVjLmhlbHBlclR5cGU7IH1cbiAgICBpZiAoc3BlYy5tb2RlUHJvcHMpIHsgZm9yICh2YXIgcHJvcCQxIGluIHNwZWMubW9kZVByb3BzKVxuICAgICAgeyBtb2RlT2JqW3Byb3AkMV0gPSBzcGVjLm1vZGVQcm9wc1twcm9wJDFdOyB9IH1cblxuICAgIHJldHVybiBtb2RlT2JqXG4gIH1cblxuICAvLyBUaGlzIGNhbiBiZSB1c2VkIHRvIGF0dGFjaCBwcm9wZXJ0aWVzIHRvIG1vZGUgb2JqZWN0cyBmcm9tXG4gIC8vIG91dHNpZGUgdGhlIGFjdHVhbCBtb2RlIGRlZmluaXRpb24uXG4gIHZhciBtb2RlRXh0ZW5zaW9ucyA9IHt9O1xuICBmdW5jdGlvbiBleHRlbmRNb2RlKG1vZGUsIHByb3BlcnRpZXMpIHtcbiAgICB2YXIgZXh0cyA9IG1vZGVFeHRlbnNpb25zLmhhc093blByb3BlcnR5KG1vZGUpID8gbW9kZUV4dGVuc2lvbnNbbW9kZV0gOiAobW9kZUV4dGVuc2lvbnNbbW9kZV0gPSB7fSk7XG4gICAgY29weU9iaihwcm9wZXJ0aWVzLCBleHRzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvcHlTdGF0ZShtb2RlLCBzdGF0ZSkge1xuICAgIGlmIChzdGF0ZSA9PT0gdHJ1ZSkgeyByZXR1cm4gc3RhdGUgfVxuICAgIGlmIChtb2RlLmNvcHlTdGF0ZSkgeyByZXR1cm4gbW9kZS5jb3B5U3RhdGUoc3RhdGUpIH1cbiAgICB2YXIgbnN0YXRlID0ge307XG4gICAgZm9yICh2YXIgbiBpbiBzdGF0ZSkge1xuICAgICAgdmFyIHZhbCA9IHN0YXRlW25dO1xuICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIEFycmF5KSB7IHZhbCA9IHZhbC5jb25jYXQoW10pOyB9XG4gICAgICBuc3RhdGVbbl0gPSB2YWw7XG4gICAgfVxuICAgIHJldHVybiBuc3RhdGVcbiAgfVxuXG4gIC8vIEdpdmVuIGEgbW9kZSBhbmQgYSBzdGF0ZSAoZm9yIHRoYXQgbW9kZSksIGZpbmQgdGhlIGlubmVyIG1vZGUgYW5kXG4gIC8vIHN0YXRlIGF0IHRoZSBwb3NpdGlvbiB0aGF0IHRoZSBzdGF0ZSByZWZlcnMgdG8uXG4gIGZ1bmN0aW9uIGlubmVyTW9kZShtb2RlLCBzdGF0ZSkge1xuICAgIHZhciBpbmZvO1xuICAgIHdoaWxlIChtb2RlLmlubmVyTW9kZSkge1xuICAgICAgaW5mbyA9IG1vZGUuaW5uZXJNb2RlKHN0YXRlKTtcbiAgICAgIGlmICghaW5mbyB8fCBpbmZvLm1vZGUgPT0gbW9kZSkgeyBicmVhayB9XG4gICAgICBzdGF0ZSA9IGluZm8uc3RhdGU7XG4gICAgICBtb2RlID0gaW5mby5tb2RlO1xuICAgIH1cbiAgICByZXR1cm4gaW5mbyB8fCB7bW9kZTogbW9kZSwgc3RhdGU6IHN0YXRlfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnRTdGF0ZShtb2RlLCBhMSwgYTIpIHtcbiAgICByZXR1cm4gbW9kZS5zdGFydFN0YXRlID8gbW9kZS5zdGFydFN0YXRlKGExLCBhMikgOiB0cnVlXG4gIH1cblxuICAvLyBTVFJJTkcgU1RSRUFNXG5cbiAgLy8gRmVkIHRvIHRoZSBtb2RlIHBhcnNlcnMsIHByb3ZpZGVzIGhlbHBlciBmdW5jdGlvbnMgdG8gbWFrZVxuICAvLyBwYXJzZXJzIG1vcmUgc3VjY2luY3QuXG5cbiAgdmFyIFN0cmluZ1N0cmVhbSA9IGZ1bmN0aW9uKHN0cmluZywgdGFiU2l6ZSwgbGluZU9yYWNsZSkge1xuICAgIHRoaXMucG9zID0gdGhpcy5zdGFydCA9IDA7XG4gICAgdGhpcy5zdHJpbmcgPSBzdHJpbmc7XG4gICAgdGhpcy50YWJTaXplID0gdGFiU2l6ZSB8fCA4O1xuICAgIHRoaXMubGFzdENvbHVtblBvcyA9IHRoaXMubGFzdENvbHVtblZhbHVlID0gMDtcbiAgICB0aGlzLmxpbmVTdGFydCA9IDA7XG4gICAgdGhpcy5saW5lT3JhY2xlID0gbGluZU9yYWNsZTtcbiAgfTtcblxuICBTdHJpbmdTdHJlYW0ucHJvdG90eXBlLmVvbCA9IGZ1bmN0aW9uICgpIHtyZXR1cm4gdGhpcy5wb3MgPj0gdGhpcy5zdHJpbmcubGVuZ3RofTtcbiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZS5zb2wgPSBmdW5jdGlvbiAoKSB7cmV0dXJuIHRoaXMucG9zID09IHRoaXMubGluZVN0YXJ0fTtcbiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZS5wZWVrID0gZnVuY3Rpb24gKCkge3JldHVybiB0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5wb3MpIHx8IHVuZGVmaW5lZH07XG4gIFN0cmluZ1N0cmVhbS5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5wb3MgPCB0aGlzLnN0cmluZy5sZW5ndGgpXG4gICAgICB7IHJldHVybiB0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5wb3MrKykgfVxuICB9O1xuICBTdHJpbmdTdHJlYW0ucHJvdG90eXBlLmVhdCA9IGZ1bmN0aW9uIChtYXRjaCkge1xuICAgIHZhciBjaCA9IHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLnBvcyk7XG4gICAgdmFyIG9rO1xuICAgIGlmICh0eXBlb2YgbWF0Y2ggPT0gXCJzdHJpbmdcIikgeyBvayA9IGNoID09IG1hdGNoOyB9XG4gICAgZWxzZSB7IG9rID0gY2ggJiYgKG1hdGNoLnRlc3QgPyBtYXRjaC50ZXN0KGNoKSA6IG1hdGNoKGNoKSk7IH1cbiAgICBpZiAob2spIHsrK3RoaXMucG9zOyByZXR1cm4gY2h9XG4gIH07XG4gIFN0cmluZ1N0cmVhbS5wcm90b3R5cGUuZWF0V2hpbGUgPSBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLnBvcztcbiAgICB3aGlsZSAodGhpcy5lYXQobWF0Y2gpKXt9XG4gICAgcmV0dXJuIHRoaXMucG9zID4gc3RhcnRcbiAgfTtcbiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZS5lYXRTcGFjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLnBvcztcbiAgICB3aGlsZSAoL1tcXHNcXHUwMGEwXS8udGVzdCh0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5wb3MpKSkgeyArK3RoaXMucG9zOyB9XG4gICAgcmV0dXJuIHRoaXMucG9zID4gc3RhcnRcbiAgfTtcbiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZS5za2lwVG9FbmQgPSBmdW5jdGlvbiAoKSB7dGhpcy5wb3MgPSB0aGlzLnN0cmluZy5sZW5ndGg7fTtcbiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZS5za2lwVG8gPSBmdW5jdGlvbiAoY2gpIHtcbiAgICB2YXIgZm91bmQgPSB0aGlzLnN0cmluZy5pbmRleE9mKGNoLCB0aGlzLnBvcyk7XG4gICAgaWYgKGZvdW5kID4gLTEpIHt0aGlzLnBvcyA9IGZvdW5kOyByZXR1cm4gdHJ1ZX1cbiAgfTtcbiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZS5iYWNrVXAgPSBmdW5jdGlvbiAobikge3RoaXMucG9zIC09IG47fTtcbiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZS5jb2x1bW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMubGFzdENvbHVtblBvcyA8IHRoaXMuc3RhcnQpIHtcbiAgICAgIHRoaXMubGFzdENvbHVtblZhbHVlID0gY291bnRDb2x1bW4odGhpcy5zdHJpbmcsIHRoaXMuc3RhcnQsIHRoaXMudGFiU2l6ZSwgdGhpcy5sYXN0Q29sdW1uUG9zLCB0aGlzLmxhc3RDb2x1bW5WYWx1ZSk7XG4gICAgICB0aGlzLmxhc3RDb2x1bW5Qb3MgPSB0aGlzLnN0YXJ0O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5sYXN0Q29sdW1uVmFsdWUgLSAodGhpcy5saW5lU3RhcnQgPyBjb3VudENvbHVtbih0aGlzLnN0cmluZywgdGhpcy5saW5lU3RhcnQsIHRoaXMudGFiU2l6ZSkgOiAwKVxuICB9O1xuICBTdHJpbmdTdHJlYW0ucHJvdG90eXBlLmluZGVudGF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBjb3VudENvbHVtbih0aGlzLnN0cmluZywgbnVsbCwgdGhpcy50YWJTaXplKSAtXG4gICAgICAodGhpcy5saW5lU3RhcnQgPyBjb3VudENvbHVtbih0aGlzLnN0cmluZywgdGhpcy5saW5lU3RhcnQsIHRoaXMudGFiU2l6ZSkgOiAwKVxuICB9O1xuICBTdHJpbmdTdHJlYW0ucHJvdG90eXBlLm1hdGNoID0gZnVuY3Rpb24gKHBhdHRlcm4sIGNvbnN1bWUsIGNhc2VJbnNlbnNpdGl2ZSkge1xuICAgIGlmICh0eXBlb2YgcGF0dGVybiA9PSBcInN0cmluZ1wiKSB7XG4gICAgICB2YXIgY2FzZWQgPSBmdW5jdGlvbiAoc3RyKSB7IHJldHVybiBjYXNlSW5zZW5zaXRpdmUgPyBzdHIudG9Mb3dlckNhc2UoKSA6IHN0cjsgfTtcbiAgICAgIHZhciBzdWJzdHIgPSB0aGlzLnN0cmluZy5zdWJzdHIodGhpcy5wb3MsIHBhdHRlcm4ubGVuZ3RoKTtcbiAgICAgIGlmIChjYXNlZChzdWJzdHIpID09IGNhc2VkKHBhdHRlcm4pKSB7XG4gICAgICAgIGlmIChjb25zdW1lICE9PSBmYWxzZSkgeyB0aGlzLnBvcyArPSBwYXR0ZXJuLmxlbmd0aDsgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbWF0Y2ggPSB0aGlzLnN0cmluZy5zbGljZSh0aGlzLnBvcykubWF0Y2gocGF0dGVybik7XG4gICAgICBpZiAobWF0Y2ggJiYgbWF0Y2guaW5kZXggPiAwKSB7IHJldHVybiBudWxsIH1cbiAgICAgIGlmIChtYXRjaCAmJiBjb25zdW1lICE9PSBmYWxzZSkgeyB0aGlzLnBvcyArPSBtYXRjaFswXS5sZW5ndGg7IH1cbiAgICAgIHJldHVybiBtYXRjaFxuICAgIH1cbiAgfTtcbiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZS5jdXJyZW50ID0gZnVuY3Rpb24gKCl7cmV0dXJuIHRoaXMuc3RyaW5nLnNsaWNlKHRoaXMuc3RhcnQsIHRoaXMucG9zKX07XG4gIFN0cmluZ1N0cmVhbS5wcm90b3R5cGUuaGlkZUZpcnN0Q2hhcnMgPSBmdW5jdGlvbiAobiwgaW5uZXIpIHtcbiAgICB0aGlzLmxpbmVTdGFydCArPSBuO1xuICAgIHRyeSB7IHJldHVybiBpbm5lcigpIH1cbiAgICBmaW5hbGx5IHsgdGhpcy5saW5lU3RhcnQgLT0gbjsgfVxuICB9O1xuICBTdHJpbmdTdHJlYW0ucHJvdG90eXBlLmxvb2tBaGVhZCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgdmFyIG9yYWNsZSA9IHRoaXMubGluZU9yYWNsZTtcbiAgICByZXR1cm4gb3JhY2xlICYmIG9yYWNsZS5sb29rQWhlYWQobilcbiAgfTtcbiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZS5iYXNlVG9rZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9yYWNsZSA9IHRoaXMubGluZU9yYWNsZTtcbiAgICByZXR1cm4gb3JhY2xlICYmIG9yYWNsZS5iYXNlVG9rZW4odGhpcy5wb3MpXG4gIH07XG5cbiAgLy8gRmluZCB0aGUgbGluZSBvYmplY3QgY29ycmVzcG9uZGluZyB0byB0aGUgZ2l2ZW4gbGluZSBudW1iZXIuXG4gIGZ1bmN0aW9uIGdldExpbmUoZG9jLCBuKSB7XG4gICAgbiAtPSBkb2MuZmlyc3Q7XG4gICAgaWYgKG4gPCAwIHx8IG4gPj0gZG9jLnNpemUpIHsgdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgbm8gbGluZSBcIiArIChuICsgZG9jLmZpcnN0KSArIFwiIGluIHRoZSBkb2N1bWVudC5cIikgfVxuICAgIHZhciBjaHVuayA9IGRvYztcbiAgICB3aGlsZSAoIWNodW5rLmxpbmVzKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDs7ICsraSkge1xuICAgICAgICB2YXIgY2hpbGQgPSBjaHVuay5jaGlsZHJlbltpXSwgc3ogPSBjaGlsZC5jaHVua1NpemUoKTtcbiAgICAgICAgaWYgKG4gPCBzeikgeyBjaHVuayA9IGNoaWxkOyBicmVhayB9XG4gICAgICAgIG4gLT0gc3o7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjaHVuay5saW5lc1tuXVxuICB9XG5cbiAgLy8gR2V0IHRoZSBwYXJ0IG9mIGEgZG9jdW1lbnQgYmV0d2VlbiB0d28gcG9zaXRpb25zLCBhcyBhbiBhcnJheSBvZlxuICAvLyBzdHJpbmdzLlxuICBmdW5jdGlvbiBnZXRCZXR3ZWVuKGRvYywgc3RhcnQsIGVuZCkge1xuICAgIHZhciBvdXQgPSBbXSwgbiA9IHN0YXJ0LmxpbmU7XG4gICAgZG9jLml0ZXIoc3RhcnQubGluZSwgZW5kLmxpbmUgKyAxLCBmdW5jdGlvbiAobGluZSkge1xuICAgICAgdmFyIHRleHQgPSBsaW5lLnRleHQ7XG4gICAgICBpZiAobiA9PSBlbmQubGluZSkgeyB0ZXh0ID0gdGV4dC5zbGljZSgwLCBlbmQuY2gpOyB9XG4gICAgICBpZiAobiA9PSBzdGFydC5saW5lKSB7IHRleHQgPSB0ZXh0LnNsaWNlKHN0YXJ0LmNoKTsgfVxuICAgICAgb3V0LnB1c2godGV4dCk7XG4gICAgICArK247XG4gICAgfSk7XG4gICAgcmV0dXJuIG91dFxuICB9XG4gIC8vIEdldCB0aGUgbGluZXMgYmV0d2VlbiBmcm9tIGFuZCB0bywgYXMgYXJyYXkgb2Ygc3RyaW5ncy5cbiAgZnVuY3Rpb24gZ2V0TGluZXMoZG9jLCBmcm9tLCB0bykge1xuICAgIHZhciBvdXQgPSBbXTtcbiAgICBkb2MuaXRlcihmcm9tLCB0bywgZnVuY3Rpb24gKGxpbmUpIHsgb3V0LnB1c2gobGluZS50ZXh0KTsgfSk7IC8vIGl0ZXIgYWJvcnRzIHdoZW4gY2FsbGJhY2sgcmV0dXJucyB0cnV0aHkgdmFsdWVcbiAgICByZXR1cm4gb3V0XG4gIH1cblxuICAvLyBVcGRhdGUgdGhlIGhlaWdodCBvZiBhIGxpbmUsIHByb3BhZ2F0aW5nIHRoZSBoZWlnaHQgY2hhbmdlXG4gIC8vIHVwd2FyZHMgdG8gcGFyZW50IG5vZGVzLlxuICBmdW5jdGlvbiB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIGhlaWdodCkge1xuICAgIHZhciBkaWZmID0gaGVpZ2h0IC0gbGluZS5oZWlnaHQ7XG4gICAgaWYgKGRpZmYpIHsgZm9yICh2YXIgbiA9IGxpbmU7IG47IG4gPSBuLnBhcmVudCkgeyBuLmhlaWdodCArPSBkaWZmOyB9IH1cbiAgfVxuXG4gIC8vIEdpdmVuIGEgbGluZSBvYmplY3QsIGZpbmQgaXRzIGxpbmUgbnVtYmVyIGJ5IHdhbGtpbmcgdXAgdGhyb3VnaFxuICAvLyBpdHMgcGFyZW50IGxpbmtzLlxuICBmdW5jdGlvbiBsaW5lTm8obGluZSkge1xuICAgIGlmIChsaW5lLnBhcmVudCA9PSBudWxsKSB7IHJldHVybiBudWxsIH1cbiAgICB2YXIgY3VyID0gbGluZS5wYXJlbnQsIG5vID0gaW5kZXhPZihjdXIubGluZXMsIGxpbmUpO1xuICAgIGZvciAodmFyIGNodW5rID0gY3VyLnBhcmVudDsgY2h1bms7IGN1ciA9IGNodW5rLCBjaHVuayA9IGNodW5rLnBhcmVudCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7OyArK2kpIHtcbiAgICAgICAgaWYgKGNodW5rLmNoaWxkcmVuW2ldID09IGN1cikgeyBicmVhayB9XG4gICAgICAgIG5vICs9IGNodW5rLmNoaWxkcmVuW2ldLmNodW5rU2l6ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm8gKyBjdXIuZmlyc3RcbiAgfVxuXG4gIC8vIEZpbmQgdGhlIGxpbmUgYXQgdGhlIGdpdmVuIHZlcnRpY2FsIHBvc2l0aW9uLCB1c2luZyB0aGUgaGVpZ2h0XG4gIC8vIGluZm9ybWF0aW9uIGluIHRoZSBkb2N1bWVudCB0cmVlLlxuICBmdW5jdGlvbiBsaW5lQXRIZWlnaHQoY2h1bmssIGgpIHtcbiAgICB2YXIgbiA9IGNodW5rLmZpcnN0O1xuICAgIG91dGVyOiBkbyB7XG4gICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBjaHVuay5jaGlsZHJlbi5sZW5ndGg7ICsraSQxKSB7XG4gICAgICAgIHZhciBjaGlsZCA9IGNodW5rLmNoaWxkcmVuW2kkMV0sIGNoID0gY2hpbGQuaGVpZ2h0O1xuICAgICAgICBpZiAoaCA8IGNoKSB7IGNodW5rID0gY2hpbGQ7IGNvbnRpbnVlIG91dGVyIH1cbiAgICAgICAgaCAtPSBjaDtcbiAgICAgICAgbiArPSBjaGlsZC5jaHVua1NpemUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuXG4gICAgfSB3aGlsZSAoIWNodW5rLmxpbmVzKVxuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKDsgaSA8IGNodW5rLmxpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgbGluZSA9IGNodW5rLmxpbmVzW2ldLCBsaCA9IGxpbmUuaGVpZ2h0O1xuICAgICAgaWYgKGggPCBsaCkgeyBicmVhayB9XG4gICAgICBoIC09IGxoO1xuICAgIH1cbiAgICByZXR1cm4gbiArIGlcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzTGluZShkb2MsIGwpIHtyZXR1cm4gbCA+PSBkb2MuZmlyc3QgJiYgbCA8IGRvYy5maXJzdCArIGRvYy5zaXplfVxuXG4gIGZ1bmN0aW9uIGxpbmVOdW1iZXJGb3Iob3B0aW9ucywgaSkge1xuICAgIHJldHVybiBTdHJpbmcob3B0aW9ucy5saW5lTnVtYmVyRm9ybWF0dGVyKGkgKyBvcHRpb25zLmZpcnN0TGluZU51bWJlcikpXG4gIH1cblxuICAvLyBBIFBvcyBpbnN0YW5jZSByZXByZXNlbnRzIGEgcG9zaXRpb24gd2l0aGluIHRoZSB0ZXh0LlxuICBmdW5jdGlvbiBQb3MobGluZSwgY2gsIHN0aWNreSkge1xuICAgIGlmICggc3RpY2t5ID09PSB2b2lkIDAgKSBzdGlja3kgPSBudWxsO1xuXG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFBvcykpIHsgcmV0dXJuIG5ldyBQb3MobGluZSwgY2gsIHN0aWNreSkgfVxuICAgIHRoaXMubGluZSA9IGxpbmU7XG4gICAgdGhpcy5jaCA9IGNoO1xuICAgIHRoaXMuc3RpY2t5ID0gc3RpY2t5O1xuICB9XG5cbiAgLy8gQ29tcGFyZSB0d28gcG9zaXRpb25zLCByZXR1cm4gMCBpZiB0aGV5IGFyZSB0aGUgc2FtZSwgYSBuZWdhdGl2ZVxuICAvLyBudW1iZXIgd2hlbiBhIGlzIGxlc3MsIGFuZCBhIHBvc2l0aXZlIG51bWJlciBvdGhlcndpc2UuXG4gIGZ1bmN0aW9uIGNtcChhLCBiKSB7IHJldHVybiBhLmxpbmUgLSBiLmxpbmUgfHwgYS5jaCAtIGIuY2ggfVxuXG4gIGZ1bmN0aW9uIGVxdWFsQ3Vyc29yUG9zKGEsIGIpIHsgcmV0dXJuIGEuc3RpY2t5ID09IGIuc3RpY2t5ICYmIGNtcChhLCBiKSA9PSAwIH1cblxuICBmdW5jdGlvbiBjb3B5UG9zKHgpIHtyZXR1cm4gUG9zKHgubGluZSwgeC5jaCl9XG4gIGZ1bmN0aW9uIG1heFBvcyhhLCBiKSB7IHJldHVybiBjbXAoYSwgYikgPCAwID8gYiA6IGEgfVxuICBmdW5jdGlvbiBtaW5Qb3MoYSwgYikgeyByZXR1cm4gY21wKGEsIGIpIDwgMCA/IGEgOiBiIH1cblxuICAvLyBNb3N0IG9mIHRoZSBleHRlcm5hbCBBUEkgY2xpcHMgZ2l2ZW4gcG9zaXRpb25zIHRvIG1ha2Ugc3VyZSB0aGV5XG4gIC8vIGFjdHVhbGx5IGV4aXN0IHdpdGhpbiB0aGUgZG9jdW1lbnQuXG4gIGZ1bmN0aW9uIGNsaXBMaW5lKGRvYywgbikge3JldHVybiBNYXRoLm1heChkb2MuZmlyc3QsIE1hdGgubWluKG4sIGRvYy5maXJzdCArIGRvYy5zaXplIC0gMSkpfVxuICBmdW5jdGlvbiBjbGlwUG9zKGRvYywgcG9zKSB7XG4gICAgaWYgKHBvcy5saW5lIDwgZG9jLmZpcnN0KSB7IHJldHVybiBQb3MoZG9jLmZpcnN0LCAwKSB9XG4gICAgdmFyIGxhc3QgPSBkb2MuZmlyc3QgKyBkb2Muc2l6ZSAtIDE7XG4gICAgaWYgKHBvcy5saW5lID4gbGFzdCkgeyByZXR1cm4gUG9zKGxhc3QsIGdldExpbmUoZG9jLCBsYXN0KS50ZXh0Lmxlbmd0aCkgfVxuICAgIHJldHVybiBjbGlwVG9MZW4ocG9zLCBnZXRMaW5lKGRvYywgcG9zLmxpbmUpLnRleHQubGVuZ3RoKVxuICB9XG4gIGZ1bmN0aW9uIGNsaXBUb0xlbihwb3MsIGxpbmVsZW4pIHtcbiAgICB2YXIgY2ggPSBwb3MuY2g7XG4gICAgaWYgKGNoID09IG51bGwgfHwgY2ggPiBsaW5lbGVuKSB7IHJldHVybiBQb3MocG9zLmxpbmUsIGxpbmVsZW4pIH1cbiAgICBlbHNlIGlmIChjaCA8IDApIHsgcmV0dXJuIFBvcyhwb3MubGluZSwgMCkgfVxuICAgIGVsc2UgeyByZXR1cm4gcG9zIH1cbiAgfVxuICBmdW5jdGlvbiBjbGlwUG9zQXJyYXkoZG9jLCBhcnJheSkge1xuICAgIHZhciBvdXQgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7IG91dFtpXSA9IGNsaXBQb3MoZG9jLCBhcnJheVtpXSk7IH1cbiAgICByZXR1cm4gb3V0XG4gIH1cblxuICB2YXIgU2F2ZWRDb250ZXh0ID0gZnVuY3Rpb24oc3RhdGUsIGxvb2tBaGVhZCkge1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB0aGlzLmxvb2tBaGVhZCA9IGxvb2tBaGVhZDtcbiAgfTtcblxuICB2YXIgQ29udGV4dCA9IGZ1bmN0aW9uKGRvYywgc3RhdGUsIGxpbmUsIGxvb2tBaGVhZCkge1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB0aGlzLmRvYyA9IGRvYztcbiAgICB0aGlzLmxpbmUgPSBsaW5lO1xuICAgIHRoaXMubWF4TG9va0FoZWFkID0gbG9va0FoZWFkIHx8IDA7XG4gICAgdGhpcy5iYXNlVG9rZW5zID0gbnVsbDtcbiAgICB0aGlzLmJhc2VUb2tlblBvcyA9IDE7XG4gIH07XG5cbiAgQ29udGV4dC5wcm90b3R5cGUubG9va0FoZWFkID0gZnVuY3Rpb24gKG4pIHtcbiAgICB2YXIgbGluZSA9IHRoaXMuZG9jLmdldExpbmUodGhpcy5saW5lICsgbik7XG4gICAgaWYgKGxpbmUgIT0gbnVsbCAmJiBuID4gdGhpcy5tYXhMb29rQWhlYWQpIHsgdGhpcy5tYXhMb29rQWhlYWQgPSBuOyB9XG4gICAgcmV0dXJuIGxpbmVcbiAgfTtcblxuICBDb250ZXh0LnByb3RvdHlwZS5iYXNlVG9rZW4gPSBmdW5jdGlvbiAobikge1xuICAgIGlmICghdGhpcy5iYXNlVG9rZW5zKSB7IHJldHVybiBudWxsIH1cbiAgICB3aGlsZSAodGhpcy5iYXNlVG9rZW5zW3RoaXMuYmFzZVRva2VuUG9zXSA8PSBuKVxuICAgICAgeyB0aGlzLmJhc2VUb2tlblBvcyArPSAyOyB9XG4gICAgdmFyIHR5cGUgPSB0aGlzLmJhc2VUb2tlbnNbdGhpcy5iYXNlVG9rZW5Qb3MgKyAxXTtcbiAgICByZXR1cm4ge3R5cGU6IHR5cGUgJiYgdHlwZS5yZXBsYWNlKC8oIHxeKW92ZXJsYXkgLiovLCBcIlwiKSxcbiAgICAgICAgICAgIHNpemU6IHRoaXMuYmFzZVRva2Vuc1t0aGlzLmJhc2VUb2tlblBvc10gLSBufVxuICB9O1xuXG4gIENvbnRleHQucHJvdG90eXBlLm5leHRMaW5lID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubGluZSsrO1xuICAgIGlmICh0aGlzLm1heExvb2tBaGVhZCA+IDApIHsgdGhpcy5tYXhMb29rQWhlYWQtLTsgfVxuICB9O1xuXG4gIENvbnRleHQuZnJvbVNhdmVkID0gZnVuY3Rpb24gKGRvYywgc2F2ZWQsIGxpbmUpIHtcbiAgICBpZiAoc2F2ZWQgaW5zdGFuY2VvZiBTYXZlZENvbnRleHQpXG4gICAgICB7IHJldHVybiBuZXcgQ29udGV4dChkb2MsIGNvcHlTdGF0ZShkb2MubW9kZSwgc2F2ZWQuc3RhdGUpLCBsaW5lLCBzYXZlZC5sb29rQWhlYWQpIH1cbiAgICBlbHNlXG4gICAgICB7IHJldHVybiBuZXcgQ29udGV4dChkb2MsIGNvcHlTdGF0ZShkb2MubW9kZSwgc2F2ZWQpLCBsaW5lKSB9XG4gIH07XG5cbiAgQ29udGV4dC5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uIChjb3B5KSB7XG4gICAgdmFyIHN0YXRlID0gY29weSAhPT0gZmFsc2UgPyBjb3B5U3RhdGUodGhpcy5kb2MubW9kZSwgdGhpcy5zdGF0ZSkgOiB0aGlzLnN0YXRlO1xuICAgIHJldHVybiB0aGlzLm1heExvb2tBaGVhZCA+IDAgPyBuZXcgU2F2ZWRDb250ZXh0KHN0YXRlLCB0aGlzLm1heExvb2tBaGVhZCkgOiBzdGF0ZVxuICB9O1xuXG5cbiAgLy8gQ29tcHV0ZSBhIHN0eWxlIGFycmF5IChhbiBhcnJheSBzdGFydGluZyB3aXRoIGEgbW9kZSBnZW5lcmF0aW9uXG4gIC8vIC0tIGZvciBpbnZhbGlkYXRpb24gLS0gZm9sbG93ZWQgYnkgcGFpcnMgb2YgZW5kIHBvc2l0aW9ucyBhbmRcbiAgLy8gc3R5bGUgc3RyaW5ncyksIHdoaWNoIGlzIHVzZWQgdG8gaGlnaGxpZ2h0IHRoZSB0b2tlbnMgb24gdGhlXG4gIC8vIGxpbmUuXG4gIGZ1bmN0aW9uIGhpZ2hsaWdodExpbmUoY20sIGxpbmUsIGNvbnRleHQsIGZvcmNlVG9FbmQpIHtcbiAgICAvLyBBIHN0eWxlcyBhcnJheSBhbHdheXMgc3RhcnRzIHdpdGggYSBudW1iZXIgaWRlbnRpZnlpbmcgdGhlXG4gICAgLy8gbW9kZS9vdmVybGF5cyB0aGF0IGl0IGlzIGJhc2VkIG9uIChmb3IgZWFzeSBpbnZhbGlkYXRpb24pLlxuICAgIHZhciBzdCA9IFtjbS5zdGF0ZS5tb2RlR2VuXSwgbGluZUNsYXNzZXMgPSB7fTtcbiAgICAvLyBDb21wdXRlIHRoZSBiYXNlIGFycmF5IG9mIHN0eWxlc1xuICAgIHJ1bk1vZGUoY20sIGxpbmUudGV4dCwgY20uZG9jLm1vZGUsIGNvbnRleHQsIGZ1bmN0aW9uIChlbmQsIHN0eWxlKSB7IHJldHVybiBzdC5wdXNoKGVuZCwgc3R5bGUpOyB9LFxuICAgICAgICAgICAgbGluZUNsYXNzZXMsIGZvcmNlVG9FbmQpO1xuICAgIHZhciBzdGF0ZSA9IGNvbnRleHQuc3RhdGU7XG5cbiAgICAvLyBSdW4gb3ZlcmxheXMsIGFkanVzdCBzdHlsZSBhcnJheS5cbiAgICB2YXIgbG9vcCA9IGZ1bmN0aW9uICggbyApIHtcbiAgICAgIGNvbnRleHQuYmFzZVRva2VucyA9IHN0O1xuICAgICAgdmFyIG92ZXJsYXkgPSBjbS5zdGF0ZS5vdmVybGF5c1tvXSwgaSA9IDEsIGF0ID0gMDtcbiAgICAgIGNvbnRleHQuc3RhdGUgPSB0cnVlO1xuICAgICAgcnVuTW9kZShjbSwgbGluZS50ZXh0LCBvdmVybGF5Lm1vZGUsIGNvbnRleHQsIGZ1bmN0aW9uIChlbmQsIHN0eWxlKSB7XG4gICAgICAgIHZhciBzdGFydCA9IGk7XG4gICAgICAgIC8vIEVuc3VyZSB0aGVyZSdzIGEgdG9rZW4gZW5kIGF0IHRoZSBjdXJyZW50IHBvc2l0aW9uLCBhbmQgdGhhdCBpIHBvaW50cyBhdCBpdFxuICAgICAgICB3aGlsZSAoYXQgPCBlbmQpIHtcbiAgICAgICAgICB2YXIgaV9lbmQgPSBzdFtpXTtcbiAgICAgICAgICBpZiAoaV9lbmQgPiBlbmQpXG4gICAgICAgICAgICB7IHN0LnNwbGljZShpLCAxLCBlbmQsIHN0W2krMV0sIGlfZW5kKTsgfVxuICAgICAgICAgIGkgKz0gMjtcbiAgICAgICAgICBhdCA9IE1hdGgubWluKGVuZCwgaV9lbmQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc3R5bGUpIHsgcmV0dXJuIH1cbiAgICAgICAgaWYgKG92ZXJsYXkub3BhcXVlKSB7XG4gICAgICAgICAgc3Quc3BsaWNlKHN0YXJ0LCBpIC0gc3RhcnQsIGVuZCwgXCJvdmVybGF5IFwiICsgc3R5bGUpO1xuICAgICAgICAgIGkgPSBzdGFydCArIDI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yICg7IHN0YXJ0IDwgaTsgc3RhcnQgKz0gMikge1xuICAgICAgICAgICAgdmFyIGN1ciA9IHN0W3N0YXJ0KzFdO1xuICAgICAgICAgICAgc3Rbc3RhcnQrMV0gPSAoY3VyID8gY3VyICsgXCIgXCIgOiBcIlwiKSArIFwib3ZlcmxheSBcIiArIHN0eWxlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgbGluZUNsYXNzZXMpO1xuICAgICAgY29udGV4dC5zdGF0ZSA9IHN0YXRlO1xuICAgICAgY29udGV4dC5iYXNlVG9rZW5zID0gbnVsbDtcbiAgICAgIGNvbnRleHQuYmFzZVRva2VuUG9zID0gMTtcbiAgICB9O1xuXG4gICAgZm9yICh2YXIgbyA9IDA7IG8gPCBjbS5zdGF0ZS5vdmVybGF5cy5sZW5ndGg7ICsrbykgbG9vcCggbyApO1xuXG4gICAgcmV0dXJuIHtzdHlsZXM6IHN0LCBjbGFzc2VzOiBsaW5lQ2xhc3Nlcy5iZ0NsYXNzIHx8IGxpbmVDbGFzc2VzLnRleHRDbGFzcyA/IGxpbmVDbGFzc2VzIDogbnVsbH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldExpbmVTdHlsZXMoY20sIGxpbmUsIHVwZGF0ZUZyb250aWVyKSB7XG4gICAgaWYgKCFsaW5lLnN0eWxlcyB8fCBsaW5lLnN0eWxlc1swXSAhPSBjbS5zdGF0ZS5tb2RlR2VuKSB7XG4gICAgICB2YXIgY29udGV4dCA9IGdldENvbnRleHRCZWZvcmUoY20sIGxpbmVObyhsaW5lKSk7XG4gICAgICB2YXIgcmVzZXRTdGF0ZSA9IGxpbmUudGV4dC5sZW5ndGggPiBjbS5vcHRpb25zLm1heEhpZ2hsaWdodExlbmd0aCAmJiBjb3B5U3RhdGUoY20uZG9jLm1vZGUsIGNvbnRleHQuc3RhdGUpO1xuICAgICAgdmFyIHJlc3VsdCA9IGhpZ2hsaWdodExpbmUoY20sIGxpbmUsIGNvbnRleHQpO1xuICAgICAgaWYgKHJlc2V0U3RhdGUpIHsgY29udGV4dC5zdGF0ZSA9IHJlc2V0U3RhdGU7IH1cbiAgICAgIGxpbmUuc3RhdGVBZnRlciA9IGNvbnRleHQuc2F2ZSghcmVzZXRTdGF0ZSk7XG4gICAgICBsaW5lLnN0eWxlcyA9IHJlc3VsdC5zdHlsZXM7XG4gICAgICBpZiAocmVzdWx0LmNsYXNzZXMpIHsgbGluZS5zdHlsZUNsYXNzZXMgPSByZXN1bHQuY2xhc3NlczsgfVxuICAgICAgZWxzZSBpZiAobGluZS5zdHlsZUNsYXNzZXMpIHsgbGluZS5zdHlsZUNsYXNzZXMgPSBudWxsOyB9XG4gICAgICBpZiAodXBkYXRlRnJvbnRpZXIgPT09IGNtLmRvYy5oaWdobGlnaHRGcm9udGllcilcbiAgICAgICAgeyBjbS5kb2MubW9kZUZyb250aWVyID0gTWF0aC5tYXgoY20uZG9jLm1vZGVGcm9udGllciwgKytjbS5kb2MuaGlnaGxpZ2h0RnJvbnRpZXIpOyB9XG4gICAgfVxuICAgIHJldHVybiBsaW5lLnN0eWxlc1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q29udGV4dEJlZm9yZShjbSwgbiwgcHJlY2lzZSkge1xuICAgIHZhciBkb2MgPSBjbS5kb2MsIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIGlmICghZG9jLm1vZGUuc3RhcnRTdGF0ZSkgeyByZXR1cm4gbmV3IENvbnRleHQoZG9jLCB0cnVlLCBuKSB9XG4gICAgdmFyIHN0YXJ0ID0gZmluZFN0YXJ0TGluZShjbSwgbiwgcHJlY2lzZSk7XG4gICAgdmFyIHNhdmVkID0gc3RhcnQgPiBkb2MuZmlyc3QgJiYgZ2V0TGluZShkb2MsIHN0YXJ0IC0gMSkuc3RhdGVBZnRlcjtcbiAgICB2YXIgY29udGV4dCA9IHNhdmVkID8gQ29udGV4dC5mcm9tU2F2ZWQoZG9jLCBzYXZlZCwgc3RhcnQpIDogbmV3IENvbnRleHQoZG9jLCBzdGFydFN0YXRlKGRvYy5tb2RlKSwgc3RhcnQpO1xuXG4gICAgZG9jLml0ZXIoc3RhcnQsIG4sIGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICBwcm9jZXNzTGluZShjbSwgbGluZS50ZXh0LCBjb250ZXh0KTtcbiAgICAgIHZhciBwb3MgPSBjb250ZXh0LmxpbmU7XG4gICAgICBsaW5lLnN0YXRlQWZ0ZXIgPSBwb3MgPT0gbiAtIDEgfHwgcG9zICUgNSA9PSAwIHx8IHBvcyA+PSBkaXNwbGF5LnZpZXdGcm9tICYmIHBvcyA8IGRpc3BsYXkudmlld1RvID8gY29udGV4dC5zYXZlKCkgOiBudWxsO1xuICAgICAgY29udGV4dC5uZXh0TGluZSgpO1xuICAgIH0pO1xuICAgIGlmIChwcmVjaXNlKSB7IGRvYy5tb2RlRnJvbnRpZXIgPSBjb250ZXh0LmxpbmU7IH1cbiAgICByZXR1cm4gY29udGV4dFxuICB9XG5cbiAgLy8gTGlnaHR3ZWlnaHQgZm9ybSBvZiBoaWdobGlnaHQgLS0gcHJvY2VlZCBvdmVyIHRoaXMgbGluZSBhbmRcbiAgLy8gdXBkYXRlIHN0YXRlLCBidXQgZG9uJ3Qgc2F2ZSBhIHN0eWxlIGFycmF5LiBVc2VkIGZvciBsaW5lcyB0aGF0XG4gIC8vIGFyZW4ndCBjdXJyZW50bHkgdmlzaWJsZS5cbiAgZnVuY3Rpb24gcHJvY2Vzc0xpbmUoY20sIHRleHQsIGNvbnRleHQsIHN0YXJ0QXQpIHtcbiAgICB2YXIgbW9kZSA9IGNtLmRvYy5tb2RlO1xuICAgIHZhciBzdHJlYW0gPSBuZXcgU3RyaW5nU3RyZWFtKHRleHQsIGNtLm9wdGlvbnMudGFiU2l6ZSwgY29udGV4dCk7XG4gICAgc3RyZWFtLnN0YXJ0ID0gc3RyZWFtLnBvcyA9IHN0YXJ0QXQgfHwgMDtcbiAgICBpZiAodGV4dCA9PSBcIlwiKSB7IGNhbGxCbGFua0xpbmUobW9kZSwgY29udGV4dC5zdGF0ZSk7IH1cbiAgICB3aGlsZSAoIXN0cmVhbS5lb2woKSkge1xuICAgICAgcmVhZFRva2VuKG1vZGUsIHN0cmVhbSwgY29udGV4dC5zdGF0ZSk7XG4gICAgICBzdHJlYW0uc3RhcnQgPSBzdHJlYW0ucG9zO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbGxCbGFua0xpbmUobW9kZSwgc3RhdGUpIHtcbiAgICBpZiAobW9kZS5ibGFua0xpbmUpIHsgcmV0dXJuIG1vZGUuYmxhbmtMaW5lKHN0YXRlKSB9XG4gICAgaWYgKCFtb2RlLmlubmVyTW9kZSkgeyByZXR1cm4gfVxuICAgIHZhciBpbm5lciA9IGlubmVyTW9kZShtb2RlLCBzdGF0ZSk7XG4gICAgaWYgKGlubmVyLm1vZGUuYmxhbmtMaW5lKSB7IHJldHVybiBpbm5lci5tb2RlLmJsYW5rTGluZShpbm5lci5zdGF0ZSkgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZFRva2VuKG1vZGUsIHN0cmVhbSwgc3RhdGUsIGlubmVyKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICBpZiAoaW5uZXIpIHsgaW5uZXJbMF0gPSBpbm5lck1vZGUobW9kZSwgc3RhdGUpLm1vZGU7IH1cbiAgICAgIHZhciBzdHlsZSA9IG1vZGUudG9rZW4oc3RyZWFtLCBzdGF0ZSk7XG4gICAgICBpZiAoc3RyZWFtLnBvcyA+IHN0cmVhbS5zdGFydCkgeyByZXR1cm4gc3R5bGUgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNb2RlIFwiICsgbW9kZS5uYW1lICsgXCIgZmFpbGVkIHRvIGFkdmFuY2Ugc3RyZWFtLlwiKVxuICB9XG5cbiAgdmFyIFRva2VuID0gZnVuY3Rpb24oc3RyZWFtLCB0eXBlLCBzdGF0ZSkge1xuICAgIHRoaXMuc3RhcnQgPSBzdHJlYW0uc3RhcnQ7IHRoaXMuZW5kID0gc3RyZWFtLnBvcztcbiAgICB0aGlzLnN0cmluZyA9IHN0cmVhbS5jdXJyZW50KCk7XG4gICAgdGhpcy50eXBlID0gdHlwZSB8fCBudWxsO1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgfTtcblxuICAvLyBVdGlsaXR5IGZvciBnZXRUb2tlbkF0IGFuZCBnZXRMaW5lVG9rZW5zXG4gIGZ1bmN0aW9uIHRha2VUb2tlbihjbSwgcG9zLCBwcmVjaXNlLCBhc0FycmF5KSB7XG4gICAgdmFyIGRvYyA9IGNtLmRvYywgbW9kZSA9IGRvYy5tb2RlLCBzdHlsZTtcbiAgICBwb3MgPSBjbGlwUG9zKGRvYywgcG9zKTtcbiAgICB2YXIgbGluZSA9IGdldExpbmUoZG9jLCBwb3MubGluZSksIGNvbnRleHQgPSBnZXRDb250ZXh0QmVmb3JlKGNtLCBwb3MubGluZSwgcHJlY2lzZSk7XG4gICAgdmFyIHN0cmVhbSA9IG5ldyBTdHJpbmdTdHJlYW0obGluZS50ZXh0LCBjbS5vcHRpb25zLnRhYlNpemUsIGNvbnRleHQpLCB0b2tlbnM7XG4gICAgaWYgKGFzQXJyYXkpIHsgdG9rZW5zID0gW107IH1cbiAgICB3aGlsZSAoKGFzQXJyYXkgfHwgc3RyZWFtLnBvcyA8IHBvcy5jaCkgJiYgIXN0cmVhbS5lb2woKSkge1xuICAgICAgc3RyZWFtLnN0YXJ0ID0gc3RyZWFtLnBvcztcbiAgICAgIHN0eWxlID0gcmVhZFRva2VuKG1vZGUsIHN0cmVhbSwgY29udGV4dC5zdGF0ZSk7XG4gICAgICBpZiAoYXNBcnJheSkgeyB0b2tlbnMucHVzaChuZXcgVG9rZW4oc3RyZWFtLCBzdHlsZSwgY29weVN0YXRlKGRvYy5tb2RlLCBjb250ZXh0LnN0YXRlKSkpOyB9XG4gICAgfVxuICAgIHJldHVybiBhc0FycmF5ID8gdG9rZW5zIDogbmV3IFRva2VuKHN0cmVhbSwgc3R5bGUsIGNvbnRleHQuc3RhdGUpXG4gIH1cblxuICBmdW5jdGlvbiBleHRyYWN0TGluZUNsYXNzZXModHlwZSwgb3V0cHV0KSB7XG4gICAgaWYgKHR5cGUpIHsgZm9yICg7Oykge1xuICAgICAgdmFyIGxpbmVDbGFzcyA9IHR5cGUubWF0Y2goLyg/Ol58XFxzKylsaW5lLShiYWNrZ3JvdW5kLSk/KFxcUyspLyk7XG4gICAgICBpZiAoIWxpbmVDbGFzcykgeyBicmVhayB9XG4gICAgICB0eXBlID0gdHlwZS5zbGljZSgwLCBsaW5lQ2xhc3MuaW5kZXgpICsgdHlwZS5zbGljZShsaW5lQ2xhc3MuaW5kZXggKyBsaW5lQ2xhc3NbMF0ubGVuZ3RoKTtcbiAgICAgIHZhciBwcm9wID0gbGluZUNsYXNzWzFdID8gXCJiZ0NsYXNzXCIgOiBcInRleHRDbGFzc1wiO1xuICAgICAgaWYgKG91dHB1dFtwcm9wXSA9PSBudWxsKVxuICAgICAgICB7IG91dHB1dFtwcm9wXSA9IGxpbmVDbGFzc1syXTsgfVxuICAgICAgZWxzZSBpZiAoIShuZXcgUmVnRXhwKFwiKD86XnxcXFxccylcIiArIGxpbmVDbGFzc1syXSArIFwiKD86JHxcXFxccylcIikpLnRlc3Qob3V0cHV0W3Byb3BdKSlcbiAgICAgICAgeyBvdXRwdXRbcHJvcF0gKz0gXCIgXCIgKyBsaW5lQ2xhc3NbMl07IH1cbiAgICB9IH1cbiAgICByZXR1cm4gdHlwZVxuICB9XG5cbiAgLy8gUnVuIHRoZSBnaXZlbiBtb2RlJ3MgcGFyc2VyIG92ZXIgYSBsaW5lLCBjYWxsaW5nIGYgZm9yIGVhY2ggdG9rZW4uXG4gIGZ1bmN0aW9uIHJ1bk1vZGUoY20sIHRleHQsIG1vZGUsIGNvbnRleHQsIGYsIGxpbmVDbGFzc2VzLCBmb3JjZVRvRW5kKSB7XG4gICAgdmFyIGZsYXR0ZW5TcGFucyA9IG1vZGUuZmxhdHRlblNwYW5zO1xuICAgIGlmIChmbGF0dGVuU3BhbnMgPT0gbnVsbCkgeyBmbGF0dGVuU3BhbnMgPSBjbS5vcHRpb25zLmZsYXR0ZW5TcGFuczsgfVxuICAgIHZhciBjdXJTdGFydCA9IDAsIGN1clN0eWxlID0gbnVsbDtcbiAgICB2YXIgc3RyZWFtID0gbmV3IFN0cmluZ1N0cmVhbSh0ZXh0LCBjbS5vcHRpb25zLnRhYlNpemUsIGNvbnRleHQpLCBzdHlsZTtcbiAgICB2YXIgaW5uZXIgPSBjbS5vcHRpb25zLmFkZE1vZGVDbGFzcyAmJiBbbnVsbF07XG4gICAgaWYgKHRleHQgPT0gXCJcIikgeyBleHRyYWN0TGluZUNsYXNzZXMoY2FsbEJsYW5rTGluZShtb2RlLCBjb250ZXh0LnN0YXRlKSwgbGluZUNsYXNzZXMpOyB9XG4gICAgd2hpbGUgKCFzdHJlYW0uZW9sKCkpIHtcbiAgICAgIGlmIChzdHJlYW0ucG9zID4gY20ub3B0aW9ucy5tYXhIaWdobGlnaHRMZW5ndGgpIHtcbiAgICAgICAgZmxhdHRlblNwYW5zID0gZmFsc2U7XG4gICAgICAgIGlmIChmb3JjZVRvRW5kKSB7IHByb2Nlc3NMaW5lKGNtLCB0ZXh0LCBjb250ZXh0LCBzdHJlYW0ucG9zKTsgfVxuICAgICAgICBzdHJlYW0ucG9zID0gdGV4dC5sZW5ndGg7XG4gICAgICAgIHN0eWxlID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0eWxlID0gZXh0cmFjdExpbmVDbGFzc2VzKHJlYWRUb2tlbihtb2RlLCBzdHJlYW0sIGNvbnRleHQuc3RhdGUsIGlubmVyKSwgbGluZUNsYXNzZXMpO1xuICAgICAgfVxuICAgICAgaWYgKGlubmVyKSB7XG4gICAgICAgIHZhciBtTmFtZSA9IGlubmVyWzBdLm5hbWU7XG4gICAgICAgIGlmIChtTmFtZSkgeyBzdHlsZSA9IFwibS1cIiArIChzdHlsZSA/IG1OYW1lICsgXCIgXCIgKyBzdHlsZSA6IG1OYW1lKTsgfVxuICAgICAgfVxuICAgICAgaWYgKCFmbGF0dGVuU3BhbnMgfHwgY3VyU3R5bGUgIT0gc3R5bGUpIHtcbiAgICAgICAgd2hpbGUgKGN1clN0YXJ0IDwgc3RyZWFtLnN0YXJ0KSB7XG4gICAgICAgICAgY3VyU3RhcnQgPSBNYXRoLm1pbihzdHJlYW0uc3RhcnQsIGN1clN0YXJ0ICsgNTAwMCk7XG4gICAgICAgICAgZihjdXJTdGFydCwgY3VyU3R5bGUpO1xuICAgICAgICB9XG4gICAgICAgIGN1clN0eWxlID0gc3R5bGU7XG4gICAgICB9XG4gICAgICBzdHJlYW0uc3RhcnQgPSBzdHJlYW0ucG9zO1xuICAgIH1cbiAgICB3aGlsZSAoY3VyU3RhcnQgPCBzdHJlYW0ucG9zKSB7XG4gICAgICAvLyBXZWJraXQgc2VlbXMgdG8gcmVmdXNlIHRvIHJlbmRlciB0ZXh0IG5vZGVzIGxvbmdlciB0aGFuIDU3NDQ0XG4gICAgICAvLyBjaGFyYWN0ZXJzLCBhbmQgcmV0dXJucyBpbmFjY3VyYXRlIG1lYXN1cmVtZW50cyBpbiBub2Rlc1xuICAgICAgLy8gc3RhcnRpbmcgYXJvdW5kIDUwMDAgY2hhcnMuXG4gICAgICB2YXIgcG9zID0gTWF0aC5taW4oc3RyZWFtLnBvcywgY3VyU3RhcnQgKyA1MDAwKTtcbiAgICAgIGYocG9zLCBjdXJTdHlsZSk7XG4gICAgICBjdXJTdGFydCA9IHBvcztcbiAgICB9XG4gIH1cblxuICAvLyBGaW5kcyB0aGUgbGluZSB0byBzdGFydCB3aXRoIHdoZW4gc3RhcnRpbmcgYSBwYXJzZS4gVHJpZXMgdG9cbiAgLy8gZmluZCBhIGxpbmUgd2l0aCBhIHN0YXRlQWZ0ZXIsIHNvIHRoYXQgaXQgY2FuIHN0YXJ0IHdpdGggYVxuICAvLyB2YWxpZCBzdGF0ZS4gSWYgdGhhdCBmYWlscywgaXQgcmV0dXJucyB0aGUgbGluZSB3aXRoIHRoZVxuICAvLyBzbWFsbGVzdCBpbmRlbnRhdGlvbiwgd2hpY2ggdGVuZHMgdG8gbmVlZCB0aGUgbGVhc3QgY29udGV4dCB0b1xuICAvLyBwYXJzZSBjb3JyZWN0bHkuXG4gIGZ1bmN0aW9uIGZpbmRTdGFydExpbmUoY20sIG4sIHByZWNpc2UpIHtcbiAgICB2YXIgbWluaW5kZW50LCBtaW5saW5lLCBkb2MgPSBjbS5kb2M7XG4gICAgdmFyIGxpbSA9IHByZWNpc2UgPyAtMSA6IG4gLSAoY20uZG9jLm1vZGUuaW5uZXJNb2RlID8gMTAwMCA6IDEwMCk7XG4gICAgZm9yICh2YXIgc2VhcmNoID0gbjsgc2VhcmNoID4gbGltOyAtLXNlYXJjaCkge1xuICAgICAgaWYgKHNlYXJjaCA8PSBkb2MuZmlyc3QpIHsgcmV0dXJuIGRvYy5maXJzdCB9XG4gICAgICB2YXIgbGluZSA9IGdldExpbmUoZG9jLCBzZWFyY2ggLSAxKSwgYWZ0ZXIgPSBsaW5lLnN0YXRlQWZ0ZXI7XG4gICAgICBpZiAoYWZ0ZXIgJiYgKCFwcmVjaXNlIHx8IHNlYXJjaCArIChhZnRlciBpbnN0YW5jZW9mIFNhdmVkQ29udGV4dCA/IGFmdGVyLmxvb2tBaGVhZCA6IDApIDw9IGRvYy5tb2RlRnJvbnRpZXIpKVxuICAgICAgICB7IHJldHVybiBzZWFyY2ggfVxuICAgICAgdmFyIGluZGVudGVkID0gY291bnRDb2x1bW4obGluZS50ZXh0LCBudWxsLCBjbS5vcHRpb25zLnRhYlNpemUpO1xuICAgICAgaWYgKG1pbmxpbmUgPT0gbnVsbCB8fCBtaW5pbmRlbnQgPiBpbmRlbnRlZCkge1xuICAgICAgICBtaW5saW5lID0gc2VhcmNoIC0gMTtcbiAgICAgICAgbWluaW5kZW50ID0gaW5kZW50ZWQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtaW5saW5lXG4gIH1cblxuICBmdW5jdGlvbiByZXRyZWF0RnJvbnRpZXIoZG9jLCBuKSB7XG4gICAgZG9jLm1vZGVGcm9udGllciA9IE1hdGgubWluKGRvYy5tb2RlRnJvbnRpZXIsIG4pO1xuICAgIGlmIChkb2MuaGlnaGxpZ2h0RnJvbnRpZXIgPCBuIC0gMTApIHsgcmV0dXJuIH1cbiAgICB2YXIgc3RhcnQgPSBkb2MuZmlyc3Q7XG4gICAgZm9yICh2YXIgbGluZSA9IG4gLSAxOyBsaW5lID4gc3RhcnQ7IGxpbmUtLSkge1xuICAgICAgdmFyIHNhdmVkID0gZ2V0TGluZShkb2MsIGxpbmUpLnN0YXRlQWZ0ZXI7XG4gICAgICAvLyBjaGFuZ2UgaXMgb24gM1xuICAgICAgLy8gc3RhdGUgb24gbGluZSAxIGxvb2tlZCBhaGVhZCAyIC0tIHNvIHNhdyAzXG4gICAgICAvLyB0ZXN0IDEgKyAyIDwgMyBzaG91bGQgY292ZXIgdGhpc1xuICAgICAgaWYgKHNhdmVkICYmICghKHNhdmVkIGluc3RhbmNlb2YgU2F2ZWRDb250ZXh0KSB8fCBsaW5lICsgc2F2ZWQubG9va0FoZWFkIDwgbikpIHtcbiAgICAgICAgc3RhcnQgPSBsaW5lICsgMTtcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gICAgZG9jLmhpZ2hsaWdodEZyb250aWVyID0gTWF0aC5taW4oZG9jLmhpZ2hsaWdodEZyb250aWVyLCBzdGFydCk7XG4gIH1cblxuICAvLyBPcHRpbWl6ZSBzb21lIGNvZGUgd2hlbiB0aGVzZSBmZWF0dXJlcyBhcmUgbm90IHVzZWQuXG4gIHZhciBzYXdSZWFkT25seVNwYW5zID0gZmFsc2UsIHNhd0NvbGxhcHNlZFNwYW5zID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gc2VlUmVhZE9ubHlTcGFucygpIHtcbiAgICBzYXdSZWFkT25seVNwYW5zID0gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNlZUNvbGxhcHNlZFNwYW5zKCkge1xuICAgIHNhd0NvbGxhcHNlZFNwYW5zID0gdHJ1ZTtcbiAgfVxuXG4gIC8vIFRFWFRNQVJLRVIgU1BBTlNcblxuICBmdW5jdGlvbiBNYXJrZWRTcGFuKG1hcmtlciwgZnJvbSwgdG8pIHtcbiAgICB0aGlzLm1hcmtlciA9IG1hcmtlcjtcbiAgICB0aGlzLmZyb20gPSBmcm9tOyB0aGlzLnRvID0gdG87XG4gIH1cblxuICAvLyBTZWFyY2ggYW4gYXJyYXkgb2Ygc3BhbnMgZm9yIGEgc3BhbiBtYXRjaGluZyB0aGUgZ2l2ZW4gbWFya2VyLlxuICBmdW5jdGlvbiBnZXRNYXJrZWRTcGFuRm9yKHNwYW5zLCBtYXJrZXIpIHtcbiAgICBpZiAoc3BhbnMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHNwYW4gPSBzcGFuc1tpXTtcbiAgICAgIGlmIChzcGFuLm1hcmtlciA9PSBtYXJrZXIpIHsgcmV0dXJuIHNwYW4gfVxuICAgIH0gfVxuICB9XG4gIC8vIFJlbW92ZSBhIHNwYW4gZnJvbSBhbiBhcnJheSwgcmV0dXJuaW5nIHVuZGVmaW5lZCBpZiBubyBzcGFucyBhcmVcbiAgLy8gbGVmdCAod2UgZG9uJ3Qgc3RvcmUgYXJyYXlzIGZvciBsaW5lcyB3aXRob3V0IHNwYW5zKS5cbiAgZnVuY3Rpb24gcmVtb3ZlTWFya2VkU3BhbihzcGFucywgc3Bhbikge1xuICAgIHZhciByO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BhbnMubGVuZ3RoOyArK2kpXG4gICAgICB7IGlmIChzcGFuc1tpXSAhPSBzcGFuKSB7IChyIHx8IChyID0gW10pKS5wdXNoKHNwYW5zW2ldKTsgfSB9XG4gICAgcmV0dXJuIHJcbiAgfVxuICAvLyBBZGQgYSBzcGFuIHRvIGEgbGluZS5cbiAgZnVuY3Rpb24gYWRkTWFya2VkU3BhbihsaW5lLCBzcGFuKSB7XG4gICAgbGluZS5tYXJrZWRTcGFucyA9IGxpbmUubWFya2VkU3BhbnMgPyBsaW5lLm1hcmtlZFNwYW5zLmNvbmNhdChbc3Bhbl0pIDogW3NwYW5dO1xuICAgIHNwYW4ubWFya2VyLmF0dGFjaExpbmUobGluZSk7XG4gIH1cblxuICAvLyBVc2VkIGZvciB0aGUgYWxnb3JpdGhtIHRoYXQgYWRqdXN0cyBtYXJrZXJzIGZvciBhIGNoYW5nZSBpbiB0aGVcbiAgLy8gZG9jdW1lbnQuIFRoZXNlIGZ1bmN0aW9ucyBjdXQgYW4gYXJyYXkgb2Ygc3BhbnMgYXQgYSBnaXZlblxuICAvLyBjaGFyYWN0ZXIgcG9zaXRpb24sIHJldHVybmluZyBhbiBhcnJheSBvZiByZW1haW5pbmcgY2h1bmtzIChvclxuICAvLyB1bmRlZmluZWQgaWYgbm90aGluZyByZW1haW5zKS5cbiAgZnVuY3Rpb24gbWFya2VkU3BhbnNCZWZvcmUob2xkLCBzdGFydENoLCBpc0luc2VydCkge1xuICAgIHZhciBudztcbiAgICBpZiAob2xkKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgb2xkLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgc3BhbiA9IG9sZFtpXSwgbWFya2VyID0gc3Bhbi5tYXJrZXI7XG4gICAgICB2YXIgc3RhcnRzQmVmb3JlID0gc3Bhbi5mcm9tID09IG51bGwgfHwgKG1hcmtlci5pbmNsdXNpdmVMZWZ0ID8gc3Bhbi5mcm9tIDw9IHN0YXJ0Q2ggOiBzcGFuLmZyb20gPCBzdGFydENoKTtcbiAgICAgIGlmIChzdGFydHNCZWZvcmUgfHwgc3Bhbi5mcm9tID09IHN0YXJ0Q2ggJiYgbWFya2VyLnR5cGUgPT0gXCJib29rbWFya1wiICYmICghaXNJbnNlcnQgfHwgIXNwYW4ubWFya2VyLmluc2VydExlZnQpKSB7XG4gICAgICAgIHZhciBlbmRzQWZ0ZXIgPSBzcGFuLnRvID09IG51bGwgfHwgKG1hcmtlci5pbmNsdXNpdmVSaWdodCA/IHNwYW4udG8gPj0gc3RhcnRDaCA6IHNwYW4udG8gPiBzdGFydENoKVxuICAgICAgICA7KG53IHx8IChudyA9IFtdKSkucHVzaChuZXcgTWFya2VkU3BhbihtYXJrZXIsIHNwYW4uZnJvbSwgZW5kc0FmdGVyID8gbnVsbCA6IHNwYW4udG8pKTtcbiAgICAgIH1cbiAgICB9IH1cbiAgICByZXR1cm4gbndcbiAgfVxuICBmdW5jdGlvbiBtYXJrZWRTcGFuc0FmdGVyKG9sZCwgZW5kQ2gsIGlzSW5zZXJ0KSB7XG4gICAgdmFyIG53O1xuICAgIGlmIChvbGQpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBvbGQubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBzcGFuID0gb2xkW2ldLCBtYXJrZXIgPSBzcGFuLm1hcmtlcjtcbiAgICAgIHZhciBlbmRzQWZ0ZXIgPSBzcGFuLnRvID09IG51bGwgfHwgKG1hcmtlci5pbmNsdXNpdmVSaWdodCA/IHNwYW4udG8gPj0gZW5kQ2ggOiBzcGFuLnRvID4gZW5kQ2gpO1xuICAgICAgaWYgKGVuZHNBZnRlciB8fCBzcGFuLmZyb20gPT0gZW5kQ2ggJiYgbWFya2VyLnR5cGUgPT0gXCJib29rbWFya1wiICYmICghaXNJbnNlcnQgfHwgc3Bhbi5tYXJrZXIuaW5zZXJ0TGVmdCkpIHtcbiAgICAgICAgdmFyIHN0YXJ0c0JlZm9yZSA9IHNwYW4uZnJvbSA9PSBudWxsIHx8IChtYXJrZXIuaW5jbHVzaXZlTGVmdCA/IHNwYW4uZnJvbSA8PSBlbmRDaCA6IHNwYW4uZnJvbSA8IGVuZENoKVxuICAgICAgICA7KG53IHx8IChudyA9IFtdKSkucHVzaChuZXcgTWFya2VkU3BhbihtYXJrZXIsIHN0YXJ0c0JlZm9yZSA/IG51bGwgOiBzcGFuLmZyb20gLSBlbmRDaCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuLnRvID09IG51bGwgPyBudWxsIDogc3Bhbi50byAtIGVuZENoKSk7XG4gICAgICB9XG4gICAgfSB9XG4gICAgcmV0dXJuIG53XG4gIH1cblxuICAvLyBHaXZlbiBhIGNoYW5nZSBvYmplY3QsIGNvbXB1dGUgdGhlIG5ldyBzZXQgb2YgbWFya2VyIHNwYW5zIHRoYXRcbiAgLy8gY292ZXIgdGhlIGxpbmUgaW4gd2hpY2ggdGhlIGNoYW5nZSB0b29rIHBsYWNlLiBSZW1vdmVzIHNwYW5zXG4gIC8vIGVudGlyZWx5IHdpdGhpbiB0aGUgY2hhbmdlLCByZWNvbm5lY3RzIHNwYW5zIGJlbG9uZ2luZyB0byB0aGVcbiAgLy8gc2FtZSBtYXJrZXIgdGhhdCBhcHBlYXIgb24gYm90aCBzaWRlcyBvZiB0aGUgY2hhbmdlLCBhbmQgY3V0cyBvZmZcbiAgLy8gc3BhbnMgcGFydGlhbGx5IHdpdGhpbiB0aGUgY2hhbmdlLiBSZXR1cm5zIGFuIGFycmF5IG9mIHNwYW5cbiAgLy8gYXJyYXlzIHdpdGggb25lIGVsZW1lbnQgZm9yIGVhY2ggbGluZSBpbiAoYWZ0ZXIpIHRoZSBjaGFuZ2UuXG4gIGZ1bmN0aW9uIHN0cmV0Y2hTcGFuc092ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpIHtcbiAgICBpZiAoY2hhbmdlLmZ1bGwpIHsgcmV0dXJuIG51bGwgfVxuICAgIHZhciBvbGRGaXJzdCA9IGlzTGluZShkb2MsIGNoYW5nZS5mcm9tLmxpbmUpICYmIGdldExpbmUoZG9jLCBjaGFuZ2UuZnJvbS5saW5lKS5tYXJrZWRTcGFucztcbiAgICB2YXIgb2xkTGFzdCA9IGlzTGluZShkb2MsIGNoYW5nZS50by5saW5lKSAmJiBnZXRMaW5lKGRvYywgY2hhbmdlLnRvLmxpbmUpLm1hcmtlZFNwYW5zO1xuICAgIGlmICghb2xkRmlyc3QgJiYgIW9sZExhc3QpIHsgcmV0dXJuIG51bGwgfVxuXG4gICAgdmFyIHN0YXJ0Q2ggPSBjaGFuZ2UuZnJvbS5jaCwgZW5kQ2ggPSBjaGFuZ2UudG8uY2gsIGlzSW5zZXJ0ID0gY21wKGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pID09IDA7XG4gICAgLy8gR2V0IHRoZSBzcGFucyB0aGF0ICdzdGljayBvdXQnIG9uIGJvdGggc2lkZXNcbiAgICB2YXIgZmlyc3QgPSBtYXJrZWRTcGFuc0JlZm9yZShvbGRGaXJzdCwgc3RhcnRDaCwgaXNJbnNlcnQpO1xuICAgIHZhciBsYXN0ID0gbWFya2VkU3BhbnNBZnRlcihvbGRMYXN0LCBlbmRDaCwgaXNJbnNlcnQpO1xuXG4gICAgLy8gTmV4dCwgbWVyZ2UgdGhvc2UgdHdvIGVuZHNcbiAgICB2YXIgc2FtZUxpbmUgPSBjaGFuZ2UudGV4dC5sZW5ndGggPT0gMSwgb2Zmc2V0ID0gbHN0KGNoYW5nZS50ZXh0KS5sZW5ndGggKyAoc2FtZUxpbmUgPyBzdGFydENoIDogMCk7XG4gICAgaWYgKGZpcnN0KSB7XG4gICAgICAvLyBGaXggdXAgLnRvIHByb3BlcnRpZXMgb2YgZmlyc3RcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlyc3QubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHNwYW4gPSBmaXJzdFtpXTtcbiAgICAgICAgaWYgKHNwYW4udG8gPT0gbnVsbCkge1xuICAgICAgICAgIHZhciBmb3VuZCA9IGdldE1hcmtlZFNwYW5Gb3IobGFzdCwgc3Bhbi5tYXJrZXIpO1xuICAgICAgICAgIGlmICghZm91bmQpIHsgc3Bhbi50byA9IHN0YXJ0Q2g7IH1cbiAgICAgICAgICBlbHNlIGlmIChzYW1lTGluZSkgeyBzcGFuLnRvID0gZm91bmQudG8gPT0gbnVsbCA/IG51bGwgOiBmb3VuZC50byArIG9mZnNldDsgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChsYXN0KSB7XG4gICAgICAvLyBGaXggdXAgLmZyb20gaW4gbGFzdCAob3IgbW92ZSB0aGVtIGludG8gZmlyc3QgaW4gY2FzZSBvZiBzYW1lTGluZSlcbiAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IGxhc3QubGVuZ3RoOyArK2kkMSkge1xuICAgICAgICB2YXIgc3BhbiQxID0gbGFzdFtpJDFdO1xuICAgICAgICBpZiAoc3BhbiQxLnRvICE9IG51bGwpIHsgc3BhbiQxLnRvICs9IG9mZnNldDsgfVxuICAgICAgICBpZiAoc3BhbiQxLmZyb20gPT0gbnVsbCkge1xuICAgICAgICAgIHZhciBmb3VuZCQxID0gZ2V0TWFya2VkU3BhbkZvcihmaXJzdCwgc3BhbiQxLm1hcmtlcik7XG4gICAgICAgICAgaWYgKCFmb3VuZCQxKSB7XG4gICAgICAgICAgICBzcGFuJDEuZnJvbSA9IG9mZnNldDtcbiAgICAgICAgICAgIGlmIChzYW1lTGluZSkgeyAoZmlyc3QgfHwgKGZpcnN0ID0gW10pKS5wdXNoKHNwYW4kMSk7IH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3BhbiQxLmZyb20gKz0gb2Zmc2V0O1xuICAgICAgICAgIGlmIChzYW1lTGluZSkgeyAoZmlyc3QgfHwgKGZpcnN0ID0gW10pKS5wdXNoKHNwYW4kMSk7IH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBNYWtlIHN1cmUgd2UgZGlkbid0IGNyZWF0ZSBhbnkgemVyby1sZW5ndGggc3BhbnNcbiAgICBpZiAoZmlyc3QpIHsgZmlyc3QgPSBjbGVhckVtcHR5U3BhbnMoZmlyc3QpOyB9XG4gICAgaWYgKGxhc3QgJiYgbGFzdCAhPSBmaXJzdCkgeyBsYXN0ID0gY2xlYXJFbXB0eVNwYW5zKGxhc3QpOyB9XG5cbiAgICB2YXIgbmV3TWFya2VycyA9IFtmaXJzdF07XG4gICAgaWYgKCFzYW1lTGluZSkge1xuICAgICAgLy8gRmlsbCBnYXAgd2l0aCB3aG9sZS1saW5lLXNwYW5zXG4gICAgICB2YXIgZ2FwID0gY2hhbmdlLnRleHQubGVuZ3RoIC0gMiwgZ2FwTWFya2VycztcbiAgICAgIGlmIChnYXAgPiAwICYmIGZpcnN0KVxuICAgICAgICB7IGZvciAodmFyIGkkMiA9IDA7IGkkMiA8IGZpcnN0Lmxlbmd0aDsgKytpJDIpXG4gICAgICAgICAgeyBpZiAoZmlyc3RbaSQyXS50byA9PSBudWxsKVxuICAgICAgICAgICAgeyAoZ2FwTWFya2VycyB8fCAoZ2FwTWFya2VycyA9IFtdKSkucHVzaChuZXcgTWFya2VkU3BhbihmaXJzdFtpJDJdLm1hcmtlciwgbnVsbCwgbnVsbCkpOyB9IH0gfVxuICAgICAgZm9yICh2YXIgaSQzID0gMDsgaSQzIDwgZ2FwOyArK2kkMylcbiAgICAgICAgeyBuZXdNYXJrZXJzLnB1c2goZ2FwTWFya2Vycyk7IH1cbiAgICAgIG5ld01hcmtlcnMucHVzaChsYXN0KTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld01hcmtlcnNcbiAgfVxuXG4gIC8vIFJlbW92ZSBzcGFucyB0aGF0IGFyZSBlbXB0eSBhbmQgZG9uJ3QgaGF2ZSBhIGNsZWFyV2hlbkVtcHR5XG4gIC8vIG9wdGlvbiBvZiBmYWxzZS5cbiAgZnVuY3Rpb24gY2xlYXJFbXB0eVNwYW5zKHNwYW5zKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHNwYW4gPSBzcGFuc1tpXTtcbiAgICAgIGlmIChzcGFuLmZyb20gIT0gbnVsbCAmJiBzcGFuLmZyb20gPT0gc3Bhbi50byAmJiBzcGFuLm1hcmtlci5jbGVhcldoZW5FbXB0eSAhPT0gZmFsc2UpXG4gICAgICAgIHsgc3BhbnMuc3BsaWNlKGktLSwgMSk7IH1cbiAgICB9XG4gICAgaWYgKCFzcGFucy5sZW5ndGgpIHsgcmV0dXJuIG51bGwgfVxuICAgIHJldHVybiBzcGFuc1xuICB9XG5cbiAgLy8gVXNlZCB0byAnY2xpcCcgb3V0IHJlYWRPbmx5IHJhbmdlcyB3aGVuIG1ha2luZyBhIGNoYW5nZS5cbiAgZnVuY3Rpb24gcmVtb3ZlUmVhZE9ubHlSYW5nZXMoZG9jLCBmcm9tLCB0bykge1xuICAgIHZhciBtYXJrZXJzID0gbnVsbDtcbiAgICBkb2MuaXRlcihmcm9tLmxpbmUsIHRvLmxpbmUgKyAxLCBmdW5jdGlvbiAobGluZSkge1xuICAgICAgaWYgKGxpbmUubWFya2VkU3BhbnMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lLm1hcmtlZFNwYW5zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBtYXJrID0gbGluZS5tYXJrZWRTcGFuc1tpXS5tYXJrZXI7XG4gICAgICAgIGlmIChtYXJrLnJlYWRPbmx5ICYmICghbWFya2VycyB8fCBpbmRleE9mKG1hcmtlcnMsIG1hcmspID09IC0xKSlcbiAgICAgICAgICB7IChtYXJrZXJzIHx8IChtYXJrZXJzID0gW10pKS5wdXNoKG1hcmspOyB9XG4gICAgICB9IH1cbiAgICB9KTtcbiAgICBpZiAoIW1hcmtlcnMpIHsgcmV0dXJuIG51bGwgfVxuICAgIHZhciBwYXJ0cyA9IFt7ZnJvbTogZnJvbSwgdG86IHRvfV07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgbWsgPSBtYXJrZXJzW2ldLCBtID0gbWsuZmluZCgwKTtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcGFydHMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgdmFyIHAgPSBwYXJ0c1tqXTtcbiAgICAgICAgaWYgKGNtcChwLnRvLCBtLmZyb20pIDwgMCB8fCBjbXAocC5mcm9tLCBtLnRvKSA+IDApIHsgY29udGludWUgfVxuICAgICAgICB2YXIgbmV3UGFydHMgPSBbaiwgMV0sIGRmcm9tID0gY21wKHAuZnJvbSwgbS5mcm9tKSwgZHRvID0gY21wKHAudG8sIG0udG8pO1xuICAgICAgICBpZiAoZGZyb20gPCAwIHx8ICFtay5pbmNsdXNpdmVMZWZ0ICYmICFkZnJvbSlcbiAgICAgICAgICB7IG5ld1BhcnRzLnB1c2goe2Zyb206IHAuZnJvbSwgdG86IG0uZnJvbX0pOyB9XG4gICAgICAgIGlmIChkdG8gPiAwIHx8ICFtay5pbmNsdXNpdmVSaWdodCAmJiAhZHRvKVxuICAgICAgICAgIHsgbmV3UGFydHMucHVzaCh7ZnJvbTogbS50bywgdG86IHAudG99KTsgfVxuICAgICAgICBwYXJ0cy5zcGxpY2UuYXBwbHkocGFydHMsIG5ld1BhcnRzKTtcbiAgICAgICAgaiArPSBuZXdQYXJ0cy5sZW5ndGggLSAzO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGFydHNcbiAgfVxuXG4gIC8vIENvbm5lY3Qgb3IgZGlzY29ubmVjdCBzcGFucyBmcm9tIGEgbGluZS5cbiAgZnVuY3Rpb24gZGV0YWNoTWFya2VkU3BhbnMobGluZSkge1xuICAgIHZhciBzcGFucyA9IGxpbmUubWFya2VkU3BhbnM7XG4gICAgaWYgKCFzcGFucykgeyByZXR1cm4gfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BhbnMubGVuZ3RoOyArK2kpXG4gICAgICB7IHNwYW5zW2ldLm1hcmtlci5kZXRhY2hMaW5lKGxpbmUpOyB9XG4gICAgbGluZS5tYXJrZWRTcGFucyA9IG51bGw7XG4gIH1cbiAgZnVuY3Rpb24gYXR0YWNoTWFya2VkU3BhbnMobGluZSwgc3BhbnMpIHtcbiAgICBpZiAoIXNwYW5zKSB7IHJldHVybiB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7ICsraSlcbiAgICAgIHsgc3BhbnNbaV0ubWFya2VyLmF0dGFjaExpbmUobGluZSk7IH1cbiAgICBsaW5lLm1hcmtlZFNwYW5zID0gc3BhbnM7XG4gIH1cblxuICAvLyBIZWxwZXJzIHVzZWQgd2hlbiBjb21wdXRpbmcgd2hpY2ggb3ZlcmxhcHBpbmcgY29sbGFwc2VkIHNwYW5cbiAgLy8gY291bnRzIGFzIHRoZSBsYXJnZXIgb25lLlxuICBmdW5jdGlvbiBleHRyYUxlZnQobWFya2VyKSB7IHJldHVybiBtYXJrZXIuaW5jbHVzaXZlTGVmdCA/IC0xIDogMCB9XG4gIGZ1bmN0aW9uIGV4dHJhUmlnaHQobWFya2VyKSB7IHJldHVybiBtYXJrZXIuaW5jbHVzaXZlUmlnaHQgPyAxIDogMCB9XG5cbiAgLy8gUmV0dXJucyBhIG51bWJlciBpbmRpY2F0aW5nIHdoaWNoIG9mIHR3byBvdmVybGFwcGluZyBjb2xsYXBzZWRcbiAgLy8gc3BhbnMgaXMgbGFyZ2VyIChhbmQgdGh1cyBpbmNsdWRlcyB0aGUgb3RoZXIpLiBGYWxscyBiYWNrIHRvXG4gIC8vIGNvbXBhcmluZyBpZHMgd2hlbiB0aGUgc3BhbnMgY292ZXIgZXhhY3RseSB0aGUgc2FtZSByYW5nZS5cbiAgZnVuY3Rpb24gY29tcGFyZUNvbGxhcHNlZE1hcmtlcnMoYSwgYikge1xuICAgIHZhciBsZW5EaWZmID0gYS5saW5lcy5sZW5ndGggLSBiLmxpbmVzLmxlbmd0aDtcbiAgICBpZiAobGVuRGlmZiAhPSAwKSB7IHJldHVybiBsZW5EaWZmIH1cbiAgICB2YXIgYVBvcyA9IGEuZmluZCgpLCBiUG9zID0gYi5maW5kKCk7XG4gICAgdmFyIGZyb21DbXAgPSBjbXAoYVBvcy5mcm9tLCBiUG9zLmZyb20pIHx8IGV4dHJhTGVmdChhKSAtIGV4dHJhTGVmdChiKTtcbiAgICBpZiAoZnJvbUNtcCkgeyByZXR1cm4gLWZyb21DbXAgfVxuICAgIHZhciB0b0NtcCA9IGNtcChhUG9zLnRvLCBiUG9zLnRvKSB8fCBleHRyYVJpZ2h0KGEpIC0gZXh0cmFSaWdodChiKTtcbiAgICBpZiAodG9DbXApIHsgcmV0dXJuIHRvQ21wIH1cbiAgICByZXR1cm4gYi5pZCAtIGEuaWRcbiAgfVxuXG4gIC8vIEZpbmQgb3V0IHdoZXRoZXIgYSBsaW5lIGVuZHMgb3Igc3RhcnRzIGluIGEgY29sbGFwc2VkIHNwYW4uIElmXG4gIC8vIHNvLCByZXR1cm4gdGhlIG1hcmtlciBmb3IgdGhhdCBzcGFuLlxuICBmdW5jdGlvbiBjb2xsYXBzZWRTcGFuQXRTaWRlKGxpbmUsIHN0YXJ0KSB7XG4gICAgdmFyIHNwcyA9IHNhd0NvbGxhcHNlZFNwYW5zICYmIGxpbmUubWFya2VkU3BhbnMsIGZvdW5kO1xuICAgIGlmIChzcHMpIHsgZm9yICh2YXIgc3AgPSAodm9pZCAwKSwgaSA9IDA7IGkgPCBzcHMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHNwID0gc3BzW2ldO1xuICAgICAgaWYgKHNwLm1hcmtlci5jb2xsYXBzZWQgJiYgKHN0YXJ0ID8gc3AuZnJvbSA6IHNwLnRvKSA9PSBudWxsICYmXG4gICAgICAgICAgKCFmb3VuZCB8fCBjb21wYXJlQ29sbGFwc2VkTWFya2Vycyhmb3VuZCwgc3AubWFya2VyKSA8IDApKVxuICAgICAgICB7IGZvdW5kID0gc3AubWFya2VyOyB9XG4gICAgfSB9XG4gICAgcmV0dXJuIGZvdW5kXG4gIH1cbiAgZnVuY3Rpb24gY29sbGFwc2VkU3BhbkF0U3RhcnQobGluZSkgeyByZXR1cm4gY29sbGFwc2VkU3BhbkF0U2lkZShsaW5lLCB0cnVlKSB9XG4gIGZ1bmN0aW9uIGNvbGxhcHNlZFNwYW5BdEVuZChsaW5lKSB7IHJldHVybiBjb2xsYXBzZWRTcGFuQXRTaWRlKGxpbmUsIGZhbHNlKSB9XG5cbiAgZnVuY3Rpb24gY29sbGFwc2VkU3BhbkFyb3VuZChsaW5lLCBjaCkge1xuICAgIHZhciBzcHMgPSBzYXdDb2xsYXBzZWRTcGFucyAmJiBsaW5lLm1hcmtlZFNwYW5zLCBmb3VuZDtcbiAgICBpZiAoc3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgc3BzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgc3AgPSBzcHNbaV07XG4gICAgICBpZiAoc3AubWFya2VyLmNvbGxhcHNlZCAmJiAoc3AuZnJvbSA9PSBudWxsIHx8IHNwLmZyb20gPCBjaCkgJiYgKHNwLnRvID09IG51bGwgfHwgc3AudG8gPiBjaCkgJiZcbiAgICAgICAgICAoIWZvdW5kIHx8IGNvbXBhcmVDb2xsYXBzZWRNYXJrZXJzKGZvdW5kLCBzcC5tYXJrZXIpIDwgMCkpIHsgZm91bmQgPSBzcC5tYXJrZXI7IH1cbiAgICB9IH1cbiAgICByZXR1cm4gZm91bmRcbiAgfVxuXG4gIC8vIFRlc3Qgd2hldGhlciB0aGVyZSBleGlzdHMgYSBjb2xsYXBzZWQgc3BhbiB0aGF0IHBhcnRpYWxseVxuICAvLyBvdmVybGFwcyAoY292ZXJzIHRoZSBzdGFydCBvciBlbmQsIGJ1dCBub3QgYm90aCkgb2YgYSBuZXcgc3Bhbi5cbiAgLy8gU3VjaCBvdmVybGFwIGlzIG5vdCBhbGxvd2VkLlxuICBmdW5jdGlvbiBjb25mbGljdGluZ0NvbGxhcHNlZFJhbmdlKGRvYywgbGluZU5vLCBmcm9tLCB0bywgbWFya2VyKSB7XG4gICAgdmFyIGxpbmUgPSBnZXRMaW5lKGRvYywgbGluZU5vKTtcbiAgICB2YXIgc3BzID0gc2F3Q29sbGFwc2VkU3BhbnMgJiYgbGluZS5tYXJrZWRTcGFucztcbiAgICBpZiAoc3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgc3BzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgc3AgPSBzcHNbaV07XG4gICAgICBpZiAoIXNwLm1hcmtlci5jb2xsYXBzZWQpIHsgY29udGludWUgfVxuICAgICAgdmFyIGZvdW5kID0gc3AubWFya2VyLmZpbmQoMCk7XG4gICAgICB2YXIgZnJvbUNtcCA9IGNtcChmb3VuZC5mcm9tLCBmcm9tKSB8fCBleHRyYUxlZnQoc3AubWFya2VyKSAtIGV4dHJhTGVmdChtYXJrZXIpO1xuICAgICAgdmFyIHRvQ21wID0gY21wKGZvdW5kLnRvLCB0bykgfHwgZXh0cmFSaWdodChzcC5tYXJrZXIpIC0gZXh0cmFSaWdodChtYXJrZXIpO1xuICAgICAgaWYgKGZyb21DbXAgPj0gMCAmJiB0b0NtcCA8PSAwIHx8IGZyb21DbXAgPD0gMCAmJiB0b0NtcCA+PSAwKSB7IGNvbnRpbnVlIH1cbiAgICAgIGlmIChmcm9tQ21wIDw9IDAgJiYgKHNwLm1hcmtlci5pbmNsdXNpdmVSaWdodCAmJiBtYXJrZXIuaW5jbHVzaXZlTGVmdCA/IGNtcChmb3VuZC50bywgZnJvbSkgPj0gMCA6IGNtcChmb3VuZC50bywgZnJvbSkgPiAwKSB8fFxuICAgICAgICAgIGZyb21DbXAgPj0gMCAmJiAoc3AubWFya2VyLmluY2x1c2l2ZVJpZ2h0ICYmIG1hcmtlci5pbmNsdXNpdmVMZWZ0ID8gY21wKGZvdW5kLmZyb20sIHRvKSA8PSAwIDogY21wKGZvdW5kLmZyb20sIHRvKSA8IDApKVxuICAgICAgICB7IHJldHVybiB0cnVlIH1cbiAgICB9IH1cbiAgfVxuXG4gIC8vIEEgdmlzdWFsIGxpbmUgaXMgYSBsaW5lIGFzIGRyYXduIG9uIHRoZSBzY3JlZW4uIEZvbGRpbmcsIGZvclxuICAvLyBleGFtcGxlLCBjYW4gY2F1c2UgbXVsdGlwbGUgbG9naWNhbCBsaW5lcyB0byBhcHBlYXIgb24gdGhlIHNhbWVcbiAgLy8gdmlzdWFsIGxpbmUuIFRoaXMgZmluZHMgdGhlIHN0YXJ0IG9mIHRoZSB2aXN1YWwgbGluZSB0aGF0IHRoZVxuICAvLyBnaXZlbiBsaW5lIGlzIHBhcnQgb2YgKHVzdWFsbHkgdGhhdCBpcyB0aGUgbGluZSBpdHNlbGYpLlxuICBmdW5jdGlvbiB2aXN1YWxMaW5lKGxpbmUpIHtcbiAgICB2YXIgbWVyZ2VkO1xuICAgIHdoaWxlIChtZXJnZWQgPSBjb2xsYXBzZWRTcGFuQXRTdGFydChsaW5lKSlcbiAgICAgIHsgbGluZSA9IG1lcmdlZC5maW5kKC0xLCB0cnVlKS5saW5lOyB9XG4gICAgcmV0dXJuIGxpbmVcbiAgfVxuXG4gIGZ1bmN0aW9uIHZpc3VhbExpbmVFbmQobGluZSkge1xuICAgIHZhciBtZXJnZWQ7XG4gICAgd2hpbGUgKG1lcmdlZCA9IGNvbGxhcHNlZFNwYW5BdEVuZChsaW5lKSlcbiAgICAgIHsgbGluZSA9IG1lcmdlZC5maW5kKDEsIHRydWUpLmxpbmU7IH1cbiAgICByZXR1cm4gbGluZVxuICB9XG5cbiAgLy8gUmV0dXJucyBhbiBhcnJheSBvZiBsb2dpY2FsIGxpbmVzIHRoYXQgY29udGludWUgdGhlIHZpc3VhbCBsaW5lXG4gIC8vIHN0YXJ0ZWQgYnkgdGhlIGFyZ3VtZW50LCBvciB1bmRlZmluZWQgaWYgdGhlcmUgYXJlIG5vIHN1Y2ggbGluZXMuXG4gIGZ1bmN0aW9uIHZpc3VhbExpbmVDb250aW51ZWQobGluZSkge1xuICAgIHZhciBtZXJnZWQsIGxpbmVzO1xuICAgIHdoaWxlIChtZXJnZWQgPSBjb2xsYXBzZWRTcGFuQXRFbmQobGluZSkpIHtcbiAgICAgIGxpbmUgPSBtZXJnZWQuZmluZCgxLCB0cnVlKS5saW5lXG4gICAgICA7KGxpbmVzIHx8IChsaW5lcyA9IFtdKSkucHVzaChsaW5lKTtcbiAgICB9XG4gICAgcmV0dXJuIGxpbmVzXG4gIH1cblxuICAvLyBHZXQgdGhlIGxpbmUgbnVtYmVyIG9mIHRoZSBzdGFydCBvZiB0aGUgdmlzdWFsIGxpbmUgdGhhdCB0aGVcbiAgLy8gZ2l2ZW4gbGluZSBudW1iZXIgaXMgcGFydCBvZi5cbiAgZnVuY3Rpb24gdmlzdWFsTGluZU5vKGRvYywgbGluZU4pIHtcbiAgICB2YXIgbGluZSA9IGdldExpbmUoZG9jLCBsaW5lTiksIHZpcyA9IHZpc3VhbExpbmUobGluZSk7XG4gICAgaWYgKGxpbmUgPT0gdmlzKSB7IHJldHVybiBsaW5lTiB9XG4gICAgcmV0dXJuIGxpbmVObyh2aXMpXG4gIH1cblxuICAvLyBHZXQgdGhlIGxpbmUgbnVtYmVyIG9mIHRoZSBzdGFydCBvZiB0aGUgbmV4dCB2aXN1YWwgbGluZSBhZnRlclxuICAvLyB0aGUgZ2l2ZW4gbGluZS5cbiAgZnVuY3Rpb24gdmlzdWFsTGluZUVuZE5vKGRvYywgbGluZU4pIHtcbiAgICBpZiAobGluZU4gPiBkb2MubGFzdExpbmUoKSkgeyByZXR1cm4gbGluZU4gfVxuICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIGxpbmVOKSwgbWVyZ2VkO1xuICAgIGlmICghbGluZUlzSGlkZGVuKGRvYywgbGluZSkpIHsgcmV0dXJuIGxpbmVOIH1cbiAgICB3aGlsZSAobWVyZ2VkID0gY29sbGFwc2VkU3BhbkF0RW5kKGxpbmUpKVxuICAgICAgeyBsaW5lID0gbWVyZ2VkLmZpbmQoMSwgdHJ1ZSkubGluZTsgfVxuICAgIHJldHVybiBsaW5lTm8obGluZSkgKyAxXG4gIH1cblxuICAvLyBDb21wdXRlIHdoZXRoZXIgYSBsaW5lIGlzIGhpZGRlbi4gTGluZXMgY291bnQgYXMgaGlkZGVuIHdoZW4gdGhleVxuICAvLyBhcmUgcGFydCBvZiBhIHZpc3VhbCBsaW5lIHRoYXQgc3RhcnRzIHdpdGggYW5vdGhlciBsaW5lLCBvciB3aGVuXG4gIC8vIHRoZXkgYXJlIGVudGlyZWx5IGNvdmVyZWQgYnkgY29sbGFwc2VkLCBub24td2lkZ2V0IHNwYW4uXG4gIGZ1bmN0aW9uIGxpbmVJc0hpZGRlbihkb2MsIGxpbmUpIHtcbiAgICB2YXIgc3BzID0gc2F3Q29sbGFwc2VkU3BhbnMgJiYgbGluZS5tYXJrZWRTcGFucztcbiAgICBpZiAoc3BzKSB7IGZvciAodmFyIHNwID0gKHZvaWQgMCksIGkgPSAwOyBpIDwgc3BzLmxlbmd0aDsgKytpKSB7XG4gICAgICBzcCA9IHNwc1tpXTtcbiAgICAgIGlmICghc3AubWFya2VyLmNvbGxhcHNlZCkgeyBjb250aW51ZSB9XG4gICAgICBpZiAoc3AuZnJvbSA9PSBudWxsKSB7IHJldHVybiB0cnVlIH1cbiAgICAgIGlmIChzcC5tYXJrZXIud2lkZ2V0Tm9kZSkgeyBjb250aW51ZSB9XG4gICAgICBpZiAoc3AuZnJvbSA9PSAwICYmIHNwLm1hcmtlci5pbmNsdXNpdmVMZWZ0ICYmIGxpbmVJc0hpZGRlbklubmVyKGRvYywgbGluZSwgc3ApKVxuICAgICAgICB7IHJldHVybiB0cnVlIH1cbiAgICB9IH1cbiAgfVxuICBmdW5jdGlvbiBsaW5lSXNIaWRkZW5Jbm5lcihkb2MsIGxpbmUsIHNwYW4pIHtcbiAgICBpZiAoc3Bhbi50byA9PSBudWxsKSB7XG4gICAgICB2YXIgZW5kID0gc3Bhbi5tYXJrZXIuZmluZCgxLCB0cnVlKTtcbiAgICAgIHJldHVybiBsaW5lSXNIaWRkZW5Jbm5lcihkb2MsIGVuZC5saW5lLCBnZXRNYXJrZWRTcGFuRm9yKGVuZC5saW5lLm1hcmtlZFNwYW5zLCBzcGFuLm1hcmtlcikpXG4gICAgfVxuICAgIGlmIChzcGFuLm1hcmtlci5pbmNsdXNpdmVSaWdodCAmJiBzcGFuLnRvID09IGxpbmUudGV4dC5sZW5ndGgpXG4gICAgICB7IHJldHVybiB0cnVlIH1cbiAgICBmb3IgKHZhciBzcCA9ICh2b2lkIDApLCBpID0gMDsgaSA8IGxpbmUubWFya2VkU3BhbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHNwID0gbGluZS5tYXJrZWRTcGFuc1tpXTtcbiAgICAgIGlmIChzcC5tYXJrZXIuY29sbGFwc2VkICYmICFzcC5tYXJrZXIud2lkZ2V0Tm9kZSAmJiBzcC5mcm9tID09IHNwYW4udG8gJiZcbiAgICAgICAgICAoc3AudG8gPT0gbnVsbCB8fCBzcC50byAhPSBzcGFuLmZyb20pICYmXG4gICAgICAgICAgKHNwLm1hcmtlci5pbmNsdXNpdmVMZWZ0IHx8IHNwYW4ubWFya2VyLmluY2x1c2l2ZVJpZ2h0KSAmJlxuICAgICAgICAgIGxpbmVJc0hpZGRlbklubmVyKGRvYywgbGluZSwgc3ApKSB7IHJldHVybiB0cnVlIH1cbiAgICB9XG4gIH1cblxuICAvLyBGaW5kIHRoZSBoZWlnaHQgYWJvdmUgdGhlIGdpdmVuIGxpbmUuXG4gIGZ1bmN0aW9uIGhlaWdodEF0TGluZShsaW5lT2JqKSB7XG4gICAgbGluZU9iaiA9IHZpc3VhbExpbmUobGluZU9iaik7XG5cbiAgICB2YXIgaCA9IDAsIGNodW5rID0gbGluZU9iai5wYXJlbnQ7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaHVuay5saW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGxpbmUgPSBjaHVuay5saW5lc1tpXTtcbiAgICAgIGlmIChsaW5lID09IGxpbmVPYmopIHsgYnJlYWsgfVxuICAgICAgZWxzZSB7IGggKz0gbGluZS5oZWlnaHQ7IH1cbiAgICB9XG4gICAgZm9yICh2YXIgcCA9IGNodW5rLnBhcmVudDsgcDsgY2h1bmsgPSBwLCBwID0gY2h1bmsucGFyZW50KSB7XG4gICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBwLmNoaWxkcmVuLmxlbmd0aDsgKytpJDEpIHtcbiAgICAgICAgdmFyIGN1ciA9IHAuY2hpbGRyZW5baSQxXTtcbiAgICAgICAgaWYgKGN1ciA9PSBjaHVuaykgeyBicmVhayB9XG4gICAgICAgIGVsc2UgeyBoICs9IGN1ci5oZWlnaHQ7IH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGhcbiAgfVxuXG4gIC8vIENvbXB1dGUgdGhlIGNoYXJhY3RlciBsZW5ndGggb2YgYSBsaW5lLCB0YWtpbmcgaW50byBhY2NvdW50XG4gIC8vIGNvbGxhcHNlZCByYW5nZXMgKHNlZSBtYXJrVGV4dCkgdGhhdCBtaWdodCBoaWRlIHBhcnRzLCBhbmQgam9pblxuICAvLyBvdGhlciBsaW5lcyBvbnRvIGl0LlxuICBmdW5jdGlvbiBsaW5lTGVuZ3RoKGxpbmUpIHtcbiAgICBpZiAobGluZS5oZWlnaHQgPT0gMCkgeyByZXR1cm4gMCB9XG4gICAgdmFyIGxlbiA9IGxpbmUudGV4dC5sZW5ndGgsIG1lcmdlZCwgY3VyID0gbGluZTtcbiAgICB3aGlsZSAobWVyZ2VkID0gY29sbGFwc2VkU3BhbkF0U3RhcnQoY3VyKSkge1xuICAgICAgdmFyIGZvdW5kID0gbWVyZ2VkLmZpbmQoMCwgdHJ1ZSk7XG4gICAgICBjdXIgPSBmb3VuZC5mcm9tLmxpbmU7XG4gICAgICBsZW4gKz0gZm91bmQuZnJvbS5jaCAtIGZvdW5kLnRvLmNoO1xuICAgIH1cbiAgICBjdXIgPSBsaW5lO1xuICAgIHdoaWxlIChtZXJnZWQgPSBjb2xsYXBzZWRTcGFuQXRFbmQoY3VyKSkge1xuICAgICAgdmFyIGZvdW5kJDEgPSBtZXJnZWQuZmluZCgwLCB0cnVlKTtcbiAgICAgIGxlbiAtPSBjdXIudGV4dC5sZW5ndGggLSBmb3VuZCQxLmZyb20uY2g7XG4gICAgICBjdXIgPSBmb3VuZCQxLnRvLmxpbmU7XG4gICAgICBsZW4gKz0gY3VyLnRleHQubGVuZ3RoIC0gZm91bmQkMS50by5jaDtcbiAgICB9XG4gICAgcmV0dXJuIGxlblxuICB9XG5cbiAgLy8gRmluZCB0aGUgbG9uZ2VzdCBsaW5lIGluIHRoZSBkb2N1bWVudC5cbiAgZnVuY3Rpb24gZmluZE1heExpbmUoY20pIHtcbiAgICB2YXIgZCA9IGNtLmRpc3BsYXksIGRvYyA9IGNtLmRvYztcbiAgICBkLm1heExpbmUgPSBnZXRMaW5lKGRvYywgZG9jLmZpcnN0KTtcbiAgICBkLm1heExpbmVMZW5ndGggPSBsaW5lTGVuZ3RoKGQubWF4TGluZSk7XG4gICAgZC5tYXhMaW5lQ2hhbmdlZCA9IHRydWU7XG4gICAgZG9jLml0ZXIoZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgIHZhciBsZW4gPSBsaW5lTGVuZ3RoKGxpbmUpO1xuICAgICAgaWYgKGxlbiA+IGQubWF4TGluZUxlbmd0aCkge1xuICAgICAgICBkLm1heExpbmVMZW5ndGggPSBsZW47XG4gICAgICAgIGQubWF4TGluZSA9IGxpbmU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyBMSU5FIERBVEEgU1RSVUNUVVJFXG5cbiAgLy8gTGluZSBvYmplY3RzLiBUaGVzZSBob2xkIHN0YXRlIHJlbGF0ZWQgdG8gYSBsaW5lLCBpbmNsdWRpbmdcbiAgLy8gaGlnaGxpZ2h0aW5nIGluZm8gKHRoZSBzdHlsZXMgYXJyYXkpLlxuICB2YXIgTGluZSA9IGZ1bmN0aW9uKHRleHQsIG1hcmtlZFNwYW5zLCBlc3RpbWF0ZUhlaWdodCkge1xuICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgYXR0YWNoTWFya2VkU3BhbnModGhpcywgbWFya2VkU3BhbnMpO1xuICAgIHRoaXMuaGVpZ2h0ID0gZXN0aW1hdGVIZWlnaHQgPyBlc3RpbWF0ZUhlaWdodCh0aGlzKSA6IDE7XG4gIH07XG5cbiAgTGluZS5wcm90b3R5cGUubGluZU5vID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbGluZU5vKHRoaXMpIH07XG4gIGV2ZW50TWl4aW4oTGluZSk7XG5cbiAgLy8gQ2hhbmdlIHRoZSBjb250ZW50ICh0ZXh0LCBtYXJrZXJzKSBvZiBhIGxpbmUuIEF1dG9tYXRpY2FsbHlcbiAgLy8gaW52YWxpZGF0ZXMgY2FjaGVkIGluZm9ybWF0aW9uIGFuZCB0cmllcyB0byByZS1lc3RpbWF0ZSB0aGVcbiAgLy8gbGluZSdzIGhlaWdodC5cbiAgZnVuY3Rpb24gdXBkYXRlTGluZShsaW5lLCB0ZXh0LCBtYXJrZWRTcGFucywgZXN0aW1hdGVIZWlnaHQpIHtcbiAgICBsaW5lLnRleHQgPSB0ZXh0O1xuICAgIGlmIChsaW5lLnN0YXRlQWZ0ZXIpIHsgbGluZS5zdGF0ZUFmdGVyID0gbnVsbDsgfVxuICAgIGlmIChsaW5lLnN0eWxlcykgeyBsaW5lLnN0eWxlcyA9IG51bGw7IH1cbiAgICBpZiAobGluZS5vcmRlciAhPSBudWxsKSB7IGxpbmUub3JkZXIgPSBudWxsOyB9XG4gICAgZGV0YWNoTWFya2VkU3BhbnMobGluZSk7XG4gICAgYXR0YWNoTWFya2VkU3BhbnMobGluZSwgbWFya2VkU3BhbnMpO1xuICAgIHZhciBlc3RIZWlnaHQgPSBlc3RpbWF0ZUhlaWdodCA/IGVzdGltYXRlSGVpZ2h0KGxpbmUpIDogMTtcbiAgICBpZiAoZXN0SGVpZ2h0ICE9IGxpbmUuaGVpZ2h0KSB7IHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgZXN0SGVpZ2h0KTsgfVxuICB9XG5cbiAgLy8gRGV0YWNoIGEgbGluZSBmcm9tIHRoZSBkb2N1bWVudCB0cmVlIGFuZCBpdHMgbWFya2Vycy5cbiAgZnVuY3Rpb24gY2xlYW5VcExpbmUobGluZSkge1xuICAgIGxpbmUucGFyZW50ID0gbnVsbDtcbiAgICBkZXRhY2hNYXJrZWRTcGFucyhsaW5lKTtcbiAgfVxuXG4gIC8vIENvbnZlcnQgYSBzdHlsZSBhcyByZXR1cm5lZCBieSBhIG1vZGUgKGVpdGhlciBudWxsLCBvciBhIHN0cmluZ1xuICAvLyBjb250YWluaW5nIG9uZSBvciBtb3JlIHN0eWxlcykgdG8gYSBDU1Mgc3R5bGUuIFRoaXMgaXMgY2FjaGVkLFxuICAvLyBhbmQgYWxzbyBsb29rcyBmb3IgbGluZS13aWRlIHN0eWxlcy5cbiAgdmFyIHN0eWxlVG9DbGFzc0NhY2hlID0ge30sIHN0eWxlVG9DbGFzc0NhY2hlV2l0aE1vZGUgPSB7fTtcbiAgZnVuY3Rpb24gaW50ZXJwcmV0VG9rZW5TdHlsZShzdHlsZSwgb3B0aW9ucykge1xuICAgIGlmICghc3R5bGUgfHwgL15cXHMqJC8udGVzdChzdHlsZSkpIHsgcmV0dXJuIG51bGwgfVxuICAgIHZhciBjYWNoZSA9IG9wdGlvbnMuYWRkTW9kZUNsYXNzID8gc3R5bGVUb0NsYXNzQ2FjaGVXaXRoTW9kZSA6IHN0eWxlVG9DbGFzc0NhY2hlO1xuICAgIHJldHVybiBjYWNoZVtzdHlsZV0gfHxcbiAgICAgIChjYWNoZVtzdHlsZV0gPSBzdHlsZS5yZXBsYWNlKC9cXFMrL2csIFwiY20tJCZcIikpXG4gIH1cblxuICAvLyBSZW5kZXIgdGhlIERPTSByZXByZXNlbnRhdGlvbiBvZiB0aGUgdGV4dCBvZiBhIGxpbmUuIEFsc28gYnVpbGRzXG4gIC8vIHVwIGEgJ2xpbmUgbWFwJywgd2hpY2ggcG9pbnRzIGF0IHRoZSBET00gbm9kZXMgdGhhdCByZXByZXNlbnRcbiAgLy8gc3BlY2lmaWMgc3RyZXRjaGVzIG9mIHRleHQsIGFuZCBpcyB1c2VkIGJ5IHRoZSBtZWFzdXJpbmcgY29kZS5cbiAgLy8gVGhlIHJldHVybmVkIG9iamVjdCBjb250YWlucyB0aGUgRE9NIG5vZGUsIHRoaXMgbWFwLCBhbmRcbiAgLy8gaW5mb3JtYXRpb24gYWJvdXQgbGluZS13aWRlIHN0eWxlcyB0aGF0IHdlcmUgc2V0IGJ5IHRoZSBtb2RlLlxuICBmdW5jdGlvbiBidWlsZExpbmVDb250ZW50KGNtLCBsaW5lVmlldykge1xuICAgIC8vIFRoZSBwYWRkaW5nLXJpZ2h0IGZvcmNlcyB0aGUgZWxlbWVudCB0byBoYXZlIGEgJ2JvcmRlcicsIHdoaWNoXG4gICAgLy8gaXMgbmVlZGVkIG9uIFdlYmtpdCB0byBiZSBhYmxlIHRvIGdldCBsaW5lLWxldmVsIGJvdW5kaW5nXG4gICAgLy8gcmVjdGFuZ2xlcyBmb3IgaXQgKGluIG1lYXN1cmVDaGFyKS5cbiAgICB2YXIgY29udGVudCA9IGVsdFAoXCJzcGFuXCIsIG51bGwsIG51bGwsIHdlYmtpdCA/IFwicGFkZGluZy1yaWdodDogLjFweFwiIDogbnVsbCk7XG4gICAgdmFyIGJ1aWxkZXIgPSB7cHJlOiBlbHRQKFwicHJlXCIsIFtjb250ZW50XSwgXCJDb2RlTWlycm9yLWxpbmVcIiksIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgY29sOiAwLCBwb3M6IDAsIGNtOiBjbSxcbiAgICAgICAgICAgICAgICAgICB0cmFpbGluZ1NwYWNlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICBzcGxpdFNwYWNlczogY20uZ2V0T3B0aW9uKFwibGluZVdyYXBwaW5nXCIpfTtcbiAgICBsaW5lVmlldy5tZWFzdXJlID0ge307XG5cbiAgICAvLyBJdGVyYXRlIG92ZXIgdGhlIGxvZ2ljYWwgbGluZXMgdGhhdCBtYWtlIHVwIHRoaXMgdmlzdWFsIGxpbmUuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gKGxpbmVWaWV3LnJlc3QgPyBsaW5lVmlldy5yZXN0Lmxlbmd0aCA6IDApOyBpKyspIHtcbiAgICAgIHZhciBsaW5lID0gaSA/IGxpbmVWaWV3LnJlc3RbaSAtIDFdIDogbGluZVZpZXcubGluZSwgb3JkZXIgPSAodm9pZCAwKTtcbiAgICAgIGJ1aWxkZXIucG9zID0gMDtcbiAgICAgIGJ1aWxkZXIuYWRkVG9rZW4gPSBidWlsZFRva2VuO1xuICAgICAgLy8gT3B0aW9uYWxseSB3aXJlIGluIHNvbWUgaGFja3MgaW50byB0aGUgdG9rZW4tcmVuZGVyaW5nXG4gICAgICAvLyBhbGdvcml0aG0sIHRvIGRlYWwgd2l0aCBicm93c2VyIHF1aXJrcy5cbiAgICAgIGlmIChoYXNCYWRCaWRpUmVjdHMoY20uZGlzcGxheS5tZWFzdXJlKSAmJiAob3JkZXIgPSBnZXRPcmRlcihsaW5lLCBjbS5kb2MuZGlyZWN0aW9uKSkpXG4gICAgICAgIHsgYnVpbGRlci5hZGRUb2tlbiA9IGJ1aWxkVG9rZW5CYWRCaWRpKGJ1aWxkZXIuYWRkVG9rZW4sIG9yZGVyKTsgfVxuICAgICAgYnVpbGRlci5tYXAgPSBbXTtcbiAgICAgIHZhciBhbGxvd0Zyb250aWVyVXBkYXRlID0gbGluZVZpZXcgIT0gY20uZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkICYmIGxpbmVObyhsaW5lKTtcbiAgICAgIGluc2VydExpbmVDb250ZW50KGxpbmUsIGJ1aWxkZXIsIGdldExpbmVTdHlsZXMoY20sIGxpbmUsIGFsbG93RnJvbnRpZXJVcGRhdGUpKTtcbiAgICAgIGlmIChsaW5lLnN0eWxlQ2xhc3Nlcykge1xuICAgICAgICBpZiAobGluZS5zdHlsZUNsYXNzZXMuYmdDbGFzcylcbiAgICAgICAgICB7IGJ1aWxkZXIuYmdDbGFzcyA9IGpvaW5DbGFzc2VzKGxpbmUuc3R5bGVDbGFzc2VzLmJnQ2xhc3MsIGJ1aWxkZXIuYmdDbGFzcyB8fCBcIlwiKTsgfVxuICAgICAgICBpZiAobGluZS5zdHlsZUNsYXNzZXMudGV4dENsYXNzKVxuICAgICAgICAgIHsgYnVpbGRlci50ZXh0Q2xhc3MgPSBqb2luQ2xhc3NlcyhsaW5lLnN0eWxlQ2xhc3Nlcy50ZXh0Q2xhc3MsIGJ1aWxkZXIudGV4dENsYXNzIHx8IFwiXCIpOyB9XG4gICAgICB9XG5cbiAgICAgIC8vIEVuc3VyZSBhdCBsZWFzdCBhIHNpbmdsZSBub2RlIGlzIHByZXNlbnQsIGZvciBtZWFzdXJpbmcuXG4gICAgICBpZiAoYnVpbGRlci5tYXAubGVuZ3RoID09IDApXG4gICAgICAgIHsgYnVpbGRlci5tYXAucHVzaCgwLCAwLCBidWlsZGVyLmNvbnRlbnQuYXBwZW5kQ2hpbGQoemVyb1dpZHRoRWxlbWVudChjbS5kaXNwbGF5Lm1lYXN1cmUpKSk7IH1cblxuICAgICAgLy8gU3RvcmUgdGhlIG1hcCBhbmQgYSBjYWNoZSBvYmplY3QgZm9yIHRoZSBjdXJyZW50IGxvZ2ljYWwgbGluZVxuICAgICAgaWYgKGkgPT0gMCkge1xuICAgICAgICBsaW5lVmlldy5tZWFzdXJlLm1hcCA9IGJ1aWxkZXIubWFwO1xuICAgICAgICBsaW5lVmlldy5tZWFzdXJlLmNhY2hlID0ge307XG4gICAgICB9IGVsc2Uge1xuICAobGluZVZpZXcubWVhc3VyZS5tYXBzIHx8IChsaW5lVmlldy5tZWFzdXJlLm1hcHMgPSBbXSkpLnB1c2goYnVpbGRlci5tYXApXG4gICAgICAgIDsobGluZVZpZXcubWVhc3VyZS5jYWNoZXMgfHwgKGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGVzID0gW10pKS5wdXNoKHt9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZWUgaXNzdWUgIzI5MDFcbiAgICBpZiAod2Via2l0KSB7XG4gICAgICB2YXIgbGFzdCA9IGJ1aWxkZXIuY29udGVudC5sYXN0Q2hpbGQ7XG4gICAgICBpZiAoL1xcYmNtLXRhYlxcYi8udGVzdChsYXN0LmNsYXNzTmFtZSkgfHwgKGxhc3QucXVlcnlTZWxlY3RvciAmJiBsYXN0LnF1ZXJ5U2VsZWN0b3IoXCIuY20tdGFiXCIpKSlcbiAgICAgICAgeyBidWlsZGVyLmNvbnRlbnQuY2xhc3NOYW1lID0gXCJjbS10YWItd3JhcC1oYWNrXCI7IH1cbiAgICB9XG5cbiAgICBzaWduYWwoY20sIFwicmVuZGVyTGluZVwiLCBjbSwgbGluZVZpZXcubGluZSwgYnVpbGRlci5wcmUpO1xuICAgIGlmIChidWlsZGVyLnByZS5jbGFzc05hbWUpXG4gICAgICB7IGJ1aWxkZXIudGV4dENsYXNzID0gam9pbkNsYXNzZXMoYnVpbGRlci5wcmUuY2xhc3NOYW1lLCBidWlsZGVyLnRleHRDbGFzcyB8fCBcIlwiKTsgfVxuXG4gICAgcmV0dXJuIGJ1aWxkZXJcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlZmF1bHRTcGVjaWFsQ2hhclBsYWNlaG9sZGVyKGNoKSB7XG4gICAgdmFyIHRva2VuID0gZWx0KFwic3BhblwiLCBcIlxcdTIwMjJcIiwgXCJjbS1pbnZhbGlkY2hhclwiKTtcbiAgICB0b2tlbi50aXRsZSA9IFwiXFxcXHVcIiArIGNoLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpO1xuICAgIHRva2VuLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgdG9rZW4udGl0bGUpO1xuICAgIHJldHVybiB0b2tlblxuICB9XG5cbiAgLy8gQnVpbGQgdXAgdGhlIERPTSByZXByZXNlbnRhdGlvbiBmb3IgYSBzaW5nbGUgdG9rZW4sIGFuZCBhZGQgaXQgdG9cbiAgLy8gdGhlIGxpbmUgbWFwLiBUYWtlcyBjYXJlIHRvIHJlbmRlciBzcGVjaWFsIGNoYXJhY3RlcnMgc2VwYXJhdGVseS5cbiAgZnVuY3Rpb24gYnVpbGRUb2tlbihidWlsZGVyLCB0ZXh0LCBzdHlsZSwgc3RhcnRTdHlsZSwgZW5kU3R5bGUsIGNzcywgYXR0cmlidXRlcykge1xuICAgIGlmICghdGV4dCkgeyByZXR1cm4gfVxuICAgIHZhciBkaXNwbGF5VGV4dCA9IGJ1aWxkZXIuc3BsaXRTcGFjZXMgPyBzcGxpdFNwYWNlcyh0ZXh0LCBidWlsZGVyLnRyYWlsaW5nU3BhY2UpIDogdGV4dDtcbiAgICB2YXIgc3BlY2lhbCA9IGJ1aWxkZXIuY20uc3RhdGUuc3BlY2lhbENoYXJzLCBtdXN0V3JhcCA9IGZhbHNlO1xuICAgIHZhciBjb250ZW50O1xuICAgIGlmICghc3BlY2lhbC50ZXN0KHRleHQpKSB7XG4gICAgICBidWlsZGVyLmNvbCArPSB0ZXh0Lmxlbmd0aDtcbiAgICAgIGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShkaXNwbGF5VGV4dCk7XG4gICAgICBidWlsZGVyLm1hcC5wdXNoKGJ1aWxkZXIucG9zLCBidWlsZGVyLnBvcyArIHRleHQubGVuZ3RoLCBjb250ZW50KTtcbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOSkgeyBtdXN0V3JhcCA9IHRydWU7IH1cbiAgICAgIGJ1aWxkZXIucG9zICs9IHRleHQubGVuZ3RoO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgdmFyIHBvcyA9IDA7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBzcGVjaWFsLmxhc3RJbmRleCA9IHBvcztcbiAgICAgICAgdmFyIG0gPSBzcGVjaWFsLmV4ZWModGV4dCk7XG4gICAgICAgIHZhciBza2lwcGVkID0gbSA/IG0uaW5kZXggLSBwb3MgOiB0ZXh0Lmxlbmd0aCAtIHBvcztcbiAgICAgICAgaWYgKHNraXBwZWQpIHtcbiAgICAgICAgICB2YXIgdHh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZGlzcGxheVRleHQuc2xpY2UocG9zLCBwb3MgKyBza2lwcGVkKSk7XG4gICAgICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA5KSB7IGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWx0KFwic3BhblwiLCBbdHh0XSkpOyB9XG4gICAgICAgICAgZWxzZSB7IGNvbnRlbnQuYXBwZW5kQ2hpbGQodHh0KTsgfVxuICAgICAgICAgIGJ1aWxkZXIubWFwLnB1c2goYnVpbGRlci5wb3MsIGJ1aWxkZXIucG9zICsgc2tpcHBlZCwgdHh0KTtcbiAgICAgICAgICBidWlsZGVyLmNvbCArPSBza2lwcGVkO1xuICAgICAgICAgIGJ1aWxkZXIucG9zICs9IHNraXBwZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFtKSB7IGJyZWFrIH1cbiAgICAgICAgcG9zICs9IHNraXBwZWQgKyAxO1xuICAgICAgICB2YXIgdHh0JDEgPSAodm9pZCAwKTtcbiAgICAgICAgaWYgKG1bMF0gPT0gXCJcXHRcIikge1xuICAgICAgICAgIHZhciB0YWJTaXplID0gYnVpbGRlci5jbS5vcHRpb25zLnRhYlNpemUsIHRhYldpZHRoID0gdGFiU2l6ZSAtIGJ1aWxkZXIuY29sICUgdGFiU2l6ZTtcbiAgICAgICAgICB0eHQkMSA9IGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWx0KFwic3BhblwiLCBzcGFjZVN0cih0YWJXaWR0aCksIFwiY20tdGFiXCIpKTtcbiAgICAgICAgICB0eHQkMS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwicHJlc2VudGF0aW9uXCIpO1xuICAgICAgICAgIHR4dCQxLnNldEF0dHJpYnV0ZShcImNtLXRleHRcIiwgXCJcXHRcIik7XG4gICAgICAgICAgYnVpbGRlci5jb2wgKz0gdGFiV2lkdGg7XG4gICAgICAgIH0gZWxzZSBpZiAobVswXSA9PSBcIlxcclwiIHx8IG1bMF0gPT0gXCJcXG5cIikge1xuICAgICAgICAgIHR4dCQxID0gY29udGVudC5hcHBlbmRDaGlsZChlbHQoXCJzcGFuXCIsIG1bMF0gPT0gXCJcXHJcIiA/IFwiXFx1MjQwZFwiIDogXCJcXHUyNDI0XCIsIFwiY20taW52YWxpZGNoYXJcIikpO1xuICAgICAgICAgIHR4dCQxLnNldEF0dHJpYnV0ZShcImNtLXRleHRcIiwgbVswXSk7XG4gICAgICAgICAgYnVpbGRlci5jb2wgKz0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0eHQkMSA9IGJ1aWxkZXIuY20ub3B0aW9ucy5zcGVjaWFsQ2hhclBsYWNlaG9sZGVyKG1bMF0pO1xuICAgICAgICAgIHR4dCQxLnNldEF0dHJpYnV0ZShcImNtLXRleHRcIiwgbVswXSk7XG4gICAgICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA5KSB7IGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWx0KFwic3BhblwiLCBbdHh0JDFdKSk7IH1cbiAgICAgICAgICBlbHNlIHsgY29udGVudC5hcHBlbmRDaGlsZCh0eHQkMSk7IH1cbiAgICAgICAgICBidWlsZGVyLmNvbCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGJ1aWxkZXIubWFwLnB1c2goYnVpbGRlci5wb3MsIGJ1aWxkZXIucG9zICsgMSwgdHh0JDEpO1xuICAgICAgICBidWlsZGVyLnBvcysrO1xuICAgICAgfVxuICAgIH1cbiAgICBidWlsZGVyLnRyYWlsaW5nU3BhY2UgPSBkaXNwbGF5VGV4dC5jaGFyQ29kZUF0KHRleHQubGVuZ3RoIC0gMSkgPT0gMzI7XG4gICAgaWYgKHN0eWxlIHx8IHN0YXJ0U3R5bGUgfHwgZW5kU3R5bGUgfHwgbXVzdFdyYXAgfHwgY3NzKSB7XG4gICAgICB2YXIgZnVsbFN0eWxlID0gc3R5bGUgfHwgXCJcIjtcbiAgICAgIGlmIChzdGFydFN0eWxlKSB7IGZ1bGxTdHlsZSArPSBzdGFydFN0eWxlOyB9XG4gICAgICBpZiAoZW5kU3R5bGUpIHsgZnVsbFN0eWxlICs9IGVuZFN0eWxlOyB9XG4gICAgICB2YXIgdG9rZW4gPSBlbHQoXCJzcGFuXCIsIFtjb250ZW50XSwgZnVsbFN0eWxlLCBjc3MpO1xuICAgICAgaWYgKGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgZm9yICh2YXIgYXR0ciBpbiBhdHRyaWJ1dGVzKSB7IGlmIChhdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGF0dHIpICYmIGF0dHIgIT0gXCJzdHlsZVwiICYmIGF0dHIgIT0gXCJjbGFzc1wiKVxuICAgICAgICAgIHsgdG9rZW4uc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJpYnV0ZXNbYXR0cl0pOyB9IH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBidWlsZGVyLmNvbnRlbnQuYXBwZW5kQ2hpbGQodG9rZW4pXG4gICAgfVxuICAgIGJ1aWxkZXIuY29udGVudC5hcHBlbmRDaGlsZChjb250ZW50KTtcbiAgfVxuXG4gIC8vIENoYW5nZSBzb21lIHNwYWNlcyB0byBOQlNQIHRvIHByZXZlbnQgdGhlIGJyb3dzZXIgZnJvbSBjb2xsYXBzaW5nXG4gIC8vIHRyYWlsaW5nIHNwYWNlcyBhdCB0aGUgZW5kIG9mIGEgbGluZSB3aGVuIHJlbmRlcmluZyB0ZXh0IChpc3N1ZSAjMTM2MikuXG4gIGZ1bmN0aW9uIHNwbGl0U3BhY2VzKHRleHQsIHRyYWlsaW5nQmVmb3JlKSB7XG4gICAgaWYgKHRleHQubGVuZ3RoID4gMSAmJiAhLyAgLy50ZXN0KHRleHQpKSB7IHJldHVybiB0ZXh0IH1cbiAgICB2YXIgc3BhY2VCZWZvcmUgPSB0cmFpbGluZ0JlZm9yZSwgcmVzdWx0ID0gXCJcIjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRleHQubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjaCA9IHRleHQuY2hhckF0KGkpO1xuICAgICAgaWYgKGNoID09IFwiIFwiICYmIHNwYWNlQmVmb3JlICYmIChpID09IHRleHQubGVuZ3RoIC0gMSB8fCB0ZXh0LmNoYXJDb2RlQXQoaSArIDEpID09IDMyKSlcbiAgICAgICAgeyBjaCA9IFwiXFx1MDBhMFwiOyB9XG4gICAgICByZXN1bHQgKz0gY2g7XG4gICAgICBzcGFjZUJlZm9yZSA9IGNoID09IFwiIFwiO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICAvLyBXb3JrIGFyb3VuZCBub25zZW5zZSBkaW1lbnNpb25zIGJlaW5nIHJlcG9ydGVkIGZvciBzdHJldGNoZXMgb2ZcbiAgLy8gcmlnaHQtdG8tbGVmdCB0ZXh0LlxuICBmdW5jdGlvbiBidWlsZFRva2VuQmFkQmlkaShpbm5lciwgb3JkZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGJ1aWxkZXIsIHRleHQsIHN0eWxlLCBzdGFydFN0eWxlLCBlbmRTdHlsZSwgY3NzLCBhdHRyaWJ1dGVzKSB7XG4gICAgICBzdHlsZSA9IHN0eWxlID8gc3R5bGUgKyBcIiBjbS1mb3JjZS1ib3JkZXJcIiA6IFwiY20tZm9yY2UtYm9yZGVyXCI7XG4gICAgICB2YXIgc3RhcnQgPSBidWlsZGVyLnBvcywgZW5kID0gc3RhcnQgKyB0ZXh0Lmxlbmd0aDtcbiAgICAgIGZvciAoOzspIHtcbiAgICAgICAgLy8gRmluZCB0aGUgcGFydCB0aGF0IG92ZXJsYXBzIHdpdGggdGhlIHN0YXJ0IG9mIHRoaXMgdGV4dFxuICAgICAgICB2YXIgcGFydCA9ICh2b2lkIDApO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9yZGVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgcGFydCA9IG9yZGVyW2ldO1xuICAgICAgICAgIGlmIChwYXJ0LnRvID4gc3RhcnQgJiYgcGFydC5mcm9tIDw9IHN0YXJ0KSB7IGJyZWFrIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFydC50byA+PSBlbmQpIHsgcmV0dXJuIGlubmVyKGJ1aWxkZXIsIHRleHQsIHN0eWxlLCBzdGFydFN0eWxlLCBlbmRTdHlsZSwgY3NzLCBhdHRyaWJ1dGVzKSB9XG4gICAgICAgIGlubmVyKGJ1aWxkZXIsIHRleHQuc2xpY2UoMCwgcGFydC50byAtIHN0YXJ0KSwgc3R5bGUsIHN0YXJ0U3R5bGUsIG51bGwsIGNzcywgYXR0cmlidXRlcyk7XG4gICAgICAgIHN0YXJ0U3R5bGUgPSBudWxsO1xuICAgICAgICB0ZXh0ID0gdGV4dC5zbGljZShwYXJ0LnRvIC0gc3RhcnQpO1xuICAgICAgICBzdGFydCA9IHBhcnQudG87XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gYnVpbGRDb2xsYXBzZWRTcGFuKGJ1aWxkZXIsIHNpemUsIG1hcmtlciwgaWdub3JlV2lkZ2V0KSB7XG4gICAgdmFyIHdpZGdldCA9ICFpZ25vcmVXaWRnZXQgJiYgbWFya2VyLndpZGdldE5vZGU7XG4gICAgaWYgKHdpZGdldCkgeyBidWlsZGVyLm1hcC5wdXNoKGJ1aWxkZXIucG9zLCBidWlsZGVyLnBvcyArIHNpemUsIHdpZGdldCk7IH1cbiAgICBpZiAoIWlnbm9yZVdpZGdldCAmJiBidWlsZGVyLmNtLmRpc3BsYXkuaW5wdXQubmVlZHNDb250ZW50QXR0cmlidXRlKSB7XG4gICAgICBpZiAoIXdpZGdldClcbiAgICAgICAgeyB3aWRnZXQgPSBidWlsZGVyLmNvbnRlbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIikpOyB9XG4gICAgICB3aWRnZXQuc2V0QXR0cmlidXRlKFwiY20tbWFya2VyXCIsIG1hcmtlci5pZCk7XG4gICAgfVxuICAgIGlmICh3aWRnZXQpIHtcbiAgICAgIGJ1aWxkZXIuY20uZGlzcGxheS5pbnB1dC5zZXRVbmVkaXRhYmxlKHdpZGdldCk7XG4gICAgICBidWlsZGVyLmNvbnRlbnQuYXBwZW5kQ2hpbGQod2lkZ2V0KTtcbiAgICB9XG4gICAgYnVpbGRlci5wb3MgKz0gc2l6ZTtcbiAgICBidWlsZGVyLnRyYWlsaW5nU3BhY2UgPSBmYWxzZTtcbiAgfVxuXG4gIC8vIE91dHB1dHMgYSBudW1iZXIgb2Ygc3BhbnMgdG8gbWFrZSB1cCBhIGxpbmUsIHRha2luZyBoaWdobGlnaHRpbmdcbiAgLy8gYW5kIG1hcmtlZCB0ZXh0IGludG8gYWNjb3VudC5cbiAgZnVuY3Rpb24gaW5zZXJ0TGluZUNvbnRlbnQobGluZSwgYnVpbGRlciwgc3R5bGVzKSB7XG4gICAgdmFyIHNwYW5zID0gbGluZS5tYXJrZWRTcGFucywgYWxsVGV4dCA9IGxpbmUudGV4dCwgYXQgPSAwO1xuICAgIGlmICghc3BhbnMpIHtcbiAgICAgIGZvciAodmFyIGkkMSA9IDE7IGkkMSA8IHN0eWxlcy5sZW5ndGg7IGkkMSs9MilcbiAgICAgICAgeyBidWlsZGVyLmFkZFRva2VuKGJ1aWxkZXIsIGFsbFRleHQuc2xpY2UoYXQsIGF0ID0gc3R5bGVzW2kkMV0pLCBpbnRlcnByZXRUb2tlblN0eWxlKHN0eWxlc1tpJDErMV0sIGJ1aWxkZXIuY20ub3B0aW9ucykpOyB9XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB2YXIgbGVuID0gYWxsVGV4dC5sZW5ndGgsIHBvcyA9IDAsIGkgPSAxLCB0ZXh0ID0gXCJcIiwgc3R5bGUsIGNzcztcbiAgICB2YXIgbmV4dENoYW5nZSA9IDAsIHNwYW5TdHlsZSwgc3BhbkVuZFN0eWxlLCBzcGFuU3RhcnRTdHlsZSwgY29sbGFwc2VkLCBhdHRyaWJ1dGVzO1xuICAgIGZvciAoOzspIHtcbiAgICAgIGlmIChuZXh0Q2hhbmdlID09IHBvcykgeyAvLyBVcGRhdGUgY3VycmVudCBtYXJrZXIgc2V0XG4gICAgICAgIHNwYW5TdHlsZSA9IHNwYW5FbmRTdHlsZSA9IHNwYW5TdGFydFN0eWxlID0gY3NzID0gXCJcIjtcbiAgICAgICAgYXR0cmlidXRlcyA9IG51bGw7XG4gICAgICAgIGNvbGxhcHNlZCA9IG51bGw7IG5leHRDaGFuZ2UgPSBJbmZpbml0eTtcbiAgICAgICAgdmFyIGZvdW5kQm9va21hcmtzID0gW10sIGVuZFN0eWxlcyA9ICh2b2lkIDApO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNwYW5zLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgdmFyIHNwID0gc3BhbnNbal0sIG0gPSBzcC5tYXJrZXI7XG4gICAgICAgICAgaWYgKG0udHlwZSA9PSBcImJvb2ttYXJrXCIgJiYgc3AuZnJvbSA9PSBwb3MgJiYgbS53aWRnZXROb2RlKSB7XG4gICAgICAgICAgICBmb3VuZEJvb2ttYXJrcy5wdXNoKG0pO1xuICAgICAgICAgIH0gZWxzZSBpZiAoc3AuZnJvbSA8PSBwb3MgJiYgKHNwLnRvID09IG51bGwgfHwgc3AudG8gPiBwb3MgfHwgbS5jb2xsYXBzZWQgJiYgc3AudG8gPT0gcG9zICYmIHNwLmZyb20gPT0gcG9zKSkge1xuICAgICAgICAgICAgaWYgKHNwLnRvICE9IG51bGwgJiYgc3AudG8gIT0gcG9zICYmIG5leHRDaGFuZ2UgPiBzcC50bykge1xuICAgICAgICAgICAgICBuZXh0Q2hhbmdlID0gc3AudG87XG4gICAgICAgICAgICAgIHNwYW5FbmRTdHlsZSA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobS5jbGFzc05hbWUpIHsgc3BhblN0eWxlICs9IFwiIFwiICsgbS5jbGFzc05hbWU7IH1cbiAgICAgICAgICAgIGlmIChtLmNzcykgeyBjc3MgPSAoY3NzID8gY3NzICsgXCI7XCIgOiBcIlwiKSArIG0uY3NzOyB9XG4gICAgICAgICAgICBpZiAobS5zdGFydFN0eWxlICYmIHNwLmZyb20gPT0gcG9zKSB7IHNwYW5TdGFydFN0eWxlICs9IFwiIFwiICsgbS5zdGFydFN0eWxlOyB9XG4gICAgICAgICAgICBpZiAobS5lbmRTdHlsZSAmJiBzcC50byA9PSBuZXh0Q2hhbmdlKSB7IChlbmRTdHlsZXMgfHwgKGVuZFN0eWxlcyA9IFtdKSkucHVzaChtLmVuZFN0eWxlLCBzcC50byk7IH1cbiAgICAgICAgICAgIC8vIHN1cHBvcnQgZm9yIHRoZSBvbGQgdGl0bGUgcHJvcGVydHlcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9jb2RlbWlycm9yL0NvZGVNaXJyb3IvcHVsbC81NjczXG4gICAgICAgICAgICBpZiAobS50aXRsZSkgeyAoYXR0cmlidXRlcyB8fCAoYXR0cmlidXRlcyA9IHt9KSkudGl0bGUgPSBtLnRpdGxlOyB9XG4gICAgICAgICAgICBpZiAobS5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGF0dHIgaW4gbS5hdHRyaWJ1dGVzKVxuICAgICAgICAgICAgICAgIHsgKGF0dHJpYnV0ZXMgfHwgKGF0dHJpYnV0ZXMgPSB7fSkpW2F0dHJdID0gbS5hdHRyaWJ1dGVzW2F0dHJdOyB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobS5jb2xsYXBzZWQgJiYgKCFjb2xsYXBzZWQgfHwgY29tcGFyZUNvbGxhcHNlZE1hcmtlcnMoY29sbGFwc2VkLm1hcmtlciwgbSkgPCAwKSlcbiAgICAgICAgICAgICAgeyBjb2xsYXBzZWQgPSBzcDsgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoc3AuZnJvbSA+IHBvcyAmJiBuZXh0Q2hhbmdlID4gc3AuZnJvbSkge1xuICAgICAgICAgICAgbmV4dENoYW5nZSA9IHNwLmZyb207XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlbmRTdHlsZXMpIHsgZm9yICh2YXIgaiQxID0gMDsgaiQxIDwgZW5kU3R5bGVzLmxlbmd0aDsgaiQxICs9IDIpXG4gICAgICAgICAgeyBpZiAoZW5kU3R5bGVzW2okMSArIDFdID09IG5leHRDaGFuZ2UpIHsgc3BhbkVuZFN0eWxlICs9IFwiIFwiICsgZW5kU3R5bGVzW2okMV07IH0gfSB9XG5cbiAgICAgICAgaWYgKCFjb2xsYXBzZWQgfHwgY29sbGFwc2VkLmZyb20gPT0gcG9zKSB7IGZvciAodmFyIGokMiA9IDA7IGokMiA8IGZvdW5kQm9va21hcmtzLmxlbmd0aDsgKytqJDIpXG4gICAgICAgICAgeyBidWlsZENvbGxhcHNlZFNwYW4oYnVpbGRlciwgMCwgZm91bmRCb29rbWFya3NbaiQyXSk7IH0gfVxuICAgICAgICBpZiAoY29sbGFwc2VkICYmIChjb2xsYXBzZWQuZnJvbSB8fCAwKSA9PSBwb3MpIHtcbiAgICAgICAgICBidWlsZENvbGxhcHNlZFNwYW4oYnVpbGRlciwgKGNvbGxhcHNlZC50byA9PSBudWxsID8gbGVuICsgMSA6IGNvbGxhcHNlZC50bykgLSBwb3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxhcHNlZC5tYXJrZXIsIGNvbGxhcHNlZC5mcm9tID09IG51bGwpO1xuICAgICAgICAgIGlmIChjb2xsYXBzZWQudG8gPT0gbnVsbCkgeyByZXR1cm4gfVxuICAgICAgICAgIGlmIChjb2xsYXBzZWQudG8gPT0gcG9zKSB7IGNvbGxhcHNlZCA9IGZhbHNlOyB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwb3MgPj0gbGVuKSB7IGJyZWFrIH1cblxuICAgICAgdmFyIHVwdG8gPSBNYXRoLm1pbihsZW4sIG5leHRDaGFuZ2UpO1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgaWYgKHRleHQpIHtcbiAgICAgICAgICB2YXIgZW5kID0gcG9zICsgdGV4dC5sZW5ndGg7XG4gICAgICAgICAgaWYgKCFjb2xsYXBzZWQpIHtcbiAgICAgICAgICAgIHZhciB0b2tlblRleHQgPSBlbmQgPiB1cHRvID8gdGV4dC5zbGljZSgwLCB1cHRvIC0gcG9zKSA6IHRleHQ7XG4gICAgICAgICAgICBidWlsZGVyLmFkZFRva2VuKGJ1aWxkZXIsIHRva2VuVGV4dCwgc3R5bGUgPyBzdHlsZSArIHNwYW5TdHlsZSA6IHNwYW5TdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhblN0YXJ0U3R5bGUsIHBvcyArIHRva2VuVGV4dC5sZW5ndGggPT0gbmV4dENoYW5nZSA/IHNwYW5FbmRTdHlsZSA6IFwiXCIsIGNzcywgYXR0cmlidXRlcyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChlbmQgPj0gdXB0bykge3RleHQgPSB0ZXh0LnNsaWNlKHVwdG8gLSBwb3MpOyBwb3MgPSB1cHRvOyBicmVha31cbiAgICAgICAgICBwb3MgPSBlbmQ7XG4gICAgICAgICAgc3BhblN0YXJ0U3R5bGUgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHRleHQgPSBhbGxUZXh0LnNsaWNlKGF0LCBhdCA9IHN0eWxlc1tpKytdKTtcbiAgICAgICAgc3R5bGUgPSBpbnRlcnByZXRUb2tlblN0eWxlKHN0eWxlc1tpKytdLCBidWlsZGVyLmNtLm9wdGlvbnMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG5cbiAgLy8gVGhlc2Ugb2JqZWN0cyBhcmUgdXNlZCB0byByZXByZXNlbnQgdGhlIHZpc2libGUgKGN1cnJlbnRseSBkcmF3bilcbiAgLy8gcGFydCBvZiB0aGUgZG9jdW1lbnQuIEEgTGluZVZpZXcgbWF5IGNvcnJlc3BvbmQgdG8gbXVsdGlwbGVcbiAgLy8gbG9naWNhbCBsaW5lcywgaWYgdGhvc2UgYXJlIGNvbm5lY3RlZCBieSBjb2xsYXBzZWQgcmFuZ2VzLlxuICBmdW5jdGlvbiBMaW5lVmlldyhkb2MsIGxpbmUsIGxpbmVOKSB7XG4gICAgLy8gVGhlIHN0YXJ0aW5nIGxpbmVcbiAgICB0aGlzLmxpbmUgPSBsaW5lO1xuICAgIC8vIENvbnRpbnVpbmcgbGluZXMsIGlmIGFueVxuICAgIHRoaXMucmVzdCA9IHZpc3VhbExpbmVDb250aW51ZWQobGluZSk7XG4gICAgLy8gTnVtYmVyIG9mIGxvZ2ljYWwgbGluZXMgaW4gdGhpcyB2aXN1YWwgbGluZVxuICAgIHRoaXMuc2l6ZSA9IHRoaXMucmVzdCA/IGxpbmVObyhsc3QodGhpcy5yZXN0KSkgLSBsaW5lTiArIDEgOiAxO1xuICAgIHRoaXMubm9kZSA9IHRoaXMudGV4dCA9IG51bGw7XG4gICAgdGhpcy5oaWRkZW4gPSBsaW5lSXNIaWRkZW4oZG9jLCBsaW5lKTtcbiAgfVxuXG4gIC8vIENyZWF0ZSBhIHJhbmdlIG9mIExpbmVWaWV3IG9iamVjdHMgZm9yIHRoZSBnaXZlbiBsaW5lcy5cbiAgZnVuY3Rpb24gYnVpbGRWaWV3QXJyYXkoY20sIGZyb20sIHRvKSB7XG4gICAgdmFyIGFycmF5ID0gW10sIG5leHRQb3M7XG4gICAgZm9yICh2YXIgcG9zID0gZnJvbTsgcG9zIDwgdG87IHBvcyA9IG5leHRQb3MpIHtcbiAgICAgIHZhciB2aWV3ID0gbmV3IExpbmVWaWV3KGNtLmRvYywgZ2V0TGluZShjbS5kb2MsIHBvcyksIHBvcyk7XG4gICAgICBuZXh0UG9zID0gcG9zICsgdmlldy5zaXplO1xuICAgICAgYXJyYXkucHVzaCh2aWV3KTtcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5XG4gIH1cblxuICB2YXIgb3BlcmF0aW9uR3JvdXAgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIHB1c2hPcGVyYXRpb24ob3ApIHtcbiAgICBpZiAob3BlcmF0aW9uR3JvdXApIHtcbiAgICAgIG9wZXJhdGlvbkdyb3VwLm9wcy5wdXNoKG9wKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3Aub3duc0dyb3VwID0gb3BlcmF0aW9uR3JvdXAgPSB7XG4gICAgICAgIG9wczogW29wXSxcbiAgICAgICAgZGVsYXllZENhbGxiYWNrczogW11cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZmlyZUNhbGxiYWNrc0Zvck9wcyhncm91cCkge1xuICAgIC8vIENhbGxzIGRlbGF5ZWQgY2FsbGJhY2tzIGFuZCBjdXJzb3JBY3Rpdml0eSBoYW5kbGVycyB1bnRpbCBub1xuICAgIC8vIG5ldyBvbmVzIGFwcGVhclxuICAgIHZhciBjYWxsYmFja3MgPSBncm91cC5kZWxheWVkQ2FsbGJhY2tzLCBpID0gMDtcbiAgICBkbyB7XG4gICAgICBmb3IgKDsgaSA8IGNhbGxiYWNrcy5sZW5ndGg7IGkrKylcbiAgICAgICAgeyBjYWxsYmFja3NbaV0uY2FsbChudWxsKTsgfVxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBncm91cC5vcHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgdmFyIG9wID0gZ3JvdXAub3BzW2pdO1xuICAgICAgICBpZiAob3AuY3Vyc29yQWN0aXZpdHlIYW5kbGVycylcbiAgICAgICAgICB7IHdoaWxlIChvcC5jdXJzb3JBY3Rpdml0eUNhbGxlZCA8IG9wLmN1cnNvckFjdGl2aXR5SGFuZGxlcnMubGVuZ3RoKVxuICAgICAgICAgICAgeyBvcC5jdXJzb3JBY3Rpdml0eUhhbmRsZXJzW29wLmN1cnNvckFjdGl2aXR5Q2FsbGVkKytdLmNhbGwobnVsbCwgb3AuY20pOyB9IH1cbiAgICAgIH1cbiAgICB9IHdoaWxlIChpIDwgY2FsbGJhY2tzLmxlbmd0aClcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmlzaE9wZXJhdGlvbihvcCwgZW5kQ2IpIHtcbiAgICB2YXIgZ3JvdXAgPSBvcC5vd25zR3JvdXA7XG4gICAgaWYgKCFncm91cCkgeyByZXR1cm4gfVxuXG4gICAgdHJ5IHsgZmlyZUNhbGxiYWNrc0Zvck9wcyhncm91cCk7IH1cbiAgICBmaW5hbGx5IHtcbiAgICAgIG9wZXJhdGlvbkdyb3VwID0gbnVsbDtcbiAgICAgIGVuZENiKGdyb3VwKTtcbiAgICB9XG4gIH1cblxuICB2YXIgb3JwaGFuRGVsYXllZENhbGxiYWNrcyA9IG51bGw7XG5cbiAgLy8gT2Z0ZW4sIHdlIHdhbnQgdG8gc2lnbmFsIGV2ZW50cyBhdCBhIHBvaW50IHdoZXJlIHdlIGFyZSBpbiB0aGVcbiAgLy8gbWlkZGxlIG9mIHNvbWUgd29yaywgYnV0IGRvbid0IHdhbnQgdGhlIGhhbmRsZXIgdG8gc3RhcnQgY2FsbGluZ1xuICAvLyBvdGhlciBtZXRob2RzIG9uIHRoZSBlZGl0b3IsIHdoaWNoIG1pZ2h0IGJlIGluIGFuIGluY29uc2lzdGVudFxuICAvLyBzdGF0ZSBvciBzaW1wbHkgbm90IGV4cGVjdCBhbnkgb3RoZXIgZXZlbnRzIHRvIGhhcHBlbi5cbiAgLy8gc2lnbmFsTGF0ZXIgbG9va3Mgd2hldGhlciB0aGVyZSBhcmUgYW55IGhhbmRsZXJzLCBhbmQgc2NoZWR1bGVzXG4gIC8vIHRoZW0gdG8gYmUgZXhlY3V0ZWQgd2hlbiB0aGUgbGFzdCBvcGVyYXRpb24gZW5kcywgb3IsIGlmIG5vXG4gIC8vIG9wZXJhdGlvbiBpcyBhY3RpdmUsIHdoZW4gYSB0aW1lb3V0IGZpcmVzLlxuICBmdW5jdGlvbiBzaWduYWxMYXRlcihlbWl0dGVyLCB0eXBlIC8qLCB2YWx1ZXMuLi4qLykge1xuICAgIHZhciBhcnIgPSBnZXRIYW5kbGVycyhlbWl0dGVyLCB0eXBlKTtcbiAgICBpZiAoIWFyci5sZW5ndGgpIHsgcmV0dXJuIH1cbiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMiksIGxpc3Q7XG4gICAgaWYgKG9wZXJhdGlvbkdyb3VwKSB7XG4gICAgICBsaXN0ID0gb3BlcmF0aW9uR3JvdXAuZGVsYXllZENhbGxiYWNrcztcbiAgICB9IGVsc2UgaWYgKG9ycGhhbkRlbGF5ZWRDYWxsYmFja3MpIHtcbiAgICAgIGxpc3QgPSBvcnBoYW5EZWxheWVkQ2FsbGJhY2tzO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaXN0ID0gb3JwaGFuRGVsYXllZENhbGxiYWNrcyA9IFtdO1xuICAgICAgc2V0VGltZW91dChmaXJlT3JwaGFuRGVsYXllZCwgMCk7XG4gICAgfVxuICAgIHZhciBsb29wID0gZnVuY3Rpb24gKCBpICkge1xuICAgICAgbGlzdC5wdXNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFycltpXS5hcHBseShudWxsLCBhcmdzKTsgfSk7XG4gICAgfTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKVxuICAgICAgbG9vcCggaSApO1xuICB9XG5cbiAgZnVuY3Rpb24gZmlyZU9ycGhhbkRlbGF5ZWQoKSB7XG4gICAgdmFyIGRlbGF5ZWQgPSBvcnBoYW5EZWxheWVkQ2FsbGJhY2tzO1xuICAgIG9ycGhhbkRlbGF5ZWRDYWxsYmFja3MgPSBudWxsO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGVsYXllZC5sZW5ndGg7ICsraSkgeyBkZWxheWVkW2ldKCk7IH1cbiAgfVxuXG4gIC8vIFdoZW4gYW4gYXNwZWN0IG9mIGEgbGluZSBjaGFuZ2VzLCBhIHN0cmluZyBpcyBhZGRlZCB0b1xuICAvLyBsaW5lVmlldy5jaGFuZ2VzLiBUaGlzIHVwZGF0ZXMgdGhlIHJlbGV2YW50IHBhcnQgb2YgdGhlIGxpbmUnc1xuICAvLyBET00gc3RydWN0dXJlLlxuICBmdW5jdGlvbiB1cGRhdGVMaW5lRm9yQ2hhbmdlcyhjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKSB7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBsaW5lVmlldy5jaGFuZ2VzLmxlbmd0aDsgaisrKSB7XG4gICAgICB2YXIgdHlwZSA9IGxpbmVWaWV3LmNoYW5nZXNbal07XG4gICAgICBpZiAodHlwZSA9PSBcInRleHRcIikgeyB1cGRhdGVMaW5lVGV4dChjbSwgbGluZVZpZXcpOyB9XG4gICAgICBlbHNlIGlmICh0eXBlID09IFwiZ3V0dGVyXCIpIHsgdXBkYXRlTGluZUd1dHRlcihjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKTsgfVxuICAgICAgZWxzZSBpZiAodHlwZSA9PSBcImNsYXNzXCIpIHsgdXBkYXRlTGluZUNsYXNzZXMoY20sIGxpbmVWaWV3KTsgfVxuICAgICAgZWxzZSBpZiAodHlwZSA9PSBcIndpZGdldFwiKSB7IHVwZGF0ZUxpbmVXaWRnZXRzKGNtLCBsaW5lVmlldywgZGltcyk7IH1cbiAgICB9XG4gICAgbGluZVZpZXcuY2hhbmdlcyA9IG51bGw7XG4gIH1cblxuICAvLyBMaW5lcyB3aXRoIGd1dHRlciBlbGVtZW50cywgd2lkZ2V0cyBvciBhIGJhY2tncm91bmQgY2xhc3MgbmVlZCB0b1xuICAvLyBiZSB3cmFwcGVkLCBhbmQgaGF2ZSB0aGUgZXh0cmEgZWxlbWVudHMgYWRkZWQgdG8gdGhlIHdyYXBwZXIgZGl2XG4gIGZ1bmN0aW9uIGVuc3VyZUxpbmVXcmFwcGVkKGxpbmVWaWV3KSB7XG4gICAgaWYgKGxpbmVWaWV3Lm5vZGUgPT0gbGluZVZpZXcudGV4dCkge1xuICAgICAgbGluZVZpZXcubm9kZSA9IGVsdChcImRpdlwiLCBudWxsLCBudWxsLCBcInBvc2l0aW9uOiByZWxhdGl2ZVwiKTtcbiAgICAgIGlmIChsaW5lVmlldy50ZXh0LnBhcmVudE5vZGUpXG4gICAgICAgIHsgbGluZVZpZXcudGV4dC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChsaW5lVmlldy5ub2RlLCBsaW5lVmlldy50ZXh0KTsgfVxuICAgICAgbGluZVZpZXcubm9kZS5hcHBlbmRDaGlsZChsaW5lVmlldy50ZXh0KTtcbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOCkgeyBsaW5lVmlldy5ub2RlLnN0eWxlLnpJbmRleCA9IDI7IH1cbiAgICB9XG4gICAgcmV0dXJuIGxpbmVWaWV3Lm5vZGVcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVCYWNrZ3JvdW5kKGNtLCBsaW5lVmlldykge1xuICAgIHZhciBjbHMgPSBsaW5lVmlldy5iZ0NsYXNzID8gbGluZVZpZXcuYmdDbGFzcyArIFwiIFwiICsgKGxpbmVWaWV3LmxpbmUuYmdDbGFzcyB8fCBcIlwiKSA6IGxpbmVWaWV3LmxpbmUuYmdDbGFzcztcbiAgICBpZiAoY2xzKSB7IGNscyArPSBcIiBDb2RlTWlycm9yLWxpbmViYWNrZ3JvdW5kXCI7IH1cbiAgICBpZiAobGluZVZpZXcuYmFja2dyb3VuZCkge1xuICAgICAgaWYgKGNscykgeyBsaW5lVmlldy5iYWNrZ3JvdW5kLmNsYXNzTmFtZSA9IGNsczsgfVxuICAgICAgZWxzZSB7IGxpbmVWaWV3LmJhY2tncm91bmQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChsaW5lVmlldy5iYWNrZ3JvdW5kKTsgbGluZVZpZXcuYmFja2dyb3VuZCA9IG51bGw7IH1cbiAgICB9IGVsc2UgaWYgKGNscykge1xuICAgICAgdmFyIHdyYXAgPSBlbnN1cmVMaW5lV3JhcHBlZChsaW5lVmlldyk7XG4gICAgICBsaW5lVmlldy5iYWNrZ3JvdW5kID0gd3JhcC5pbnNlcnRCZWZvcmUoZWx0KFwiZGl2XCIsIG51bGwsIGNscyksIHdyYXAuZmlyc3RDaGlsZCk7XG4gICAgICBjbS5kaXNwbGF5LmlucHV0LnNldFVuZWRpdGFibGUobGluZVZpZXcuYmFja2dyb3VuZCk7XG4gICAgfVxuICB9XG5cbiAgLy8gV3JhcHBlciBhcm91bmQgYnVpbGRMaW5lQ29udGVudCB3aGljaCB3aWxsIHJldXNlIHRoZSBzdHJ1Y3R1cmVcbiAgLy8gaW4gZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkIHdoZW4gcG9zc2libGUuXG4gIGZ1bmN0aW9uIGdldExpbmVDb250ZW50KGNtLCBsaW5lVmlldykge1xuICAgIHZhciBleHQgPSBjbS5kaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQ7XG4gICAgaWYgKGV4dCAmJiBleHQubGluZSA9PSBsaW5lVmlldy5saW5lKSB7XG4gICAgICBjbS5kaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQgPSBudWxsO1xuICAgICAgbGluZVZpZXcubWVhc3VyZSA9IGV4dC5tZWFzdXJlO1xuICAgICAgcmV0dXJuIGV4dC5idWlsdFxuICAgIH1cbiAgICByZXR1cm4gYnVpbGRMaW5lQ29udGVudChjbSwgbGluZVZpZXcpXG4gIH1cblxuICAvLyBSZWRyYXcgdGhlIGxpbmUncyB0ZXh0LiBJbnRlcmFjdHMgd2l0aCB0aGUgYmFja2dyb3VuZCBhbmQgdGV4dFxuICAvLyBjbGFzc2VzIGJlY2F1c2UgdGhlIG1vZGUgbWF5IG91dHB1dCB0b2tlbnMgdGhhdCBpbmZsdWVuY2UgdGhlc2VcbiAgLy8gY2xhc3Nlcy5cbiAgZnVuY3Rpb24gdXBkYXRlTGluZVRleHQoY20sIGxpbmVWaWV3KSB7XG4gICAgdmFyIGNscyA9IGxpbmVWaWV3LnRleHQuY2xhc3NOYW1lO1xuICAgIHZhciBidWlsdCA9IGdldExpbmVDb250ZW50KGNtLCBsaW5lVmlldyk7XG4gICAgaWYgKGxpbmVWaWV3LnRleHQgPT0gbGluZVZpZXcubm9kZSkgeyBsaW5lVmlldy5ub2RlID0gYnVpbHQucHJlOyB9XG4gICAgbGluZVZpZXcudGV4dC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChidWlsdC5wcmUsIGxpbmVWaWV3LnRleHQpO1xuICAgIGxpbmVWaWV3LnRleHQgPSBidWlsdC5wcmU7XG4gICAgaWYgKGJ1aWx0LmJnQ2xhc3MgIT0gbGluZVZpZXcuYmdDbGFzcyB8fCBidWlsdC50ZXh0Q2xhc3MgIT0gbGluZVZpZXcudGV4dENsYXNzKSB7XG4gICAgICBsaW5lVmlldy5iZ0NsYXNzID0gYnVpbHQuYmdDbGFzcztcbiAgICAgIGxpbmVWaWV3LnRleHRDbGFzcyA9IGJ1aWx0LnRleHRDbGFzcztcbiAgICAgIHVwZGF0ZUxpbmVDbGFzc2VzKGNtLCBsaW5lVmlldyk7XG4gICAgfSBlbHNlIGlmIChjbHMpIHtcbiAgICAgIGxpbmVWaWV3LnRleHQuY2xhc3NOYW1lID0gY2xzO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVDbGFzc2VzKGNtLCBsaW5lVmlldykge1xuICAgIHVwZGF0ZUxpbmVCYWNrZ3JvdW5kKGNtLCBsaW5lVmlldyk7XG4gICAgaWYgKGxpbmVWaWV3LmxpbmUud3JhcENsYXNzKVxuICAgICAgeyBlbnN1cmVMaW5lV3JhcHBlZChsaW5lVmlldykuY2xhc3NOYW1lID0gbGluZVZpZXcubGluZS53cmFwQ2xhc3M7IH1cbiAgICBlbHNlIGlmIChsaW5lVmlldy5ub2RlICE9IGxpbmVWaWV3LnRleHQpXG4gICAgICB7IGxpbmVWaWV3Lm5vZGUuY2xhc3NOYW1lID0gXCJcIjsgfVxuICAgIHZhciB0ZXh0Q2xhc3MgPSBsaW5lVmlldy50ZXh0Q2xhc3MgPyBsaW5lVmlldy50ZXh0Q2xhc3MgKyBcIiBcIiArIChsaW5lVmlldy5saW5lLnRleHRDbGFzcyB8fCBcIlwiKSA6IGxpbmVWaWV3LmxpbmUudGV4dENsYXNzO1xuICAgIGxpbmVWaWV3LnRleHQuY2xhc3NOYW1lID0gdGV4dENsYXNzIHx8IFwiXCI7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVMaW5lR3V0dGVyKGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpIHtcbiAgICBpZiAobGluZVZpZXcuZ3V0dGVyKSB7XG4gICAgICBsaW5lVmlldy5ub2RlLnJlbW92ZUNoaWxkKGxpbmVWaWV3Lmd1dHRlcik7XG4gICAgICBsaW5lVmlldy5ndXR0ZXIgPSBudWxsO1xuICAgIH1cbiAgICBpZiAobGluZVZpZXcuZ3V0dGVyQmFja2dyb3VuZCkge1xuICAgICAgbGluZVZpZXcubm9kZS5yZW1vdmVDaGlsZChsaW5lVmlldy5ndXR0ZXJCYWNrZ3JvdW5kKTtcbiAgICAgIGxpbmVWaWV3Lmd1dHRlckJhY2tncm91bmQgPSBudWxsO1xuICAgIH1cbiAgICBpZiAobGluZVZpZXcubGluZS5ndXR0ZXJDbGFzcykge1xuICAgICAgdmFyIHdyYXAgPSBlbnN1cmVMaW5lV3JhcHBlZChsaW5lVmlldyk7XG4gICAgICBsaW5lVmlldy5ndXR0ZXJCYWNrZ3JvdW5kID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1ndXR0ZXItYmFja2dyb3VuZCBcIiArIGxpbmVWaWV3LmxpbmUuZ3V0dGVyQ2xhc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcImxlZnQ6IFwiICsgKGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIgPyBkaW1zLmZpeGVkUG9zIDogLWRpbXMuZ3V0dGVyVG90YWxXaWR0aCkgKyBcInB4OyB3aWR0aDogXCIgKyAoZGltcy5ndXR0ZXJUb3RhbFdpZHRoKSArIFwicHhcIikpO1xuICAgICAgY20uZGlzcGxheS5pbnB1dC5zZXRVbmVkaXRhYmxlKGxpbmVWaWV3Lmd1dHRlckJhY2tncm91bmQpO1xuICAgICAgd3JhcC5pbnNlcnRCZWZvcmUobGluZVZpZXcuZ3V0dGVyQmFja2dyb3VuZCwgbGluZVZpZXcudGV4dCk7XG4gICAgfVxuICAgIHZhciBtYXJrZXJzID0gbGluZVZpZXcubGluZS5ndXR0ZXJNYXJrZXJzO1xuICAgIGlmIChjbS5vcHRpb25zLmxpbmVOdW1iZXJzIHx8IG1hcmtlcnMpIHtcbiAgICAgIHZhciB3cmFwJDEgPSBlbnN1cmVMaW5lV3JhcHBlZChsaW5lVmlldyk7XG4gICAgICB2YXIgZ3V0dGVyV3JhcCA9IGxpbmVWaWV3Lmd1dHRlciA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItZ3V0dGVyLXdyYXBwZXJcIiwgKFwibGVmdDogXCIgKyAoY20ub3B0aW9ucy5maXhlZEd1dHRlciA/IGRpbXMuZml4ZWRQb3MgOiAtZGltcy5ndXR0ZXJUb3RhbFdpZHRoKSArIFwicHhcIikpO1xuICAgICAgY20uZGlzcGxheS5pbnB1dC5zZXRVbmVkaXRhYmxlKGd1dHRlcldyYXApO1xuICAgICAgd3JhcCQxLmluc2VydEJlZm9yZShndXR0ZXJXcmFwLCBsaW5lVmlldy50ZXh0KTtcbiAgICAgIGlmIChsaW5lVmlldy5saW5lLmd1dHRlckNsYXNzKVxuICAgICAgICB7IGd1dHRlcldyYXAuY2xhc3NOYW1lICs9IFwiIFwiICsgbGluZVZpZXcubGluZS5ndXR0ZXJDbGFzczsgfVxuICAgICAgaWYgKGNtLm9wdGlvbnMubGluZU51bWJlcnMgJiYgKCFtYXJrZXJzIHx8ICFtYXJrZXJzW1wiQ29kZU1pcnJvci1saW5lbnVtYmVyc1wiXSkpXG4gICAgICAgIHsgbGluZVZpZXcubGluZU51bWJlciA9IGd1dHRlcldyYXAuYXBwZW5kQ2hpbGQoXG4gICAgICAgICAgZWx0KFwiZGl2XCIsIGxpbmVOdW1iZXJGb3IoY20ub3B0aW9ucywgbGluZU4pLFxuICAgICAgICAgICAgICBcIkNvZGVNaXJyb3ItbGluZW51bWJlciBDb2RlTWlycm9yLWd1dHRlci1lbHRcIixcbiAgICAgICAgICAgICAgKFwibGVmdDogXCIgKyAoZGltcy5ndXR0ZXJMZWZ0W1wiQ29kZU1pcnJvci1saW5lbnVtYmVyc1wiXSkgKyBcInB4OyB3aWR0aDogXCIgKyAoY20uZGlzcGxheS5saW5lTnVtSW5uZXJXaWR0aCkgKyBcInB4XCIpKSk7IH1cbiAgICAgIGlmIChtYXJrZXJzKSB7IGZvciAodmFyIGsgPSAwOyBrIDwgY20uZGlzcGxheS5ndXR0ZXJTcGVjcy5sZW5ndGg7ICsraykge1xuICAgICAgICB2YXIgaWQgPSBjbS5kaXNwbGF5Lmd1dHRlclNwZWNzW2tdLmNsYXNzTmFtZSwgZm91bmQgPSBtYXJrZXJzLmhhc093blByb3BlcnR5KGlkKSAmJiBtYXJrZXJzW2lkXTtcbiAgICAgICAgaWYgKGZvdW5kKVxuICAgICAgICAgIHsgZ3V0dGVyV3JhcC5hcHBlbmRDaGlsZChlbHQoXCJkaXZcIiwgW2ZvdW5kXSwgXCJDb2RlTWlycm9yLWd1dHRlci1lbHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXCJsZWZ0OiBcIiArIChkaW1zLmd1dHRlckxlZnRbaWRdKSArIFwicHg7IHdpZHRoOiBcIiArIChkaW1zLmd1dHRlcldpZHRoW2lkXSkgKyBcInB4XCIpKSk7IH1cbiAgICAgIH0gfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVXaWRnZXRzKGNtLCBsaW5lVmlldywgZGltcykge1xuICAgIGlmIChsaW5lVmlldy5hbGlnbmFibGUpIHsgbGluZVZpZXcuYWxpZ25hYmxlID0gbnVsbDsgfVxuICAgIHZhciBpc1dpZGdldCA9IGNsYXNzVGVzdChcIkNvZGVNaXJyb3ItbGluZXdpZGdldFwiKTtcbiAgICBmb3IgKHZhciBub2RlID0gbGluZVZpZXcubm9kZS5maXJzdENoaWxkLCBuZXh0ID0gKHZvaWQgMCk7IG5vZGU7IG5vZGUgPSBuZXh0KSB7XG4gICAgICBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcbiAgICAgIGlmIChpc1dpZGdldC50ZXN0KG5vZGUuY2xhc3NOYW1lKSkgeyBsaW5lVmlldy5ub2RlLnJlbW92ZUNoaWxkKG5vZGUpOyB9XG4gICAgfVxuICAgIGluc2VydExpbmVXaWRnZXRzKGNtLCBsaW5lVmlldywgZGltcyk7XG4gIH1cblxuICAvLyBCdWlsZCBhIGxpbmUncyBET00gcmVwcmVzZW50YXRpb24gZnJvbSBzY3JhdGNoXG4gIGZ1bmN0aW9uIGJ1aWxkTGluZUVsZW1lbnQoY20sIGxpbmVWaWV3LCBsaW5lTiwgZGltcykge1xuICAgIHZhciBidWlsdCA9IGdldExpbmVDb250ZW50KGNtLCBsaW5lVmlldyk7XG4gICAgbGluZVZpZXcudGV4dCA9IGxpbmVWaWV3Lm5vZGUgPSBidWlsdC5wcmU7XG4gICAgaWYgKGJ1aWx0LmJnQ2xhc3MpIHsgbGluZVZpZXcuYmdDbGFzcyA9IGJ1aWx0LmJnQ2xhc3M7IH1cbiAgICBpZiAoYnVpbHQudGV4dENsYXNzKSB7IGxpbmVWaWV3LnRleHRDbGFzcyA9IGJ1aWx0LnRleHRDbGFzczsgfVxuXG4gICAgdXBkYXRlTGluZUNsYXNzZXMoY20sIGxpbmVWaWV3KTtcbiAgICB1cGRhdGVMaW5lR3V0dGVyKGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpO1xuICAgIGluc2VydExpbmVXaWRnZXRzKGNtLCBsaW5lVmlldywgZGltcyk7XG4gICAgcmV0dXJuIGxpbmVWaWV3Lm5vZGVcbiAgfVxuXG4gIC8vIEEgbGluZVZpZXcgbWF5IGNvbnRhaW4gbXVsdGlwbGUgbG9naWNhbCBsaW5lcyAod2hlbiBtZXJnZWQgYnlcbiAgLy8gY29sbGFwc2VkIHNwYW5zKS4gVGhlIHdpZGdldHMgZm9yIGFsbCBvZiB0aGVtIG5lZWQgdG8gYmUgZHJhd24uXG4gIGZ1bmN0aW9uIGluc2VydExpbmVXaWRnZXRzKGNtLCBsaW5lVmlldywgZGltcykge1xuICAgIGluc2VydExpbmVXaWRnZXRzRm9yKGNtLCBsaW5lVmlldy5saW5lLCBsaW5lVmlldywgZGltcywgdHJ1ZSk7XG4gICAgaWYgKGxpbmVWaWV3LnJlc3QpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lVmlldy5yZXN0Lmxlbmd0aDsgaSsrKVxuICAgICAgeyBpbnNlcnRMaW5lV2lkZ2V0c0ZvcihjbSwgbGluZVZpZXcucmVzdFtpXSwgbGluZVZpZXcsIGRpbXMsIGZhbHNlKTsgfSB9XG4gIH1cblxuICBmdW5jdGlvbiBpbnNlcnRMaW5lV2lkZ2V0c0ZvcihjbSwgbGluZSwgbGluZVZpZXcsIGRpbXMsIGFsbG93QWJvdmUpIHtcbiAgICBpZiAoIWxpbmUud2lkZ2V0cykgeyByZXR1cm4gfVxuICAgIHZhciB3cmFwID0gZW5zdXJlTGluZVdyYXBwZWQobGluZVZpZXcpO1xuICAgIGZvciAodmFyIGkgPSAwLCB3cyA9IGxpbmUud2lkZ2V0czsgaSA8IHdzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgd2lkZ2V0ID0gd3NbaV0sIG5vZGUgPSBlbHQoXCJkaXZcIiwgW3dpZGdldC5ub2RlXSwgXCJDb2RlTWlycm9yLWxpbmV3aWRnZXRcIiArICh3aWRnZXQuY2xhc3NOYW1lID8gXCIgXCIgKyB3aWRnZXQuY2xhc3NOYW1lIDogXCJcIikpO1xuICAgICAgaWYgKCF3aWRnZXQuaGFuZGxlTW91c2VFdmVudHMpIHsgbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbS1pZ25vcmUtZXZlbnRzXCIsIFwidHJ1ZVwiKTsgfVxuICAgICAgcG9zaXRpb25MaW5lV2lkZ2V0KHdpZGdldCwgbm9kZSwgbGluZVZpZXcsIGRpbXMpO1xuICAgICAgY20uZGlzcGxheS5pbnB1dC5zZXRVbmVkaXRhYmxlKG5vZGUpO1xuICAgICAgaWYgKGFsbG93QWJvdmUgJiYgd2lkZ2V0LmFib3ZlKVxuICAgICAgICB7IHdyYXAuaW5zZXJ0QmVmb3JlKG5vZGUsIGxpbmVWaWV3Lmd1dHRlciB8fCBsaW5lVmlldy50ZXh0KTsgfVxuICAgICAgZWxzZVxuICAgICAgICB7IHdyYXAuYXBwZW5kQ2hpbGQobm9kZSk7IH1cbiAgICAgIHNpZ25hbExhdGVyKHdpZGdldCwgXCJyZWRyYXdcIik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcG9zaXRpb25MaW5lV2lkZ2V0KHdpZGdldCwgbm9kZSwgbGluZVZpZXcsIGRpbXMpIHtcbiAgICBpZiAod2lkZ2V0Lm5vSFNjcm9sbCkge1xuICAobGluZVZpZXcuYWxpZ25hYmxlIHx8IChsaW5lVmlldy5hbGlnbmFibGUgPSBbXSkpLnB1c2gobm9kZSk7XG4gICAgICB2YXIgd2lkdGggPSBkaW1zLndyYXBwZXJXaWR0aDtcbiAgICAgIG5vZGUuc3R5bGUubGVmdCA9IGRpbXMuZml4ZWRQb3MgKyBcInB4XCI7XG4gICAgICBpZiAoIXdpZGdldC5jb3Zlckd1dHRlcikge1xuICAgICAgICB3aWR0aCAtPSBkaW1zLmd1dHRlclRvdGFsV2lkdGg7XG4gICAgICAgIG5vZGUuc3R5bGUucGFkZGluZ0xlZnQgPSBkaW1zLmd1dHRlclRvdGFsV2lkdGggKyBcInB4XCI7XG4gICAgICB9XG4gICAgICBub2RlLnN0eWxlLndpZHRoID0gd2lkdGggKyBcInB4XCI7XG4gICAgfVxuICAgIGlmICh3aWRnZXQuY292ZXJHdXR0ZXIpIHtcbiAgICAgIG5vZGUuc3R5bGUuekluZGV4ID0gNTtcbiAgICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XG4gICAgICBpZiAoIXdpZGdldC5ub0hTY3JvbGwpIHsgbm9kZS5zdHlsZS5tYXJnaW5MZWZ0ID0gLWRpbXMuZ3V0dGVyVG90YWxXaWR0aCArIFwicHhcIjsgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHdpZGdldEhlaWdodCh3aWRnZXQpIHtcbiAgICBpZiAod2lkZ2V0LmhlaWdodCAhPSBudWxsKSB7IHJldHVybiB3aWRnZXQuaGVpZ2h0IH1cbiAgICB2YXIgY20gPSB3aWRnZXQuZG9jLmNtO1xuICAgIGlmICghY20pIHsgcmV0dXJuIDAgfVxuICAgIGlmICghY29udGFpbnMoZG9jdW1lbnQuYm9keSwgd2lkZ2V0Lm5vZGUpKSB7XG4gICAgICB2YXIgcGFyZW50U3R5bGUgPSBcInBvc2l0aW9uOiByZWxhdGl2ZTtcIjtcbiAgICAgIGlmICh3aWRnZXQuY292ZXJHdXR0ZXIpXG4gICAgICAgIHsgcGFyZW50U3R5bGUgKz0gXCJtYXJnaW4tbGVmdDogLVwiICsgY20uZGlzcGxheS5ndXR0ZXJzLm9mZnNldFdpZHRoICsgXCJweDtcIjsgfVxuICAgICAgaWYgKHdpZGdldC5ub0hTY3JvbGwpXG4gICAgICAgIHsgcGFyZW50U3R5bGUgKz0gXCJ3aWR0aDogXCIgKyBjbS5kaXNwbGF5LndyYXBwZXIuY2xpZW50V2lkdGggKyBcInB4O1wiOyB9XG4gICAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChjbS5kaXNwbGF5Lm1lYXN1cmUsIGVsdChcImRpdlwiLCBbd2lkZ2V0Lm5vZGVdLCBudWxsLCBwYXJlbnRTdHlsZSkpO1xuICAgIH1cbiAgICByZXR1cm4gd2lkZ2V0LmhlaWdodCA9IHdpZGdldC5ub2RlLnBhcmVudE5vZGUub2Zmc2V0SGVpZ2h0XG4gIH1cblxuICAvLyBSZXR1cm4gdHJ1ZSB3aGVuIHRoZSBnaXZlbiBtb3VzZSBldmVudCBoYXBwZW5lZCBpbiBhIHdpZGdldFxuICBmdW5jdGlvbiBldmVudEluV2lkZ2V0KGRpc3BsYXksIGUpIHtcbiAgICBmb3IgKHZhciBuID0gZV90YXJnZXQoZSk7IG4gIT0gZGlzcGxheS53cmFwcGVyOyBuID0gbi5wYXJlbnROb2RlKSB7XG4gICAgICBpZiAoIW4gfHwgKG4ubm9kZVR5cGUgPT0gMSAmJiBuLmdldEF0dHJpYnV0ZShcImNtLWlnbm9yZS1ldmVudHNcIikgPT0gXCJ0cnVlXCIpIHx8XG4gICAgICAgICAgKG4ucGFyZW50Tm9kZSA9PSBkaXNwbGF5LnNpemVyICYmIG4gIT0gZGlzcGxheS5tb3ZlcikpXG4gICAgICAgIHsgcmV0dXJuIHRydWUgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFBPU0lUSU9OIE1FQVNVUkVNRU5UXG5cbiAgZnVuY3Rpb24gcGFkZGluZ1RvcChkaXNwbGF5KSB7cmV0dXJuIGRpc3BsYXkubGluZVNwYWNlLm9mZnNldFRvcH1cbiAgZnVuY3Rpb24gcGFkZGluZ1ZlcnQoZGlzcGxheSkge3JldHVybiBkaXNwbGF5Lm1vdmVyLm9mZnNldEhlaWdodCAtIGRpc3BsYXkubGluZVNwYWNlLm9mZnNldEhlaWdodH1cbiAgZnVuY3Rpb24gcGFkZGluZ0goZGlzcGxheSkge1xuICAgIGlmIChkaXNwbGF5LmNhY2hlZFBhZGRpbmdIKSB7IHJldHVybiBkaXNwbGF5LmNhY2hlZFBhZGRpbmdIIH1cbiAgICB2YXIgZSA9IHJlbW92ZUNoaWxkcmVuQW5kQWRkKGRpc3BsYXkubWVhc3VyZSwgZWx0KFwicHJlXCIsIFwieFwiLCBcIkNvZGVNaXJyb3ItbGluZS1saWtlXCIpKTtcbiAgICB2YXIgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSA/IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGUpIDogZS5jdXJyZW50U3R5bGU7XG4gICAgdmFyIGRhdGEgPSB7bGVmdDogcGFyc2VJbnQoc3R5bGUucGFkZGluZ0xlZnQpLCByaWdodDogcGFyc2VJbnQoc3R5bGUucGFkZGluZ1JpZ2h0KX07XG4gICAgaWYgKCFpc05hTihkYXRhLmxlZnQpICYmICFpc05hTihkYXRhLnJpZ2h0KSkgeyBkaXNwbGF5LmNhY2hlZFBhZGRpbmdIID0gZGF0YTsgfVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBmdW5jdGlvbiBzY3JvbGxHYXAoY20pIHsgcmV0dXJuIHNjcm9sbGVyR2FwIC0gY20uZGlzcGxheS5uYXRpdmVCYXJXaWR0aCB9XG4gIGZ1bmN0aW9uIGRpc3BsYXlXaWR0aChjbSkge1xuICAgIHJldHVybiBjbS5kaXNwbGF5LnNjcm9sbGVyLmNsaWVudFdpZHRoIC0gc2Nyb2xsR2FwKGNtKSAtIGNtLmRpc3BsYXkuYmFyV2lkdGhcbiAgfVxuICBmdW5jdGlvbiBkaXNwbGF5SGVpZ2h0KGNtKSB7XG4gICAgcmV0dXJuIGNtLmRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50SGVpZ2h0IC0gc2Nyb2xsR2FwKGNtKSAtIGNtLmRpc3BsYXkuYmFySGVpZ2h0XG4gIH1cblxuICAvLyBFbnN1cmUgdGhlIGxpbmVWaWV3LndyYXBwaW5nLmhlaWdodHMgYXJyYXkgaXMgcG9wdWxhdGVkLiBUaGlzIGlzXG4gIC8vIGFuIGFycmF5IG9mIGJvdHRvbSBvZmZzZXRzIGZvciB0aGUgbGluZXMgdGhhdCBtYWtlIHVwIGEgZHJhd25cbiAgLy8gbGluZS4gV2hlbiBsaW5lV3JhcHBpbmcgaXMgb24sIHRoZXJlIG1pZ2h0IGJlIG1vcmUgdGhhbiBvbmVcbiAgLy8gaGVpZ2h0LlxuICBmdW5jdGlvbiBlbnN1cmVMaW5lSGVpZ2h0cyhjbSwgbGluZVZpZXcsIHJlY3QpIHtcbiAgICB2YXIgd3JhcHBpbmcgPSBjbS5vcHRpb25zLmxpbmVXcmFwcGluZztcbiAgICB2YXIgY3VyV2lkdGggPSB3cmFwcGluZyAmJiBkaXNwbGF5V2lkdGgoY20pO1xuICAgIGlmICghbGluZVZpZXcubWVhc3VyZS5oZWlnaHRzIHx8IHdyYXBwaW5nICYmIGxpbmVWaWV3Lm1lYXN1cmUud2lkdGggIT0gY3VyV2lkdGgpIHtcbiAgICAgIHZhciBoZWlnaHRzID0gbGluZVZpZXcubWVhc3VyZS5oZWlnaHRzID0gW107XG4gICAgICBpZiAod3JhcHBpbmcpIHtcbiAgICAgICAgbGluZVZpZXcubWVhc3VyZS53aWR0aCA9IGN1cldpZHRoO1xuICAgICAgICB2YXIgcmVjdHMgPSBsaW5lVmlldy50ZXh0LmZpcnN0Q2hpbGQuZ2V0Q2xpZW50UmVjdHMoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWN0cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICB2YXIgY3VyID0gcmVjdHNbaV0sIG5leHQgPSByZWN0c1tpICsgMV07XG4gICAgICAgICAgaWYgKE1hdGguYWJzKGN1ci5ib3R0b20gLSBuZXh0LmJvdHRvbSkgPiAyKVxuICAgICAgICAgICAgeyBoZWlnaHRzLnB1c2goKGN1ci5ib3R0b20gKyBuZXh0LnRvcCkgLyAyIC0gcmVjdC50b3ApOyB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGhlaWdodHMucHVzaChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKTtcbiAgICB9XG4gIH1cblxuICAvLyBGaW5kIGEgbGluZSBtYXAgKG1hcHBpbmcgY2hhcmFjdGVyIG9mZnNldHMgdG8gdGV4dCBub2RlcykgYW5kIGFcbiAgLy8gbWVhc3VyZW1lbnQgY2FjaGUgZm9yIHRoZSBnaXZlbiBsaW5lIG51bWJlci4gKEEgbGluZSB2aWV3IG1pZ2h0XG4gIC8vIGNvbnRhaW4gbXVsdGlwbGUgbGluZXMgd2hlbiBjb2xsYXBzZWQgcmFuZ2VzIGFyZSBwcmVzZW50LilcbiAgZnVuY3Rpb24gbWFwRnJvbUxpbmVWaWV3KGxpbmVWaWV3LCBsaW5lLCBsaW5lTikge1xuICAgIGlmIChsaW5lVmlldy5saW5lID09IGxpbmUpXG4gICAgICB7IHJldHVybiB7bWFwOiBsaW5lVmlldy5tZWFzdXJlLm1hcCwgY2FjaGU6IGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGV9IH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVWaWV3LnJlc3QubGVuZ3RoOyBpKyspXG4gICAgICB7IGlmIChsaW5lVmlldy5yZXN0W2ldID09IGxpbmUpXG4gICAgICAgIHsgcmV0dXJuIHttYXA6IGxpbmVWaWV3Lm1lYXN1cmUubWFwc1tpXSwgY2FjaGU6IGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGVzW2ldfSB9IH1cbiAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBsaW5lVmlldy5yZXN0Lmxlbmd0aDsgaSQxKyspXG4gICAgICB7IGlmIChsaW5lTm8obGluZVZpZXcucmVzdFtpJDFdKSA+IGxpbmVOKVxuICAgICAgICB7IHJldHVybiB7bWFwOiBsaW5lVmlldy5tZWFzdXJlLm1hcHNbaSQxXSwgY2FjaGU6IGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGVzW2kkMV0sIGJlZm9yZTogdHJ1ZX0gfSB9XG4gIH1cblxuICAvLyBSZW5kZXIgYSBsaW5lIGludG8gdGhlIGhpZGRlbiBub2RlIGRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZC4gVXNlZFxuICAvLyB3aGVuIG1lYXN1cmVtZW50IGlzIG5lZWRlZCBmb3IgYSBsaW5lIHRoYXQncyBub3QgaW4gdGhlIHZpZXdwb3J0LlxuICBmdW5jdGlvbiB1cGRhdGVFeHRlcm5hbE1lYXN1cmVtZW50KGNtLCBsaW5lKSB7XG4gICAgbGluZSA9IHZpc3VhbExpbmUobGluZSk7XG4gICAgdmFyIGxpbmVOID0gbGluZU5vKGxpbmUpO1xuICAgIHZhciB2aWV3ID0gY20uZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkID0gbmV3IExpbmVWaWV3KGNtLmRvYywgbGluZSwgbGluZU4pO1xuICAgIHZpZXcubGluZU4gPSBsaW5lTjtcbiAgICB2YXIgYnVpbHQgPSB2aWV3LmJ1aWx0ID0gYnVpbGRMaW5lQ29udGVudChjbSwgdmlldyk7XG4gICAgdmlldy50ZXh0ID0gYnVpbHQucHJlO1xuICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKGNtLmRpc3BsYXkubGluZU1lYXN1cmUsIGJ1aWx0LnByZSk7XG4gICAgcmV0dXJuIHZpZXdcbiAgfVxuXG4gIC8vIEdldCBhIHt0b3AsIGJvdHRvbSwgbGVmdCwgcmlnaHR9IGJveCAoaW4gbGluZS1sb2NhbCBjb29yZGluYXRlcylcbiAgLy8gZm9yIGEgZ2l2ZW4gY2hhcmFjdGVyLlxuICBmdW5jdGlvbiBtZWFzdXJlQ2hhcihjbSwgbGluZSwgY2gsIGJpYXMpIHtcbiAgICByZXR1cm4gbWVhc3VyZUNoYXJQcmVwYXJlZChjbSwgcHJlcGFyZU1lYXN1cmVGb3JMaW5lKGNtLCBsaW5lKSwgY2gsIGJpYXMpXG4gIH1cblxuICAvLyBGaW5kIGEgbGluZSB2aWV3IHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIGdpdmVuIGxpbmUgbnVtYmVyLlxuICBmdW5jdGlvbiBmaW5kVmlld0ZvckxpbmUoY20sIGxpbmVOKSB7XG4gICAgaWYgKGxpbmVOID49IGNtLmRpc3BsYXkudmlld0Zyb20gJiYgbGluZU4gPCBjbS5kaXNwbGF5LnZpZXdUbylcbiAgICAgIHsgcmV0dXJuIGNtLmRpc3BsYXkudmlld1tmaW5kVmlld0luZGV4KGNtLCBsaW5lTildIH1cbiAgICB2YXIgZXh0ID0gY20uZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkO1xuICAgIGlmIChleHQgJiYgbGluZU4gPj0gZXh0LmxpbmVOICYmIGxpbmVOIDwgZXh0LmxpbmVOICsgZXh0LnNpemUpXG4gICAgICB7IHJldHVybiBleHQgfVxuICB9XG5cbiAgLy8gTWVhc3VyZW1lbnQgY2FuIGJlIHNwbGl0IGluIHR3byBzdGVwcywgdGhlIHNldC11cCB3b3JrIHRoYXRcbiAgLy8gYXBwbGllcyB0byB0aGUgd2hvbGUgbGluZSwgYW5kIHRoZSBtZWFzdXJlbWVudCBvZiB0aGUgYWN0dWFsXG4gIC8vIGNoYXJhY3Rlci4gRnVuY3Rpb25zIGxpa2UgY29vcmRzQ2hhciwgdGhhdCBuZWVkIHRvIGRvIGEgbG90IG9mXG4gIC8vIG1lYXN1cmVtZW50cyBpbiBhIHJvdywgY2FuIHRodXMgZW5zdXJlIHRoYXQgdGhlIHNldC11cCB3b3JrIGlzXG4gIC8vIG9ubHkgZG9uZSBvbmNlLlxuICBmdW5jdGlvbiBwcmVwYXJlTWVhc3VyZUZvckxpbmUoY20sIGxpbmUpIHtcbiAgICB2YXIgbGluZU4gPSBsaW5lTm8obGluZSk7XG4gICAgdmFyIHZpZXcgPSBmaW5kVmlld0ZvckxpbmUoY20sIGxpbmVOKTtcbiAgICBpZiAodmlldyAmJiAhdmlldy50ZXh0KSB7XG4gICAgICB2aWV3ID0gbnVsbDtcbiAgICB9IGVsc2UgaWYgKHZpZXcgJiYgdmlldy5jaGFuZ2VzKSB7XG4gICAgICB1cGRhdGVMaW5lRm9yQ2hhbmdlcyhjbSwgdmlldywgbGluZU4sIGdldERpbWVuc2lvbnMoY20pKTtcbiAgICAgIGNtLmN1ck9wLmZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCF2aWV3KVxuICAgICAgeyB2aWV3ID0gdXBkYXRlRXh0ZXJuYWxNZWFzdXJlbWVudChjbSwgbGluZSk7IH1cblxuICAgIHZhciBpbmZvID0gbWFwRnJvbUxpbmVWaWV3KHZpZXcsIGxpbmUsIGxpbmVOKTtcbiAgICByZXR1cm4ge1xuICAgICAgbGluZTogbGluZSwgdmlldzogdmlldywgcmVjdDogbnVsbCxcbiAgICAgIG1hcDogaW5mby5tYXAsIGNhY2hlOiBpbmZvLmNhY2hlLCBiZWZvcmU6IGluZm8uYmVmb3JlLFxuICAgICAgaGFzSGVpZ2h0czogZmFsc2VcbiAgICB9XG4gIH1cblxuICAvLyBHaXZlbiBhIHByZXBhcmVkIG1lYXN1cmVtZW50IG9iamVjdCwgbWVhc3VyZXMgdGhlIHBvc2l0aW9uIG9mIGFuXG4gIC8vIGFjdHVhbCBjaGFyYWN0ZXIgKG9yIGZldGNoZXMgaXQgZnJvbSB0aGUgY2FjaGUpLlxuICBmdW5jdGlvbiBtZWFzdXJlQ2hhclByZXBhcmVkKGNtLCBwcmVwYXJlZCwgY2gsIGJpYXMsIHZhckhlaWdodCkge1xuICAgIGlmIChwcmVwYXJlZC5iZWZvcmUpIHsgY2ggPSAtMTsgfVxuICAgIHZhciBrZXkgPSBjaCArIChiaWFzIHx8IFwiXCIpLCBmb3VuZDtcbiAgICBpZiAocHJlcGFyZWQuY2FjaGUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgZm91bmQgPSBwcmVwYXJlZC5jYWNoZVtrZXldO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXByZXBhcmVkLnJlY3QpXG4gICAgICAgIHsgcHJlcGFyZWQucmVjdCA9IHByZXBhcmVkLnZpZXcudGV4dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsgfVxuICAgICAgaWYgKCFwcmVwYXJlZC5oYXNIZWlnaHRzKSB7XG4gICAgICAgIGVuc3VyZUxpbmVIZWlnaHRzKGNtLCBwcmVwYXJlZC52aWV3LCBwcmVwYXJlZC5yZWN0KTtcbiAgICAgICAgcHJlcGFyZWQuaGFzSGVpZ2h0cyA9IHRydWU7XG4gICAgICB9XG4gICAgICBmb3VuZCA9IG1lYXN1cmVDaGFySW5uZXIoY20sIHByZXBhcmVkLCBjaCwgYmlhcyk7XG4gICAgICBpZiAoIWZvdW5kLmJvZ3VzKSB7IHByZXBhcmVkLmNhY2hlW2tleV0gPSBmb3VuZDsgfVxuICAgIH1cbiAgICByZXR1cm4ge2xlZnQ6IGZvdW5kLmxlZnQsIHJpZ2h0OiBmb3VuZC5yaWdodCxcbiAgICAgICAgICAgIHRvcDogdmFySGVpZ2h0ID8gZm91bmQucnRvcCA6IGZvdW5kLnRvcCxcbiAgICAgICAgICAgIGJvdHRvbTogdmFySGVpZ2h0ID8gZm91bmQucmJvdHRvbSA6IGZvdW5kLmJvdHRvbX1cbiAgfVxuXG4gIHZhciBudWxsUmVjdCA9IHtsZWZ0OiAwLCByaWdodDogMCwgdG9wOiAwLCBib3R0b206IDB9O1xuXG4gIGZ1bmN0aW9uIG5vZGVBbmRPZmZzZXRJbkxpbmVNYXAobWFwLCBjaCwgYmlhcykge1xuICAgIHZhciBub2RlLCBzdGFydCwgZW5kLCBjb2xsYXBzZSwgbVN0YXJ0LCBtRW5kO1xuICAgIC8vIEZpcnN0LCBzZWFyY2ggdGhlIGxpbmUgbWFwIGZvciB0aGUgdGV4dCBub2RlIGNvcnJlc3BvbmRpbmcgdG8sXG4gICAgLy8gb3IgY2xvc2VzdCB0bywgdGhlIHRhcmdldCBjaGFyYWN0ZXIuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXAubGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgIG1TdGFydCA9IG1hcFtpXTtcbiAgICAgIG1FbmQgPSBtYXBbaSArIDFdO1xuICAgICAgaWYgKGNoIDwgbVN0YXJ0KSB7XG4gICAgICAgIHN0YXJ0ID0gMDsgZW5kID0gMTtcbiAgICAgICAgY29sbGFwc2UgPSBcImxlZnRcIjtcbiAgICAgIH0gZWxzZSBpZiAoY2ggPCBtRW5kKSB7XG4gICAgICAgIHN0YXJ0ID0gY2ggLSBtU3RhcnQ7XG4gICAgICAgIGVuZCA9IHN0YXJ0ICsgMTtcbiAgICAgIH0gZWxzZSBpZiAoaSA9PSBtYXAubGVuZ3RoIC0gMyB8fCBjaCA9PSBtRW5kICYmIG1hcFtpICsgM10gPiBjaCkge1xuICAgICAgICBlbmQgPSBtRW5kIC0gbVN0YXJ0O1xuICAgICAgICBzdGFydCA9IGVuZCAtIDE7XG4gICAgICAgIGlmIChjaCA+PSBtRW5kKSB7IGNvbGxhcHNlID0gXCJyaWdodFwiOyB9XG4gICAgICB9XG4gICAgICBpZiAoc3RhcnQgIT0gbnVsbCkge1xuICAgICAgICBub2RlID0gbWFwW2kgKyAyXTtcbiAgICAgICAgaWYgKG1TdGFydCA9PSBtRW5kICYmIGJpYXMgPT0gKG5vZGUuaW5zZXJ0TGVmdCA/IFwibGVmdFwiIDogXCJyaWdodFwiKSlcbiAgICAgICAgICB7IGNvbGxhcHNlID0gYmlhczsgfVxuICAgICAgICBpZiAoYmlhcyA9PSBcImxlZnRcIiAmJiBzdGFydCA9PSAwKVxuICAgICAgICAgIHsgd2hpbGUgKGkgJiYgbWFwW2kgLSAyXSA9PSBtYXBbaSAtIDNdICYmIG1hcFtpIC0gMV0uaW5zZXJ0TGVmdCkge1xuICAgICAgICAgICAgbm9kZSA9IG1hcFsoaSAtPSAzKSArIDJdO1xuICAgICAgICAgICAgY29sbGFwc2UgPSBcImxlZnRcIjtcbiAgICAgICAgICB9IH1cbiAgICAgICAgaWYgKGJpYXMgPT0gXCJyaWdodFwiICYmIHN0YXJ0ID09IG1FbmQgLSBtU3RhcnQpXG4gICAgICAgICAgeyB3aGlsZSAoaSA8IG1hcC5sZW5ndGggLSAzICYmIG1hcFtpICsgM10gPT0gbWFwW2kgKyA0XSAmJiAhbWFwW2kgKyA1XS5pbnNlcnRMZWZ0KSB7XG4gICAgICAgICAgICBub2RlID0gbWFwWyhpICs9IDMpICsgMl07XG4gICAgICAgICAgICBjb2xsYXBzZSA9IFwicmlnaHRcIjtcbiAgICAgICAgICB9IH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtub2RlOiBub2RlLCBzdGFydDogc3RhcnQsIGVuZDogZW5kLCBjb2xsYXBzZTogY29sbGFwc2UsIGNvdmVyU3RhcnQ6IG1TdGFydCwgY292ZXJFbmQ6IG1FbmR9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRVc2VmdWxSZWN0KHJlY3RzLCBiaWFzKSB7XG4gICAgdmFyIHJlY3QgPSBudWxsUmVjdDtcbiAgICBpZiAoYmlhcyA9PSBcImxlZnRcIikgeyBmb3IgKHZhciBpID0gMDsgaSA8IHJlY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoKHJlY3QgPSByZWN0c1tpXSkubGVmdCAhPSByZWN0LnJpZ2h0KSB7IGJyZWFrIH1cbiAgICB9IH0gZWxzZSB7IGZvciAodmFyIGkkMSA9IHJlY3RzLmxlbmd0aCAtIDE7IGkkMSA+PSAwOyBpJDEtLSkge1xuICAgICAgaWYgKChyZWN0ID0gcmVjdHNbaSQxXSkubGVmdCAhPSByZWN0LnJpZ2h0KSB7IGJyZWFrIH1cbiAgICB9IH1cbiAgICByZXR1cm4gcmVjdFxuICB9XG5cbiAgZnVuY3Rpb24gbWVhc3VyZUNoYXJJbm5lcihjbSwgcHJlcGFyZWQsIGNoLCBiaWFzKSB7XG4gICAgdmFyIHBsYWNlID0gbm9kZUFuZE9mZnNldEluTGluZU1hcChwcmVwYXJlZC5tYXAsIGNoLCBiaWFzKTtcbiAgICB2YXIgbm9kZSA9IHBsYWNlLm5vZGUsIHN0YXJ0ID0gcGxhY2Uuc3RhcnQsIGVuZCA9IHBsYWNlLmVuZCwgY29sbGFwc2UgPSBwbGFjZS5jb2xsYXBzZTtcblxuICAgIHZhciByZWN0O1xuICAgIGlmIChub2RlLm5vZGVUeXBlID09IDMpIHsgLy8gSWYgaXQgaXMgYSB0ZXh0IG5vZGUsIHVzZSBhIHJhbmdlIHRvIHJldHJpZXZlIHRoZSBjb29yZGluYXRlcy5cbiAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IDQ7IGkkMSsrKSB7IC8vIFJldHJ5IGEgbWF4aW11bSBvZiA0IHRpbWVzIHdoZW4gbm9uc2Vuc2UgcmVjdGFuZ2xlcyBhcmUgcmV0dXJuZWRcbiAgICAgICAgd2hpbGUgKHN0YXJ0ICYmIGlzRXh0ZW5kaW5nQ2hhcihwcmVwYXJlZC5saW5lLnRleHQuY2hhckF0KHBsYWNlLmNvdmVyU3RhcnQgKyBzdGFydCkpKSB7IC0tc3RhcnQ7IH1cbiAgICAgICAgd2hpbGUgKHBsYWNlLmNvdmVyU3RhcnQgKyBlbmQgPCBwbGFjZS5jb3ZlckVuZCAmJiBpc0V4dGVuZGluZ0NoYXIocHJlcGFyZWQubGluZS50ZXh0LmNoYXJBdChwbGFjZS5jb3ZlclN0YXJ0ICsgZW5kKSkpIHsgKytlbmQ7IH1cbiAgICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA5ICYmIHN0YXJ0ID09IDAgJiYgZW5kID09IHBsYWNlLmNvdmVyRW5kIC0gcGxhY2UuY292ZXJTdGFydClcbiAgICAgICAgICB7IHJlY3QgPSBub2RlLnBhcmVudE5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7IH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgIHsgcmVjdCA9IGdldFVzZWZ1bFJlY3QocmFuZ2Uobm9kZSwgc3RhcnQsIGVuZCkuZ2V0Q2xpZW50UmVjdHMoKSwgYmlhcyk7IH1cbiAgICAgICAgaWYgKHJlY3QubGVmdCB8fCByZWN0LnJpZ2h0IHx8IHN0YXJ0ID09IDApIHsgYnJlYWsgfVxuICAgICAgICBlbmQgPSBzdGFydDtcbiAgICAgICAgc3RhcnQgPSBzdGFydCAtIDE7XG4gICAgICAgIGNvbGxhcHNlID0gXCJyaWdodFwiO1xuICAgICAgfVxuICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCAxMSkgeyByZWN0ID0gbWF5YmVVcGRhdGVSZWN0Rm9yWm9vbWluZyhjbS5kaXNwbGF5Lm1lYXN1cmUsIHJlY3QpOyB9XG4gICAgfSBlbHNlIHsgLy8gSWYgaXQgaXMgYSB3aWRnZXQsIHNpbXBseSBnZXQgdGhlIGJveCBmb3IgdGhlIHdob2xlIHdpZGdldC5cbiAgICAgIGlmIChzdGFydCA+IDApIHsgY29sbGFwc2UgPSBiaWFzID0gXCJyaWdodFwiOyB9XG4gICAgICB2YXIgcmVjdHM7XG4gICAgICBpZiAoY20ub3B0aW9ucy5saW5lV3JhcHBpbmcgJiYgKHJlY3RzID0gbm9kZS5nZXRDbGllbnRSZWN0cygpKS5sZW5ndGggPiAxKVxuICAgICAgICB7IHJlY3QgPSByZWN0c1tiaWFzID09IFwicmlnaHRcIiA/IHJlY3RzLmxlbmd0aCAtIDEgOiAwXTsgfVxuICAgICAgZWxzZVxuICAgICAgICB7IHJlY3QgPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOyB9XG4gICAgfVxuICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOSAmJiAhc3RhcnQgJiYgKCFyZWN0IHx8ICFyZWN0LmxlZnQgJiYgIXJlY3QucmlnaHQpKSB7XG4gICAgICB2YXIgclNwYW4gPSBub2RlLnBhcmVudE5vZGUuZ2V0Q2xpZW50UmVjdHMoKVswXTtcbiAgICAgIGlmIChyU3BhbilcbiAgICAgICAgeyByZWN0ID0ge2xlZnQ6IHJTcGFuLmxlZnQsIHJpZ2h0OiByU3Bhbi5sZWZ0ICsgY2hhcldpZHRoKGNtLmRpc3BsYXkpLCB0b3A6IHJTcGFuLnRvcCwgYm90dG9tOiByU3Bhbi5ib3R0b219OyB9XG4gICAgICBlbHNlXG4gICAgICAgIHsgcmVjdCA9IG51bGxSZWN0OyB9XG4gICAgfVxuXG4gICAgdmFyIHJ0b3AgPSByZWN0LnRvcCAtIHByZXBhcmVkLnJlY3QudG9wLCByYm90ID0gcmVjdC5ib3R0b20gLSBwcmVwYXJlZC5yZWN0LnRvcDtcbiAgICB2YXIgbWlkID0gKHJ0b3AgKyByYm90KSAvIDI7XG4gICAgdmFyIGhlaWdodHMgPSBwcmVwYXJlZC52aWV3Lm1lYXN1cmUuaGVpZ2h0cztcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICg7IGkgPCBoZWlnaHRzLmxlbmd0aCAtIDE7IGkrKylcbiAgICAgIHsgaWYgKG1pZCA8IGhlaWdodHNbaV0pIHsgYnJlYWsgfSB9XG4gICAgdmFyIHRvcCA9IGkgPyBoZWlnaHRzW2kgLSAxXSA6IDAsIGJvdCA9IGhlaWdodHNbaV07XG4gICAgdmFyIHJlc3VsdCA9IHtsZWZ0OiAoY29sbGFwc2UgPT0gXCJyaWdodFwiID8gcmVjdC5yaWdodCA6IHJlY3QubGVmdCkgLSBwcmVwYXJlZC5yZWN0LmxlZnQsXG4gICAgICAgICAgICAgICAgICByaWdodDogKGNvbGxhcHNlID09IFwibGVmdFwiID8gcmVjdC5sZWZ0IDogcmVjdC5yaWdodCkgLSBwcmVwYXJlZC5yZWN0LmxlZnQsXG4gICAgICAgICAgICAgICAgICB0b3A6IHRvcCwgYm90dG9tOiBib3R9O1xuICAgIGlmICghcmVjdC5sZWZ0ICYmICFyZWN0LnJpZ2h0KSB7IHJlc3VsdC5ib2d1cyA9IHRydWU7IH1cbiAgICBpZiAoIWNtLm9wdGlvbnMuc2luZ2xlQ3Vyc29ySGVpZ2h0UGVyTGluZSkgeyByZXN1bHQucnRvcCA9IHJ0b3A7IHJlc3VsdC5yYm90dG9tID0gcmJvdDsgfVxuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgLy8gV29yayBhcm91bmQgcHJvYmxlbSB3aXRoIGJvdW5kaW5nIGNsaWVudCByZWN0cyBvbiByYW5nZXMgYmVpbmdcbiAgLy8gcmV0dXJuZWQgaW5jb3JyZWN0bHkgd2hlbiB6b29tZWQgb24gSUUxMCBhbmQgYmVsb3cuXG4gIGZ1bmN0aW9uIG1heWJlVXBkYXRlUmVjdEZvclpvb21pbmcobWVhc3VyZSwgcmVjdCkge1xuICAgIGlmICghd2luZG93LnNjcmVlbiB8fCBzY3JlZW4ubG9naWNhbFhEUEkgPT0gbnVsbCB8fFxuICAgICAgICBzY3JlZW4ubG9naWNhbFhEUEkgPT0gc2NyZWVuLmRldmljZVhEUEkgfHwgIWhhc0JhZFpvb21lZFJlY3RzKG1lYXN1cmUpKVxuICAgICAgeyByZXR1cm4gcmVjdCB9XG4gICAgdmFyIHNjYWxlWCA9IHNjcmVlbi5sb2dpY2FsWERQSSAvIHNjcmVlbi5kZXZpY2VYRFBJO1xuICAgIHZhciBzY2FsZVkgPSBzY3JlZW4ubG9naWNhbFlEUEkgLyBzY3JlZW4uZGV2aWNlWURQSTtcbiAgICByZXR1cm4ge2xlZnQ6IHJlY3QubGVmdCAqIHNjYWxlWCwgcmlnaHQ6IHJlY3QucmlnaHQgKiBzY2FsZVgsXG4gICAgICAgICAgICB0b3A6IHJlY3QudG9wICogc2NhbGVZLCBib3R0b206IHJlY3QuYm90dG9tICogc2NhbGVZfVxuICB9XG5cbiAgZnVuY3Rpb24gY2xlYXJMaW5lTWVhc3VyZW1lbnRDYWNoZUZvcihsaW5lVmlldykge1xuICAgIGlmIChsaW5lVmlldy5tZWFzdXJlKSB7XG4gICAgICBsaW5lVmlldy5tZWFzdXJlLmNhY2hlID0ge307XG4gICAgICBsaW5lVmlldy5tZWFzdXJlLmhlaWdodHMgPSBudWxsO1xuICAgICAgaWYgKGxpbmVWaWV3LnJlc3QpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lVmlldy5yZXN0Lmxlbmd0aDsgaSsrKVxuICAgICAgICB7IGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGVzW2ldID0ge307IH0gfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyTGluZU1lYXN1cmVtZW50Q2FjaGUoY20pIHtcbiAgICBjbS5kaXNwbGF5LmV4dGVybmFsTWVhc3VyZSA9IG51bGw7XG4gICAgcmVtb3ZlQ2hpbGRyZW4oY20uZGlzcGxheS5saW5lTWVhc3VyZSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbS5kaXNwbGF5LnZpZXcubGVuZ3RoOyBpKyspXG4gICAgICB7IGNsZWFyTGluZU1lYXN1cmVtZW50Q2FjaGVGb3IoY20uZGlzcGxheS52aWV3W2ldKTsgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2xlYXJDYWNoZXMoY20pIHtcbiAgICBjbGVhckxpbmVNZWFzdXJlbWVudENhY2hlKGNtKTtcbiAgICBjbS5kaXNwbGF5LmNhY2hlZENoYXJXaWR0aCA9IGNtLmRpc3BsYXkuY2FjaGVkVGV4dEhlaWdodCA9IGNtLmRpc3BsYXkuY2FjaGVkUGFkZGluZ0ggPSBudWxsO1xuICAgIGlmICghY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIHsgY20uZGlzcGxheS5tYXhMaW5lQ2hhbmdlZCA9IHRydWU7IH1cbiAgICBjbS5kaXNwbGF5LmxpbmVOdW1DaGFycyA9IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBwYWdlU2Nyb2xsWCgpIHtcbiAgICAvLyBXb3JrIGFyb3VuZCBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00ODkyMDZcbiAgICAvLyB3aGljaCBjYXVzZXMgcGFnZV9PZmZzZXQgYW5kIGJvdW5kaW5nIGNsaWVudCByZWN0cyB0byB1c2VcbiAgICAvLyBkaWZmZXJlbnQgcmVmZXJlbmNlIHZpZXdwb3J0cyBhbmQgaW52YWxpZGF0ZSBvdXIgY2FsY3VsYXRpb25zLlxuICAgIGlmIChjaHJvbWUgJiYgYW5kcm9pZCkgeyByZXR1cm4gLShkb2N1bWVudC5ib2R5LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLSBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLm1hcmdpbkxlZnQpKSB9XG4gICAgcmV0dXJuIHdpbmRvdy5wYWdlWE9mZnNldCB8fCAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkpLnNjcm9sbExlZnRcbiAgfVxuICBmdW5jdGlvbiBwYWdlU2Nyb2xsWSgpIHtcbiAgICBpZiAoY2hyb21lICYmIGFuZHJvaWQpIHsgcmV0dXJuIC0oZG9jdW1lbnQuYm9keS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLm1hcmdpblRvcCkpIH1cbiAgICByZXR1cm4gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keSkuc2Nyb2xsVG9wXG4gIH1cblxuICBmdW5jdGlvbiB3aWRnZXRUb3BIZWlnaHQobGluZU9iaikge1xuICAgIHZhciBoZWlnaHQgPSAwO1xuICAgIGlmIChsaW5lT2JqLndpZGdldHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lT2JqLndpZGdldHMubGVuZ3RoOyArK2kpIHsgaWYgKGxpbmVPYmoud2lkZ2V0c1tpXS5hYm92ZSlcbiAgICAgIHsgaGVpZ2h0ICs9IHdpZGdldEhlaWdodChsaW5lT2JqLndpZGdldHNbaV0pOyB9IH0gfVxuICAgIHJldHVybiBoZWlnaHRcbiAgfVxuXG4gIC8vIENvbnZlcnRzIGEge3RvcCwgYm90dG9tLCBsZWZ0LCByaWdodH0gYm94IGZyb20gbGluZS1sb2NhbFxuICAvLyBjb29yZGluYXRlcyBpbnRvIGFub3RoZXIgY29vcmRpbmF0ZSBzeXN0ZW0uIENvbnRleHQgbWF5IGJlIG9uZSBvZlxuICAvLyBcImxpbmVcIiwgXCJkaXZcIiAoZGlzcGxheS5saW5lRGl2KSwgXCJsb2NhbFwiLi9udWxsIChlZGl0b3IpLCBcIndpbmRvd1wiLFxuICAvLyBvciBcInBhZ2VcIi5cbiAgZnVuY3Rpb24gaW50b0Nvb3JkU3lzdGVtKGNtLCBsaW5lT2JqLCByZWN0LCBjb250ZXh0LCBpbmNsdWRlV2lkZ2V0cykge1xuICAgIGlmICghaW5jbHVkZVdpZGdldHMpIHtcbiAgICAgIHZhciBoZWlnaHQgPSB3aWRnZXRUb3BIZWlnaHQobGluZU9iaik7XG4gICAgICByZWN0LnRvcCArPSBoZWlnaHQ7IHJlY3QuYm90dG9tICs9IGhlaWdodDtcbiAgICB9XG4gICAgaWYgKGNvbnRleHQgPT0gXCJsaW5lXCIpIHsgcmV0dXJuIHJlY3QgfVxuICAgIGlmICghY29udGV4dCkgeyBjb250ZXh0ID0gXCJsb2NhbFwiOyB9XG4gICAgdmFyIHlPZmYgPSBoZWlnaHRBdExpbmUobGluZU9iaik7XG4gICAgaWYgKGNvbnRleHQgPT0gXCJsb2NhbFwiKSB7IHlPZmYgKz0gcGFkZGluZ1RvcChjbS5kaXNwbGF5KTsgfVxuICAgIGVsc2UgeyB5T2ZmIC09IGNtLmRpc3BsYXkudmlld09mZnNldDsgfVxuICAgIGlmIChjb250ZXh0ID09IFwicGFnZVwiIHx8IGNvbnRleHQgPT0gXCJ3aW5kb3dcIikge1xuICAgICAgdmFyIGxPZmYgPSBjbS5kaXNwbGF5LmxpbmVTcGFjZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHlPZmYgKz0gbE9mZi50b3AgKyAoY29udGV4dCA9PSBcIndpbmRvd1wiID8gMCA6IHBhZ2VTY3JvbGxZKCkpO1xuICAgICAgdmFyIHhPZmYgPSBsT2ZmLmxlZnQgKyAoY29udGV4dCA9PSBcIndpbmRvd1wiID8gMCA6IHBhZ2VTY3JvbGxYKCkpO1xuICAgICAgcmVjdC5sZWZ0ICs9IHhPZmY7IHJlY3QucmlnaHQgKz0geE9mZjtcbiAgICB9XG4gICAgcmVjdC50b3AgKz0geU9mZjsgcmVjdC5ib3R0b20gKz0geU9mZjtcbiAgICByZXR1cm4gcmVjdFxuICB9XG5cbiAgLy8gQ292ZXJ0cyBhIGJveCBmcm9tIFwiZGl2XCIgY29vcmRzIHRvIGFub3RoZXIgY29vcmRpbmF0ZSBzeXN0ZW0uXG4gIC8vIENvbnRleHQgbWF5IGJlIFwid2luZG93XCIsIFwicGFnZVwiLCBcImRpdlwiLCBvciBcImxvY2FsXCIuL251bGwuXG4gIGZ1bmN0aW9uIGZyb21Db29yZFN5c3RlbShjbSwgY29vcmRzLCBjb250ZXh0KSB7XG4gICAgaWYgKGNvbnRleHQgPT0gXCJkaXZcIikgeyByZXR1cm4gY29vcmRzIH1cbiAgICB2YXIgbGVmdCA9IGNvb3Jkcy5sZWZ0LCB0b3AgPSBjb29yZHMudG9wO1xuICAgIC8vIEZpcnN0IG1vdmUgaW50byBcInBhZ2VcIiBjb29yZGluYXRlIHN5c3RlbVxuICAgIGlmIChjb250ZXh0ID09IFwicGFnZVwiKSB7XG4gICAgICBsZWZ0IC09IHBhZ2VTY3JvbGxYKCk7XG4gICAgICB0b3AgLT0gcGFnZVNjcm9sbFkoKTtcbiAgICB9IGVsc2UgaWYgKGNvbnRleHQgPT0gXCJsb2NhbFwiIHx8ICFjb250ZXh0KSB7XG4gICAgICB2YXIgbG9jYWxCb3ggPSBjbS5kaXNwbGF5LnNpemVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgbGVmdCArPSBsb2NhbEJveC5sZWZ0O1xuICAgICAgdG9wICs9IGxvY2FsQm94LnRvcDtcbiAgICB9XG5cbiAgICB2YXIgbGluZVNwYWNlQm94ID0gY20uZGlzcGxheS5saW5lU3BhY2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuIHtsZWZ0OiBsZWZ0IC0gbGluZVNwYWNlQm94LmxlZnQsIHRvcDogdG9wIC0gbGluZVNwYWNlQm94LnRvcH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNoYXJDb29yZHMoY20sIHBvcywgY29udGV4dCwgbGluZU9iaiwgYmlhcykge1xuICAgIGlmICghbGluZU9iaikgeyBsaW5lT2JqID0gZ2V0TGluZShjbS5kb2MsIHBvcy5saW5lKTsgfVxuICAgIHJldHVybiBpbnRvQ29vcmRTeXN0ZW0oY20sIGxpbmVPYmosIG1lYXN1cmVDaGFyKGNtLCBsaW5lT2JqLCBwb3MuY2gsIGJpYXMpLCBjb250ZXh0KVxuICB9XG5cbiAgLy8gUmV0dXJucyBhIGJveCBmb3IgYSBnaXZlbiBjdXJzb3IgcG9zaXRpb24sIHdoaWNoIG1heSBoYXZlIGFuXG4gIC8vICdvdGhlcicgcHJvcGVydHkgY29udGFpbmluZyB0aGUgcG9zaXRpb24gb2YgdGhlIHNlY29uZGFyeSBjdXJzb3JcbiAgLy8gb24gYSBiaWRpIGJvdW5kYXJ5LlxuICAvLyBBIGN1cnNvciBQb3MobGluZSwgY2hhciwgXCJiZWZvcmVcIikgaXMgb24gdGhlIHNhbWUgdmlzdWFsIGxpbmUgYXMgYGNoYXIgLSAxYFxuICAvLyBhbmQgYWZ0ZXIgYGNoYXIgLSAxYCBpbiB3cml0aW5nIG9yZGVyIG9mIGBjaGFyIC0gMWBcbiAgLy8gQSBjdXJzb3IgUG9zKGxpbmUsIGNoYXIsIFwiYWZ0ZXJcIikgaXMgb24gdGhlIHNhbWUgdmlzdWFsIGxpbmUgYXMgYGNoYXJgXG4gIC8vIGFuZCBiZWZvcmUgYGNoYXJgIGluIHdyaXRpbmcgb3JkZXIgb2YgYGNoYXJgXG4gIC8vIEV4YW1wbGVzICh1cHBlci1jYXNlIGxldHRlcnMgYXJlIFJUTCwgbG93ZXItY2FzZSBhcmUgTFRSKTpcbiAgLy8gICAgIFBvcygwLCAxLCAuLi4pXG4gIC8vICAgICBiZWZvcmUgICBhZnRlclxuICAvLyBhYiAgICAgYXxiICAgICBhfGJcbiAgLy8gYUIgICAgIGF8QiAgICAgYUJ8XG4gIC8vIEFiICAgICB8QWIgICAgIEF8YlxuICAvLyBBQiAgICAgQnxBICAgICBCfEFcbiAgLy8gRXZlcnkgcG9zaXRpb24gYWZ0ZXIgdGhlIGxhc3QgY2hhcmFjdGVyIG9uIGEgbGluZSBpcyBjb25zaWRlcmVkIHRvIHN0aWNrXG4gIC8vIHRvIHRoZSBsYXN0IGNoYXJhY3RlciBvbiB0aGUgbGluZS5cbiAgZnVuY3Rpb24gY3Vyc29yQ29vcmRzKGNtLCBwb3MsIGNvbnRleHQsIGxpbmVPYmosIHByZXBhcmVkTWVhc3VyZSwgdmFySGVpZ2h0KSB7XG4gICAgbGluZU9iaiA9IGxpbmVPYmogfHwgZ2V0TGluZShjbS5kb2MsIHBvcy5saW5lKTtcbiAgICBpZiAoIXByZXBhcmVkTWVhc3VyZSkgeyBwcmVwYXJlZE1lYXN1cmUgPSBwcmVwYXJlTWVhc3VyZUZvckxpbmUoY20sIGxpbmVPYmopOyB9XG4gICAgZnVuY3Rpb24gZ2V0KGNoLCByaWdodCkge1xuICAgICAgdmFyIG0gPSBtZWFzdXJlQ2hhclByZXBhcmVkKGNtLCBwcmVwYXJlZE1lYXN1cmUsIGNoLCByaWdodCA/IFwicmlnaHRcIiA6IFwibGVmdFwiLCB2YXJIZWlnaHQpO1xuICAgICAgaWYgKHJpZ2h0KSB7IG0ubGVmdCA9IG0ucmlnaHQ7IH0gZWxzZSB7IG0ucmlnaHQgPSBtLmxlZnQ7IH1cbiAgICAgIHJldHVybiBpbnRvQ29vcmRTeXN0ZW0oY20sIGxpbmVPYmosIG0sIGNvbnRleHQpXG4gICAgfVxuICAgIHZhciBvcmRlciA9IGdldE9yZGVyKGxpbmVPYmosIGNtLmRvYy5kaXJlY3Rpb24pLCBjaCA9IHBvcy5jaCwgc3RpY2t5ID0gcG9zLnN0aWNreTtcbiAgICBpZiAoY2ggPj0gbGluZU9iai50ZXh0Lmxlbmd0aCkge1xuICAgICAgY2ggPSBsaW5lT2JqLnRleHQubGVuZ3RoO1xuICAgICAgc3RpY2t5ID0gXCJiZWZvcmVcIjtcbiAgICB9IGVsc2UgaWYgKGNoIDw9IDApIHtcbiAgICAgIGNoID0gMDtcbiAgICAgIHN0aWNreSA9IFwiYWZ0ZXJcIjtcbiAgICB9XG4gICAgaWYgKCFvcmRlcikgeyByZXR1cm4gZ2V0KHN0aWNreSA9PSBcImJlZm9yZVwiID8gY2ggLSAxIDogY2gsIHN0aWNreSA9PSBcImJlZm9yZVwiKSB9XG5cbiAgICBmdW5jdGlvbiBnZXRCaWRpKGNoLCBwYXJ0UG9zLCBpbnZlcnQpIHtcbiAgICAgIHZhciBwYXJ0ID0gb3JkZXJbcGFydFBvc10sIHJpZ2h0ID0gcGFydC5sZXZlbCA9PSAxO1xuICAgICAgcmV0dXJuIGdldChpbnZlcnQgPyBjaCAtIDEgOiBjaCwgcmlnaHQgIT0gaW52ZXJ0KVxuICAgIH1cbiAgICB2YXIgcGFydFBvcyA9IGdldEJpZGlQYXJ0QXQob3JkZXIsIGNoLCBzdGlja3kpO1xuICAgIHZhciBvdGhlciA9IGJpZGlPdGhlcjtcbiAgICB2YXIgdmFsID0gZ2V0QmlkaShjaCwgcGFydFBvcywgc3RpY2t5ID09IFwiYmVmb3JlXCIpO1xuICAgIGlmIChvdGhlciAhPSBudWxsKSB7IHZhbC5vdGhlciA9IGdldEJpZGkoY2gsIG90aGVyLCBzdGlja3kgIT0gXCJiZWZvcmVcIik7IH1cbiAgICByZXR1cm4gdmFsXG4gIH1cblxuICAvLyBVc2VkIHRvIGNoZWFwbHkgZXN0aW1hdGUgdGhlIGNvb3JkaW5hdGVzIGZvciBhIHBvc2l0aW9uLiBVc2VkIGZvclxuICAvLyBpbnRlcm1lZGlhdGUgc2Nyb2xsIHVwZGF0ZXMuXG4gIGZ1bmN0aW9uIGVzdGltYXRlQ29vcmRzKGNtLCBwb3MpIHtcbiAgICB2YXIgbGVmdCA9IDA7XG4gICAgcG9zID0gY2xpcFBvcyhjbS5kb2MsIHBvcyk7XG4gICAgaWYgKCFjbS5vcHRpb25zLmxpbmVXcmFwcGluZykgeyBsZWZ0ID0gY2hhcldpZHRoKGNtLmRpc3BsYXkpICogcG9zLmNoOyB9XG4gICAgdmFyIGxpbmVPYmogPSBnZXRMaW5lKGNtLmRvYywgcG9zLmxpbmUpO1xuICAgIHZhciB0b3AgPSBoZWlnaHRBdExpbmUobGluZU9iaikgKyBwYWRkaW5nVG9wKGNtLmRpc3BsYXkpO1xuICAgIHJldHVybiB7bGVmdDogbGVmdCwgcmlnaHQ6IGxlZnQsIHRvcDogdG9wLCBib3R0b206IHRvcCArIGxpbmVPYmouaGVpZ2h0fVxuICB9XG5cbiAgLy8gUG9zaXRpb25zIHJldHVybmVkIGJ5IGNvb3Jkc0NoYXIgY29udGFpbiBzb21lIGV4dHJhIGluZm9ybWF0aW9uLlxuICAvLyB4UmVsIGlzIHRoZSByZWxhdGl2ZSB4IHBvc2l0aW9uIG9mIHRoZSBpbnB1dCBjb29yZGluYXRlcyBjb21wYXJlZFxuICAvLyB0byB0aGUgZm91bmQgcG9zaXRpb24gKHNvIHhSZWwgPiAwIG1lYW5zIHRoZSBjb29yZGluYXRlcyBhcmUgdG9cbiAgLy8gdGhlIHJpZ2h0IG9mIHRoZSBjaGFyYWN0ZXIgcG9zaXRpb24sIGZvciBleGFtcGxlKS4gV2hlbiBvdXRzaWRlXG4gIC8vIGlzIHRydWUsIHRoYXQgbWVhbnMgdGhlIGNvb3JkaW5hdGVzIGxpZSBvdXRzaWRlIHRoZSBsaW5lJ3NcbiAgLy8gdmVydGljYWwgcmFuZ2UuXG4gIGZ1bmN0aW9uIFBvc1dpdGhJbmZvKGxpbmUsIGNoLCBzdGlja3ksIG91dHNpZGUsIHhSZWwpIHtcbiAgICB2YXIgcG9zID0gUG9zKGxpbmUsIGNoLCBzdGlja3kpO1xuICAgIHBvcy54UmVsID0geFJlbDtcbiAgICBpZiAob3V0c2lkZSkgeyBwb3Mub3V0c2lkZSA9IG91dHNpZGU7IH1cbiAgICByZXR1cm4gcG9zXG4gIH1cblxuICAvLyBDb21wdXRlIHRoZSBjaGFyYWN0ZXIgcG9zaXRpb24gY2xvc2VzdCB0byB0aGUgZ2l2ZW4gY29vcmRpbmF0ZXMuXG4gIC8vIElucHV0IG11c3QgYmUgbGluZVNwYWNlLWxvY2FsIChcImRpdlwiIGNvb3JkaW5hdGUgc3lzdGVtKS5cbiAgZnVuY3Rpb24gY29vcmRzQ2hhcihjbSwgeCwgeSkge1xuICAgIHZhciBkb2MgPSBjbS5kb2M7XG4gICAgeSArPSBjbS5kaXNwbGF5LnZpZXdPZmZzZXQ7XG4gICAgaWYgKHkgPCAwKSB7IHJldHVybiBQb3NXaXRoSW5mbyhkb2MuZmlyc3QsIDAsIG51bGwsIC0xLCAtMSkgfVxuICAgIHZhciBsaW5lTiA9IGxpbmVBdEhlaWdodChkb2MsIHkpLCBsYXN0ID0gZG9jLmZpcnN0ICsgZG9jLnNpemUgLSAxO1xuICAgIGlmIChsaW5lTiA+IGxhc3QpXG4gICAgICB7IHJldHVybiBQb3NXaXRoSW5mbyhkb2MuZmlyc3QgKyBkb2Muc2l6ZSAtIDEsIGdldExpbmUoZG9jLCBsYXN0KS50ZXh0Lmxlbmd0aCwgbnVsbCwgMSwgMSkgfVxuICAgIGlmICh4IDwgMCkgeyB4ID0gMDsgfVxuXG4gICAgdmFyIGxpbmVPYmogPSBnZXRMaW5lKGRvYywgbGluZU4pO1xuICAgIGZvciAoOzspIHtcbiAgICAgIHZhciBmb3VuZCA9IGNvb3Jkc0NoYXJJbm5lcihjbSwgbGluZU9iaiwgbGluZU4sIHgsIHkpO1xuICAgICAgdmFyIGNvbGxhcHNlZCA9IGNvbGxhcHNlZFNwYW5Bcm91bmQobGluZU9iaiwgZm91bmQuY2ggKyAoZm91bmQueFJlbCA+IDAgfHwgZm91bmQub3V0c2lkZSA+IDAgPyAxIDogMCkpO1xuICAgICAgaWYgKCFjb2xsYXBzZWQpIHsgcmV0dXJuIGZvdW5kIH1cbiAgICAgIHZhciByYW5nZUVuZCA9IGNvbGxhcHNlZC5maW5kKDEpO1xuICAgICAgaWYgKHJhbmdlRW5kLmxpbmUgPT0gbGluZU4pIHsgcmV0dXJuIHJhbmdlRW5kIH1cbiAgICAgIGxpbmVPYmogPSBnZXRMaW5lKGRvYywgbGluZU4gPSByYW5nZUVuZC5saW5lKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB3cmFwcGVkTGluZUV4dGVudChjbSwgbGluZU9iaiwgcHJlcGFyZWRNZWFzdXJlLCB5KSB7XG4gICAgeSAtPSB3aWRnZXRUb3BIZWlnaHQobGluZU9iaik7XG4gICAgdmFyIGVuZCA9IGxpbmVPYmoudGV4dC5sZW5ndGg7XG4gICAgdmFyIGJlZ2luID0gZmluZEZpcnN0KGZ1bmN0aW9uIChjaCkgeyByZXR1cm4gbWVhc3VyZUNoYXJQcmVwYXJlZChjbSwgcHJlcGFyZWRNZWFzdXJlLCBjaCAtIDEpLmJvdHRvbSA8PSB5OyB9LCBlbmQsIDApO1xuICAgIGVuZCA9IGZpbmRGaXJzdChmdW5jdGlvbiAoY2gpIHsgcmV0dXJuIG1lYXN1cmVDaGFyUHJlcGFyZWQoY20sIHByZXBhcmVkTWVhc3VyZSwgY2gpLnRvcCA+IHk7IH0sIGJlZ2luLCBlbmQpO1xuICAgIHJldHVybiB7YmVnaW46IGJlZ2luLCBlbmQ6IGVuZH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHdyYXBwZWRMaW5lRXh0ZW50Q2hhcihjbSwgbGluZU9iaiwgcHJlcGFyZWRNZWFzdXJlLCB0YXJnZXQpIHtcbiAgICBpZiAoIXByZXBhcmVkTWVhc3VyZSkgeyBwcmVwYXJlZE1lYXN1cmUgPSBwcmVwYXJlTWVhc3VyZUZvckxpbmUoY20sIGxpbmVPYmopOyB9XG4gICAgdmFyIHRhcmdldFRvcCA9IGludG9Db29yZFN5c3RlbShjbSwgbGluZU9iaiwgbWVhc3VyZUNoYXJQcmVwYXJlZChjbSwgcHJlcGFyZWRNZWFzdXJlLCB0YXJnZXQpLCBcImxpbmVcIikudG9wO1xuICAgIHJldHVybiB3cmFwcGVkTGluZUV4dGVudChjbSwgbGluZU9iaiwgcHJlcGFyZWRNZWFzdXJlLCB0YXJnZXRUb3ApXG4gIH1cblxuICAvLyBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIHNpZGUgb2YgYSBib3ggaXMgYWZ0ZXIgdGhlIGdpdmVuXG4gIC8vIGNvb3JkaW5hdGVzLCBpbiB0b3AtdG8tYm90dG9tLCBsZWZ0LXRvLXJpZ2h0IG9yZGVyLlxuICBmdW5jdGlvbiBib3hJc0FmdGVyKGJveCwgeCwgeSwgbGVmdCkge1xuICAgIHJldHVybiBib3guYm90dG9tIDw9IHkgPyBmYWxzZSA6IGJveC50b3AgPiB5ID8gdHJ1ZSA6IChsZWZ0ID8gYm94LmxlZnQgOiBib3gucmlnaHQpID4geFxuICB9XG5cbiAgZnVuY3Rpb24gY29vcmRzQ2hhcklubmVyKGNtLCBsaW5lT2JqLCBsaW5lTm8sIHgsIHkpIHtcbiAgICAvLyBNb3ZlIHkgaW50byBsaW5lLWxvY2FsIGNvb3JkaW5hdGUgc3BhY2VcbiAgICB5IC09IGhlaWdodEF0TGluZShsaW5lT2JqKTtcbiAgICB2YXIgcHJlcGFyZWRNZWFzdXJlID0gcHJlcGFyZU1lYXN1cmVGb3JMaW5lKGNtLCBsaW5lT2JqKTtcbiAgICAvLyBXaGVuIGRpcmVjdGx5IGNhbGxpbmcgYG1lYXN1cmVDaGFyUHJlcGFyZWRgLCB3ZSBoYXZlIHRvIGFkanVzdFxuICAgIC8vIGZvciB0aGUgd2lkZ2V0cyBhdCB0aGlzIGxpbmUuXG4gICAgdmFyIHdpZGdldEhlaWdodCA9IHdpZGdldFRvcEhlaWdodChsaW5lT2JqKTtcbiAgICB2YXIgYmVnaW4gPSAwLCBlbmQgPSBsaW5lT2JqLnRleHQubGVuZ3RoLCBsdHIgPSB0cnVlO1xuXG4gICAgdmFyIG9yZGVyID0gZ2V0T3JkZXIobGluZU9iaiwgY20uZG9jLmRpcmVjdGlvbik7XG4gICAgLy8gSWYgdGhlIGxpbmUgaXNuJ3QgcGxhaW4gbGVmdC10by1yaWdodCB0ZXh0LCBmaXJzdCBmaWd1cmUgb3V0XG4gICAgLy8gd2hpY2ggYmlkaSBzZWN0aW9uIHRoZSBjb29yZGluYXRlcyBmYWxsIGludG8uXG4gICAgaWYgKG9yZGVyKSB7XG4gICAgICB2YXIgcGFydCA9IChjbS5vcHRpb25zLmxpbmVXcmFwcGluZyA/IGNvb3Jkc0JpZGlQYXJ0V3JhcHBlZCA6IGNvb3Jkc0JpZGlQYXJ0KVxuICAgICAgICAgICAgICAgICAgIChjbSwgbGluZU9iaiwgbGluZU5vLCBwcmVwYXJlZE1lYXN1cmUsIG9yZGVyLCB4LCB5KTtcbiAgICAgIGx0ciA9IHBhcnQubGV2ZWwgIT0gMTtcbiAgICAgIC8vIFRoZSBhd2t3YXJkIC0xIG9mZnNldHMgYXJlIG5lZWRlZCBiZWNhdXNlIGZpbmRGaXJzdCAoY2FsbGVkXG4gICAgICAvLyBvbiB0aGVzZSBiZWxvdykgd2lsbCB0cmVhdCBpdHMgZmlyc3QgYm91bmQgYXMgaW5jbHVzaXZlLFxuICAgICAgLy8gc2Vjb25kIGFzIGV4Y2x1c2l2ZSwgYnV0IHdlIHdhbnQgdG8gYWN0dWFsbHkgYWRkcmVzcyB0aGVcbiAgICAgIC8vIGNoYXJhY3RlcnMgaW4gdGhlIHBhcnQncyByYW5nZVxuICAgICAgYmVnaW4gPSBsdHIgPyBwYXJ0LmZyb20gOiBwYXJ0LnRvIC0gMTtcbiAgICAgIGVuZCA9IGx0ciA/IHBhcnQudG8gOiBwYXJ0LmZyb20gLSAxO1xuICAgIH1cblxuICAgIC8vIEEgYmluYXJ5IHNlYXJjaCB0byBmaW5kIHRoZSBmaXJzdCBjaGFyYWN0ZXIgd2hvc2UgYm91bmRpbmcgYm94XG4gICAgLy8gc3RhcnRzIGFmdGVyIHRoZSBjb29yZGluYXRlcy4gSWYgd2UgcnVuIGFjcm9zcyBhbnkgd2hvc2UgYm94IHdyYXBcbiAgICAvLyB0aGUgY29vcmRpbmF0ZXMsIHN0b3JlIHRoYXQuXG4gICAgdmFyIGNoQXJvdW5kID0gbnVsbCwgYm94QXJvdW5kID0gbnVsbDtcbiAgICB2YXIgY2ggPSBmaW5kRmlyc3QoZnVuY3Rpb24gKGNoKSB7XG4gICAgICB2YXIgYm94ID0gbWVhc3VyZUNoYXJQcmVwYXJlZChjbSwgcHJlcGFyZWRNZWFzdXJlLCBjaCk7XG4gICAgICBib3gudG9wICs9IHdpZGdldEhlaWdodDsgYm94LmJvdHRvbSArPSB3aWRnZXRIZWlnaHQ7XG4gICAgICBpZiAoIWJveElzQWZ0ZXIoYm94LCB4LCB5LCBmYWxzZSkpIHsgcmV0dXJuIGZhbHNlIH1cbiAgICAgIGlmIChib3gudG9wIDw9IHkgJiYgYm94LmxlZnQgPD0geCkge1xuICAgICAgICBjaEFyb3VuZCA9IGNoO1xuICAgICAgICBib3hBcm91bmQgPSBib3g7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sIGJlZ2luLCBlbmQpO1xuXG4gICAgdmFyIGJhc2VYLCBzdGlja3ksIG91dHNpZGUgPSBmYWxzZTtcbiAgICAvLyBJZiBhIGJveCBhcm91bmQgdGhlIGNvb3JkaW5hdGVzIHdhcyBmb3VuZCwgdXNlIHRoYXRcbiAgICBpZiAoYm94QXJvdW5kKSB7XG4gICAgICAvLyBEaXN0aW5ndWlzaCBjb29yZGluYXRlcyBuZWFyZXIgdG8gdGhlIGxlZnQgb3IgcmlnaHQgc2lkZSBvZiB0aGUgYm94XG4gICAgICB2YXIgYXRMZWZ0ID0geCAtIGJveEFyb3VuZC5sZWZ0IDwgYm94QXJvdW5kLnJpZ2h0IC0geCwgYXRTdGFydCA9IGF0TGVmdCA9PSBsdHI7XG4gICAgICBjaCA9IGNoQXJvdW5kICsgKGF0U3RhcnQgPyAwIDogMSk7XG4gICAgICBzdGlja3kgPSBhdFN0YXJ0ID8gXCJhZnRlclwiIDogXCJiZWZvcmVcIjtcbiAgICAgIGJhc2VYID0gYXRMZWZ0ID8gYm94QXJvdW5kLmxlZnQgOiBib3hBcm91bmQucmlnaHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIChBZGp1c3QgZm9yIGV4dGVuZGVkIGJvdW5kLCBpZiBuZWNlc3NhcnkuKVxuICAgICAgaWYgKCFsdHIgJiYgKGNoID09IGVuZCB8fCBjaCA9PSBiZWdpbikpIHsgY2grKzsgfVxuICAgICAgLy8gVG8gZGV0ZXJtaW5lIHdoaWNoIHNpZGUgdG8gYXNzb2NpYXRlIHdpdGgsIGdldCB0aGUgYm94IHRvIHRoZVxuICAgICAgLy8gbGVmdCBvZiB0aGUgY2hhcmFjdGVyIGFuZCBjb21wYXJlIGl0J3MgdmVydGljYWwgcG9zaXRpb24gdG8gdGhlXG4gICAgICAvLyBjb29yZGluYXRlc1xuICAgICAgc3RpY2t5ID0gY2ggPT0gMCA/IFwiYWZ0ZXJcIiA6IGNoID09IGxpbmVPYmoudGV4dC5sZW5ndGggPyBcImJlZm9yZVwiIDpcbiAgICAgICAgKG1lYXN1cmVDaGFyUHJlcGFyZWQoY20sIHByZXBhcmVkTWVhc3VyZSwgY2ggLSAobHRyID8gMSA6IDApKS5ib3R0b20gKyB3aWRnZXRIZWlnaHQgPD0geSkgPT0gbHRyID9cbiAgICAgICAgXCJhZnRlclwiIDogXCJiZWZvcmVcIjtcbiAgICAgIC8vIE5vdyBnZXQgYWNjdXJhdGUgY29vcmRpbmF0ZXMgZm9yIHRoaXMgcGxhY2UsIGluIG9yZGVyIHRvIGdldCBhXG4gICAgICAvLyBiYXNlIFggcG9zaXRpb25cbiAgICAgIHZhciBjb29yZHMgPSBjdXJzb3JDb29yZHMoY20sIFBvcyhsaW5lTm8sIGNoLCBzdGlja3kpLCBcImxpbmVcIiwgbGluZU9iaiwgcHJlcGFyZWRNZWFzdXJlKTtcbiAgICAgIGJhc2VYID0gY29vcmRzLmxlZnQ7XG4gICAgICBvdXRzaWRlID0geSA8IGNvb3Jkcy50b3AgPyAtMSA6IHkgPj0gY29vcmRzLmJvdHRvbSA/IDEgOiAwO1xuICAgIH1cblxuICAgIGNoID0gc2tpcEV4dGVuZGluZ0NoYXJzKGxpbmVPYmoudGV4dCwgY2gsIDEpO1xuICAgIHJldHVybiBQb3NXaXRoSW5mbyhsaW5lTm8sIGNoLCBzdGlja3ksIG91dHNpZGUsIHggLSBiYXNlWClcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvb3Jkc0JpZGlQYXJ0KGNtLCBsaW5lT2JqLCBsaW5lTm8sIHByZXBhcmVkTWVhc3VyZSwgb3JkZXIsIHgsIHkpIHtcbiAgICAvLyBCaWRpIHBhcnRzIGFyZSBzb3J0ZWQgbGVmdC10by1yaWdodCwgYW5kIGluIGEgbm9uLWxpbmUtd3JhcHBpbmdcbiAgICAvLyBzaXR1YXRpb24sIHdlIGNhbiB0YWtlIHRoaXMgb3JkZXJpbmcgdG8gY29ycmVzcG9uZCB0byB0aGUgdmlzdWFsXG4gICAgLy8gb3JkZXJpbmcuIFRoaXMgZmluZHMgdGhlIGZpcnN0IHBhcnQgd2hvc2UgZW5kIGlzIGFmdGVyIHRoZSBnaXZlblxuICAgIC8vIGNvb3JkaW5hdGVzLlxuICAgIHZhciBpbmRleCA9IGZpbmRGaXJzdChmdW5jdGlvbiAoaSkge1xuICAgICAgdmFyIHBhcnQgPSBvcmRlcltpXSwgbHRyID0gcGFydC5sZXZlbCAhPSAxO1xuICAgICAgcmV0dXJuIGJveElzQWZ0ZXIoY3Vyc29yQ29vcmRzKGNtLCBQb3MobGluZU5vLCBsdHIgPyBwYXJ0LnRvIDogcGFydC5mcm9tLCBsdHIgPyBcImJlZm9yZVwiIDogXCJhZnRlclwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxpbmVcIiwgbGluZU9iaiwgcHJlcGFyZWRNZWFzdXJlKSwgeCwgeSwgdHJ1ZSlcbiAgICB9LCAwLCBvcmRlci5sZW5ndGggLSAxKTtcbiAgICB2YXIgcGFydCA9IG9yZGVyW2luZGV4XTtcbiAgICAvLyBJZiB0aGlzIGlzbid0IHRoZSBmaXJzdCBwYXJ0LCB0aGUgcGFydCdzIHN0YXJ0IGlzIGFsc28gYWZ0ZXJcbiAgICAvLyB0aGUgY29vcmRpbmF0ZXMsIGFuZCB0aGUgY29vcmRpbmF0ZXMgYXJlbid0IG9uIHRoZSBzYW1lIGxpbmUgYXNcbiAgICAvLyB0aGF0IHN0YXJ0LCBtb3ZlIG9uZSBwYXJ0IGJhY2suXG4gICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgdmFyIGx0ciA9IHBhcnQubGV2ZWwgIT0gMTtcbiAgICAgIHZhciBzdGFydCA9IGN1cnNvckNvb3JkcyhjbSwgUG9zKGxpbmVObywgbHRyID8gcGFydC5mcm9tIDogcGFydC50bywgbHRyID8gXCJhZnRlclwiIDogXCJiZWZvcmVcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJsaW5lXCIsIGxpbmVPYmosIHByZXBhcmVkTWVhc3VyZSk7XG4gICAgICBpZiAoYm94SXNBZnRlcihzdGFydCwgeCwgeSwgdHJ1ZSkgJiYgc3RhcnQudG9wID4geSlcbiAgICAgICAgeyBwYXJ0ID0gb3JkZXJbaW5kZXggLSAxXTsgfVxuICAgIH1cbiAgICByZXR1cm4gcGFydFxuICB9XG5cbiAgZnVuY3Rpb24gY29vcmRzQmlkaVBhcnRXcmFwcGVkKGNtLCBsaW5lT2JqLCBfbGluZU5vLCBwcmVwYXJlZE1lYXN1cmUsIG9yZGVyLCB4LCB5KSB7XG4gICAgLy8gSW4gYSB3cmFwcGVkIGxpbmUsIHJ0bCB0ZXh0IG9uIHdyYXBwaW5nIGJvdW5kYXJpZXMgY2FuIGRvIHRoaW5nc1xuICAgIC8vIHRoYXQgZG9uJ3QgY29ycmVzcG9uZCB0byB0aGUgb3JkZXJpbmcgaW4gb3VyIGBvcmRlcmAgYXJyYXkgYXRcbiAgICAvLyBhbGwsIHNvIGEgYmluYXJ5IHNlYXJjaCBkb2Vzbid0IHdvcmssIGFuZCB3ZSB3YW50IHRvIHJldHVybiBhXG4gICAgLy8gcGFydCB0aGF0IG9ubHkgc3BhbnMgb25lIGxpbmUgc28gdGhhdCB0aGUgYmluYXJ5IHNlYXJjaCBpblxuICAgIC8vIGNvb3Jkc0NoYXJJbm5lciBpcyBzYWZlLiBBcyBzdWNoLCB3ZSBmaXJzdCBmaW5kIHRoZSBleHRlbnQgb2YgdGhlXG4gICAgLy8gd3JhcHBlZCBsaW5lLCBhbmQgdGhlbiBkbyBhIGZsYXQgc2VhcmNoIGluIHdoaWNoIHdlIGRpc2NhcmQgYW55XG4gICAgLy8gc3BhbnMgdGhhdCBhcmVuJ3Qgb24gdGhlIGxpbmUuXG4gICAgdmFyIHJlZiA9IHdyYXBwZWRMaW5lRXh0ZW50KGNtLCBsaW5lT2JqLCBwcmVwYXJlZE1lYXN1cmUsIHkpO1xuICAgIHZhciBiZWdpbiA9IHJlZi5iZWdpbjtcbiAgICB2YXIgZW5kID0gcmVmLmVuZDtcbiAgICBpZiAoL1xccy8udGVzdChsaW5lT2JqLnRleHQuY2hhckF0KGVuZCAtIDEpKSkgeyBlbmQtLTsgfVxuICAgIHZhciBwYXJ0ID0gbnVsbCwgY2xvc2VzdERpc3QgPSBudWxsO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3JkZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBwID0gb3JkZXJbaV07XG4gICAgICBpZiAocC5mcm9tID49IGVuZCB8fCBwLnRvIDw9IGJlZ2luKSB7IGNvbnRpbnVlIH1cbiAgICAgIHZhciBsdHIgPSBwLmxldmVsICE9IDE7XG4gICAgICB2YXIgZW5kWCA9IG1lYXN1cmVDaGFyUHJlcGFyZWQoY20sIHByZXBhcmVkTWVhc3VyZSwgbHRyID8gTWF0aC5taW4oZW5kLCBwLnRvKSAtIDEgOiBNYXRoLm1heChiZWdpbiwgcC5mcm9tKSkucmlnaHQ7XG4gICAgICAvLyBXZWlnaCBhZ2FpbnN0IHNwYW5zIGVuZGluZyBiZWZvcmUgdGhpcywgc28gdGhhdCB0aGV5IGFyZSBvbmx5XG4gICAgICAvLyBwaWNrZWQgaWYgbm90aGluZyBlbmRzIGFmdGVyXG4gICAgICB2YXIgZGlzdCA9IGVuZFggPCB4ID8geCAtIGVuZFggKyAxZTkgOiBlbmRYIC0geDtcbiAgICAgIGlmICghcGFydCB8fCBjbG9zZXN0RGlzdCA+IGRpc3QpIHtcbiAgICAgICAgcGFydCA9IHA7XG4gICAgICAgIGNsb3Nlc3REaXN0ID0gZGlzdDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFwYXJ0KSB7IHBhcnQgPSBvcmRlcltvcmRlci5sZW5ndGggLSAxXTsgfVxuICAgIC8vIENsaXAgdGhlIHBhcnQgdG8gdGhlIHdyYXBwZWQgbGluZS5cbiAgICBpZiAocGFydC5mcm9tIDwgYmVnaW4pIHsgcGFydCA9IHtmcm9tOiBiZWdpbiwgdG86IHBhcnQudG8sIGxldmVsOiBwYXJ0LmxldmVsfTsgfVxuICAgIGlmIChwYXJ0LnRvID4gZW5kKSB7IHBhcnQgPSB7ZnJvbTogcGFydC5mcm9tLCB0bzogZW5kLCBsZXZlbDogcGFydC5sZXZlbH07IH1cbiAgICByZXR1cm4gcGFydFxuICB9XG5cbiAgdmFyIG1lYXN1cmVUZXh0O1xuICAvLyBDb21wdXRlIHRoZSBkZWZhdWx0IHRleHQgaGVpZ2h0LlxuICBmdW5jdGlvbiB0ZXh0SGVpZ2h0KGRpc3BsYXkpIHtcbiAgICBpZiAoZGlzcGxheS5jYWNoZWRUZXh0SGVpZ2h0ICE9IG51bGwpIHsgcmV0dXJuIGRpc3BsYXkuY2FjaGVkVGV4dEhlaWdodCB9XG4gICAgaWYgKG1lYXN1cmVUZXh0ID09IG51bGwpIHtcbiAgICAgIG1lYXN1cmVUZXh0ID0gZWx0KFwicHJlXCIsIG51bGwsIFwiQ29kZU1pcnJvci1saW5lLWxpa2VcIik7XG4gICAgICAvLyBNZWFzdXJlIGEgYnVuY2ggb2YgbGluZXMsIGZvciBicm93c2VycyB0aGF0IGNvbXB1dGVcbiAgICAgIC8vIGZyYWN0aW9uYWwgaGVpZ2h0cy5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDk7ICsraSkge1xuICAgICAgICBtZWFzdXJlVGV4dC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcInhcIikpO1xuICAgICAgICBtZWFzdXJlVGV4dC5hcHBlbmRDaGlsZChlbHQoXCJiclwiKSk7XG4gICAgICB9XG4gICAgICBtZWFzdXJlVGV4dC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcInhcIikpO1xuICAgIH1cbiAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChkaXNwbGF5Lm1lYXN1cmUsIG1lYXN1cmVUZXh0KTtcbiAgICB2YXIgaGVpZ2h0ID0gbWVhc3VyZVRleHQub2Zmc2V0SGVpZ2h0IC8gNTA7XG4gICAgaWYgKGhlaWdodCA+IDMpIHsgZGlzcGxheS5jYWNoZWRUZXh0SGVpZ2h0ID0gaGVpZ2h0OyB9XG4gICAgcmVtb3ZlQ2hpbGRyZW4oZGlzcGxheS5tZWFzdXJlKTtcbiAgICByZXR1cm4gaGVpZ2h0IHx8IDFcbiAgfVxuXG4gIC8vIENvbXB1dGUgdGhlIGRlZmF1bHQgY2hhcmFjdGVyIHdpZHRoLlxuICBmdW5jdGlvbiBjaGFyV2lkdGgoZGlzcGxheSkge1xuICAgIGlmIChkaXNwbGF5LmNhY2hlZENoYXJXaWR0aCAhPSBudWxsKSB7IHJldHVybiBkaXNwbGF5LmNhY2hlZENoYXJXaWR0aCB9XG4gICAgdmFyIGFuY2hvciA9IGVsdChcInNwYW5cIiwgXCJ4eHh4eHh4eHh4XCIpO1xuICAgIHZhciBwcmUgPSBlbHQoXCJwcmVcIiwgW2FuY2hvcl0sIFwiQ29kZU1pcnJvci1saW5lLWxpa2VcIik7XG4gICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQoZGlzcGxheS5tZWFzdXJlLCBwcmUpO1xuICAgIHZhciByZWN0ID0gYW5jaG9yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCB3aWR0aCA9IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KSAvIDEwO1xuICAgIGlmICh3aWR0aCA+IDIpIHsgZGlzcGxheS5jYWNoZWRDaGFyV2lkdGggPSB3aWR0aDsgfVxuICAgIHJldHVybiB3aWR0aCB8fCAxMFxuICB9XG5cbiAgLy8gRG8gYSBidWxrLXJlYWQgb2YgdGhlIERPTSBwb3NpdGlvbnMgYW5kIHNpemVzIG5lZWRlZCB0byBkcmF3IHRoZVxuICAvLyB2aWV3LCBzbyB0aGF0IHdlIGRvbid0IGludGVybGVhdmUgcmVhZGluZyBhbmQgd3JpdGluZyB0byB0aGUgRE9NLlxuICBmdW5jdGlvbiBnZXREaW1lbnNpb25zKGNtKSB7XG4gICAgdmFyIGQgPSBjbS5kaXNwbGF5LCBsZWZ0ID0ge30sIHdpZHRoID0ge307XG4gICAgdmFyIGd1dHRlckxlZnQgPSBkLmd1dHRlcnMuY2xpZW50TGVmdDtcbiAgICBmb3IgKHZhciBuID0gZC5ndXR0ZXJzLmZpcnN0Q2hpbGQsIGkgPSAwOyBuOyBuID0gbi5uZXh0U2libGluZywgKytpKSB7XG4gICAgICB2YXIgaWQgPSBjbS5kaXNwbGF5Lmd1dHRlclNwZWNzW2ldLmNsYXNzTmFtZTtcbiAgICAgIGxlZnRbaWRdID0gbi5vZmZzZXRMZWZ0ICsgbi5jbGllbnRMZWZ0ICsgZ3V0dGVyTGVmdDtcbiAgICAgIHdpZHRoW2lkXSA9IG4uY2xpZW50V2lkdGg7XG4gICAgfVxuICAgIHJldHVybiB7Zml4ZWRQb3M6IGNvbXBlbnNhdGVGb3JIU2Nyb2xsKGQpLFxuICAgICAgICAgICAgZ3V0dGVyVG90YWxXaWR0aDogZC5ndXR0ZXJzLm9mZnNldFdpZHRoLFxuICAgICAgICAgICAgZ3V0dGVyTGVmdDogbGVmdCxcbiAgICAgICAgICAgIGd1dHRlcldpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgIHdyYXBwZXJXaWR0aDogZC53cmFwcGVyLmNsaWVudFdpZHRofVxuICB9XG5cbiAgLy8gQ29tcHV0ZXMgZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0ICsgZGlzcGxheS5ndXR0ZXJzLm9mZnNldFdpZHRoLFxuICAvLyBidXQgdXNpbmcgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IHRvIGdldCBhIHN1Yi1waXhlbC1hY2N1cmF0ZVxuICAvLyByZXN1bHQuXG4gIGZ1bmN0aW9uIGNvbXBlbnNhdGVGb3JIU2Nyb2xsKGRpc3BsYXkpIHtcbiAgICByZXR1cm4gZGlzcGxheS5zY3JvbGxlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC0gZGlzcGxheS5zaXplci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0XG4gIH1cblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBlc3RpbWF0ZXMgdGhlIGhlaWdodCBvZiBhIGxpbmUsIHRvIHVzZSBhc1xuICAvLyBmaXJzdCBhcHByb3hpbWF0aW9uIHVudGlsIHRoZSBsaW5lIGJlY29tZXMgdmlzaWJsZSAoYW5kIGlzIHRodXNcbiAgLy8gcHJvcGVybHkgbWVhc3VyYWJsZSkuXG4gIGZ1bmN0aW9uIGVzdGltYXRlSGVpZ2h0KGNtKSB7XG4gICAgdmFyIHRoID0gdGV4dEhlaWdodChjbS5kaXNwbGF5KSwgd3JhcHBpbmcgPSBjbS5vcHRpb25zLmxpbmVXcmFwcGluZztcbiAgICB2YXIgcGVyTGluZSA9IHdyYXBwaW5nICYmIE1hdGgubWF4KDUsIGNtLmRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50V2lkdGggLyBjaGFyV2lkdGgoY20uZGlzcGxheSkgLSAzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgIGlmIChsaW5lSXNIaWRkZW4oY20uZG9jLCBsaW5lKSkgeyByZXR1cm4gMCB9XG5cbiAgICAgIHZhciB3aWRnZXRzSGVpZ2h0ID0gMDtcbiAgICAgIGlmIChsaW5lLndpZGdldHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lLndpZGdldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGxpbmUud2lkZ2V0c1tpXS5oZWlnaHQpIHsgd2lkZ2V0c0hlaWdodCArPSBsaW5lLndpZGdldHNbaV0uaGVpZ2h0OyB9XG4gICAgICB9IH1cblxuICAgICAgaWYgKHdyYXBwaW5nKVxuICAgICAgICB7IHJldHVybiB3aWRnZXRzSGVpZ2h0ICsgKE1hdGguY2VpbChsaW5lLnRleHQubGVuZ3RoIC8gcGVyTGluZSkgfHwgMSkgKiB0aCB9XG4gICAgICBlbHNlXG4gICAgICAgIHsgcmV0dXJuIHdpZGdldHNIZWlnaHQgKyB0aCB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZXN0aW1hdGVMaW5lSGVpZ2h0cyhjbSkge1xuICAgIHZhciBkb2MgPSBjbS5kb2MsIGVzdCA9IGVzdGltYXRlSGVpZ2h0KGNtKTtcbiAgICBkb2MuaXRlcihmdW5jdGlvbiAobGluZSkge1xuICAgICAgdmFyIGVzdEhlaWdodCA9IGVzdChsaW5lKTtcbiAgICAgIGlmIChlc3RIZWlnaHQgIT0gbGluZS5oZWlnaHQpIHsgdXBkYXRlTGluZUhlaWdodChsaW5lLCBlc3RIZWlnaHQpOyB9XG4gICAgfSk7XG4gIH1cblxuICAvLyBHaXZlbiBhIG1vdXNlIGV2ZW50LCBmaW5kIHRoZSBjb3JyZXNwb25kaW5nIHBvc2l0aW9uLiBJZiBsaWJlcmFsXG4gIC8vIGlzIGZhbHNlLCBpdCBjaGVja3Mgd2hldGhlciBhIGd1dHRlciBvciBzY3JvbGxiYXIgd2FzIGNsaWNrZWQsXG4gIC8vIGFuZCByZXR1cm5zIG51bGwgaWYgaXQgd2FzLiBmb3JSZWN0IGlzIHVzZWQgYnkgcmVjdGFuZ3VsYXJcbiAgLy8gc2VsZWN0aW9ucywgYW5kIHRyaWVzIHRvIGVzdGltYXRlIGEgY2hhcmFjdGVyIHBvc2l0aW9uIGV2ZW4gZm9yXG4gIC8vIGNvb3JkaW5hdGVzIGJleW9uZCB0aGUgcmlnaHQgb2YgdGhlIHRleHQuXG4gIGZ1bmN0aW9uIHBvc0Zyb21Nb3VzZShjbSwgZSwgbGliZXJhbCwgZm9yUmVjdCkge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICBpZiAoIWxpYmVyYWwgJiYgZV90YXJnZXQoZSkuZ2V0QXR0cmlidXRlKFwiY20tbm90LWNvbnRlbnRcIikgPT0gXCJ0cnVlXCIpIHsgcmV0dXJuIG51bGwgfVxuXG4gICAgdmFyIHgsIHksIHNwYWNlID0gZGlzcGxheS5saW5lU3BhY2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgLy8gRmFpbHMgdW5wcmVkaWN0YWJseSBvbiBJRVs2N10gd2hlbiBtb3VzZSBpcyBkcmFnZ2VkIGFyb3VuZCBxdWlja2x5LlxuICAgIHRyeSB7IHggPSBlLmNsaWVudFggLSBzcGFjZS5sZWZ0OyB5ID0gZS5jbGllbnRZIC0gc3BhY2UudG9wOyB9XG4gICAgY2F0Y2ggKGUkMSkgeyByZXR1cm4gbnVsbCB9XG4gICAgdmFyIGNvb3JkcyA9IGNvb3Jkc0NoYXIoY20sIHgsIHkpLCBsaW5lO1xuICAgIGlmIChmb3JSZWN0ICYmIGNvb3Jkcy54UmVsID4gMCAmJiAobGluZSA9IGdldExpbmUoY20uZG9jLCBjb29yZHMubGluZSkudGV4dCkubGVuZ3RoID09IGNvb3Jkcy5jaCkge1xuICAgICAgdmFyIGNvbERpZmYgPSBjb3VudENvbHVtbihsaW5lLCBsaW5lLmxlbmd0aCwgY20ub3B0aW9ucy50YWJTaXplKSAtIGxpbmUubGVuZ3RoO1xuICAgICAgY29vcmRzID0gUG9zKGNvb3Jkcy5saW5lLCBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKCh4IC0gcGFkZGluZ0goY20uZGlzcGxheSkubGVmdCkgLyBjaGFyV2lkdGgoY20uZGlzcGxheSkpIC0gY29sRGlmZikpO1xuICAgIH1cbiAgICByZXR1cm4gY29vcmRzXG4gIH1cblxuICAvLyBGaW5kIHRoZSB2aWV3IGVsZW1lbnQgY29ycmVzcG9uZGluZyB0byBhIGdpdmVuIGxpbmUuIFJldHVybiBudWxsXG4gIC8vIHdoZW4gdGhlIGxpbmUgaXNuJ3QgdmlzaWJsZS5cbiAgZnVuY3Rpb24gZmluZFZpZXdJbmRleChjbSwgbikge1xuICAgIGlmIChuID49IGNtLmRpc3BsYXkudmlld1RvKSB7IHJldHVybiBudWxsIH1cbiAgICBuIC09IGNtLmRpc3BsYXkudmlld0Zyb207XG4gICAgaWYgKG4gPCAwKSB7IHJldHVybiBudWxsIH1cbiAgICB2YXIgdmlldyA9IGNtLmRpc3BsYXkudmlldztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgIG4gLT0gdmlld1tpXS5zaXplO1xuICAgICAgaWYgKG4gPCAwKSB7IHJldHVybiBpIH1cbiAgICB9XG4gIH1cblxuICAvLyBVcGRhdGVzIHRoZSBkaXNwbGF5LnZpZXcgZGF0YSBzdHJ1Y3R1cmUgZm9yIGEgZ2l2ZW4gY2hhbmdlIHRvIHRoZVxuICAvLyBkb2N1bWVudC4gRnJvbSBhbmQgdG8gYXJlIGluIHByZS1jaGFuZ2UgY29vcmRpbmF0ZXMuIExlbmRpZmYgaXNcbiAgLy8gdGhlIGFtb3VudCBvZiBsaW5lcyBhZGRlZCBvciBzdWJ0cmFjdGVkIGJ5IHRoZSBjaGFuZ2UuIFRoaXMgaXNcbiAgLy8gdXNlZCBmb3IgY2hhbmdlcyB0aGF0IHNwYW4gbXVsdGlwbGUgbGluZXMsIG9yIGNoYW5nZSB0aGUgd2F5XG4gIC8vIGxpbmVzIGFyZSBkaXZpZGVkIGludG8gdmlzdWFsIGxpbmVzLiByZWdMaW5lQ2hhbmdlIChiZWxvdylcbiAgLy8gcmVnaXN0ZXJzIHNpbmdsZS1saW5lIGNoYW5nZXMuXG4gIGZ1bmN0aW9uIHJlZ0NoYW5nZShjbSwgZnJvbSwgdG8sIGxlbmRpZmYpIHtcbiAgICBpZiAoZnJvbSA9PSBudWxsKSB7IGZyb20gPSBjbS5kb2MuZmlyc3Q7IH1cbiAgICBpZiAodG8gPT0gbnVsbCkgeyB0byA9IGNtLmRvYy5maXJzdCArIGNtLmRvYy5zaXplOyB9XG4gICAgaWYgKCFsZW5kaWZmKSB7IGxlbmRpZmYgPSAwOyB9XG5cbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG4gICAgaWYgKGxlbmRpZmYgJiYgdG8gPCBkaXNwbGF5LnZpZXdUbyAmJlxuICAgICAgICAoZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA9PSBudWxsIHx8IGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPiBmcm9tKSlcbiAgICAgIHsgZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA9IGZyb207IH1cblxuICAgIGNtLmN1ck9wLnZpZXdDaGFuZ2VkID0gdHJ1ZTtcblxuICAgIGlmIChmcm9tID49IGRpc3BsYXkudmlld1RvKSB7IC8vIENoYW5nZSBhZnRlclxuICAgICAgaWYgKHNhd0NvbGxhcHNlZFNwYW5zICYmIHZpc3VhbExpbmVObyhjbS5kb2MsIGZyb20pIDwgZGlzcGxheS52aWV3VG8pXG4gICAgICAgIHsgcmVzZXRWaWV3KGNtKTsgfVxuICAgIH0gZWxzZSBpZiAodG8gPD0gZGlzcGxheS52aWV3RnJvbSkgeyAvLyBDaGFuZ2UgYmVmb3JlXG4gICAgICBpZiAoc2F3Q29sbGFwc2VkU3BhbnMgJiYgdmlzdWFsTGluZUVuZE5vKGNtLmRvYywgdG8gKyBsZW5kaWZmKSA+IGRpc3BsYXkudmlld0Zyb20pIHtcbiAgICAgICAgcmVzZXRWaWV3KGNtKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpc3BsYXkudmlld0Zyb20gKz0gbGVuZGlmZjtcbiAgICAgICAgZGlzcGxheS52aWV3VG8gKz0gbGVuZGlmZjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGZyb20gPD0gZGlzcGxheS52aWV3RnJvbSAmJiB0byA+PSBkaXNwbGF5LnZpZXdUbykgeyAvLyBGdWxsIG92ZXJsYXBcbiAgICAgIHJlc2V0VmlldyhjbSk7XG4gICAgfSBlbHNlIGlmIChmcm9tIDw9IGRpc3BsYXkudmlld0Zyb20pIHsgLy8gVG9wIG92ZXJsYXBcbiAgICAgIHZhciBjdXQgPSB2aWV3Q3V0dGluZ1BvaW50KGNtLCB0bywgdG8gKyBsZW5kaWZmLCAxKTtcbiAgICAgIGlmIChjdXQpIHtcbiAgICAgICAgZGlzcGxheS52aWV3ID0gZGlzcGxheS52aWV3LnNsaWNlKGN1dC5pbmRleCk7XG4gICAgICAgIGRpc3BsYXkudmlld0Zyb20gPSBjdXQubGluZU47XG4gICAgICAgIGRpc3BsYXkudmlld1RvICs9IGxlbmRpZmY7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNldFZpZXcoY20pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodG8gPj0gZGlzcGxheS52aWV3VG8pIHsgLy8gQm90dG9tIG92ZXJsYXBcbiAgICAgIHZhciBjdXQkMSA9IHZpZXdDdXR0aW5nUG9pbnQoY20sIGZyb20sIGZyb20sIC0xKTtcbiAgICAgIGlmIChjdXQkMSkge1xuICAgICAgICBkaXNwbGF5LnZpZXcgPSBkaXNwbGF5LnZpZXcuc2xpY2UoMCwgY3V0JDEuaW5kZXgpO1xuICAgICAgICBkaXNwbGF5LnZpZXdUbyA9IGN1dCQxLmxpbmVOO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzZXRWaWV3KGNtKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgeyAvLyBHYXAgaW4gdGhlIG1pZGRsZVxuICAgICAgdmFyIGN1dFRvcCA9IHZpZXdDdXR0aW5nUG9pbnQoY20sIGZyb20sIGZyb20sIC0xKTtcbiAgICAgIHZhciBjdXRCb3QgPSB2aWV3Q3V0dGluZ1BvaW50KGNtLCB0bywgdG8gKyBsZW5kaWZmLCAxKTtcbiAgICAgIGlmIChjdXRUb3AgJiYgY3V0Qm90KSB7XG4gICAgICAgIGRpc3BsYXkudmlldyA9IGRpc3BsYXkudmlldy5zbGljZSgwLCBjdXRUb3AuaW5kZXgpXG4gICAgICAgICAgLmNvbmNhdChidWlsZFZpZXdBcnJheShjbSwgY3V0VG9wLmxpbmVOLCBjdXRCb3QubGluZU4pKVxuICAgICAgICAgIC5jb25jYXQoZGlzcGxheS52aWV3LnNsaWNlKGN1dEJvdC5pbmRleCkpO1xuICAgICAgICBkaXNwbGF5LnZpZXdUbyArPSBsZW5kaWZmO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzZXRWaWV3KGNtKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZXh0ID0gZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkO1xuICAgIGlmIChleHQpIHtcbiAgICAgIGlmICh0byA8IGV4dC5saW5lTilcbiAgICAgICAgeyBleHQubGluZU4gKz0gbGVuZGlmZjsgfVxuICAgICAgZWxzZSBpZiAoZnJvbSA8IGV4dC5saW5lTiArIGV4dC5zaXplKVxuICAgICAgICB7IGRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZCA9IG51bGw7IH1cbiAgICB9XG4gIH1cblxuICAvLyBSZWdpc3RlciBhIGNoYW5nZSB0byBhIHNpbmdsZSBsaW5lLiBUeXBlIG11c3QgYmUgb25lIG9mIFwidGV4dFwiLFxuICAvLyBcImd1dHRlclwiLCBcImNsYXNzXCIsIFwid2lkZ2V0XCJcbiAgZnVuY3Rpb24gcmVnTGluZUNoYW5nZShjbSwgbGluZSwgdHlwZSkge1xuICAgIGNtLmN1ck9wLnZpZXdDaGFuZ2VkID0gdHJ1ZTtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGV4dCA9IGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZDtcbiAgICBpZiAoZXh0ICYmIGxpbmUgPj0gZXh0LmxpbmVOICYmIGxpbmUgPCBleHQubGluZU4gKyBleHQuc2l6ZSlcbiAgICAgIHsgZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkID0gbnVsbDsgfVxuXG4gICAgaWYgKGxpbmUgPCBkaXNwbGF5LnZpZXdGcm9tIHx8IGxpbmUgPj0gZGlzcGxheS52aWV3VG8pIHsgcmV0dXJuIH1cbiAgICB2YXIgbGluZVZpZXcgPSBkaXNwbGF5LnZpZXdbZmluZFZpZXdJbmRleChjbSwgbGluZSldO1xuICAgIGlmIChsaW5lVmlldy5ub2RlID09IG51bGwpIHsgcmV0dXJuIH1cbiAgICB2YXIgYXJyID0gbGluZVZpZXcuY2hhbmdlcyB8fCAobGluZVZpZXcuY2hhbmdlcyA9IFtdKTtcbiAgICBpZiAoaW5kZXhPZihhcnIsIHR5cGUpID09IC0xKSB7IGFyci5wdXNoKHR5cGUpOyB9XG4gIH1cblxuICAvLyBDbGVhciB0aGUgdmlldy5cbiAgZnVuY3Rpb24gcmVzZXRWaWV3KGNtKSB7XG4gICAgY20uZGlzcGxheS52aWV3RnJvbSA9IGNtLmRpc3BsYXkudmlld1RvID0gY20uZG9jLmZpcnN0O1xuICAgIGNtLmRpc3BsYXkudmlldyA9IFtdO1xuICAgIGNtLmRpc3BsYXkudmlld09mZnNldCA9IDA7XG4gIH1cblxuICBmdW5jdGlvbiB2aWV3Q3V0dGluZ1BvaW50KGNtLCBvbGROLCBuZXdOLCBkaXIpIHtcbiAgICB2YXIgaW5kZXggPSBmaW5kVmlld0luZGV4KGNtLCBvbGROKSwgZGlmZiwgdmlldyA9IGNtLmRpc3BsYXkudmlldztcbiAgICBpZiAoIXNhd0NvbGxhcHNlZFNwYW5zIHx8IG5ld04gPT0gY20uZG9jLmZpcnN0ICsgY20uZG9jLnNpemUpXG4gICAgICB7IHJldHVybiB7aW5kZXg6IGluZGV4LCBsaW5lTjogbmV3Tn0gfVxuICAgIHZhciBuID0gY20uZGlzcGxheS52aWV3RnJvbTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluZGV4OyBpKyspXG4gICAgICB7IG4gKz0gdmlld1tpXS5zaXplOyB9XG4gICAgaWYgKG4gIT0gb2xkTikge1xuICAgICAgaWYgKGRpciA+IDApIHtcbiAgICAgICAgaWYgKGluZGV4ID09IHZpZXcubGVuZ3RoIC0gMSkgeyByZXR1cm4gbnVsbCB9XG4gICAgICAgIGRpZmYgPSAobiArIHZpZXdbaW5kZXhdLnNpemUpIC0gb2xkTjtcbiAgICAgICAgaW5kZXgrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpZmYgPSBuIC0gb2xkTjtcbiAgICAgIH1cbiAgICAgIG9sZE4gKz0gZGlmZjsgbmV3TiArPSBkaWZmO1xuICAgIH1cbiAgICB3aGlsZSAodmlzdWFsTGluZU5vKGNtLmRvYywgbmV3TikgIT0gbmV3Tikge1xuICAgICAgaWYgKGluZGV4ID09IChkaXIgPCAwID8gMCA6IHZpZXcubGVuZ3RoIC0gMSkpIHsgcmV0dXJuIG51bGwgfVxuICAgICAgbmV3TiArPSBkaXIgKiB2aWV3W2luZGV4IC0gKGRpciA8IDAgPyAxIDogMCldLnNpemU7XG4gICAgICBpbmRleCArPSBkaXI7XG4gICAgfVxuICAgIHJldHVybiB7aW5kZXg6IGluZGV4LCBsaW5lTjogbmV3Tn1cbiAgfVxuXG4gIC8vIEZvcmNlIHRoZSB2aWV3IHRvIGNvdmVyIGEgZ2l2ZW4gcmFuZ2UsIGFkZGluZyBlbXB0eSB2aWV3IGVsZW1lbnRcbiAgLy8gb3IgY2xpcHBpbmcgb2ZmIGV4aXN0aW5nIG9uZXMgYXMgbmVlZGVkLlxuICBmdW5jdGlvbiBhZGp1c3RWaWV3KGNtLCBmcm9tLCB0bykge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgdmlldyA9IGRpc3BsYXkudmlldztcbiAgICBpZiAodmlldy5sZW5ndGggPT0gMCB8fCBmcm9tID49IGRpc3BsYXkudmlld1RvIHx8IHRvIDw9IGRpc3BsYXkudmlld0Zyb20pIHtcbiAgICAgIGRpc3BsYXkudmlldyA9IGJ1aWxkVmlld0FycmF5KGNtLCBmcm9tLCB0byk7XG4gICAgICBkaXNwbGF5LnZpZXdGcm9tID0gZnJvbTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGRpc3BsYXkudmlld0Zyb20gPiBmcm9tKVxuICAgICAgICB7IGRpc3BsYXkudmlldyA9IGJ1aWxkVmlld0FycmF5KGNtLCBmcm9tLCBkaXNwbGF5LnZpZXdGcm9tKS5jb25jYXQoZGlzcGxheS52aWV3KTsgfVxuICAgICAgZWxzZSBpZiAoZGlzcGxheS52aWV3RnJvbSA8IGZyb20pXG4gICAgICAgIHsgZGlzcGxheS52aWV3ID0gZGlzcGxheS52aWV3LnNsaWNlKGZpbmRWaWV3SW5kZXgoY20sIGZyb20pKTsgfVxuICAgICAgZGlzcGxheS52aWV3RnJvbSA9IGZyb207XG4gICAgICBpZiAoZGlzcGxheS52aWV3VG8gPCB0bylcbiAgICAgICAgeyBkaXNwbGF5LnZpZXcgPSBkaXNwbGF5LnZpZXcuY29uY2F0KGJ1aWxkVmlld0FycmF5KGNtLCBkaXNwbGF5LnZpZXdUbywgdG8pKTsgfVxuICAgICAgZWxzZSBpZiAoZGlzcGxheS52aWV3VG8gPiB0bylcbiAgICAgICAgeyBkaXNwbGF5LnZpZXcgPSBkaXNwbGF5LnZpZXcuc2xpY2UoMCwgZmluZFZpZXdJbmRleChjbSwgdG8pKTsgfVxuICAgIH1cbiAgICBkaXNwbGF5LnZpZXdUbyA9IHRvO1xuICB9XG5cbiAgLy8gQ291bnQgdGhlIG51bWJlciBvZiBsaW5lcyBpbiB0aGUgdmlldyB3aG9zZSBET00gcmVwcmVzZW50YXRpb24gaXNcbiAgLy8gb3V0IG9mIGRhdGUgKG9yIG5vbmV4aXN0ZW50KS5cbiAgZnVuY3Rpb24gY291bnREaXJ0eVZpZXcoY20pIHtcbiAgICB2YXIgdmlldyA9IGNtLmRpc3BsYXkudmlldywgZGlydHkgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGxpbmVWaWV3ID0gdmlld1tpXTtcbiAgICAgIGlmICghbGluZVZpZXcuaGlkZGVuICYmICghbGluZVZpZXcubm9kZSB8fCBsaW5lVmlldy5jaGFuZ2VzKSkgeyArK2RpcnR5OyB9XG4gICAgfVxuICAgIHJldHVybiBkaXJ0eVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlU2VsZWN0aW9uKGNtKSB7XG4gICAgY20uZGlzcGxheS5pbnB1dC5zaG93U2VsZWN0aW9uKGNtLmRpc3BsYXkuaW5wdXQucHJlcGFyZVNlbGVjdGlvbigpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByZXBhcmVTZWxlY3Rpb24oY20sIHByaW1hcnkpIHtcbiAgICBpZiAoIHByaW1hcnkgPT09IHZvaWQgMCApIHByaW1hcnkgPSB0cnVlO1xuXG4gICAgdmFyIGRvYyA9IGNtLmRvYywgcmVzdWx0ID0ge307XG4gICAgdmFyIGN1ckZyYWdtZW50ID0gcmVzdWx0LmN1cnNvcnMgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgdmFyIHNlbEZyYWdtZW50ID0gcmVzdWx0LnNlbGVjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLnNlbC5yYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghcHJpbWFyeSAmJiBpID09IGRvYy5zZWwucHJpbUluZGV4KSB7IGNvbnRpbnVlIH1cbiAgICAgIHZhciByYW5nZSA9IGRvYy5zZWwucmFuZ2VzW2ldO1xuICAgICAgaWYgKHJhbmdlLmZyb20oKS5saW5lID49IGNtLmRpc3BsYXkudmlld1RvIHx8IHJhbmdlLnRvKCkubGluZSA8IGNtLmRpc3BsYXkudmlld0Zyb20pIHsgY29udGludWUgfVxuICAgICAgdmFyIGNvbGxhcHNlZCA9IHJhbmdlLmVtcHR5KCk7XG4gICAgICBpZiAoY29sbGFwc2VkIHx8IGNtLm9wdGlvbnMuc2hvd0N1cnNvcldoZW5TZWxlY3RpbmcpXG4gICAgICAgIHsgZHJhd1NlbGVjdGlvbkN1cnNvcihjbSwgcmFuZ2UuaGVhZCwgY3VyRnJhZ21lbnQpOyB9XG4gICAgICBpZiAoIWNvbGxhcHNlZClcbiAgICAgICAgeyBkcmF3U2VsZWN0aW9uUmFuZ2UoY20sIHJhbmdlLCBzZWxGcmFnbWVudCk7IH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgLy8gRHJhd3MgYSBjdXJzb3IgZm9yIHRoZSBnaXZlbiByYW5nZVxuICBmdW5jdGlvbiBkcmF3U2VsZWN0aW9uQ3Vyc29yKGNtLCBoZWFkLCBvdXRwdXQpIHtcbiAgICB2YXIgcG9zID0gY3Vyc29yQ29vcmRzKGNtLCBoZWFkLCBcImRpdlwiLCBudWxsLCBudWxsLCAhY20ub3B0aW9ucy5zaW5nbGVDdXJzb3JIZWlnaHRQZXJMaW5lKTtcblxuICAgIHZhciBjdXJzb3IgPSBvdXRwdXQuYXBwZW5kQ2hpbGQoZWx0KFwiZGl2XCIsIFwiXFx1MDBhMFwiLCBcIkNvZGVNaXJyb3ItY3Vyc29yXCIpKTtcbiAgICBjdXJzb3Iuc3R5bGUubGVmdCA9IHBvcy5sZWZ0ICsgXCJweFwiO1xuICAgIGN1cnNvci5zdHlsZS50b3AgPSBwb3MudG9wICsgXCJweFwiO1xuICAgIGN1cnNvci5zdHlsZS5oZWlnaHQgPSBNYXRoLm1heCgwLCBwb3MuYm90dG9tIC0gcG9zLnRvcCkgKiBjbS5vcHRpb25zLmN1cnNvckhlaWdodCArIFwicHhcIjtcblxuICAgIGlmIChwb3Mub3RoZXIpIHtcbiAgICAgIC8vIFNlY29uZGFyeSBjdXJzb3IsIHNob3duIHdoZW4gb24gYSAnanVtcCcgaW4gYmktZGlyZWN0aW9uYWwgdGV4dFxuICAgICAgdmFyIG90aGVyQ3Vyc29yID0gb3V0cHV0LmFwcGVuZENoaWxkKGVsdChcImRpdlwiLCBcIlxcdTAwYTBcIiwgXCJDb2RlTWlycm9yLWN1cnNvciBDb2RlTWlycm9yLXNlY29uZGFyeWN1cnNvclwiKSk7XG4gICAgICBvdGhlckN1cnNvci5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICAgIG90aGVyQ3Vyc29yLnN0eWxlLmxlZnQgPSBwb3Mub3RoZXIubGVmdCArIFwicHhcIjtcbiAgICAgIG90aGVyQ3Vyc29yLnN0eWxlLnRvcCA9IHBvcy5vdGhlci50b3AgKyBcInB4XCI7XG4gICAgICBvdGhlckN1cnNvci5zdHlsZS5oZWlnaHQgPSAocG9zLm90aGVyLmJvdHRvbSAtIHBvcy5vdGhlci50b3ApICogLjg1ICsgXCJweFwiO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNtcENvb3JkcyhhLCBiKSB7IHJldHVybiBhLnRvcCAtIGIudG9wIHx8IGEubGVmdCAtIGIubGVmdCB9XG5cbiAgLy8gRHJhd3MgdGhlIGdpdmVuIHJhbmdlIGFzIGEgaGlnaGxpZ2h0ZWQgc2VsZWN0aW9uXG4gIGZ1bmN0aW9uIGRyYXdTZWxlY3Rpb25SYW5nZShjbSwgcmFuZ2UsIG91dHB1dCkge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgZG9jID0gY20uZG9jO1xuICAgIHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICB2YXIgcGFkZGluZyA9IHBhZGRpbmdIKGNtLmRpc3BsYXkpLCBsZWZ0U2lkZSA9IHBhZGRpbmcubGVmdDtcbiAgICB2YXIgcmlnaHRTaWRlID0gTWF0aC5tYXgoZGlzcGxheS5zaXplcldpZHRoLCBkaXNwbGF5V2lkdGgoY20pIC0gZGlzcGxheS5zaXplci5vZmZzZXRMZWZ0KSAtIHBhZGRpbmcucmlnaHQ7XG4gICAgdmFyIGRvY0xUUiA9IGRvYy5kaXJlY3Rpb24gPT0gXCJsdHJcIjtcblxuICAgIGZ1bmN0aW9uIGFkZChsZWZ0LCB0b3AsIHdpZHRoLCBib3R0b20pIHtcbiAgICAgIGlmICh0b3AgPCAwKSB7IHRvcCA9IDA7IH1cbiAgICAgIHRvcCA9IE1hdGgucm91bmQodG9wKTtcbiAgICAgIGJvdHRvbSA9IE1hdGgucm91bmQoYm90dG9tKTtcbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3Itc2VsZWN0ZWRcIiwgKFwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiBcIiArIGxlZnQgKyBcInB4O1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBcIiArIHRvcCArIFwicHg7IHdpZHRoOiBcIiArICh3aWR0aCA9PSBudWxsID8gcmlnaHRTaWRlIC0gbGVmdCA6IHdpZHRoKSArIFwicHg7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IFwiICsgKGJvdHRvbSAtIHRvcCkgKyBcInB4XCIpKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZHJhd0ZvckxpbmUobGluZSwgZnJvbUFyZywgdG9BcmcpIHtcbiAgICAgIHZhciBsaW5lT2JqID0gZ2V0TGluZShkb2MsIGxpbmUpO1xuICAgICAgdmFyIGxpbmVMZW4gPSBsaW5lT2JqLnRleHQubGVuZ3RoO1xuICAgICAgdmFyIHN0YXJ0LCBlbmQ7XG4gICAgICBmdW5jdGlvbiBjb29yZHMoY2gsIGJpYXMpIHtcbiAgICAgICAgcmV0dXJuIGNoYXJDb29yZHMoY20sIFBvcyhsaW5lLCBjaCksIFwiZGl2XCIsIGxpbmVPYmosIGJpYXMpXG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHdyYXBYKHBvcywgZGlyLCBzaWRlKSB7XG4gICAgICAgIHZhciBleHRlbnQgPSB3cmFwcGVkTGluZUV4dGVudENoYXIoY20sIGxpbmVPYmosIG51bGwsIHBvcyk7XG4gICAgICAgIHZhciBwcm9wID0gKGRpciA9PSBcImx0clwiKSA9PSAoc2lkZSA9PSBcImFmdGVyXCIpID8gXCJsZWZ0XCIgOiBcInJpZ2h0XCI7XG4gICAgICAgIHZhciBjaCA9IHNpZGUgPT0gXCJhZnRlclwiID8gZXh0ZW50LmJlZ2luIDogZXh0ZW50LmVuZCAtICgvXFxzLy50ZXN0KGxpbmVPYmoudGV4dC5jaGFyQXQoZXh0ZW50LmVuZCAtIDEpKSA/IDIgOiAxKTtcbiAgICAgICAgcmV0dXJuIGNvb3JkcyhjaCwgcHJvcClbcHJvcF1cbiAgICAgIH1cblxuICAgICAgdmFyIG9yZGVyID0gZ2V0T3JkZXIobGluZU9iaiwgZG9jLmRpcmVjdGlvbik7XG4gICAgICBpdGVyYXRlQmlkaVNlY3Rpb25zKG9yZGVyLCBmcm9tQXJnIHx8IDAsIHRvQXJnID09IG51bGwgPyBsaW5lTGVuIDogdG9BcmcsIGZ1bmN0aW9uIChmcm9tLCB0bywgZGlyLCBpKSB7XG4gICAgICAgIHZhciBsdHIgPSBkaXIgPT0gXCJsdHJcIjtcbiAgICAgICAgdmFyIGZyb21Qb3MgPSBjb29yZHMoZnJvbSwgbHRyID8gXCJsZWZ0XCIgOiBcInJpZ2h0XCIpO1xuICAgICAgICB2YXIgdG9Qb3MgPSBjb29yZHModG8gLSAxLCBsdHIgPyBcInJpZ2h0XCIgOiBcImxlZnRcIik7XG5cbiAgICAgICAgdmFyIG9wZW5TdGFydCA9IGZyb21BcmcgPT0gbnVsbCAmJiBmcm9tID09IDAsIG9wZW5FbmQgPSB0b0FyZyA9PSBudWxsICYmIHRvID09IGxpbmVMZW47XG4gICAgICAgIHZhciBmaXJzdCA9IGkgPT0gMCwgbGFzdCA9ICFvcmRlciB8fCBpID09IG9yZGVyLmxlbmd0aCAtIDE7XG4gICAgICAgIGlmICh0b1Bvcy50b3AgLSBmcm9tUG9zLnRvcCA8PSAzKSB7IC8vIFNpbmdsZSBsaW5lXG4gICAgICAgICAgdmFyIG9wZW5MZWZ0ID0gKGRvY0xUUiA/IG9wZW5TdGFydCA6IG9wZW5FbmQpICYmIGZpcnN0O1xuICAgICAgICAgIHZhciBvcGVuUmlnaHQgPSAoZG9jTFRSID8gb3BlbkVuZCA6IG9wZW5TdGFydCkgJiYgbGFzdDtcbiAgICAgICAgICB2YXIgbGVmdCA9IG9wZW5MZWZ0ID8gbGVmdFNpZGUgOiAobHRyID8gZnJvbVBvcyA6IHRvUG9zKS5sZWZ0O1xuICAgICAgICAgIHZhciByaWdodCA9IG9wZW5SaWdodCA/IHJpZ2h0U2lkZSA6IChsdHIgPyB0b1BvcyA6IGZyb21Qb3MpLnJpZ2h0O1xuICAgICAgICAgIGFkZChsZWZ0LCBmcm9tUG9zLnRvcCwgcmlnaHQgLSBsZWZ0LCBmcm9tUG9zLmJvdHRvbSk7XG4gICAgICAgIH0gZWxzZSB7IC8vIE11bHRpcGxlIGxpbmVzXG4gICAgICAgICAgdmFyIHRvcExlZnQsIHRvcFJpZ2h0LCBib3RMZWZ0LCBib3RSaWdodDtcbiAgICAgICAgICBpZiAobHRyKSB7XG4gICAgICAgICAgICB0b3BMZWZ0ID0gZG9jTFRSICYmIG9wZW5TdGFydCAmJiBmaXJzdCA/IGxlZnRTaWRlIDogZnJvbVBvcy5sZWZ0O1xuICAgICAgICAgICAgdG9wUmlnaHQgPSBkb2NMVFIgPyByaWdodFNpZGUgOiB3cmFwWChmcm9tLCBkaXIsIFwiYmVmb3JlXCIpO1xuICAgICAgICAgICAgYm90TGVmdCA9IGRvY0xUUiA/IGxlZnRTaWRlIDogd3JhcFgodG8sIGRpciwgXCJhZnRlclwiKTtcbiAgICAgICAgICAgIGJvdFJpZ2h0ID0gZG9jTFRSICYmIG9wZW5FbmQgJiYgbGFzdCA/IHJpZ2h0U2lkZSA6IHRvUG9zLnJpZ2h0O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0b3BMZWZ0ID0gIWRvY0xUUiA/IGxlZnRTaWRlIDogd3JhcFgoZnJvbSwgZGlyLCBcImJlZm9yZVwiKTtcbiAgICAgICAgICAgIHRvcFJpZ2h0ID0gIWRvY0xUUiAmJiBvcGVuU3RhcnQgJiYgZmlyc3QgPyByaWdodFNpZGUgOiBmcm9tUG9zLnJpZ2h0O1xuICAgICAgICAgICAgYm90TGVmdCA9ICFkb2NMVFIgJiYgb3BlbkVuZCAmJiBsYXN0ID8gbGVmdFNpZGUgOiB0b1Bvcy5sZWZ0O1xuICAgICAgICAgICAgYm90UmlnaHQgPSAhZG9jTFRSID8gcmlnaHRTaWRlIDogd3JhcFgodG8sIGRpciwgXCJhZnRlclwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYWRkKHRvcExlZnQsIGZyb21Qb3MudG9wLCB0b3BSaWdodCAtIHRvcExlZnQsIGZyb21Qb3MuYm90dG9tKTtcbiAgICAgICAgICBpZiAoZnJvbVBvcy5ib3R0b20gPCB0b1Bvcy50b3ApIHsgYWRkKGxlZnRTaWRlLCBmcm9tUG9zLmJvdHRvbSwgbnVsbCwgdG9Qb3MudG9wKTsgfVxuICAgICAgICAgIGFkZChib3RMZWZ0LCB0b1Bvcy50b3AsIGJvdFJpZ2h0IC0gYm90TGVmdCwgdG9Qb3MuYm90dG9tKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc3RhcnQgfHwgY21wQ29vcmRzKGZyb21Qb3MsIHN0YXJ0KSA8IDApIHsgc3RhcnQgPSBmcm9tUG9zOyB9XG4gICAgICAgIGlmIChjbXBDb29yZHModG9Qb3MsIHN0YXJ0KSA8IDApIHsgc3RhcnQgPSB0b1BvczsgfVxuICAgICAgICBpZiAoIWVuZCB8fCBjbXBDb29yZHMoZnJvbVBvcywgZW5kKSA8IDApIHsgZW5kID0gZnJvbVBvczsgfVxuICAgICAgICBpZiAoY21wQ29vcmRzKHRvUG9zLCBlbmQpIDwgMCkgeyBlbmQgPSB0b1BvczsgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4ge3N0YXJ0OiBzdGFydCwgZW5kOiBlbmR9XG4gICAgfVxuXG4gICAgdmFyIHNGcm9tID0gcmFuZ2UuZnJvbSgpLCBzVG8gPSByYW5nZS50bygpO1xuICAgIGlmIChzRnJvbS5saW5lID09IHNUby5saW5lKSB7XG4gICAgICBkcmF3Rm9yTGluZShzRnJvbS5saW5lLCBzRnJvbS5jaCwgc1RvLmNoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGZyb21MaW5lID0gZ2V0TGluZShkb2MsIHNGcm9tLmxpbmUpLCB0b0xpbmUgPSBnZXRMaW5lKGRvYywgc1RvLmxpbmUpO1xuICAgICAgdmFyIHNpbmdsZVZMaW5lID0gdmlzdWFsTGluZShmcm9tTGluZSkgPT0gdmlzdWFsTGluZSh0b0xpbmUpO1xuICAgICAgdmFyIGxlZnRFbmQgPSBkcmF3Rm9yTGluZShzRnJvbS5saW5lLCBzRnJvbS5jaCwgc2luZ2xlVkxpbmUgPyBmcm9tTGluZS50ZXh0Lmxlbmd0aCArIDEgOiBudWxsKS5lbmQ7XG4gICAgICB2YXIgcmlnaHRTdGFydCA9IGRyYXdGb3JMaW5lKHNUby5saW5lLCBzaW5nbGVWTGluZSA/IDAgOiBudWxsLCBzVG8uY2gpLnN0YXJ0O1xuICAgICAgaWYgKHNpbmdsZVZMaW5lKSB7XG4gICAgICAgIGlmIChsZWZ0RW5kLnRvcCA8IHJpZ2h0U3RhcnQudG9wIC0gMikge1xuICAgICAgICAgIGFkZChsZWZ0RW5kLnJpZ2h0LCBsZWZ0RW5kLnRvcCwgbnVsbCwgbGVmdEVuZC5ib3R0b20pO1xuICAgICAgICAgIGFkZChsZWZ0U2lkZSwgcmlnaHRTdGFydC50b3AsIHJpZ2h0U3RhcnQubGVmdCwgcmlnaHRTdGFydC5ib3R0b20pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFkZChsZWZ0RW5kLnJpZ2h0LCBsZWZ0RW5kLnRvcCwgcmlnaHRTdGFydC5sZWZ0IC0gbGVmdEVuZC5yaWdodCwgbGVmdEVuZC5ib3R0b20pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobGVmdEVuZC5ib3R0b20gPCByaWdodFN0YXJ0LnRvcClcbiAgICAgICAgeyBhZGQobGVmdFNpZGUsIGxlZnRFbmQuYm90dG9tLCBudWxsLCByaWdodFN0YXJ0LnRvcCk7IH1cbiAgICB9XG5cbiAgICBvdXRwdXQuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICB9XG5cbiAgLy8gQ3Vyc29yLWJsaW5raW5nXG4gIGZ1bmN0aW9uIHJlc3RhcnRCbGluayhjbSkge1xuICAgIGlmICghY20uc3RhdGUuZm9jdXNlZCkgeyByZXR1cm4gfVxuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICBjbGVhckludGVydmFsKGRpc3BsYXkuYmxpbmtlcik7XG4gICAgdmFyIG9uID0gdHJ1ZTtcbiAgICBkaXNwbGF5LmN1cnNvckRpdi5zdHlsZS52aXNpYmlsaXR5ID0gXCJcIjtcbiAgICBpZiAoY20ub3B0aW9ucy5jdXJzb3JCbGlua1JhdGUgPiAwKVxuICAgICAgeyBkaXNwbGF5LmJsaW5rZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7IHJldHVybiBkaXNwbGF5LmN1cnNvckRpdi5zdHlsZS52aXNpYmlsaXR5ID0gKG9uID0gIW9uKSA/IFwiXCIgOiBcImhpZGRlblwiOyB9LFxuICAgICAgICBjbS5vcHRpb25zLmN1cnNvckJsaW5rUmF0ZSk7IH1cbiAgICBlbHNlIGlmIChjbS5vcHRpb25zLmN1cnNvckJsaW5rUmF0ZSA8IDApXG4gICAgICB7IGRpc3BsYXkuY3Vyc29yRGl2LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiOyB9XG4gIH1cblxuICBmdW5jdGlvbiBlbnN1cmVGb2N1cyhjbSkge1xuICAgIGlmICghY20uc3RhdGUuZm9jdXNlZCkgeyBjbS5kaXNwbGF5LmlucHV0LmZvY3VzKCk7IG9uRm9jdXMoY20pOyB9XG4gIH1cblxuICBmdW5jdGlvbiBkZWxheUJsdXJFdmVudChjbSkge1xuICAgIGNtLnN0YXRlLmRlbGF5aW5nQmx1ckV2ZW50ID0gdHJ1ZTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgaWYgKGNtLnN0YXRlLmRlbGF5aW5nQmx1ckV2ZW50KSB7XG4gICAgICBjbS5zdGF0ZS5kZWxheWluZ0JsdXJFdmVudCA9IGZhbHNlO1xuICAgICAgb25CbHVyKGNtKTtcbiAgICB9IH0sIDEwMCk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkZvY3VzKGNtLCBlKSB7XG4gICAgaWYgKGNtLnN0YXRlLmRlbGF5aW5nQmx1ckV2ZW50KSB7IGNtLnN0YXRlLmRlbGF5aW5nQmx1ckV2ZW50ID0gZmFsc2U7IH1cblxuICAgIGlmIChjbS5vcHRpb25zLnJlYWRPbmx5ID09IFwibm9jdXJzb3JcIikgeyByZXR1cm4gfVxuICAgIGlmICghY20uc3RhdGUuZm9jdXNlZCkge1xuICAgICAgc2lnbmFsKGNtLCBcImZvY3VzXCIsIGNtLCBlKTtcbiAgICAgIGNtLnN0YXRlLmZvY3VzZWQgPSB0cnVlO1xuICAgICAgYWRkQ2xhc3MoY20uZGlzcGxheS53cmFwcGVyLCBcIkNvZGVNaXJyb3ItZm9jdXNlZFwiKTtcbiAgICAgIC8vIFRoaXMgdGVzdCBwcmV2ZW50cyB0aGlzIGZyb20gZmlyaW5nIHdoZW4gYSBjb250ZXh0XG4gICAgICAvLyBtZW51IGlzIGNsb3NlZCAoc2luY2UgdGhlIGlucHV0IHJlc2V0IHdvdWxkIGtpbGwgdGhlXG4gICAgICAvLyBzZWxlY3QtYWxsIGRldGVjdGlvbiBoYWNrKVxuICAgICAgaWYgKCFjbS5jdXJPcCAmJiBjbS5kaXNwbGF5LnNlbEZvckNvbnRleHRNZW51ICE9IGNtLmRvYy5zZWwpIHtcbiAgICAgICAgY20uZGlzcGxheS5pbnB1dC5yZXNldCgpO1xuICAgICAgICBpZiAod2Via2l0KSB7IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gY20uZGlzcGxheS5pbnB1dC5yZXNldCh0cnVlKTsgfSwgMjApOyB9IC8vIElzc3VlICMxNzMwXG4gICAgICB9XG4gICAgICBjbS5kaXNwbGF5LmlucHV0LnJlY2VpdmVkRm9jdXMoKTtcbiAgICB9XG4gICAgcmVzdGFydEJsaW5rKGNtKTtcbiAgfVxuICBmdW5jdGlvbiBvbkJsdXIoY20sIGUpIHtcbiAgICBpZiAoY20uc3RhdGUuZGVsYXlpbmdCbHVyRXZlbnQpIHsgcmV0dXJuIH1cblxuICAgIGlmIChjbS5zdGF0ZS5mb2N1c2VkKSB7XG4gICAgICBzaWduYWwoY20sIFwiYmx1clwiLCBjbSwgZSk7XG4gICAgICBjbS5zdGF0ZS5mb2N1c2VkID0gZmFsc2U7XG4gICAgICBybUNsYXNzKGNtLmRpc3BsYXkud3JhcHBlciwgXCJDb2RlTWlycm9yLWZvY3VzZWRcIik7XG4gICAgfVxuICAgIGNsZWFySW50ZXJ2YWwoY20uZGlzcGxheS5ibGlua2VyKTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgaWYgKCFjbS5zdGF0ZS5mb2N1c2VkKSB7IGNtLmRpc3BsYXkuc2hpZnQgPSBmYWxzZTsgfSB9LCAxNTApO1xuICB9XG5cbiAgLy8gUmVhZCB0aGUgYWN0dWFsIGhlaWdodHMgb2YgdGhlIHJlbmRlcmVkIGxpbmVzLCBhbmQgdXBkYXRlIHRoZWlyXG4gIC8vIHN0b3JlZCBoZWlnaHRzIHRvIG1hdGNoLlxuICBmdW5jdGlvbiB1cGRhdGVIZWlnaHRzSW5WaWV3cG9ydChjbSkge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICB2YXIgcHJldkJvdHRvbSA9IGRpc3BsYXkubGluZURpdi5vZmZzZXRUb3A7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXNwbGF5LnZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjdXIgPSBkaXNwbGF5LnZpZXdbaV0sIHdyYXBwaW5nID0gY20ub3B0aW9ucy5saW5lV3JhcHBpbmc7XG4gICAgICB2YXIgaGVpZ2h0ID0gKHZvaWQgMCksIHdpZHRoID0gMDtcbiAgICAgIGlmIChjdXIuaGlkZGVuKSB7IGNvbnRpbnVlIH1cbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOCkge1xuICAgICAgICB2YXIgYm90ID0gY3VyLm5vZGUub2Zmc2V0VG9wICsgY3VyLm5vZGUub2Zmc2V0SGVpZ2h0O1xuICAgICAgICBoZWlnaHQgPSBib3QgLSBwcmV2Qm90dG9tO1xuICAgICAgICBwcmV2Qm90dG9tID0gYm90O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJveCA9IGN1ci5ub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBoZWlnaHQgPSBib3guYm90dG9tIC0gYm94LnRvcDtcbiAgICAgICAgLy8gQ2hlY2sgdGhhdCBsaW5lcyBkb24ndCBleHRlbmQgcGFzdCB0aGUgcmlnaHQgb2YgdGhlIGN1cnJlbnRcbiAgICAgICAgLy8gZWRpdG9yIHdpZHRoXG4gICAgICAgIGlmICghd3JhcHBpbmcgJiYgY3VyLnRleHQuZmlyc3RDaGlsZClcbiAgICAgICAgICB7IHdpZHRoID0gY3VyLnRleHQuZmlyc3RDaGlsZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCAtIGJveC5sZWZ0IC0gMTsgfVxuICAgICAgfVxuICAgICAgdmFyIGRpZmYgPSBjdXIubGluZS5oZWlnaHQgLSBoZWlnaHQ7XG4gICAgICBpZiAoZGlmZiA+IC4wMDUgfHwgZGlmZiA8IC0uMDA1KSB7XG4gICAgICAgIHVwZGF0ZUxpbmVIZWlnaHQoY3VyLmxpbmUsIGhlaWdodCk7XG4gICAgICAgIHVwZGF0ZVdpZGdldEhlaWdodChjdXIubGluZSk7XG4gICAgICAgIGlmIChjdXIucmVzdCkgeyBmb3IgKHZhciBqID0gMDsgaiA8IGN1ci5yZXN0Lmxlbmd0aDsgaisrKVxuICAgICAgICAgIHsgdXBkYXRlV2lkZ2V0SGVpZ2h0KGN1ci5yZXN0W2pdKTsgfSB9XG4gICAgICB9XG4gICAgICBpZiAod2lkdGggPiBjbS5kaXNwbGF5LnNpemVyV2lkdGgpIHtcbiAgICAgICAgdmFyIGNoV2lkdGggPSBNYXRoLmNlaWwod2lkdGggLyBjaGFyV2lkdGgoY20uZGlzcGxheSkpO1xuICAgICAgICBpZiAoY2hXaWR0aCA+IGNtLmRpc3BsYXkubWF4TGluZUxlbmd0aCkge1xuICAgICAgICAgIGNtLmRpc3BsYXkubWF4TGluZUxlbmd0aCA9IGNoV2lkdGg7XG4gICAgICAgICAgY20uZGlzcGxheS5tYXhMaW5lID0gY3VyLmxpbmU7XG4gICAgICAgICAgY20uZGlzcGxheS5tYXhMaW5lQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBSZWFkIGFuZCBzdG9yZSB0aGUgaGVpZ2h0IG9mIGxpbmUgd2lkZ2V0cyBhc3NvY2lhdGVkIHdpdGggdGhlXG4gIC8vIGdpdmVuIGxpbmUuXG4gIGZ1bmN0aW9uIHVwZGF0ZVdpZGdldEhlaWdodChsaW5lKSB7XG4gICAgaWYgKGxpbmUud2lkZ2V0cykgeyBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmUud2lkZ2V0cy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHcgPSBsaW5lLndpZGdldHNbaV0sIHBhcmVudCA9IHcubm9kZS5wYXJlbnROb2RlO1xuICAgICAgaWYgKHBhcmVudCkgeyB3LmhlaWdodCA9IHBhcmVudC5vZmZzZXRIZWlnaHQ7IH1cbiAgICB9IH1cbiAgfVxuXG4gIC8vIENvbXB1dGUgdGhlIGxpbmVzIHRoYXQgYXJlIHZpc2libGUgaW4gYSBnaXZlbiB2aWV3cG9ydCAoZGVmYXVsdHNcbiAgLy8gdGhlIHRoZSBjdXJyZW50IHNjcm9sbCBwb3NpdGlvbikuIHZpZXdwb3J0IG1heSBjb250YWluIHRvcCxcbiAgLy8gaGVpZ2h0LCBhbmQgZW5zdXJlIChzZWUgb3Auc2Nyb2xsVG9Qb3MpIHByb3BlcnRpZXMuXG4gIGZ1bmN0aW9uIHZpc2libGVMaW5lcyhkaXNwbGF5LCBkb2MsIHZpZXdwb3J0KSB7XG4gICAgdmFyIHRvcCA9IHZpZXdwb3J0ICYmIHZpZXdwb3J0LnRvcCAhPSBudWxsID8gTWF0aC5tYXgoMCwgdmlld3BvcnQudG9wKSA6IGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wO1xuICAgIHRvcCA9IE1hdGguZmxvb3IodG9wIC0gcGFkZGluZ1RvcChkaXNwbGF5KSk7XG4gICAgdmFyIGJvdHRvbSA9IHZpZXdwb3J0ICYmIHZpZXdwb3J0LmJvdHRvbSAhPSBudWxsID8gdmlld3BvcnQuYm90dG9tIDogdG9wICsgZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodDtcblxuICAgIHZhciBmcm9tID0gbGluZUF0SGVpZ2h0KGRvYywgdG9wKSwgdG8gPSBsaW5lQXRIZWlnaHQoZG9jLCBib3R0b20pO1xuICAgIC8vIEVuc3VyZSBpcyBhIHtmcm9tOiB7bGluZSwgY2h9LCB0bzoge2xpbmUsIGNofX0gb2JqZWN0LCBhbmRcbiAgICAvLyBmb3JjZXMgdGhvc2UgbGluZXMgaW50byB0aGUgdmlld3BvcnQgKGlmIHBvc3NpYmxlKS5cbiAgICBpZiAodmlld3BvcnQgJiYgdmlld3BvcnQuZW5zdXJlKSB7XG4gICAgICB2YXIgZW5zdXJlRnJvbSA9IHZpZXdwb3J0LmVuc3VyZS5mcm9tLmxpbmUsIGVuc3VyZVRvID0gdmlld3BvcnQuZW5zdXJlLnRvLmxpbmU7XG4gICAgICBpZiAoZW5zdXJlRnJvbSA8IGZyb20pIHtcbiAgICAgICAgZnJvbSA9IGVuc3VyZUZyb207XG4gICAgICAgIHRvID0gbGluZUF0SGVpZ2h0KGRvYywgaGVpZ2h0QXRMaW5lKGdldExpbmUoZG9jLCBlbnN1cmVGcm9tKSkgKyBkaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0KTtcbiAgICAgIH0gZWxzZSBpZiAoTWF0aC5taW4oZW5zdXJlVG8sIGRvYy5sYXN0TGluZSgpKSA+PSB0bykge1xuICAgICAgICBmcm9tID0gbGluZUF0SGVpZ2h0KGRvYywgaGVpZ2h0QXRMaW5lKGdldExpbmUoZG9jLCBlbnN1cmVUbykpIC0gZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodCk7XG4gICAgICAgIHRvID0gZW5zdXJlVG87XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7ZnJvbTogZnJvbSwgdG86IE1hdGgubWF4KHRvLCBmcm9tICsgMSl9XG4gIH1cblxuICAvLyBTQ1JPTExJTkcgVEhJTkdTIElOVE8gVklFV1xuXG4gIC8vIElmIGFuIGVkaXRvciBzaXRzIG9uIHRoZSB0b3Agb3IgYm90dG9tIG9mIHRoZSB3aW5kb3csIHBhcnRpYWxseVxuICAvLyBzY3JvbGxlZCBvdXQgb2YgdmlldywgdGhpcyBlbnN1cmVzIHRoYXQgdGhlIGN1cnNvciBpcyB2aXNpYmxlLlxuICBmdW5jdGlvbiBtYXliZVNjcm9sbFdpbmRvdyhjbSwgcmVjdCkge1xuICAgIGlmIChzaWduYWxET01FdmVudChjbSwgXCJzY3JvbGxDdXJzb3JJbnRvVmlld1wiKSkgeyByZXR1cm4gfVxuXG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBib3ggPSBkaXNwbGF5LnNpemVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBkb1Njcm9sbCA9IG51bGw7XG4gICAgaWYgKHJlY3QudG9wICsgYm94LnRvcCA8IDApIHsgZG9TY3JvbGwgPSB0cnVlOyB9XG4gICAgZWxzZSBpZiAocmVjdC5ib3R0b20gKyBib3gudG9wID4gKHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSkgeyBkb1Njcm9sbCA9IGZhbHNlOyB9XG4gICAgaWYgKGRvU2Nyb2xsICE9IG51bGwgJiYgIXBoYW50b20pIHtcbiAgICAgIHZhciBzY3JvbGxOb2RlID0gZWx0KFwiZGl2XCIsIFwiXFx1MjAwYlwiLCBudWxsLCAoXCJwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogXCIgKyAocmVjdC50b3AgLSBkaXNwbGF5LnZpZXdPZmZzZXQgLSBwYWRkaW5nVG9wKGNtLmRpc3BsYXkpKSArIFwicHg7XFxuICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogXCIgKyAocmVjdC5ib3R0b20gLSByZWN0LnRvcCArIHNjcm9sbEdhcChjbSkgKyBkaXNwbGF5LmJhckhlaWdodCkgKyBcInB4O1xcbiAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiBcIiArIChyZWN0LmxlZnQpICsgXCJweDsgd2lkdGg6IFwiICsgKE1hdGgubWF4KDIsIHJlY3QucmlnaHQgLSByZWN0LmxlZnQpKSArIFwicHg7XCIpKTtcbiAgICAgIGNtLmRpc3BsYXkubGluZVNwYWNlLmFwcGVuZENoaWxkKHNjcm9sbE5vZGUpO1xuICAgICAgc2Nyb2xsTm9kZS5zY3JvbGxJbnRvVmlldyhkb1Njcm9sbCk7XG4gICAgICBjbS5kaXNwbGF5LmxpbmVTcGFjZS5yZW1vdmVDaGlsZChzY3JvbGxOb2RlKTtcbiAgICB9XG4gIH1cblxuICAvLyBTY3JvbGwgYSBnaXZlbiBwb3NpdGlvbiBpbnRvIHZpZXcgKGltbWVkaWF0ZWx5KSwgdmVyaWZ5aW5nIHRoYXRcbiAgLy8gaXQgYWN0dWFsbHkgYmVjYW1lIHZpc2libGUgKGFzIGxpbmUgaGVpZ2h0cyBhcmUgYWNjdXJhdGVseVxuICAvLyBtZWFzdXJlZCwgdGhlIHBvc2l0aW9uIG9mIHNvbWV0aGluZyBtYXkgJ2RyaWZ0JyBkdXJpbmcgZHJhd2luZykuXG4gIGZ1bmN0aW9uIHNjcm9sbFBvc0ludG9WaWV3KGNtLCBwb3MsIGVuZCwgbWFyZ2luKSB7XG4gICAgaWYgKG1hcmdpbiA9PSBudWxsKSB7IG1hcmdpbiA9IDA7IH1cbiAgICB2YXIgcmVjdDtcbiAgICBpZiAoIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nICYmIHBvcyA9PSBlbmQpIHtcbiAgICAgIC8vIFNldCBwb3MgYW5kIGVuZCB0byB0aGUgY3Vyc29yIHBvc2l0aW9ucyBhcm91bmQgdGhlIGNoYXJhY3RlciBwb3Mgc3RpY2tzIHRvXG4gICAgICAvLyBJZiBwb3Muc3RpY2t5ID09IFwiYmVmb3JlXCIsIHRoYXQgaXMgYXJvdW5kIHBvcy5jaCAtIDEsIG90aGVyd2lzZSBhcm91bmQgcG9zLmNoXG4gICAgICAvLyBJZiBwb3MgPT0gUG9zKF8sIDAsIFwiYmVmb3JlXCIpLCBwb3MgYW5kIGVuZCBhcmUgdW5jaGFuZ2VkXG4gICAgICBwb3MgPSBwb3MuY2ggPyBQb3MocG9zLmxpbmUsIHBvcy5zdGlja3kgPT0gXCJiZWZvcmVcIiA/IHBvcy5jaCAtIDEgOiBwb3MuY2gsIFwiYWZ0ZXJcIikgOiBwb3M7XG4gICAgICBlbmQgPSBwb3Muc3RpY2t5ID09IFwiYmVmb3JlXCIgPyBQb3MocG9zLmxpbmUsIHBvcy5jaCArIDEsIFwiYmVmb3JlXCIpIDogcG9zO1xuICAgIH1cbiAgICBmb3IgKHZhciBsaW1pdCA9IDA7IGxpbWl0IDwgNTsgbGltaXQrKykge1xuICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcbiAgICAgIHZhciBjb29yZHMgPSBjdXJzb3JDb29yZHMoY20sIHBvcyk7XG4gICAgICB2YXIgZW5kQ29vcmRzID0gIWVuZCB8fCBlbmQgPT0gcG9zID8gY29vcmRzIDogY3Vyc29yQ29vcmRzKGNtLCBlbmQpO1xuICAgICAgcmVjdCA9IHtsZWZ0OiBNYXRoLm1pbihjb29yZHMubGVmdCwgZW5kQ29vcmRzLmxlZnQpLFxuICAgICAgICAgICAgICB0b3A6IE1hdGgubWluKGNvb3Jkcy50b3AsIGVuZENvb3Jkcy50b3ApIC0gbWFyZ2luLFxuICAgICAgICAgICAgICByaWdodDogTWF0aC5tYXgoY29vcmRzLmxlZnQsIGVuZENvb3Jkcy5sZWZ0KSxcbiAgICAgICAgICAgICAgYm90dG9tOiBNYXRoLm1heChjb29yZHMuYm90dG9tLCBlbmRDb29yZHMuYm90dG9tKSArIG1hcmdpbn07XG4gICAgICB2YXIgc2Nyb2xsUG9zID0gY2FsY3VsYXRlU2Nyb2xsUG9zKGNtLCByZWN0KTtcbiAgICAgIHZhciBzdGFydFRvcCA9IGNtLmRvYy5zY3JvbGxUb3AsIHN0YXJ0TGVmdCA9IGNtLmRvYy5zY3JvbGxMZWZ0O1xuICAgICAgaWYgKHNjcm9sbFBvcy5zY3JvbGxUb3AgIT0gbnVsbCkge1xuICAgICAgICB1cGRhdGVTY3JvbGxUb3AoY20sIHNjcm9sbFBvcy5zY3JvbGxUb3ApO1xuICAgICAgICBpZiAoTWF0aC5hYnMoY20uZG9jLnNjcm9sbFRvcCAtIHN0YXJ0VG9wKSA+IDEpIHsgY2hhbmdlZCA9IHRydWU7IH1cbiAgICAgIH1cbiAgICAgIGlmIChzY3JvbGxQb3Muc2Nyb2xsTGVmdCAhPSBudWxsKSB7XG4gICAgICAgIHNldFNjcm9sbExlZnQoY20sIHNjcm9sbFBvcy5zY3JvbGxMZWZ0KTtcbiAgICAgICAgaWYgKE1hdGguYWJzKGNtLmRvYy5zY3JvbGxMZWZ0IC0gc3RhcnRMZWZ0KSA+IDEpIHsgY2hhbmdlZCA9IHRydWU7IH1cbiAgICAgIH1cbiAgICAgIGlmICghY2hhbmdlZCkgeyBicmVhayB9XG4gICAgfVxuICAgIHJldHVybiByZWN0XG4gIH1cblxuICAvLyBTY3JvbGwgYSBnaXZlbiBzZXQgb2YgY29vcmRpbmF0ZXMgaW50byB2aWV3IChpbW1lZGlhdGVseSkuXG4gIGZ1bmN0aW9uIHNjcm9sbEludG9WaWV3KGNtLCByZWN0KSB7XG4gICAgdmFyIHNjcm9sbFBvcyA9IGNhbGN1bGF0ZVNjcm9sbFBvcyhjbSwgcmVjdCk7XG4gICAgaWYgKHNjcm9sbFBvcy5zY3JvbGxUb3AgIT0gbnVsbCkgeyB1cGRhdGVTY3JvbGxUb3AoY20sIHNjcm9sbFBvcy5zY3JvbGxUb3ApOyB9XG4gICAgaWYgKHNjcm9sbFBvcy5zY3JvbGxMZWZ0ICE9IG51bGwpIHsgc2V0U2Nyb2xsTGVmdChjbSwgc2Nyb2xsUG9zLnNjcm9sbExlZnQpOyB9XG4gIH1cblxuICAvLyBDYWxjdWxhdGUgYSBuZXcgc2Nyb2xsIHBvc2l0aW9uIG5lZWRlZCB0byBzY3JvbGwgdGhlIGdpdmVuXG4gIC8vIHJlY3RhbmdsZSBpbnRvIHZpZXcuIFJldHVybnMgYW4gb2JqZWN0IHdpdGggc2Nyb2xsVG9wIGFuZFxuICAvLyBzY3JvbGxMZWZ0IHByb3BlcnRpZXMuIFdoZW4gdGhlc2UgYXJlIHVuZGVmaW5lZCwgdGhlXG4gIC8vIHZlcnRpY2FsL2hvcml6b250YWwgcG9zaXRpb24gZG9lcyBub3QgbmVlZCB0byBiZSBhZGp1c3RlZC5cbiAgZnVuY3Rpb24gY2FsY3VsYXRlU2Nyb2xsUG9zKGNtLCByZWN0KSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBzbmFwTWFyZ2luID0gdGV4dEhlaWdodChjbS5kaXNwbGF5KTtcbiAgICBpZiAocmVjdC50b3AgPCAwKSB7IHJlY3QudG9wID0gMDsgfVxuICAgIHZhciBzY3JlZW50b3AgPSBjbS5jdXJPcCAmJiBjbS5jdXJPcC5zY3JvbGxUb3AgIT0gbnVsbCA/IGNtLmN1ck9wLnNjcm9sbFRvcCA6IGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wO1xuICAgIHZhciBzY3JlZW4gPSBkaXNwbGF5SGVpZ2h0KGNtKSwgcmVzdWx0ID0ge307XG4gICAgaWYgKHJlY3QuYm90dG9tIC0gcmVjdC50b3AgPiBzY3JlZW4pIHsgcmVjdC5ib3R0b20gPSByZWN0LnRvcCArIHNjcmVlbjsgfVxuICAgIHZhciBkb2NCb3R0b20gPSBjbS5kb2MuaGVpZ2h0ICsgcGFkZGluZ1ZlcnQoZGlzcGxheSk7XG4gICAgdmFyIGF0VG9wID0gcmVjdC50b3AgPCBzbmFwTWFyZ2luLCBhdEJvdHRvbSA9IHJlY3QuYm90dG9tID4gZG9jQm90dG9tIC0gc25hcE1hcmdpbjtcbiAgICBpZiAocmVjdC50b3AgPCBzY3JlZW50b3ApIHtcbiAgICAgIHJlc3VsdC5zY3JvbGxUb3AgPSBhdFRvcCA/IDAgOiByZWN0LnRvcDtcbiAgICB9IGVsc2UgaWYgKHJlY3QuYm90dG9tID4gc2NyZWVudG9wICsgc2NyZWVuKSB7XG4gICAgICB2YXIgbmV3VG9wID0gTWF0aC5taW4ocmVjdC50b3AsIChhdEJvdHRvbSA/IGRvY0JvdHRvbSA6IHJlY3QuYm90dG9tKSAtIHNjcmVlbik7XG4gICAgICBpZiAobmV3VG9wICE9IHNjcmVlbnRvcCkgeyByZXN1bHQuc2Nyb2xsVG9wID0gbmV3VG9wOyB9XG4gICAgfVxuXG4gICAgdmFyIHNjcmVlbmxlZnQgPSBjbS5jdXJPcCAmJiBjbS5jdXJPcC5zY3JvbGxMZWZ0ICE9IG51bGwgPyBjbS5jdXJPcC5zY3JvbGxMZWZ0IDogZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0O1xuICAgIHZhciBzY3JlZW53ID0gZGlzcGxheVdpZHRoKGNtKSAtIChjbS5vcHRpb25zLmZpeGVkR3V0dGVyID8gZGlzcGxheS5ndXR0ZXJzLm9mZnNldFdpZHRoIDogMCk7XG4gICAgdmFyIHRvb1dpZGUgPSByZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0ID4gc2NyZWVudztcbiAgICBpZiAodG9vV2lkZSkgeyByZWN0LnJpZ2h0ID0gcmVjdC5sZWZ0ICsgc2NyZWVudzsgfVxuICAgIGlmIChyZWN0LmxlZnQgPCAxMClcbiAgICAgIHsgcmVzdWx0LnNjcm9sbExlZnQgPSAwOyB9XG4gICAgZWxzZSBpZiAocmVjdC5sZWZ0IDwgc2NyZWVubGVmdClcbiAgICAgIHsgcmVzdWx0LnNjcm9sbExlZnQgPSBNYXRoLm1heCgwLCByZWN0LmxlZnQgLSAodG9vV2lkZSA/IDAgOiAxMCkpOyB9XG4gICAgZWxzZSBpZiAocmVjdC5yaWdodCA+IHNjcmVlbncgKyBzY3JlZW5sZWZ0IC0gMylcbiAgICAgIHsgcmVzdWx0LnNjcm9sbExlZnQgPSByZWN0LnJpZ2h0ICsgKHRvb1dpZGUgPyAwIDogMTApIC0gc2NyZWVudzsgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIC8vIFN0b3JlIGEgcmVsYXRpdmUgYWRqdXN0bWVudCB0byB0aGUgc2Nyb2xsIHBvc2l0aW9uIGluIHRoZSBjdXJyZW50XG4gIC8vIG9wZXJhdGlvbiAodG8gYmUgYXBwbGllZCB3aGVuIHRoZSBvcGVyYXRpb24gZmluaXNoZXMpLlxuICBmdW5jdGlvbiBhZGRUb1Njcm9sbFRvcChjbSwgdG9wKSB7XG4gICAgaWYgKHRvcCA9PSBudWxsKSB7IHJldHVybiB9XG4gICAgcmVzb2x2ZVNjcm9sbFRvUG9zKGNtKTtcbiAgICBjbS5jdXJPcC5zY3JvbGxUb3AgPSAoY20uY3VyT3Auc2Nyb2xsVG9wID09IG51bGwgPyBjbS5kb2Muc2Nyb2xsVG9wIDogY20uY3VyT3Auc2Nyb2xsVG9wKSArIHRvcDtcbiAgfVxuXG4gIC8vIE1ha2Ugc3VyZSB0aGF0IGF0IHRoZSBlbmQgb2YgdGhlIG9wZXJhdGlvbiB0aGUgY3VycmVudCBjdXJzb3IgaXNcbiAgLy8gc2hvd24uXG4gIGZ1bmN0aW9uIGVuc3VyZUN1cnNvclZpc2libGUoY20pIHtcbiAgICByZXNvbHZlU2Nyb2xsVG9Qb3MoY20pO1xuICAgIHZhciBjdXIgPSBjbS5nZXRDdXJzb3IoKTtcbiAgICBjbS5jdXJPcC5zY3JvbGxUb1BvcyA9IHtmcm9tOiBjdXIsIHRvOiBjdXIsIG1hcmdpbjogY20ub3B0aW9ucy5jdXJzb3JTY3JvbGxNYXJnaW59O1xuICB9XG5cbiAgZnVuY3Rpb24gc2Nyb2xsVG9Db29yZHMoY20sIHgsIHkpIHtcbiAgICBpZiAoeCAhPSBudWxsIHx8IHkgIT0gbnVsbCkgeyByZXNvbHZlU2Nyb2xsVG9Qb3MoY20pOyB9XG4gICAgaWYgKHggIT0gbnVsbCkgeyBjbS5jdXJPcC5zY3JvbGxMZWZ0ID0geDsgfVxuICAgIGlmICh5ICE9IG51bGwpIHsgY20uY3VyT3Auc2Nyb2xsVG9wID0geTsgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2Nyb2xsVG9SYW5nZShjbSwgcmFuZ2UpIHtcbiAgICByZXNvbHZlU2Nyb2xsVG9Qb3MoY20pO1xuICAgIGNtLmN1ck9wLnNjcm9sbFRvUG9zID0gcmFuZ2U7XG4gIH1cblxuICAvLyBXaGVuIGFuIG9wZXJhdGlvbiBoYXMgaXRzIHNjcm9sbFRvUG9zIHByb3BlcnR5IHNldCwgYW5kIGFub3RoZXJcbiAgLy8gc2Nyb2xsIGFjdGlvbiBpcyBhcHBsaWVkIGJlZm9yZSB0aGUgZW5kIG9mIHRoZSBvcGVyYXRpb24sIHRoaXNcbiAgLy8gJ3NpbXVsYXRlcycgc2Nyb2xsaW5nIHRoYXQgcG9zaXRpb24gaW50byB2aWV3IGluIGEgY2hlYXAgd2F5LCBzb1xuICAvLyB0aGF0IHRoZSBlZmZlY3Qgb2YgaW50ZXJtZWRpYXRlIHNjcm9sbCBjb21tYW5kcyBpcyBub3QgaWdub3JlZC5cbiAgZnVuY3Rpb24gcmVzb2x2ZVNjcm9sbFRvUG9zKGNtKSB7XG4gICAgdmFyIHJhbmdlID0gY20uY3VyT3Auc2Nyb2xsVG9Qb3M7XG4gICAgaWYgKHJhbmdlKSB7XG4gICAgICBjbS5jdXJPcC5zY3JvbGxUb1BvcyA9IG51bGw7XG4gICAgICB2YXIgZnJvbSA9IGVzdGltYXRlQ29vcmRzKGNtLCByYW5nZS5mcm9tKSwgdG8gPSBlc3RpbWF0ZUNvb3JkcyhjbSwgcmFuZ2UudG8pO1xuICAgICAgc2Nyb2xsVG9Db29yZHNSYW5nZShjbSwgZnJvbSwgdG8sIHJhbmdlLm1hcmdpbik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2Nyb2xsVG9Db29yZHNSYW5nZShjbSwgZnJvbSwgdG8sIG1hcmdpbikge1xuICAgIHZhciBzUG9zID0gY2FsY3VsYXRlU2Nyb2xsUG9zKGNtLCB7XG4gICAgICBsZWZ0OiBNYXRoLm1pbihmcm9tLmxlZnQsIHRvLmxlZnQpLFxuICAgICAgdG9wOiBNYXRoLm1pbihmcm9tLnRvcCwgdG8udG9wKSAtIG1hcmdpbixcbiAgICAgIHJpZ2h0OiBNYXRoLm1heChmcm9tLnJpZ2h0LCB0by5yaWdodCksXG4gICAgICBib3R0b206IE1hdGgubWF4KGZyb20uYm90dG9tLCB0by5ib3R0b20pICsgbWFyZ2luXG4gICAgfSk7XG4gICAgc2Nyb2xsVG9Db29yZHMoY20sIHNQb3Muc2Nyb2xsTGVmdCwgc1Bvcy5zY3JvbGxUb3ApO1xuICB9XG5cbiAgLy8gU3luYyB0aGUgc2Nyb2xsYWJsZSBhcmVhIGFuZCBzY3JvbGxiYXJzLCBlbnN1cmUgdGhlIHZpZXdwb3J0XG4gIC8vIGNvdmVycyB0aGUgdmlzaWJsZSBhcmVhLlxuICBmdW5jdGlvbiB1cGRhdGVTY3JvbGxUb3AoY20sIHZhbCkge1xuICAgIGlmIChNYXRoLmFicyhjbS5kb2Muc2Nyb2xsVG9wIC0gdmFsKSA8IDIpIHsgcmV0dXJuIH1cbiAgICBpZiAoIWdlY2tvKSB7IHVwZGF0ZURpc3BsYXlTaW1wbGUoY20sIHt0b3A6IHZhbH0pOyB9XG4gICAgc2V0U2Nyb2xsVG9wKGNtLCB2YWwsIHRydWUpO1xuICAgIGlmIChnZWNrbykgeyB1cGRhdGVEaXNwbGF5U2ltcGxlKGNtKTsgfVxuICAgIHN0YXJ0V29ya2VyKGNtLCAxMDApO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0U2Nyb2xsVG9wKGNtLCB2YWwsIGZvcmNlU2Nyb2xsKSB7XG4gICAgdmFsID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oY20uZGlzcGxheS5zY3JvbGxlci5zY3JvbGxIZWlnaHQgLSBjbS5kaXNwbGF5LnNjcm9sbGVyLmNsaWVudEhlaWdodCwgdmFsKSk7XG4gICAgaWYgKGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wID09IHZhbCAmJiAhZm9yY2VTY3JvbGwpIHsgcmV0dXJuIH1cbiAgICBjbS5kb2Muc2Nyb2xsVG9wID0gdmFsO1xuICAgIGNtLmRpc3BsYXkuc2Nyb2xsYmFycy5zZXRTY3JvbGxUb3AodmFsKTtcbiAgICBpZiAoY20uZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3AgIT0gdmFsKSB7IGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wID0gdmFsOyB9XG4gIH1cblxuICAvLyBTeW5jIHNjcm9sbGVyIGFuZCBzY3JvbGxiYXIsIGVuc3VyZSB0aGUgZ3V0dGVyIGVsZW1lbnRzIGFyZVxuICAvLyBhbGlnbmVkLlxuICBmdW5jdGlvbiBzZXRTY3JvbGxMZWZ0KGNtLCB2YWwsIGlzU2Nyb2xsZXIsIGZvcmNlU2Nyb2xsKSB7XG4gICAgdmFsID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odmFsLCBjbS5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFdpZHRoIC0gY20uZGlzcGxheS5zY3JvbGxlci5jbGllbnRXaWR0aCkpO1xuICAgIGlmICgoaXNTY3JvbGxlciA/IHZhbCA9PSBjbS5kb2Muc2Nyb2xsTGVmdCA6IE1hdGguYWJzKGNtLmRvYy5zY3JvbGxMZWZ0IC0gdmFsKSA8IDIpICYmICFmb3JjZVNjcm9sbCkgeyByZXR1cm4gfVxuICAgIGNtLmRvYy5zY3JvbGxMZWZ0ID0gdmFsO1xuICAgIGFsaWduSG9yaXpvbnRhbGx5KGNtKTtcbiAgICBpZiAoY20uZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0ICE9IHZhbCkgeyBjbS5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbExlZnQgPSB2YWw7IH1cbiAgICBjbS5kaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsTGVmdCh2YWwpO1xuICB9XG5cbiAgLy8gU0NST0xMQkFSU1xuXG4gIC8vIFByZXBhcmUgRE9NIHJlYWRzIG5lZWRlZCB0byB1cGRhdGUgdGhlIHNjcm9sbGJhcnMuIERvbmUgaW4gb25lXG4gIC8vIHNob3QgdG8gbWluaW1pemUgdXBkYXRlL21lYXN1cmUgcm91bmR0cmlwcy5cbiAgZnVuY3Rpb24gbWVhc3VyZUZvclNjcm9sbGJhcnMoY20pIHtcbiAgICB2YXIgZCA9IGNtLmRpc3BsYXksIGd1dHRlclcgPSBkLmd1dHRlcnMub2Zmc2V0V2lkdGg7XG4gICAgdmFyIGRvY0ggPSBNYXRoLnJvdW5kKGNtLmRvYy5oZWlnaHQgKyBwYWRkaW5nVmVydChjbS5kaXNwbGF5KSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNsaWVudEhlaWdodDogZC5zY3JvbGxlci5jbGllbnRIZWlnaHQsXG4gICAgICB2aWV3SGVpZ2h0OiBkLndyYXBwZXIuY2xpZW50SGVpZ2h0LFxuICAgICAgc2Nyb2xsV2lkdGg6IGQuc2Nyb2xsZXIuc2Nyb2xsV2lkdGgsIGNsaWVudFdpZHRoOiBkLnNjcm9sbGVyLmNsaWVudFdpZHRoLFxuICAgICAgdmlld1dpZHRoOiBkLndyYXBwZXIuY2xpZW50V2lkdGgsXG4gICAgICBiYXJMZWZ0OiBjbS5vcHRpb25zLmZpeGVkR3V0dGVyID8gZ3V0dGVyVyA6IDAsXG4gICAgICBkb2NIZWlnaHQ6IGRvY0gsXG4gICAgICBzY3JvbGxIZWlnaHQ6IGRvY0ggKyBzY3JvbGxHYXAoY20pICsgZC5iYXJIZWlnaHQsXG4gICAgICBuYXRpdmVCYXJXaWR0aDogZC5uYXRpdmVCYXJXaWR0aCxcbiAgICAgIGd1dHRlcldpZHRoOiBndXR0ZXJXXG4gICAgfVxuICB9XG5cbiAgdmFyIE5hdGl2ZVNjcm9sbGJhcnMgPSBmdW5jdGlvbihwbGFjZSwgc2Nyb2xsLCBjbSkge1xuICAgIHRoaXMuY20gPSBjbTtcbiAgICB2YXIgdmVydCA9IHRoaXMudmVydCA9IGVsdChcImRpdlwiLCBbZWx0KFwiZGl2XCIsIG51bGwsIG51bGwsIFwibWluLXdpZHRoOiAxcHhcIildLCBcIkNvZGVNaXJyb3ItdnNjcm9sbGJhclwiKTtcbiAgICB2YXIgaG9yaXogPSB0aGlzLmhvcml6ID0gZWx0KFwiZGl2XCIsIFtlbHQoXCJkaXZcIiwgbnVsbCwgbnVsbCwgXCJoZWlnaHQ6IDEwMCU7IG1pbi1oZWlnaHQ6IDFweFwiKV0sIFwiQ29kZU1pcnJvci1oc2Nyb2xsYmFyXCIpO1xuICAgIHZlcnQudGFiSW5kZXggPSBob3Jpei50YWJJbmRleCA9IC0xO1xuICAgIHBsYWNlKHZlcnQpOyBwbGFjZShob3Jpeik7XG5cbiAgICBvbih2ZXJ0LCBcInNjcm9sbFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodmVydC5jbGllbnRIZWlnaHQpIHsgc2Nyb2xsKHZlcnQuc2Nyb2xsVG9wLCBcInZlcnRpY2FsXCIpOyB9XG4gICAgfSk7XG4gICAgb24oaG9yaXosIFwic2Nyb2xsXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChob3Jpei5jbGllbnRXaWR0aCkgeyBzY3JvbGwoaG9yaXouc2Nyb2xsTGVmdCwgXCJob3Jpem9udGFsXCIpOyB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmNoZWNrZWRaZXJvV2lkdGggPSBmYWxzZTtcbiAgICAvLyBOZWVkIHRvIHNldCBhIG1pbmltdW0gd2lkdGggdG8gc2VlIHRoZSBzY3JvbGxiYXIgb24gSUU3IChidXQgbXVzdCBub3Qgc2V0IGl0IG9uIElFOCkuXG4gICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA4KSB7IHRoaXMuaG9yaXouc3R5bGUubWluSGVpZ2h0ID0gdGhpcy52ZXJ0LnN0eWxlLm1pbldpZHRoID0gXCIxOHB4XCI7IH1cbiAgfTtcblxuICBOYXRpdmVTY3JvbGxiYXJzLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAobWVhc3VyZSkge1xuICAgIHZhciBuZWVkc0ggPSBtZWFzdXJlLnNjcm9sbFdpZHRoID4gbWVhc3VyZS5jbGllbnRXaWR0aCArIDE7XG4gICAgdmFyIG5lZWRzViA9IG1lYXN1cmUuc2Nyb2xsSGVpZ2h0ID4gbWVhc3VyZS5jbGllbnRIZWlnaHQgKyAxO1xuICAgIHZhciBzV2lkdGggPSBtZWFzdXJlLm5hdGl2ZUJhcldpZHRoO1xuXG4gICAgaWYgKG5lZWRzVikge1xuICAgICAgdGhpcy52ZXJ0LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICB0aGlzLnZlcnQuc3R5bGUuYm90dG9tID0gbmVlZHNIID8gc1dpZHRoICsgXCJweFwiIDogXCIwXCI7XG4gICAgICB2YXIgdG90YWxIZWlnaHQgPSBtZWFzdXJlLnZpZXdIZWlnaHQgLSAobmVlZHNIID8gc1dpZHRoIDogMCk7XG4gICAgICAvLyBBIGJ1ZyBpbiBJRTggY2FuIGNhdXNlIHRoaXMgdmFsdWUgdG8gYmUgbmVnYXRpdmUsIHNvIGd1YXJkIGl0LlxuICAgICAgdGhpcy52ZXJ0LmZpcnN0Q2hpbGQuc3R5bGUuaGVpZ2h0ID1cbiAgICAgICAgTWF0aC5tYXgoMCwgbWVhc3VyZS5zY3JvbGxIZWlnaHQgLSBtZWFzdXJlLmNsaWVudEhlaWdodCArIHRvdGFsSGVpZ2h0KSArIFwicHhcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy52ZXJ0LnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgICAgdGhpcy52ZXJ0LmZpcnN0Q2hpbGQuc3R5bGUuaGVpZ2h0ID0gXCIwXCI7XG4gICAgfVxuXG4gICAgaWYgKG5lZWRzSCkge1xuICAgICAgdGhpcy5ob3Jpei5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgdGhpcy5ob3Jpei5zdHlsZS5yaWdodCA9IG5lZWRzViA/IHNXaWR0aCArIFwicHhcIiA6IFwiMFwiO1xuICAgICAgdGhpcy5ob3Jpei5zdHlsZS5sZWZ0ID0gbWVhc3VyZS5iYXJMZWZ0ICsgXCJweFwiO1xuICAgICAgdmFyIHRvdGFsV2lkdGggPSBtZWFzdXJlLnZpZXdXaWR0aCAtIG1lYXN1cmUuYmFyTGVmdCAtIChuZWVkc1YgPyBzV2lkdGggOiAwKTtcbiAgICAgIHRoaXMuaG9yaXouZmlyc3RDaGlsZC5zdHlsZS53aWR0aCA9XG4gICAgICAgIE1hdGgubWF4KDAsIG1lYXN1cmUuc2Nyb2xsV2lkdGggLSBtZWFzdXJlLmNsaWVudFdpZHRoICsgdG90YWxXaWR0aCkgKyBcInB4XCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaG9yaXouc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICB0aGlzLmhvcml6LmZpcnN0Q2hpbGQuc3R5bGUud2lkdGggPSBcIjBcIjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuY2hlY2tlZFplcm9XaWR0aCAmJiBtZWFzdXJlLmNsaWVudEhlaWdodCA+IDApIHtcbiAgICAgIGlmIChzV2lkdGggPT0gMCkgeyB0aGlzLnplcm9XaWR0aEhhY2soKTsgfVxuICAgICAgdGhpcy5jaGVja2VkWmVyb1dpZHRoID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4ge3JpZ2h0OiBuZWVkc1YgPyBzV2lkdGggOiAwLCBib3R0b206IG5lZWRzSCA/IHNXaWR0aCA6IDB9XG4gIH07XG5cbiAgTmF0aXZlU2Nyb2xsYmFycy5wcm90b3R5cGUuc2V0U2Nyb2xsTGVmdCA9IGZ1bmN0aW9uIChwb3MpIHtcbiAgICBpZiAodGhpcy5ob3Jpei5zY3JvbGxMZWZ0ICE9IHBvcykgeyB0aGlzLmhvcml6LnNjcm9sbExlZnQgPSBwb3M7IH1cbiAgICBpZiAodGhpcy5kaXNhYmxlSG9yaXopIHsgdGhpcy5lbmFibGVaZXJvV2lkdGhCYXIodGhpcy5ob3JpeiwgdGhpcy5kaXNhYmxlSG9yaXosIFwiaG9yaXpcIik7IH1cbiAgfTtcblxuICBOYXRpdmVTY3JvbGxiYXJzLnByb3RvdHlwZS5zZXRTY3JvbGxUb3AgPSBmdW5jdGlvbiAocG9zKSB7XG4gICAgaWYgKHRoaXMudmVydC5zY3JvbGxUb3AgIT0gcG9zKSB7IHRoaXMudmVydC5zY3JvbGxUb3AgPSBwb3M7IH1cbiAgICBpZiAodGhpcy5kaXNhYmxlVmVydCkgeyB0aGlzLmVuYWJsZVplcm9XaWR0aEJhcih0aGlzLnZlcnQsIHRoaXMuZGlzYWJsZVZlcnQsIFwidmVydFwiKTsgfVxuICB9O1xuXG4gIE5hdGl2ZVNjcm9sbGJhcnMucHJvdG90eXBlLnplcm9XaWR0aEhhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHcgPSBtYWMgJiYgIW1hY19nZU1vdW50YWluTGlvbiA/IFwiMTJweFwiIDogXCIxOHB4XCI7XG4gICAgdGhpcy5ob3Jpei5zdHlsZS5oZWlnaHQgPSB0aGlzLnZlcnQuc3R5bGUud2lkdGggPSB3O1xuICAgIHRoaXMuaG9yaXouc3R5bGUucG9pbnRlckV2ZW50cyA9IHRoaXMudmVydC5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7XG4gICAgdGhpcy5kaXNhYmxlSG9yaXogPSBuZXcgRGVsYXllZDtcbiAgICB0aGlzLmRpc2FibGVWZXJ0ID0gbmV3IERlbGF5ZWQ7XG4gIH07XG5cbiAgTmF0aXZlU2Nyb2xsYmFycy5wcm90b3R5cGUuZW5hYmxlWmVyb1dpZHRoQmFyID0gZnVuY3Rpb24gKGJhciwgZGVsYXksIHR5cGUpIHtcbiAgICBiYXIuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwiYXV0b1wiO1xuICAgIGZ1bmN0aW9uIG1heWJlRGlzYWJsZSgpIHtcbiAgICAgIC8vIFRvIGZpbmQgb3V0IHdoZXRoZXIgdGhlIHNjcm9sbGJhciBpcyBzdGlsbCB2aXNpYmxlLCB3ZVxuICAgICAgLy8gY2hlY2sgd2hldGhlciB0aGUgZWxlbWVudCB1bmRlciB0aGUgcGl4ZWwgaW4gdGhlIGJvdHRvbVxuICAgICAgLy8gcmlnaHQgY29ybmVyIG9mIHRoZSBzY3JvbGxiYXIgYm94IGlzIHRoZSBzY3JvbGxiYXIgYm94XG4gICAgICAvLyBpdHNlbGYgKHdoZW4gdGhlIGJhciBpcyBzdGlsbCB2aXNpYmxlKSBvciBpdHMgZmlsbGVyIGNoaWxkXG4gICAgICAvLyAod2hlbiB0aGUgYmFyIGlzIGhpZGRlbikuIElmIGl0IGlzIHN0aWxsIHZpc2libGUsIHdlIGtlZXBcbiAgICAgIC8vIGl0IGVuYWJsZWQsIGlmIGl0J3MgaGlkZGVuLCB3ZSBkaXNhYmxlIHBvaW50ZXIgZXZlbnRzLlxuICAgICAgdmFyIGJveCA9IGJhci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHZhciBlbHQgPSB0eXBlID09IFwidmVydFwiID8gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChib3gucmlnaHQgLSAxLCAoYm94LnRvcCArIGJveC5ib3R0b20pIC8gMilcbiAgICAgICAgICA6IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoKGJveC5yaWdodCArIGJveC5sZWZ0KSAvIDIsIGJveC5ib3R0b20gLSAxKTtcbiAgICAgIGlmIChlbHQgIT0gYmFyKSB7IGJhci5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7IH1cbiAgICAgIGVsc2UgeyBkZWxheS5zZXQoMTAwMCwgbWF5YmVEaXNhYmxlKTsgfVxuICAgIH1cbiAgICBkZWxheS5zZXQoMTAwMCwgbWF5YmVEaXNhYmxlKTtcbiAgfTtcblxuICBOYXRpdmVTY3JvbGxiYXJzLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcGFyZW50ID0gdGhpcy5ob3Jpei5wYXJlbnROb2RlO1xuICAgIHBhcmVudC5yZW1vdmVDaGlsZCh0aGlzLmhvcml6KTtcbiAgICBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcy52ZXJ0KTtcbiAgfTtcblxuICB2YXIgTnVsbFNjcm9sbGJhcnMgPSBmdW5jdGlvbiAoKSB7fTtcblxuICBOdWxsU2Nyb2xsYmFycy5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4ge2JvdHRvbTogMCwgcmlnaHQ6IDB9IH07XG4gIE51bGxTY3JvbGxiYXJzLnByb3RvdHlwZS5zZXRTY3JvbGxMZWZ0ID0gZnVuY3Rpb24gKCkge307XG4gIE51bGxTY3JvbGxiYXJzLnByb3RvdHlwZS5zZXRTY3JvbGxUb3AgPSBmdW5jdGlvbiAoKSB7fTtcbiAgTnVsbFNjcm9sbGJhcnMucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge307XG5cbiAgZnVuY3Rpb24gdXBkYXRlU2Nyb2xsYmFycyhjbSwgbWVhc3VyZSkge1xuICAgIGlmICghbWVhc3VyZSkgeyBtZWFzdXJlID0gbWVhc3VyZUZvclNjcm9sbGJhcnMoY20pOyB9XG4gICAgdmFyIHN0YXJ0V2lkdGggPSBjbS5kaXNwbGF5LmJhcldpZHRoLCBzdGFydEhlaWdodCA9IGNtLmRpc3BsYXkuYmFySGVpZ2h0O1xuICAgIHVwZGF0ZVNjcm9sbGJhcnNJbm5lcihjbSwgbWVhc3VyZSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0ICYmIHN0YXJ0V2lkdGggIT0gY20uZGlzcGxheS5iYXJXaWR0aCB8fCBzdGFydEhlaWdodCAhPSBjbS5kaXNwbGF5LmJhckhlaWdodDsgaSsrKSB7XG4gICAgICBpZiAoc3RhcnRXaWR0aCAhPSBjbS5kaXNwbGF5LmJhcldpZHRoICYmIGNtLm9wdGlvbnMubGluZVdyYXBwaW5nKVxuICAgICAgICB7IHVwZGF0ZUhlaWdodHNJblZpZXdwb3J0KGNtKTsgfVxuICAgICAgdXBkYXRlU2Nyb2xsYmFyc0lubmVyKGNtLCBtZWFzdXJlRm9yU2Nyb2xsYmFycyhjbSkpO1xuICAgICAgc3RhcnRXaWR0aCA9IGNtLmRpc3BsYXkuYmFyV2lkdGg7IHN0YXJ0SGVpZ2h0ID0gY20uZGlzcGxheS5iYXJIZWlnaHQ7XG4gICAgfVxuICB9XG5cbiAgLy8gUmUtc3luY2hyb25pemUgdGhlIGZha2Ugc2Nyb2xsYmFycyB3aXRoIHRoZSBhY3R1YWwgc2l6ZSBvZiB0aGVcbiAgLy8gY29udGVudC5cbiAgZnVuY3Rpb24gdXBkYXRlU2Nyb2xsYmFyc0lubmVyKGNtLCBtZWFzdXJlKSB7XG4gICAgdmFyIGQgPSBjbS5kaXNwbGF5O1xuICAgIHZhciBzaXplcyA9IGQuc2Nyb2xsYmFycy51cGRhdGUobWVhc3VyZSk7XG5cbiAgICBkLnNpemVyLnN0eWxlLnBhZGRpbmdSaWdodCA9IChkLmJhcldpZHRoID0gc2l6ZXMucmlnaHQpICsgXCJweFwiO1xuICAgIGQuc2l6ZXIuc3R5bGUucGFkZGluZ0JvdHRvbSA9IChkLmJhckhlaWdodCA9IHNpemVzLmJvdHRvbSkgKyBcInB4XCI7XG4gICAgZC5oZWlnaHRGb3JjZXIuc3R5bGUuYm9yZGVyQm90dG9tID0gc2l6ZXMuYm90dG9tICsgXCJweCBzb2xpZCB0cmFuc3BhcmVudFwiO1xuXG4gICAgaWYgKHNpemVzLnJpZ2h0ICYmIHNpemVzLmJvdHRvbSkge1xuICAgICAgZC5zY3JvbGxiYXJGaWxsZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIGQuc2Nyb2xsYmFyRmlsbGVyLnN0eWxlLmhlaWdodCA9IHNpemVzLmJvdHRvbSArIFwicHhcIjtcbiAgICAgIGQuc2Nyb2xsYmFyRmlsbGVyLnN0eWxlLndpZHRoID0gc2l6ZXMucmlnaHQgKyBcInB4XCI7XG4gICAgfSBlbHNlIHsgZC5zY3JvbGxiYXJGaWxsZXIuc3R5bGUuZGlzcGxheSA9IFwiXCI7IH1cbiAgICBpZiAoc2l6ZXMuYm90dG9tICYmIGNtLm9wdGlvbnMuY292ZXJHdXR0ZXJOZXh0VG9TY3JvbGxiYXIgJiYgY20ub3B0aW9ucy5maXhlZEd1dHRlcikge1xuICAgICAgZC5ndXR0ZXJGaWxsZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIGQuZ3V0dGVyRmlsbGVyLnN0eWxlLmhlaWdodCA9IHNpemVzLmJvdHRvbSArIFwicHhcIjtcbiAgICAgIGQuZ3V0dGVyRmlsbGVyLnN0eWxlLndpZHRoID0gbWVhc3VyZS5ndXR0ZXJXaWR0aCArIFwicHhcIjtcbiAgICB9IGVsc2UgeyBkLmd1dHRlckZpbGxlci5zdHlsZS5kaXNwbGF5ID0gXCJcIjsgfVxuICB9XG5cbiAgdmFyIHNjcm9sbGJhck1vZGVsID0ge1wibmF0aXZlXCI6IE5hdGl2ZVNjcm9sbGJhcnMsIFwibnVsbFwiOiBOdWxsU2Nyb2xsYmFyc307XG5cbiAgZnVuY3Rpb24gaW5pdFNjcm9sbGJhcnMoY20pIHtcbiAgICBpZiAoY20uZGlzcGxheS5zY3JvbGxiYXJzKSB7XG4gICAgICBjbS5kaXNwbGF5LnNjcm9sbGJhcnMuY2xlYXIoKTtcbiAgICAgIGlmIChjbS5kaXNwbGF5LnNjcm9sbGJhcnMuYWRkQ2xhc3MpXG4gICAgICAgIHsgcm1DbGFzcyhjbS5kaXNwbGF5LndyYXBwZXIsIGNtLmRpc3BsYXkuc2Nyb2xsYmFycy5hZGRDbGFzcyk7IH1cbiAgICB9XG5cbiAgICBjbS5kaXNwbGF5LnNjcm9sbGJhcnMgPSBuZXcgc2Nyb2xsYmFyTW9kZWxbY20ub3B0aW9ucy5zY3JvbGxiYXJTdHlsZV0oZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIGNtLmRpc3BsYXkud3JhcHBlci5pbnNlcnRCZWZvcmUobm9kZSwgY20uZGlzcGxheS5zY3JvbGxiYXJGaWxsZXIpO1xuICAgICAgLy8gUHJldmVudCBjbGlja3MgaW4gdGhlIHNjcm9sbGJhcnMgZnJvbSBraWxsaW5nIGZvY3VzXG4gICAgICBvbihub2RlLCBcIm1vdXNlZG93blwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChjbS5zdGF0ZS5mb2N1c2VkKSB7IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gY20uZGlzcGxheS5pbnB1dC5mb2N1cygpOyB9LCAwKTsgfVxuICAgICAgfSk7XG4gICAgICBub2RlLnNldEF0dHJpYnV0ZShcImNtLW5vdC1jb250ZW50XCIsIFwidHJ1ZVwiKTtcbiAgICB9LCBmdW5jdGlvbiAocG9zLCBheGlzKSB7XG4gICAgICBpZiAoYXhpcyA9PSBcImhvcml6b250YWxcIikgeyBzZXRTY3JvbGxMZWZ0KGNtLCBwb3MpOyB9XG4gICAgICBlbHNlIHsgdXBkYXRlU2Nyb2xsVG9wKGNtLCBwb3MpOyB9XG4gICAgfSwgY20pO1xuICAgIGlmIChjbS5kaXNwbGF5LnNjcm9sbGJhcnMuYWRkQ2xhc3MpXG4gICAgICB7IGFkZENsYXNzKGNtLmRpc3BsYXkud3JhcHBlciwgY20uZGlzcGxheS5zY3JvbGxiYXJzLmFkZENsYXNzKTsgfVxuICB9XG5cbiAgLy8gT3BlcmF0aW9ucyBhcmUgdXNlZCB0byB3cmFwIGEgc2VyaWVzIG9mIGNoYW5nZXMgdG8gdGhlIGVkaXRvclxuICAvLyBzdGF0ZSBpbiBzdWNoIGEgd2F5IHRoYXQgZWFjaCBjaGFuZ2Ugd29uJ3QgaGF2ZSB0byB1cGRhdGUgdGhlXG4gIC8vIGN1cnNvciBhbmQgZGlzcGxheSAod2hpY2ggd291bGQgYmUgYXdrd2FyZCwgc2xvdywgYW5kXG4gIC8vIGVycm9yLXByb25lKS4gSW5zdGVhZCwgZGlzcGxheSB1cGRhdGVzIGFyZSBiYXRjaGVkIGFuZCB0aGVuIGFsbFxuICAvLyBjb21iaW5lZCBhbmQgZXhlY3V0ZWQgYXQgb25jZS5cblxuICB2YXIgbmV4dE9wSWQgPSAwO1xuICAvLyBTdGFydCBhIG5ldyBvcGVyYXRpb24uXG4gIGZ1bmN0aW9uIHN0YXJ0T3BlcmF0aW9uKGNtKSB7XG4gICAgY20uY3VyT3AgPSB7XG4gICAgICBjbTogY20sXG4gICAgICB2aWV3Q2hhbmdlZDogZmFsc2UsICAgICAgLy8gRmxhZyB0aGF0IGluZGljYXRlcyB0aGF0IGxpbmVzIG1pZ2h0IG5lZWQgdG8gYmUgcmVkcmF3blxuICAgICAgc3RhcnRIZWlnaHQ6IGNtLmRvYy5oZWlnaHQsIC8vIFVzZWQgdG8gZGV0ZWN0IG5lZWQgdG8gdXBkYXRlIHNjcm9sbGJhclxuICAgICAgZm9yY2VVcGRhdGU6IGZhbHNlLCAgICAgIC8vIFVzZWQgdG8gZm9yY2UgYSByZWRyYXdcbiAgICAgIHVwZGF0ZUlucHV0OiAwLCAgICAgICAvLyBXaGV0aGVyIHRvIHJlc2V0IHRoZSBpbnB1dCB0ZXh0YXJlYVxuICAgICAgdHlwaW5nOiBmYWxzZSwgICAgICAgICAgIC8vIFdoZXRoZXIgdGhpcyByZXNldCBzaG91bGQgYmUgY2FyZWZ1bCB0byBsZWF2ZSBleGlzdGluZyB0ZXh0IChmb3IgY29tcG9zaXRpbmcpXG4gICAgICBjaGFuZ2VPYmpzOiBudWxsLCAgICAgICAgLy8gQWNjdW11bGF0ZWQgY2hhbmdlcywgZm9yIGZpcmluZyBjaGFuZ2UgZXZlbnRzXG4gICAgICBjdXJzb3JBY3Rpdml0eUhhbmRsZXJzOiBudWxsLCAvLyBTZXQgb2YgaGFuZGxlcnMgdG8gZmlyZSBjdXJzb3JBY3Rpdml0eSBvblxuICAgICAgY3Vyc29yQWN0aXZpdHlDYWxsZWQ6IDAsIC8vIFRyYWNrcyB3aGljaCBjdXJzb3JBY3Rpdml0eSBoYW5kbGVycyBoYXZlIGJlZW4gY2FsbGVkIGFscmVhZHlcbiAgICAgIHNlbGVjdGlvbkNoYW5nZWQ6IGZhbHNlLCAvLyBXaGV0aGVyIHRoZSBzZWxlY3Rpb24gbmVlZHMgdG8gYmUgcmVkcmF3blxuICAgICAgdXBkYXRlTWF4TGluZTogZmFsc2UsICAgIC8vIFNldCB3aGVuIHRoZSB3aWRlc3QgbGluZSBuZWVkcyB0byBiZSBkZXRlcm1pbmVkIGFuZXdcbiAgICAgIHNjcm9sbExlZnQ6IG51bGwsIHNjcm9sbFRvcDogbnVsbCwgLy8gSW50ZXJtZWRpYXRlIHNjcm9sbCBwb3NpdGlvbiwgbm90IHB1c2hlZCB0byBET00geWV0XG4gICAgICBzY3JvbGxUb1BvczogbnVsbCwgICAgICAgLy8gVXNlZCB0byBzY3JvbGwgdG8gYSBzcGVjaWZpYyBwb3NpdGlvblxuICAgICAgZm9jdXM6IGZhbHNlLFxuICAgICAgaWQ6ICsrbmV4dE9wSWQgICAgICAgICAgIC8vIFVuaXF1ZSBJRFxuICAgIH07XG4gICAgcHVzaE9wZXJhdGlvbihjbS5jdXJPcCk7XG4gIH1cblxuICAvLyBGaW5pc2ggYW4gb3BlcmF0aW9uLCB1cGRhdGluZyB0aGUgZGlzcGxheSBhbmQgc2lnbmFsbGluZyBkZWxheWVkIGV2ZW50c1xuICBmdW5jdGlvbiBlbmRPcGVyYXRpb24oY20pIHtcbiAgICB2YXIgb3AgPSBjbS5jdXJPcDtcbiAgICBpZiAob3ApIHsgZmluaXNoT3BlcmF0aW9uKG9wLCBmdW5jdGlvbiAoZ3JvdXApIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JvdXAub3BzLmxlbmd0aDsgaSsrKVxuICAgICAgICB7IGdyb3VwLm9wc1tpXS5jbS5jdXJPcCA9IG51bGw7IH1cbiAgICAgIGVuZE9wZXJhdGlvbnMoZ3JvdXApO1xuICAgIH0pOyB9XG4gIH1cblxuICAvLyBUaGUgRE9NIHVwZGF0ZXMgZG9uZSB3aGVuIGFuIG9wZXJhdGlvbiBmaW5pc2hlcyBhcmUgYmF0Y2hlZCBzb1xuICAvLyB0aGF0IHRoZSBtaW5pbXVtIG51bWJlciBvZiByZWxheW91dHMgYXJlIHJlcXVpcmVkLlxuICBmdW5jdGlvbiBlbmRPcGVyYXRpb25zKGdyb3VwKSB7XG4gICAgdmFyIG9wcyA9IGdyb3VwLm9wcztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wcy5sZW5ndGg7IGkrKykgLy8gUmVhZCBET01cbiAgICAgIHsgZW5kT3BlcmF0aW9uX1IxKG9wc1tpXSk7IH1cbiAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBvcHMubGVuZ3RoOyBpJDErKykgLy8gV3JpdGUgRE9NIChtYXliZSlcbiAgICAgIHsgZW5kT3BlcmF0aW9uX1cxKG9wc1tpJDFdKTsgfVxuICAgIGZvciAodmFyIGkkMiA9IDA7IGkkMiA8IG9wcy5sZW5ndGg7IGkkMisrKSAvLyBSZWFkIERPTVxuICAgICAgeyBlbmRPcGVyYXRpb25fUjIob3BzW2kkMl0pOyB9XG4gICAgZm9yICh2YXIgaSQzID0gMDsgaSQzIDwgb3BzLmxlbmd0aDsgaSQzKyspIC8vIFdyaXRlIERPTSAobWF5YmUpXG4gICAgICB7IGVuZE9wZXJhdGlvbl9XMihvcHNbaSQzXSk7IH1cbiAgICBmb3IgKHZhciBpJDQgPSAwOyBpJDQgPCBvcHMubGVuZ3RoOyBpJDQrKykgLy8gUmVhZCBET01cbiAgICAgIHsgZW5kT3BlcmF0aW9uX2ZpbmlzaChvcHNbaSQ0XSk7IH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGVuZE9wZXJhdGlvbl9SMShvcCkge1xuICAgIHZhciBjbSA9IG9wLmNtLCBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICBtYXliZUNsaXBTY3JvbGxiYXJzKGNtKTtcbiAgICBpZiAob3AudXBkYXRlTWF4TGluZSkgeyBmaW5kTWF4TGluZShjbSk7IH1cblxuICAgIG9wLm11c3RVcGRhdGUgPSBvcC52aWV3Q2hhbmdlZCB8fCBvcC5mb3JjZVVwZGF0ZSB8fCBvcC5zY3JvbGxUb3AgIT0gbnVsbCB8fFxuICAgICAgb3Auc2Nyb2xsVG9Qb3MgJiYgKG9wLnNjcm9sbFRvUG9zLmZyb20ubGluZSA8IGRpc3BsYXkudmlld0Zyb20gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICBvcC5zY3JvbGxUb1Bvcy50by5saW5lID49IGRpc3BsYXkudmlld1RvKSB8fFxuICAgICAgZGlzcGxheS5tYXhMaW5lQ2hhbmdlZCAmJiBjbS5vcHRpb25zLmxpbmVXcmFwcGluZztcbiAgICBvcC51cGRhdGUgPSBvcC5tdXN0VXBkYXRlICYmXG4gICAgICBuZXcgRGlzcGxheVVwZGF0ZShjbSwgb3AubXVzdFVwZGF0ZSAmJiB7dG9wOiBvcC5zY3JvbGxUb3AsIGVuc3VyZTogb3Auc2Nyb2xsVG9Qb3N9LCBvcC5mb3JjZVVwZGF0ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBlbmRPcGVyYXRpb25fVzEob3ApIHtcbiAgICBvcC51cGRhdGVkRGlzcGxheSA9IG9wLm11c3RVcGRhdGUgJiYgdXBkYXRlRGlzcGxheUlmTmVlZGVkKG9wLmNtLCBvcC51cGRhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5kT3BlcmF0aW9uX1IyKG9wKSB7XG4gICAgdmFyIGNtID0gb3AuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIGlmIChvcC51cGRhdGVkRGlzcGxheSkgeyB1cGRhdGVIZWlnaHRzSW5WaWV3cG9ydChjbSk7IH1cblxuICAgIG9wLmJhck1lYXN1cmUgPSBtZWFzdXJlRm9yU2Nyb2xsYmFycyhjbSk7XG5cbiAgICAvLyBJZiB0aGUgbWF4IGxpbmUgY2hhbmdlZCBzaW5jZSBpdCB3YXMgbGFzdCBtZWFzdXJlZCwgbWVhc3VyZSBpdCxcbiAgICAvLyBhbmQgZW5zdXJlIHRoZSBkb2N1bWVudCdzIHdpZHRoIG1hdGNoZXMgaXQuXG4gICAgLy8gdXBkYXRlRGlzcGxheV9XMiB3aWxsIHVzZSB0aGVzZSBwcm9wZXJ0aWVzIHRvIGRvIHRoZSBhY3R1YWwgcmVzaXppbmdcbiAgICBpZiAoZGlzcGxheS5tYXhMaW5lQ2hhbmdlZCAmJiAhY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIHtcbiAgICAgIG9wLmFkanVzdFdpZHRoVG8gPSBtZWFzdXJlQ2hhcihjbSwgZGlzcGxheS5tYXhMaW5lLCBkaXNwbGF5Lm1heExpbmUudGV4dC5sZW5ndGgpLmxlZnQgKyAzO1xuICAgICAgY20uZGlzcGxheS5zaXplcldpZHRoID0gb3AuYWRqdXN0V2lkdGhUbztcbiAgICAgIG9wLmJhck1lYXN1cmUuc2Nyb2xsV2lkdGggPVxuICAgICAgICBNYXRoLm1heChkaXNwbGF5LnNjcm9sbGVyLmNsaWVudFdpZHRoLCBkaXNwbGF5LnNpemVyLm9mZnNldExlZnQgKyBvcC5hZGp1c3RXaWR0aFRvICsgc2Nyb2xsR2FwKGNtKSArIGNtLmRpc3BsYXkuYmFyV2lkdGgpO1xuICAgICAgb3AubWF4U2Nyb2xsTGVmdCA9IE1hdGgubWF4KDAsIGRpc3BsYXkuc2l6ZXIub2Zmc2V0TGVmdCArIG9wLmFkanVzdFdpZHRoVG8gLSBkaXNwbGF5V2lkdGgoY20pKTtcbiAgICB9XG5cbiAgICBpZiAob3AudXBkYXRlZERpc3BsYXkgfHwgb3Auc2VsZWN0aW9uQ2hhbmdlZClcbiAgICAgIHsgb3AucHJlcGFyZWRTZWxlY3Rpb24gPSBkaXNwbGF5LmlucHV0LnByZXBhcmVTZWxlY3Rpb24oKTsgfVxuICB9XG5cbiAgZnVuY3Rpb24gZW5kT3BlcmF0aW9uX1cyKG9wKSB7XG4gICAgdmFyIGNtID0gb3AuY207XG5cbiAgICBpZiAob3AuYWRqdXN0V2lkdGhUbyAhPSBudWxsKSB7XG4gICAgICBjbS5kaXNwbGF5LnNpemVyLnN0eWxlLm1pbldpZHRoID0gb3AuYWRqdXN0V2lkdGhUbyArIFwicHhcIjtcbiAgICAgIGlmIChvcC5tYXhTY3JvbGxMZWZ0IDwgY20uZG9jLnNjcm9sbExlZnQpXG4gICAgICAgIHsgc2V0U2Nyb2xsTGVmdChjbSwgTWF0aC5taW4oY20uZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0LCBvcC5tYXhTY3JvbGxMZWZ0KSwgdHJ1ZSk7IH1cbiAgICAgIGNtLmRpc3BsYXkubWF4TGluZUNoYW5nZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgdGFrZUZvY3VzID0gb3AuZm9jdXMgJiYgb3AuZm9jdXMgPT0gYWN0aXZlRWx0KCk7XG4gICAgaWYgKG9wLnByZXBhcmVkU2VsZWN0aW9uKVxuICAgICAgeyBjbS5kaXNwbGF5LmlucHV0LnNob3dTZWxlY3Rpb24ob3AucHJlcGFyZWRTZWxlY3Rpb24sIHRha2VGb2N1cyk7IH1cbiAgICBpZiAob3AudXBkYXRlZERpc3BsYXkgfHwgb3Auc3RhcnRIZWlnaHQgIT0gY20uZG9jLmhlaWdodClcbiAgICAgIHsgdXBkYXRlU2Nyb2xsYmFycyhjbSwgb3AuYmFyTWVhc3VyZSk7IH1cbiAgICBpZiAob3AudXBkYXRlZERpc3BsYXkpXG4gICAgICB7IHNldERvY3VtZW50SGVpZ2h0KGNtLCBvcC5iYXJNZWFzdXJlKTsgfVxuXG4gICAgaWYgKG9wLnNlbGVjdGlvbkNoYW5nZWQpIHsgcmVzdGFydEJsaW5rKGNtKTsgfVxuXG4gICAgaWYgKGNtLnN0YXRlLmZvY3VzZWQgJiYgb3AudXBkYXRlSW5wdXQpXG4gICAgICB7IGNtLmRpc3BsYXkuaW5wdXQucmVzZXQob3AudHlwaW5nKTsgfVxuICAgIGlmICh0YWtlRm9jdXMpIHsgZW5zdXJlRm9jdXMob3AuY20pOyB9XG4gIH1cblxuICBmdW5jdGlvbiBlbmRPcGVyYXRpb25fZmluaXNoKG9wKSB7XG4gICAgdmFyIGNtID0gb3AuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBkb2MgPSBjbS5kb2M7XG5cbiAgICBpZiAob3AudXBkYXRlZERpc3BsYXkpIHsgcG9zdFVwZGF0ZURpc3BsYXkoY20sIG9wLnVwZGF0ZSk7IH1cblxuICAgIC8vIEFib3J0IG1vdXNlIHdoZWVsIGRlbHRhIG1lYXN1cmVtZW50LCB3aGVuIHNjcm9sbGluZyBleHBsaWNpdGx5XG4gICAgaWYgKGRpc3BsYXkud2hlZWxTdGFydFggIT0gbnVsbCAmJiAob3Auc2Nyb2xsVG9wICE9IG51bGwgfHwgb3Auc2Nyb2xsTGVmdCAhPSBudWxsIHx8IG9wLnNjcm9sbFRvUG9zKSlcbiAgICAgIHsgZGlzcGxheS53aGVlbFN0YXJ0WCA9IGRpc3BsYXkud2hlZWxTdGFydFkgPSBudWxsOyB9XG5cbiAgICAvLyBQcm9wYWdhdGUgdGhlIHNjcm9sbCBwb3NpdGlvbiB0byB0aGUgYWN0dWFsIERPTSBzY3JvbGxlclxuICAgIGlmIChvcC5zY3JvbGxUb3AgIT0gbnVsbCkgeyBzZXRTY3JvbGxUb3AoY20sIG9wLnNjcm9sbFRvcCwgb3AuZm9yY2VTY3JvbGwpOyB9XG5cbiAgICBpZiAob3Auc2Nyb2xsTGVmdCAhPSBudWxsKSB7IHNldFNjcm9sbExlZnQoY20sIG9wLnNjcm9sbExlZnQsIHRydWUsIHRydWUpOyB9XG4gICAgLy8gSWYgd2UgbmVlZCB0byBzY3JvbGwgYSBzcGVjaWZpYyBwb3NpdGlvbiBpbnRvIHZpZXcsIGRvIHNvLlxuICAgIGlmIChvcC5zY3JvbGxUb1Bvcykge1xuICAgICAgdmFyIHJlY3QgPSBzY3JvbGxQb3NJbnRvVmlldyhjbSwgY2xpcFBvcyhkb2MsIG9wLnNjcm9sbFRvUG9zLmZyb20pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGlwUG9zKGRvYywgb3Auc2Nyb2xsVG9Qb3MudG8pLCBvcC5zY3JvbGxUb1Bvcy5tYXJnaW4pO1xuICAgICAgbWF5YmVTY3JvbGxXaW5kb3coY20sIHJlY3QpO1xuICAgIH1cblxuICAgIC8vIEZpcmUgZXZlbnRzIGZvciBtYXJrZXJzIHRoYXQgYXJlIGhpZGRlbi91bmlkZGVuIGJ5IGVkaXRpbmcgb3JcbiAgICAvLyB1bmRvaW5nXG4gICAgdmFyIGhpZGRlbiA9IG9wLm1heWJlSGlkZGVuTWFya2VycywgdW5oaWRkZW4gPSBvcC5tYXliZVVuaGlkZGVuTWFya2VycztcbiAgICBpZiAoaGlkZGVuKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgaGlkZGVuLmxlbmd0aDsgKytpKVxuICAgICAgeyBpZiAoIWhpZGRlbltpXS5saW5lcy5sZW5ndGgpIHsgc2lnbmFsKGhpZGRlbltpXSwgXCJoaWRlXCIpOyB9IH0gfVxuICAgIGlmICh1bmhpZGRlbikgeyBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCB1bmhpZGRlbi5sZW5ndGg7ICsraSQxKVxuICAgICAgeyBpZiAodW5oaWRkZW5baSQxXS5saW5lcy5sZW5ndGgpIHsgc2lnbmFsKHVuaGlkZGVuW2kkMV0sIFwidW5oaWRlXCIpOyB9IH0gfVxuXG4gICAgaWYgKGRpc3BsYXkud3JhcHBlci5vZmZzZXRIZWlnaHQpXG4gICAgICB7IGRvYy5zY3JvbGxUb3AgPSBjbS5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcDsgfVxuXG4gICAgLy8gRmlyZSBjaGFuZ2UgZXZlbnRzLCBhbmQgZGVsYXllZCBldmVudCBoYW5kbGVyc1xuICAgIGlmIChvcC5jaGFuZ2VPYmpzKVxuICAgICAgeyBzaWduYWwoY20sIFwiY2hhbmdlc1wiLCBjbSwgb3AuY2hhbmdlT2Jqcyk7IH1cbiAgICBpZiAob3AudXBkYXRlKVxuICAgICAgeyBvcC51cGRhdGUuZmluaXNoKCk7IH1cbiAgfVxuXG4gIC8vIFJ1biB0aGUgZ2l2ZW4gZnVuY3Rpb24gaW4gYW4gb3BlcmF0aW9uXG4gIGZ1bmN0aW9uIHJ1bkluT3AoY20sIGYpIHtcbiAgICBpZiAoY20uY3VyT3ApIHsgcmV0dXJuIGYoKSB9XG4gICAgc3RhcnRPcGVyYXRpb24oY20pO1xuICAgIHRyeSB7IHJldHVybiBmKCkgfVxuICAgIGZpbmFsbHkgeyBlbmRPcGVyYXRpb24oY20pOyB9XG4gIH1cbiAgLy8gV3JhcHMgYSBmdW5jdGlvbiBpbiBhbiBvcGVyYXRpb24uIFJldHVybnMgdGhlIHdyYXBwZWQgZnVuY3Rpb24uXG4gIGZ1bmN0aW9uIG9wZXJhdGlvbihjbSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChjbS5jdXJPcCkgeyByZXR1cm4gZi5hcHBseShjbSwgYXJndW1lbnRzKSB9XG4gICAgICBzdGFydE9wZXJhdGlvbihjbSk7XG4gICAgICB0cnkgeyByZXR1cm4gZi5hcHBseShjbSwgYXJndW1lbnRzKSB9XG4gICAgICBmaW5hbGx5IHsgZW5kT3BlcmF0aW9uKGNtKTsgfVxuICAgIH1cbiAgfVxuICAvLyBVc2VkIHRvIGFkZCBtZXRob2RzIHRvIGVkaXRvciBhbmQgZG9jIGluc3RhbmNlcywgd3JhcHBpbmcgdGhlbSBpblxuICAvLyBvcGVyYXRpb25zLlxuICBmdW5jdGlvbiBtZXRob2RPcChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuY3VyT3ApIHsgcmV0dXJuIGYuYXBwbHkodGhpcywgYXJndW1lbnRzKSB9XG4gICAgICBzdGFydE9wZXJhdGlvbih0aGlzKTtcbiAgICAgIHRyeSB7IHJldHVybiBmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfVxuICAgICAgZmluYWxseSB7IGVuZE9wZXJhdGlvbih0aGlzKTsgfVxuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBkb2NNZXRob2RPcChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNtID0gdGhpcy5jbTtcbiAgICAgIGlmICghY20gfHwgY20uY3VyT3ApIHsgcmV0dXJuIGYuYXBwbHkodGhpcywgYXJndW1lbnRzKSB9XG4gICAgICBzdGFydE9wZXJhdGlvbihjbSk7XG4gICAgICB0cnkgeyByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIH1cbiAgICAgIGZpbmFsbHkgeyBlbmRPcGVyYXRpb24oY20pOyB9XG4gICAgfVxuICB9XG5cbiAgLy8gSElHSExJR0hUIFdPUktFUlxuXG4gIGZ1bmN0aW9uIHN0YXJ0V29ya2VyKGNtLCB0aW1lKSB7XG4gICAgaWYgKGNtLmRvYy5oaWdobGlnaHRGcm9udGllciA8IGNtLmRpc3BsYXkudmlld1RvKVxuICAgICAgeyBjbS5zdGF0ZS5oaWdobGlnaHQuc2V0KHRpbWUsIGJpbmQoaGlnaGxpZ2h0V29ya2VyLCBjbSkpOyB9XG4gIH1cblxuICBmdW5jdGlvbiBoaWdobGlnaHRXb3JrZXIoY20pIHtcbiAgICB2YXIgZG9jID0gY20uZG9jO1xuICAgIGlmIChkb2MuaGlnaGxpZ2h0RnJvbnRpZXIgPj0gY20uZGlzcGxheS52aWV3VG8pIHsgcmV0dXJuIH1cbiAgICB2YXIgZW5kID0gK25ldyBEYXRlICsgY20ub3B0aW9ucy53b3JrVGltZTtcbiAgICB2YXIgY29udGV4dCA9IGdldENvbnRleHRCZWZvcmUoY20sIGRvYy5oaWdobGlnaHRGcm9udGllcik7XG4gICAgdmFyIGNoYW5nZWRMaW5lcyA9IFtdO1xuXG4gICAgZG9jLml0ZXIoY29udGV4dC5saW5lLCBNYXRoLm1pbihkb2MuZmlyc3QgKyBkb2Muc2l6ZSwgY20uZGlzcGxheS52aWV3VG8gKyA1MDApLCBmdW5jdGlvbiAobGluZSkge1xuICAgICAgaWYgKGNvbnRleHQubGluZSA+PSBjbS5kaXNwbGF5LnZpZXdGcm9tKSB7IC8vIFZpc2libGVcbiAgICAgICAgdmFyIG9sZFN0eWxlcyA9IGxpbmUuc3R5bGVzO1xuICAgICAgICB2YXIgcmVzZXRTdGF0ZSA9IGxpbmUudGV4dC5sZW5ndGggPiBjbS5vcHRpb25zLm1heEhpZ2hsaWdodExlbmd0aCA/IGNvcHlTdGF0ZShkb2MubW9kZSwgY29udGV4dC5zdGF0ZSkgOiBudWxsO1xuICAgICAgICB2YXIgaGlnaGxpZ2h0ZWQgPSBoaWdobGlnaHRMaW5lKGNtLCBsaW5lLCBjb250ZXh0LCB0cnVlKTtcbiAgICAgICAgaWYgKHJlc2V0U3RhdGUpIHsgY29udGV4dC5zdGF0ZSA9IHJlc2V0U3RhdGU7IH1cbiAgICAgICAgbGluZS5zdHlsZXMgPSBoaWdobGlnaHRlZC5zdHlsZXM7XG4gICAgICAgIHZhciBvbGRDbHMgPSBsaW5lLnN0eWxlQ2xhc3NlcywgbmV3Q2xzID0gaGlnaGxpZ2h0ZWQuY2xhc3NlcztcbiAgICAgICAgaWYgKG5ld0NscykgeyBsaW5lLnN0eWxlQ2xhc3NlcyA9IG5ld0NsczsgfVxuICAgICAgICBlbHNlIGlmIChvbGRDbHMpIHsgbGluZS5zdHlsZUNsYXNzZXMgPSBudWxsOyB9XG4gICAgICAgIHZhciBpc2NoYW5nZSA9ICFvbGRTdHlsZXMgfHwgb2xkU3R5bGVzLmxlbmd0aCAhPSBsaW5lLnN0eWxlcy5sZW5ndGggfHxcbiAgICAgICAgICBvbGRDbHMgIT0gbmV3Q2xzICYmICghb2xkQ2xzIHx8ICFuZXdDbHMgfHwgb2xkQ2xzLmJnQ2xhc3MgIT0gbmV3Q2xzLmJnQ2xhc3MgfHwgb2xkQ2xzLnRleHRDbGFzcyAhPSBuZXdDbHMudGV4dENsYXNzKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7ICFpc2NoYW5nZSAmJiBpIDwgb2xkU3R5bGVzLmxlbmd0aDsgKytpKSB7IGlzY2hhbmdlID0gb2xkU3R5bGVzW2ldICE9IGxpbmUuc3R5bGVzW2ldOyB9XG4gICAgICAgIGlmIChpc2NoYW5nZSkgeyBjaGFuZ2VkTGluZXMucHVzaChjb250ZXh0LmxpbmUpOyB9XG4gICAgICAgIGxpbmUuc3RhdGVBZnRlciA9IGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICBjb250ZXh0Lm5leHRMaW5lKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobGluZS50ZXh0Lmxlbmd0aCA8PSBjbS5vcHRpb25zLm1heEhpZ2hsaWdodExlbmd0aClcbiAgICAgICAgICB7IHByb2Nlc3NMaW5lKGNtLCBsaW5lLnRleHQsIGNvbnRleHQpOyB9XG4gICAgICAgIGxpbmUuc3RhdGVBZnRlciA9IGNvbnRleHQubGluZSAlIDUgPT0gMCA/IGNvbnRleHQuc2F2ZSgpIDogbnVsbDtcbiAgICAgICAgY29udGV4dC5uZXh0TGluZSgpO1xuICAgICAgfVxuICAgICAgaWYgKCtuZXcgRGF0ZSA+IGVuZCkge1xuICAgICAgICBzdGFydFdvcmtlcihjbSwgY20ub3B0aW9ucy53b3JrRGVsYXkpO1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICAgIGRvYy5oaWdobGlnaHRGcm9udGllciA9IGNvbnRleHQubGluZTtcbiAgICBkb2MubW9kZUZyb250aWVyID0gTWF0aC5tYXgoZG9jLm1vZGVGcm9udGllciwgY29udGV4dC5saW5lKTtcbiAgICBpZiAoY2hhbmdlZExpbmVzLmxlbmd0aCkgeyBydW5Jbk9wKGNtLCBmdW5jdGlvbiAoKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYW5nZWRMaW5lcy5sZW5ndGg7IGkrKylcbiAgICAgICAgeyByZWdMaW5lQ2hhbmdlKGNtLCBjaGFuZ2VkTGluZXNbaV0sIFwidGV4dFwiKTsgfVxuICAgIH0pOyB9XG4gIH1cblxuICAvLyBESVNQTEFZIERSQVdJTkdcblxuICB2YXIgRGlzcGxheVVwZGF0ZSA9IGZ1bmN0aW9uKGNtLCB2aWV3cG9ydCwgZm9yY2UpIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG5cbiAgICB0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnQ7XG4gICAgLy8gU3RvcmUgc29tZSB2YWx1ZXMgdGhhdCB3ZSdsbCBuZWVkIGxhdGVyIChidXQgZG9uJ3Qgd2FudCB0byBmb3JjZSBhIHJlbGF5b3V0IGZvcilcbiAgICB0aGlzLnZpc2libGUgPSB2aXNpYmxlTGluZXMoZGlzcGxheSwgY20uZG9jLCB2aWV3cG9ydCk7XG4gICAgdGhpcy5lZGl0b3JJc0hpZGRlbiA9ICFkaXNwbGF5LndyYXBwZXIub2Zmc2V0V2lkdGg7XG4gICAgdGhpcy53cmFwcGVySGVpZ2h0ID0gZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodDtcbiAgICB0aGlzLndyYXBwZXJXaWR0aCA9IGRpc3BsYXkud3JhcHBlci5jbGllbnRXaWR0aDtcbiAgICB0aGlzLm9sZERpc3BsYXlXaWR0aCA9IGRpc3BsYXlXaWR0aChjbSk7XG4gICAgdGhpcy5mb3JjZSA9IGZvcmNlO1xuICAgIHRoaXMuZGltcyA9IGdldERpbWVuc2lvbnMoY20pO1xuICAgIHRoaXMuZXZlbnRzID0gW107XG4gIH07XG5cbiAgRGlzcGxheVVwZGF0ZS5wcm90b3R5cGUuc2lnbmFsID0gZnVuY3Rpb24gKGVtaXR0ZXIsIHR5cGUpIHtcbiAgICBpZiAoaGFzSGFuZGxlcihlbWl0dGVyLCB0eXBlKSlcbiAgICAgIHsgdGhpcy5ldmVudHMucHVzaChhcmd1bWVudHMpOyB9XG4gIH07XG4gIERpc3BsYXlVcGRhdGUucHJvdG90eXBlLmZpbmlzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZXZlbnRzLmxlbmd0aDsgaSsrKVxuICAgICAgeyBzaWduYWwuYXBwbHkobnVsbCwgdGhpcy5ldmVudHNbaV0pOyB9XG4gIH07XG5cbiAgZnVuY3Rpb24gbWF5YmVDbGlwU2Nyb2xsYmFycyhjbSkge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICBpZiAoIWRpc3BsYXkuc2Nyb2xsYmFyc0NsaXBwZWQgJiYgZGlzcGxheS5zY3JvbGxlci5vZmZzZXRXaWR0aCkge1xuICAgICAgZGlzcGxheS5uYXRpdmVCYXJXaWR0aCA9IGRpc3BsYXkuc2Nyb2xsZXIub2Zmc2V0V2lkdGggLSBkaXNwbGF5LnNjcm9sbGVyLmNsaWVudFdpZHRoO1xuICAgICAgZGlzcGxheS5oZWlnaHRGb3JjZXIuc3R5bGUuaGVpZ2h0ID0gc2Nyb2xsR2FwKGNtKSArIFwicHhcIjtcbiAgICAgIGRpc3BsYXkuc2l6ZXIuc3R5bGUubWFyZ2luQm90dG9tID0gLWRpc3BsYXkubmF0aXZlQmFyV2lkdGggKyBcInB4XCI7XG4gICAgICBkaXNwbGF5LnNpemVyLnN0eWxlLmJvcmRlclJpZ2h0V2lkdGggPSBzY3JvbGxHYXAoY20pICsgXCJweFwiO1xuICAgICAgZGlzcGxheS5zY3JvbGxiYXJzQ2xpcHBlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2VsZWN0aW9uU25hcHNob3QoY20pIHtcbiAgICBpZiAoY20uaGFzRm9jdXMoKSkgeyByZXR1cm4gbnVsbCB9XG4gICAgdmFyIGFjdGl2ZSA9IGFjdGl2ZUVsdCgpO1xuICAgIGlmICghYWN0aXZlIHx8ICFjb250YWlucyhjbS5kaXNwbGF5LmxpbmVEaXYsIGFjdGl2ZSkpIHsgcmV0dXJuIG51bGwgfVxuICAgIHZhciByZXN1bHQgPSB7YWN0aXZlRWx0OiBhY3RpdmV9O1xuICAgIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSB7XG4gICAgICB2YXIgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgICAgaWYgKHNlbC5hbmNob3JOb2RlICYmIHNlbC5leHRlbmQgJiYgY29udGFpbnMoY20uZGlzcGxheS5saW5lRGl2LCBzZWwuYW5jaG9yTm9kZSkpIHtcbiAgICAgICAgcmVzdWx0LmFuY2hvck5vZGUgPSBzZWwuYW5jaG9yTm9kZTtcbiAgICAgICAgcmVzdWx0LmFuY2hvck9mZnNldCA9IHNlbC5hbmNob3JPZmZzZXQ7XG4gICAgICAgIHJlc3VsdC5mb2N1c05vZGUgPSBzZWwuZm9jdXNOb2RlO1xuICAgICAgICByZXN1bHQuZm9jdXNPZmZzZXQgPSBzZWwuZm9jdXNPZmZzZXQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc3RvcmVTZWxlY3Rpb24oc25hcHNob3QpIHtcbiAgICBpZiAoIXNuYXBzaG90IHx8ICFzbmFwc2hvdC5hY3RpdmVFbHQgfHwgc25hcHNob3QuYWN0aXZlRWx0ID09IGFjdGl2ZUVsdCgpKSB7IHJldHVybiB9XG4gICAgc25hcHNob3QuYWN0aXZlRWx0LmZvY3VzKCk7XG4gICAgaWYgKCEvXihJTlBVVHxURVhUQVJFQSkkLy50ZXN0KHNuYXBzaG90LmFjdGl2ZUVsdC5ub2RlTmFtZSkgJiZcbiAgICAgICAgc25hcHNob3QuYW5jaG9yTm9kZSAmJiBjb250YWlucyhkb2N1bWVudC5ib2R5LCBzbmFwc2hvdC5hbmNob3JOb2RlKSAmJiBjb250YWlucyhkb2N1bWVudC5ib2R5LCBzbmFwc2hvdC5mb2N1c05vZGUpKSB7XG4gICAgICB2YXIgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpLCByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICByYW5nZS5zZXRFbmQoc25hcHNob3QuYW5jaG9yTm9kZSwgc25hcHNob3QuYW5jaG9yT2Zmc2V0KTtcbiAgICAgIHJhbmdlLmNvbGxhcHNlKGZhbHNlKTtcbiAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgIHNlbC5hZGRSYW5nZShyYW5nZSk7XG4gICAgICBzZWwuZXh0ZW5kKHNuYXBzaG90LmZvY3VzTm9kZSwgc25hcHNob3QuZm9jdXNPZmZzZXQpO1xuICAgIH1cbiAgfVxuXG4gIC8vIERvZXMgdGhlIGFjdHVhbCB1cGRhdGluZyBvZiB0aGUgbGluZSBkaXNwbGF5LiBCYWlscyBvdXRcbiAgLy8gKHJldHVybmluZyBmYWxzZSkgd2hlbiB0aGVyZSBpcyBub3RoaW5nIHRvIGJlIGRvbmUgYW5kIGZvcmNlZCBpc1xuICAvLyBmYWxzZS5cbiAgZnVuY3Rpb24gdXBkYXRlRGlzcGxheUlmTmVlZGVkKGNtLCB1cGRhdGUpIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGRvYyA9IGNtLmRvYztcblxuICAgIGlmICh1cGRhdGUuZWRpdG9ySXNIaWRkZW4pIHtcbiAgICAgIHJlc2V0VmlldyhjbSk7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICAvLyBCYWlsIG91dCBpZiB0aGUgdmlzaWJsZSBhcmVhIGlzIGFscmVhZHkgcmVuZGVyZWQgYW5kIG5vdGhpbmcgY2hhbmdlZC5cbiAgICBpZiAoIXVwZGF0ZS5mb3JjZSAmJlxuICAgICAgICB1cGRhdGUudmlzaWJsZS5mcm9tID49IGRpc3BsYXkudmlld0Zyb20gJiYgdXBkYXRlLnZpc2libGUudG8gPD0gZGlzcGxheS52aWV3VG8gJiZcbiAgICAgICAgKGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPT0gbnVsbCB8fCBkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJzID49IGRpc3BsYXkudmlld1RvKSAmJlxuICAgICAgICBkaXNwbGF5LnJlbmRlcmVkVmlldyA9PSBkaXNwbGF5LnZpZXcgJiYgY291bnREaXJ0eVZpZXcoY20pID09IDApXG4gICAgICB7IHJldHVybiBmYWxzZSB9XG5cbiAgICBpZiAobWF5YmVVcGRhdGVMaW5lTnVtYmVyV2lkdGgoY20pKSB7XG4gICAgICByZXNldFZpZXcoY20pO1xuICAgICAgdXBkYXRlLmRpbXMgPSBnZXREaW1lbnNpb25zKGNtKTtcbiAgICB9XG5cbiAgICAvLyBDb21wdXRlIGEgc3VpdGFibGUgbmV3IHZpZXdwb3J0IChmcm9tICYgdG8pXG4gICAgdmFyIGVuZCA9IGRvYy5maXJzdCArIGRvYy5zaXplO1xuICAgIHZhciBmcm9tID0gTWF0aC5tYXgodXBkYXRlLnZpc2libGUuZnJvbSAtIGNtLm9wdGlvbnMudmlld3BvcnRNYXJnaW4sIGRvYy5maXJzdCk7XG4gICAgdmFyIHRvID0gTWF0aC5taW4oZW5kLCB1cGRhdGUudmlzaWJsZS50byArIGNtLm9wdGlvbnMudmlld3BvcnRNYXJnaW4pO1xuICAgIGlmIChkaXNwbGF5LnZpZXdGcm9tIDwgZnJvbSAmJiBmcm9tIC0gZGlzcGxheS52aWV3RnJvbSA8IDIwKSB7IGZyb20gPSBNYXRoLm1heChkb2MuZmlyc3QsIGRpc3BsYXkudmlld0Zyb20pOyB9XG4gICAgaWYgKGRpc3BsYXkudmlld1RvID4gdG8gJiYgZGlzcGxheS52aWV3VG8gLSB0byA8IDIwKSB7IHRvID0gTWF0aC5taW4oZW5kLCBkaXNwbGF5LnZpZXdUbyk7IH1cbiAgICBpZiAoc2F3Q29sbGFwc2VkU3BhbnMpIHtcbiAgICAgIGZyb20gPSB2aXN1YWxMaW5lTm8oY20uZG9jLCBmcm9tKTtcbiAgICAgIHRvID0gdmlzdWFsTGluZUVuZE5vKGNtLmRvYywgdG8pO1xuICAgIH1cblxuICAgIHZhciBkaWZmZXJlbnQgPSBmcm9tICE9IGRpc3BsYXkudmlld0Zyb20gfHwgdG8gIT0gZGlzcGxheS52aWV3VG8gfHxcbiAgICAgIGRpc3BsYXkubGFzdFdyYXBIZWlnaHQgIT0gdXBkYXRlLndyYXBwZXJIZWlnaHQgfHwgZGlzcGxheS5sYXN0V3JhcFdpZHRoICE9IHVwZGF0ZS53cmFwcGVyV2lkdGg7XG4gICAgYWRqdXN0VmlldyhjbSwgZnJvbSwgdG8pO1xuXG4gICAgZGlzcGxheS52aWV3T2Zmc2V0ID0gaGVpZ2h0QXRMaW5lKGdldExpbmUoY20uZG9jLCBkaXNwbGF5LnZpZXdGcm9tKSk7XG4gICAgLy8gUG9zaXRpb24gdGhlIG1vdmVyIGRpdiB0byBhbGlnbiB3aXRoIHRoZSBjdXJyZW50IHNjcm9sbCBwb3NpdGlvblxuICAgIGNtLmRpc3BsYXkubW92ZXIuc3R5bGUudG9wID0gZGlzcGxheS52aWV3T2Zmc2V0ICsgXCJweFwiO1xuXG4gICAgdmFyIHRvVXBkYXRlID0gY291bnREaXJ0eVZpZXcoY20pO1xuICAgIGlmICghZGlmZmVyZW50ICYmIHRvVXBkYXRlID09IDAgJiYgIXVwZGF0ZS5mb3JjZSAmJiBkaXNwbGF5LnJlbmRlcmVkVmlldyA9PSBkaXNwbGF5LnZpZXcgJiZcbiAgICAgICAgKGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPT0gbnVsbCB8fCBkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJzID49IGRpc3BsYXkudmlld1RvKSlcbiAgICAgIHsgcmV0dXJuIGZhbHNlIH1cblxuICAgIC8vIEZvciBiaWcgY2hhbmdlcywgd2UgaGlkZSB0aGUgZW5jbG9zaW5nIGVsZW1lbnQgZHVyaW5nIHRoZVxuICAgIC8vIHVwZGF0ZSwgc2luY2UgdGhhdCBzcGVlZHMgdXAgdGhlIG9wZXJhdGlvbnMgb24gbW9zdCBicm93c2Vycy5cbiAgICB2YXIgc2VsU25hcHNob3QgPSBzZWxlY3Rpb25TbmFwc2hvdChjbSk7XG4gICAgaWYgKHRvVXBkYXRlID4gNCkgeyBkaXNwbGF5LmxpbmVEaXYuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiOyB9XG4gICAgcGF0Y2hEaXNwbGF5KGNtLCBkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJzLCB1cGRhdGUuZGltcyk7XG4gICAgaWYgKHRvVXBkYXRlID4gNCkgeyBkaXNwbGF5LmxpbmVEaXYuc3R5bGUuZGlzcGxheSA9IFwiXCI7IH1cbiAgICBkaXNwbGF5LnJlbmRlcmVkVmlldyA9IGRpc3BsYXkudmlldztcbiAgICAvLyBUaGVyZSBtaWdodCBoYXZlIGJlZW4gYSB3aWRnZXQgd2l0aCBhIGZvY3VzZWQgZWxlbWVudCB0aGF0IGdvdFxuICAgIC8vIGhpZGRlbiBvciB1cGRhdGVkLCBpZiBzbyByZS1mb2N1cyBpdC5cbiAgICByZXN0b3JlU2VsZWN0aW9uKHNlbFNuYXBzaG90KTtcblxuICAgIC8vIFByZXZlbnQgc2VsZWN0aW9uIGFuZCBjdXJzb3JzIGZyb20gaW50ZXJmZXJpbmcgd2l0aCB0aGUgc2Nyb2xsXG4gICAgLy8gd2lkdGggYW5kIGhlaWdodC5cbiAgICByZW1vdmVDaGlsZHJlbihkaXNwbGF5LmN1cnNvckRpdik7XG4gICAgcmVtb3ZlQ2hpbGRyZW4oZGlzcGxheS5zZWxlY3Rpb25EaXYpO1xuICAgIGRpc3BsYXkuZ3V0dGVycy5zdHlsZS5oZWlnaHQgPSBkaXNwbGF5LnNpemVyLnN0eWxlLm1pbkhlaWdodCA9IDA7XG5cbiAgICBpZiAoZGlmZmVyZW50KSB7XG4gICAgICBkaXNwbGF5Lmxhc3RXcmFwSGVpZ2h0ID0gdXBkYXRlLndyYXBwZXJIZWlnaHQ7XG4gICAgICBkaXNwbGF5Lmxhc3RXcmFwV2lkdGggPSB1cGRhdGUud3JhcHBlcldpZHRoO1xuICAgICAgc3RhcnRXb3JrZXIoY20sIDQwMCk7XG4gICAgfVxuXG4gICAgZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA9IG51bGw7XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZnVuY3Rpb24gcG9zdFVwZGF0ZURpc3BsYXkoY20sIHVwZGF0ZSkge1xuICAgIHZhciB2aWV3cG9ydCA9IHVwZGF0ZS52aWV3cG9ydDtcblxuICAgIGZvciAodmFyIGZpcnN0ID0gdHJ1ZTs7IGZpcnN0ID0gZmFsc2UpIHtcbiAgICAgIGlmICghZmlyc3QgfHwgIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nIHx8IHVwZGF0ZS5vbGREaXNwbGF5V2lkdGggPT0gZGlzcGxheVdpZHRoKGNtKSkge1xuICAgICAgICAvLyBDbGlwIGZvcmNlZCB2aWV3cG9ydCB0byBhY3R1YWwgc2Nyb2xsYWJsZSBhcmVhLlxuICAgICAgICBpZiAodmlld3BvcnQgJiYgdmlld3BvcnQudG9wICE9IG51bGwpXG4gICAgICAgICAgeyB2aWV3cG9ydCA9IHt0b3A6IE1hdGgubWluKGNtLmRvYy5oZWlnaHQgKyBwYWRkaW5nVmVydChjbS5kaXNwbGF5KSAtIGRpc3BsYXlIZWlnaHQoY20pLCB2aWV3cG9ydC50b3ApfTsgfVxuICAgICAgICAvLyBVcGRhdGVkIGxpbmUgaGVpZ2h0cyBtaWdodCByZXN1bHQgaW4gdGhlIGRyYXduIGFyZWEgbm90XG4gICAgICAgIC8vIGFjdHVhbGx5IGNvdmVyaW5nIHRoZSB2aWV3cG9ydC4gS2VlcCBsb29waW5nIHVudGlsIGl0IGRvZXMuXG4gICAgICAgIHVwZGF0ZS52aXNpYmxlID0gdmlzaWJsZUxpbmVzKGNtLmRpc3BsYXksIGNtLmRvYywgdmlld3BvcnQpO1xuICAgICAgICBpZiAodXBkYXRlLnZpc2libGUuZnJvbSA+PSBjbS5kaXNwbGF5LnZpZXdGcm9tICYmIHVwZGF0ZS52aXNpYmxlLnRvIDw9IGNtLmRpc3BsYXkudmlld1RvKVxuICAgICAgICAgIHsgYnJlYWsgfVxuICAgICAgfSBlbHNlIGlmIChmaXJzdCkge1xuICAgICAgICB1cGRhdGUudmlzaWJsZSA9IHZpc2libGVMaW5lcyhjbS5kaXNwbGF5LCBjbS5kb2MsIHZpZXdwb3J0KTtcbiAgICAgIH1cbiAgICAgIGlmICghdXBkYXRlRGlzcGxheUlmTmVlZGVkKGNtLCB1cGRhdGUpKSB7IGJyZWFrIH1cbiAgICAgIHVwZGF0ZUhlaWdodHNJblZpZXdwb3J0KGNtKTtcbiAgICAgIHZhciBiYXJNZWFzdXJlID0gbWVhc3VyZUZvclNjcm9sbGJhcnMoY20pO1xuICAgICAgdXBkYXRlU2VsZWN0aW9uKGNtKTtcbiAgICAgIHVwZGF0ZVNjcm9sbGJhcnMoY20sIGJhck1lYXN1cmUpO1xuICAgICAgc2V0RG9jdW1lbnRIZWlnaHQoY20sIGJhck1lYXN1cmUpO1xuICAgICAgdXBkYXRlLmZvcmNlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdXBkYXRlLnNpZ25hbChjbSwgXCJ1cGRhdGVcIiwgY20pO1xuICAgIGlmIChjbS5kaXNwbGF5LnZpZXdGcm9tICE9IGNtLmRpc3BsYXkucmVwb3J0ZWRWaWV3RnJvbSB8fCBjbS5kaXNwbGF5LnZpZXdUbyAhPSBjbS5kaXNwbGF5LnJlcG9ydGVkVmlld1RvKSB7XG4gICAgICB1cGRhdGUuc2lnbmFsKGNtLCBcInZpZXdwb3J0Q2hhbmdlXCIsIGNtLCBjbS5kaXNwbGF5LnZpZXdGcm9tLCBjbS5kaXNwbGF5LnZpZXdUbyk7XG4gICAgICBjbS5kaXNwbGF5LnJlcG9ydGVkVmlld0Zyb20gPSBjbS5kaXNwbGF5LnZpZXdGcm9tOyBjbS5kaXNwbGF5LnJlcG9ydGVkVmlld1RvID0gY20uZGlzcGxheS52aWV3VG87XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlRGlzcGxheVNpbXBsZShjbSwgdmlld3BvcnQpIHtcbiAgICB2YXIgdXBkYXRlID0gbmV3IERpc3BsYXlVcGRhdGUoY20sIHZpZXdwb3J0KTtcbiAgICBpZiAodXBkYXRlRGlzcGxheUlmTmVlZGVkKGNtLCB1cGRhdGUpKSB7XG4gICAgICB1cGRhdGVIZWlnaHRzSW5WaWV3cG9ydChjbSk7XG4gICAgICBwb3N0VXBkYXRlRGlzcGxheShjbSwgdXBkYXRlKTtcbiAgICAgIHZhciBiYXJNZWFzdXJlID0gbWVhc3VyZUZvclNjcm9sbGJhcnMoY20pO1xuICAgICAgdXBkYXRlU2VsZWN0aW9uKGNtKTtcbiAgICAgIHVwZGF0ZVNjcm9sbGJhcnMoY20sIGJhck1lYXN1cmUpO1xuICAgICAgc2V0RG9jdW1lbnRIZWlnaHQoY20sIGJhck1lYXN1cmUpO1xuICAgICAgdXBkYXRlLmZpbmlzaCgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFN5bmMgdGhlIGFjdHVhbCBkaXNwbGF5IERPTSBzdHJ1Y3R1cmUgd2l0aCBkaXNwbGF5LnZpZXcsIHJlbW92aW5nXG4gIC8vIG5vZGVzIGZvciBsaW5lcyB0aGF0IGFyZSBubyBsb25nZXIgaW4gdmlldywgYW5kIGNyZWF0aW5nIHRoZSBvbmVzXG4gIC8vIHRoYXQgYXJlIG5vdCB0aGVyZSB5ZXQsIGFuZCB1cGRhdGluZyB0aGUgb25lcyB0aGF0IGFyZSBvdXQgb2ZcbiAgLy8gZGF0ZS5cbiAgZnVuY3Rpb24gcGF0Y2hEaXNwbGF5KGNtLCB1cGRhdGVOdW1iZXJzRnJvbSwgZGltcykge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgbGluZU51bWJlcnMgPSBjbS5vcHRpb25zLmxpbmVOdW1iZXJzO1xuICAgIHZhciBjb250YWluZXIgPSBkaXNwbGF5LmxpbmVEaXYsIGN1ciA9IGNvbnRhaW5lci5maXJzdENoaWxkO1xuXG4gICAgZnVuY3Rpb24gcm0obm9kZSkge1xuICAgICAgdmFyIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgLy8gV29ya3MgYXJvdW5kIGEgdGhyb3ctc2Nyb2xsIGJ1ZyBpbiBPUyBYIFdlYmtpdFxuICAgICAgaWYgKHdlYmtpdCAmJiBtYWMgJiYgY20uZGlzcGxheS5jdXJyZW50V2hlZWxUYXJnZXQgPT0gbm9kZSlcbiAgICAgICAgeyBub2RlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjsgfVxuICAgICAgZWxzZVxuICAgICAgICB7IG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTsgfVxuICAgICAgcmV0dXJuIG5leHRcbiAgICB9XG5cbiAgICB2YXIgdmlldyA9IGRpc3BsYXkudmlldywgbGluZU4gPSBkaXNwbGF5LnZpZXdGcm9tO1xuICAgIC8vIExvb3Agb3ZlciB0aGUgZWxlbWVudHMgaW4gdGhlIHZpZXcsIHN5bmNpbmcgY3VyICh0aGUgRE9NIG5vZGVzXG4gICAgLy8gaW4gZGlzcGxheS5saW5lRGl2KSB3aXRoIHRoZSB2aWV3IGFzIHdlIGdvLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGxpbmVWaWV3ID0gdmlld1tpXTtcbiAgICAgIGlmIChsaW5lVmlldy5oaWRkZW4pIDsgZWxzZSBpZiAoIWxpbmVWaWV3Lm5vZGUgfHwgbGluZVZpZXcubm9kZS5wYXJlbnROb2RlICE9IGNvbnRhaW5lcikgeyAvLyBOb3QgZHJhd24geWV0XG4gICAgICAgIHZhciBub2RlID0gYnVpbGRMaW5lRWxlbWVudChjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKTtcbiAgICAgICAgY29udGFpbmVyLmluc2VydEJlZm9yZShub2RlLCBjdXIpO1xuICAgICAgfSBlbHNlIHsgLy8gQWxyZWFkeSBkcmF3blxuICAgICAgICB3aGlsZSAoY3VyICE9IGxpbmVWaWV3Lm5vZGUpIHsgY3VyID0gcm0oY3VyKTsgfVxuICAgICAgICB2YXIgdXBkYXRlTnVtYmVyID0gbGluZU51bWJlcnMgJiYgdXBkYXRlTnVtYmVyc0Zyb20gIT0gbnVsbCAmJlxuICAgICAgICAgIHVwZGF0ZU51bWJlcnNGcm9tIDw9IGxpbmVOICYmIGxpbmVWaWV3LmxpbmVOdW1iZXI7XG4gICAgICAgIGlmIChsaW5lVmlldy5jaGFuZ2VzKSB7XG4gICAgICAgICAgaWYgKGluZGV4T2YobGluZVZpZXcuY2hhbmdlcywgXCJndXR0ZXJcIikgPiAtMSkgeyB1cGRhdGVOdW1iZXIgPSBmYWxzZTsgfVxuICAgICAgICAgIHVwZGF0ZUxpbmVGb3JDaGFuZ2VzKGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cGRhdGVOdW1iZXIpIHtcbiAgICAgICAgICByZW1vdmVDaGlsZHJlbihsaW5lVmlldy5saW5lTnVtYmVyKTtcbiAgICAgICAgICBsaW5lVmlldy5saW5lTnVtYmVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGxpbmVOdW1iZXJGb3IoY20ub3B0aW9ucywgbGluZU4pKSk7XG4gICAgICAgIH1cbiAgICAgICAgY3VyID0gbGluZVZpZXcubm9kZS5uZXh0U2libGluZztcbiAgICAgIH1cbiAgICAgIGxpbmVOICs9IGxpbmVWaWV3LnNpemU7XG4gICAgfVxuICAgIHdoaWxlIChjdXIpIHsgY3VyID0gcm0oY3VyKTsgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlR3V0dGVyU3BhY2UoZGlzcGxheSkge1xuICAgIHZhciB3aWR0aCA9IGRpc3BsYXkuZ3V0dGVycy5vZmZzZXRXaWR0aDtcbiAgICBkaXNwbGF5LnNpemVyLnN0eWxlLm1hcmdpbkxlZnQgPSB3aWR0aCArIFwicHhcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldERvY3VtZW50SGVpZ2h0KGNtLCBtZWFzdXJlKSB7XG4gICAgY20uZGlzcGxheS5zaXplci5zdHlsZS5taW5IZWlnaHQgPSBtZWFzdXJlLmRvY0hlaWdodCArIFwicHhcIjtcbiAgICBjbS5kaXNwbGF5LmhlaWdodEZvcmNlci5zdHlsZS50b3AgPSBtZWFzdXJlLmRvY0hlaWdodCArIFwicHhcIjtcbiAgICBjbS5kaXNwbGF5Lmd1dHRlcnMuc3R5bGUuaGVpZ2h0ID0gKG1lYXN1cmUuZG9jSGVpZ2h0ICsgY20uZGlzcGxheS5iYXJIZWlnaHQgKyBzY3JvbGxHYXAoY20pKSArIFwicHhcIjtcbiAgfVxuXG4gIC8vIFJlLWFsaWduIGxpbmUgbnVtYmVycyBhbmQgZ3V0dGVyIG1hcmtzIHRvIGNvbXBlbnNhdGUgZm9yXG4gIC8vIGhvcml6b250YWwgc2Nyb2xsaW5nLlxuICBmdW5jdGlvbiBhbGlnbkhvcml6b250YWxseShjbSkge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgdmlldyA9IGRpc3BsYXkudmlldztcbiAgICBpZiAoIWRpc3BsYXkuYWxpZ25XaWRnZXRzICYmICghZGlzcGxheS5ndXR0ZXJzLmZpcnN0Q2hpbGQgfHwgIWNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIpKSB7IHJldHVybiB9XG4gICAgdmFyIGNvbXAgPSBjb21wZW5zYXRlRm9ySFNjcm9sbChkaXNwbGF5KSAtIGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCArIGNtLmRvYy5zY3JvbGxMZWZ0O1xuICAgIHZhciBndXR0ZXJXID0gZGlzcGxheS5ndXR0ZXJzLm9mZnNldFdpZHRoLCBsZWZ0ID0gY29tcCArIFwicHhcIjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIHsgaWYgKCF2aWV3W2ldLmhpZGRlbikge1xuICAgICAgaWYgKGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIpIHtcbiAgICAgICAgaWYgKHZpZXdbaV0uZ3V0dGVyKVxuICAgICAgICAgIHsgdmlld1tpXS5ndXR0ZXIuc3R5bGUubGVmdCA9IGxlZnQ7IH1cbiAgICAgICAgaWYgKHZpZXdbaV0uZ3V0dGVyQmFja2dyb3VuZClcbiAgICAgICAgICB7IHZpZXdbaV0uZ3V0dGVyQmFja2dyb3VuZC5zdHlsZS5sZWZ0ID0gbGVmdDsgfVxuICAgICAgfVxuICAgICAgdmFyIGFsaWduID0gdmlld1tpXS5hbGlnbmFibGU7XG4gICAgICBpZiAoYWxpZ24pIHsgZm9yICh2YXIgaiA9IDA7IGogPCBhbGlnbi5sZW5ndGg7IGorKylcbiAgICAgICAgeyBhbGlnbltqXS5zdHlsZS5sZWZ0ID0gbGVmdDsgfSB9XG4gICAgfSB9XG4gICAgaWYgKGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIpXG4gICAgICB7IGRpc3BsYXkuZ3V0dGVycy5zdHlsZS5sZWZ0ID0gKGNvbXAgKyBndXR0ZXJXKSArIFwicHhcIjsgfVxuICB9XG5cbiAgLy8gVXNlZCB0byBlbnN1cmUgdGhhdCB0aGUgbGluZSBudW1iZXIgZ3V0dGVyIGlzIHN0aWxsIHRoZSByaWdodFxuICAvLyBzaXplIGZvciB0aGUgY3VycmVudCBkb2N1bWVudCBzaXplLiBSZXR1cm5zIHRydWUgd2hlbiBhbiB1cGRhdGVcbiAgLy8gaXMgbmVlZGVkLlxuICBmdW5jdGlvbiBtYXliZVVwZGF0ZUxpbmVOdW1iZXJXaWR0aChjbSkge1xuICAgIGlmICghY20ub3B0aW9ucy5saW5lTnVtYmVycykgeyByZXR1cm4gZmFsc2UgfVxuICAgIHZhciBkb2MgPSBjbS5kb2MsIGxhc3QgPSBsaW5lTnVtYmVyRm9yKGNtLm9wdGlvbnMsIGRvYy5maXJzdCArIGRvYy5zaXplIC0gMSksIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIGlmIChsYXN0Lmxlbmd0aCAhPSBkaXNwbGF5LmxpbmVOdW1DaGFycykge1xuICAgICAgdmFyIHRlc3QgPSBkaXNwbGF5Lm1lYXN1cmUuYXBwZW5kQ2hpbGQoZWx0KFwiZGl2XCIsIFtlbHQoXCJkaXZcIiwgbGFzdCldLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQ29kZU1pcnJvci1saW5lbnVtYmVyIENvZGVNaXJyb3ItZ3V0dGVyLWVsdFwiKSk7XG4gICAgICB2YXIgaW5uZXJXID0gdGVzdC5maXJzdENoaWxkLm9mZnNldFdpZHRoLCBwYWRkaW5nID0gdGVzdC5vZmZzZXRXaWR0aCAtIGlubmVyVztcbiAgICAgIGRpc3BsYXkubGluZUd1dHRlci5zdHlsZS53aWR0aCA9IFwiXCI7XG4gICAgICBkaXNwbGF5LmxpbmVOdW1Jbm5lcldpZHRoID0gTWF0aC5tYXgoaW5uZXJXLCBkaXNwbGF5LmxpbmVHdXR0ZXIub2Zmc2V0V2lkdGggLSBwYWRkaW5nKSArIDE7XG4gICAgICBkaXNwbGF5LmxpbmVOdW1XaWR0aCA9IGRpc3BsYXkubGluZU51bUlubmVyV2lkdGggKyBwYWRkaW5nO1xuICAgICAgZGlzcGxheS5saW5lTnVtQ2hhcnMgPSBkaXNwbGF5LmxpbmVOdW1Jbm5lcldpZHRoID8gbGFzdC5sZW5ndGggOiAtMTtcbiAgICAgIGRpc3BsYXkubGluZUd1dHRlci5zdHlsZS53aWR0aCA9IGRpc3BsYXkubGluZU51bVdpZHRoICsgXCJweFwiO1xuICAgICAgdXBkYXRlR3V0dGVyU3BhY2UoY20uZGlzcGxheSk7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEd1dHRlcnMoZ3V0dGVycywgbGluZU51bWJlcnMpIHtcbiAgICB2YXIgcmVzdWx0ID0gW10sIHNhd0xpbmVOdW1iZXJzID0gZmFsc2U7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBndXR0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbmFtZSA9IGd1dHRlcnNbaV0sIHN0eWxlID0gbnVsbDtcbiAgICAgIGlmICh0eXBlb2YgbmFtZSAhPSBcInN0cmluZ1wiKSB7IHN0eWxlID0gbmFtZS5zdHlsZTsgbmFtZSA9IG5hbWUuY2xhc3NOYW1lOyB9XG4gICAgICBpZiAobmFtZSA9PSBcIkNvZGVNaXJyb3ItbGluZW51bWJlcnNcIikge1xuICAgICAgICBpZiAoIWxpbmVOdW1iZXJzKSB7IGNvbnRpbnVlIH1cbiAgICAgICAgZWxzZSB7IHNhd0xpbmVOdW1iZXJzID0gdHJ1ZTsgfVxuICAgICAgfVxuICAgICAgcmVzdWx0LnB1c2goe2NsYXNzTmFtZTogbmFtZSwgc3R5bGU6IHN0eWxlfSk7XG4gICAgfVxuICAgIGlmIChsaW5lTnVtYmVycyAmJiAhc2F3TGluZU51bWJlcnMpIHsgcmVzdWx0LnB1c2goe2NsYXNzTmFtZTogXCJDb2RlTWlycm9yLWxpbmVudW1iZXJzXCIsIHN0eWxlOiBudWxsfSk7IH1cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICAvLyBSZWJ1aWxkIHRoZSBndXR0ZXIgZWxlbWVudHMsIGVuc3VyZSB0aGUgbWFyZ2luIHRvIHRoZSBsZWZ0IG9mIHRoZVxuICAvLyBjb2RlIG1hdGNoZXMgdGhlaXIgd2lkdGguXG4gIGZ1bmN0aW9uIHJlbmRlckd1dHRlcnMoZGlzcGxheSkge1xuICAgIHZhciBndXR0ZXJzID0gZGlzcGxheS5ndXR0ZXJzLCBzcGVjcyA9IGRpc3BsYXkuZ3V0dGVyU3BlY3M7XG4gICAgcmVtb3ZlQ2hpbGRyZW4oZ3V0dGVycyk7XG4gICAgZGlzcGxheS5saW5lR3V0dGVyID0gbnVsbDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNwZWNzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgcmVmID0gc3BlY3NbaV07XG4gICAgICB2YXIgY2xhc3NOYW1lID0gcmVmLmNsYXNzTmFtZTtcbiAgICAgIHZhciBzdHlsZSA9IHJlZi5zdHlsZTtcbiAgICAgIHZhciBnRWx0ID0gZ3V0dGVycy5hcHBlbmRDaGlsZChlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLWd1dHRlciBcIiArIGNsYXNzTmFtZSkpO1xuICAgICAgaWYgKHN0eWxlKSB7IGdFbHQuc3R5bGUuY3NzVGV4dCA9IHN0eWxlOyB9XG4gICAgICBpZiAoY2xhc3NOYW1lID09IFwiQ29kZU1pcnJvci1saW5lbnVtYmVyc1wiKSB7XG4gICAgICAgIGRpc3BsYXkubGluZUd1dHRlciA9IGdFbHQ7XG4gICAgICAgIGdFbHQuc3R5bGUud2lkdGggPSAoZGlzcGxheS5saW5lTnVtV2lkdGggfHwgMSkgKyBcInB4XCI7XG4gICAgICB9XG4gICAgfVxuICAgIGd1dHRlcnMuc3R5bGUuZGlzcGxheSA9IHNwZWNzLmxlbmd0aCA/IFwiXCIgOiBcIm5vbmVcIjtcbiAgICB1cGRhdGVHdXR0ZXJTcGFjZShkaXNwbGF5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUd1dHRlcnMoY20pIHtcbiAgICByZW5kZXJHdXR0ZXJzKGNtLmRpc3BsYXkpO1xuICAgIHJlZ0NoYW5nZShjbSk7XG4gICAgYWxpZ25Ib3Jpem9udGFsbHkoY20pO1xuICB9XG5cbiAgLy8gVGhlIGRpc3BsYXkgaGFuZGxlcyB0aGUgRE9NIGludGVncmF0aW9uLCBib3RoIGZvciBpbnB1dCByZWFkaW5nXG4gIC8vIGFuZCBjb250ZW50IGRyYXdpbmcuIEl0IGhvbGRzIHJlZmVyZW5jZXMgdG8gRE9NIG5vZGVzIGFuZFxuICAvLyBkaXNwbGF5LXJlbGF0ZWQgc3RhdGUuXG5cbiAgZnVuY3Rpb24gRGlzcGxheShwbGFjZSwgZG9jLCBpbnB1dCwgb3B0aW9ucykge1xuICAgIHZhciBkID0gdGhpcztcbiAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG5cbiAgICAvLyBDb3ZlcnMgYm90dG9tLXJpZ2h0IHNxdWFyZSB3aGVuIGJvdGggc2Nyb2xsYmFycyBhcmUgcHJlc2VudC5cbiAgICBkLnNjcm9sbGJhckZpbGxlciA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3Itc2Nyb2xsYmFyLWZpbGxlclwiKTtcbiAgICBkLnNjcm9sbGJhckZpbGxlci5zZXRBdHRyaWJ1dGUoXCJjbS1ub3QtY29udGVudFwiLCBcInRydWVcIik7XG4gICAgLy8gQ292ZXJzIGJvdHRvbSBvZiBndXR0ZXIgd2hlbiBjb3Zlckd1dHRlck5leHRUb1Njcm9sbGJhciBpcyBvblxuICAgIC8vIGFuZCBoIHNjcm9sbGJhciBpcyBwcmVzZW50LlxuICAgIGQuZ3V0dGVyRmlsbGVyID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1ndXR0ZXItZmlsbGVyXCIpO1xuICAgIGQuZ3V0dGVyRmlsbGVyLnNldEF0dHJpYnV0ZShcImNtLW5vdC1jb250ZW50XCIsIFwidHJ1ZVwiKTtcbiAgICAvLyBXaWxsIGNvbnRhaW4gdGhlIGFjdHVhbCBjb2RlLCBwb3NpdGlvbmVkIHRvIGNvdmVyIHRoZSB2aWV3cG9ydC5cbiAgICBkLmxpbmVEaXYgPSBlbHRQKFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1jb2RlXCIpO1xuICAgIC8vIEVsZW1lbnRzIGFyZSBhZGRlZCB0byB0aGVzZSB0byByZXByZXNlbnQgc2VsZWN0aW9uIGFuZCBjdXJzb3JzLlxuICAgIGQuc2VsZWN0aW9uRGl2ID0gZWx0KFwiZGl2XCIsIG51bGwsIG51bGwsIFwicG9zaXRpb246IHJlbGF0aXZlOyB6LWluZGV4OiAxXCIpO1xuICAgIGQuY3Vyc29yRGl2ID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1jdXJzb3JzXCIpO1xuICAgIC8vIEEgdmlzaWJpbGl0eTogaGlkZGVuIGVsZW1lbnQgdXNlZCB0byBmaW5kIHRoZSBzaXplIG9mIHRoaW5ncy5cbiAgICBkLm1lYXN1cmUgPSBlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLW1lYXN1cmVcIik7XG4gICAgLy8gV2hlbiBsaW5lcyBvdXRzaWRlIG9mIHRoZSB2aWV3cG9ydCBhcmUgbWVhc3VyZWQsIHRoZXkgYXJlIGRyYXduIGluIHRoaXMuXG4gICAgZC5saW5lTWVhc3VyZSA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItbWVhc3VyZVwiKTtcbiAgICAvLyBXcmFwcyBldmVyeXRoaW5nIHRoYXQgbmVlZHMgdG8gZXhpc3QgaW5zaWRlIHRoZSB2ZXJ0aWNhbGx5LXBhZGRlZCBjb29yZGluYXRlIHN5c3RlbVxuICAgIGQubGluZVNwYWNlID0gZWx0UChcImRpdlwiLCBbZC5tZWFzdXJlLCBkLmxpbmVNZWFzdXJlLCBkLnNlbGVjdGlvbkRpdiwgZC5jdXJzb3JEaXYsIGQubGluZURpdl0sXG4gICAgICAgICAgICAgICAgICAgICAgbnVsbCwgXCJwb3NpdGlvbjogcmVsYXRpdmU7IG91dGxpbmU6IG5vbmVcIik7XG4gICAgdmFyIGxpbmVzID0gZWx0UChcImRpdlwiLCBbZC5saW5lU3BhY2VdLCBcIkNvZGVNaXJyb3ItbGluZXNcIik7XG4gICAgLy8gTW92ZWQgYXJvdW5kIGl0cyBwYXJlbnQgdG8gY292ZXIgdmlzaWJsZSB2aWV3LlxuICAgIGQubW92ZXIgPSBlbHQoXCJkaXZcIiwgW2xpbmVzXSwgbnVsbCwgXCJwb3NpdGlvbjogcmVsYXRpdmVcIik7XG4gICAgLy8gU2V0IHRvIHRoZSBoZWlnaHQgb2YgdGhlIGRvY3VtZW50LCBhbGxvd2luZyBzY3JvbGxpbmcuXG4gICAgZC5zaXplciA9IGVsdChcImRpdlwiLCBbZC5tb3Zlcl0sIFwiQ29kZU1pcnJvci1zaXplclwiKTtcbiAgICBkLnNpemVyV2lkdGggPSBudWxsO1xuICAgIC8vIEJlaGF2aW9yIG9mIGVsdHMgd2l0aCBvdmVyZmxvdzogYXV0byBhbmQgcGFkZGluZyBpc1xuICAgIC8vIGluY29uc2lzdGVudCBhY3Jvc3MgYnJvd3NlcnMuIFRoaXMgaXMgdXNlZCB0byBlbnN1cmUgdGhlXG4gICAgLy8gc2Nyb2xsYWJsZSBhcmVhIGlzIGJpZyBlbm91Z2guXG4gICAgZC5oZWlnaHRGb3JjZXIgPSBlbHQoXCJkaXZcIiwgbnVsbCwgbnVsbCwgXCJwb3NpdGlvbjogYWJzb2x1dGU7IGhlaWdodDogXCIgKyBzY3JvbGxlckdhcCArIFwicHg7IHdpZHRoOiAxcHg7XCIpO1xuICAgIC8vIFdpbGwgY29udGFpbiB0aGUgZ3V0dGVycywgaWYgYW55LlxuICAgIGQuZ3V0dGVycyA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItZ3V0dGVyc1wiKTtcbiAgICBkLmxpbmVHdXR0ZXIgPSBudWxsO1xuICAgIC8vIEFjdHVhbCBzY3JvbGxhYmxlIGVsZW1lbnQuXG4gICAgZC5zY3JvbGxlciA9IGVsdChcImRpdlwiLCBbZC5zaXplciwgZC5oZWlnaHRGb3JjZXIsIGQuZ3V0dGVyc10sIFwiQ29kZU1pcnJvci1zY3JvbGxcIik7XG4gICAgZC5zY3JvbGxlci5zZXRBdHRyaWJ1dGUoXCJ0YWJJbmRleFwiLCBcIi0xXCIpO1xuICAgIC8vIFRoZSBlbGVtZW50IGluIHdoaWNoIHRoZSBlZGl0b3IgbGl2ZXMuXG4gICAgZC53cmFwcGVyID0gZWx0KFwiZGl2XCIsIFtkLnNjcm9sbGJhckZpbGxlciwgZC5ndXR0ZXJGaWxsZXIsIGQuc2Nyb2xsZXJdLCBcIkNvZGVNaXJyb3JcIik7XG5cbiAgICAvLyBXb3JrIGFyb3VuZCBJRTcgei1pbmRleCBidWcgKG5vdCBwZXJmZWN0LCBoZW5jZSBJRTcgbm90IHJlYWxseSBiZWluZyBzdXBwb3J0ZWQpXG4gICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA4KSB7IGQuZ3V0dGVycy5zdHlsZS56SW5kZXggPSAtMTsgZC5zY3JvbGxlci5zdHlsZS5wYWRkaW5nUmlnaHQgPSAwOyB9XG4gICAgaWYgKCF3ZWJraXQgJiYgIShnZWNrbyAmJiBtb2JpbGUpKSB7IGQuc2Nyb2xsZXIuZHJhZ2dhYmxlID0gdHJ1ZTsgfVxuXG4gICAgaWYgKHBsYWNlKSB7XG4gICAgICBpZiAocGxhY2UuYXBwZW5kQ2hpbGQpIHsgcGxhY2UuYXBwZW5kQ2hpbGQoZC53cmFwcGVyKTsgfVxuICAgICAgZWxzZSB7IHBsYWNlKGQud3JhcHBlcik7IH1cbiAgICB9XG5cbiAgICAvLyBDdXJyZW50IHJlbmRlcmVkIHJhbmdlIChtYXkgYmUgYmlnZ2VyIHRoYW4gdGhlIHZpZXcgd2luZG93KS5cbiAgICBkLnZpZXdGcm9tID0gZC52aWV3VG8gPSBkb2MuZmlyc3Q7XG4gICAgZC5yZXBvcnRlZFZpZXdGcm9tID0gZC5yZXBvcnRlZFZpZXdUbyA9IGRvYy5maXJzdDtcbiAgICAvLyBJbmZvcm1hdGlvbiBhYm91dCB0aGUgcmVuZGVyZWQgbGluZXMuXG4gICAgZC52aWV3ID0gW107XG4gICAgZC5yZW5kZXJlZFZpZXcgPSBudWxsO1xuICAgIC8vIEhvbGRzIGluZm8gYWJvdXQgYSBzaW5nbGUgcmVuZGVyZWQgbGluZSB3aGVuIGl0IHdhcyByZW5kZXJlZFxuICAgIC8vIGZvciBtZWFzdXJlbWVudCwgd2hpbGUgbm90IGluIHZpZXcuXG4gICAgZC5leHRlcm5hbE1lYXN1cmVkID0gbnVsbDtcbiAgICAvLyBFbXB0eSBzcGFjZSAoaW4gcGl4ZWxzKSBhYm92ZSB0aGUgdmlld1xuICAgIGQudmlld09mZnNldCA9IDA7XG4gICAgZC5sYXN0V3JhcEhlaWdodCA9IGQubGFzdFdyYXBXaWR0aCA9IDA7XG4gICAgZC51cGRhdGVMaW5lTnVtYmVycyA9IG51bGw7XG5cbiAgICBkLm5hdGl2ZUJhcldpZHRoID0gZC5iYXJIZWlnaHQgPSBkLmJhcldpZHRoID0gMDtcbiAgICBkLnNjcm9sbGJhcnNDbGlwcGVkID0gZmFsc2U7XG5cbiAgICAvLyBVc2VkIHRvIG9ubHkgcmVzaXplIHRoZSBsaW5lIG51bWJlciBndXR0ZXIgd2hlbiBuZWNlc3NhcnkgKHdoZW5cbiAgICAvLyB0aGUgYW1vdW50IG9mIGxpbmVzIGNyb3NzZXMgYSBib3VuZGFyeSB0aGF0IG1ha2VzIGl0cyB3aWR0aCBjaGFuZ2UpXG4gICAgZC5saW5lTnVtV2lkdGggPSBkLmxpbmVOdW1Jbm5lcldpZHRoID0gZC5saW5lTnVtQ2hhcnMgPSBudWxsO1xuICAgIC8vIFNldCB0byB0cnVlIHdoZW4gYSBub24taG9yaXpvbnRhbC1zY3JvbGxpbmcgbGluZSB3aWRnZXQgaXNcbiAgICAvLyBhZGRlZC4gQXMgYW4gb3B0aW1pemF0aW9uLCBsaW5lIHdpZGdldCBhbGlnbmluZyBpcyBza2lwcGVkIHdoZW5cbiAgICAvLyB0aGlzIGlzIGZhbHNlLlxuICAgIGQuYWxpZ25XaWRnZXRzID0gZmFsc2U7XG5cbiAgICBkLmNhY2hlZENoYXJXaWR0aCA9IGQuY2FjaGVkVGV4dEhlaWdodCA9IGQuY2FjaGVkUGFkZGluZ0ggPSBudWxsO1xuXG4gICAgLy8gVHJhY2tzIHRoZSBtYXhpbXVtIGxpbmUgbGVuZ3RoIHNvIHRoYXQgdGhlIGhvcml6b250YWwgc2Nyb2xsYmFyXG4gICAgLy8gY2FuIGJlIGtlcHQgc3RhdGljIHdoZW4gc2Nyb2xsaW5nLlxuICAgIGQubWF4TGluZSA9IG51bGw7XG4gICAgZC5tYXhMaW5lTGVuZ3RoID0gMDtcbiAgICBkLm1heExpbmVDaGFuZ2VkID0gZmFsc2U7XG5cbiAgICAvLyBVc2VkIGZvciBtZWFzdXJpbmcgd2hlZWwgc2Nyb2xsaW5nIGdyYW51bGFyaXR5XG4gICAgZC53aGVlbERYID0gZC53aGVlbERZID0gZC53aGVlbFN0YXJ0WCA9IGQud2hlZWxTdGFydFkgPSBudWxsO1xuXG4gICAgLy8gVHJ1ZSB3aGVuIHNoaWZ0IGlzIGhlbGQgZG93bi5cbiAgICBkLnNoaWZ0ID0gZmFsc2U7XG5cbiAgICAvLyBVc2VkIHRvIHRyYWNrIHdoZXRoZXIgYW55dGhpbmcgaGFwcGVuZWQgc2luY2UgdGhlIGNvbnRleHQgbWVudVxuICAgIC8vIHdhcyBvcGVuZWQuXG4gICAgZC5zZWxGb3JDb250ZXh0TWVudSA9IG51bGw7XG5cbiAgICBkLmFjdGl2ZVRvdWNoID0gbnVsbDtcblxuICAgIGQuZ3V0dGVyU3BlY3MgPSBnZXRHdXR0ZXJzKG9wdGlvbnMuZ3V0dGVycywgb3B0aW9ucy5saW5lTnVtYmVycyk7XG4gICAgcmVuZGVyR3V0dGVycyhkKTtcblxuICAgIGlucHV0LmluaXQoZCk7XG4gIH1cblxuICAvLyBTaW5jZSB0aGUgZGVsdGEgdmFsdWVzIHJlcG9ydGVkIG9uIG1vdXNlIHdoZWVsIGV2ZW50cyBhcmVcbiAgLy8gdW5zdGFuZGFyZGl6ZWQgYmV0d2VlbiBicm93c2VycyBhbmQgZXZlbiBicm93c2VyIHZlcnNpb25zLCBhbmRcbiAgLy8gZ2VuZXJhbGx5IGhvcnJpYmx5IHVucHJlZGljdGFibGUsIHRoaXMgY29kZSBzdGFydHMgYnkgbWVhc3VyaW5nXG4gIC8vIHRoZSBzY3JvbGwgZWZmZWN0IHRoYXQgdGhlIGZpcnN0IGZldyBtb3VzZSB3aGVlbCBldmVudHMgaGF2ZSxcbiAgLy8gYW5kLCBmcm9tIHRoYXQsIGRldGVjdHMgdGhlIHdheSBpdCBjYW4gY29udmVydCBkZWx0YXMgdG8gcGl4ZWxcbiAgLy8gb2Zmc2V0cyBhZnRlcndhcmRzLlxuICAvL1xuICAvLyBUaGUgcmVhc29uIHdlIHdhbnQgdG8ga25vdyB0aGUgYW1vdW50IGEgd2hlZWwgZXZlbnQgd2lsbCBzY3JvbGxcbiAgLy8gaXMgdGhhdCBpdCBnaXZlcyB1cyBhIGNoYW5jZSB0byB1cGRhdGUgdGhlIGRpc3BsYXkgYmVmb3JlIHRoZVxuICAvLyBhY3R1YWwgc2Nyb2xsaW5nIGhhcHBlbnMsIHJlZHVjaW5nIGZsaWNrZXJpbmcuXG5cbiAgdmFyIHdoZWVsU2FtcGxlcyA9IDAsIHdoZWVsUGl4ZWxzUGVyVW5pdCA9IG51bGw7XG4gIC8vIEZpbGwgaW4gYSBicm93c2VyLWRldGVjdGVkIHN0YXJ0aW5nIHZhbHVlIG9uIGJyb3dzZXJzIHdoZXJlIHdlXG4gIC8vIGtub3cgb25lLiBUaGVzZSBkb24ndCBoYXZlIHRvIGJlIGFjY3VyYXRlIC0tIHRoZSByZXN1bHQgb2YgdGhlbVxuICAvLyBiZWluZyB3cm9uZyB3b3VsZCBqdXN0IGJlIGEgc2xpZ2h0IGZsaWNrZXIgb24gdGhlIGZpcnN0IHdoZWVsXG4gIC8vIHNjcm9sbCAoaWYgaXQgaXMgbGFyZ2UgZW5vdWdoKS5cbiAgaWYgKGllKSB7IHdoZWVsUGl4ZWxzUGVyVW5pdCA9IC0uNTM7IH1cbiAgZWxzZSBpZiAoZ2Vja28pIHsgd2hlZWxQaXhlbHNQZXJVbml0ID0gMTU7IH1cbiAgZWxzZSBpZiAoY2hyb21lKSB7IHdoZWVsUGl4ZWxzUGVyVW5pdCA9IC0uNzsgfVxuICBlbHNlIGlmIChzYWZhcmkpIHsgd2hlZWxQaXhlbHNQZXJVbml0ID0gLTEvMzsgfVxuXG4gIGZ1bmN0aW9uIHdoZWVsRXZlbnREZWx0YShlKSB7XG4gICAgdmFyIGR4ID0gZS53aGVlbERlbHRhWCwgZHkgPSBlLndoZWVsRGVsdGFZO1xuICAgIGlmIChkeCA9PSBudWxsICYmIGUuZGV0YWlsICYmIGUuYXhpcyA9PSBlLkhPUklaT05UQUxfQVhJUykgeyBkeCA9IGUuZGV0YWlsOyB9XG4gICAgaWYgKGR5ID09IG51bGwgJiYgZS5kZXRhaWwgJiYgZS5heGlzID09IGUuVkVSVElDQUxfQVhJUykgeyBkeSA9IGUuZGV0YWlsOyB9XG4gICAgZWxzZSBpZiAoZHkgPT0gbnVsbCkgeyBkeSA9IGUud2hlZWxEZWx0YTsgfVxuICAgIHJldHVybiB7eDogZHgsIHk6IGR5fVxuICB9XG4gIGZ1bmN0aW9uIHdoZWVsRXZlbnRQaXhlbHMoZSkge1xuICAgIHZhciBkZWx0YSA9IHdoZWVsRXZlbnREZWx0YShlKTtcbiAgICBkZWx0YS54ICo9IHdoZWVsUGl4ZWxzUGVyVW5pdDtcbiAgICBkZWx0YS55ICo9IHdoZWVsUGl4ZWxzUGVyVW5pdDtcbiAgICByZXR1cm4gZGVsdGFcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uU2Nyb2xsV2hlZWwoY20sIGUpIHtcbiAgICB2YXIgZGVsdGEgPSB3aGVlbEV2ZW50RGVsdGEoZSksIGR4ID0gZGVsdGEueCwgZHkgPSBkZWx0YS55O1xuXG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBzY3JvbGwgPSBkaXNwbGF5LnNjcm9sbGVyO1xuICAgIC8vIFF1aXQgaWYgdGhlcmUncyBub3RoaW5nIHRvIHNjcm9sbCBoZXJlXG4gICAgdmFyIGNhblNjcm9sbFggPSBzY3JvbGwuc2Nyb2xsV2lkdGggPiBzY3JvbGwuY2xpZW50V2lkdGg7XG4gICAgdmFyIGNhblNjcm9sbFkgPSBzY3JvbGwuc2Nyb2xsSGVpZ2h0ID4gc2Nyb2xsLmNsaWVudEhlaWdodDtcbiAgICBpZiAoIShkeCAmJiBjYW5TY3JvbGxYIHx8IGR5ICYmIGNhblNjcm9sbFkpKSB7IHJldHVybiB9XG5cbiAgICAvLyBXZWJraXQgYnJvd3NlcnMgb24gT1MgWCBhYm9ydCBtb21lbnR1bSBzY3JvbGxzIHdoZW4gdGhlIHRhcmdldFxuICAgIC8vIG9mIHRoZSBzY3JvbGwgZXZlbnQgaXMgcmVtb3ZlZCBmcm9tIHRoZSBzY3JvbGxhYmxlIGVsZW1lbnQuXG4gICAgLy8gVGhpcyBoYWNrIChzZWUgcmVsYXRlZCBjb2RlIGluIHBhdGNoRGlzcGxheSkgbWFrZXMgc3VyZSB0aGVcbiAgICAvLyBlbGVtZW50IGlzIGtlcHQgYXJvdW5kLlxuICAgIGlmIChkeSAmJiBtYWMgJiYgd2Via2l0KSB7XG4gICAgICBvdXRlcjogZm9yICh2YXIgY3VyID0gZS50YXJnZXQsIHZpZXcgPSBkaXNwbGF5LnZpZXc7IGN1ciAhPSBzY3JvbGw7IGN1ciA9IGN1ci5wYXJlbnROb2RlKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICh2aWV3W2ldLm5vZGUgPT0gY3VyKSB7XG4gICAgICAgICAgICBjbS5kaXNwbGF5LmN1cnJlbnRXaGVlbFRhcmdldCA9IGN1cjtcbiAgICAgICAgICAgIGJyZWFrIG91dGVyXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gT24gc29tZSBicm93c2VycywgaG9yaXpvbnRhbCBzY3JvbGxpbmcgd2lsbCBjYXVzZSByZWRyYXdzIHRvXG4gICAgLy8gaGFwcGVuIGJlZm9yZSB0aGUgZ3V0dGVyIGhhcyBiZWVuIHJlYWxpZ25lZCwgY2F1c2luZyBpdCB0b1xuICAgIC8vIHdyaWdnbGUgYXJvdW5kIGluIGEgbW9zdCB1bnNlZW1seSB3YXkuIFdoZW4gd2UgaGF2ZSBhblxuICAgIC8vIGVzdGltYXRlZCBwaXhlbHMvZGVsdGEgdmFsdWUsIHdlIGp1c3QgaGFuZGxlIGhvcml6b250YWxcbiAgICAvLyBzY3JvbGxpbmcgZW50aXJlbHkgaGVyZS4gSXQnbGwgYmUgc2xpZ2h0bHkgb2ZmIGZyb20gbmF0aXZlLCBidXRcbiAgICAvLyBiZXR0ZXIgdGhhbiBnbGl0Y2hpbmcgb3V0LlxuICAgIGlmIChkeCAmJiAhZ2Vja28gJiYgIXByZXN0byAmJiB3aGVlbFBpeGVsc1BlclVuaXQgIT0gbnVsbCkge1xuICAgICAgaWYgKGR5ICYmIGNhblNjcm9sbFkpXG4gICAgICAgIHsgdXBkYXRlU2Nyb2xsVG9wKGNtLCBNYXRoLm1heCgwLCBzY3JvbGwuc2Nyb2xsVG9wICsgZHkgKiB3aGVlbFBpeGVsc1BlclVuaXQpKTsgfVxuICAgICAgc2V0U2Nyb2xsTGVmdChjbSwgTWF0aC5tYXgoMCwgc2Nyb2xsLnNjcm9sbExlZnQgKyBkeCAqIHdoZWVsUGl4ZWxzUGVyVW5pdCkpO1xuICAgICAgLy8gT25seSBwcmV2ZW50IGRlZmF1bHQgc2Nyb2xsaW5nIGlmIHZlcnRpY2FsIHNjcm9sbGluZyBpc1xuICAgICAgLy8gYWN0dWFsbHkgcG9zc2libGUuIE90aGVyd2lzZSwgaXQgY2F1c2VzIHZlcnRpY2FsIHNjcm9sbFxuICAgICAgLy8gaml0dGVyIG9uIE9TWCB0cmFja3BhZHMgd2hlbiBkZWx0YVggaXMgc21hbGwgYW5kIGRlbHRhWVxuICAgICAgLy8gaXMgbGFyZ2UgKGlzc3VlICMzNTc5KVxuICAgICAgaWYgKCFkeSB8fCAoZHkgJiYgY2FuU2Nyb2xsWSkpXG4gICAgICAgIHsgZV9wcmV2ZW50RGVmYXVsdChlKTsgfVxuICAgICAgZGlzcGxheS53aGVlbFN0YXJ0WCA9IG51bGw7IC8vIEFib3J0IG1lYXN1cmVtZW50LCBpZiBpbiBwcm9ncmVzc1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gJ1Byb2plY3QnIHRoZSB2aXNpYmxlIHZpZXdwb3J0IHRvIGNvdmVyIHRoZSBhcmVhIHRoYXQgaXMgYmVpbmdcbiAgICAvLyBzY3JvbGxlZCBpbnRvIHZpZXcgKGlmIHdlIGtub3cgZW5vdWdoIHRvIGVzdGltYXRlIGl0KS5cbiAgICBpZiAoZHkgJiYgd2hlZWxQaXhlbHNQZXJVbml0ICE9IG51bGwpIHtcbiAgICAgIHZhciBwaXhlbHMgPSBkeSAqIHdoZWVsUGl4ZWxzUGVyVW5pdDtcbiAgICAgIHZhciB0b3AgPSBjbS5kb2Muc2Nyb2xsVG9wLCBib3QgPSB0b3AgKyBkaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0O1xuICAgICAgaWYgKHBpeGVscyA8IDApIHsgdG9wID0gTWF0aC5tYXgoMCwgdG9wICsgcGl4ZWxzIC0gNTApOyB9XG4gICAgICBlbHNlIHsgYm90ID0gTWF0aC5taW4oY20uZG9jLmhlaWdodCwgYm90ICsgcGl4ZWxzICsgNTApOyB9XG4gICAgICB1cGRhdGVEaXNwbGF5U2ltcGxlKGNtLCB7dG9wOiB0b3AsIGJvdHRvbTogYm90fSk7XG4gICAgfVxuXG4gICAgaWYgKHdoZWVsU2FtcGxlcyA8IDIwKSB7XG4gICAgICBpZiAoZGlzcGxheS53aGVlbFN0YXJ0WCA9PSBudWxsKSB7XG4gICAgICAgIGRpc3BsYXkud2hlZWxTdGFydFggPSBzY3JvbGwuc2Nyb2xsTGVmdDsgZGlzcGxheS53aGVlbFN0YXJ0WSA9IHNjcm9sbC5zY3JvbGxUb3A7XG4gICAgICAgIGRpc3BsYXkud2hlZWxEWCA9IGR4OyBkaXNwbGF5LndoZWVsRFkgPSBkeTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKGRpc3BsYXkud2hlZWxTdGFydFggPT0gbnVsbCkgeyByZXR1cm4gfVxuICAgICAgICAgIHZhciBtb3ZlZFggPSBzY3JvbGwuc2Nyb2xsTGVmdCAtIGRpc3BsYXkud2hlZWxTdGFydFg7XG4gICAgICAgICAgdmFyIG1vdmVkWSA9IHNjcm9sbC5zY3JvbGxUb3AgLSBkaXNwbGF5LndoZWVsU3RhcnRZO1xuICAgICAgICAgIHZhciBzYW1wbGUgPSAobW92ZWRZICYmIGRpc3BsYXkud2hlZWxEWSAmJiBtb3ZlZFkgLyBkaXNwbGF5LndoZWVsRFkpIHx8XG4gICAgICAgICAgICAobW92ZWRYICYmIGRpc3BsYXkud2hlZWxEWCAmJiBtb3ZlZFggLyBkaXNwbGF5LndoZWVsRFgpO1xuICAgICAgICAgIGRpc3BsYXkud2hlZWxTdGFydFggPSBkaXNwbGF5LndoZWVsU3RhcnRZID0gbnVsbDtcbiAgICAgICAgICBpZiAoIXNhbXBsZSkgeyByZXR1cm4gfVxuICAgICAgICAgIHdoZWVsUGl4ZWxzUGVyVW5pdCA9ICh3aGVlbFBpeGVsc1BlclVuaXQgKiB3aGVlbFNhbXBsZXMgKyBzYW1wbGUpIC8gKHdoZWVsU2FtcGxlcyArIDEpO1xuICAgICAgICAgICsrd2hlZWxTYW1wbGVzO1xuICAgICAgICB9LCAyMDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGlzcGxheS53aGVlbERYICs9IGR4OyBkaXNwbGF5LndoZWVsRFkgKz0gZHk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gU2VsZWN0aW9uIG9iamVjdHMgYXJlIGltbXV0YWJsZS4gQSBuZXcgb25lIGlzIGNyZWF0ZWQgZXZlcnkgdGltZVxuICAvLyB0aGUgc2VsZWN0aW9uIGNoYW5nZXMuIEEgc2VsZWN0aW9uIGlzIG9uZSBvciBtb3JlIG5vbi1vdmVybGFwcGluZ1xuICAvLyAoYW5kIG5vbi10b3VjaGluZykgcmFuZ2VzLCBzb3J0ZWQsIGFuZCBhbiBpbnRlZ2VyIHRoYXQgaW5kaWNhdGVzXG4gIC8vIHdoaWNoIG9uZSBpcyB0aGUgcHJpbWFyeSBzZWxlY3Rpb24gKHRoZSBvbmUgdGhhdCdzIHNjcm9sbGVkIGludG9cbiAgLy8gdmlldywgdGhhdCBnZXRDdXJzb3IgcmV0dXJucywgZXRjKS5cbiAgdmFyIFNlbGVjdGlvbiA9IGZ1bmN0aW9uKHJhbmdlcywgcHJpbUluZGV4KSB7XG4gICAgdGhpcy5yYW5nZXMgPSByYW5nZXM7XG4gICAgdGhpcy5wcmltSW5kZXggPSBwcmltSW5kZXg7XG4gIH07XG5cbiAgU2VsZWN0aW9uLnByb3RvdHlwZS5wcmltYXJ5ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5yYW5nZXNbdGhpcy5wcmltSW5kZXhdIH07XG5cbiAgU2VsZWN0aW9uLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgICBpZiAob3RoZXIgPT0gdGhpcykgeyByZXR1cm4gdHJ1ZSB9XG4gICAgaWYgKG90aGVyLnByaW1JbmRleCAhPSB0aGlzLnByaW1JbmRleCB8fCBvdGhlci5yYW5nZXMubGVuZ3RoICE9IHRoaXMucmFuZ2VzLmxlbmd0aCkgeyByZXR1cm4gZmFsc2UgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBoZXJlID0gdGhpcy5yYW5nZXNbaV0sIHRoZXJlID0gb3RoZXIucmFuZ2VzW2ldO1xuICAgICAgaWYgKCFlcXVhbEN1cnNvclBvcyhoZXJlLmFuY2hvciwgdGhlcmUuYW5jaG9yKSB8fCAhZXF1YWxDdXJzb3JQb3MoaGVyZS5oZWFkLCB0aGVyZS5oZWFkKSkgeyByZXR1cm4gZmFsc2UgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9O1xuXG4gIFNlbGVjdGlvbi5wcm90b3R5cGUuZGVlcENvcHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG91dCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yYW5nZXMubGVuZ3RoOyBpKyspXG4gICAgICB7IG91dFtpXSA9IG5ldyBSYW5nZShjb3B5UG9zKHRoaXMucmFuZ2VzW2ldLmFuY2hvciksIGNvcHlQb3ModGhpcy5yYW5nZXNbaV0uaGVhZCkpOyB9XG4gICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24ob3V0LCB0aGlzLnByaW1JbmRleClcbiAgfTtcblxuICBTZWxlY3Rpb24ucHJvdG90eXBlLnNvbWV0aGluZ1NlbGVjdGVkID0gZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yYW5nZXMubGVuZ3RoOyBpKyspXG4gICAgICB7IGlmICghdGhpcy5yYW5nZXNbaV0uZW1wdHkoKSkgeyByZXR1cm4gdHJ1ZSB9IH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfTtcblxuICBTZWxlY3Rpb24ucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKHBvcywgZW5kKSB7XG4gICAgaWYgKCFlbmQpIHsgZW5kID0gcG9zOyB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHJhbmdlID0gdGhpcy5yYW5nZXNbaV07XG4gICAgICBpZiAoY21wKGVuZCwgcmFuZ2UuZnJvbSgpKSA+PSAwICYmIGNtcChwb3MsIHJhbmdlLnRvKCkpIDw9IDApXG4gICAgICAgIHsgcmV0dXJuIGkgfVxuICAgIH1cbiAgICByZXR1cm4gLTFcbiAgfTtcblxuICB2YXIgUmFuZ2UgPSBmdW5jdGlvbihhbmNob3IsIGhlYWQpIHtcbiAgICB0aGlzLmFuY2hvciA9IGFuY2hvcjsgdGhpcy5oZWFkID0gaGVhZDtcbiAgfTtcblxuICBSYW5nZS5wcm90b3R5cGUuZnJvbSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1pblBvcyh0aGlzLmFuY2hvciwgdGhpcy5oZWFkKSB9O1xuICBSYW5nZS5wcm90b3R5cGUudG8gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBtYXhQb3ModGhpcy5hbmNob3IsIHRoaXMuaGVhZCkgfTtcbiAgUmFuZ2UucHJvdG90eXBlLmVtcHR5ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5oZWFkLmxpbmUgPT0gdGhpcy5hbmNob3IubGluZSAmJiB0aGlzLmhlYWQuY2ggPT0gdGhpcy5hbmNob3IuY2ggfTtcblxuICAvLyBUYWtlIGFuIHVuc29ydGVkLCBwb3RlbnRpYWxseSBvdmVybGFwcGluZyBzZXQgb2YgcmFuZ2VzLCBhbmRcbiAgLy8gYnVpbGQgYSBzZWxlY3Rpb24gb3V0IG9mIGl0LiAnQ29uc3VtZXMnIHJhbmdlcyBhcnJheSAobW9kaWZ5aW5nXG4gIC8vIGl0KS5cbiAgZnVuY3Rpb24gbm9ybWFsaXplU2VsZWN0aW9uKGNtLCByYW5nZXMsIHByaW1JbmRleCkge1xuICAgIHZhciBtYXlUb3VjaCA9IGNtICYmIGNtLm9wdGlvbnMuc2VsZWN0aW9uc01heVRvdWNoO1xuICAgIHZhciBwcmltID0gcmFuZ2VzW3ByaW1JbmRleF07XG4gICAgcmFuZ2VzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGNtcChhLmZyb20oKSwgYi5mcm9tKCkpOyB9KTtcbiAgICBwcmltSW5kZXggPSBpbmRleE9mKHJhbmdlcywgcHJpbSk7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjdXIgPSByYW5nZXNbaV0sIHByZXYgPSByYW5nZXNbaSAtIDFdO1xuICAgICAgdmFyIGRpZmYgPSBjbXAocHJldi50bygpLCBjdXIuZnJvbSgpKTtcbiAgICAgIGlmIChtYXlUb3VjaCAmJiAhY3VyLmVtcHR5KCkgPyBkaWZmID4gMCA6IGRpZmYgPj0gMCkge1xuICAgICAgICB2YXIgZnJvbSA9IG1pblBvcyhwcmV2LmZyb20oKSwgY3VyLmZyb20oKSksIHRvID0gbWF4UG9zKHByZXYudG8oKSwgY3VyLnRvKCkpO1xuICAgICAgICB2YXIgaW52ID0gcHJldi5lbXB0eSgpID8gY3VyLmZyb20oKSA9PSBjdXIuaGVhZCA6IHByZXYuZnJvbSgpID09IHByZXYuaGVhZDtcbiAgICAgICAgaWYgKGkgPD0gcHJpbUluZGV4KSB7IC0tcHJpbUluZGV4OyB9XG4gICAgICAgIHJhbmdlcy5zcGxpY2UoLS1pLCAyLCBuZXcgUmFuZ2UoaW52ID8gdG8gOiBmcm9tLCBpbnYgPyBmcm9tIDogdG8pKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24ocmFuZ2VzLCBwcmltSW5kZXgpXG4gIH1cblxuICBmdW5jdGlvbiBzaW1wbGVTZWxlY3Rpb24oYW5jaG9yLCBoZWFkKSB7XG4gICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oW25ldyBSYW5nZShhbmNob3IsIGhlYWQgfHwgYW5jaG9yKV0sIDApXG4gIH1cblxuICAvLyBDb21wdXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgZW5kIG9mIGEgY2hhbmdlIChpdHMgJ3RvJyBwcm9wZXJ0eVxuICAvLyByZWZlcnMgdG8gdGhlIHByZS1jaGFuZ2UgZW5kKS5cbiAgZnVuY3Rpb24gY2hhbmdlRW5kKGNoYW5nZSkge1xuICAgIGlmICghY2hhbmdlLnRleHQpIHsgcmV0dXJuIGNoYW5nZS50byB9XG4gICAgcmV0dXJuIFBvcyhjaGFuZ2UuZnJvbS5saW5lICsgY2hhbmdlLnRleHQubGVuZ3RoIC0gMSxcbiAgICAgICAgICAgICAgIGxzdChjaGFuZ2UudGV4dCkubGVuZ3RoICsgKGNoYW5nZS50ZXh0Lmxlbmd0aCA9PSAxID8gY2hhbmdlLmZyb20uY2ggOiAwKSlcbiAgfVxuXG4gIC8vIEFkanVzdCBhIHBvc2l0aW9uIHRvIHJlZmVyIHRvIHRoZSBwb3N0LWNoYW5nZSBwb3NpdGlvbiBvZiB0aGVcbiAgLy8gc2FtZSB0ZXh0LCBvciB0aGUgZW5kIG9mIHRoZSBjaGFuZ2UgaWYgdGhlIGNoYW5nZSBjb3ZlcnMgaXQuXG4gIGZ1bmN0aW9uIGFkanVzdEZvckNoYW5nZShwb3MsIGNoYW5nZSkge1xuICAgIGlmIChjbXAocG9zLCBjaGFuZ2UuZnJvbSkgPCAwKSB7IHJldHVybiBwb3MgfVxuICAgIGlmIChjbXAocG9zLCBjaGFuZ2UudG8pIDw9IDApIHsgcmV0dXJuIGNoYW5nZUVuZChjaGFuZ2UpIH1cblxuICAgIHZhciBsaW5lID0gcG9zLmxpbmUgKyBjaGFuZ2UudGV4dC5sZW5ndGggLSAoY2hhbmdlLnRvLmxpbmUgLSBjaGFuZ2UuZnJvbS5saW5lKSAtIDEsIGNoID0gcG9zLmNoO1xuICAgIGlmIChwb3MubGluZSA9PSBjaGFuZ2UudG8ubGluZSkgeyBjaCArPSBjaGFuZ2VFbmQoY2hhbmdlKS5jaCAtIGNoYW5nZS50by5jaDsgfVxuICAgIHJldHVybiBQb3MobGluZSwgY2gpXG4gIH1cblxuICBmdW5jdGlvbiBjb21wdXRlU2VsQWZ0ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpIHtcbiAgICB2YXIgb3V0ID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkb2Muc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHJhbmdlID0gZG9jLnNlbC5yYW5nZXNbaV07XG4gICAgICBvdXQucHVzaChuZXcgUmFuZ2UoYWRqdXN0Rm9yQ2hhbmdlKHJhbmdlLmFuY2hvciwgY2hhbmdlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICBhZGp1c3RGb3JDaGFuZ2UocmFuZ2UuaGVhZCwgY2hhbmdlKSkpO1xuICAgIH1cbiAgICByZXR1cm4gbm9ybWFsaXplU2VsZWN0aW9uKGRvYy5jbSwgb3V0LCBkb2Muc2VsLnByaW1JbmRleClcbiAgfVxuXG4gIGZ1bmN0aW9uIG9mZnNldFBvcyhwb3MsIG9sZCwgbncpIHtcbiAgICBpZiAocG9zLmxpbmUgPT0gb2xkLmxpbmUpXG4gICAgICB7IHJldHVybiBQb3MobncubGluZSwgcG9zLmNoIC0gb2xkLmNoICsgbncuY2gpIH1cbiAgICBlbHNlXG4gICAgICB7IHJldHVybiBQb3MobncubGluZSArIChwb3MubGluZSAtIG9sZC5saW5lKSwgcG9zLmNoKSB9XG4gIH1cblxuICAvLyBVc2VkIGJ5IHJlcGxhY2VTZWxlY3Rpb25zIHRvIGFsbG93IG1vdmluZyB0aGUgc2VsZWN0aW9uIHRvIHRoZVxuICAvLyBzdGFydCBvciBhcm91bmQgdGhlIHJlcGxhY2VkIHRlc3QuIEhpbnQgbWF5IGJlIFwic3RhcnRcIiBvciBcImFyb3VuZFwiLlxuICBmdW5jdGlvbiBjb21wdXRlUmVwbGFjZWRTZWwoZG9jLCBjaGFuZ2VzLCBoaW50KSB7XG4gICAgdmFyIG91dCA9IFtdO1xuICAgIHZhciBvbGRQcmV2ID0gUG9zKGRvYy5maXJzdCwgMCksIG5ld1ByZXYgPSBvbGRQcmV2O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGNoYW5nZSA9IGNoYW5nZXNbaV07XG4gICAgICB2YXIgZnJvbSA9IG9mZnNldFBvcyhjaGFuZ2UuZnJvbSwgb2xkUHJldiwgbmV3UHJldik7XG4gICAgICB2YXIgdG8gPSBvZmZzZXRQb3MoY2hhbmdlRW5kKGNoYW5nZSksIG9sZFByZXYsIG5ld1ByZXYpO1xuICAgICAgb2xkUHJldiA9IGNoYW5nZS50bztcbiAgICAgIG5ld1ByZXYgPSB0bztcbiAgICAgIGlmIChoaW50ID09IFwiYXJvdW5kXCIpIHtcbiAgICAgICAgdmFyIHJhbmdlID0gZG9jLnNlbC5yYW5nZXNbaV0sIGludiA9IGNtcChyYW5nZS5oZWFkLCByYW5nZS5hbmNob3IpIDwgMDtcbiAgICAgICAgb3V0W2ldID0gbmV3IFJhbmdlKGludiA/IHRvIDogZnJvbSwgaW52ID8gZnJvbSA6IHRvKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG91dFtpXSA9IG5ldyBSYW5nZShmcm9tLCBmcm9tKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24ob3V0LCBkb2Muc2VsLnByaW1JbmRleClcbiAgfVxuXG4gIC8vIFVzZWQgdG8gZ2V0IHRoZSBlZGl0b3IgaW50byBhIGNvbnNpc3RlbnQgc3RhdGUgYWdhaW4gd2hlbiBvcHRpb25zIGNoYW5nZS5cblxuICBmdW5jdGlvbiBsb2FkTW9kZShjbSkge1xuICAgIGNtLmRvYy5tb2RlID0gZ2V0TW9kZShjbS5vcHRpb25zLCBjbS5kb2MubW9kZU9wdGlvbik7XG4gICAgcmVzZXRNb2RlU3RhdGUoY20pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzZXRNb2RlU3RhdGUoY20pIHtcbiAgICBjbS5kb2MuaXRlcihmdW5jdGlvbiAobGluZSkge1xuICAgICAgaWYgKGxpbmUuc3RhdGVBZnRlcikgeyBsaW5lLnN0YXRlQWZ0ZXIgPSBudWxsOyB9XG4gICAgICBpZiAobGluZS5zdHlsZXMpIHsgbGluZS5zdHlsZXMgPSBudWxsOyB9XG4gICAgfSk7XG4gICAgY20uZG9jLm1vZGVGcm9udGllciA9IGNtLmRvYy5oaWdobGlnaHRGcm9udGllciA9IGNtLmRvYy5maXJzdDtcbiAgICBzdGFydFdvcmtlcihjbSwgMTAwKTtcbiAgICBjbS5zdGF0ZS5tb2RlR2VuKys7XG4gICAgaWYgKGNtLmN1ck9wKSB7IHJlZ0NoYW5nZShjbSk7IH1cbiAgfVxuXG4gIC8vIERPQ1VNRU5UIERBVEEgU1RSVUNUVVJFXG5cbiAgLy8gQnkgZGVmYXVsdCwgdXBkYXRlcyB0aGF0IHN0YXJ0IGFuZCBlbmQgYXQgdGhlIGJlZ2lubmluZyBvZiBhIGxpbmVcbiAgLy8gYXJlIHRyZWF0ZWQgc3BlY2lhbGx5LCBpbiBvcmRlciB0byBtYWtlIHRoZSBhc3NvY2lhdGlvbiBvZiBsaW5lXG4gIC8vIHdpZGdldHMgYW5kIG1hcmtlciBlbGVtZW50cyB3aXRoIHRoZSB0ZXh0IGJlaGF2ZSBtb3JlIGludHVpdGl2ZS5cbiAgZnVuY3Rpb24gaXNXaG9sZUxpbmVVcGRhdGUoZG9jLCBjaGFuZ2UpIHtcbiAgICByZXR1cm4gY2hhbmdlLmZyb20uY2ggPT0gMCAmJiBjaGFuZ2UudG8uY2ggPT0gMCAmJiBsc3QoY2hhbmdlLnRleHQpID09IFwiXCIgJiZcbiAgICAgICghZG9jLmNtIHx8IGRvYy5jbS5vcHRpb25zLndob2xlTGluZVVwZGF0ZUJlZm9yZSlcbiAgfVxuXG4gIC8vIFBlcmZvcm0gYSBjaGFuZ2Ugb24gdGhlIGRvY3VtZW50IGRhdGEgc3RydWN0dXJlLlxuICBmdW5jdGlvbiB1cGRhdGVEb2MoZG9jLCBjaGFuZ2UsIG1hcmtlZFNwYW5zLCBlc3RpbWF0ZUhlaWdodCkge1xuICAgIGZ1bmN0aW9uIHNwYW5zRm9yKG4pIHtyZXR1cm4gbWFya2VkU3BhbnMgPyBtYXJrZWRTcGFuc1tuXSA6IG51bGx9XG4gICAgZnVuY3Rpb24gdXBkYXRlKGxpbmUsIHRleHQsIHNwYW5zKSB7XG4gICAgICB1cGRhdGVMaW5lKGxpbmUsIHRleHQsIHNwYW5zLCBlc3RpbWF0ZUhlaWdodCk7XG4gICAgICBzaWduYWxMYXRlcihsaW5lLCBcImNoYW5nZVwiLCBsaW5lLCBjaGFuZ2UpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBsaW5lc0ZvcihzdGFydCwgZW5kKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSlcbiAgICAgICAgeyByZXN1bHQucHVzaChuZXcgTGluZSh0ZXh0W2ldLCBzcGFuc0ZvcihpKSwgZXN0aW1hdGVIZWlnaHQpKTsgfVxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cblxuICAgIHZhciBmcm9tID0gY2hhbmdlLmZyb20sIHRvID0gY2hhbmdlLnRvLCB0ZXh0ID0gY2hhbmdlLnRleHQ7XG4gICAgdmFyIGZpcnN0TGluZSA9IGdldExpbmUoZG9jLCBmcm9tLmxpbmUpLCBsYXN0TGluZSA9IGdldExpbmUoZG9jLCB0by5saW5lKTtcbiAgICB2YXIgbGFzdFRleHQgPSBsc3QodGV4dCksIGxhc3RTcGFucyA9IHNwYW5zRm9yKHRleHQubGVuZ3RoIC0gMSksIG5saW5lcyA9IHRvLmxpbmUgLSBmcm9tLmxpbmU7XG5cbiAgICAvLyBBZGp1c3QgdGhlIGxpbmUgc3RydWN0dXJlXG4gICAgaWYgKGNoYW5nZS5mdWxsKSB7XG4gICAgICBkb2MuaW5zZXJ0KDAsIGxpbmVzRm9yKDAsIHRleHQubGVuZ3RoKSk7XG4gICAgICBkb2MucmVtb3ZlKHRleHQubGVuZ3RoLCBkb2Muc2l6ZSAtIHRleHQubGVuZ3RoKTtcbiAgICB9IGVsc2UgaWYgKGlzV2hvbGVMaW5lVXBkYXRlKGRvYywgY2hhbmdlKSkge1xuICAgICAgLy8gVGhpcyBpcyBhIHdob2xlLWxpbmUgcmVwbGFjZS4gVHJlYXRlZCBzcGVjaWFsbHkgdG8gbWFrZVxuICAgICAgLy8gc3VyZSBsaW5lIG9iamVjdHMgbW92ZSB0aGUgd2F5IHRoZXkgYXJlIHN1cHBvc2VkIHRvLlxuICAgICAgdmFyIGFkZGVkID0gbGluZXNGb3IoMCwgdGV4dC5sZW5ndGggLSAxKTtcbiAgICAgIHVwZGF0ZShsYXN0TGluZSwgbGFzdExpbmUudGV4dCwgbGFzdFNwYW5zKTtcbiAgICAgIGlmIChubGluZXMpIHsgZG9jLnJlbW92ZShmcm9tLmxpbmUsIG5saW5lcyk7IH1cbiAgICAgIGlmIChhZGRlZC5sZW5ndGgpIHsgZG9jLmluc2VydChmcm9tLmxpbmUsIGFkZGVkKTsgfVxuICAgIH0gZWxzZSBpZiAoZmlyc3RMaW5lID09IGxhc3RMaW5lKSB7XG4gICAgICBpZiAodGV4dC5sZW5ndGggPT0gMSkge1xuICAgICAgICB1cGRhdGUoZmlyc3RMaW5lLCBmaXJzdExpbmUudGV4dC5zbGljZSgwLCBmcm9tLmNoKSArIGxhc3RUZXh0ICsgZmlyc3RMaW5lLnRleHQuc2xpY2UodG8uY2gpLCBsYXN0U3BhbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGFkZGVkJDEgPSBsaW5lc0ZvcigxLCB0ZXh0Lmxlbmd0aCAtIDEpO1xuICAgICAgICBhZGRlZCQxLnB1c2gobmV3IExpbmUobGFzdFRleHQgKyBmaXJzdExpbmUudGV4dC5zbGljZSh0by5jaCksIGxhc3RTcGFucywgZXN0aW1hdGVIZWlnaHQpKTtcbiAgICAgICAgdXBkYXRlKGZpcnN0TGluZSwgZmlyc3RMaW5lLnRleHQuc2xpY2UoMCwgZnJvbS5jaCkgKyB0ZXh0WzBdLCBzcGFuc0ZvcigwKSk7XG4gICAgICAgIGRvYy5pbnNlcnQoZnJvbS5saW5lICsgMSwgYWRkZWQkMSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0ZXh0Lmxlbmd0aCA9PSAxKSB7XG4gICAgICB1cGRhdGUoZmlyc3RMaW5lLCBmaXJzdExpbmUudGV4dC5zbGljZSgwLCBmcm9tLmNoKSArIHRleHRbMF0gKyBsYXN0TGluZS50ZXh0LnNsaWNlKHRvLmNoKSwgc3BhbnNGb3IoMCkpO1xuICAgICAgZG9jLnJlbW92ZShmcm9tLmxpbmUgKyAxLCBubGluZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB1cGRhdGUoZmlyc3RMaW5lLCBmaXJzdExpbmUudGV4dC5zbGljZSgwLCBmcm9tLmNoKSArIHRleHRbMF0sIHNwYW5zRm9yKDApKTtcbiAgICAgIHVwZGF0ZShsYXN0TGluZSwgbGFzdFRleHQgKyBsYXN0TGluZS50ZXh0LnNsaWNlKHRvLmNoKSwgbGFzdFNwYW5zKTtcbiAgICAgIHZhciBhZGRlZCQyID0gbGluZXNGb3IoMSwgdGV4dC5sZW5ndGggLSAxKTtcbiAgICAgIGlmIChubGluZXMgPiAxKSB7IGRvYy5yZW1vdmUoZnJvbS5saW5lICsgMSwgbmxpbmVzIC0gMSk7IH1cbiAgICAgIGRvYy5pbnNlcnQoZnJvbS5saW5lICsgMSwgYWRkZWQkMik7XG4gICAgfVxuXG4gICAgc2lnbmFsTGF0ZXIoZG9jLCBcImNoYW5nZVwiLCBkb2MsIGNoYW5nZSk7XG4gIH1cblxuICAvLyBDYWxsIGYgZm9yIGFsbCBsaW5rZWQgZG9jdW1lbnRzLlxuICBmdW5jdGlvbiBsaW5rZWREb2NzKGRvYywgZiwgc2hhcmVkSGlzdE9ubHkpIHtcbiAgICBmdW5jdGlvbiBwcm9wYWdhdGUoZG9jLCBza2lwLCBzaGFyZWRIaXN0KSB7XG4gICAgICBpZiAoZG9jLmxpbmtlZCkgeyBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5saW5rZWQubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHJlbCA9IGRvYy5saW5rZWRbaV07XG4gICAgICAgIGlmIChyZWwuZG9jID09IHNraXApIHsgY29udGludWUgfVxuICAgICAgICB2YXIgc2hhcmVkID0gc2hhcmVkSGlzdCAmJiByZWwuc2hhcmVkSGlzdDtcbiAgICAgICAgaWYgKHNoYXJlZEhpc3RPbmx5ICYmICFzaGFyZWQpIHsgY29udGludWUgfVxuICAgICAgICBmKHJlbC5kb2MsIHNoYXJlZCk7XG4gICAgICAgIHByb3BhZ2F0ZShyZWwuZG9jLCBkb2MsIHNoYXJlZCk7XG4gICAgICB9IH1cbiAgICB9XG4gICAgcHJvcGFnYXRlKGRvYywgbnVsbCwgdHJ1ZSk7XG4gIH1cblxuICAvLyBBdHRhY2ggYSBkb2N1bWVudCB0byBhbiBlZGl0b3IuXG4gIGZ1bmN0aW9uIGF0dGFjaERvYyhjbSwgZG9jKSB7XG4gICAgaWYgKGRvYy5jbSkgeyB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIGRvY3VtZW50IGlzIGFscmVhZHkgaW4gdXNlLlwiKSB9XG4gICAgY20uZG9jID0gZG9jO1xuICAgIGRvYy5jbSA9IGNtO1xuICAgIGVzdGltYXRlTGluZUhlaWdodHMoY20pO1xuICAgIGxvYWRNb2RlKGNtKTtcbiAgICBzZXREaXJlY3Rpb25DbGFzcyhjbSk7XG4gICAgaWYgKCFjbS5vcHRpb25zLmxpbmVXcmFwcGluZykgeyBmaW5kTWF4TGluZShjbSk7IH1cbiAgICBjbS5vcHRpb25zLm1vZGUgPSBkb2MubW9kZU9wdGlvbjtcbiAgICByZWdDaGFuZ2UoY20pO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0RGlyZWN0aW9uQ2xhc3MoY20pIHtcbiAgKGNtLmRvYy5kaXJlY3Rpb24gPT0gXCJydGxcIiA/IGFkZENsYXNzIDogcm1DbGFzcykoY20uZGlzcGxheS5saW5lRGl2LCBcIkNvZGVNaXJyb3ItcnRsXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlyZWN0aW9uQ2hhbmdlZChjbSkge1xuICAgIHJ1bkluT3AoY20sIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNldERpcmVjdGlvbkNsYXNzKGNtKTtcbiAgICAgIHJlZ0NoYW5nZShjbSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBIaXN0b3J5KHN0YXJ0R2VuKSB7XG4gICAgLy8gQXJyYXlzIG9mIGNoYW5nZSBldmVudHMgYW5kIHNlbGVjdGlvbnMuIERvaW5nIHNvbWV0aGluZyBhZGRzIGFuXG4gICAgLy8gZXZlbnQgdG8gZG9uZSBhbmQgY2xlYXJzIHVuZG8uIFVuZG9pbmcgbW92ZXMgZXZlbnRzIGZyb20gZG9uZVxuICAgIC8vIHRvIHVuZG9uZSwgcmVkb2luZyBtb3ZlcyB0aGVtIGluIHRoZSBvdGhlciBkaXJlY3Rpb24uXG4gICAgdGhpcy5kb25lID0gW107IHRoaXMudW5kb25lID0gW107XG4gICAgdGhpcy51bmRvRGVwdGggPSBJbmZpbml0eTtcbiAgICAvLyBVc2VkIHRvIHRyYWNrIHdoZW4gY2hhbmdlcyBjYW4gYmUgbWVyZ2VkIGludG8gYSBzaW5nbGUgdW5kb1xuICAgIC8vIGV2ZW50XG4gICAgdGhpcy5sYXN0TW9kVGltZSA9IHRoaXMubGFzdFNlbFRpbWUgPSAwO1xuICAgIHRoaXMubGFzdE9wID0gdGhpcy5sYXN0U2VsT3AgPSBudWxsO1xuICAgIHRoaXMubGFzdE9yaWdpbiA9IHRoaXMubGFzdFNlbE9yaWdpbiA9IG51bGw7XG4gICAgLy8gVXNlZCBieSB0aGUgaXNDbGVhbigpIG1ldGhvZFxuICAgIHRoaXMuZ2VuZXJhdGlvbiA9IHRoaXMubWF4R2VuZXJhdGlvbiA9IHN0YXJ0R2VuIHx8IDE7XG4gIH1cblxuICAvLyBDcmVhdGUgYSBoaXN0b3J5IGNoYW5nZSBldmVudCBmcm9tIGFuIHVwZGF0ZURvYy1zdHlsZSBjaGFuZ2VcbiAgLy8gb2JqZWN0LlxuICBmdW5jdGlvbiBoaXN0b3J5Q2hhbmdlRnJvbUNoYW5nZShkb2MsIGNoYW5nZSkge1xuICAgIHZhciBoaXN0Q2hhbmdlID0ge2Zyb206IGNvcHlQb3MoY2hhbmdlLmZyb20pLCB0bzogY2hhbmdlRW5kKGNoYW5nZSksIHRleHQ6IGdldEJldHdlZW4oZG9jLCBjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKX07XG4gICAgYXR0YWNoTG9jYWxTcGFucyhkb2MsIGhpc3RDaGFuZ2UsIGNoYW5nZS5mcm9tLmxpbmUsIGNoYW5nZS50by5saW5lICsgMSk7XG4gICAgbGlua2VkRG9jcyhkb2MsIGZ1bmN0aW9uIChkb2MpIHsgcmV0dXJuIGF0dGFjaExvY2FsU3BhbnMoZG9jLCBoaXN0Q2hhbmdlLCBjaGFuZ2UuZnJvbS5saW5lLCBjaGFuZ2UudG8ubGluZSArIDEpOyB9LCB0cnVlKTtcbiAgICByZXR1cm4gaGlzdENoYW5nZVxuICB9XG5cbiAgLy8gUG9wIGFsbCBzZWxlY3Rpb24gZXZlbnRzIG9mZiB0aGUgZW5kIG9mIGEgaGlzdG9yeSBhcnJheS4gU3RvcCBhdFxuICAvLyBhIGNoYW5nZSBldmVudC5cbiAgZnVuY3Rpb24gY2xlYXJTZWxlY3Rpb25FdmVudHMoYXJyYXkpIHtcbiAgICB3aGlsZSAoYXJyYXkubGVuZ3RoKSB7XG4gICAgICB2YXIgbGFzdCA9IGxzdChhcnJheSk7XG4gICAgICBpZiAobGFzdC5yYW5nZXMpIHsgYXJyYXkucG9wKCk7IH1cbiAgICAgIGVsc2UgeyBicmVhayB9XG4gICAgfVxuICB9XG5cbiAgLy8gRmluZCB0aGUgdG9wIGNoYW5nZSBldmVudCBpbiB0aGUgaGlzdG9yeS4gUG9wIG9mZiBzZWxlY3Rpb25cbiAgLy8gZXZlbnRzIHRoYXQgYXJlIGluIHRoZSB3YXkuXG4gIGZ1bmN0aW9uIGxhc3RDaGFuZ2VFdmVudChoaXN0LCBmb3JjZSkge1xuICAgIGlmIChmb3JjZSkge1xuICAgICAgY2xlYXJTZWxlY3Rpb25FdmVudHMoaGlzdC5kb25lKTtcbiAgICAgIHJldHVybiBsc3QoaGlzdC5kb25lKVxuICAgIH0gZWxzZSBpZiAoaGlzdC5kb25lLmxlbmd0aCAmJiAhbHN0KGhpc3QuZG9uZSkucmFuZ2VzKSB7XG4gICAgICByZXR1cm4gbHN0KGhpc3QuZG9uZSlcbiAgICB9IGVsc2UgaWYgKGhpc3QuZG9uZS5sZW5ndGggPiAxICYmICFoaXN0LmRvbmVbaGlzdC5kb25lLmxlbmd0aCAtIDJdLnJhbmdlcykge1xuICAgICAgaGlzdC5kb25lLnBvcCgpO1xuICAgICAgcmV0dXJuIGxzdChoaXN0LmRvbmUpXG4gICAgfVxuICB9XG5cbiAgLy8gUmVnaXN0ZXIgYSBjaGFuZ2UgaW4gdGhlIGhpc3RvcnkuIE1lcmdlcyBjaGFuZ2VzIHRoYXQgYXJlIHdpdGhpblxuICAvLyBhIHNpbmdsZSBvcGVyYXRpb24sIG9yIGFyZSBjbG9zZSB0b2dldGhlciB3aXRoIGFuIG9yaWdpbiB0aGF0XG4gIC8vIGFsbG93cyBtZXJnaW5nIChzdGFydGluZyB3aXRoIFwiK1wiKSBpbnRvIGEgc2luZ2xlIGV2ZW50LlxuICBmdW5jdGlvbiBhZGRDaGFuZ2VUb0hpc3RvcnkoZG9jLCBjaGFuZ2UsIHNlbEFmdGVyLCBvcElkKSB7XG4gICAgdmFyIGhpc3QgPSBkb2MuaGlzdG9yeTtcbiAgICBoaXN0LnVuZG9uZS5sZW5ndGggPSAwO1xuICAgIHZhciB0aW1lID0gK25ldyBEYXRlLCBjdXI7XG4gICAgdmFyIGxhc3Q7XG5cbiAgICBpZiAoKGhpc3QubGFzdE9wID09IG9wSWQgfHxcbiAgICAgICAgIGhpc3QubGFzdE9yaWdpbiA9PSBjaGFuZ2Uub3JpZ2luICYmIGNoYW5nZS5vcmlnaW4gJiZcbiAgICAgICAgICgoY2hhbmdlLm9yaWdpbi5jaGFyQXQoMCkgPT0gXCIrXCIgJiYgaGlzdC5sYXN0TW9kVGltZSA+IHRpbWUgLSAoZG9jLmNtID8gZG9jLmNtLm9wdGlvbnMuaGlzdG9yeUV2ZW50RGVsYXkgOiA1MDApKSB8fFxuICAgICAgICAgIGNoYW5nZS5vcmlnaW4uY2hhckF0KDApID09IFwiKlwiKSkgJiZcbiAgICAgICAgKGN1ciA9IGxhc3RDaGFuZ2VFdmVudChoaXN0LCBoaXN0Lmxhc3RPcCA9PSBvcElkKSkpIHtcbiAgICAgIC8vIE1lcmdlIHRoaXMgY2hhbmdlIGludG8gdGhlIGxhc3QgZXZlbnRcbiAgICAgIGxhc3QgPSBsc3QoY3VyLmNoYW5nZXMpO1xuICAgICAgaWYgKGNtcChjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKSA9PSAwICYmIGNtcChjaGFuZ2UuZnJvbSwgbGFzdC50bykgPT0gMCkge1xuICAgICAgICAvLyBPcHRpbWl6ZWQgY2FzZSBmb3Igc2ltcGxlIGluc2VydGlvbiAtLSBkb24ndCB3YW50IHRvIGFkZFxuICAgICAgICAvLyBuZXcgY2hhbmdlc2V0cyBmb3IgZXZlcnkgY2hhcmFjdGVyIHR5cGVkXG4gICAgICAgIGxhc3QudG8gPSBjaGFuZ2VFbmQoY2hhbmdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEFkZCBuZXcgc3ViLWV2ZW50XG4gICAgICAgIGN1ci5jaGFuZ2VzLnB1c2goaGlzdG9yeUNoYW5nZUZyb21DaGFuZ2UoZG9jLCBjaGFuZ2UpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ2FuIG5vdCBiZSBtZXJnZWQsIHN0YXJ0IGEgbmV3IGV2ZW50LlxuICAgICAgdmFyIGJlZm9yZSA9IGxzdChoaXN0LmRvbmUpO1xuICAgICAgaWYgKCFiZWZvcmUgfHwgIWJlZm9yZS5yYW5nZXMpXG4gICAgICAgIHsgcHVzaFNlbGVjdGlvblRvSGlzdG9yeShkb2Muc2VsLCBoaXN0LmRvbmUpOyB9XG4gICAgICBjdXIgPSB7Y2hhbmdlczogW2hpc3RvcnlDaGFuZ2VGcm9tQ2hhbmdlKGRvYywgY2hhbmdlKV0sXG4gICAgICAgICAgICAgZ2VuZXJhdGlvbjogaGlzdC5nZW5lcmF0aW9ufTtcbiAgICAgIGhpc3QuZG9uZS5wdXNoKGN1cik7XG4gICAgICB3aGlsZSAoaGlzdC5kb25lLmxlbmd0aCA+IGhpc3QudW5kb0RlcHRoKSB7XG4gICAgICAgIGhpc3QuZG9uZS5zaGlmdCgpO1xuICAgICAgICBpZiAoIWhpc3QuZG9uZVswXS5yYW5nZXMpIHsgaGlzdC5kb25lLnNoaWZ0KCk7IH1cbiAgICAgIH1cbiAgICB9XG4gICAgaGlzdC5kb25lLnB1c2goc2VsQWZ0ZXIpO1xuICAgIGhpc3QuZ2VuZXJhdGlvbiA9ICsraGlzdC5tYXhHZW5lcmF0aW9uO1xuICAgIGhpc3QubGFzdE1vZFRpbWUgPSBoaXN0Lmxhc3RTZWxUaW1lID0gdGltZTtcbiAgICBoaXN0Lmxhc3RPcCA9IGhpc3QubGFzdFNlbE9wID0gb3BJZDtcbiAgICBoaXN0Lmxhc3RPcmlnaW4gPSBoaXN0Lmxhc3RTZWxPcmlnaW4gPSBjaGFuZ2Uub3JpZ2luO1xuXG4gICAgaWYgKCFsYXN0KSB7IHNpZ25hbChkb2MsIFwiaGlzdG9yeUFkZGVkXCIpOyB9XG4gIH1cblxuICBmdW5jdGlvbiBzZWxlY3Rpb25FdmVudENhbkJlTWVyZ2VkKGRvYywgb3JpZ2luLCBwcmV2LCBzZWwpIHtcbiAgICB2YXIgY2ggPSBvcmlnaW4uY2hhckF0KDApO1xuICAgIHJldHVybiBjaCA9PSBcIipcIiB8fFxuICAgICAgY2ggPT0gXCIrXCIgJiZcbiAgICAgIHByZXYucmFuZ2VzLmxlbmd0aCA9PSBzZWwucmFuZ2VzLmxlbmd0aCAmJlxuICAgICAgcHJldi5zb21ldGhpbmdTZWxlY3RlZCgpID09IHNlbC5zb21ldGhpbmdTZWxlY3RlZCgpICYmXG4gICAgICBuZXcgRGF0ZSAtIGRvYy5oaXN0b3J5Lmxhc3RTZWxUaW1lIDw9IChkb2MuY20gPyBkb2MuY20ub3B0aW9ucy5oaXN0b3J5RXZlbnREZWxheSA6IDUwMClcbiAgfVxuXG4gIC8vIENhbGxlZCB3aGVuZXZlciB0aGUgc2VsZWN0aW9uIGNoYW5nZXMsIHNldHMgdGhlIG5ldyBzZWxlY3Rpb24gYXNcbiAgLy8gdGhlIHBlbmRpbmcgc2VsZWN0aW9uIGluIHRoZSBoaXN0b3J5LCBhbmQgcHVzaGVzIHRoZSBvbGQgcGVuZGluZ1xuICAvLyBzZWxlY3Rpb24gaW50byB0aGUgJ2RvbmUnIGFycmF5IHdoZW4gaXQgd2FzIHNpZ25pZmljYW50bHlcbiAgLy8gZGlmZmVyZW50IChpbiBudW1iZXIgb2Ygc2VsZWN0ZWQgcmFuZ2VzLCBlbXB0aW5lc3MsIG9yIHRpbWUpLlxuICBmdW5jdGlvbiBhZGRTZWxlY3Rpb25Ub0hpc3RvcnkoZG9jLCBzZWwsIG9wSWQsIG9wdGlvbnMpIHtcbiAgICB2YXIgaGlzdCA9IGRvYy5oaXN0b3J5LCBvcmlnaW4gPSBvcHRpb25zICYmIG9wdGlvbnMub3JpZ2luO1xuXG4gICAgLy8gQSBuZXcgZXZlbnQgaXMgc3RhcnRlZCB3aGVuIHRoZSBwcmV2aW91cyBvcmlnaW4gZG9lcyBub3QgbWF0Y2hcbiAgICAvLyB0aGUgY3VycmVudCwgb3IgdGhlIG9yaWdpbnMgZG9uJ3QgYWxsb3cgbWF0Y2hpbmcuIE9yaWdpbnNcbiAgICAvLyBzdGFydGluZyB3aXRoICogYXJlIGFsd2F5cyBtZXJnZWQsIHRob3NlIHN0YXJ0aW5nIHdpdGggKyBhcmVcbiAgICAvLyBtZXJnZWQgd2hlbiBzaW1pbGFyIGFuZCBjbG9zZSB0b2dldGhlciBpbiB0aW1lLlxuICAgIGlmIChvcElkID09IGhpc3QubGFzdFNlbE9wIHx8XG4gICAgICAgIChvcmlnaW4gJiYgaGlzdC5sYXN0U2VsT3JpZ2luID09IG9yaWdpbiAmJlxuICAgICAgICAgKGhpc3QubGFzdE1vZFRpbWUgPT0gaGlzdC5sYXN0U2VsVGltZSAmJiBoaXN0Lmxhc3RPcmlnaW4gPT0gb3JpZ2luIHx8XG4gICAgICAgICAgc2VsZWN0aW9uRXZlbnRDYW5CZU1lcmdlZChkb2MsIG9yaWdpbiwgbHN0KGhpc3QuZG9uZSksIHNlbCkpKSlcbiAgICAgIHsgaGlzdC5kb25lW2hpc3QuZG9uZS5sZW5ndGggLSAxXSA9IHNlbDsgfVxuICAgIGVsc2VcbiAgICAgIHsgcHVzaFNlbGVjdGlvblRvSGlzdG9yeShzZWwsIGhpc3QuZG9uZSk7IH1cblxuICAgIGhpc3QubGFzdFNlbFRpbWUgPSArbmV3IERhdGU7XG4gICAgaGlzdC5sYXN0U2VsT3JpZ2luID0gb3JpZ2luO1xuICAgIGhpc3QubGFzdFNlbE9wID0gb3BJZDtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmNsZWFyUmVkbyAhPT0gZmFsc2UpXG4gICAgICB7IGNsZWFyU2VsZWN0aW9uRXZlbnRzKGhpc3QudW5kb25lKTsgfVxuICB9XG5cbiAgZnVuY3Rpb24gcHVzaFNlbGVjdGlvblRvSGlzdG9yeShzZWwsIGRlc3QpIHtcbiAgICB2YXIgdG9wID0gbHN0KGRlc3QpO1xuICAgIGlmICghKHRvcCAmJiB0b3AucmFuZ2VzICYmIHRvcC5lcXVhbHMoc2VsKSkpXG4gICAgICB7IGRlc3QucHVzaChzZWwpOyB9XG4gIH1cblxuICAvLyBVc2VkIHRvIHN0b3JlIG1hcmtlZCBzcGFuIGluZm9ybWF0aW9uIGluIHRoZSBoaXN0b3J5LlxuICBmdW5jdGlvbiBhdHRhY2hMb2NhbFNwYW5zKGRvYywgY2hhbmdlLCBmcm9tLCB0bykge1xuICAgIHZhciBleGlzdGluZyA9IGNoYW5nZVtcInNwYW5zX1wiICsgZG9jLmlkXSwgbiA9IDA7XG4gICAgZG9jLml0ZXIoTWF0aC5tYXgoZG9jLmZpcnN0LCBmcm9tKSwgTWF0aC5taW4oZG9jLmZpcnN0ICsgZG9jLnNpemUsIHRvKSwgZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgIGlmIChsaW5lLm1hcmtlZFNwYW5zKVxuICAgICAgICB7IChleGlzdGluZyB8fCAoZXhpc3RpbmcgPSBjaGFuZ2VbXCJzcGFuc19cIiArIGRvYy5pZF0gPSB7fSkpW25dID0gbGluZS5tYXJrZWRTcGFuczsgfVxuICAgICAgKytuO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gV2hlbiB1bi9yZS1kb2luZyByZXN0b3JlcyB0ZXh0IGNvbnRhaW5pbmcgbWFya2VkIHNwYW5zLCB0aG9zZVxuICAvLyB0aGF0IGhhdmUgYmVlbiBleHBsaWNpdGx5IGNsZWFyZWQgc2hvdWxkIG5vdCBiZSByZXN0b3JlZC5cbiAgZnVuY3Rpb24gcmVtb3ZlQ2xlYXJlZFNwYW5zKHNwYW5zKSB7XG4gICAgaWYgKCFzcGFucykgeyByZXR1cm4gbnVsbCB9XG4gICAgdmFyIG91dDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgKytpKSB7XG4gICAgICBpZiAoc3BhbnNbaV0ubWFya2VyLmV4cGxpY2l0bHlDbGVhcmVkKSB7IGlmICghb3V0KSB7IG91dCA9IHNwYW5zLnNsaWNlKDAsIGkpOyB9IH1cbiAgICAgIGVsc2UgaWYgKG91dCkgeyBvdXQucHVzaChzcGFuc1tpXSk7IH1cbiAgICB9XG4gICAgcmV0dXJuICFvdXQgPyBzcGFucyA6IG91dC5sZW5ndGggPyBvdXQgOiBudWxsXG4gIH1cblxuICAvLyBSZXRyaWV2ZSBhbmQgZmlsdGVyIHRoZSBvbGQgbWFya2VkIHNwYW5zIHN0b3JlZCBpbiBhIGNoYW5nZSBldmVudC5cbiAgZnVuY3Rpb24gZ2V0T2xkU3BhbnMoZG9jLCBjaGFuZ2UpIHtcbiAgICB2YXIgZm91bmQgPSBjaGFuZ2VbXCJzcGFuc19cIiArIGRvYy5pZF07XG4gICAgaWYgKCFmb3VuZCkgeyByZXR1cm4gbnVsbCB9XG4gICAgdmFyIG53ID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFuZ2UudGV4dC5sZW5ndGg7ICsraSlcbiAgICAgIHsgbncucHVzaChyZW1vdmVDbGVhcmVkU3BhbnMoZm91bmRbaV0pKTsgfVxuICAgIHJldHVybiBud1xuICB9XG5cbiAgLy8gVXNlZCBmb3IgdW4vcmUtZG9pbmcgY2hhbmdlcyBmcm9tIHRoZSBoaXN0b3J5LiBDb21iaW5lcyB0aGVcbiAgLy8gcmVzdWx0IG9mIGNvbXB1dGluZyB0aGUgZXhpc3Rpbmcgc3BhbnMgd2l0aCB0aGUgc2V0IG9mIHNwYW5zIHRoYXRcbiAgLy8gZXhpc3RlZCBpbiB0aGUgaGlzdG9yeSAoc28gdGhhdCBkZWxldGluZyBhcm91bmQgYSBzcGFuIGFuZCB0aGVuXG4gIC8vIHVuZG9pbmcgYnJpbmdzIGJhY2sgdGhlIHNwYW4pLlxuICBmdW5jdGlvbiBtZXJnZU9sZFNwYW5zKGRvYywgY2hhbmdlKSB7XG4gICAgdmFyIG9sZCA9IGdldE9sZFNwYW5zKGRvYywgY2hhbmdlKTtcbiAgICB2YXIgc3RyZXRjaGVkID0gc3RyZXRjaFNwYW5zT3ZlckNoYW5nZShkb2MsIGNoYW5nZSk7XG4gICAgaWYgKCFvbGQpIHsgcmV0dXJuIHN0cmV0Y2hlZCB9XG4gICAgaWYgKCFzdHJldGNoZWQpIHsgcmV0dXJuIG9sZCB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9sZC5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIG9sZEN1ciA9IG9sZFtpXSwgc3RyZXRjaEN1ciA9IHN0cmV0Y2hlZFtpXTtcbiAgICAgIGlmIChvbGRDdXIgJiYgc3RyZXRjaEN1cikge1xuICAgICAgICBzcGFuczogZm9yICh2YXIgaiA9IDA7IGogPCBzdHJldGNoQ3VyLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgdmFyIHNwYW4gPSBzdHJldGNoQ3VyW2pdO1xuICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgb2xkQ3VyLmxlbmd0aDsgKytrKVxuICAgICAgICAgICAgeyBpZiAob2xkQ3VyW2tdLm1hcmtlciA9PSBzcGFuLm1hcmtlcikgeyBjb250aW51ZSBzcGFucyB9IH1cbiAgICAgICAgICBvbGRDdXIucHVzaChzcGFuKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzdHJldGNoQ3VyKSB7XG4gICAgICAgIG9sZFtpXSA9IHN0cmV0Y2hDdXI7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvbGRcbiAgfVxuXG4gIC8vIFVzZWQgYm90aCB0byBwcm92aWRlIGEgSlNPTi1zYWZlIG9iamVjdCBpbiAuZ2V0SGlzdG9yeSwgYW5kLCB3aGVuXG4gIC8vIGRldGFjaGluZyBhIGRvY3VtZW50LCB0byBzcGxpdCB0aGUgaGlzdG9yeSBpbiB0d29cbiAgZnVuY3Rpb24gY29weUhpc3RvcnlBcnJheShldmVudHMsIG5ld0dyb3VwLCBpbnN0YW50aWF0ZVNlbCkge1xuICAgIHZhciBjb3B5ID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudHMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBldmVudCA9IGV2ZW50c1tpXTtcbiAgICAgIGlmIChldmVudC5yYW5nZXMpIHtcbiAgICAgICAgY29weS5wdXNoKGluc3RhbnRpYXRlU2VsID8gU2VsZWN0aW9uLnByb3RvdHlwZS5kZWVwQ29weS5jYWxsKGV2ZW50KSA6IGV2ZW50KTtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIHZhciBjaGFuZ2VzID0gZXZlbnQuY2hhbmdlcywgbmV3Q2hhbmdlcyA9IFtdO1xuICAgICAgY29weS5wdXNoKHtjaGFuZ2VzOiBuZXdDaGFuZ2VzfSk7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoYW5nZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgdmFyIGNoYW5nZSA9IGNoYW5nZXNbal0sIG0gPSAodm9pZCAwKTtcbiAgICAgICAgbmV3Q2hhbmdlcy5wdXNoKHtmcm9tOiBjaGFuZ2UuZnJvbSwgdG86IGNoYW5nZS50bywgdGV4dDogY2hhbmdlLnRleHR9KTtcbiAgICAgICAgaWYgKG5ld0dyb3VwKSB7IGZvciAodmFyIHByb3AgaW4gY2hhbmdlKSB7IGlmIChtID0gcHJvcC5tYXRjaCgvXnNwYW5zXyhcXGQrKSQvKSkge1xuICAgICAgICAgIGlmIChpbmRleE9mKG5ld0dyb3VwLCBOdW1iZXIobVsxXSkpID4gLTEpIHtcbiAgICAgICAgICAgIGxzdChuZXdDaGFuZ2VzKVtwcm9wXSA9IGNoYW5nZVtwcm9wXTtcbiAgICAgICAgICAgIGRlbGV0ZSBjaGFuZ2VbcHJvcF07XG4gICAgICAgICAgfVxuICAgICAgICB9IH0gfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29weVxuICB9XG5cbiAgLy8gVGhlICdzY3JvbGwnIHBhcmFtZXRlciBnaXZlbiB0byBtYW55IG9mIHRoZXNlIGluZGljYXRlZCB3aGV0aGVyXG4gIC8vIHRoZSBuZXcgY3Vyc29yIHBvc2l0aW9uIHNob3VsZCBiZSBzY3JvbGxlZCBpbnRvIHZpZXcgYWZ0ZXJcbiAgLy8gbW9kaWZ5aW5nIHRoZSBzZWxlY3Rpb24uXG5cbiAgLy8gSWYgc2hpZnQgaXMgaGVsZCBvciB0aGUgZXh0ZW5kIGZsYWcgaXMgc2V0LCBleHRlbmRzIGEgcmFuZ2UgdG9cbiAgLy8gaW5jbHVkZSBhIGdpdmVuIHBvc2l0aW9uIChhbmQgb3B0aW9uYWxseSBhIHNlY29uZCBwb3NpdGlvbikuXG4gIC8vIE90aGVyd2lzZSwgc2ltcGx5IHJldHVybnMgdGhlIHJhbmdlIGJldHdlZW4gdGhlIGdpdmVuIHBvc2l0aW9ucy5cbiAgLy8gVXNlZCBmb3IgY3Vyc29yIG1vdGlvbiBhbmQgc3VjaC5cbiAgZnVuY3Rpb24gZXh0ZW5kUmFuZ2UocmFuZ2UsIGhlYWQsIG90aGVyLCBleHRlbmQpIHtcbiAgICBpZiAoZXh0ZW5kKSB7XG4gICAgICB2YXIgYW5jaG9yID0gcmFuZ2UuYW5jaG9yO1xuICAgICAgaWYgKG90aGVyKSB7XG4gICAgICAgIHZhciBwb3NCZWZvcmUgPSBjbXAoaGVhZCwgYW5jaG9yKSA8IDA7XG4gICAgICAgIGlmIChwb3NCZWZvcmUgIT0gKGNtcChvdGhlciwgYW5jaG9yKSA8IDApKSB7XG4gICAgICAgICAgYW5jaG9yID0gaGVhZDtcbiAgICAgICAgICBoZWFkID0gb3RoZXI7XG4gICAgICAgIH0gZWxzZSBpZiAocG9zQmVmb3JlICE9IChjbXAoaGVhZCwgb3RoZXIpIDwgMCkpIHtcbiAgICAgICAgICBoZWFkID0gb3RoZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgUmFuZ2UoYW5jaG9yLCBoZWFkKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IFJhbmdlKG90aGVyIHx8IGhlYWQsIGhlYWQpXG4gICAgfVxuICB9XG5cbiAgLy8gRXh0ZW5kIHRoZSBwcmltYXJ5IHNlbGVjdGlvbiByYW5nZSwgZGlzY2FyZCB0aGUgcmVzdC5cbiAgZnVuY3Rpb24gZXh0ZW5kU2VsZWN0aW9uKGRvYywgaGVhZCwgb3RoZXIsIG9wdGlvbnMsIGV4dGVuZCkge1xuICAgIGlmIChleHRlbmQgPT0gbnVsbCkgeyBleHRlbmQgPSBkb2MuY20gJiYgKGRvYy5jbS5kaXNwbGF5LnNoaWZ0IHx8IGRvYy5leHRlbmQpOyB9XG4gICAgc2V0U2VsZWN0aW9uKGRvYywgbmV3IFNlbGVjdGlvbihbZXh0ZW5kUmFuZ2UoZG9jLnNlbC5wcmltYXJ5KCksIGhlYWQsIG90aGVyLCBleHRlbmQpXSwgMCksIG9wdGlvbnMpO1xuICB9XG5cbiAgLy8gRXh0ZW5kIGFsbCBzZWxlY3Rpb25zIChwb3MgaXMgYW4gYXJyYXkgb2Ygc2VsZWN0aW9ucyB3aXRoIGxlbmd0aFxuICAvLyBlcXVhbCB0aGUgbnVtYmVyIG9mIHNlbGVjdGlvbnMpXG4gIGZ1bmN0aW9uIGV4dGVuZFNlbGVjdGlvbnMoZG9jLCBoZWFkcywgb3B0aW9ucykge1xuICAgIHZhciBvdXQgPSBbXTtcbiAgICB2YXIgZXh0ZW5kID0gZG9jLmNtICYmIChkb2MuY20uZGlzcGxheS5zaGlmdCB8fCBkb2MuZXh0ZW5kKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5zZWwucmFuZ2VzLmxlbmd0aDsgaSsrKVxuICAgICAgeyBvdXRbaV0gPSBleHRlbmRSYW5nZShkb2Muc2VsLnJhbmdlc1tpXSwgaGVhZHNbaV0sIG51bGwsIGV4dGVuZCk7IH1cbiAgICB2YXIgbmV3U2VsID0gbm9ybWFsaXplU2VsZWN0aW9uKGRvYy5jbSwgb3V0LCBkb2Muc2VsLnByaW1JbmRleCk7XG4gICAgc2V0U2VsZWN0aW9uKGRvYywgbmV3U2VsLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8vIFVwZGF0ZXMgYSBzaW5nbGUgcmFuZ2UgaW4gdGhlIHNlbGVjdGlvbi5cbiAgZnVuY3Rpb24gcmVwbGFjZU9uZVNlbGVjdGlvbihkb2MsIGksIHJhbmdlLCBvcHRpb25zKSB7XG4gICAgdmFyIHJhbmdlcyA9IGRvYy5zZWwucmFuZ2VzLnNsaWNlKDApO1xuICAgIHJhbmdlc1tpXSA9IHJhbmdlO1xuICAgIHNldFNlbGVjdGlvbihkb2MsIG5vcm1hbGl6ZVNlbGVjdGlvbihkb2MuY20sIHJhbmdlcywgZG9jLnNlbC5wcmltSW5kZXgpLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8vIFJlc2V0IHRoZSBzZWxlY3Rpb24gdG8gYSBzaW5nbGUgcmFuZ2UuXG4gIGZ1bmN0aW9uIHNldFNpbXBsZVNlbGVjdGlvbihkb2MsIGFuY2hvciwgaGVhZCwgb3B0aW9ucykge1xuICAgIHNldFNlbGVjdGlvbihkb2MsIHNpbXBsZVNlbGVjdGlvbihhbmNob3IsIGhlYWQpLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8vIEdpdmUgYmVmb3JlU2VsZWN0aW9uQ2hhbmdlIGhhbmRsZXJzIGEgY2hhbmdlIHRvIGluZmx1ZW5jZSBhXG4gIC8vIHNlbGVjdGlvbiB1cGRhdGUuXG4gIGZ1bmN0aW9uIGZpbHRlclNlbGVjdGlvbkNoYW5nZShkb2MsIHNlbCwgb3B0aW9ucykge1xuICAgIHZhciBvYmogPSB7XG4gICAgICByYW5nZXM6IHNlbC5yYW5nZXMsXG4gICAgICB1cGRhdGU6IGZ1bmN0aW9uKHJhbmdlcykge1xuICAgICAgICB0aGlzLnJhbmdlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICB7IHRoaXMucmFuZ2VzW2ldID0gbmV3IFJhbmdlKGNsaXBQb3MoZG9jLCByYW5nZXNbaV0uYW5jaG9yKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGlwUG9zKGRvYywgcmFuZ2VzW2ldLmhlYWQpKTsgfVxuICAgICAgfSxcbiAgICAgIG9yaWdpbjogb3B0aW9ucyAmJiBvcHRpb25zLm9yaWdpblxuICAgIH07XG4gICAgc2lnbmFsKGRvYywgXCJiZWZvcmVTZWxlY3Rpb25DaGFuZ2VcIiwgZG9jLCBvYmopO1xuICAgIGlmIChkb2MuY20pIHsgc2lnbmFsKGRvYy5jbSwgXCJiZWZvcmVTZWxlY3Rpb25DaGFuZ2VcIiwgZG9jLmNtLCBvYmopOyB9XG4gICAgaWYgKG9iai5yYW5nZXMgIT0gc2VsLnJhbmdlcykgeyByZXR1cm4gbm9ybWFsaXplU2VsZWN0aW9uKGRvYy5jbSwgb2JqLnJhbmdlcywgb2JqLnJhbmdlcy5sZW5ndGggLSAxKSB9XG4gICAgZWxzZSB7IHJldHVybiBzZWwgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2V0U2VsZWN0aW9uUmVwbGFjZUhpc3RvcnkoZG9jLCBzZWwsIG9wdGlvbnMpIHtcbiAgICB2YXIgZG9uZSA9IGRvYy5oaXN0b3J5LmRvbmUsIGxhc3QgPSBsc3QoZG9uZSk7XG4gICAgaWYgKGxhc3QgJiYgbGFzdC5yYW5nZXMpIHtcbiAgICAgIGRvbmVbZG9uZS5sZW5ndGggLSAxXSA9IHNlbDtcbiAgICAgIHNldFNlbGVjdGlvbk5vVW5kbyhkb2MsIHNlbCwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFNlbGVjdGlvbihkb2MsIHNlbCwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG5cbiAgLy8gU2V0IGEgbmV3IHNlbGVjdGlvbi5cbiAgZnVuY3Rpb24gc2V0U2VsZWN0aW9uKGRvYywgc2VsLCBvcHRpb25zKSB7XG4gICAgc2V0U2VsZWN0aW9uTm9VbmRvKGRvYywgc2VsLCBvcHRpb25zKTtcbiAgICBhZGRTZWxlY3Rpb25Ub0hpc3RvcnkoZG9jLCBkb2Muc2VsLCBkb2MuY20gPyBkb2MuY20uY3VyT3AuaWQgOiBOYU4sIG9wdGlvbnMpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0U2VsZWN0aW9uTm9VbmRvKGRvYywgc2VsLCBvcHRpb25zKSB7XG4gICAgaWYgKGhhc0hhbmRsZXIoZG9jLCBcImJlZm9yZVNlbGVjdGlvbkNoYW5nZVwiKSB8fCBkb2MuY20gJiYgaGFzSGFuZGxlcihkb2MuY20sIFwiYmVmb3JlU2VsZWN0aW9uQ2hhbmdlXCIpKVxuICAgICAgeyBzZWwgPSBmaWx0ZXJTZWxlY3Rpb25DaGFuZ2UoZG9jLCBzZWwsIG9wdGlvbnMpOyB9XG5cbiAgICB2YXIgYmlhcyA9IG9wdGlvbnMgJiYgb3B0aW9ucy5iaWFzIHx8XG4gICAgICAoY21wKHNlbC5wcmltYXJ5KCkuaGVhZCwgZG9jLnNlbC5wcmltYXJ5KCkuaGVhZCkgPCAwID8gLTEgOiAxKTtcbiAgICBzZXRTZWxlY3Rpb25Jbm5lcihkb2MsIHNraXBBdG9taWNJblNlbGVjdGlvbihkb2MsIHNlbCwgYmlhcywgdHJ1ZSkpO1xuXG4gICAgaWYgKCEob3B0aW9ucyAmJiBvcHRpb25zLnNjcm9sbCA9PT0gZmFsc2UpICYmIGRvYy5jbSlcbiAgICAgIHsgZW5zdXJlQ3Vyc29yVmlzaWJsZShkb2MuY20pOyB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXRTZWxlY3Rpb25Jbm5lcihkb2MsIHNlbCkge1xuICAgIGlmIChzZWwuZXF1YWxzKGRvYy5zZWwpKSB7IHJldHVybiB9XG5cbiAgICBkb2Muc2VsID0gc2VsO1xuXG4gICAgaWYgKGRvYy5jbSkge1xuICAgICAgZG9jLmNtLmN1ck9wLnVwZGF0ZUlucHV0ID0gMTtcbiAgICAgIGRvYy5jbS5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIHNpZ25hbEN1cnNvckFjdGl2aXR5KGRvYy5jbSk7XG4gICAgfVxuICAgIHNpZ25hbExhdGVyKGRvYywgXCJjdXJzb3JBY3Rpdml0eVwiLCBkb2MpO1xuICB9XG5cbiAgLy8gVmVyaWZ5IHRoYXQgdGhlIHNlbGVjdGlvbiBkb2VzIG5vdCBwYXJ0aWFsbHkgc2VsZWN0IGFueSBhdG9taWNcbiAgLy8gbWFya2VkIHJhbmdlcy5cbiAgZnVuY3Rpb24gcmVDaGVja1NlbGVjdGlvbihkb2MpIHtcbiAgICBzZXRTZWxlY3Rpb25Jbm5lcihkb2MsIHNraXBBdG9taWNJblNlbGVjdGlvbihkb2MsIGRvYy5zZWwsIG51bGwsIGZhbHNlKSk7XG4gIH1cblxuICAvLyBSZXR1cm4gYSBzZWxlY3Rpb24gdGhhdCBkb2VzIG5vdCBwYXJ0aWFsbHkgc2VsZWN0IGFueSBhdG9taWNcbiAgLy8gcmFuZ2VzLlxuICBmdW5jdGlvbiBza2lwQXRvbWljSW5TZWxlY3Rpb24oZG9jLCBzZWwsIGJpYXMsIG1heUNsZWFyKSB7XG4gICAgdmFyIG91dDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbC5yYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciByYW5nZSA9IHNlbC5yYW5nZXNbaV07XG4gICAgICB2YXIgb2xkID0gc2VsLnJhbmdlcy5sZW5ndGggPT0gZG9jLnNlbC5yYW5nZXMubGVuZ3RoICYmIGRvYy5zZWwucmFuZ2VzW2ldO1xuICAgICAgdmFyIG5ld0FuY2hvciA9IHNraXBBdG9taWMoZG9jLCByYW5nZS5hbmNob3IsIG9sZCAmJiBvbGQuYW5jaG9yLCBiaWFzLCBtYXlDbGVhcik7XG4gICAgICB2YXIgbmV3SGVhZCA9IHNraXBBdG9taWMoZG9jLCByYW5nZS5oZWFkLCBvbGQgJiYgb2xkLmhlYWQsIGJpYXMsIG1heUNsZWFyKTtcbiAgICAgIGlmIChvdXQgfHwgbmV3QW5jaG9yICE9IHJhbmdlLmFuY2hvciB8fCBuZXdIZWFkICE9IHJhbmdlLmhlYWQpIHtcbiAgICAgICAgaWYgKCFvdXQpIHsgb3V0ID0gc2VsLnJhbmdlcy5zbGljZSgwLCBpKTsgfVxuICAgICAgICBvdXRbaV0gPSBuZXcgUmFuZ2UobmV3QW5jaG9yLCBuZXdIZWFkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dCA/IG5vcm1hbGl6ZVNlbGVjdGlvbihkb2MuY20sIG91dCwgc2VsLnByaW1JbmRleCkgOiBzZWxcbiAgfVxuXG4gIGZ1bmN0aW9uIHNraXBBdG9taWNJbm5lcihkb2MsIHBvcywgb2xkUG9zLCBkaXIsIG1heUNsZWFyKSB7XG4gICAgdmFyIGxpbmUgPSBnZXRMaW5lKGRvYywgcG9zLmxpbmUpO1xuICAgIGlmIChsaW5lLm1hcmtlZFNwYW5zKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgbGluZS5tYXJrZWRTcGFucy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHNwID0gbGluZS5tYXJrZWRTcGFuc1tpXSwgbSA9IHNwLm1hcmtlcjtcblxuICAgICAgLy8gRGV0ZXJtaW5lIGlmIHdlIHNob3VsZCBwcmV2ZW50IHRoZSBjdXJzb3IgYmVpbmcgcGxhY2VkIHRvIHRoZSBsZWZ0L3JpZ2h0IG9mIGFuIGF0b21pYyBtYXJrZXJcbiAgICAgIC8vIEhpc3RvcmljYWxseSB0aGlzIHdhcyBkZXRlcm1pbmVkIHVzaW5nIHRoZSBpbmNsdXNpdmVMZWZ0L1JpZ2h0IG9wdGlvbiwgYnV0IHRoZSBuZXcgd2F5IHRvIGNvbnRyb2wgaXRcbiAgICAgIC8vIGlzIHdpdGggc2VsZWN0TGVmdC9SaWdodFxuICAgICAgdmFyIHByZXZlbnRDdXJzb3JMZWZ0ID0gKFwic2VsZWN0TGVmdFwiIGluIG0pID8gIW0uc2VsZWN0TGVmdCA6IG0uaW5jbHVzaXZlTGVmdDtcbiAgICAgIHZhciBwcmV2ZW50Q3Vyc29yUmlnaHQgPSAoXCJzZWxlY3RSaWdodFwiIGluIG0pID8gIW0uc2VsZWN0UmlnaHQgOiBtLmluY2x1c2l2ZVJpZ2h0O1xuXG4gICAgICBpZiAoKHNwLmZyb20gPT0gbnVsbCB8fCAocHJldmVudEN1cnNvckxlZnQgPyBzcC5mcm9tIDw9IHBvcy5jaCA6IHNwLmZyb20gPCBwb3MuY2gpKSAmJlxuICAgICAgICAgIChzcC50byA9PSBudWxsIHx8IChwcmV2ZW50Q3Vyc29yUmlnaHQgPyBzcC50byA+PSBwb3MuY2ggOiBzcC50byA+IHBvcy5jaCkpKSB7XG4gICAgICAgIGlmIChtYXlDbGVhcikge1xuICAgICAgICAgIHNpZ25hbChtLCBcImJlZm9yZUN1cnNvckVudGVyXCIpO1xuICAgICAgICAgIGlmIChtLmV4cGxpY2l0bHlDbGVhcmVkKSB7XG4gICAgICAgICAgICBpZiAoIWxpbmUubWFya2VkU3BhbnMpIHsgYnJlYWsgfVxuICAgICAgICAgICAgZWxzZSB7LS1pOyBjb250aW51ZX1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFtLmF0b21pYykgeyBjb250aW51ZSB9XG5cbiAgICAgICAgaWYgKG9sZFBvcykge1xuICAgICAgICAgIHZhciBuZWFyID0gbS5maW5kKGRpciA8IDAgPyAxIDogLTEpLCBkaWZmID0gKHZvaWQgMCk7XG4gICAgICAgICAgaWYgKGRpciA8IDAgPyBwcmV2ZW50Q3Vyc29yUmlnaHQgOiBwcmV2ZW50Q3Vyc29yTGVmdClcbiAgICAgICAgICAgIHsgbmVhciA9IG1vdmVQb3MoZG9jLCBuZWFyLCAtZGlyLCBuZWFyICYmIG5lYXIubGluZSA9PSBwb3MubGluZSA/IGxpbmUgOiBudWxsKTsgfVxuICAgICAgICAgIGlmIChuZWFyICYmIG5lYXIubGluZSA9PSBwb3MubGluZSAmJiAoZGlmZiA9IGNtcChuZWFyLCBvbGRQb3MpKSAmJiAoZGlyIDwgMCA/IGRpZmYgPCAwIDogZGlmZiA+IDApKVxuICAgICAgICAgICAgeyByZXR1cm4gc2tpcEF0b21pY0lubmVyKGRvYywgbmVhciwgcG9zLCBkaXIsIG1heUNsZWFyKSB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZmFyID0gbS5maW5kKGRpciA8IDAgPyAtMSA6IDEpO1xuICAgICAgICBpZiAoZGlyIDwgMCA/IHByZXZlbnRDdXJzb3JMZWZ0IDogcHJldmVudEN1cnNvclJpZ2h0KVxuICAgICAgICAgIHsgZmFyID0gbW92ZVBvcyhkb2MsIGZhciwgZGlyLCBmYXIubGluZSA9PSBwb3MubGluZSA/IGxpbmUgOiBudWxsKTsgfVxuICAgICAgICByZXR1cm4gZmFyID8gc2tpcEF0b21pY0lubmVyKGRvYywgZmFyLCBwb3MsIGRpciwgbWF5Q2xlYXIpIDogbnVsbFxuICAgICAgfVxuICAgIH0gfVxuICAgIHJldHVybiBwb3NcbiAgfVxuXG4gIC8vIEVuc3VyZSBhIGdpdmVuIHBvc2l0aW9uIGlzIG5vdCBpbnNpZGUgYW4gYXRvbWljIHJhbmdlLlxuICBmdW5jdGlvbiBza2lwQXRvbWljKGRvYywgcG9zLCBvbGRQb3MsIGJpYXMsIG1heUNsZWFyKSB7XG4gICAgdmFyIGRpciA9IGJpYXMgfHwgMTtcbiAgICB2YXIgZm91bmQgPSBza2lwQXRvbWljSW5uZXIoZG9jLCBwb3MsIG9sZFBvcywgZGlyLCBtYXlDbGVhcikgfHxcbiAgICAgICAgKCFtYXlDbGVhciAmJiBza2lwQXRvbWljSW5uZXIoZG9jLCBwb3MsIG9sZFBvcywgZGlyLCB0cnVlKSkgfHxcbiAgICAgICAgc2tpcEF0b21pY0lubmVyKGRvYywgcG9zLCBvbGRQb3MsIC1kaXIsIG1heUNsZWFyKSB8fFxuICAgICAgICAoIW1heUNsZWFyICYmIHNraXBBdG9taWNJbm5lcihkb2MsIHBvcywgb2xkUG9zLCAtZGlyLCB0cnVlKSk7XG4gICAgaWYgKCFmb3VuZCkge1xuICAgICAgZG9jLmNhbnRFZGl0ID0gdHJ1ZTtcbiAgICAgIHJldHVybiBQb3MoZG9jLmZpcnN0LCAwKVxuICAgIH1cbiAgICByZXR1cm4gZm91bmRcbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmVQb3MoZG9jLCBwb3MsIGRpciwgbGluZSkge1xuICAgIGlmIChkaXIgPCAwICYmIHBvcy5jaCA9PSAwKSB7XG4gICAgICBpZiAocG9zLmxpbmUgPiBkb2MuZmlyc3QpIHsgcmV0dXJuIGNsaXBQb3MoZG9jLCBQb3MocG9zLmxpbmUgLSAxKSkgfVxuICAgICAgZWxzZSB7IHJldHVybiBudWxsIH1cbiAgICB9IGVsc2UgaWYgKGRpciA+IDAgJiYgcG9zLmNoID09IChsaW5lIHx8IGdldExpbmUoZG9jLCBwb3MubGluZSkpLnRleHQubGVuZ3RoKSB7XG4gICAgICBpZiAocG9zLmxpbmUgPCBkb2MuZmlyc3QgKyBkb2Muc2l6ZSAtIDEpIHsgcmV0dXJuIFBvcyhwb3MubGluZSArIDEsIDApIH1cbiAgICAgIGVsc2UgeyByZXR1cm4gbnVsbCB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgUG9zKHBvcy5saW5lLCBwb3MuY2ggKyBkaXIpXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2VsZWN0QWxsKGNtKSB7XG4gICAgY20uc2V0U2VsZWN0aW9uKFBvcyhjbS5maXJzdExpbmUoKSwgMCksIFBvcyhjbS5sYXN0TGluZSgpKSwgc2VsX2RvbnRTY3JvbGwpO1xuICB9XG5cbiAgLy8gVVBEQVRJTkdcblxuICAvLyBBbGxvdyBcImJlZm9yZUNoYW5nZVwiIGV2ZW50IGhhbmRsZXJzIHRvIGluZmx1ZW5jZSBhIGNoYW5nZVxuICBmdW5jdGlvbiBmaWx0ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UsIHVwZGF0ZSkge1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjYW5jZWxlZDogZmFsc2UsXG4gICAgICBmcm9tOiBjaGFuZ2UuZnJvbSxcbiAgICAgIHRvOiBjaGFuZ2UudG8sXG4gICAgICB0ZXh0OiBjaGFuZ2UudGV4dCxcbiAgICAgIG9yaWdpbjogY2hhbmdlLm9yaWdpbixcbiAgICAgIGNhbmNlbDogZnVuY3Rpb24gKCkgeyByZXR1cm4gb2JqLmNhbmNlbGVkID0gdHJ1ZTsgfVxuICAgIH07XG4gICAgaWYgKHVwZGF0ZSkgeyBvYmoudXBkYXRlID0gZnVuY3Rpb24gKGZyb20sIHRvLCB0ZXh0LCBvcmlnaW4pIHtcbiAgICAgIGlmIChmcm9tKSB7IG9iai5mcm9tID0gY2xpcFBvcyhkb2MsIGZyb20pOyB9XG4gICAgICBpZiAodG8pIHsgb2JqLnRvID0gY2xpcFBvcyhkb2MsIHRvKTsgfVxuICAgICAgaWYgKHRleHQpIHsgb2JqLnRleHQgPSB0ZXh0OyB9XG4gICAgICBpZiAob3JpZ2luICE9PSB1bmRlZmluZWQpIHsgb2JqLm9yaWdpbiA9IG9yaWdpbjsgfVxuICAgIH07IH1cbiAgICBzaWduYWwoZG9jLCBcImJlZm9yZUNoYW5nZVwiLCBkb2MsIG9iaik7XG4gICAgaWYgKGRvYy5jbSkgeyBzaWduYWwoZG9jLmNtLCBcImJlZm9yZUNoYW5nZVwiLCBkb2MuY20sIG9iaik7IH1cblxuICAgIGlmIChvYmouY2FuY2VsZWQpIHtcbiAgICAgIGlmIChkb2MuY20pIHsgZG9jLmNtLmN1ck9wLnVwZGF0ZUlucHV0ID0gMjsgfVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgcmV0dXJuIHtmcm9tOiBvYmouZnJvbSwgdG86IG9iai50bywgdGV4dDogb2JqLnRleHQsIG9yaWdpbjogb2JqLm9yaWdpbn1cbiAgfVxuXG4gIC8vIEFwcGx5IGEgY2hhbmdlIHRvIGEgZG9jdW1lbnQsIGFuZCBhZGQgaXQgdG8gdGhlIGRvY3VtZW50J3NcbiAgLy8gaGlzdG9yeSwgYW5kIHByb3BhZ2F0aW5nIGl0IHRvIGFsbCBsaW5rZWQgZG9jdW1lbnRzLlxuICBmdW5jdGlvbiBtYWtlQ2hhbmdlKGRvYywgY2hhbmdlLCBpZ25vcmVSZWFkT25seSkge1xuICAgIGlmIChkb2MuY20pIHtcbiAgICAgIGlmICghZG9jLmNtLmN1ck9wKSB7IHJldHVybiBvcGVyYXRpb24oZG9jLmNtLCBtYWtlQ2hhbmdlKShkb2MsIGNoYW5nZSwgaWdub3JlUmVhZE9ubHkpIH1cbiAgICAgIGlmIChkb2MuY20uc3RhdGUuc3VwcHJlc3NFZGl0cykgeyByZXR1cm4gfVxuICAgIH1cblxuICAgIGlmIChoYXNIYW5kbGVyKGRvYywgXCJiZWZvcmVDaGFuZ2VcIikgfHwgZG9jLmNtICYmIGhhc0hhbmRsZXIoZG9jLmNtLCBcImJlZm9yZUNoYW5nZVwiKSkge1xuICAgICAgY2hhbmdlID0gZmlsdGVyQ2hhbmdlKGRvYywgY2hhbmdlLCB0cnVlKTtcbiAgICAgIGlmICghY2hhbmdlKSB7IHJldHVybiB9XG4gICAgfVxuXG4gICAgLy8gUG9zc2libHkgc3BsaXQgb3Igc3VwcHJlc3MgdGhlIHVwZGF0ZSBiYXNlZCBvbiB0aGUgcHJlc2VuY2VcbiAgICAvLyBvZiByZWFkLW9ubHkgc3BhbnMgaW4gaXRzIHJhbmdlLlxuICAgIHZhciBzcGxpdCA9IHNhd1JlYWRPbmx5U3BhbnMgJiYgIWlnbm9yZVJlYWRPbmx5ICYmIHJlbW92ZVJlYWRPbmx5UmFuZ2VzKGRvYywgY2hhbmdlLmZyb20sIGNoYW5nZS50byk7XG4gICAgaWYgKHNwbGl0KSB7XG4gICAgICBmb3IgKHZhciBpID0gc3BsaXQubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpXG4gICAgICAgIHsgbWFrZUNoYW5nZUlubmVyKGRvYywge2Zyb206IHNwbGl0W2ldLmZyb20sIHRvOiBzcGxpdFtpXS50bywgdGV4dDogaSA/IFtcIlwiXSA6IGNoYW5nZS50ZXh0LCBvcmlnaW46IGNoYW5nZS5vcmlnaW59KTsgfVxuICAgIH0gZWxzZSB7XG4gICAgICBtYWtlQ2hhbmdlSW5uZXIoZG9jLCBjaGFuZ2UpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1ha2VDaGFuZ2VJbm5lcihkb2MsIGNoYW5nZSkge1xuICAgIGlmIChjaGFuZ2UudGV4dC5sZW5ndGggPT0gMSAmJiBjaGFuZ2UudGV4dFswXSA9PSBcIlwiICYmIGNtcChjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKSA9PSAwKSB7IHJldHVybiB9XG4gICAgdmFyIHNlbEFmdGVyID0gY29tcHV0ZVNlbEFmdGVyQ2hhbmdlKGRvYywgY2hhbmdlKTtcbiAgICBhZGRDaGFuZ2VUb0hpc3RvcnkoZG9jLCBjaGFuZ2UsIHNlbEFmdGVyLCBkb2MuY20gPyBkb2MuY20uY3VyT3AuaWQgOiBOYU4pO1xuXG4gICAgbWFrZUNoYW5nZVNpbmdsZURvYyhkb2MsIGNoYW5nZSwgc2VsQWZ0ZXIsIHN0cmV0Y2hTcGFuc092ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpKTtcbiAgICB2YXIgcmViYXNlZCA9IFtdO1xuXG4gICAgbGlua2VkRG9jcyhkb2MsIGZ1bmN0aW9uIChkb2MsIHNoYXJlZEhpc3QpIHtcbiAgICAgIGlmICghc2hhcmVkSGlzdCAmJiBpbmRleE9mKHJlYmFzZWQsIGRvYy5oaXN0b3J5KSA9PSAtMSkge1xuICAgICAgICByZWJhc2VIaXN0KGRvYy5oaXN0b3J5LCBjaGFuZ2UpO1xuICAgICAgICByZWJhc2VkLnB1c2goZG9jLmhpc3RvcnkpO1xuICAgICAgfVxuICAgICAgbWFrZUNoYW5nZVNpbmdsZURvYyhkb2MsIGNoYW5nZSwgbnVsbCwgc3RyZXRjaFNwYW5zT3ZlckNoYW5nZShkb2MsIGNoYW5nZSkpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gUmV2ZXJ0IGEgY2hhbmdlIHN0b3JlZCBpbiBhIGRvY3VtZW50J3MgaGlzdG9yeS5cbiAgZnVuY3Rpb24gbWFrZUNoYW5nZUZyb21IaXN0b3J5KGRvYywgdHlwZSwgYWxsb3dTZWxlY3Rpb25Pbmx5KSB7XG4gICAgdmFyIHN1cHByZXNzID0gZG9jLmNtICYmIGRvYy5jbS5zdGF0ZS5zdXBwcmVzc0VkaXRzO1xuICAgIGlmIChzdXBwcmVzcyAmJiAhYWxsb3dTZWxlY3Rpb25Pbmx5KSB7IHJldHVybiB9XG5cbiAgICB2YXIgaGlzdCA9IGRvYy5oaXN0b3J5LCBldmVudCwgc2VsQWZ0ZXIgPSBkb2Muc2VsO1xuICAgIHZhciBzb3VyY2UgPSB0eXBlID09IFwidW5kb1wiID8gaGlzdC5kb25lIDogaGlzdC51bmRvbmUsIGRlc3QgPSB0eXBlID09IFwidW5kb1wiID8gaGlzdC51bmRvbmUgOiBoaXN0LmRvbmU7XG5cbiAgICAvLyBWZXJpZnkgdGhhdCB0aGVyZSBpcyBhIHVzZWFibGUgZXZlbnQgKHNvIHRoYXQgY3RybC16IHdvbid0XG4gICAgLy8gbmVlZGxlc3NseSBjbGVhciBzZWxlY3Rpb24gZXZlbnRzKVxuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKDsgaSA8IHNvdXJjZS5sZW5ndGg7IGkrKykge1xuICAgICAgZXZlbnQgPSBzb3VyY2VbaV07XG4gICAgICBpZiAoYWxsb3dTZWxlY3Rpb25Pbmx5ID8gZXZlbnQucmFuZ2VzICYmICFldmVudC5lcXVhbHMoZG9jLnNlbCkgOiAhZXZlbnQucmFuZ2VzKVxuICAgICAgICB7IGJyZWFrIH1cbiAgICB9XG4gICAgaWYgKGkgPT0gc291cmNlLmxlbmd0aCkgeyByZXR1cm4gfVxuICAgIGhpc3QubGFzdE9yaWdpbiA9IGhpc3QubGFzdFNlbE9yaWdpbiA9IG51bGw7XG5cbiAgICBmb3IgKDs7KSB7XG4gICAgICBldmVudCA9IHNvdXJjZS5wb3AoKTtcbiAgICAgIGlmIChldmVudC5yYW5nZXMpIHtcbiAgICAgICAgcHVzaFNlbGVjdGlvblRvSGlzdG9yeShldmVudCwgZGVzdCk7XG4gICAgICAgIGlmIChhbGxvd1NlbGVjdGlvbk9ubHkgJiYgIWV2ZW50LmVxdWFscyhkb2Muc2VsKSkge1xuICAgICAgICAgIHNldFNlbGVjdGlvbihkb2MsIGV2ZW50LCB7Y2xlYXJSZWRvOiBmYWxzZX0pO1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHNlbEFmdGVyID0gZXZlbnQ7XG4gICAgICB9IGVsc2UgaWYgKHN1cHByZXNzKSB7XG4gICAgICAgIHNvdXJjZS5wdXNoKGV2ZW50KTtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9IGVsc2UgeyBicmVhayB9XG4gICAgfVxuXG4gICAgLy8gQnVpbGQgdXAgYSByZXZlcnNlIGNoYW5nZSBvYmplY3QgdG8gYWRkIHRvIHRoZSBvcHBvc2l0ZSBoaXN0b3J5XG4gICAgLy8gc3RhY2sgKHJlZG8gd2hlbiB1bmRvaW5nLCBhbmQgdmljZSB2ZXJzYSkuXG4gICAgdmFyIGFudGlDaGFuZ2VzID0gW107XG4gICAgcHVzaFNlbGVjdGlvblRvSGlzdG9yeShzZWxBZnRlciwgZGVzdCk7XG4gICAgZGVzdC5wdXNoKHtjaGFuZ2VzOiBhbnRpQ2hhbmdlcywgZ2VuZXJhdGlvbjogaGlzdC5nZW5lcmF0aW9ufSk7XG4gICAgaGlzdC5nZW5lcmF0aW9uID0gZXZlbnQuZ2VuZXJhdGlvbiB8fCArK2hpc3QubWF4R2VuZXJhdGlvbjtcblxuICAgIHZhciBmaWx0ZXIgPSBoYXNIYW5kbGVyKGRvYywgXCJiZWZvcmVDaGFuZ2VcIikgfHwgZG9jLmNtICYmIGhhc0hhbmRsZXIoZG9jLmNtLCBcImJlZm9yZUNoYW5nZVwiKTtcblxuICAgIHZhciBsb29wID0gZnVuY3Rpb24gKCBpICkge1xuICAgICAgdmFyIGNoYW5nZSA9IGV2ZW50LmNoYW5nZXNbaV07XG4gICAgICBjaGFuZ2Uub3JpZ2luID0gdHlwZTtcbiAgICAgIGlmIChmaWx0ZXIgJiYgIWZpbHRlckNoYW5nZShkb2MsIGNoYW5nZSwgZmFsc2UpKSB7XG4gICAgICAgIHNvdXJjZS5sZW5ndGggPSAwO1xuICAgICAgICByZXR1cm4ge31cbiAgICAgIH1cblxuICAgICAgYW50aUNoYW5nZXMucHVzaChoaXN0b3J5Q2hhbmdlRnJvbUNoYW5nZShkb2MsIGNoYW5nZSkpO1xuXG4gICAgICB2YXIgYWZ0ZXIgPSBpID8gY29tcHV0ZVNlbEFmdGVyQ2hhbmdlKGRvYywgY2hhbmdlKSA6IGxzdChzb3VyY2UpO1xuICAgICAgbWFrZUNoYW5nZVNpbmdsZURvYyhkb2MsIGNoYW5nZSwgYWZ0ZXIsIG1lcmdlT2xkU3BhbnMoZG9jLCBjaGFuZ2UpKTtcbiAgICAgIGlmICghaSAmJiBkb2MuY20pIHsgZG9jLmNtLnNjcm9sbEludG9WaWV3KHtmcm9tOiBjaGFuZ2UuZnJvbSwgdG86IGNoYW5nZUVuZChjaGFuZ2UpfSk7IH1cbiAgICAgIHZhciByZWJhc2VkID0gW107XG5cbiAgICAgIC8vIFByb3BhZ2F0ZSB0byB0aGUgbGlua2VkIGRvY3VtZW50c1xuICAgICAgbGlua2VkRG9jcyhkb2MsIGZ1bmN0aW9uIChkb2MsIHNoYXJlZEhpc3QpIHtcbiAgICAgICAgaWYgKCFzaGFyZWRIaXN0ICYmIGluZGV4T2YocmViYXNlZCwgZG9jLmhpc3RvcnkpID09IC0xKSB7XG4gICAgICAgICAgcmViYXNlSGlzdChkb2MuaGlzdG9yeSwgY2hhbmdlKTtcbiAgICAgICAgICByZWJhc2VkLnB1c2goZG9jLmhpc3RvcnkpO1xuICAgICAgICB9XG4gICAgICAgIG1ha2VDaGFuZ2VTaW5nbGVEb2MoZG9jLCBjaGFuZ2UsIG51bGwsIG1lcmdlT2xkU3BhbnMoZG9jLCBjaGFuZ2UpKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmb3IgKHZhciBpJDEgPSBldmVudC5jaGFuZ2VzLmxlbmd0aCAtIDE7IGkkMSA+PSAwOyAtLWkkMSkge1xuICAgICAgdmFyIHJldHVybmVkID0gbG9vcCggaSQxICk7XG5cbiAgICAgIGlmICggcmV0dXJuZWQgKSByZXR1cm4gcmV0dXJuZWQudjtcbiAgICB9XG4gIH1cblxuICAvLyBTdWItdmlld3MgbmVlZCB0aGVpciBsaW5lIG51bWJlcnMgc2hpZnRlZCB3aGVuIHRleHQgaXMgYWRkZWRcbiAgLy8gYWJvdmUgb3IgYmVsb3cgdGhlbSBpbiB0aGUgcGFyZW50IGRvY3VtZW50LlxuICBmdW5jdGlvbiBzaGlmdERvYyhkb2MsIGRpc3RhbmNlKSB7XG4gICAgaWYgKGRpc3RhbmNlID09IDApIHsgcmV0dXJuIH1cbiAgICBkb2MuZmlyc3QgKz0gZGlzdGFuY2U7XG4gICAgZG9jLnNlbCA9IG5ldyBTZWxlY3Rpb24obWFwKGRvYy5zZWwucmFuZ2VzLCBmdW5jdGlvbiAocmFuZ2UpIHsgcmV0dXJuIG5ldyBSYW5nZShcbiAgICAgIFBvcyhyYW5nZS5hbmNob3IubGluZSArIGRpc3RhbmNlLCByYW5nZS5hbmNob3IuY2gpLFxuICAgICAgUG9zKHJhbmdlLmhlYWQubGluZSArIGRpc3RhbmNlLCByYW5nZS5oZWFkLmNoKVxuICAgICk7IH0pLCBkb2Muc2VsLnByaW1JbmRleCk7XG4gICAgaWYgKGRvYy5jbSkge1xuICAgICAgcmVnQ2hhbmdlKGRvYy5jbSwgZG9jLmZpcnN0LCBkb2MuZmlyc3QgLSBkaXN0YW5jZSwgZGlzdGFuY2UpO1xuICAgICAgZm9yICh2YXIgZCA9IGRvYy5jbS5kaXNwbGF5LCBsID0gZC52aWV3RnJvbTsgbCA8IGQudmlld1RvOyBsKyspXG4gICAgICAgIHsgcmVnTGluZUNoYW5nZShkb2MuY20sIGwsIFwiZ3V0dGVyXCIpOyB9XG4gICAgfVxuICB9XG5cbiAgLy8gTW9yZSBsb3dlci1sZXZlbCBjaGFuZ2UgZnVuY3Rpb24sIGhhbmRsaW5nIG9ubHkgYSBzaW5nbGUgZG9jdW1lbnRcbiAgLy8gKG5vdCBsaW5rZWQgb25lcykuXG4gIGZ1bmN0aW9uIG1ha2VDaGFuZ2VTaW5nbGVEb2MoZG9jLCBjaGFuZ2UsIHNlbEFmdGVyLCBzcGFucykge1xuICAgIGlmIChkb2MuY20gJiYgIWRvYy5jbS5jdXJPcClcbiAgICAgIHsgcmV0dXJuIG9wZXJhdGlvbihkb2MuY20sIG1ha2VDaGFuZ2VTaW5nbGVEb2MpKGRvYywgY2hhbmdlLCBzZWxBZnRlciwgc3BhbnMpIH1cblxuICAgIGlmIChjaGFuZ2UudG8ubGluZSA8IGRvYy5maXJzdCkge1xuICAgICAgc2hpZnREb2MoZG9jLCBjaGFuZ2UudGV4dC5sZW5ndGggLSAxIC0gKGNoYW5nZS50by5saW5lIC0gY2hhbmdlLmZyb20ubGluZSkpO1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmIChjaGFuZ2UuZnJvbS5saW5lID4gZG9jLmxhc3RMaW5lKCkpIHsgcmV0dXJuIH1cblxuICAgIC8vIENsaXAgdGhlIGNoYW5nZSB0byB0aGUgc2l6ZSBvZiB0aGlzIGRvY1xuICAgIGlmIChjaGFuZ2UuZnJvbS5saW5lIDwgZG9jLmZpcnN0KSB7XG4gICAgICB2YXIgc2hpZnQgPSBjaGFuZ2UudGV4dC5sZW5ndGggLSAxIC0gKGRvYy5maXJzdCAtIGNoYW5nZS5mcm9tLmxpbmUpO1xuICAgICAgc2hpZnREb2MoZG9jLCBzaGlmdCk7XG4gICAgICBjaGFuZ2UgPSB7ZnJvbTogUG9zKGRvYy5maXJzdCwgMCksIHRvOiBQb3MoY2hhbmdlLnRvLmxpbmUgKyBzaGlmdCwgY2hhbmdlLnRvLmNoKSxcbiAgICAgICAgICAgICAgICB0ZXh0OiBbbHN0KGNoYW5nZS50ZXh0KV0sIG9yaWdpbjogY2hhbmdlLm9yaWdpbn07XG4gICAgfVxuICAgIHZhciBsYXN0ID0gZG9jLmxhc3RMaW5lKCk7XG4gICAgaWYgKGNoYW5nZS50by5saW5lID4gbGFzdCkge1xuICAgICAgY2hhbmdlID0ge2Zyb206IGNoYW5nZS5mcm9tLCB0bzogUG9zKGxhc3QsIGdldExpbmUoZG9jLCBsYXN0KS50ZXh0Lmxlbmd0aCksXG4gICAgICAgICAgICAgICAgdGV4dDogW2NoYW5nZS50ZXh0WzBdXSwgb3JpZ2luOiBjaGFuZ2Uub3JpZ2lufTtcbiAgICB9XG5cbiAgICBjaGFuZ2UucmVtb3ZlZCA9IGdldEJldHdlZW4oZG9jLCBjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKTtcblxuICAgIGlmICghc2VsQWZ0ZXIpIHsgc2VsQWZ0ZXIgPSBjb21wdXRlU2VsQWZ0ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpOyB9XG4gICAgaWYgKGRvYy5jbSkgeyBtYWtlQ2hhbmdlU2luZ2xlRG9jSW5FZGl0b3IoZG9jLmNtLCBjaGFuZ2UsIHNwYW5zKTsgfVxuICAgIGVsc2UgeyB1cGRhdGVEb2MoZG9jLCBjaGFuZ2UsIHNwYW5zKTsgfVxuICAgIHNldFNlbGVjdGlvbk5vVW5kbyhkb2MsIHNlbEFmdGVyLCBzZWxfZG9udFNjcm9sbCk7XG5cbiAgICBpZiAoZG9jLmNhbnRFZGl0ICYmIHNraXBBdG9taWMoZG9jLCBQb3MoZG9jLmZpcnN0TGluZSgpLCAwKSkpXG4gICAgICB7IGRvYy5jYW50RWRpdCA9IGZhbHNlOyB9XG4gIH1cblxuICAvLyBIYW5kbGUgdGhlIGludGVyYWN0aW9uIG9mIGEgY2hhbmdlIHRvIGEgZG9jdW1lbnQgd2l0aCB0aGUgZWRpdG9yXG4gIC8vIHRoYXQgdGhpcyBkb2N1bWVudCBpcyBwYXJ0IG9mLlxuICBmdW5jdGlvbiBtYWtlQ2hhbmdlU2luZ2xlRG9jSW5FZGl0b3IoY20sIGNoYW5nZSwgc3BhbnMpIHtcbiAgICB2YXIgZG9jID0gY20uZG9jLCBkaXNwbGF5ID0gY20uZGlzcGxheSwgZnJvbSA9IGNoYW5nZS5mcm9tLCB0byA9IGNoYW5nZS50bztcblxuICAgIHZhciByZWNvbXB1dGVNYXhMZW5ndGggPSBmYWxzZSwgY2hlY2tXaWR0aFN0YXJ0ID0gZnJvbS5saW5lO1xuICAgIGlmICghY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIHtcbiAgICAgIGNoZWNrV2lkdGhTdGFydCA9IGxpbmVObyh2aXN1YWxMaW5lKGdldExpbmUoZG9jLCBmcm9tLmxpbmUpKSk7XG4gICAgICBkb2MuaXRlcihjaGVja1dpZHRoU3RhcnQsIHRvLmxpbmUgKyAxLCBmdW5jdGlvbiAobGluZSkge1xuICAgICAgICBpZiAobGluZSA9PSBkaXNwbGF5Lm1heExpbmUpIHtcbiAgICAgICAgICByZWNvbXB1dGVNYXhMZW5ndGggPSB0cnVlO1xuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChkb2Muc2VsLmNvbnRhaW5zKGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pID4gLTEpXG4gICAgICB7IHNpZ25hbEN1cnNvckFjdGl2aXR5KGNtKTsgfVxuXG4gICAgdXBkYXRlRG9jKGRvYywgY2hhbmdlLCBzcGFucywgZXN0aW1hdGVIZWlnaHQoY20pKTtcblxuICAgIGlmICghY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIHtcbiAgICAgIGRvYy5pdGVyKGNoZWNrV2lkdGhTdGFydCwgZnJvbS5saW5lICsgY2hhbmdlLnRleHQubGVuZ3RoLCBmdW5jdGlvbiAobGluZSkge1xuICAgICAgICB2YXIgbGVuID0gbGluZUxlbmd0aChsaW5lKTtcbiAgICAgICAgaWYgKGxlbiA+IGRpc3BsYXkubWF4TGluZUxlbmd0aCkge1xuICAgICAgICAgIGRpc3BsYXkubWF4TGluZSA9IGxpbmU7XG4gICAgICAgICAgZGlzcGxheS5tYXhMaW5lTGVuZ3RoID0gbGVuO1xuICAgICAgICAgIGRpc3BsYXkubWF4TGluZUNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgIHJlY29tcHV0ZU1heExlbmd0aCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChyZWNvbXB1dGVNYXhMZW5ndGgpIHsgY20uY3VyT3AudXBkYXRlTWF4TGluZSA9IHRydWU7IH1cbiAgICB9XG5cbiAgICByZXRyZWF0RnJvbnRpZXIoZG9jLCBmcm9tLmxpbmUpO1xuICAgIHN0YXJ0V29ya2VyKGNtLCA0MDApO1xuXG4gICAgdmFyIGxlbmRpZmYgPSBjaGFuZ2UudGV4dC5sZW5ndGggLSAodG8ubGluZSAtIGZyb20ubGluZSkgLSAxO1xuICAgIC8vIFJlbWVtYmVyIHRoYXQgdGhlc2UgbGluZXMgY2hhbmdlZCwgZm9yIHVwZGF0aW5nIHRoZSBkaXNwbGF5XG4gICAgaWYgKGNoYW5nZS5mdWxsKVxuICAgICAgeyByZWdDaGFuZ2UoY20pOyB9XG4gICAgZWxzZSBpZiAoZnJvbS5saW5lID09IHRvLmxpbmUgJiYgY2hhbmdlLnRleHQubGVuZ3RoID09IDEgJiYgIWlzV2hvbGVMaW5lVXBkYXRlKGNtLmRvYywgY2hhbmdlKSlcbiAgICAgIHsgcmVnTGluZUNoYW5nZShjbSwgZnJvbS5saW5lLCBcInRleHRcIik7IH1cbiAgICBlbHNlXG4gICAgICB7IHJlZ0NoYW5nZShjbSwgZnJvbS5saW5lLCB0by5saW5lICsgMSwgbGVuZGlmZik7IH1cblxuICAgIHZhciBjaGFuZ2VzSGFuZGxlciA9IGhhc0hhbmRsZXIoY20sIFwiY2hhbmdlc1wiKSwgY2hhbmdlSGFuZGxlciA9IGhhc0hhbmRsZXIoY20sIFwiY2hhbmdlXCIpO1xuICAgIGlmIChjaGFuZ2VIYW5kbGVyIHx8IGNoYW5nZXNIYW5kbGVyKSB7XG4gICAgICB2YXIgb2JqID0ge1xuICAgICAgICBmcm9tOiBmcm9tLCB0bzogdG8sXG4gICAgICAgIHRleHQ6IGNoYW5nZS50ZXh0LFxuICAgICAgICByZW1vdmVkOiBjaGFuZ2UucmVtb3ZlZCxcbiAgICAgICAgb3JpZ2luOiBjaGFuZ2Uub3JpZ2luXG4gICAgICB9O1xuICAgICAgaWYgKGNoYW5nZUhhbmRsZXIpIHsgc2lnbmFsTGF0ZXIoY20sIFwiY2hhbmdlXCIsIGNtLCBvYmopOyB9XG4gICAgICBpZiAoY2hhbmdlc0hhbmRsZXIpIHsgKGNtLmN1ck9wLmNoYW5nZU9ianMgfHwgKGNtLmN1ck9wLmNoYW5nZU9ianMgPSBbXSkpLnB1c2gob2JqKTsgfVxuICAgIH1cbiAgICBjbS5kaXNwbGF5LnNlbEZvckNvbnRleHRNZW51ID0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlcGxhY2VSYW5nZShkb2MsIGNvZGUsIGZyb20sIHRvLCBvcmlnaW4pIHtcbiAgICB2YXIgYXNzaWduO1xuXG4gICAgaWYgKCF0bykgeyB0byA9IGZyb207IH1cbiAgICBpZiAoY21wKHRvLCBmcm9tKSA8IDApIHsgKGFzc2lnbiA9IFt0bywgZnJvbV0sIGZyb20gPSBhc3NpZ25bMF0sIHRvID0gYXNzaWduWzFdKTsgfVxuICAgIGlmICh0eXBlb2YgY29kZSA9PSBcInN0cmluZ1wiKSB7IGNvZGUgPSBkb2Muc3BsaXRMaW5lcyhjb2RlKTsgfVxuICAgIG1ha2VDaGFuZ2UoZG9jLCB7ZnJvbTogZnJvbSwgdG86IHRvLCB0ZXh0OiBjb2RlLCBvcmlnaW46IG9yaWdpbn0pO1xuICB9XG5cbiAgLy8gUmViYXNpbmcvcmVzZXR0aW5nIGhpc3RvcnkgdG8gZGVhbCB3aXRoIGV4dGVybmFsbHktc291cmNlZCBjaGFuZ2VzXG5cbiAgZnVuY3Rpb24gcmViYXNlSGlzdFNlbFNpbmdsZShwb3MsIGZyb20sIHRvLCBkaWZmKSB7XG4gICAgaWYgKHRvIDwgcG9zLmxpbmUpIHtcbiAgICAgIHBvcy5saW5lICs9IGRpZmY7XG4gICAgfSBlbHNlIGlmIChmcm9tIDwgcG9zLmxpbmUpIHtcbiAgICAgIHBvcy5saW5lID0gZnJvbTtcbiAgICAgIHBvcy5jaCA9IDA7XG4gICAgfVxuICB9XG5cbiAgLy8gVHJpZXMgdG8gcmViYXNlIGFuIGFycmF5IG9mIGhpc3RvcnkgZXZlbnRzIGdpdmVuIGEgY2hhbmdlIGluIHRoZVxuICAvLyBkb2N1bWVudC4gSWYgdGhlIGNoYW5nZSB0b3VjaGVzIHRoZSBzYW1lIGxpbmVzIGFzIHRoZSBldmVudCwgdGhlXG4gIC8vIGV2ZW50LCBhbmQgZXZlcnl0aGluZyAnYmVoaW5kJyBpdCwgaXMgZGlzY2FyZGVkLiBJZiB0aGUgY2hhbmdlIGlzXG4gIC8vIGJlZm9yZSB0aGUgZXZlbnQsIHRoZSBldmVudCdzIHBvc2l0aW9ucyBhcmUgdXBkYXRlZC4gVXNlcyBhXG4gIC8vIGNvcHktb24td3JpdGUgc2NoZW1lIGZvciB0aGUgcG9zaXRpb25zLCB0byBhdm9pZCBoYXZpbmcgdG9cbiAgLy8gcmVhbGxvY2F0ZSB0aGVtIGFsbCBvbiBldmVyeSByZWJhc2UsIGJ1dCBhbHNvIGF2b2lkIHByb2JsZW1zIHdpdGhcbiAgLy8gc2hhcmVkIHBvc2l0aW9uIG9iamVjdHMgYmVpbmcgdW5zYWZlbHkgdXBkYXRlZC5cbiAgZnVuY3Rpb24gcmViYXNlSGlzdEFycmF5KGFycmF5LCBmcm9tLCB0bywgZGlmZikge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBzdWIgPSBhcnJheVtpXSwgb2sgPSB0cnVlO1xuICAgICAgaWYgKHN1Yi5yYW5nZXMpIHtcbiAgICAgICAgaWYgKCFzdWIuY29waWVkKSB7IHN1YiA9IGFycmF5W2ldID0gc3ViLmRlZXBDb3B5KCk7IHN1Yi5jb3BpZWQgPSB0cnVlOyB9XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3ViLnJhbmdlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgIHJlYmFzZUhpc3RTZWxTaW5nbGUoc3ViLnJhbmdlc1tqXS5hbmNob3IsIGZyb20sIHRvLCBkaWZmKTtcbiAgICAgICAgICByZWJhc2VIaXN0U2VsU2luZ2xlKHN1Yi5yYW5nZXNbal0uaGVhZCwgZnJvbSwgdG8sIGRpZmYpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBmb3IgKHZhciBqJDEgPSAwOyBqJDEgPCBzdWIuY2hhbmdlcy5sZW5ndGg7ICsraiQxKSB7XG4gICAgICAgIHZhciBjdXIgPSBzdWIuY2hhbmdlc1tqJDFdO1xuICAgICAgICBpZiAodG8gPCBjdXIuZnJvbS5saW5lKSB7XG4gICAgICAgICAgY3VyLmZyb20gPSBQb3MoY3VyLmZyb20ubGluZSArIGRpZmYsIGN1ci5mcm9tLmNoKTtcbiAgICAgICAgICBjdXIudG8gPSBQb3MoY3VyLnRvLmxpbmUgKyBkaWZmLCBjdXIudG8uY2gpO1xuICAgICAgICB9IGVsc2UgaWYgKGZyb20gPD0gY3VyLnRvLmxpbmUpIHtcbiAgICAgICAgICBvayA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghb2spIHtcbiAgICAgICAgYXJyYXkuc3BsaWNlKDAsIGkgKyAxKTtcbiAgICAgICAgaSA9IDA7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmViYXNlSGlzdChoaXN0LCBjaGFuZ2UpIHtcbiAgICB2YXIgZnJvbSA9IGNoYW5nZS5mcm9tLmxpbmUsIHRvID0gY2hhbmdlLnRvLmxpbmUsIGRpZmYgPSBjaGFuZ2UudGV4dC5sZW5ndGggLSAodG8gLSBmcm9tKSAtIDE7XG4gICAgcmViYXNlSGlzdEFycmF5KGhpc3QuZG9uZSwgZnJvbSwgdG8sIGRpZmYpO1xuICAgIHJlYmFzZUhpc3RBcnJheShoaXN0LnVuZG9uZSwgZnJvbSwgdG8sIGRpZmYpO1xuICB9XG5cbiAgLy8gVXRpbGl0eSBmb3IgYXBwbHlpbmcgYSBjaGFuZ2UgdG8gYSBsaW5lIGJ5IGhhbmRsZSBvciBudW1iZXIsXG4gIC8vIHJldHVybmluZyB0aGUgbnVtYmVyIGFuZCBvcHRpb25hbGx5IHJlZ2lzdGVyaW5nIHRoZSBsaW5lIGFzXG4gIC8vIGNoYW5nZWQuXG4gIGZ1bmN0aW9uIGNoYW5nZUxpbmUoZG9jLCBoYW5kbGUsIGNoYW5nZVR5cGUsIG9wKSB7XG4gICAgdmFyIG5vID0gaGFuZGxlLCBsaW5lID0gaGFuZGxlO1xuICAgIGlmICh0eXBlb2YgaGFuZGxlID09IFwibnVtYmVyXCIpIHsgbGluZSA9IGdldExpbmUoZG9jLCBjbGlwTGluZShkb2MsIGhhbmRsZSkpOyB9XG4gICAgZWxzZSB7IG5vID0gbGluZU5vKGhhbmRsZSk7IH1cbiAgICBpZiAobm8gPT0gbnVsbCkgeyByZXR1cm4gbnVsbCB9XG4gICAgaWYgKG9wKGxpbmUsIG5vKSAmJiBkb2MuY20pIHsgcmVnTGluZUNoYW5nZShkb2MuY20sIG5vLCBjaGFuZ2VUeXBlKTsgfVxuICAgIHJldHVybiBsaW5lXG4gIH1cblxuICAvLyBUaGUgZG9jdW1lbnQgaXMgcmVwcmVzZW50ZWQgYXMgYSBCVHJlZSBjb25zaXN0aW5nIG9mIGxlYXZlcywgd2l0aFxuICAvLyBjaHVuayBvZiBsaW5lcyBpbiB0aGVtLCBhbmQgYnJhbmNoZXMsIHdpdGggdXAgdG8gdGVuIGxlYXZlcyBvclxuICAvLyBvdGhlciBicmFuY2ggbm9kZXMgYmVsb3cgdGhlbS4gVGhlIHRvcCBub2RlIGlzIGFsd2F5cyBhIGJyYW5jaFxuICAvLyBub2RlLCBhbmQgaXMgdGhlIGRvY3VtZW50IG9iamVjdCBpdHNlbGYgKG1lYW5pbmcgaXQgaGFzXG4gIC8vIGFkZGl0aW9uYWwgbWV0aG9kcyBhbmQgcHJvcGVydGllcykuXG4gIC8vXG4gIC8vIEFsbCBub2RlcyBoYXZlIHBhcmVudCBsaW5rcy4gVGhlIHRyZWUgaXMgdXNlZCBib3RoIHRvIGdvIGZyb21cbiAgLy8gbGluZSBudW1iZXJzIHRvIGxpbmUgb2JqZWN0cywgYW5kIHRvIGdvIGZyb20gb2JqZWN0cyB0byBudW1iZXJzLlxuICAvLyBJdCBhbHNvIGluZGV4ZXMgYnkgaGVpZ2h0LCBhbmQgaXMgdXNlZCB0byBjb252ZXJ0IGJldHdlZW4gaGVpZ2h0XG4gIC8vIGFuZCBsaW5lIG9iamVjdCwgYW5kIHRvIGZpbmQgdGhlIHRvdGFsIGhlaWdodCBvZiB0aGUgZG9jdW1lbnQuXG4gIC8vXG4gIC8vIFNlZSBhbHNvIGh0dHA6Ly9tYXJpam5oYXZlcmJla2UubmwvYmxvZy9jb2RlbWlycm9yLWxpbmUtdHJlZS5odG1sXG5cbiAgZnVuY3Rpb24gTGVhZkNodW5rKGxpbmVzKSB7XG4gICAgdGhpcy5saW5lcyA9IGxpbmVzO1xuICAgIHRoaXMucGFyZW50ID0gbnVsbDtcbiAgICB2YXIgaGVpZ2h0ID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICBsaW5lc1tpXS5wYXJlbnQgPSB0aGlzO1xuICAgICAgaGVpZ2h0ICs9IGxpbmVzW2ldLmhlaWdodDtcbiAgICB9XG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gIH1cblxuICBMZWFmQ2h1bmsucHJvdG90eXBlID0ge1xuICAgIGNodW5rU2l6ZTogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmxpbmVzLmxlbmd0aCB9LFxuXG4gICAgLy8gUmVtb3ZlIHRoZSBuIGxpbmVzIGF0IG9mZnNldCAnYXQnLlxuICAgIHJlbW92ZUlubmVyOiBmdW5jdGlvbihhdCwgbikge1xuICAgICAgZm9yICh2YXIgaSA9IGF0LCBlID0gYXQgKyBuOyBpIDwgZTsgKytpKSB7XG4gICAgICAgIHZhciBsaW5lID0gdGhpcy5saW5lc1tpXTtcbiAgICAgICAgdGhpcy5oZWlnaHQgLT0gbGluZS5oZWlnaHQ7XG4gICAgICAgIGNsZWFuVXBMaW5lKGxpbmUpO1xuICAgICAgICBzaWduYWxMYXRlcihsaW5lLCBcImRlbGV0ZVwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMubGluZXMuc3BsaWNlKGF0LCBuKTtcbiAgICB9LFxuXG4gICAgLy8gSGVscGVyIHVzZWQgdG8gY29sbGFwc2UgYSBzbWFsbCBicmFuY2ggaW50byBhIHNpbmdsZSBsZWFmLlxuICAgIGNvbGxhcHNlOiBmdW5jdGlvbihsaW5lcykge1xuICAgICAgbGluZXMucHVzaC5hcHBseShsaW5lcywgdGhpcy5saW5lcyk7XG4gICAgfSxcblxuICAgIC8vIEluc2VydCB0aGUgZ2l2ZW4gYXJyYXkgb2YgbGluZXMgYXQgb2Zmc2V0ICdhdCcsIGNvdW50IHRoZW0gYXNcbiAgICAvLyBoYXZpbmcgdGhlIGdpdmVuIGhlaWdodC5cbiAgICBpbnNlcnRJbm5lcjogZnVuY3Rpb24oYXQsIGxpbmVzLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuaGVpZ2h0ICs9IGhlaWdodDtcbiAgICAgIHRoaXMubGluZXMgPSB0aGlzLmxpbmVzLnNsaWNlKDAsIGF0KS5jb25jYXQobGluZXMpLmNvbmNhdCh0aGlzLmxpbmVzLnNsaWNlKGF0KSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgKytpKSB7IGxpbmVzW2ldLnBhcmVudCA9IHRoaXM7IH1cbiAgICB9LFxuXG4gICAgLy8gVXNlZCB0byBpdGVyYXRlIG92ZXIgYSBwYXJ0IG9mIHRoZSB0cmVlLlxuICAgIGl0ZXJOOiBmdW5jdGlvbihhdCwgbiwgb3ApIHtcbiAgICAgIGZvciAodmFyIGUgPSBhdCArIG47IGF0IDwgZTsgKythdClcbiAgICAgICAgeyBpZiAob3AodGhpcy5saW5lc1thdF0pKSB7IHJldHVybiB0cnVlIH0gfVxuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBCcmFuY2hDaHVuayhjaGlsZHJlbikge1xuICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICB2YXIgc2l6ZSA9IDAsIGhlaWdodCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGNoID0gY2hpbGRyZW5baV07XG4gICAgICBzaXplICs9IGNoLmNodW5rU2l6ZSgpOyBoZWlnaHQgKz0gY2guaGVpZ2h0O1xuICAgICAgY2gucGFyZW50ID0gdGhpcztcbiAgICB9XG4gICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLnBhcmVudCA9IG51bGw7XG4gIH1cblxuICBCcmFuY2hDaHVuay5wcm90b3R5cGUgPSB7XG4gICAgY2h1bmtTaXplOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuc2l6ZSB9LFxuXG4gICAgcmVtb3ZlSW5uZXI6IGZ1bmN0aW9uKGF0LCBuKSB7XG4gICAgICB0aGlzLnNpemUgLT0gbjtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBzeiA9IGNoaWxkLmNodW5rU2l6ZSgpO1xuICAgICAgICBpZiAoYXQgPCBzeikge1xuICAgICAgICAgIHZhciBybSA9IE1hdGgubWluKG4sIHN6IC0gYXQpLCBvbGRIZWlnaHQgPSBjaGlsZC5oZWlnaHQ7XG4gICAgICAgICAgY2hpbGQucmVtb3ZlSW5uZXIoYXQsIHJtKTtcbiAgICAgICAgICB0aGlzLmhlaWdodCAtPSBvbGRIZWlnaHQgLSBjaGlsZC5oZWlnaHQ7XG4gICAgICAgICAgaWYgKHN6ID09IHJtKSB7IHRoaXMuY2hpbGRyZW4uc3BsaWNlKGktLSwgMSk7IGNoaWxkLnBhcmVudCA9IG51bGw7IH1cbiAgICAgICAgICBpZiAoKG4gLT0gcm0pID09IDApIHsgYnJlYWsgfVxuICAgICAgICAgIGF0ID0gMDtcbiAgICAgICAgfSBlbHNlIHsgYXQgLT0gc3o7IH1cbiAgICAgIH1cbiAgICAgIC8vIElmIHRoZSByZXN1bHQgaXMgc21hbGxlciB0aGFuIDI1IGxpbmVzLCBlbnN1cmUgdGhhdCBpdCBpcyBhXG4gICAgICAvLyBzaW5nbGUgbGVhZiBub2RlLlxuICAgICAgaWYgKHRoaXMuc2l6ZSAtIG4gPCAyNSAmJlxuICAgICAgICAgICh0aGlzLmNoaWxkcmVuLmxlbmd0aCA+IDEgfHwgISh0aGlzLmNoaWxkcmVuWzBdIGluc3RhbmNlb2YgTGVhZkNodW5rKSkpIHtcbiAgICAgICAgdmFyIGxpbmVzID0gW107XG4gICAgICAgIHRoaXMuY29sbGFwc2UobGluZXMpO1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gW25ldyBMZWFmQ2h1bmsobGluZXMpXTtcbiAgICAgICAgdGhpcy5jaGlsZHJlblswXS5wYXJlbnQgPSB0aGlzO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBjb2xsYXBzZTogZnVuY3Rpb24obGluZXMpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7ICsraSkgeyB0aGlzLmNoaWxkcmVuW2ldLmNvbGxhcHNlKGxpbmVzKTsgfVxuICAgIH0sXG5cbiAgICBpbnNlcnRJbm5lcjogZnVuY3Rpb24oYXQsIGxpbmVzLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuc2l6ZSArPSBsaW5lcy5sZW5ndGg7XG4gICAgICB0aGlzLmhlaWdodCArPSBoZWlnaHQ7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXSwgc3ogPSBjaGlsZC5jaHVua1NpemUoKTtcbiAgICAgICAgaWYgKGF0IDw9IHN6KSB7XG4gICAgICAgICAgY2hpbGQuaW5zZXJ0SW5uZXIoYXQsIGxpbmVzLCBoZWlnaHQpO1xuICAgICAgICAgIGlmIChjaGlsZC5saW5lcyAmJiBjaGlsZC5saW5lcy5sZW5ndGggPiA1MCkge1xuICAgICAgICAgICAgLy8gVG8gYXZvaWQgbWVtb3J5IHRocmFzaGluZyB3aGVuIGNoaWxkLmxpbmVzIGlzIGh1Z2UgKGUuZy4gZmlyc3QgdmlldyBvZiBhIGxhcmdlIGZpbGUpLCBpdCdzIG5ldmVyIHNwbGljZWQuXG4gICAgICAgICAgICAvLyBJbnN0ZWFkLCBzbWFsbCBzbGljZXMgYXJlIHRha2VuLiBUaGV5J3JlIHRha2VuIGluIG9yZGVyIGJlY2F1c2Ugc2VxdWVudGlhbCBtZW1vcnkgYWNjZXNzZXMgYXJlIGZhc3Rlc3QuXG4gICAgICAgICAgICB2YXIgcmVtYWluaW5nID0gY2hpbGQubGluZXMubGVuZ3RoICUgMjUgKyAyNTtcbiAgICAgICAgICAgIGZvciAodmFyIHBvcyA9IHJlbWFpbmluZzsgcG9zIDwgY2hpbGQubGluZXMubGVuZ3RoOykge1xuICAgICAgICAgICAgICB2YXIgbGVhZiA9IG5ldyBMZWFmQ2h1bmsoY2hpbGQubGluZXMuc2xpY2UocG9zLCBwb3MgKz0gMjUpKTtcbiAgICAgICAgICAgICAgY2hpbGQuaGVpZ2h0IC09IGxlYWYuaGVpZ2h0O1xuICAgICAgICAgICAgICB0aGlzLmNoaWxkcmVuLnNwbGljZSgrK2ksIDAsIGxlYWYpO1xuICAgICAgICAgICAgICBsZWFmLnBhcmVudCA9IHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGlsZC5saW5lcyA9IGNoaWxkLmxpbmVzLnNsaWNlKDAsIHJlbWFpbmluZyk7XG4gICAgICAgICAgICB0aGlzLm1heWJlU3BpbGwoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBhdCAtPSBzejtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gV2hlbiBhIG5vZGUgaGFzIGdyb3duLCBjaGVjayB3aGV0aGVyIGl0IHNob3VsZCBiZSBzcGxpdC5cbiAgICBtYXliZVNwaWxsOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmNoaWxkcmVuLmxlbmd0aCA8PSAxMCkgeyByZXR1cm4gfVxuICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgIGRvIHtcbiAgICAgICAgdmFyIHNwaWxsZWQgPSBtZS5jaGlsZHJlbi5zcGxpY2UobWUuY2hpbGRyZW4ubGVuZ3RoIC0gNSwgNSk7XG4gICAgICAgIHZhciBzaWJsaW5nID0gbmV3IEJyYW5jaENodW5rKHNwaWxsZWQpO1xuICAgICAgICBpZiAoIW1lLnBhcmVudCkgeyAvLyBCZWNvbWUgdGhlIHBhcmVudCBub2RlXG4gICAgICAgICAgdmFyIGNvcHkgPSBuZXcgQnJhbmNoQ2h1bmsobWUuY2hpbGRyZW4pO1xuICAgICAgICAgIGNvcHkucGFyZW50ID0gbWU7XG4gICAgICAgICAgbWUuY2hpbGRyZW4gPSBbY29weSwgc2libGluZ107XG4gICAgICAgICAgbWUgPSBjb3B5O1xuICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWUuc2l6ZSAtPSBzaWJsaW5nLnNpemU7XG4gICAgICAgICAgbWUuaGVpZ2h0IC09IHNpYmxpbmcuaGVpZ2h0O1xuICAgICAgICAgIHZhciBteUluZGV4ID0gaW5kZXhPZihtZS5wYXJlbnQuY2hpbGRyZW4sIG1lKTtcbiAgICAgICAgICBtZS5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKG15SW5kZXggKyAxLCAwLCBzaWJsaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBzaWJsaW5nLnBhcmVudCA9IG1lLnBhcmVudDtcbiAgICAgIH0gd2hpbGUgKG1lLmNoaWxkcmVuLmxlbmd0aCA+IDEwKVxuICAgICAgbWUucGFyZW50Lm1heWJlU3BpbGwoKTtcbiAgICB9LFxuXG4gICAgaXRlck46IGZ1bmN0aW9uKGF0LCBuLCBvcCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBjaGlsZCA9IHRoaXMuY2hpbGRyZW5baV0sIHN6ID0gY2hpbGQuY2h1bmtTaXplKCk7XG4gICAgICAgIGlmIChhdCA8IHN6KSB7XG4gICAgICAgICAgdmFyIHVzZWQgPSBNYXRoLm1pbihuLCBzeiAtIGF0KTtcbiAgICAgICAgICBpZiAoY2hpbGQuaXRlck4oYXQsIHVzZWQsIG9wKSkgeyByZXR1cm4gdHJ1ZSB9XG4gICAgICAgICAgaWYgKChuIC09IHVzZWQpID09IDApIHsgYnJlYWsgfVxuICAgICAgICAgIGF0ID0gMDtcbiAgICAgICAgfSBlbHNlIHsgYXQgLT0gc3o7IH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gTGluZSB3aWRnZXRzIGFyZSBibG9jayBlbGVtZW50cyBkaXNwbGF5ZWQgYWJvdmUgb3IgYmVsb3cgYSBsaW5lLlxuXG4gIHZhciBMaW5lV2lkZ2V0ID0gZnVuY3Rpb24oZG9jLCBub2RlLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMpIHsgZm9yICh2YXIgb3B0IGluIG9wdGlvbnMpIHsgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkob3B0KSlcbiAgICAgIHsgdGhpc1tvcHRdID0gb3B0aW9uc1tvcHRdOyB9IH0gfVxuICAgIHRoaXMuZG9jID0gZG9jO1xuICAgIHRoaXMubm9kZSA9IG5vZGU7XG4gIH07XG5cbiAgTGluZVdpZGdldC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNtID0gdGhpcy5kb2MuY20sIHdzID0gdGhpcy5saW5lLndpZGdldHMsIGxpbmUgPSB0aGlzLmxpbmUsIG5vID0gbGluZU5vKGxpbmUpO1xuICAgIGlmIChubyA9PSBudWxsIHx8ICF3cykgeyByZXR1cm4gfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd3MubGVuZ3RoOyArK2kpIHsgaWYgKHdzW2ldID09IHRoaXMpIHsgd3Muc3BsaWNlKGktLSwgMSk7IH0gfVxuICAgIGlmICghd3MubGVuZ3RoKSB7IGxpbmUud2lkZ2V0cyA9IG51bGw7IH1cbiAgICB2YXIgaGVpZ2h0ID0gd2lkZ2V0SGVpZ2h0KHRoaXMpO1xuICAgIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgTWF0aC5tYXgoMCwgbGluZS5oZWlnaHQgLSBoZWlnaHQpKTtcbiAgICBpZiAoY20pIHtcbiAgICAgIHJ1bkluT3AoY20sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYWRqdXN0U2Nyb2xsV2hlbkFib3ZlVmlzaWJsZShjbSwgbGluZSwgLWhlaWdodCk7XG4gICAgICAgIHJlZ0xpbmVDaGFuZ2UoY20sIG5vLCBcIndpZGdldFwiKTtcbiAgICAgIH0pO1xuICAgICAgc2lnbmFsTGF0ZXIoY20sIFwibGluZVdpZGdldENsZWFyZWRcIiwgY20sIHRoaXMsIG5vKTtcbiAgICB9XG4gIH07XG5cbiAgTGluZVdpZGdldC5wcm90b3R5cGUuY2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gICAgdmFyIG9sZEggPSB0aGlzLmhlaWdodCwgY20gPSB0aGlzLmRvYy5jbSwgbGluZSA9IHRoaXMubGluZTtcbiAgICB0aGlzLmhlaWdodCA9IG51bGw7XG4gICAgdmFyIGRpZmYgPSB3aWRnZXRIZWlnaHQodGhpcykgLSBvbGRIO1xuICAgIGlmICghZGlmZikgeyByZXR1cm4gfVxuICAgIGlmICghbGluZUlzSGlkZGVuKHRoaXMuZG9jLCBsaW5lKSkgeyB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIGxpbmUuaGVpZ2h0ICsgZGlmZik7IH1cbiAgICBpZiAoY20pIHtcbiAgICAgIHJ1bkluT3AoY20sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY20uY3VyT3AuZm9yY2VVcGRhdGUgPSB0cnVlO1xuICAgICAgICBhZGp1c3RTY3JvbGxXaGVuQWJvdmVWaXNpYmxlKGNtLCBsaW5lLCBkaWZmKTtcbiAgICAgICAgc2lnbmFsTGF0ZXIoY20sIFwibGluZVdpZGdldENoYW5nZWRcIiwgY20sIHRoaXMkMSwgbGluZU5vKGxpbmUpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgZXZlbnRNaXhpbihMaW5lV2lkZ2V0KTtcblxuICBmdW5jdGlvbiBhZGp1c3RTY3JvbGxXaGVuQWJvdmVWaXNpYmxlKGNtLCBsaW5lLCBkaWZmKSB7XG4gICAgaWYgKGhlaWdodEF0TGluZShsaW5lKSA8ICgoY20uY3VyT3AgJiYgY20uY3VyT3Auc2Nyb2xsVG9wKSB8fCBjbS5kb2Muc2Nyb2xsVG9wKSlcbiAgICAgIHsgYWRkVG9TY3JvbGxUb3AoY20sIGRpZmYpOyB9XG4gIH1cblxuICBmdW5jdGlvbiBhZGRMaW5lV2lkZ2V0KGRvYywgaGFuZGxlLCBub2RlLCBvcHRpb25zKSB7XG4gICAgdmFyIHdpZGdldCA9IG5ldyBMaW5lV2lkZ2V0KGRvYywgbm9kZSwgb3B0aW9ucyk7XG4gICAgdmFyIGNtID0gZG9jLmNtO1xuICAgIGlmIChjbSAmJiB3aWRnZXQubm9IU2Nyb2xsKSB7IGNtLmRpc3BsYXkuYWxpZ25XaWRnZXRzID0gdHJ1ZTsgfVxuICAgIGNoYW5nZUxpbmUoZG9jLCBoYW5kbGUsIFwid2lkZ2V0XCIsIGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICB2YXIgd2lkZ2V0cyA9IGxpbmUud2lkZ2V0cyB8fCAobGluZS53aWRnZXRzID0gW10pO1xuICAgICAgaWYgKHdpZGdldC5pbnNlcnRBdCA9PSBudWxsKSB7IHdpZGdldHMucHVzaCh3aWRnZXQpOyB9XG4gICAgICBlbHNlIHsgd2lkZ2V0cy5zcGxpY2UoTWF0aC5taW4od2lkZ2V0cy5sZW5ndGggLSAxLCBNYXRoLm1heCgwLCB3aWRnZXQuaW5zZXJ0QXQpKSwgMCwgd2lkZ2V0KTsgfVxuICAgICAgd2lkZ2V0LmxpbmUgPSBsaW5lO1xuICAgICAgaWYgKGNtICYmICFsaW5lSXNIaWRkZW4oZG9jLCBsaW5lKSkge1xuICAgICAgICB2YXIgYWJvdmVWaXNpYmxlID0gaGVpZ2h0QXRMaW5lKGxpbmUpIDwgZG9jLnNjcm9sbFRvcDtcbiAgICAgICAgdXBkYXRlTGluZUhlaWdodChsaW5lLCBsaW5lLmhlaWdodCArIHdpZGdldEhlaWdodCh3aWRnZXQpKTtcbiAgICAgICAgaWYgKGFib3ZlVmlzaWJsZSkgeyBhZGRUb1Njcm9sbFRvcChjbSwgd2lkZ2V0LmhlaWdodCk7IH1cbiAgICAgICAgY20uY3VyT3AuZm9yY2VVcGRhdGUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9KTtcbiAgICBpZiAoY20pIHsgc2lnbmFsTGF0ZXIoY20sIFwibGluZVdpZGdldEFkZGVkXCIsIGNtLCB3aWRnZXQsIHR5cGVvZiBoYW5kbGUgPT0gXCJudW1iZXJcIiA/IGhhbmRsZSA6IGxpbmVObyhoYW5kbGUpKTsgfVxuICAgIHJldHVybiB3aWRnZXRcbiAgfVxuXG4gIC8vIFRFWFRNQVJLRVJTXG5cbiAgLy8gQ3JlYXRlZCB3aXRoIG1hcmtUZXh0IGFuZCBzZXRCb29rbWFyayBtZXRob2RzLiBBIFRleHRNYXJrZXIgaXMgYVxuICAvLyBoYW5kbGUgdGhhdCBjYW4gYmUgdXNlZCB0byBjbGVhciBvciBmaW5kIGEgbWFya2VkIHBvc2l0aW9uIGluIHRoZVxuICAvLyBkb2N1bWVudC4gTGluZSBvYmplY3RzIGhvbGQgYXJyYXlzIChtYXJrZWRTcGFucykgY29udGFpbmluZ1xuICAvLyB7ZnJvbSwgdG8sIG1hcmtlcn0gb2JqZWN0IHBvaW50aW5nIHRvIHN1Y2ggbWFya2VyIG9iamVjdHMsIGFuZFxuICAvLyBpbmRpY2F0aW5nIHRoYXQgc3VjaCBhIG1hcmtlciBpcyBwcmVzZW50IG9uIHRoYXQgbGluZS4gTXVsdGlwbGVcbiAgLy8gbGluZXMgbWF5IHBvaW50IHRvIHRoZSBzYW1lIG1hcmtlciB3aGVuIGl0IHNwYW5zIGFjcm9zcyBsaW5lcy5cbiAgLy8gVGhlIHNwYW5zIHdpbGwgaGF2ZSBudWxsIGZvciB0aGVpciBmcm9tL3RvIHByb3BlcnRpZXMgd2hlbiB0aGVcbiAgLy8gbWFya2VyIGNvbnRpbnVlcyBiZXlvbmQgdGhlIHN0YXJ0L2VuZCBvZiB0aGUgbGluZS4gTWFya2VycyBoYXZlXG4gIC8vIGxpbmtzIGJhY2sgdG8gdGhlIGxpbmVzIHRoZXkgY3VycmVudGx5IHRvdWNoLlxuXG4gIC8vIENvbGxhcHNlZCBtYXJrZXJzIGhhdmUgdW5pcXVlIGlkcywgaW4gb3JkZXIgdG8gYmUgYWJsZSB0byBvcmRlclxuICAvLyB0aGVtLCB3aGljaCBpcyBuZWVkZWQgZm9yIHVuaXF1ZWx5IGRldGVybWluaW5nIGFuIG91dGVyIG1hcmtlclxuICAvLyB3aGVuIHRoZXkgb3ZlcmxhcCAodGhleSBtYXkgbmVzdCwgYnV0IG5vdCBwYXJ0aWFsbHkgb3ZlcmxhcCkuXG4gIHZhciBuZXh0TWFya2VySWQgPSAwO1xuXG4gIHZhciBUZXh0TWFya2VyID0gZnVuY3Rpb24oZG9jLCB0eXBlKSB7XG4gICAgdGhpcy5saW5lcyA9IFtdO1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5kb2MgPSBkb2M7XG4gICAgdGhpcy5pZCA9ICsrbmV4dE1hcmtlcklkO1xuICB9O1xuXG4gIC8vIENsZWFyIHRoZSBtYXJrZXIuXG4gIFRleHRNYXJrZXIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmV4cGxpY2l0bHlDbGVhcmVkKSB7IHJldHVybiB9XG4gICAgdmFyIGNtID0gdGhpcy5kb2MuY20sIHdpdGhPcCA9IGNtICYmICFjbS5jdXJPcDtcbiAgICBpZiAod2l0aE9wKSB7IHN0YXJ0T3BlcmF0aW9uKGNtKTsgfVxuICAgIGlmIChoYXNIYW5kbGVyKHRoaXMsIFwiY2xlYXJcIikpIHtcbiAgICAgIHZhciBmb3VuZCA9IHRoaXMuZmluZCgpO1xuICAgICAgaWYgKGZvdW5kKSB7IHNpZ25hbExhdGVyKHRoaXMsIFwiY2xlYXJcIiwgZm91bmQuZnJvbSwgZm91bmQudG8pOyB9XG4gICAgfVxuICAgIHZhciBtaW4gPSBudWxsLCBtYXggPSBudWxsO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGxpbmUgPSB0aGlzLmxpbmVzW2ldO1xuICAgICAgdmFyIHNwYW4gPSBnZXRNYXJrZWRTcGFuRm9yKGxpbmUubWFya2VkU3BhbnMsIHRoaXMpO1xuICAgICAgaWYgKGNtICYmICF0aGlzLmNvbGxhcHNlZCkgeyByZWdMaW5lQ2hhbmdlKGNtLCBsaW5lTm8obGluZSksIFwidGV4dFwiKTsgfVxuICAgICAgZWxzZSBpZiAoY20pIHtcbiAgICAgICAgaWYgKHNwYW4udG8gIT0gbnVsbCkgeyBtYXggPSBsaW5lTm8obGluZSk7IH1cbiAgICAgICAgaWYgKHNwYW4uZnJvbSAhPSBudWxsKSB7IG1pbiA9IGxpbmVObyhsaW5lKTsgfVxuICAgICAgfVxuICAgICAgbGluZS5tYXJrZWRTcGFucyA9IHJlbW92ZU1hcmtlZFNwYW4obGluZS5tYXJrZWRTcGFucywgc3Bhbik7XG4gICAgICBpZiAoc3Bhbi5mcm9tID09IG51bGwgJiYgdGhpcy5jb2xsYXBzZWQgJiYgIWxpbmVJc0hpZGRlbih0aGlzLmRvYywgbGluZSkgJiYgY20pXG4gICAgICAgIHsgdXBkYXRlTGluZUhlaWdodChsaW5lLCB0ZXh0SGVpZ2h0KGNtLmRpc3BsYXkpKTsgfVxuICAgIH1cbiAgICBpZiAoY20gJiYgdGhpcy5jb2xsYXBzZWQgJiYgIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7IGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IHRoaXMubGluZXMubGVuZ3RoOyArK2kkMSkge1xuICAgICAgdmFyIHZpc3VhbCA9IHZpc3VhbExpbmUodGhpcy5saW5lc1tpJDFdKSwgbGVuID0gbGluZUxlbmd0aCh2aXN1YWwpO1xuICAgICAgaWYgKGxlbiA+IGNtLmRpc3BsYXkubWF4TGluZUxlbmd0aCkge1xuICAgICAgICBjbS5kaXNwbGF5Lm1heExpbmUgPSB2aXN1YWw7XG4gICAgICAgIGNtLmRpc3BsYXkubWF4TGluZUxlbmd0aCA9IGxlbjtcbiAgICAgICAgY20uZGlzcGxheS5tYXhMaW5lQ2hhbmdlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSB9XG5cbiAgICBpZiAobWluICE9IG51bGwgJiYgY20gJiYgdGhpcy5jb2xsYXBzZWQpIHsgcmVnQ2hhbmdlKGNtLCBtaW4sIG1heCArIDEpOyB9XG4gICAgdGhpcy5saW5lcy5sZW5ndGggPSAwO1xuICAgIHRoaXMuZXhwbGljaXRseUNsZWFyZWQgPSB0cnVlO1xuICAgIGlmICh0aGlzLmF0b21pYyAmJiB0aGlzLmRvYy5jYW50RWRpdCkge1xuICAgICAgdGhpcy5kb2MuY2FudEVkaXQgPSBmYWxzZTtcbiAgICAgIGlmIChjbSkgeyByZUNoZWNrU2VsZWN0aW9uKGNtLmRvYyk7IH1cbiAgICB9XG4gICAgaWYgKGNtKSB7IHNpZ25hbExhdGVyKGNtLCBcIm1hcmtlckNsZWFyZWRcIiwgY20sIHRoaXMsIG1pbiwgbWF4KTsgfVxuICAgIGlmICh3aXRoT3ApIHsgZW5kT3BlcmF0aW9uKGNtKTsgfVxuICAgIGlmICh0aGlzLnBhcmVudCkgeyB0aGlzLnBhcmVudC5jbGVhcigpOyB9XG4gIH07XG5cbiAgLy8gRmluZCB0aGUgcG9zaXRpb24gb2YgdGhlIG1hcmtlciBpbiB0aGUgZG9jdW1lbnQuIFJldHVybnMgYSB7ZnJvbSxcbiAgLy8gdG99IG9iamVjdCBieSBkZWZhdWx0LiBTaWRlIGNhbiBiZSBwYXNzZWQgdG8gZ2V0IGEgc3BlY2lmaWMgc2lkZVxuICAvLyAtLSAwIChib3RoKSwgLTEgKGxlZnQpLCBvciAxIChyaWdodCkuIFdoZW4gbGluZU9iaiBpcyB0cnVlLCB0aGVcbiAgLy8gUG9zIG9iamVjdHMgcmV0dXJuZWQgY29udGFpbiBhIGxpbmUgb2JqZWN0LCByYXRoZXIgdGhhbiBhIGxpbmVcbiAgLy8gbnVtYmVyICh1c2VkIHRvIHByZXZlbnQgbG9va2luZyB1cCB0aGUgc2FtZSBsaW5lIHR3aWNlKS5cbiAgVGV4dE1hcmtlci5wcm90b3R5cGUuZmluZCA9IGZ1bmN0aW9uIChzaWRlLCBsaW5lT2JqKSB7XG4gICAgaWYgKHNpZGUgPT0gbnVsbCAmJiB0aGlzLnR5cGUgPT0gXCJib29rbWFya1wiKSB7IHNpZGUgPSAxOyB9XG4gICAgdmFyIGZyb20sIHRvO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGxpbmUgPSB0aGlzLmxpbmVzW2ldO1xuICAgICAgdmFyIHNwYW4gPSBnZXRNYXJrZWRTcGFuRm9yKGxpbmUubWFya2VkU3BhbnMsIHRoaXMpO1xuICAgICAgaWYgKHNwYW4uZnJvbSAhPSBudWxsKSB7XG4gICAgICAgIGZyb20gPSBQb3MobGluZU9iaiA/IGxpbmUgOiBsaW5lTm8obGluZSksIHNwYW4uZnJvbSk7XG4gICAgICAgIGlmIChzaWRlID09IC0xKSB7IHJldHVybiBmcm9tIH1cbiAgICAgIH1cbiAgICAgIGlmIChzcGFuLnRvICE9IG51bGwpIHtcbiAgICAgICAgdG8gPSBQb3MobGluZU9iaiA/IGxpbmUgOiBsaW5lTm8obGluZSksIHNwYW4udG8pO1xuICAgICAgICBpZiAoc2lkZSA9PSAxKSB7IHJldHVybiB0byB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmcm9tICYmIHtmcm9tOiBmcm9tLCB0bzogdG99XG4gIH07XG5cbiAgLy8gU2lnbmFscyB0aGF0IHRoZSBtYXJrZXIncyB3aWRnZXQgY2hhbmdlZCwgYW5kIHN1cnJvdW5kaW5nIGxheW91dFxuICAvLyBzaG91bGQgYmUgcmVjb21wdXRlZC5cbiAgVGV4dE1hcmtlci5wcm90b3R5cGUuY2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gICAgdmFyIHBvcyA9IHRoaXMuZmluZCgtMSwgdHJ1ZSksIHdpZGdldCA9IHRoaXMsIGNtID0gdGhpcy5kb2MuY207XG4gICAgaWYgKCFwb3MgfHwgIWNtKSB7IHJldHVybiB9XG4gICAgcnVuSW5PcChjbSwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGxpbmUgPSBwb3MubGluZSwgbGluZU4gPSBsaW5lTm8ocG9zLmxpbmUpO1xuICAgICAgdmFyIHZpZXcgPSBmaW5kVmlld0ZvckxpbmUoY20sIGxpbmVOKTtcbiAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgIGNsZWFyTGluZU1lYXN1cmVtZW50Q2FjaGVGb3Iodmlldyk7XG4gICAgICAgIGNtLmN1ck9wLnNlbGVjdGlvbkNoYW5nZWQgPSBjbS5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7XG4gICAgICB9XG4gICAgICBjbS5jdXJPcC51cGRhdGVNYXhMaW5lID0gdHJ1ZTtcbiAgICAgIGlmICghbGluZUlzSGlkZGVuKHdpZGdldC5kb2MsIGxpbmUpICYmIHdpZGdldC5oZWlnaHQgIT0gbnVsbCkge1xuICAgICAgICB2YXIgb2xkSGVpZ2h0ID0gd2lkZ2V0LmhlaWdodDtcbiAgICAgICAgd2lkZ2V0LmhlaWdodCA9IG51bGw7XG4gICAgICAgIHZhciBkSGVpZ2h0ID0gd2lkZ2V0SGVpZ2h0KHdpZGdldCkgLSBvbGRIZWlnaHQ7XG4gICAgICAgIGlmIChkSGVpZ2h0KVxuICAgICAgICAgIHsgdXBkYXRlTGluZUhlaWdodChsaW5lLCBsaW5lLmhlaWdodCArIGRIZWlnaHQpOyB9XG4gICAgICB9XG4gICAgICBzaWduYWxMYXRlcihjbSwgXCJtYXJrZXJDaGFuZ2VkXCIsIGNtLCB0aGlzJDEpO1xuICAgIH0pO1xuICB9O1xuXG4gIFRleHRNYXJrZXIucHJvdG90eXBlLmF0dGFjaExpbmUgPSBmdW5jdGlvbiAobGluZSkge1xuICAgIGlmICghdGhpcy5saW5lcy5sZW5ndGggJiYgdGhpcy5kb2MuY20pIHtcbiAgICAgIHZhciBvcCA9IHRoaXMuZG9jLmNtLmN1ck9wO1xuICAgICAgaWYgKCFvcC5tYXliZUhpZGRlbk1hcmtlcnMgfHwgaW5kZXhPZihvcC5tYXliZUhpZGRlbk1hcmtlcnMsIHRoaXMpID09IC0xKVxuICAgICAgICB7IChvcC5tYXliZVVuaGlkZGVuTWFya2VycyB8fCAob3AubWF5YmVVbmhpZGRlbk1hcmtlcnMgPSBbXSkpLnB1c2godGhpcyk7IH1cbiAgICB9XG4gICAgdGhpcy5saW5lcy5wdXNoKGxpbmUpO1xuICB9O1xuXG4gIFRleHRNYXJrZXIucHJvdG90eXBlLmRldGFjaExpbmUgPSBmdW5jdGlvbiAobGluZSkge1xuICAgIHRoaXMubGluZXMuc3BsaWNlKGluZGV4T2YodGhpcy5saW5lcywgbGluZSksIDEpO1xuICAgIGlmICghdGhpcy5saW5lcy5sZW5ndGggJiYgdGhpcy5kb2MuY20pIHtcbiAgICAgIHZhciBvcCA9IHRoaXMuZG9jLmNtLmN1ck9wXG4gICAgICA7KG9wLm1heWJlSGlkZGVuTWFya2VycyB8fCAob3AubWF5YmVIaWRkZW5NYXJrZXJzID0gW10pKS5wdXNoKHRoaXMpO1xuICAgIH1cbiAgfTtcbiAgZXZlbnRNaXhpbihUZXh0TWFya2VyKTtcblxuICAvLyBDcmVhdGUgYSBtYXJrZXIsIHdpcmUgaXQgdXAgdG8gdGhlIHJpZ2h0IGxpbmVzLCBhbmRcbiAgZnVuY3Rpb24gbWFya1RleHQoZG9jLCBmcm9tLCB0bywgb3B0aW9ucywgdHlwZSkge1xuICAgIC8vIFNoYXJlZCBtYXJrZXJzIChhY3Jvc3MgbGlua2VkIGRvY3VtZW50cykgYXJlIGhhbmRsZWQgc2VwYXJhdGVseVxuICAgIC8vIChtYXJrVGV4dFNoYXJlZCB3aWxsIGNhbGwgb3V0IHRvIHRoaXMgYWdhaW4sIG9uY2UgcGVyXG4gICAgLy8gZG9jdW1lbnQpLlxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuc2hhcmVkKSB7IHJldHVybiBtYXJrVGV4dFNoYXJlZChkb2MsIGZyb20sIHRvLCBvcHRpb25zLCB0eXBlKSB9XG4gICAgLy8gRW5zdXJlIHdlIGFyZSBpbiBhbiBvcGVyYXRpb24uXG4gICAgaWYgKGRvYy5jbSAmJiAhZG9jLmNtLmN1ck9wKSB7IHJldHVybiBvcGVyYXRpb24oZG9jLmNtLCBtYXJrVGV4dCkoZG9jLCBmcm9tLCB0bywgb3B0aW9ucywgdHlwZSkgfVxuXG4gICAgdmFyIG1hcmtlciA9IG5ldyBUZXh0TWFya2VyKGRvYywgdHlwZSksIGRpZmYgPSBjbXAoZnJvbSwgdG8pO1xuICAgIGlmIChvcHRpb25zKSB7IGNvcHlPYmoob3B0aW9ucywgbWFya2VyLCBmYWxzZSk7IH1cbiAgICAvLyBEb24ndCBjb25uZWN0IGVtcHR5IG1hcmtlcnMgdW5sZXNzIGNsZWFyV2hlbkVtcHR5IGlzIGZhbHNlXG4gICAgaWYgKGRpZmYgPiAwIHx8IGRpZmYgPT0gMCAmJiBtYXJrZXIuY2xlYXJXaGVuRW1wdHkgIT09IGZhbHNlKVxuICAgICAgeyByZXR1cm4gbWFya2VyIH1cbiAgICBpZiAobWFya2VyLnJlcGxhY2VkV2l0aCkge1xuICAgICAgLy8gU2hvd2luZyB1cCBhcyBhIHdpZGdldCBpbXBsaWVzIGNvbGxhcHNlZCAod2lkZ2V0IHJlcGxhY2VzIHRleHQpXG4gICAgICBtYXJrZXIuY29sbGFwc2VkID0gdHJ1ZTtcbiAgICAgIG1hcmtlci53aWRnZXROb2RlID0gZWx0UChcInNwYW5cIiwgW21hcmtlci5yZXBsYWNlZFdpdGhdLCBcIkNvZGVNaXJyb3Itd2lkZ2V0XCIpO1xuICAgICAgaWYgKCFvcHRpb25zLmhhbmRsZU1vdXNlRXZlbnRzKSB7IG1hcmtlci53aWRnZXROb2RlLnNldEF0dHJpYnV0ZShcImNtLWlnbm9yZS1ldmVudHNcIiwgXCJ0cnVlXCIpOyB9XG4gICAgICBpZiAob3B0aW9ucy5pbnNlcnRMZWZ0KSB7IG1hcmtlci53aWRnZXROb2RlLmluc2VydExlZnQgPSB0cnVlOyB9XG4gICAgfVxuICAgIGlmIChtYXJrZXIuY29sbGFwc2VkKSB7XG4gICAgICBpZiAoY29uZmxpY3RpbmdDb2xsYXBzZWRSYW5nZShkb2MsIGZyb20ubGluZSwgZnJvbSwgdG8sIG1hcmtlcikgfHxcbiAgICAgICAgICBmcm9tLmxpbmUgIT0gdG8ubGluZSAmJiBjb25mbGljdGluZ0NvbGxhcHNlZFJhbmdlKGRvYywgdG8ubGluZSwgZnJvbSwgdG8sIG1hcmtlcikpXG4gICAgICAgIHsgdGhyb3cgbmV3IEVycm9yKFwiSW5zZXJ0aW5nIGNvbGxhcHNlZCBtYXJrZXIgcGFydGlhbGx5IG92ZXJsYXBwaW5nIGFuIGV4aXN0aW5nIG9uZVwiKSB9XG4gICAgICBzZWVDb2xsYXBzZWRTcGFucygpO1xuICAgIH1cblxuICAgIGlmIChtYXJrZXIuYWRkVG9IaXN0b3J5KVxuICAgICAgeyBhZGRDaGFuZ2VUb0hpc3RvcnkoZG9jLCB7ZnJvbTogZnJvbSwgdG86IHRvLCBvcmlnaW46IFwibWFya1RleHRcIn0sIGRvYy5zZWwsIE5hTik7IH1cblxuICAgIHZhciBjdXJMaW5lID0gZnJvbS5saW5lLCBjbSA9IGRvYy5jbSwgdXBkYXRlTWF4TGluZTtcbiAgICBkb2MuaXRlcihjdXJMaW5lLCB0by5saW5lICsgMSwgZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgIGlmIChjbSAmJiBtYXJrZXIuY29sbGFwc2VkICYmICFjbS5vcHRpb25zLmxpbmVXcmFwcGluZyAmJiB2aXN1YWxMaW5lKGxpbmUpID09IGNtLmRpc3BsYXkubWF4TGluZSlcbiAgICAgICAgeyB1cGRhdGVNYXhMaW5lID0gdHJ1ZTsgfVxuICAgICAgaWYgKG1hcmtlci5jb2xsYXBzZWQgJiYgY3VyTGluZSAhPSBmcm9tLmxpbmUpIHsgdXBkYXRlTGluZUhlaWdodChsaW5lLCAwKTsgfVxuICAgICAgYWRkTWFya2VkU3BhbihsaW5lLCBuZXcgTWFya2VkU3BhbihtYXJrZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxpbmUgPT0gZnJvbS5saW5lID8gZnJvbS5jaCA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxpbmUgPT0gdG8ubGluZSA/IHRvLmNoIDogbnVsbCkpO1xuICAgICAgKytjdXJMaW5lO1xuICAgIH0pO1xuICAgIC8vIGxpbmVJc0hpZGRlbiBkZXBlbmRzIG9uIHRoZSBwcmVzZW5jZSBvZiB0aGUgc3BhbnMsIHNvIG5lZWRzIGEgc2Vjb25kIHBhc3NcbiAgICBpZiAobWFya2VyLmNvbGxhcHNlZCkgeyBkb2MuaXRlcihmcm9tLmxpbmUsIHRvLmxpbmUgKyAxLCBmdW5jdGlvbiAobGluZSkge1xuICAgICAgaWYgKGxpbmVJc0hpZGRlbihkb2MsIGxpbmUpKSB7IHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgMCk7IH1cbiAgICB9KTsgfVxuXG4gICAgaWYgKG1hcmtlci5jbGVhck9uRW50ZXIpIHsgb24obWFya2VyLCBcImJlZm9yZUN1cnNvckVudGVyXCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1hcmtlci5jbGVhcigpOyB9KTsgfVxuXG4gICAgaWYgKG1hcmtlci5yZWFkT25seSkge1xuICAgICAgc2VlUmVhZE9ubHlTcGFucygpO1xuICAgICAgaWYgKGRvYy5oaXN0b3J5LmRvbmUubGVuZ3RoIHx8IGRvYy5oaXN0b3J5LnVuZG9uZS5sZW5ndGgpXG4gICAgICAgIHsgZG9jLmNsZWFySGlzdG9yeSgpOyB9XG4gICAgfVxuICAgIGlmIChtYXJrZXIuY29sbGFwc2VkKSB7XG4gICAgICBtYXJrZXIuaWQgPSArK25leHRNYXJrZXJJZDtcbiAgICAgIG1hcmtlci5hdG9taWMgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoY20pIHtcbiAgICAgIC8vIFN5bmMgZWRpdG9yIHN0YXRlXG4gICAgICBpZiAodXBkYXRlTWF4TGluZSkgeyBjbS5jdXJPcC51cGRhdGVNYXhMaW5lID0gdHJ1ZTsgfVxuICAgICAgaWYgKG1hcmtlci5jb2xsYXBzZWQpXG4gICAgICAgIHsgcmVnQ2hhbmdlKGNtLCBmcm9tLmxpbmUsIHRvLmxpbmUgKyAxKTsgfVxuICAgICAgZWxzZSBpZiAobWFya2VyLmNsYXNzTmFtZSB8fCBtYXJrZXIuc3RhcnRTdHlsZSB8fCBtYXJrZXIuZW5kU3R5bGUgfHwgbWFya2VyLmNzcyB8fFxuICAgICAgICAgICAgICAgbWFya2VyLmF0dHJpYnV0ZXMgfHwgbWFya2VyLnRpdGxlKVxuICAgICAgICB7IGZvciAodmFyIGkgPSBmcm9tLmxpbmU7IGkgPD0gdG8ubGluZTsgaSsrKSB7IHJlZ0xpbmVDaGFuZ2UoY20sIGksIFwidGV4dFwiKTsgfSB9XG4gICAgICBpZiAobWFya2VyLmF0b21pYykgeyByZUNoZWNrU2VsZWN0aW9uKGNtLmRvYyk7IH1cbiAgICAgIHNpZ25hbExhdGVyKGNtLCBcIm1hcmtlckFkZGVkXCIsIGNtLCBtYXJrZXIpO1xuICAgIH1cbiAgICByZXR1cm4gbWFya2VyXG4gIH1cblxuICAvLyBTSEFSRUQgVEVYVE1BUktFUlNcblxuICAvLyBBIHNoYXJlZCBtYXJrZXIgc3BhbnMgbXVsdGlwbGUgbGlua2VkIGRvY3VtZW50cy4gSXQgaXNcbiAgLy8gaW1wbGVtZW50ZWQgYXMgYSBtZXRhLW1hcmtlci1vYmplY3QgY29udHJvbGxpbmcgbXVsdGlwbGUgbm9ybWFsXG4gIC8vIG1hcmtlcnMuXG4gIHZhciBTaGFyZWRUZXh0TWFya2VyID0gZnVuY3Rpb24obWFya2VycywgcHJpbWFyeSkge1xuICAgIHRoaXMubWFya2VycyA9IG1hcmtlcnM7XG4gICAgdGhpcy5wcmltYXJ5ID0gcHJpbWFyeTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtlcnMubGVuZ3RoOyArK2kpXG4gICAgICB7IG1hcmtlcnNbaV0ucGFyZW50ID0gdGhpczsgfVxuICB9O1xuXG4gIFNoYXJlZFRleHRNYXJrZXIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmV4cGxpY2l0bHlDbGVhcmVkKSB7IHJldHVybiB9XG4gICAgdGhpcy5leHBsaWNpdGx5Q2xlYXJlZCA9IHRydWU7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1hcmtlcnMubGVuZ3RoOyArK2kpXG4gICAgICB7IHRoaXMubWFya2Vyc1tpXS5jbGVhcigpOyB9XG4gICAgc2lnbmFsTGF0ZXIodGhpcywgXCJjbGVhclwiKTtcbiAgfTtcblxuICBTaGFyZWRUZXh0TWFya2VyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKHNpZGUsIGxpbmVPYmopIHtcbiAgICByZXR1cm4gdGhpcy5wcmltYXJ5LmZpbmQoc2lkZSwgbGluZU9iailcbiAgfTtcbiAgZXZlbnRNaXhpbihTaGFyZWRUZXh0TWFya2VyKTtcblxuICBmdW5jdGlvbiBtYXJrVGV4dFNoYXJlZChkb2MsIGZyb20sIHRvLCBvcHRpb25zLCB0eXBlKSB7XG4gICAgb3B0aW9ucyA9IGNvcHlPYmoob3B0aW9ucyk7XG4gICAgb3B0aW9ucy5zaGFyZWQgPSBmYWxzZTtcbiAgICB2YXIgbWFya2VycyA9IFttYXJrVGV4dChkb2MsIGZyb20sIHRvLCBvcHRpb25zLCB0eXBlKV0sIHByaW1hcnkgPSBtYXJrZXJzWzBdO1xuICAgIHZhciB3aWRnZXQgPSBvcHRpb25zLndpZGdldE5vZGU7XG4gICAgbGlua2VkRG9jcyhkb2MsIGZ1bmN0aW9uIChkb2MpIHtcbiAgICAgIGlmICh3aWRnZXQpIHsgb3B0aW9ucy53aWRnZXROb2RlID0gd2lkZ2V0LmNsb25lTm9kZSh0cnVlKTsgfVxuICAgICAgbWFya2Vycy5wdXNoKG1hcmtUZXh0KGRvYywgY2xpcFBvcyhkb2MsIGZyb20pLCBjbGlwUG9zKGRvYywgdG8pLCBvcHRpb25zLCB0eXBlKSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5saW5rZWQubGVuZ3RoOyArK2kpXG4gICAgICAgIHsgaWYgKGRvYy5saW5rZWRbaV0uaXNQYXJlbnQpIHsgcmV0dXJuIH0gfVxuICAgICAgcHJpbWFyeSA9IGxzdChtYXJrZXJzKTtcbiAgICB9KTtcbiAgICByZXR1cm4gbmV3IFNoYXJlZFRleHRNYXJrZXIobWFya2VycywgcHJpbWFyeSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmRTaGFyZWRNYXJrZXJzKGRvYykge1xuICAgIHJldHVybiBkb2MuZmluZE1hcmtzKFBvcyhkb2MuZmlyc3QsIDApLCBkb2MuY2xpcFBvcyhQb3MoZG9jLmxhc3RMaW5lKCkpKSwgZnVuY3Rpb24gKG0pIHsgcmV0dXJuIG0ucGFyZW50OyB9KVxuICB9XG5cbiAgZnVuY3Rpb24gY29weVNoYXJlZE1hcmtlcnMoZG9jLCBtYXJrZXJzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbWFya2VyID0gbWFya2Vyc1tpXSwgcG9zID0gbWFya2VyLmZpbmQoKTtcbiAgICAgIHZhciBtRnJvbSA9IGRvYy5jbGlwUG9zKHBvcy5mcm9tKSwgbVRvID0gZG9jLmNsaXBQb3MocG9zLnRvKTtcbiAgICAgIGlmIChjbXAobUZyb20sIG1UbykpIHtcbiAgICAgICAgdmFyIHN1Yk1hcmsgPSBtYXJrVGV4dChkb2MsIG1Gcm9tLCBtVG8sIG1hcmtlci5wcmltYXJ5LCBtYXJrZXIucHJpbWFyeS50eXBlKTtcbiAgICAgICAgbWFya2VyLm1hcmtlcnMucHVzaChzdWJNYXJrKTtcbiAgICAgICAgc3ViTWFyay5wYXJlbnQgPSBtYXJrZXI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZGV0YWNoU2hhcmVkTWFya2VycyhtYXJrZXJzKSB7XG4gICAgdmFyIGxvb3AgPSBmdW5jdGlvbiAoIGkgKSB7XG4gICAgICB2YXIgbWFya2VyID0gbWFya2Vyc1tpXSwgbGlua2VkID0gW21hcmtlci5wcmltYXJ5LmRvY107XG4gICAgICBsaW5rZWREb2NzKG1hcmtlci5wcmltYXJ5LmRvYywgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGxpbmtlZC5wdXNoKGQpOyB9KTtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWFya2VyLm1hcmtlcnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgdmFyIHN1Yk1hcmtlciA9IG1hcmtlci5tYXJrZXJzW2pdO1xuICAgICAgICBpZiAoaW5kZXhPZihsaW5rZWQsIHN1Yk1hcmtlci5kb2MpID09IC0xKSB7XG4gICAgICAgICAgc3ViTWFya2VyLnBhcmVudCA9IG51bGw7XG4gICAgICAgICAgbWFya2VyLm1hcmtlcnMuc3BsaWNlKGotLSwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXJzLmxlbmd0aDsgaSsrKSBsb29wKCBpICk7XG4gIH1cblxuICB2YXIgbmV4dERvY0lkID0gMDtcbiAgdmFyIERvYyA9IGZ1bmN0aW9uKHRleHQsIG1vZGUsIGZpcnN0TGluZSwgbGluZVNlcCwgZGlyZWN0aW9uKSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIERvYykpIHsgcmV0dXJuIG5ldyBEb2ModGV4dCwgbW9kZSwgZmlyc3RMaW5lLCBsaW5lU2VwLCBkaXJlY3Rpb24pIH1cbiAgICBpZiAoZmlyc3RMaW5lID09IG51bGwpIHsgZmlyc3RMaW5lID0gMDsgfVxuXG4gICAgQnJhbmNoQ2h1bmsuY2FsbCh0aGlzLCBbbmV3IExlYWZDaHVuayhbbmV3IExpbmUoXCJcIiwgbnVsbCldKV0pO1xuICAgIHRoaXMuZmlyc3QgPSBmaXJzdExpbmU7XG4gICAgdGhpcy5zY3JvbGxUb3AgPSB0aGlzLnNjcm9sbExlZnQgPSAwO1xuICAgIHRoaXMuY2FudEVkaXQgPSBmYWxzZTtcbiAgICB0aGlzLmNsZWFuR2VuZXJhdGlvbiA9IDE7XG4gICAgdGhpcy5tb2RlRnJvbnRpZXIgPSB0aGlzLmhpZ2hsaWdodEZyb250aWVyID0gZmlyc3RMaW5lO1xuICAgIHZhciBzdGFydCA9IFBvcyhmaXJzdExpbmUsIDApO1xuICAgIHRoaXMuc2VsID0gc2ltcGxlU2VsZWN0aW9uKHN0YXJ0KTtcbiAgICB0aGlzLmhpc3RvcnkgPSBuZXcgSGlzdG9yeShudWxsKTtcbiAgICB0aGlzLmlkID0gKytuZXh0RG9jSWQ7XG4gICAgdGhpcy5tb2RlT3B0aW9uID0gbW9kZTtcbiAgICB0aGlzLmxpbmVTZXAgPSBsaW5lU2VwO1xuICAgIHRoaXMuZGlyZWN0aW9uID0gKGRpcmVjdGlvbiA9PSBcInJ0bFwiKSA/IFwicnRsXCIgOiBcImx0clwiO1xuICAgIHRoaXMuZXh0ZW5kID0gZmFsc2U7XG5cbiAgICBpZiAodHlwZW9mIHRleHQgPT0gXCJzdHJpbmdcIikgeyB0ZXh0ID0gdGhpcy5zcGxpdExpbmVzKHRleHQpOyB9XG4gICAgdXBkYXRlRG9jKHRoaXMsIHtmcm9tOiBzdGFydCwgdG86IHN0YXJ0LCB0ZXh0OiB0ZXh0fSk7XG4gICAgc2V0U2VsZWN0aW9uKHRoaXMsIHNpbXBsZVNlbGVjdGlvbihzdGFydCksIHNlbF9kb250U2Nyb2xsKTtcbiAgfTtcblxuICBEb2MucHJvdG90eXBlID0gY3JlYXRlT2JqKEJyYW5jaENodW5rLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiBEb2MsXG4gICAgLy8gSXRlcmF0ZSBvdmVyIHRoZSBkb2N1bWVudC4gU3VwcG9ydHMgdHdvIGZvcm1zIC0tIHdpdGggb25seSBvbmVcbiAgICAvLyBhcmd1bWVudCwgaXQgY2FsbHMgdGhhdCBmb3IgZWFjaCBsaW5lIGluIHRoZSBkb2N1bWVudC4gV2l0aFxuICAgIC8vIHRocmVlLCBpdCBpdGVyYXRlcyBvdmVyIHRoZSByYW5nZSBnaXZlbiBieSB0aGUgZmlyc3QgdHdvICh3aXRoXG4gICAgLy8gdGhlIHNlY29uZCBiZWluZyBub24taW5jbHVzaXZlKS5cbiAgICBpdGVyOiBmdW5jdGlvbihmcm9tLCB0bywgb3ApIHtcbiAgICAgIGlmIChvcCkgeyB0aGlzLml0ZXJOKGZyb20gLSB0aGlzLmZpcnN0LCB0byAtIGZyb20sIG9wKTsgfVxuICAgICAgZWxzZSB7IHRoaXMuaXRlck4odGhpcy5maXJzdCwgdGhpcy5maXJzdCArIHRoaXMuc2l6ZSwgZnJvbSk7IH1cbiAgICB9LFxuXG4gICAgLy8gTm9uLXB1YmxpYyBpbnRlcmZhY2UgZm9yIGFkZGluZyBhbmQgcmVtb3ZpbmcgbGluZXMuXG4gICAgaW5zZXJ0OiBmdW5jdGlvbihhdCwgbGluZXMpIHtcbiAgICAgIHZhciBoZWlnaHQgPSAwO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7ICsraSkgeyBoZWlnaHQgKz0gbGluZXNbaV0uaGVpZ2h0OyB9XG4gICAgICB0aGlzLmluc2VydElubmVyKGF0IC0gdGhpcy5maXJzdCwgbGluZXMsIGhlaWdodCk7XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uKGF0LCBuKSB7IHRoaXMucmVtb3ZlSW5uZXIoYXQgLSB0aGlzLmZpcnN0LCBuKTsgfSxcblxuICAgIC8vIEZyb20gaGVyZSwgdGhlIG1ldGhvZHMgYXJlIHBhcnQgb2YgdGhlIHB1YmxpYyBpbnRlcmZhY2UuIE1vc3RcbiAgICAvLyBhcmUgYWxzbyBhdmFpbGFibGUgZnJvbSBDb2RlTWlycm9yIChlZGl0b3IpIGluc3RhbmNlcy5cblxuICAgIGdldFZhbHVlOiBmdW5jdGlvbihsaW5lU2VwKSB7XG4gICAgICB2YXIgbGluZXMgPSBnZXRMaW5lcyh0aGlzLCB0aGlzLmZpcnN0LCB0aGlzLmZpcnN0ICsgdGhpcy5zaXplKTtcbiAgICAgIGlmIChsaW5lU2VwID09PSBmYWxzZSkgeyByZXR1cm4gbGluZXMgfVxuICAgICAgcmV0dXJuIGxpbmVzLmpvaW4obGluZVNlcCB8fCB0aGlzLmxpbmVTZXBhcmF0b3IoKSlcbiAgICB9LFxuICAgIHNldFZhbHVlOiBkb2NNZXRob2RPcChmdW5jdGlvbihjb2RlKSB7XG4gICAgICB2YXIgdG9wID0gUG9zKHRoaXMuZmlyc3QsIDApLCBsYXN0ID0gdGhpcy5maXJzdCArIHRoaXMuc2l6ZSAtIDE7XG4gICAgICBtYWtlQ2hhbmdlKHRoaXMsIHtmcm9tOiB0b3AsIHRvOiBQb3MobGFzdCwgZ2V0TGluZSh0aGlzLCBsYXN0KS50ZXh0Lmxlbmd0aCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnNwbGl0TGluZXMoY29kZSksIG9yaWdpbjogXCJzZXRWYWx1ZVwiLCBmdWxsOiB0cnVlfSwgdHJ1ZSk7XG4gICAgICBpZiAodGhpcy5jbSkgeyBzY3JvbGxUb0Nvb3Jkcyh0aGlzLmNtLCAwLCAwKTsgfVxuICAgICAgc2V0U2VsZWN0aW9uKHRoaXMsIHNpbXBsZVNlbGVjdGlvbih0b3ApLCBzZWxfZG9udFNjcm9sbCk7XG4gICAgfSksXG4gICAgcmVwbGFjZVJhbmdlOiBmdW5jdGlvbihjb2RlLCBmcm9tLCB0bywgb3JpZ2luKSB7XG4gICAgICBmcm9tID0gY2xpcFBvcyh0aGlzLCBmcm9tKTtcbiAgICAgIHRvID0gdG8gPyBjbGlwUG9zKHRoaXMsIHRvKSA6IGZyb207XG4gICAgICByZXBsYWNlUmFuZ2UodGhpcywgY29kZSwgZnJvbSwgdG8sIG9yaWdpbik7XG4gICAgfSxcbiAgICBnZXRSYW5nZTogZnVuY3Rpb24oZnJvbSwgdG8sIGxpbmVTZXApIHtcbiAgICAgIHZhciBsaW5lcyA9IGdldEJldHdlZW4odGhpcywgY2xpcFBvcyh0aGlzLCBmcm9tKSwgY2xpcFBvcyh0aGlzLCB0bykpO1xuICAgICAgaWYgKGxpbmVTZXAgPT09IGZhbHNlKSB7IHJldHVybiBsaW5lcyB9XG4gICAgICByZXR1cm4gbGluZXMuam9pbihsaW5lU2VwIHx8IHRoaXMubGluZVNlcGFyYXRvcigpKVxuICAgIH0sXG5cbiAgICBnZXRMaW5lOiBmdW5jdGlvbihsaW5lKSB7dmFyIGwgPSB0aGlzLmdldExpbmVIYW5kbGUobGluZSk7IHJldHVybiBsICYmIGwudGV4dH0sXG5cbiAgICBnZXRMaW5lSGFuZGxlOiBmdW5jdGlvbihsaW5lKSB7aWYgKGlzTGluZSh0aGlzLCBsaW5lKSkgeyByZXR1cm4gZ2V0TGluZSh0aGlzLCBsaW5lKSB9fSxcbiAgICBnZXRMaW5lTnVtYmVyOiBmdW5jdGlvbihsaW5lKSB7cmV0dXJuIGxpbmVObyhsaW5lKX0sXG5cbiAgICBnZXRMaW5lSGFuZGxlVmlzdWFsU3RhcnQ6IGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIGlmICh0eXBlb2YgbGluZSA9PSBcIm51bWJlclwiKSB7IGxpbmUgPSBnZXRMaW5lKHRoaXMsIGxpbmUpOyB9XG4gICAgICByZXR1cm4gdmlzdWFsTGluZShsaW5lKVxuICAgIH0sXG5cbiAgICBsaW5lQ291bnQ6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLnNpemV9LFxuICAgIGZpcnN0TGluZTogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuZmlyc3R9LFxuICAgIGxhc3RMaW5lOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5maXJzdCArIHRoaXMuc2l6ZSAtIDF9LFxuXG4gICAgY2xpcFBvczogZnVuY3Rpb24ocG9zKSB7cmV0dXJuIGNsaXBQb3ModGhpcywgcG9zKX0sXG5cbiAgICBnZXRDdXJzb3I6IGZ1bmN0aW9uKHN0YXJ0KSB7XG4gICAgICB2YXIgcmFuZ2UgPSB0aGlzLnNlbC5wcmltYXJ5KCksIHBvcztcbiAgICAgIGlmIChzdGFydCA9PSBudWxsIHx8IHN0YXJ0ID09IFwiaGVhZFwiKSB7IHBvcyA9IHJhbmdlLmhlYWQ7IH1cbiAgICAgIGVsc2UgaWYgKHN0YXJ0ID09IFwiYW5jaG9yXCIpIHsgcG9zID0gcmFuZ2UuYW5jaG9yOyB9XG4gICAgICBlbHNlIGlmIChzdGFydCA9PSBcImVuZFwiIHx8IHN0YXJ0ID09IFwidG9cIiB8fCBzdGFydCA9PT0gZmFsc2UpIHsgcG9zID0gcmFuZ2UudG8oKTsgfVxuICAgICAgZWxzZSB7IHBvcyA9IHJhbmdlLmZyb20oKTsgfVxuICAgICAgcmV0dXJuIHBvc1xuICAgIH0sXG4gICAgbGlzdFNlbGVjdGlvbnM6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5zZWwucmFuZ2VzIH0sXG4gICAgc29tZXRoaW5nU2VsZWN0ZWQ6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLnNlbC5zb21ldGhpbmdTZWxlY3RlZCgpfSxcblxuICAgIHNldEN1cnNvcjogZG9jTWV0aG9kT3AoZnVuY3Rpb24obGluZSwgY2gsIG9wdGlvbnMpIHtcbiAgICAgIHNldFNpbXBsZVNlbGVjdGlvbih0aGlzLCBjbGlwUG9zKHRoaXMsIHR5cGVvZiBsaW5lID09IFwibnVtYmVyXCIgPyBQb3MobGluZSwgY2ggfHwgMCkgOiBsaW5lKSwgbnVsbCwgb3B0aW9ucyk7XG4gICAgfSksXG4gICAgc2V0U2VsZWN0aW9uOiBkb2NNZXRob2RPcChmdW5jdGlvbihhbmNob3IsIGhlYWQsIG9wdGlvbnMpIHtcbiAgICAgIHNldFNpbXBsZVNlbGVjdGlvbih0aGlzLCBjbGlwUG9zKHRoaXMsIGFuY2hvciksIGNsaXBQb3ModGhpcywgaGVhZCB8fCBhbmNob3IpLCBvcHRpb25zKTtcbiAgICB9KSxcbiAgICBleHRlbmRTZWxlY3Rpb246IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGhlYWQsIG90aGVyLCBvcHRpb25zKSB7XG4gICAgICBleHRlbmRTZWxlY3Rpb24odGhpcywgY2xpcFBvcyh0aGlzLCBoZWFkKSwgb3RoZXIgJiYgY2xpcFBvcyh0aGlzLCBvdGhlciksIG9wdGlvbnMpO1xuICAgIH0pLFxuICAgIGV4dGVuZFNlbGVjdGlvbnM6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGhlYWRzLCBvcHRpb25zKSB7XG4gICAgICBleHRlbmRTZWxlY3Rpb25zKHRoaXMsIGNsaXBQb3NBcnJheSh0aGlzLCBoZWFkcyksIG9wdGlvbnMpO1xuICAgIH0pLFxuICAgIGV4dGVuZFNlbGVjdGlvbnNCeTogZG9jTWV0aG9kT3AoZnVuY3Rpb24oZiwgb3B0aW9ucykge1xuICAgICAgdmFyIGhlYWRzID0gbWFwKHRoaXMuc2VsLnJhbmdlcywgZik7XG4gICAgICBleHRlbmRTZWxlY3Rpb25zKHRoaXMsIGNsaXBQb3NBcnJheSh0aGlzLCBoZWFkcyksIG9wdGlvbnMpO1xuICAgIH0pLFxuICAgIHNldFNlbGVjdGlvbnM6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKHJhbmdlcywgcHJpbWFyeSwgb3B0aW9ucykge1xuICAgICAgaWYgKCFyYW5nZXMubGVuZ3RoKSB7IHJldHVybiB9XG4gICAgICB2YXIgb3V0ID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgeyBvdXRbaV0gPSBuZXcgUmFuZ2UoY2xpcFBvcyh0aGlzLCByYW5nZXNbaV0uYW5jaG9yKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaXBQb3ModGhpcywgcmFuZ2VzW2ldLmhlYWQpKTsgfVxuICAgICAgaWYgKHByaW1hcnkgPT0gbnVsbCkgeyBwcmltYXJ5ID0gTWF0aC5taW4ocmFuZ2VzLmxlbmd0aCAtIDEsIHRoaXMuc2VsLnByaW1JbmRleCk7IH1cbiAgICAgIHNldFNlbGVjdGlvbih0aGlzLCBub3JtYWxpemVTZWxlY3Rpb24odGhpcy5jbSwgb3V0LCBwcmltYXJ5KSwgb3B0aW9ucyk7XG4gICAgfSksXG4gICAgYWRkU2VsZWN0aW9uOiBkb2NNZXRob2RPcChmdW5jdGlvbihhbmNob3IsIGhlYWQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciByYW5nZXMgPSB0aGlzLnNlbC5yYW5nZXMuc2xpY2UoMCk7XG4gICAgICByYW5nZXMucHVzaChuZXcgUmFuZ2UoY2xpcFBvcyh0aGlzLCBhbmNob3IpLCBjbGlwUG9zKHRoaXMsIGhlYWQgfHwgYW5jaG9yKSkpO1xuICAgICAgc2V0U2VsZWN0aW9uKHRoaXMsIG5vcm1hbGl6ZVNlbGVjdGlvbih0aGlzLmNtLCByYW5nZXMsIHJhbmdlcy5sZW5ndGggLSAxKSwgb3B0aW9ucyk7XG4gICAgfSksXG5cbiAgICBnZXRTZWxlY3Rpb246IGZ1bmN0aW9uKGxpbmVTZXApIHtcbiAgICAgIHZhciByYW5nZXMgPSB0aGlzLnNlbC5yYW5nZXMsIGxpbmVzO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHNlbCA9IGdldEJldHdlZW4odGhpcywgcmFuZ2VzW2ldLmZyb20oKSwgcmFuZ2VzW2ldLnRvKCkpO1xuICAgICAgICBsaW5lcyA9IGxpbmVzID8gbGluZXMuY29uY2F0KHNlbCkgOiBzZWw7XG4gICAgICB9XG4gICAgICBpZiAobGluZVNlcCA9PT0gZmFsc2UpIHsgcmV0dXJuIGxpbmVzIH1cbiAgICAgIGVsc2UgeyByZXR1cm4gbGluZXMuam9pbihsaW5lU2VwIHx8IHRoaXMubGluZVNlcGFyYXRvcigpKSB9XG4gICAgfSxcbiAgICBnZXRTZWxlY3Rpb25zOiBmdW5jdGlvbihsaW5lU2VwKSB7XG4gICAgICB2YXIgcGFydHMgPSBbXSwgcmFuZ2VzID0gdGhpcy5zZWwucmFuZ2VzO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHNlbCA9IGdldEJldHdlZW4odGhpcywgcmFuZ2VzW2ldLmZyb20oKSwgcmFuZ2VzW2ldLnRvKCkpO1xuICAgICAgICBpZiAobGluZVNlcCAhPT0gZmFsc2UpIHsgc2VsID0gc2VsLmpvaW4obGluZVNlcCB8fCB0aGlzLmxpbmVTZXBhcmF0b3IoKSk7IH1cbiAgICAgICAgcGFydHNbaV0gPSBzZWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGFydHNcbiAgICB9LFxuICAgIHJlcGxhY2VTZWxlY3Rpb246IGZ1bmN0aW9uKGNvZGUsIGNvbGxhcHNlLCBvcmlnaW4pIHtcbiAgICAgIHZhciBkdXAgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zZWwucmFuZ2VzLmxlbmd0aDsgaSsrKVxuICAgICAgICB7IGR1cFtpXSA9IGNvZGU7IH1cbiAgICAgIHRoaXMucmVwbGFjZVNlbGVjdGlvbnMoZHVwLCBjb2xsYXBzZSwgb3JpZ2luIHx8IFwiK2lucHV0XCIpO1xuICAgIH0sXG4gICAgcmVwbGFjZVNlbGVjdGlvbnM6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGNvZGUsIGNvbGxhcHNlLCBvcmlnaW4pIHtcbiAgICAgIHZhciBjaGFuZ2VzID0gW10sIHNlbCA9IHRoaXMuc2VsO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWwucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciByYW5nZSA9IHNlbC5yYW5nZXNbaV07XG4gICAgICAgIGNoYW5nZXNbaV0gPSB7ZnJvbTogcmFuZ2UuZnJvbSgpLCB0bzogcmFuZ2UudG8oKSwgdGV4dDogdGhpcy5zcGxpdExpbmVzKGNvZGVbaV0pLCBvcmlnaW46IG9yaWdpbn07XG4gICAgICB9XG4gICAgICB2YXIgbmV3U2VsID0gY29sbGFwc2UgJiYgY29sbGFwc2UgIT0gXCJlbmRcIiAmJiBjb21wdXRlUmVwbGFjZWRTZWwodGhpcywgY2hhbmdlcywgY29sbGFwc2UpO1xuICAgICAgZm9yICh2YXIgaSQxID0gY2hhbmdlcy5sZW5ndGggLSAxOyBpJDEgPj0gMDsgaSQxLS0pXG4gICAgICAgIHsgbWFrZUNoYW5nZSh0aGlzLCBjaGFuZ2VzW2kkMV0pOyB9XG4gICAgICBpZiAobmV3U2VsKSB7IHNldFNlbGVjdGlvblJlcGxhY2VIaXN0b3J5KHRoaXMsIG5ld1NlbCk7IH1cbiAgICAgIGVsc2UgaWYgKHRoaXMuY20pIHsgZW5zdXJlQ3Vyc29yVmlzaWJsZSh0aGlzLmNtKTsgfVxuICAgIH0pLFxuICAgIHVuZG86IGRvY01ldGhvZE9wKGZ1bmN0aW9uKCkge21ha2VDaGFuZ2VGcm9tSGlzdG9yeSh0aGlzLCBcInVuZG9cIik7fSksXG4gICAgcmVkbzogZG9jTWV0aG9kT3AoZnVuY3Rpb24oKSB7bWFrZUNoYW5nZUZyb21IaXN0b3J5KHRoaXMsIFwicmVkb1wiKTt9KSxcbiAgICB1bmRvU2VsZWN0aW9uOiBkb2NNZXRob2RPcChmdW5jdGlvbigpIHttYWtlQ2hhbmdlRnJvbUhpc3RvcnkodGhpcywgXCJ1bmRvXCIsIHRydWUpO30pLFxuICAgIHJlZG9TZWxlY3Rpb246IGRvY01ldGhvZE9wKGZ1bmN0aW9uKCkge21ha2VDaGFuZ2VGcm9tSGlzdG9yeSh0aGlzLCBcInJlZG9cIiwgdHJ1ZSk7fSksXG5cbiAgICBzZXRFeHRlbmRpbmc6IGZ1bmN0aW9uKHZhbCkge3RoaXMuZXh0ZW5kID0gdmFsO30sXG4gICAgZ2V0RXh0ZW5kaW5nOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5leHRlbmR9LFxuXG4gICAgaGlzdG9yeVNpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGhpc3QgPSB0aGlzLmhpc3RvcnksIGRvbmUgPSAwLCB1bmRvbmUgPSAwO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoaXN0LmRvbmUubGVuZ3RoOyBpKyspIHsgaWYgKCFoaXN0LmRvbmVbaV0ucmFuZ2VzKSB7ICsrZG9uZTsgfSB9XG4gICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBoaXN0LnVuZG9uZS5sZW5ndGg7IGkkMSsrKSB7IGlmICghaGlzdC51bmRvbmVbaSQxXS5yYW5nZXMpIHsgKyt1bmRvbmU7IH0gfVxuICAgICAgcmV0dXJuIHt1bmRvOiBkb25lLCByZWRvOiB1bmRvbmV9XG4gICAgfSxcbiAgICBjbGVhckhpc3Rvcnk6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KHRoaXMuaGlzdG9yeS5tYXhHZW5lcmF0aW9uKTtcbiAgICAgIGxpbmtlZERvY3ModGhpcywgZnVuY3Rpb24gKGRvYykgeyByZXR1cm4gZG9jLmhpc3RvcnkgPSB0aGlzJDEuaGlzdG9yeTsgfSwgdHJ1ZSk7XG4gICAgfSxcblxuICAgIG1hcmtDbGVhbjogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmNsZWFuR2VuZXJhdGlvbiA9IHRoaXMuY2hhbmdlR2VuZXJhdGlvbih0cnVlKTtcbiAgICB9LFxuICAgIGNoYW5nZUdlbmVyYXRpb246IGZ1bmN0aW9uKGZvcmNlU3BsaXQpIHtcbiAgICAgIGlmIChmb3JjZVNwbGl0KVxuICAgICAgICB7IHRoaXMuaGlzdG9yeS5sYXN0T3AgPSB0aGlzLmhpc3RvcnkubGFzdFNlbE9wID0gdGhpcy5oaXN0b3J5Lmxhc3RPcmlnaW4gPSBudWxsOyB9XG4gICAgICByZXR1cm4gdGhpcy5oaXN0b3J5LmdlbmVyYXRpb25cbiAgICB9LFxuICAgIGlzQ2xlYW46IGZ1bmN0aW9uIChnZW4pIHtcbiAgICAgIHJldHVybiB0aGlzLmhpc3RvcnkuZ2VuZXJhdGlvbiA9PSAoZ2VuIHx8IHRoaXMuY2xlYW5HZW5lcmF0aW9uKVxuICAgIH0sXG5cbiAgICBnZXRIaXN0b3J5OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB7ZG9uZTogY29weUhpc3RvcnlBcnJheSh0aGlzLmhpc3RvcnkuZG9uZSksXG4gICAgICAgICAgICAgIHVuZG9uZTogY29weUhpc3RvcnlBcnJheSh0aGlzLmhpc3RvcnkudW5kb25lKX1cbiAgICB9LFxuICAgIHNldEhpc3Rvcnk6IGZ1bmN0aW9uKGhpc3REYXRhKSB7XG4gICAgICB2YXIgaGlzdCA9IHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KHRoaXMuaGlzdG9yeS5tYXhHZW5lcmF0aW9uKTtcbiAgICAgIGhpc3QuZG9uZSA9IGNvcHlIaXN0b3J5QXJyYXkoaGlzdERhdGEuZG9uZS5zbGljZSgwKSwgbnVsbCwgdHJ1ZSk7XG4gICAgICBoaXN0LnVuZG9uZSA9IGNvcHlIaXN0b3J5QXJyYXkoaGlzdERhdGEudW5kb25lLnNsaWNlKDApLCBudWxsLCB0cnVlKTtcbiAgICB9LFxuXG4gICAgc2V0R3V0dGVyTWFya2VyOiBkb2NNZXRob2RPcChmdW5jdGlvbihsaW5lLCBndXR0ZXJJRCwgdmFsdWUpIHtcbiAgICAgIHJldHVybiBjaGFuZ2VMaW5lKHRoaXMsIGxpbmUsIFwiZ3V0dGVyXCIsIGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICAgIHZhciBtYXJrZXJzID0gbGluZS5ndXR0ZXJNYXJrZXJzIHx8IChsaW5lLmd1dHRlck1hcmtlcnMgPSB7fSk7XG4gICAgICAgIG1hcmtlcnNbZ3V0dGVySURdID0gdmFsdWU7XG4gICAgICAgIGlmICghdmFsdWUgJiYgaXNFbXB0eShtYXJrZXJzKSkgeyBsaW5lLmd1dHRlck1hcmtlcnMgPSBudWxsOyB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9KVxuICAgIH0pLFxuXG4gICAgY2xlYXJHdXR0ZXI6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGd1dHRlcklEKSB7XG4gICAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgICAgdGhpcy5pdGVyKGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICAgIGlmIChsaW5lLmd1dHRlck1hcmtlcnMgJiYgbGluZS5ndXR0ZXJNYXJrZXJzW2d1dHRlcklEXSkge1xuICAgICAgICAgIGNoYW5nZUxpbmUodGhpcyQxLCBsaW5lLCBcImd1dHRlclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsaW5lLmd1dHRlck1hcmtlcnNbZ3V0dGVySURdID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChpc0VtcHR5KGxpbmUuZ3V0dGVyTWFya2VycykpIHsgbGluZS5ndXR0ZXJNYXJrZXJzID0gbnVsbDsgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSksXG5cbiAgICBsaW5lSW5mbzogZnVuY3Rpb24obGluZSkge1xuICAgICAgdmFyIG47XG4gICAgICBpZiAodHlwZW9mIGxpbmUgPT0gXCJudW1iZXJcIikge1xuICAgICAgICBpZiAoIWlzTGluZSh0aGlzLCBsaW5lKSkgeyByZXR1cm4gbnVsbCB9XG4gICAgICAgIG4gPSBsaW5lO1xuICAgICAgICBsaW5lID0gZ2V0TGluZSh0aGlzLCBsaW5lKTtcbiAgICAgICAgaWYgKCFsaW5lKSB7IHJldHVybiBudWxsIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG4gPSBsaW5lTm8obGluZSk7XG4gICAgICAgIGlmIChuID09IG51bGwpIHsgcmV0dXJuIG51bGwgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHtsaW5lOiBuLCBoYW5kbGU6IGxpbmUsIHRleHQ6IGxpbmUudGV4dCwgZ3V0dGVyTWFya2VyczogbGluZS5ndXR0ZXJNYXJrZXJzLFxuICAgICAgICAgICAgICB0ZXh0Q2xhc3M6IGxpbmUudGV4dENsYXNzLCBiZ0NsYXNzOiBsaW5lLmJnQ2xhc3MsIHdyYXBDbGFzczogbGluZS53cmFwQ2xhc3MsXG4gICAgICAgICAgICAgIHdpZGdldHM6IGxpbmUud2lkZ2V0c31cbiAgICB9LFxuXG4gICAgYWRkTGluZUNsYXNzOiBkb2NNZXRob2RPcChmdW5jdGlvbihoYW5kbGUsIHdoZXJlLCBjbHMpIHtcbiAgICAgIHJldHVybiBjaGFuZ2VMaW5lKHRoaXMsIGhhbmRsZSwgd2hlcmUgPT0gXCJndXR0ZXJcIiA/IFwiZ3V0dGVyXCIgOiBcImNsYXNzXCIsIGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICAgIHZhciBwcm9wID0gd2hlcmUgPT0gXCJ0ZXh0XCIgPyBcInRleHRDbGFzc1wiXG4gICAgICAgICAgICAgICAgIDogd2hlcmUgPT0gXCJiYWNrZ3JvdW5kXCIgPyBcImJnQ2xhc3NcIlxuICAgICAgICAgICAgICAgICA6IHdoZXJlID09IFwiZ3V0dGVyXCIgPyBcImd1dHRlckNsYXNzXCIgOiBcIndyYXBDbGFzc1wiO1xuICAgICAgICBpZiAoIWxpbmVbcHJvcF0pIHsgbGluZVtwcm9wXSA9IGNsczsgfVxuICAgICAgICBlbHNlIGlmIChjbGFzc1Rlc3QoY2xzKS50ZXN0KGxpbmVbcHJvcF0pKSB7IHJldHVybiBmYWxzZSB9XG4gICAgICAgIGVsc2UgeyBsaW5lW3Byb3BdICs9IFwiIFwiICsgY2xzOyB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9KVxuICAgIH0pLFxuICAgIHJlbW92ZUxpbmVDbGFzczogZG9jTWV0aG9kT3AoZnVuY3Rpb24oaGFuZGxlLCB3aGVyZSwgY2xzKSB7XG4gICAgICByZXR1cm4gY2hhbmdlTGluZSh0aGlzLCBoYW5kbGUsIHdoZXJlID09IFwiZ3V0dGVyXCIgPyBcImd1dHRlclwiIDogXCJjbGFzc1wiLCBmdW5jdGlvbiAobGluZSkge1xuICAgICAgICB2YXIgcHJvcCA9IHdoZXJlID09IFwidGV4dFwiID8gXCJ0ZXh0Q2xhc3NcIlxuICAgICAgICAgICAgICAgICA6IHdoZXJlID09IFwiYmFja2dyb3VuZFwiID8gXCJiZ0NsYXNzXCJcbiAgICAgICAgICAgICAgICAgOiB3aGVyZSA9PSBcImd1dHRlclwiID8gXCJndXR0ZXJDbGFzc1wiIDogXCJ3cmFwQ2xhc3NcIjtcbiAgICAgICAgdmFyIGN1ciA9IGxpbmVbcHJvcF07XG4gICAgICAgIGlmICghY3VyKSB7IHJldHVybiBmYWxzZSB9XG4gICAgICAgIGVsc2UgaWYgKGNscyA9PSBudWxsKSB7IGxpbmVbcHJvcF0gPSBudWxsOyB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHZhciBmb3VuZCA9IGN1ci5tYXRjaChjbGFzc1Rlc3QoY2xzKSk7XG4gICAgICAgICAgaWYgKCFmb3VuZCkgeyByZXR1cm4gZmFsc2UgfVxuICAgICAgICAgIHZhciBlbmQgPSBmb3VuZC5pbmRleCArIGZvdW5kWzBdLmxlbmd0aDtcbiAgICAgICAgICBsaW5lW3Byb3BdID0gY3VyLnNsaWNlKDAsIGZvdW5kLmluZGV4KSArICghZm91bmQuaW5kZXggfHwgZW5kID09IGN1ci5sZW5ndGggPyBcIlwiIDogXCIgXCIpICsgY3VyLnNsaWNlKGVuZCkgfHwgbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfSlcbiAgICB9KSxcblxuICAgIGFkZExpbmVXaWRnZXQ6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGhhbmRsZSwgbm9kZSwgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIGFkZExpbmVXaWRnZXQodGhpcywgaGFuZGxlLCBub2RlLCBvcHRpb25zKVxuICAgIH0pLFxuICAgIHJlbW92ZUxpbmVXaWRnZXQ6IGZ1bmN0aW9uKHdpZGdldCkgeyB3aWRnZXQuY2xlYXIoKTsgfSxcblxuICAgIG1hcmtUZXh0OiBmdW5jdGlvbihmcm9tLCB0bywgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIG1hcmtUZXh0KHRoaXMsIGNsaXBQb3ModGhpcywgZnJvbSksIGNsaXBQb3ModGhpcywgdG8pLCBvcHRpb25zLCBvcHRpb25zICYmIG9wdGlvbnMudHlwZSB8fCBcInJhbmdlXCIpXG4gICAgfSxcbiAgICBzZXRCb29rbWFyazogZnVuY3Rpb24ocG9zLCBvcHRpb25zKSB7XG4gICAgICB2YXIgcmVhbE9wdHMgPSB7cmVwbGFjZWRXaXRoOiBvcHRpb25zICYmIChvcHRpb25zLm5vZGVUeXBlID09IG51bGwgPyBvcHRpb25zLndpZGdldCA6IG9wdGlvbnMpLFxuICAgICAgICAgICAgICAgICAgICAgIGluc2VydExlZnQ6IG9wdGlvbnMgJiYgb3B0aW9ucy5pbnNlcnRMZWZ0LFxuICAgICAgICAgICAgICAgICAgICAgIGNsZWFyV2hlbkVtcHR5OiBmYWxzZSwgc2hhcmVkOiBvcHRpb25zICYmIG9wdGlvbnMuc2hhcmVkLFxuICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZU1vdXNlRXZlbnRzOiBvcHRpb25zICYmIG9wdGlvbnMuaGFuZGxlTW91c2VFdmVudHN9O1xuICAgICAgcG9zID0gY2xpcFBvcyh0aGlzLCBwb3MpO1xuICAgICAgcmV0dXJuIG1hcmtUZXh0KHRoaXMsIHBvcywgcG9zLCByZWFsT3B0cywgXCJib29rbWFya1wiKVxuICAgIH0sXG4gICAgZmluZE1hcmtzQXQ6IGZ1bmN0aW9uKHBvcykge1xuICAgICAgcG9zID0gY2xpcFBvcyh0aGlzLCBwb3MpO1xuICAgICAgdmFyIG1hcmtlcnMgPSBbXSwgc3BhbnMgPSBnZXRMaW5lKHRoaXMsIHBvcy5saW5lKS5tYXJrZWRTcGFucztcbiAgICAgIGlmIChzcGFucykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBzcGFuID0gc3BhbnNbaV07XG4gICAgICAgIGlmICgoc3Bhbi5mcm9tID09IG51bGwgfHwgc3Bhbi5mcm9tIDw9IHBvcy5jaCkgJiZcbiAgICAgICAgICAgIChzcGFuLnRvID09IG51bGwgfHwgc3Bhbi50byA+PSBwb3MuY2gpKVxuICAgICAgICAgIHsgbWFya2Vycy5wdXNoKHNwYW4ubWFya2VyLnBhcmVudCB8fCBzcGFuLm1hcmtlcik7IH1cbiAgICAgIH0gfVxuICAgICAgcmV0dXJuIG1hcmtlcnNcbiAgICB9LFxuICAgIGZpbmRNYXJrczogZnVuY3Rpb24oZnJvbSwgdG8sIGZpbHRlcikge1xuICAgICAgZnJvbSA9IGNsaXBQb3ModGhpcywgZnJvbSk7IHRvID0gY2xpcFBvcyh0aGlzLCB0byk7XG4gICAgICB2YXIgZm91bmQgPSBbXSwgbGluZU5vID0gZnJvbS5saW5lO1xuICAgICAgdGhpcy5pdGVyKGZyb20ubGluZSwgdG8ubGluZSArIDEsIGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICAgIHZhciBzcGFucyA9IGxpbmUubWFya2VkU3BhbnM7XG4gICAgICAgIGlmIChzcGFucykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIHNwYW4gPSBzcGFuc1tpXTtcbiAgICAgICAgICBpZiAoIShzcGFuLnRvICE9IG51bGwgJiYgbGluZU5vID09IGZyb20ubGluZSAmJiBmcm9tLmNoID49IHNwYW4udG8gfHxcbiAgICAgICAgICAgICAgICBzcGFuLmZyb20gPT0gbnVsbCAmJiBsaW5lTm8gIT0gZnJvbS5saW5lIHx8XG4gICAgICAgICAgICAgICAgc3Bhbi5mcm9tICE9IG51bGwgJiYgbGluZU5vID09IHRvLmxpbmUgJiYgc3Bhbi5mcm9tID49IHRvLmNoKSAmJlxuICAgICAgICAgICAgICAoIWZpbHRlciB8fCBmaWx0ZXIoc3Bhbi5tYXJrZXIpKSlcbiAgICAgICAgICAgIHsgZm91bmQucHVzaChzcGFuLm1hcmtlci5wYXJlbnQgfHwgc3Bhbi5tYXJrZXIpOyB9XG4gICAgICAgIH0gfVxuICAgICAgICArK2xpbmVObztcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZvdW5kXG4gICAgfSxcbiAgICBnZXRBbGxNYXJrczogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbWFya2VycyA9IFtdO1xuICAgICAgdGhpcy5pdGVyKGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICAgIHZhciBzcHMgPSBsaW5lLm1hcmtlZFNwYW5zO1xuICAgICAgICBpZiAoc3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgc3BzLmxlbmd0aDsgKytpKVxuICAgICAgICAgIHsgaWYgKHNwc1tpXS5mcm9tICE9IG51bGwpIHsgbWFya2Vycy5wdXNoKHNwc1tpXS5tYXJrZXIpOyB9IH0gfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gbWFya2Vyc1xuICAgIH0sXG5cbiAgICBwb3NGcm9tSW5kZXg6IGZ1bmN0aW9uKG9mZikge1xuICAgICAgdmFyIGNoLCBsaW5lTm8gPSB0aGlzLmZpcnN0LCBzZXBTaXplID0gdGhpcy5saW5lU2VwYXJhdG9yKCkubGVuZ3RoO1xuICAgICAgdGhpcy5pdGVyKGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICAgIHZhciBzeiA9IGxpbmUudGV4dC5sZW5ndGggKyBzZXBTaXplO1xuICAgICAgICBpZiAoc3ogPiBvZmYpIHsgY2ggPSBvZmY7IHJldHVybiB0cnVlIH1cbiAgICAgICAgb2ZmIC09IHN6O1xuICAgICAgICArK2xpbmVObztcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNsaXBQb3ModGhpcywgUG9zKGxpbmVObywgY2gpKVxuICAgIH0sXG4gICAgaW5kZXhGcm9tUG9zOiBmdW5jdGlvbiAoY29vcmRzKSB7XG4gICAgICBjb29yZHMgPSBjbGlwUG9zKHRoaXMsIGNvb3Jkcyk7XG4gICAgICB2YXIgaW5kZXggPSBjb29yZHMuY2g7XG4gICAgICBpZiAoY29vcmRzLmxpbmUgPCB0aGlzLmZpcnN0IHx8IGNvb3Jkcy5jaCA8IDApIHsgcmV0dXJuIDAgfVxuICAgICAgdmFyIHNlcFNpemUgPSB0aGlzLmxpbmVTZXBhcmF0b3IoKS5sZW5ndGg7XG4gICAgICB0aGlzLml0ZXIodGhpcy5maXJzdCwgY29vcmRzLmxpbmUsIGZ1bmN0aW9uIChsaW5lKSB7IC8vIGl0ZXIgYWJvcnRzIHdoZW4gY2FsbGJhY2sgcmV0dXJucyBhIHRydXRoeSB2YWx1ZVxuICAgICAgICBpbmRleCArPSBsaW5lLnRleHQubGVuZ3RoICsgc2VwU2l6ZTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGluZGV4XG4gICAgfSxcblxuICAgIGNvcHk6IGZ1bmN0aW9uKGNvcHlIaXN0b3J5KSB7XG4gICAgICB2YXIgZG9jID0gbmV3IERvYyhnZXRMaW5lcyh0aGlzLCB0aGlzLmZpcnN0LCB0aGlzLmZpcnN0ICsgdGhpcy5zaXplKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZU9wdGlvbiwgdGhpcy5maXJzdCwgdGhpcy5saW5lU2VwLCB0aGlzLmRpcmVjdGlvbik7XG4gICAgICBkb2Muc2Nyb2xsVG9wID0gdGhpcy5zY3JvbGxUb3A7IGRvYy5zY3JvbGxMZWZ0ID0gdGhpcy5zY3JvbGxMZWZ0O1xuICAgICAgZG9jLnNlbCA9IHRoaXMuc2VsO1xuICAgICAgZG9jLmV4dGVuZCA9IGZhbHNlO1xuICAgICAgaWYgKGNvcHlIaXN0b3J5KSB7XG4gICAgICAgIGRvYy5oaXN0b3J5LnVuZG9EZXB0aCA9IHRoaXMuaGlzdG9yeS51bmRvRGVwdGg7XG4gICAgICAgIGRvYy5zZXRIaXN0b3J5KHRoaXMuZ2V0SGlzdG9yeSgpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkb2NcbiAgICB9LFxuXG4gICAgbGlua2VkRG9jOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBpZiAoIW9wdGlvbnMpIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICB2YXIgZnJvbSA9IHRoaXMuZmlyc3QsIHRvID0gdGhpcy5maXJzdCArIHRoaXMuc2l6ZTtcbiAgICAgIGlmIChvcHRpb25zLmZyb20gIT0gbnVsbCAmJiBvcHRpb25zLmZyb20gPiBmcm9tKSB7IGZyb20gPSBvcHRpb25zLmZyb207IH1cbiAgICAgIGlmIChvcHRpb25zLnRvICE9IG51bGwgJiYgb3B0aW9ucy50byA8IHRvKSB7IHRvID0gb3B0aW9ucy50bzsgfVxuICAgICAgdmFyIGNvcHkgPSBuZXcgRG9jKGdldExpbmVzKHRoaXMsIGZyb20sIHRvKSwgb3B0aW9ucy5tb2RlIHx8IHRoaXMubW9kZU9wdGlvbiwgZnJvbSwgdGhpcy5saW5lU2VwLCB0aGlzLmRpcmVjdGlvbik7XG4gICAgICBpZiAob3B0aW9ucy5zaGFyZWRIaXN0KSB7IGNvcHkuaGlzdG9yeSA9IHRoaXMuaGlzdG9yeVxuICAgICAgOyB9KHRoaXMubGlua2VkIHx8ICh0aGlzLmxpbmtlZCA9IFtdKSkucHVzaCh7ZG9jOiBjb3B5LCBzaGFyZWRIaXN0OiBvcHRpb25zLnNoYXJlZEhpc3R9KTtcbiAgICAgIGNvcHkubGlua2VkID0gW3tkb2M6IHRoaXMsIGlzUGFyZW50OiB0cnVlLCBzaGFyZWRIaXN0OiBvcHRpb25zLnNoYXJlZEhpc3R9XTtcbiAgICAgIGNvcHlTaGFyZWRNYXJrZXJzKGNvcHksIGZpbmRTaGFyZWRNYXJrZXJzKHRoaXMpKTtcbiAgICAgIHJldHVybiBjb3B5XG4gICAgfSxcbiAgICB1bmxpbmtEb2M6IGZ1bmN0aW9uKG90aGVyKSB7XG4gICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBDb2RlTWlycm9yKSB7IG90aGVyID0gb3RoZXIuZG9jOyB9XG4gICAgICBpZiAodGhpcy5saW5rZWQpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpbmtlZC5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgbGluayA9IHRoaXMubGlua2VkW2ldO1xuICAgICAgICBpZiAobGluay5kb2MgIT0gb3RoZXIpIHsgY29udGludWUgfVxuICAgICAgICB0aGlzLmxpbmtlZC5zcGxpY2UoaSwgMSk7XG4gICAgICAgIG90aGVyLnVubGlua0RvYyh0aGlzKTtcbiAgICAgICAgZGV0YWNoU2hhcmVkTWFya2VycyhmaW5kU2hhcmVkTWFya2Vycyh0aGlzKSk7XG4gICAgICAgIGJyZWFrXG4gICAgICB9IH1cbiAgICAgIC8vIElmIHRoZSBoaXN0b3JpZXMgd2VyZSBzaGFyZWQsIHNwbGl0IHRoZW0gYWdhaW5cbiAgICAgIGlmIChvdGhlci5oaXN0b3J5ID09IHRoaXMuaGlzdG9yeSkge1xuICAgICAgICB2YXIgc3BsaXRJZHMgPSBbb3RoZXIuaWRdO1xuICAgICAgICBsaW5rZWREb2NzKG90aGVyLCBmdW5jdGlvbiAoZG9jKSB7IHJldHVybiBzcGxpdElkcy5wdXNoKGRvYy5pZCk7IH0sIHRydWUpO1xuICAgICAgICBvdGhlci5oaXN0b3J5ID0gbmV3IEhpc3RvcnkobnVsbCk7XG4gICAgICAgIG90aGVyLmhpc3RvcnkuZG9uZSA9IGNvcHlIaXN0b3J5QXJyYXkodGhpcy5oaXN0b3J5LmRvbmUsIHNwbGl0SWRzKTtcbiAgICAgICAgb3RoZXIuaGlzdG9yeS51bmRvbmUgPSBjb3B5SGlzdG9yeUFycmF5KHRoaXMuaGlzdG9yeS51bmRvbmUsIHNwbGl0SWRzKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGl0ZXJMaW5rZWREb2NzOiBmdW5jdGlvbihmKSB7bGlua2VkRG9jcyh0aGlzLCBmKTt9LFxuXG4gICAgZ2V0TW9kZTogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMubW9kZX0sXG4gICAgZ2V0RWRpdG9yOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5jbX0sXG5cbiAgICBzcGxpdExpbmVzOiBmdW5jdGlvbihzdHIpIHtcbiAgICAgIGlmICh0aGlzLmxpbmVTZXApIHsgcmV0dXJuIHN0ci5zcGxpdCh0aGlzLmxpbmVTZXApIH1cbiAgICAgIHJldHVybiBzcGxpdExpbmVzQXV0byhzdHIpXG4gICAgfSxcbiAgICBsaW5lU2VwYXJhdG9yOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMubGluZVNlcCB8fCBcIlxcblwiIH0sXG5cbiAgICBzZXREaXJlY3Rpb246IGRvY01ldGhvZE9wKGZ1bmN0aW9uIChkaXIpIHtcbiAgICAgIGlmIChkaXIgIT0gXCJydGxcIikgeyBkaXIgPSBcImx0clwiOyB9XG4gICAgICBpZiAoZGlyID09IHRoaXMuZGlyZWN0aW9uKSB7IHJldHVybiB9XG4gICAgICB0aGlzLmRpcmVjdGlvbiA9IGRpcjtcbiAgICAgIHRoaXMuaXRlcihmdW5jdGlvbiAobGluZSkgeyByZXR1cm4gbGluZS5vcmRlciA9IG51bGw7IH0pO1xuICAgICAgaWYgKHRoaXMuY20pIHsgZGlyZWN0aW9uQ2hhbmdlZCh0aGlzLmNtKTsgfVxuICAgIH0pXG4gIH0pO1xuXG4gIC8vIFB1YmxpYyBhbGlhcy5cbiAgRG9jLnByb3RvdHlwZS5lYWNoTGluZSA9IERvYy5wcm90b3R5cGUuaXRlcjtcblxuICAvLyBLbHVkZ2UgdG8gd29yayBhcm91bmQgc3RyYW5nZSBJRSBiZWhhdmlvciB3aGVyZSBpdCdsbCBzb21ldGltZXNcbiAgLy8gcmUtZmlyZSBhIHNlcmllcyBvZiBkcmFnLXJlbGF0ZWQgZXZlbnRzIHJpZ2h0IGFmdGVyIHRoZSBkcm9wICgjMTU1MSlcbiAgdmFyIGxhc3REcm9wID0gMDtcblxuICBmdW5jdGlvbiBvbkRyb3AoZSkge1xuICAgIHZhciBjbSA9IHRoaXM7XG4gICAgY2xlYXJEcmFnQ3Vyc29yKGNtKTtcbiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpIHx8IGV2ZW50SW5XaWRnZXQoY20uZGlzcGxheSwgZSkpXG4gICAgICB7IHJldHVybiB9XG4gICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcbiAgICBpZiAoaWUpIHsgbGFzdERyb3AgPSArbmV3IERhdGU7IH1cbiAgICB2YXIgcG9zID0gcG9zRnJvbU1vdXNlKGNtLCBlLCB0cnVlKSwgZmlsZXMgPSBlLmRhdGFUcmFuc2Zlci5maWxlcztcbiAgICBpZiAoIXBvcyB8fCBjbS5pc1JlYWRPbmx5KCkpIHsgcmV0dXJuIH1cbiAgICAvLyBNaWdodCBiZSBhIGZpbGUgZHJvcCwgaW4gd2hpY2ggY2FzZSB3ZSBzaW1wbHkgZXh0cmFjdCB0aGUgdGV4dFxuICAgIC8vIGFuZCBpbnNlcnQgaXQuXG4gICAgaWYgKGZpbGVzICYmIGZpbGVzLmxlbmd0aCAmJiB3aW5kb3cuRmlsZVJlYWRlciAmJiB3aW5kb3cuRmlsZSkge1xuICAgICAgdmFyIG4gPSBmaWxlcy5sZW5ndGgsIHRleHQgPSBBcnJheShuKSwgcmVhZCA9IDA7XG4gICAgICB2YXIgbWFya0FzUmVhZEFuZFBhc3RlSWZBbGxGaWxlc0FyZVJlYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgrK3JlYWQgPT0gbikge1xuICAgICAgICAgIG9wZXJhdGlvbihjbSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcG9zID0gY2xpcFBvcyhjbS5kb2MsIHBvcyk7XG4gICAgICAgICAgICB2YXIgY2hhbmdlID0ge2Zyb206IHBvcywgdG86IHBvcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogY20uZG9jLnNwbGl0TGluZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LmZpbHRlcihmdW5jdGlvbiAodCkgeyByZXR1cm4gdCAhPSBudWxsOyB9KS5qb2luKGNtLmRvYy5saW5lU2VwYXJhdG9yKCkpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiBcInBhc3RlXCJ9O1xuICAgICAgICAgICAgbWFrZUNoYW5nZShjbS5kb2MsIGNoYW5nZSk7XG4gICAgICAgICAgICBzZXRTZWxlY3Rpb25SZXBsYWNlSGlzdG9yeShjbS5kb2MsIHNpbXBsZVNlbGVjdGlvbihjbGlwUG9zKGNtLmRvYywgcG9zKSwgY2xpcFBvcyhjbS5kb2MsIGNoYW5nZUVuZChjaGFuZ2UpKSkpO1xuICAgICAgICAgIH0pKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB2YXIgcmVhZFRleHRGcm9tRmlsZSA9IGZ1bmN0aW9uIChmaWxlLCBpKSB7XG4gICAgICAgIGlmIChjbS5vcHRpb25zLmFsbG93RHJvcEZpbGVUeXBlcyAmJlxuICAgICAgICAgICAgaW5kZXhPZihjbS5vcHRpb25zLmFsbG93RHJvcEZpbGVUeXBlcywgZmlsZS50eXBlKSA9PSAtMSkge1xuICAgICAgICAgIG1hcmtBc1JlYWRBbmRQYXN0ZUlmQWxsRmlsZXNBcmVSZWFkKCk7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyO1xuICAgICAgICByZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1hcmtBc1JlYWRBbmRQYXN0ZUlmQWxsRmlsZXNBcmVSZWFkKCk7IH07XG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGNvbnRlbnQgPSByZWFkZXIucmVzdWx0O1xuICAgICAgICAgIGlmICgvW1xceDAwLVxceDA4XFx4MGUtXFx4MWZdezJ9Ly50ZXN0KGNvbnRlbnQpKSB7XG4gICAgICAgICAgICBtYXJrQXNSZWFkQW5kUGFzdGVJZkFsbEZpbGVzQXJlUmVhZCgpO1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICAgIHRleHRbaV0gPSBjb250ZW50O1xuICAgICAgICAgIG1hcmtBc1JlYWRBbmRQYXN0ZUlmQWxsRmlsZXNBcmVSZWFkKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpO1xuICAgICAgfTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHsgcmVhZFRleHRGcm9tRmlsZShmaWxlc1tpXSwgaSk7IH1cbiAgICB9IGVsc2UgeyAvLyBOb3JtYWwgZHJvcFxuICAgICAgLy8gRG9uJ3QgZG8gYSByZXBsYWNlIGlmIHRoZSBkcm9wIGhhcHBlbmVkIGluc2lkZSBvZiB0aGUgc2VsZWN0ZWQgdGV4dC5cbiAgICAgIGlmIChjbS5zdGF0ZS5kcmFnZ2luZ1RleHQgJiYgY20uZG9jLnNlbC5jb250YWlucyhwb3MpID4gLTEpIHtcbiAgICAgICAgY20uc3RhdGUuZHJhZ2dpbmdUZXh0KGUpO1xuICAgICAgICAvLyBFbnN1cmUgdGhlIGVkaXRvciBpcyByZS1mb2N1c2VkXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gY20uZGlzcGxheS5pbnB1dC5mb2N1cygpOyB9LCAyMCk7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHRleHQkMSA9IGUuZGF0YVRyYW5zZmVyLmdldERhdGEoXCJUZXh0XCIpO1xuICAgICAgICBpZiAodGV4dCQxKSB7XG4gICAgICAgICAgdmFyIHNlbGVjdGVkO1xuICAgICAgICAgIGlmIChjbS5zdGF0ZS5kcmFnZ2luZ1RleHQgJiYgIWNtLnN0YXRlLmRyYWdnaW5nVGV4dC5jb3B5KVxuICAgICAgICAgICAgeyBzZWxlY3RlZCA9IGNtLmxpc3RTZWxlY3Rpb25zKCk7IH1cbiAgICAgICAgICBzZXRTZWxlY3Rpb25Ob1VuZG8oY20uZG9jLCBzaW1wbGVTZWxlY3Rpb24ocG9zLCBwb3MpKTtcbiAgICAgICAgICBpZiAoc2VsZWN0ZWQpIHsgZm9yICh2YXIgaSQxID0gMDsgaSQxIDwgc2VsZWN0ZWQubGVuZ3RoOyArK2kkMSlcbiAgICAgICAgICAgIHsgcmVwbGFjZVJhbmdlKGNtLmRvYywgXCJcIiwgc2VsZWN0ZWRbaSQxXS5hbmNob3IsIHNlbGVjdGVkW2kkMV0uaGVhZCwgXCJkcmFnXCIpOyB9IH1cbiAgICAgICAgICBjbS5yZXBsYWNlU2VsZWN0aW9uKHRleHQkMSwgXCJhcm91bmRcIiwgXCJwYXN0ZVwiKTtcbiAgICAgICAgICBjbS5kaXNwbGF5LmlucHV0LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNhdGNoKGUkMSl7fVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRHJhZ1N0YXJ0KGNtLCBlKSB7XG4gICAgaWYgKGllICYmICghY20uc3RhdGUuZHJhZ2dpbmdUZXh0IHx8ICtuZXcgRGF0ZSAtIGxhc3REcm9wIDwgMTAwKSkgeyBlX3N0b3AoZSk7IHJldHVybiB9XG4gICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBlKSB8fCBldmVudEluV2lkZ2V0KGNtLmRpc3BsYXksIGUpKSB7IHJldHVybiB9XG5cbiAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKFwiVGV4dFwiLCBjbS5nZXRTZWxlY3Rpb24oKSk7XG4gICAgZS5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9IFwiY29weU1vdmVcIjtcblxuICAgIC8vIFVzZSBkdW1teSBpbWFnZSBpbnN0ZWFkIG9mIGRlZmF1bHQgYnJvd3NlcnMgaW1hZ2UuXG4gICAgLy8gUmVjZW50IFNhZmFyaSAofjYuMC4yKSBoYXZlIGEgdGVuZGVuY3kgdG8gc2VnZmF1bHQgd2hlbiB0aGlzIGhhcHBlbnMsIHNvIHdlIGRvbid0IGRvIGl0IHRoZXJlLlxuICAgIGlmIChlLmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UgJiYgIXNhZmFyaSkge1xuICAgICAgdmFyIGltZyA9IGVsdChcImltZ1wiLCBudWxsLCBudWxsLCBcInBvc2l0aW9uOiBmaXhlZDsgbGVmdDogMDsgdG9wOiAwO1wiKTtcbiAgICAgIGltZy5zcmMgPSBcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBQUFBQUNINUJBRUtBQUVBTEFBQUFBQUJBQUVBQUFJQ1RBRUFPdz09XCI7XG4gICAgICBpZiAocHJlc3RvKSB7XG4gICAgICAgIGltZy53aWR0aCA9IGltZy5oZWlnaHQgPSAxO1xuICAgICAgICBjbS5kaXNwbGF5LndyYXBwZXIuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgICAgICAgLy8gRm9yY2UgYSByZWxheW91dCwgb3IgT3BlcmEgd29uJ3QgdXNlIG91ciBpbWFnZSBmb3Igc29tZSBvYnNjdXJlIHJlYXNvblxuICAgICAgICBpbWcuX3RvcCA9IGltZy5vZmZzZXRUb3A7XG4gICAgICB9XG4gICAgICBlLmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoaW1nLCAwLCAwKTtcbiAgICAgIGlmIChwcmVzdG8pIHsgaW1nLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaW1nKTsgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRHJhZ092ZXIoY20sIGUpIHtcbiAgICB2YXIgcG9zID0gcG9zRnJvbU1vdXNlKGNtLCBlKTtcbiAgICBpZiAoIXBvcykgeyByZXR1cm4gfVxuICAgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIGRyYXdTZWxlY3Rpb25DdXJzb3IoY20sIHBvcywgZnJhZyk7XG4gICAgaWYgKCFjbS5kaXNwbGF5LmRyYWdDdXJzb3IpIHtcbiAgICAgIGNtLmRpc3BsYXkuZHJhZ0N1cnNvciA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItY3Vyc29ycyBDb2RlTWlycm9yLWRyYWdjdXJzb3JzXCIpO1xuICAgICAgY20uZGlzcGxheS5saW5lU3BhY2UuaW5zZXJ0QmVmb3JlKGNtLmRpc3BsYXkuZHJhZ0N1cnNvciwgY20uZGlzcGxheS5jdXJzb3JEaXYpO1xuICAgIH1cbiAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChjbS5kaXNwbGF5LmRyYWdDdXJzb3IsIGZyYWcpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xlYXJEcmFnQ3Vyc29yKGNtKSB7XG4gICAgaWYgKGNtLmRpc3BsYXkuZHJhZ0N1cnNvcikge1xuICAgICAgY20uZGlzcGxheS5saW5lU3BhY2UucmVtb3ZlQ2hpbGQoY20uZGlzcGxheS5kcmFnQ3Vyc29yKTtcbiAgICAgIGNtLmRpc3BsYXkuZHJhZ0N1cnNvciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLy8gVGhlc2UgbXVzdCBiZSBoYW5kbGVkIGNhcmVmdWxseSwgYmVjYXVzZSBuYWl2ZWx5IHJlZ2lzdGVyaW5nIGFcbiAgLy8gaGFuZGxlciBmb3IgZWFjaCBlZGl0b3Igd2lsbCBjYXVzZSB0aGUgZWRpdG9ycyB0byBuZXZlciBiZVxuICAvLyBnYXJiYWdlIGNvbGxlY3RlZC5cblxuICBmdW5jdGlvbiBmb3JFYWNoQ29kZU1pcnJvcihmKSB7XG4gICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSB7IHJldHVybiB9XG4gICAgdmFyIGJ5Q2xhc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiQ29kZU1pcnJvclwiKSwgZWRpdG9ycyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnlDbGFzcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGNtID0gYnlDbGFzc1tpXS5Db2RlTWlycm9yO1xuICAgICAgaWYgKGNtKSB7IGVkaXRvcnMucHVzaChjbSk7IH1cbiAgICB9XG4gICAgaWYgKGVkaXRvcnMubGVuZ3RoKSB7IGVkaXRvcnNbMF0ub3BlcmF0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWRpdG9ycy5sZW5ndGg7IGkrKykgeyBmKGVkaXRvcnNbaV0pOyB9XG4gICAgfSk7IH1cbiAgfVxuXG4gIHZhciBnbG9iYWxzUmVnaXN0ZXJlZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBlbnN1cmVHbG9iYWxIYW5kbGVycygpIHtcbiAgICBpZiAoZ2xvYmFsc1JlZ2lzdGVyZWQpIHsgcmV0dXJuIH1cbiAgICByZWdpc3Rlckdsb2JhbEhhbmRsZXJzKCk7XG4gICAgZ2xvYmFsc1JlZ2lzdGVyZWQgPSB0cnVlO1xuICB9XG4gIGZ1bmN0aW9uIHJlZ2lzdGVyR2xvYmFsSGFuZGxlcnMoKSB7XG4gICAgLy8gV2hlbiB0aGUgd2luZG93IHJlc2l6ZXMsIHdlIG5lZWQgdG8gcmVmcmVzaCBhY3RpdmUgZWRpdG9ycy5cbiAgICB2YXIgcmVzaXplVGltZXI7XG4gICAgb24od2luZG93LCBcInJlc2l6ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAocmVzaXplVGltZXIgPT0gbnVsbCkgeyByZXNpemVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXNpemVUaW1lciA9IG51bGw7XG4gICAgICAgIGZvckVhY2hDb2RlTWlycm9yKG9uUmVzaXplKTtcbiAgICAgIH0sIDEwMCk7IH1cbiAgICB9KTtcbiAgICAvLyBXaGVuIHRoZSB3aW5kb3cgbG9zZXMgZm9jdXMsIHdlIHdhbnQgdG8gc2hvdyB0aGUgZWRpdG9yIGFzIGJsdXJyZWRcbiAgICBvbih3aW5kb3csIFwiYmx1clwiLCBmdW5jdGlvbiAoKSB7IHJldHVybiBmb3JFYWNoQ29kZU1pcnJvcihvbkJsdXIpOyB9KTtcbiAgfVxuICAvLyBDYWxsZWQgd2hlbiB0aGUgd2luZG93IHJlc2l6ZXNcbiAgZnVuY3Rpb24gb25SZXNpemUoY20pIHtcbiAgICB2YXIgZCA9IGNtLmRpc3BsYXk7XG4gICAgLy8gTWlnaHQgYmUgYSB0ZXh0IHNjYWxpbmcgb3BlcmF0aW9uLCBjbGVhciBzaXplIGNhY2hlcy5cbiAgICBkLmNhY2hlZENoYXJXaWR0aCA9IGQuY2FjaGVkVGV4dEhlaWdodCA9IGQuY2FjaGVkUGFkZGluZ0ggPSBudWxsO1xuICAgIGQuc2Nyb2xsYmFyc0NsaXBwZWQgPSBmYWxzZTtcbiAgICBjbS5zZXRTaXplKCk7XG4gIH1cblxuICB2YXIga2V5TmFtZXMgPSB7XG4gICAgMzogXCJQYXVzZVwiLCA4OiBcIkJhY2tzcGFjZVwiLCA5OiBcIlRhYlwiLCAxMzogXCJFbnRlclwiLCAxNjogXCJTaGlmdFwiLCAxNzogXCJDdHJsXCIsIDE4OiBcIkFsdFwiLFxuICAgIDE5OiBcIlBhdXNlXCIsIDIwOiBcIkNhcHNMb2NrXCIsIDI3OiBcIkVzY1wiLCAzMjogXCJTcGFjZVwiLCAzMzogXCJQYWdlVXBcIiwgMzQ6IFwiUGFnZURvd25cIiwgMzU6IFwiRW5kXCIsXG4gICAgMzY6IFwiSG9tZVwiLCAzNzogXCJMZWZ0XCIsIDM4OiBcIlVwXCIsIDM5OiBcIlJpZ2h0XCIsIDQwOiBcIkRvd25cIiwgNDQ6IFwiUHJpbnRTY3JuXCIsIDQ1OiBcIkluc2VydFwiLFxuICAgIDQ2OiBcIkRlbGV0ZVwiLCA1OTogXCI7XCIsIDYxOiBcIj1cIiwgOTE6IFwiTW9kXCIsIDkyOiBcIk1vZFwiLCA5MzogXCJNb2RcIixcbiAgICAxMDY6IFwiKlwiLCAxMDc6IFwiPVwiLCAxMDk6IFwiLVwiLCAxMTA6IFwiLlwiLCAxMTE6IFwiL1wiLCAxNDU6IFwiU2Nyb2xsTG9ja1wiLFxuICAgIDE3MzogXCItXCIsIDE4NjogXCI7XCIsIDE4NzogXCI9XCIsIDE4ODogXCIsXCIsIDE4OTogXCItXCIsIDE5MDogXCIuXCIsIDE5MTogXCIvXCIsIDE5MjogXCJgXCIsIDIxOTogXCJbXCIsIDIyMDogXCJcXFxcXCIsXG4gICAgMjIxOiBcIl1cIiwgMjIyOiBcIidcIiwgNjMyMzI6IFwiVXBcIiwgNjMyMzM6IFwiRG93blwiLCA2MzIzNDogXCJMZWZ0XCIsIDYzMjM1OiBcIlJpZ2h0XCIsIDYzMjcyOiBcIkRlbGV0ZVwiLFxuICAgIDYzMjczOiBcIkhvbWVcIiwgNjMyNzU6IFwiRW5kXCIsIDYzMjc2OiBcIlBhZ2VVcFwiLCA2MzI3NzogXCJQYWdlRG93blwiLCA2MzMwMjogXCJJbnNlcnRcIlxuICB9O1xuXG4gIC8vIE51bWJlciBrZXlzXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykgeyBrZXlOYW1lc1tpICsgNDhdID0ga2V5TmFtZXNbaSArIDk2XSA9IFN0cmluZyhpKTsgfVxuICAvLyBBbHBoYWJldGljIGtleXNcbiAgZm9yICh2YXIgaSQxID0gNjU7IGkkMSA8PSA5MDsgaSQxKyspIHsga2V5TmFtZXNbaSQxXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoaSQxKTsgfVxuICAvLyBGdW5jdGlvbiBrZXlzXG4gIGZvciAodmFyIGkkMiA9IDE7IGkkMiA8PSAxMjsgaSQyKyspIHsga2V5TmFtZXNbaSQyICsgMTExXSA9IGtleU5hbWVzW2kkMiArIDYzMjM1XSA9IFwiRlwiICsgaSQyOyB9XG5cbiAgdmFyIGtleU1hcCA9IHt9O1xuXG4gIGtleU1hcC5iYXNpYyA9IHtcbiAgICBcIkxlZnRcIjogXCJnb0NoYXJMZWZ0XCIsIFwiUmlnaHRcIjogXCJnb0NoYXJSaWdodFwiLCBcIlVwXCI6IFwiZ29MaW5lVXBcIiwgXCJEb3duXCI6IFwiZ29MaW5lRG93blwiLFxuICAgIFwiRW5kXCI6IFwiZ29MaW5lRW5kXCIsIFwiSG9tZVwiOiBcImdvTGluZVN0YXJ0U21hcnRcIiwgXCJQYWdlVXBcIjogXCJnb1BhZ2VVcFwiLCBcIlBhZ2VEb3duXCI6IFwiZ29QYWdlRG93blwiLFxuICAgIFwiRGVsZXRlXCI6IFwiZGVsQ2hhckFmdGVyXCIsIFwiQmFja3NwYWNlXCI6IFwiZGVsQ2hhckJlZm9yZVwiLCBcIlNoaWZ0LUJhY2tzcGFjZVwiOiBcImRlbENoYXJCZWZvcmVcIixcbiAgICBcIlRhYlwiOiBcImRlZmF1bHRUYWJcIiwgXCJTaGlmdC1UYWJcIjogXCJpbmRlbnRBdXRvXCIsXG4gICAgXCJFbnRlclwiOiBcIm5ld2xpbmVBbmRJbmRlbnRcIiwgXCJJbnNlcnRcIjogXCJ0b2dnbGVPdmVyd3JpdGVcIixcbiAgICBcIkVzY1wiOiBcInNpbmdsZVNlbGVjdGlvblwiXG4gIH07XG4gIC8vIE5vdGUgdGhhdCB0aGUgc2F2ZSBhbmQgZmluZC1yZWxhdGVkIGNvbW1hbmRzIGFyZW4ndCBkZWZpbmVkIGJ5XG4gIC8vIGRlZmF1bHQuIFVzZXIgY29kZSBvciBhZGRvbnMgY2FuIGRlZmluZSB0aGVtLiBVbmtub3duIGNvbW1hbmRzXG4gIC8vIGFyZSBzaW1wbHkgaWdub3JlZC5cbiAga2V5TWFwLnBjRGVmYXVsdCA9IHtcbiAgICBcIkN0cmwtQVwiOiBcInNlbGVjdEFsbFwiLCBcIkN0cmwtRFwiOiBcImRlbGV0ZUxpbmVcIiwgXCJDdHJsLVpcIjogXCJ1bmRvXCIsIFwiU2hpZnQtQ3RybC1aXCI6IFwicmVkb1wiLCBcIkN0cmwtWVwiOiBcInJlZG9cIixcbiAgICBcIkN0cmwtSG9tZVwiOiBcImdvRG9jU3RhcnRcIiwgXCJDdHJsLUVuZFwiOiBcImdvRG9jRW5kXCIsIFwiQ3RybC1VcFwiOiBcImdvTGluZVVwXCIsIFwiQ3RybC1Eb3duXCI6IFwiZ29MaW5lRG93blwiLFxuICAgIFwiQ3RybC1MZWZ0XCI6IFwiZ29Hcm91cExlZnRcIiwgXCJDdHJsLVJpZ2h0XCI6IFwiZ29Hcm91cFJpZ2h0XCIsIFwiQWx0LUxlZnRcIjogXCJnb0xpbmVTdGFydFwiLCBcIkFsdC1SaWdodFwiOiBcImdvTGluZUVuZFwiLFxuICAgIFwiQ3RybC1CYWNrc3BhY2VcIjogXCJkZWxHcm91cEJlZm9yZVwiLCBcIkN0cmwtRGVsZXRlXCI6IFwiZGVsR3JvdXBBZnRlclwiLCBcIkN0cmwtU1wiOiBcInNhdmVcIiwgXCJDdHJsLUZcIjogXCJmaW5kXCIsXG4gICAgXCJDdHJsLUdcIjogXCJmaW5kTmV4dFwiLCBcIlNoaWZ0LUN0cmwtR1wiOiBcImZpbmRQcmV2XCIsIFwiU2hpZnQtQ3RybC1GXCI6IFwicmVwbGFjZVwiLCBcIlNoaWZ0LUN0cmwtUlwiOiBcInJlcGxhY2VBbGxcIixcbiAgICBcIkN0cmwtW1wiOiBcImluZGVudExlc3NcIiwgXCJDdHJsLV1cIjogXCJpbmRlbnRNb3JlXCIsXG4gICAgXCJDdHJsLVVcIjogXCJ1bmRvU2VsZWN0aW9uXCIsIFwiU2hpZnQtQ3RybC1VXCI6IFwicmVkb1NlbGVjdGlvblwiLCBcIkFsdC1VXCI6IFwicmVkb1NlbGVjdGlvblwiLFxuICAgIFwiZmFsbHRocm91Z2hcIjogXCJiYXNpY1wiXG4gIH07XG4gIC8vIFZlcnkgYmFzaWMgcmVhZGxpbmUvZW1hY3Mtc3R5bGUgYmluZGluZ3MsIHdoaWNoIGFyZSBzdGFuZGFyZCBvbiBNYWMuXG4gIGtleU1hcC5lbWFjc3kgPSB7XG4gICAgXCJDdHJsLUZcIjogXCJnb0NoYXJSaWdodFwiLCBcIkN0cmwtQlwiOiBcImdvQ2hhckxlZnRcIiwgXCJDdHJsLVBcIjogXCJnb0xpbmVVcFwiLCBcIkN0cmwtTlwiOiBcImdvTGluZURvd25cIixcbiAgICBcIkFsdC1GXCI6IFwiZ29Xb3JkUmlnaHRcIiwgXCJBbHQtQlwiOiBcImdvV29yZExlZnRcIiwgXCJDdHJsLUFcIjogXCJnb0xpbmVTdGFydFwiLCBcIkN0cmwtRVwiOiBcImdvTGluZUVuZFwiLFxuICAgIFwiQ3RybC1WXCI6IFwiZ29QYWdlRG93blwiLCBcIlNoaWZ0LUN0cmwtVlwiOiBcImdvUGFnZVVwXCIsIFwiQ3RybC1EXCI6IFwiZGVsQ2hhckFmdGVyXCIsIFwiQ3RybC1IXCI6IFwiZGVsQ2hhckJlZm9yZVwiLFxuICAgIFwiQWx0LURcIjogXCJkZWxXb3JkQWZ0ZXJcIiwgXCJBbHQtQmFja3NwYWNlXCI6IFwiZGVsV29yZEJlZm9yZVwiLCBcIkN0cmwtS1wiOiBcImtpbGxMaW5lXCIsIFwiQ3RybC1UXCI6IFwidHJhbnNwb3NlQ2hhcnNcIixcbiAgICBcIkN0cmwtT1wiOiBcIm9wZW5MaW5lXCJcbiAgfTtcbiAga2V5TWFwLm1hY0RlZmF1bHQgPSB7XG4gICAgXCJDbWQtQVwiOiBcInNlbGVjdEFsbFwiLCBcIkNtZC1EXCI6IFwiZGVsZXRlTGluZVwiLCBcIkNtZC1aXCI6IFwidW5kb1wiLCBcIlNoaWZ0LUNtZC1aXCI6IFwicmVkb1wiLCBcIkNtZC1ZXCI6IFwicmVkb1wiLFxuICAgIFwiQ21kLUhvbWVcIjogXCJnb0RvY1N0YXJ0XCIsIFwiQ21kLVVwXCI6IFwiZ29Eb2NTdGFydFwiLCBcIkNtZC1FbmRcIjogXCJnb0RvY0VuZFwiLCBcIkNtZC1Eb3duXCI6IFwiZ29Eb2NFbmRcIiwgXCJBbHQtTGVmdFwiOiBcImdvR3JvdXBMZWZ0XCIsXG4gICAgXCJBbHQtUmlnaHRcIjogXCJnb0dyb3VwUmlnaHRcIiwgXCJDbWQtTGVmdFwiOiBcImdvTGluZUxlZnRcIiwgXCJDbWQtUmlnaHRcIjogXCJnb0xpbmVSaWdodFwiLCBcIkFsdC1CYWNrc3BhY2VcIjogXCJkZWxHcm91cEJlZm9yZVwiLFxuICAgIFwiQ3RybC1BbHQtQmFja3NwYWNlXCI6IFwiZGVsR3JvdXBBZnRlclwiLCBcIkFsdC1EZWxldGVcIjogXCJkZWxHcm91cEFmdGVyXCIsIFwiQ21kLVNcIjogXCJzYXZlXCIsIFwiQ21kLUZcIjogXCJmaW5kXCIsXG4gICAgXCJDbWQtR1wiOiBcImZpbmROZXh0XCIsIFwiU2hpZnQtQ21kLUdcIjogXCJmaW5kUHJldlwiLCBcIkNtZC1BbHQtRlwiOiBcInJlcGxhY2VcIiwgXCJTaGlmdC1DbWQtQWx0LUZcIjogXCJyZXBsYWNlQWxsXCIsXG4gICAgXCJDbWQtW1wiOiBcImluZGVudExlc3NcIiwgXCJDbWQtXVwiOiBcImluZGVudE1vcmVcIiwgXCJDbWQtQmFja3NwYWNlXCI6IFwiZGVsV3JhcHBlZExpbmVMZWZ0XCIsIFwiQ21kLURlbGV0ZVwiOiBcImRlbFdyYXBwZWRMaW5lUmlnaHRcIixcbiAgICBcIkNtZC1VXCI6IFwidW5kb1NlbGVjdGlvblwiLCBcIlNoaWZ0LUNtZC1VXCI6IFwicmVkb1NlbGVjdGlvblwiLCBcIkN0cmwtVXBcIjogXCJnb0RvY1N0YXJ0XCIsIFwiQ3RybC1Eb3duXCI6IFwiZ29Eb2NFbmRcIixcbiAgICBcImZhbGx0aHJvdWdoXCI6IFtcImJhc2ljXCIsIFwiZW1hY3N5XCJdXG4gIH07XG4gIGtleU1hcFtcImRlZmF1bHRcIl0gPSBtYWMgPyBrZXlNYXAubWFjRGVmYXVsdCA6IGtleU1hcC5wY0RlZmF1bHQ7XG5cbiAgLy8gS0VZTUFQIERJU1BBVENIXG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplS2V5TmFtZShuYW1lKSB7XG4gICAgdmFyIHBhcnRzID0gbmFtZS5zcGxpdCgvLSg/ISQpLyk7XG4gICAgbmFtZSA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuICAgIHZhciBhbHQsIGN0cmwsIHNoaWZ0LCBjbWQ7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIHZhciBtb2QgPSBwYXJ0c1tpXTtcbiAgICAgIGlmICgvXihjbWR8bWV0YXxtKSQvaS50ZXN0KG1vZCkpIHsgY21kID0gdHJ1ZTsgfVxuICAgICAgZWxzZSBpZiAoL15hKGx0KT8kL2kudGVzdChtb2QpKSB7IGFsdCA9IHRydWU7IH1cbiAgICAgIGVsc2UgaWYgKC9eKGN8Y3RybHxjb250cm9sKSQvaS50ZXN0KG1vZCkpIHsgY3RybCA9IHRydWU7IH1cbiAgICAgIGVsc2UgaWYgKC9ecyhoaWZ0KT8kL2kudGVzdChtb2QpKSB7IHNoaWZ0ID0gdHJ1ZTsgfVxuICAgICAgZWxzZSB7IHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCBtb2RpZmllciBuYW1lOiBcIiArIG1vZCkgfVxuICAgIH1cbiAgICBpZiAoYWx0KSB7IG5hbWUgPSBcIkFsdC1cIiArIG5hbWU7IH1cbiAgICBpZiAoY3RybCkgeyBuYW1lID0gXCJDdHJsLVwiICsgbmFtZTsgfVxuICAgIGlmIChjbWQpIHsgbmFtZSA9IFwiQ21kLVwiICsgbmFtZTsgfVxuICAgIGlmIChzaGlmdCkgeyBuYW1lID0gXCJTaGlmdC1cIiArIG5hbWU7IH1cbiAgICByZXR1cm4gbmFtZVxuICB9XG5cbiAgLy8gVGhpcyBpcyBhIGtsdWRnZSB0byBrZWVwIGtleW1hcHMgbW9zdGx5IHdvcmtpbmcgYXMgcmF3IG9iamVjdHNcbiAgLy8gKGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5KSB3aGlsZSBhdCB0aGUgc2FtZSB0aW1lIHN1cHBvcnQgZmVhdHVyZXNcbiAgLy8gbGlrZSBub3JtYWxpemF0aW9uIGFuZCBtdWx0aS1zdHJva2Uga2V5IGJpbmRpbmdzLiBJdCBjb21waWxlcyBhXG4gIC8vIG5ldyBub3JtYWxpemVkIGtleW1hcCwgYW5kIHRoZW4gdXBkYXRlcyB0aGUgb2xkIG9iamVjdCB0byByZWZsZWN0XG4gIC8vIHRoaXMuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZUtleU1hcChrZXltYXApIHtcbiAgICB2YXIgY29weSA9IHt9O1xuICAgIGZvciAodmFyIGtleW5hbWUgaW4ga2V5bWFwKSB7IGlmIChrZXltYXAuaGFzT3duUHJvcGVydHkoa2V5bmFtZSkpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGtleW1hcFtrZXluYW1lXTtcbiAgICAgIGlmICgvXihuYW1lfGZhbGx0aHJvdWdofChkZXxhdCl0YWNoKSQvLnRlc3Qoa2V5bmFtZSkpIHsgY29udGludWUgfVxuICAgICAgaWYgKHZhbHVlID09IFwiLi4uXCIpIHsgZGVsZXRlIGtleW1hcFtrZXluYW1lXTsgY29udGludWUgfVxuXG4gICAgICB2YXIga2V5cyA9IG1hcChrZXluYW1lLnNwbGl0KFwiIFwiKSwgbm9ybWFsaXplS2V5TmFtZSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHZhbCA9ICh2b2lkIDApLCBuYW1lID0gKHZvaWQgMCk7XG4gICAgICAgIGlmIChpID09IGtleXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIG5hbWUgPSBrZXlzLmpvaW4oXCIgXCIpO1xuICAgICAgICAgIHZhbCA9IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5hbWUgPSBrZXlzLnNsaWNlKDAsIGkgKyAxKS5qb2luKFwiIFwiKTtcbiAgICAgICAgICB2YWwgPSBcIi4uLlwiO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwcmV2ID0gY29weVtuYW1lXTtcbiAgICAgICAgaWYgKCFwcmV2KSB7IGNvcHlbbmFtZV0gPSB2YWw7IH1cbiAgICAgICAgZWxzZSBpZiAocHJldiAhPSB2YWwpIHsgdGhyb3cgbmV3IEVycm9yKFwiSW5jb25zaXN0ZW50IGJpbmRpbmdzIGZvciBcIiArIG5hbWUpIH1cbiAgICAgIH1cbiAgICAgIGRlbGV0ZSBrZXltYXBba2V5bmFtZV07XG4gICAgfSB9XG4gICAgZm9yICh2YXIgcHJvcCBpbiBjb3B5KSB7IGtleW1hcFtwcm9wXSA9IGNvcHlbcHJvcF07IH1cbiAgICByZXR1cm4ga2V5bWFwXG4gIH1cblxuICBmdW5jdGlvbiBsb29rdXBLZXkoa2V5LCBtYXAsIGhhbmRsZSwgY29udGV4dCkge1xuICAgIG1hcCA9IGdldEtleU1hcChtYXApO1xuICAgIHZhciBmb3VuZCA9IG1hcC5jYWxsID8gbWFwLmNhbGwoa2V5LCBjb250ZXh0KSA6IG1hcFtrZXldO1xuICAgIGlmIChmb3VuZCA9PT0gZmFsc2UpIHsgcmV0dXJuIFwibm90aGluZ1wiIH1cbiAgICBpZiAoZm91bmQgPT09IFwiLi4uXCIpIHsgcmV0dXJuIFwibXVsdGlcIiB9XG4gICAgaWYgKGZvdW5kICE9IG51bGwgJiYgaGFuZGxlKGZvdW5kKSkgeyByZXR1cm4gXCJoYW5kbGVkXCIgfVxuXG4gICAgaWYgKG1hcC5mYWxsdGhyb3VnaCkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtYXAuZmFsbHRocm91Z2gpICE9IFwiW29iamVjdCBBcnJheV1cIilcbiAgICAgICAgeyByZXR1cm4gbG9va3VwS2V5KGtleSwgbWFwLmZhbGx0aHJvdWdoLCBoYW5kbGUsIGNvbnRleHQpIH1cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFwLmZhbGx0aHJvdWdoLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBsb29rdXBLZXkoa2V5LCBtYXAuZmFsbHRocm91Z2hbaV0sIGhhbmRsZSwgY29udGV4dCk7XG4gICAgICAgIGlmIChyZXN1bHQpIHsgcmV0dXJuIHJlc3VsdCB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gTW9kaWZpZXIga2V5IHByZXNzZXMgZG9uJ3QgY291bnQgYXMgJ3JlYWwnIGtleSBwcmVzc2VzIGZvciB0aGVcbiAgLy8gcHVycG9zZSBvZiBrZXltYXAgZmFsbHRocm91Z2guXG4gIGZ1bmN0aW9uIGlzTW9kaWZpZXJLZXkodmFsdWUpIHtcbiAgICB2YXIgbmFtZSA9IHR5cGVvZiB2YWx1ZSA9PSBcInN0cmluZ1wiID8gdmFsdWUgOiBrZXlOYW1lc1t2YWx1ZS5rZXlDb2RlXTtcbiAgICByZXR1cm4gbmFtZSA9PSBcIkN0cmxcIiB8fCBuYW1lID09IFwiQWx0XCIgfHwgbmFtZSA9PSBcIlNoaWZ0XCIgfHwgbmFtZSA9PSBcIk1vZFwiXG4gIH1cblxuICBmdW5jdGlvbiBhZGRNb2RpZmllck5hbWVzKG5hbWUsIGV2ZW50LCBub1NoaWZ0KSB7XG4gICAgdmFyIGJhc2UgPSBuYW1lO1xuICAgIGlmIChldmVudC5hbHRLZXkgJiYgYmFzZSAhPSBcIkFsdFwiKSB7IG5hbWUgPSBcIkFsdC1cIiArIG5hbWU7IH1cbiAgICBpZiAoKGZsaXBDdHJsQ21kID8gZXZlbnQubWV0YUtleSA6IGV2ZW50LmN0cmxLZXkpICYmIGJhc2UgIT0gXCJDdHJsXCIpIHsgbmFtZSA9IFwiQ3RybC1cIiArIG5hbWU7IH1cbiAgICBpZiAoKGZsaXBDdHJsQ21kID8gZXZlbnQuY3RybEtleSA6IGV2ZW50Lm1ldGFLZXkpICYmIGJhc2UgIT0gXCJDbWRcIikgeyBuYW1lID0gXCJDbWQtXCIgKyBuYW1lOyB9XG4gICAgaWYgKCFub1NoaWZ0ICYmIGV2ZW50LnNoaWZ0S2V5ICYmIGJhc2UgIT0gXCJTaGlmdFwiKSB7IG5hbWUgPSBcIlNoaWZ0LVwiICsgbmFtZTsgfVxuICAgIHJldHVybiBuYW1lXG4gIH1cblxuICAvLyBMb29rIHVwIHRoZSBuYW1lIG9mIGEga2V5IGFzIGluZGljYXRlZCBieSBhbiBldmVudCBvYmplY3QuXG4gIGZ1bmN0aW9uIGtleU5hbWUoZXZlbnQsIG5vU2hpZnQpIHtcbiAgICBpZiAocHJlc3RvICYmIGV2ZW50LmtleUNvZGUgPT0gMzQgJiYgZXZlbnRbXCJjaGFyXCJdKSB7IHJldHVybiBmYWxzZSB9XG4gICAgdmFyIG5hbWUgPSBrZXlOYW1lc1tldmVudC5rZXlDb2RlXTtcbiAgICBpZiAobmFtZSA9PSBudWxsIHx8IGV2ZW50LmFsdEdyYXBoS2V5KSB7IHJldHVybiBmYWxzZSB9XG4gICAgLy8gQ3RybC1TY3JvbGxMb2NrIGhhcyBrZXlDb2RlIDMsIHNhbWUgYXMgQ3RybC1QYXVzZSxcbiAgICAvLyBzbyB3ZSdsbCB1c2UgZXZlbnQuY29kZSB3aGVuIGF2YWlsYWJsZSAoQ2hyb21lIDQ4KywgRkYgMzgrLCBTYWZhcmkgMTAuMSspXG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gMyAmJiBldmVudC5jb2RlKSB7IG5hbWUgPSBldmVudC5jb2RlOyB9XG4gICAgcmV0dXJuIGFkZE1vZGlmaWVyTmFtZXMobmFtZSwgZXZlbnQsIG5vU2hpZnQpXG4gIH1cblxuICBmdW5jdGlvbiBnZXRLZXlNYXAodmFsKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWwgPT0gXCJzdHJpbmdcIiA/IGtleU1hcFt2YWxdIDogdmFsXG4gIH1cblxuICAvLyBIZWxwZXIgZm9yIGRlbGV0aW5nIHRleHQgbmVhciB0aGUgc2VsZWN0aW9uKHMpLCB1c2VkIHRvIGltcGxlbWVudFxuICAvLyBiYWNrc3BhY2UsIGRlbGV0ZSwgYW5kIHNpbWlsYXIgZnVuY3Rpb25hbGl0eS5cbiAgZnVuY3Rpb24gZGVsZXRlTmVhclNlbGVjdGlvbihjbSwgY29tcHV0ZSkge1xuICAgIHZhciByYW5nZXMgPSBjbS5kb2Muc2VsLnJhbmdlcywga2lsbCA9IFtdO1xuICAgIC8vIEJ1aWxkIHVwIGEgc2V0IG9mIHJhbmdlcyB0byBraWxsIGZpcnN0LCBtZXJnaW5nIG92ZXJsYXBwaW5nXG4gICAgLy8gcmFuZ2VzLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdG9LaWxsID0gY29tcHV0ZShyYW5nZXNbaV0pO1xuICAgICAgd2hpbGUgKGtpbGwubGVuZ3RoICYmIGNtcCh0b0tpbGwuZnJvbSwgbHN0KGtpbGwpLnRvKSA8PSAwKSB7XG4gICAgICAgIHZhciByZXBsYWNlZCA9IGtpbGwucG9wKCk7XG4gICAgICAgIGlmIChjbXAocmVwbGFjZWQuZnJvbSwgdG9LaWxsLmZyb20pIDwgMCkge1xuICAgICAgICAgIHRvS2lsbC5mcm9tID0gcmVwbGFjZWQuZnJvbTtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBraWxsLnB1c2godG9LaWxsKTtcbiAgICB9XG4gICAgLy8gTmV4dCwgcmVtb3ZlIHRob3NlIGFjdHVhbCByYW5nZXMuXG4gICAgcnVuSW5PcChjbSwgZnVuY3Rpb24gKCkge1xuICAgICAgZm9yICh2YXIgaSA9IGtpbGwubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXG4gICAgICAgIHsgcmVwbGFjZVJhbmdlKGNtLmRvYywgXCJcIiwga2lsbFtpXS5mcm9tLCBraWxsW2ldLnRvLCBcIitkZWxldGVcIik7IH1cbiAgICAgIGVuc3VyZUN1cnNvclZpc2libGUoY20pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gbW92ZUNoYXJMb2dpY2FsbHkobGluZSwgY2gsIGRpcikge1xuICAgIHZhciB0YXJnZXQgPSBza2lwRXh0ZW5kaW5nQ2hhcnMobGluZS50ZXh0LCBjaCArIGRpciwgZGlyKTtcbiAgICByZXR1cm4gdGFyZ2V0IDwgMCB8fCB0YXJnZXQgPiBsaW5lLnRleHQubGVuZ3RoID8gbnVsbCA6IHRhcmdldFxuICB9XG5cbiAgZnVuY3Rpb24gbW92ZUxvZ2ljYWxseShsaW5lLCBzdGFydCwgZGlyKSB7XG4gICAgdmFyIGNoID0gbW92ZUNoYXJMb2dpY2FsbHkobGluZSwgc3RhcnQuY2gsIGRpcik7XG4gICAgcmV0dXJuIGNoID09IG51bGwgPyBudWxsIDogbmV3IFBvcyhzdGFydC5saW5lLCBjaCwgZGlyIDwgMCA/IFwiYWZ0ZXJcIiA6IFwiYmVmb3JlXCIpXG4gIH1cblxuICBmdW5jdGlvbiBlbmRPZkxpbmUodmlzdWFsbHksIGNtLCBsaW5lT2JqLCBsaW5lTm8sIGRpcikge1xuICAgIGlmICh2aXN1YWxseSkge1xuICAgICAgaWYgKGNtLmRvYy5kaXJlY3Rpb24gPT0gXCJydGxcIikgeyBkaXIgPSAtZGlyOyB9XG4gICAgICB2YXIgb3JkZXIgPSBnZXRPcmRlcihsaW5lT2JqLCBjbS5kb2MuZGlyZWN0aW9uKTtcbiAgICAgIGlmIChvcmRlcikge1xuICAgICAgICB2YXIgcGFydCA9IGRpciA8IDAgPyBsc3Qob3JkZXIpIDogb3JkZXJbMF07XG4gICAgICAgIHZhciBtb3ZlSW5TdG9yYWdlT3JkZXIgPSAoZGlyIDwgMCkgPT0gKHBhcnQubGV2ZWwgPT0gMSk7XG4gICAgICAgIHZhciBzdGlja3kgPSBtb3ZlSW5TdG9yYWdlT3JkZXIgPyBcImFmdGVyXCIgOiBcImJlZm9yZVwiO1xuICAgICAgICB2YXIgY2g7XG4gICAgICAgIC8vIFdpdGggYSB3cmFwcGVkIHJ0bCBjaHVuayAocG9zc2libHkgc3Bhbm5pbmcgbXVsdGlwbGUgYmlkaSBwYXJ0cyksXG4gICAgICAgIC8vIGl0IGNvdWxkIGJlIHRoYXQgdGhlIGxhc3QgYmlkaSBwYXJ0IGlzIG5vdCBvbiB0aGUgbGFzdCB2aXN1YWwgbGluZSxcbiAgICAgICAgLy8gc2luY2UgdmlzdWFsIGxpbmVzIGNvbnRhaW4gY29udGVudCBvcmRlci1jb25zZWN1dGl2ZSBjaHVua3MuXG4gICAgICAgIC8vIFRodXMsIGluIHJ0bCwgd2UgYXJlIGxvb2tpbmcgZm9yIHRoZSBmaXJzdCAoY29udGVudC1vcmRlcikgY2hhcmFjdGVyXG4gICAgICAgIC8vIGluIHRoZSBydGwgY2h1bmsgdGhhdCBpcyBvbiB0aGUgbGFzdCBsaW5lICh0aGF0IGlzLCB0aGUgc2FtZSBsaW5lXG4gICAgICAgIC8vIGFzIHRoZSBsYXN0IChjb250ZW50LW9yZGVyKSBjaGFyYWN0ZXIpLlxuICAgICAgICBpZiAocGFydC5sZXZlbCA+IDAgfHwgY20uZG9jLmRpcmVjdGlvbiA9PSBcInJ0bFwiKSB7XG4gICAgICAgICAgdmFyIHByZXAgPSBwcmVwYXJlTWVhc3VyZUZvckxpbmUoY20sIGxpbmVPYmopO1xuICAgICAgICAgIGNoID0gZGlyIDwgMCA/IGxpbmVPYmoudGV4dC5sZW5ndGggLSAxIDogMDtcbiAgICAgICAgICB2YXIgdGFyZ2V0VG9wID0gbWVhc3VyZUNoYXJQcmVwYXJlZChjbSwgcHJlcCwgY2gpLnRvcDtcbiAgICAgICAgICBjaCA9IGZpbmRGaXJzdChmdW5jdGlvbiAoY2gpIHsgcmV0dXJuIG1lYXN1cmVDaGFyUHJlcGFyZWQoY20sIHByZXAsIGNoKS50b3AgPT0gdGFyZ2V0VG9wOyB9LCAoZGlyIDwgMCkgPT0gKHBhcnQubGV2ZWwgPT0gMSkgPyBwYXJ0LmZyb20gOiBwYXJ0LnRvIC0gMSwgY2gpO1xuICAgICAgICAgIGlmIChzdGlja3kgPT0gXCJiZWZvcmVcIikgeyBjaCA9IG1vdmVDaGFyTG9naWNhbGx5KGxpbmVPYmosIGNoLCAxKTsgfVxuICAgICAgICB9IGVsc2UgeyBjaCA9IGRpciA8IDAgPyBwYXJ0LnRvIDogcGFydC5mcm9tOyB9XG4gICAgICAgIHJldHVybiBuZXcgUG9zKGxpbmVObywgY2gsIHN0aWNreSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQb3MobGluZU5vLCBkaXIgPCAwID8gbGluZU9iai50ZXh0Lmxlbmd0aCA6IDAsIGRpciA8IDAgPyBcImJlZm9yZVwiIDogXCJhZnRlclwiKVxuICB9XG5cbiAgZnVuY3Rpb24gbW92ZVZpc3VhbGx5KGNtLCBsaW5lLCBzdGFydCwgZGlyKSB7XG4gICAgdmFyIGJpZGkgPSBnZXRPcmRlcihsaW5lLCBjbS5kb2MuZGlyZWN0aW9uKTtcbiAgICBpZiAoIWJpZGkpIHsgcmV0dXJuIG1vdmVMb2dpY2FsbHkobGluZSwgc3RhcnQsIGRpcikgfVxuICAgIGlmIChzdGFydC5jaCA+PSBsaW5lLnRleHQubGVuZ3RoKSB7XG4gICAgICBzdGFydC5jaCA9IGxpbmUudGV4dC5sZW5ndGg7XG4gICAgICBzdGFydC5zdGlja3kgPSBcImJlZm9yZVwiO1xuICAgIH0gZWxzZSBpZiAoc3RhcnQuY2ggPD0gMCkge1xuICAgICAgc3RhcnQuY2ggPSAwO1xuICAgICAgc3RhcnQuc3RpY2t5ID0gXCJhZnRlclwiO1xuICAgIH1cbiAgICB2YXIgcGFydFBvcyA9IGdldEJpZGlQYXJ0QXQoYmlkaSwgc3RhcnQuY2gsIHN0YXJ0LnN0aWNreSksIHBhcnQgPSBiaWRpW3BhcnRQb3NdO1xuICAgIGlmIChjbS5kb2MuZGlyZWN0aW9uID09IFwibHRyXCIgJiYgcGFydC5sZXZlbCAlIDIgPT0gMCAmJiAoZGlyID4gMCA/IHBhcnQudG8gPiBzdGFydC5jaCA6IHBhcnQuZnJvbSA8IHN0YXJ0LmNoKSkge1xuICAgICAgLy8gQ2FzZSAxOiBXZSBtb3ZlIHdpdGhpbiBhbiBsdHIgcGFydCBpbiBhbiBsdHIgZWRpdG9yLiBFdmVuIHdpdGggd3JhcHBlZCBsaW5lcyxcbiAgICAgIC8vIG5vdGhpbmcgaW50ZXJlc3RpbmcgaGFwcGVucy5cbiAgICAgIHJldHVybiBtb3ZlTG9naWNhbGx5KGxpbmUsIHN0YXJ0LCBkaXIpXG4gICAgfVxuXG4gICAgdmFyIG12ID0gZnVuY3Rpb24gKHBvcywgZGlyKSB7IHJldHVybiBtb3ZlQ2hhckxvZ2ljYWxseShsaW5lLCBwb3MgaW5zdGFuY2VvZiBQb3MgPyBwb3MuY2ggOiBwb3MsIGRpcik7IH07XG4gICAgdmFyIHByZXA7XG4gICAgdmFyIGdldFdyYXBwZWRMaW5lRXh0ZW50ID0gZnVuY3Rpb24gKGNoKSB7XG4gICAgICBpZiAoIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7IHJldHVybiB7YmVnaW46IDAsIGVuZDogbGluZS50ZXh0Lmxlbmd0aH0gfVxuICAgICAgcHJlcCA9IHByZXAgfHwgcHJlcGFyZU1lYXN1cmVGb3JMaW5lKGNtLCBsaW5lKTtcbiAgICAgIHJldHVybiB3cmFwcGVkTGluZUV4dGVudENoYXIoY20sIGxpbmUsIHByZXAsIGNoKVxuICAgIH07XG4gICAgdmFyIHdyYXBwZWRMaW5lRXh0ZW50ID0gZ2V0V3JhcHBlZExpbmVFeHRlbnQoc3RhcnQuc3RpY2t5ID09IFwiYmVmb3JlXCIgPyBtdihzdGFydCwgLTEpIDogc3RhcnQuY2gpO1xuXG4gICAgaWYgKGNtLmRvYy5kaXJlY3Rpb24gPT0gXCJydGxcIiB8fCBwYXJ0LmxldmVsID09IDEpIHtcbiAgICAgIHZhciBtb3ZlSW5TdG9yYWdlT3JkZXIgPSAocGFydC5sZXZlbCA9PSAxKSA9PSAoZGlyIDwgMCk7XG4gICAgICB2YXIgY2ggPSBtdihzdGFydCwgbW92ZUluU3RvcmFnZU9yZGVyID8gMSA6IC0xKTtcbiAgICAgIGlmIChjaCAhPSBudWxsICYmICghbW92ZUluU3RvcmFnZU9yZGVyID8gY2ggPj0gcGFydC5mcm9tICYmIGNoID49IHdyYXBwZWRMaW5lRXh0ZW50LmJlZ2luIDogY2ggPD0gcGFydC50byAmJiBjaCA8PSB3cmFwcGVkTGluZUV4dGVudC5lbmQpKSB7XG4gICAgICAgIC8vIENhc2UgMjogV2UgbW92ZSB3aXRoaW4gYW4gcnRsIHBhcnQgb3IgaW4gYW4gcnRsIGVkaXRvciBvbiB0aGUgc2FtZSB2aXN1YWwgbGluZVxuICAgICAgICB2YXIgc3RpY2t5ID0gbW92ZUluU3RvcmFnZU9yZGVyID8gXCJiZWZvcmVcIiA6IFwiYWZ0ZXJcIjtcbiAgICAgICAgcmV0dXJuIG5ldyBQb3Moc3RhcnQubGluZSwgY2gsIHN0aWNreSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYXNlIDM6IENvdWxkIG5vdCBtb3ZlIHdpdGhpbiB0aGlzIGJpZGkgcGFydCBpbiB0aGlzIHZpc3VhbCBsaW5lLCBzbyBsZWF2ZVxuICAgIC8vIHRoZSBjdXJyZW50IGJpZGkgcGFydFxuXG4gICAgdmFyIHNlYXJjaEluVmlzdWFsTGluZSA9IGZ1bmN0aW9uIChwYXJ0UG9zLCBkaXIsIHdyYXBwZWRMaW5lRXh0ZW50KSB7XG4gICAgICB2YXIgZ2V0UmVzID0gZnVuY3Rpb24gKGNoLCBtb3ZlSW5TdG9yYWdlT3JkZXIpIHsgcmV0dXJuIG1vdmVJblN0b3JhZ2VPcmRlclxuICAgICAgICA/IG5ldyBQb3Moc3RhcnQubGluZSwgbXYoY2gsIDEpLCBcImJlZm9yZVwiKVxuICAgICAgICA6IG5ldyBQb3Moc3RhcnQubGluZSwgY2gsIFwiYWZ0ZXJcIik7IH07XG5cbiAgICAgIGZvciAoOyBwYXJ0UG9zID49IDAgJiYgcGFydFBvcyA8IGJpZGkubGVuZ3RoOyBwYXJ0UG9zICs9IGRpcikge1xuICAgICAgICB2YXIgcGFydCA9IGJpZGlbcGFydFBvc107XG4gICAgICAgIHZhciBtb3ZlSW5TdG9yYWdlT3JkZXIgPSAoZGlyID4gMCkgPT0gKHBhcnQubGV2ZWwgIT0gMSk7XG4gICAgICAgIHZhciBjaCA9IG1vdmVJblN0b3JhZ2VPcmRlciA/IHdyYXBwZWRMaW5lRXh0ZW50LmJlZ2luIDogbXYod3JhcHBlZExpbmVFeHRlbnQuZW5kLCAtMSk7XG4gICAgICAgIGlmIChwYXJ0LmZyb20gPD0gY2ggJiYgY2ggPCBwYXJ0LnRvKSB7IHJldHVybiBnZXRSZXMoY2gsIG1vdmVJblN0b3JhZ2VPcmRlcikgfVxuICAgICAgICBjaCA9IG1vdmVJblN0b3JhZ2VPcmRlciA/IHBhcnQuZnJvbSA6IG12KHBhcnQudG8sIC0xKTtcbiAgICAgICAgaWYgKHdyYXBwZWRMaW5lRXh0ZW50LmJlZ2luIDw9IGNoICYmIGNoIDwgd3JhcHBlZExpbmVFeHRlbnQuZW5kKSB7IHJldHVybiBnZXRSZXMoY2gsIG1vdmVJblN0b3JhZ2VPcmRlcikgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBDYXNlIDNhOiBMb29rIGZvciBvdGhlciBiaWRpIHBhcnRzIG9uIHRoZSBzYW1lIHZpc3VhbCBsaW5lXG4gICAgdmFyIHJlcyA9IHNlYXJjaEluVmlzdWFsTGluZShwYXJ0UG9zICsgZGlyLCBkaXIsIHdyYXBwZWRMaW5lRXh0ZW50KTtcbiAgICBpZiAocmVzKSB7IHJldHVybiByZXMgfVxuXG4gICAgLy8gQ2FzZSAzYjogTG9vayBmb3Igb3RoZXIgYmlkaSBwYXJ0cyBvbiB0aGUgbmV4dCB2aXN1YWwgbGluZVxuICAgIHZhciBuZXh0Q2ggPSBkaXIgPiAwID8gd3JhcHBlZExpbmVFeHRlbnQuZW5kIDogbXYod3JhcHBlZExpbmVFeHRlbnQuYmVnaW4sIC0xKTtcbiAgICBpZiAobmV4dENoICE9IG51bGwgJiYgIShkaXIgPiAwICYmIG5leHRDaCA9PSBsaW5lLnRleHQubGVuZ3RoKSkge1xuICAgICAgcmVzID0gc2VhcmNoSW5WaXN1YWxMaW5lKGRpciA+IDAgPyAwIDogYmlkaS5sZW5ndGggLSAxLCBkaXIsIGdldFdyYXBwZWRMaW5lRXh0ZW50KG5leHRDaCkpO1xuICAgICAgaWYgKHJlcykgeyByZXR1cm4gcmVzIH1cbiAgICB9XG5cbiAgICAvLyBDYXNlIDQ6IE5vd2hlcmUgdG8gbW92ZVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICAvLyBDb21tYW5kcyBhcmUgcGFyYW1ldGVyLWxlc3MgYWN0aW9ucyB0aGF0IGNhbiBiZSBwZXJmb3JtZWQgb24gYW5cbiAgLy8gZWRpdG9yLCBtb3N0bHkgdXNlZCBmb3Iga2V5YmluZGluZ3MuXG4gIHZhciBjb21tYW5kcyA9IHtcbiAgICBzZWxlY3RBbGw6IHNlbGVjdEFsbCxcbiAgICBzaW5nbGVTZWxlY3Rpb246IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20uc2V0U2VsZWN0aW9uKGNtLmdldEN1cnNvcihcImFuY2hvclwiKSwgY20uZ2V0Q3Vyc29yKFwiaGVhZFwiKSwgc2VsX2RvbnRTY3JvbGwpOyB9LFxuICAgIGtpbGxMaW5lOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGZ1bmN0aW9uIChyYW5nZSkge1xuICAgICAgaWYgKHJhbmdlLmVtcHR5KCkpIHtcbiAgICAgICAgdmFyIGxlbiA9IGdldExpbmUoY20uZG9jLCByYW5nZS5oZWFkLmxpbmUpLnRleHQubGVuZ3RoO1xuICAgICAgICBpZiAocmFuZ2UuaGVhZC5jaCA9PSBsZW4gJiYgcmFuZ2UuaGVhZC5saW5lIDwgY20ubGFzdExpbmUoKSlcbiAgICAgICAgICB7IHJldHVybiB7ZnJvbTogcmFuZ2UuaGVhZCwgdG86IFBvcyhyYW5nZS5oZWFkLmxpbmUgKyAxLCAwKX0gfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgeyByZXR1cm4ge2Zyb206IHJhbmdlLmhlYWQsIHRvOiBQb3MocmFuZ2UuaGVhZC5saW5lLCBsZW4pfSB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge2Zyb206IHJhbmdlLmZyb20oKSwgdG86IHJhbmdlLnRvKCl9XG4gICAgICB9XG4gICAgfSk7IH0sXG4gICAgZGVsZXRlTGluZTogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBkZWxldGVOZWFyU2VsZWN0aW9uKGNtLCBmdW5jdGlvbiAocmFuZ2UpIHsgcmV0dXJuICh7XG4gICAgICBmcm9tOiBQb3MocmFuZ2UuZnJvbSgpLmxpbmUsIDApLFxuICAgICAgdG86IGNsaXBQb3MoY20uZG9jLCBQb3MocmFuZ2UudG8oKS5saW5lICsgMSwgMCkpXG4gICAgfSk7IH0pOyB9LFxuICAgIGRlbExpbmVMZWZ0OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGZ1bmN0aW9uIChyYW5nZSkgeyByZXR1cm4gKHtcbiAgICAgIGZyb206IFBvcyhyYW5nZS5mcm9tKCkubGluZSwgMCksIHRvOiByYW5nZS5mcm9tKClcbiAgICB9KTsgfSk7IH0sXG4gICAgZGVsV3JhcHBlZExpbmVMZWZ0OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGZ1bmN0aW9uIChyYW5nZSkge1xuICAgICAgdmFyIHRvcCA9IGNtLmNoYXJDb29yZHMocmFuZ2UuaGVhZCwgXCJkaXZcIikudG9wICsgNTtcbiAgICAgIHZhciBsZWZ0UG9zID0gY20uY29vcmRzQ2hhcih7bGVmdDogMCwgdG9wOiB0b3B9LCBcImRpdlwiKTtcbiAgICAgIHJldHVybiB7ZnJvbTogbGVmdFBvcywgdG86IHJhbmdlLmZyb20oKX1cbiAgICB9KTsgfSxcbiAgICBkZWxXcmFwcGVkTGluZVJpZ2h0OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGZ1bmN0aW9uIChyYW5nZSkge1xuICAgICAgdmFyIHRvcCA9IGNtLmNoYXJDb29yZHMocmFuZ2UuaGVhZCwgXCJkaXZcIikudG9wICsgNTtcbiAgICAgIHZhciByaWdodFBvcyA9IGNtLmNvb3Jkc0NoYXIoe2xlZnQ6IGNtLmRpc3BsYXkubGluZURpdi5vZmZzZXRXaWR0aCArIDEwMCwgdG9wOiB0b3B9LCBcImRpdlwiKTtcbiAgICAgIHJldHVybiB7ZnJvbTogcmFuZ2UuZnJvbSgpLCB0bzogcmlnaHRQb3MgfVxuICAgIH0pOyB9LFxuICAgIHVuZG86IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20udW5kbygpOyB9LFxuICAgIHJlZG86IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20ucmVkbygpOyB9LFxuICAgIHVuZG9TZWxlY3Rpb246IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20udW5kb1NlbGVjdGlvbigpOyB9LFxuICAgIHJlZG9TZWxlY3Rpb246IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20ucmVkb1NlbGVjdGlvbigpOyB9LFxuICAgIGdvRG9jU3RhcnQ6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20uZXh0ZW5kU2VsZWN0aW9uKFBvcyhjbS5maXJzdExpbmUoKSwgMCkpOyB9LFxuICAgIGdvRG9jRW5kOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLmV4dGVuZFNlbGVjdGlvbihQb3MoY20ubGFzdExpbmUoKSkpOyB9LFxuICAgIGdvTGluZVN0YXJ0OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbiAocmFuZ2UpIHsgcmV0dXJuIGxpbmVTdGFydChjbSwgcmFuZ2UuaGVhZC5saW5lKTsgfSxcbiAgICAgIHtvcmlnaW46IFwiK21vdmVcIiwgYmlhczogMX1cbiAgICApOyB9LFxuICAgIGdvTGluZVN0YXJ0U21hcnQ6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20uZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uIChyYW5nZSkgeyByZXR1cm4gbGluZVN0YXJ0U21hcnQoY20sIHJhbmdlLmhlYWQpOyB9LFxuICAgICAge29yaWdpbjogXCIrbW92ZVwiLCBiaWFzOiAxfVxuICAgICk7IH0sXG4gICAgZ29MaW5lRW5kOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbiAocmFuZ2UpIHsgcmV0dXJuIGxpbmVFbmQoY20sIHJhbmdlLmhlYWQubGluZSk7IH0sXG4gICAgICB7b3JpZ2luOiBcIittb3ZlXCIsIGJpYXM6IC0xfVxuICAgICk7IH0sXG4gICAgZ29MaW5lUmlnaHQ6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20uZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uIChyYW5nZSkge1xuICAgICAgdmFyIHRvcCA9IGNtLmN1cnNvckNvb3JkcyhyYW5nZS5oZWFkLCBcImRpdlwiKS50b3AgKyA1O1xuICAgICAgcmV0dXJuIGNtLmNvb3Jkc0NoYXIoe2xlZnQ6IGNtLmRpc3BsYXkubGluZURpdi5vZmZzZXRXaWR0aCArIDEwMCwgdG9wOiB0b3B9LCBcImRpdlwiKVxuICAgIH0sIHNlbF9tb3ZlKTsgfSxcbiAgICBnb0xpbmVMZWZ0OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbiAocmFuZ2UpIHtcbiAgICAgIHZhciB0b3AgPSBjbS5jdXJzb3JDb29yZHMocmFuZ2UuaGVhZCwgXCJkaXZcIikudG9wICsgNTtcbiAgICAgIHJldHVybiBjbS5jb29yZHNDaGFyKHtsZWZ0OiAwLCB0b3A6IHRvcH0sIFwiZGl2XCIpXG4gICAgfSwgc2VsX21vdmUpOyB9LFxuICAgIGdvTGluZUxlZnRTbWFydDogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24gKHJhbmdlKSB7XG4gICAgICB2YXIgdG9wID0gY20uY3Vyc29yQ29vcmRzKHJhbmdlLmhlYWQsIFwiZGl2XCIpLnRvcCArIDU7XG4gICAgICB2YXIgcG9zID0gY20uY29vcmRzQ2hhcih7bGVmdDogMCwgdG9wOiB0b3B9LCBcImRpdlwiKTtcbiAgICAgIGlmIChwb3MuY2ggPCBjbS5nZXRMaW5lKHBvcy5saW5lKS5zZWFyY2goL1xcUy8pKSB7IHJldHVybiBsaW5lU3RhcnRTbWFydChjbSwgcmFuZ2UuaGVhZCkgfVxuICAgICAgcmV0dXJuIHBvc1xuICAgIH0sIHNlbF9tb3ZlKTsgfSxcbiAgICBnb0xpbmVVcDogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5tb3ZlVigtMSwgXCJsaW5lXCIpOyB9LFxuICAgIGdvTGluZURvd246IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20ubW92ZVYoMSwgXCJsaW5lXCIpOyB9LFxuICAgIGdvUGFnZVVwOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLm1vdmVWKC0xLCBcInBhZ2VcIik7IH0sXG4gICAgZ29QYWdlRG93bjogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5tb3ZlVigxLCBcInBhZ2VcIik7IH0sXG4gICAgZ29DaGFyTGVmdDogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5tb3ZlSCgtMSwgXCJjaGFyXCIpOyB9LFxuICAgIGdvQ2hhclJpZ2h0OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLm1vdmVIKDEsIFwiY2hhclwiKTsgfSxcbiAgICBnb0NvbHVtbkxlZnQ6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20ubW92ZUgoLTEsIFwiY29sdW1uXCIpOyB9LFxuICAgIGdvQ29sdW1uUmlnaHQ6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20ubW92ZUgoMSwgXCJjb2x1bW5cIik7IH0sXG4gICAgZ29Xb3JkTGVmdDogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5tb3ZlSCgtMSwgXCJ3b3JkXCIpOyB9LFxuICAgIGdvR3JvdXBSaWdodDogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5tb3ZlSCgxLCBcImdyb3VwXCIpOyB9LFxuICAgIGdvR3JvdXBMZWZ0OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLm1vdmVIKC0xLCBcImdyb3VwXCIpOyB9LFxuICAgIGdvV29yZFJpZ2h0OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLm1vdmVIKDEsIFwid29yZFwiKTsgfSxcbiAgICBkZWxDaGFyQmVmb3JlOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLmRlbGV0ZUgoLTEsIFwiY2hhclwiKTsgfSxcbiAgICBkZWxDaGFyQWZ0ZXI6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20uZGVsZXRlSCgxLCBcImNoYXJcIik7IH0sXG4gICAgZGVsV29yZEJlZm9yZTogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5kZWxldGVIKC0xLCBcIndvcmRcIik7IH0sXG4gICAgZGVsV29yZEFmdGVyOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLmRlbGV0ZUgoMSwgXCJ3b3JkXCIpOyB9LFxuICAgIGRlbEdyb3VwQmVmb3JlOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLmRlbGV0ZUgoLTEsIFwiZ3JvdXBcIik7IH0sXG4gICAgZGVsR3JvdXBBZnRlcjogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5kZWxldGVIKDEsIFwiZ3JvdXBcIik7IH0sXG4gICAgaW5kZW50QXV0bzogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5pbmRlbnRTZWxlY3Rpb24oXCJzbWFydFwiKTsgfSxcbiAgICBpbmRlbnRNb3JlOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLmluZGVudFNlbGVjdGlvbihcImFkZFwiKTsgfSxcbiAgICBpbmRlbnRMZXNzOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLmluZGVudFNlbGVjdGlvbihcInN1YnRyYWN0XCIpOyB9LFxuICAgIGluc2VydFRhYjogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5yZXBsYWNlU2VsZWN0aW9uKFwiXFx0XCIpOyB9LFxuICAgIGluc2VydFNvZnRUYWI6IGZ1bmN0aW9uIChjbSkge1xuICAgICAgdmFyIHNwYWNlcyA9IFtdLCByYW5nZXMgPSBjbS5saXN0U2VsZWN0aW9ucygpLCB0YWJTaXplID0gY20ub3B0aW9ucy50YWJTaXplO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHBvcyA9IHJhbmdlc1tpXS5mcm9tKCk7XG4gICAgICAgIHZhciBjb2wgPSBjb3VudENvbHVtbihjbS5nZXRMaW5lKHBvcy5saW5lKSwgcG9zLmNoLCB0YWJTaXplKTtcbiAgICAgICAgc3BhY2VzLnB1c2goc3BhY2VTdHIodGFiU2l6ZSAtIGNvbCAlIHRhYlNpemUpKTtcbiAgICAgIH1cbiAgICAgIGNtLnJlcGxhY2VTZWxlY3Rpb25zKHNwYWNlcyk7XG4gICAgfSxcbiAgICBkZWZhdWx0VGFiOiBmdW5jdGlvbiAoY20pIHtcbiAgICAgIGlmIChjbS5zb21ldGhpbmdTZWxlY3RlZCgpKSB7IGNtLmluZGVudFNlbGVjdGlvbihcImFkZFwiKTsgfVxuICAgICAgZWxzZSB7IGNtLmV4ZWNDb21tYW5kKFwiaW5zZXJ0VGFiXCIpOyB9XG4gICAgfSxcbiAgICAvLyBTd2FwIHRoZSB0d28gY2hhcnMgbGVmdCBhbmQgcmlnaHQgb2YgZWFjaCBzZWxlY3Rpb24ncyBoZWFkLlxuICAgIC8vIE1vdmUgY3Vyc29yIGJlaGluZCB0aGUgdHdvIHN3YXBwZWQgY2hhcmFjdGVycyBhZnRlcndhcmRzLlxuICAgIC8vXG4gICAgLy8gRG9lc24ndCBjb25zaWRlciBsaW5lIGZlZWRzIGEgY2hhcmFjdGVyLlxuICAgIC8vIERvZXNuJ3Qgc2NhbiBtb3JlIHRoYW4gb25lIGxpbmUgYWJvdmUgdG8gZmluZCBhIGNoYXJhY3Rlci5cbiAgICAvLyBEb2Vzbid0IGRvIGFueXRoaW5nIG9uIGFuIGVtcHR5IGxpbmUuXG4gICAgLy8gRG9lc24ndCBkbyBhbnl0aGluZyB3aXRoIG5vbi1lbXB0eSBzZWxlY3Rpb25zLlxuICAgIHRyYW5zcG9zZUNoYXJzOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIHJ1bkluT3AoY20sIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciByYW5nZXMgPSBjbS5saXN0U2VsZWN0aW9ucygpLCBuZXdTZWwgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICghcmFuZ2VzW2ldLmVtcHR5KCkpIHsgY29udGludWUgfVxuICAgICAgICB2YXIgY3VyID0gcmFuZ2VzW2ldLmhlYWQsIGxpbmUgPSBnZXRMaW5lKGNtLmRvYywgY3VyLmxpbmUpLnRleHQ7XG4gICAgICAgIGlmIChsaW5lKSB7XG4gICAgICAgICAgaWYgKGN1ci5jaCA9PSBsaW5lLmxlbmd0aCkgeyBjdXIgPSBuZXcgUG9zKGN1ci5saW5lLCBjdXIuY2ggLSAxKTsgfVxuICAgICAgICAgIGlmIChjdXIuY2ggPiAwKSB7XG4gICAgICAgICAgICBjdXIgPSBuZXcgUG9zKGN1ci5saW5lLCBjdXIuY2ggKyAxKTtcbiAgICAgICAgICAgIGNtLnJlcGxhY2VSYW5nZShsaW5lLmNoYXJBdChjdXIuY2ggLSAxKSArIGxpbmUuY2hhckF0KGN1ci5jaCAtIDIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvcyhjdXIubGluZSwgY3VyLmNoIC0gMiksIGN1ciwgXCIrdHJhbnNwb3NlXCIpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY3VyLmxpbmUgPiBjbS5kb2MuZmlyc3QpIHtcbiAgICAgICAgICAgIHZhciBwcmV2ID0gZ2V0TGluZShjbS5kb2MsIGN1ci5saW5lIC0gMSkudGV4dDtcbiAgICAgICAgICAgIGlmIChwcmV2KSB7XG4gICAgICAgICAgICAgIGN1ciA9IG5ldyBQb3MoY3VyLmxpbmUsIDEpO1xuICAgICAgICAgICAgICBjbS5yZXBsYWNlUmFuZ2UobGluZS5jaGFyQXQoMCkgKyBjbS5kb2MubGluZVNlcGFyYXRvcigpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuY2hhckF0KHByZXYubGVuZ3RoIC0gMSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3MoY3VyLmxpbmUgLSAxLCBwcmV2Lmxlbmd0aCAtIDEpLCBjdXIsIFwiK3RyYW5zcG9zZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbmV3U2VsLnB1c2gobmV3IFJhbmdlKGN1ciwgY3VyKSk7XG4gICAgICB9XG4gICAgICBjbS5zZXRTZWxlY3Rpb25zKG5ld1NlbCk7XG4gICAgfSk7IH0sXG4gICAgbmV3bGluZUFuZEluZGVudDogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBydW5Jbk9wKGNtLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgc2VscyA9IGNtLmxpc3RTZWxlY3Rpb25zKCk7XG4gICAgICBmb3IgKHZhciBpID0gc2Vscy5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcbiAgICAgICAgeyBjbS5yZXBsYWNlUmFuZ2UoY20uZG9jLmxpbmVTZXBhcmF0b3IoKSwgc2Vsc1tpXS5hbmNob3IsIHNlbHNbaV0uaGVhZCwgXCIraW5wdXRcIik7IH1cbiAgICAgIHNlbHMgPSBjbS5saXN0U2VsZWN0aW9ucygpO1xuICAgICAgZm9yICh2YXIgaSQxID0gMDsgaSQxIDwgc2Vscy5sZW5ndGg7IGkkMSsrKVxuICAgICAgICB7IGNtLmluZGVudExpbmUoc2Vsc1tpJDFdLmZyb20oKS5saW5lLCBudWxsLCB0cnVlKTsgfVxuICAgICAgZW5zdXJlQ3Vyc29yVmlzaWJsZShjbSk7XG4gICAgfSk7IH0sXG4gICAgb3BlbkxpbmU6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20ucmVwbGFjZVNlbGVjdGlvbihcIlxcblwiLCBcInN0YXJ0XCIpOyB9LFxuICAgIHRvZ2dsZU92ZXJ3cml0ZTogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS50b2dnbGVPdmVyd3JpdGUoKTsgfVxuICB9O1xuXG5cbiAgZnVuY3Rpb24gbGluZVN0YXJ0KGNtLCBsaW5lTikge1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShjbS5kb2MsIGxpbmVOKTtcbiAgICB2YXIgdmlzdWFsID0gdmlzdWFsTGluZShsaW5lKTtcbiAgICBpZiAodmlzdWFsICE9IGxpbmUpIHsgbGluZU4gPSBsaW5lTm8odmlzdWFsKTsgfVxuICAgIHJldHVybiBlbmRPZkxpbmUodHJ1ZSwgY20sIHZpc3VhbCwgbGluZU4sIDEpXG4gIH1cbiAgZnVuY3Rpb24gbGluZUVuZChjbSwgbGluZU4pIHtcbiAgICB2YXIgbGluZSA9IGdldExpbmUoY20uZG9jLCBsaW5lTik7XG4gICAgdmFyIHZpc3VhbCA9IHZpc3VhbExpbmVFbmQobGluZSk7XG4gICAgaWYgKHZpc3VhbCAhPSBsaW5lKSB7IGxpbmVOID0gbGluZU5vKHZpc3VhbCk7IH1cbiAgICByZXR1cm4gZW5kT2ZMaW5lKHRydWUsIGNtLCBsaW5lLCBsaW5lTiwgLTEpXG4gIH1cbiAgZnVuY3Rpb24gbGluZVN0YXJ0U21hcnQoY20sIHBvcykge1xuICAgIHZhciBzdGFydCA9IGxpbmVTdGFydChjbSwgcG9zLmxpbmUpO1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShjbS5kb2MsIHN0YXJ0LmxpbmUpO1xuICAgIHZhciBvcmRlciA9IGdldE9yZGVyKGxpbmUsIGNtLmRvYy5kaXJlY3Rpb24pO1xuICAgIGlmICghb3JkZXIgfHwgb3JkZXJbMF0ubGV2ZWwgPT0gMCkge1xuICAgICAgdmFyIGZpcnN0Tm9uV1MgPSBNYXRoLm1heChzdGFydC5jaCwgbGluZS50ZXh0LnNlYXJjaCgvXFxTLykpO1xuICAgICAgdmFyIGluV1MgPSBwb3MubGluZSA9PSBzdGFydC5saW5lICYmIHBvcy5jaCA8PSBmaXJzdE5vbldTICYmIHBvcy5jaDtcbiAgICAgIHJldHVybiBQb3Moc3RhcnQubGluZSwgaW5XUyA/IDAgOiBmaXJzdE5vbldTLCBzdGFydC5zdGlja3kpXG4gICAgfVxuICAgIHJldHVybiBzdGFydFxuICB9XG5cbiAgLy8gUnVuIGEgaGFuZGxlciB0aGF0IHdhcyBib3VuZCB0byBhIGtleS5cbiAgZnVuY3Rpb24gZG9IYW5kbGVCaW5kaW5nKGNtLCBib3VuZCwgZHJvcFNoaWZ0KSB7XG4gICAgaWYgKHR5cGVvZiBib3VuZCA9PSBcInN0cmluZ1wiKSB7XG4gICAgICBib3VuZCA9IGNvbW1hbmRzW2JvdW5kXTtcbiAgICAgIGlmICghYm91bmQpIHsgcmV0dXJuIGZhbHNlIH1cbiAgICB9XG4gICAgLy8gRW5zdXJlIHByZXZpb3VzIGlucHV0IGhhcyBiZWVuIHJlYWQsIHNvIHRoYXQgdGhlIGhhbmRsZXIgc2VlcyBhXG4gICAgLy8gY29uc2lzdGVudCB2aWV3IG9mIHRoZSBkb2N1bWVudFxuICAgIGNtLmRpc3BsYXkuaW5wdXQuZW5zdXJlUG9sbGVkKCk7XG4gICAgdmFyIHByZXZTaGlmdCA9IGNtLmRpc3BsYXkuc2hpZnQsIGRvbmUgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgaWYgKGNtLmlzUmVhZE9ubHkoKSkgeyBjbS5zdGF0ZS5zdXBwcmVzc0VkaXRzID0gdHJ1ZTsgfVxuICAgICAgaWYgKGRyb3BTaGlmdCkgeyBjbS5kaXNwbGF5LnNoaWZ0ID0gZmFsc2U7IH1cbiAgICAgIGRvbmUgPSBib3VuZChjbSkgIT0gUGFzcztcbiAgICB9IGZpbmFsbHkge1xuICAgICAgY20uZGlzcGxheS5zaGlmdCA9IHByZXZTaGlmdDtcbiAgICAgIGNtLnN0YXRlLnN1cHByZXNzRWRpdHMgPSBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIGRvbmVcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvb2t1cEtleUZvckVkaXRvcihjbSwgbmFtZSwgaGFuZGxlKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbS5zdGF0ZS5rZXlNYXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gbG9va3VwS2V5KG5hbWUsIGNtLnN0YXRlLmtleU1hcHNbaV0sIGhhbmRsZSwgY20pO1xuICAgICAgaWYgKHJlc3VsdCkgeyByZXR1cm4gcmVzdWx0IH1cbiAgICB9XG4gICAgcmV0dXJuIChjbS5vcHRpb25zLmV4dHJhS2V5cyAmJiBsb29rdXBLZXkobmFtZSwgY20ub3B0aW9ucy5leHRyYUtleXMsIGhhbmRsZSwgY20pKVxuICAgICAgfHwgbG9va3VwS2V5KG5hbWUsIGNtLm9wdGlvbnMua2V5TWFwLCBoYW5kbGUsIGNtKVxuICB9XG5cbiAgLy8gTm90ZSB0aGF0LCBkZXNwaXRlIHRoZSBuYW1lLCB0aGlzIGZ1bmN0aW9uIGlzIGFsc28gdXNlZCB0byBjaGVja1xuICAvLyBmb3IgYm91bmQgbW91c2UgY2xpY2tzLlxuXG4gIHZhciBzdG9wU2VxID0gbmV3IERlbGF5ZWQ7XG5cbiAgZnVuY3Rpb24gZGlzcGF0Y2hLZXkoY20sIG5hbWUsIGUsIGhhbmRsZSkge1xuICAgIHZhciBzZXEgPSBjbS5zdGF0ZS5rZXlTZXE7XG4gICAgaWYgKHNlcSkge1xuICAgICAgaWYgKGlzTW9kaWZpZXJLZXkobmFtZSkpIHsgcmV0dXJuIFwiaGFuZGxlZFwiIH1cbiAgICAgIGlmICgvXFwnJC8udGVzdChuYW1lKSlcbiAgICAgICAgeyBjbS5zdGF0ZS5rZXlTZXEgPSBudWxsOyB9XG4gICAgICBlbHNlXG4gICAgICAgIHsgc3RvcFNlcS5zZXQoNTAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoY20uc3RhdGUua2V5U2VxID09IHNlcSkge1xuICAgICAgICAgICAgY20uc3RhdGUua2V5U2VxID0gbnVsbDtcbiAgICAgICAgICAgIGNtLmRpc3BsYXkuaW5wdXQucmVzZXQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pOyB9XG4gICAgICBpZiAoZGlzcGF0Y2hLZXlJbm5lcihjbSwgc2VxICsgXCIgXCIgKyBuYW1lLCBlLCBoYW5kbGUpKSB7IHJldHVybiB0cnVlIH1cbiAgICB9XG4gICAgcmV0dXJuIGRpc3BhdGNoS2V5SW5uZXIoY20sIG5hbWUsIGUsIGhhbmRsZSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc3BhdGNoS2V5SW5uZXIoY20sIG5hbWUsIGUsIGhhbmRsZSkge1xuICAgIHZhciByZXN1bHQgPSBsb29rdXBLZXlGb3JFZGl0b3IoY20sIG5hbWUsIGhhbmRsZSk7XG5cbiAgICBpZiAocmVzdWx0ID09IFwibXVsdGlcIilcbiAgICAgIHsgY20uc3RhdGUua2V5U2VxID0gbmFtZTsgfVxuICAgIGlmIChyZXN1bHQgPT0gXCJoYW5kbGVkXCIpXG4gICAgICB7IHNpZ25hbExhdGVyKGNtLCBcImtleUhhbmRsZWRcIiwgY20sIG5hbWUsIGUpOyB9XG5cbiAgICBpZiAocmVzdWx0ID09IFwiaGFuZGxlZFwiIHx8IHJlc3VsdCA9PSBcIm11bHRpXCIpIHtcbiAgICAgIGVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgICByZXN0YXJ0QmxpbmsoY20pO1xuICAgIH1cblxuICAgIHJldHVybiAhIXJlc3VsdFxuICB9XG5cbiAgLy8gSGFuZGxlIGEga2V5IGZyb20gdGhlIGtleWRvd24gZXZlbnQuXG4gIGZ1bmN0aW9uIGhhbmRsZUtleUJpbmRpbmcoY20sIGUpIHtcbiAgICB2YXIgbmFtZSA9IGtleU5hbWUoZSwgdHJ1ZSk7XG4gICAgaWYgKCFuYW1lKSB7IHJldHVybiBmYWxzZSB9XG5cbiAgICBpZiAoZS5zaGlmdEtleSAmJiAhY20uc3RhdGUua2V5U2VxKSB7XG4gICAgICAvLyBGaXJzdCB0cnkgdG8gcmVzb2x2ZSBmdWxsIG5hbWUgKGluY2x1ZGluZyAnU2hpZnQtJykuIEZhaWxpbmdcbiAgICAgIC8vIHRoYXQsIHNlZSBpZiB0aGVyZSBpcyBhIGN1cnNvci1tb3Rpb24gY29tbWFuZCAoc3RhcnRpbmcgd2l0aFxuICAgICAgLy8gJ2dvJykgYm91bmQgdG8gdGhlIGtleW5hbWUgd2l0aG91dCAnU2hpZnQtJy5cbiAgICAgIHJldHVybiBkaXNwYXRjaEtleShjbSwgXCJTaGlmdC1cIiArIG5hbWUsIGUsIGZ1bmN0aW9uIChiKSB7IHJldHVybiBkb0hhbmRsZUJpbmRpbmcoY20sIGIsIHRydWUpOyB9KVxuICAgICAgICAgIHx8IGRpc3BhdGNoS2V5KGNtLCBuYW1lLCBlLCBmdW5jdGlvbiAoYikge1xuICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBiID09IFwic3RyaW5nXCIgPyAvXmdvW0EtWl0vLnRlc3QoYikgOiBiLm1vdGlvbilcbiAgICAgICAgICAgICAgICAgeyByZXR1cm4gZG9IYW5kbGVCaW5kaW5nKGNtLCBiKSB9XG4gICAgICAgICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGRpc3BhdGNoS2V5KGNtLCBuYW1lLCBlLCBmdW5jdGlvbiAoYikgeyByZXR1cm4gZG9IYW5kbGVCaW5kaW5nKGNtLCBiKTsgfSlcbiAgICB9XG4gIH1cblxuICAvLyBIYW5kbGUgYSBrZXkgZnJvbSB0aGUga2V5cHJlc3MgZXZlbnRcbiAgZnVuY3Rpb24gaGFuZGxlQ2hhckJpbmRpbmcoY20sIGUsIGNoKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoS2V5KGNtLCBcIidcIiArIGNoICsgXCInXCIsIGUsIGZ1bmN0aW9uIChiKSB7IHJldHVybiBkb0hhbmRsZUJpbmRpbmcoY20sIGIsIHRydWUpOyB9KVxuICB9XG5cbiAgdmFyIGxhc3RTdG9wcGVkS2V5ID0gbnVsbDtcbiAgZnVuY3Rpb24gb25LZXlEb3duKGUpIHtcbiAgICB2YXIgY20gPSB0aGlzO1xuICAgIGlmIChlLnRhcmdldCAmJiBlLnRhcmdldCAhPSBjbS5kaXNwbGF5LmlucHV0LmdldEZpZWxkKCkpIHsgcmV0dXJuIH1cbiAgICBjbS5jdXJPcC5mb2N1cyA9IGFjdGl2ZUVsdCgpO1xuICAgIGlmIChzaWduYWxET01FdmVudChjbSwgZSkpIHsgcmV0dXJuIH1cbiAgICAvLyBJRSBkb2VzIHN0cmFuZ2UgdGhpbmdzIHdpdGggZXNjYXBlLlxuICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgMTEgJiYgZS5rZXlDb2RlID09IDI3KSB7IGUucmV0dXJuVmFsdWUgPSBmYWxzZTsgfVxuICAgIHZhciBjb2RlID0gZS5rZXlDb2RlO1xuICAgIGNtLmRpc3BsYXkuc2hpZnQgPSBjb2RlID09IDE2IHx8IGUuc2hpZnRLZXk7XG4gICAgdmFyIGhhbmRsZWQgPSBoYW5kbGVLZXlCaW5kaW5nKGNtLCBlKTtcbiAgICBpZiAocHJlc3RvKSB7XG4gICAgICBsYXN0U3RvcHBlZEtleSA9IGhhbmRsZWQgPyBjb2RlIDogbnVsbDtcbiAgICAgIC8vIE9wZXJhIGhhcyBubyBjdXQgZXZlbnQuLi4gd2UgdHJ5IHRvIGF0IGxlYXN0IGNhdGNoIHRoZSBrZXkgY29tYm9cbiAgICAgIGlmICghaGFuZGxlZCAmJiBjb2RlID09IDg4ICYmICFoYXNDb3B5RXZlbnQgJiYgKG1hYyA/IGUubWV0YUtleSA6IGUuY3RybEtleSkpXG4gICAgICAgIHsgY20ucmVwbGFjZVNlbGVjdGlvbihcIlwiLCBudWxsLCBcImN1dFwiKTsgfVxuICAgIH1cbiAgICBpZiAoZ2Vja28gJiYgIW1hYyAmJiAhaGFuZGxlZCAmJiBjb2RlID09IDQ2ICYmIGUuc2hpZnRLZXkgJiYgIWUuY3RybEtleSAmJiBkb2N1bWVudC5leGVjQ29tbWFuZClcbiAgICAgIHsgZG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJjdXRcIik7IH1cblxuICAgIC8vIFR1cm4gbW91c2UgaW50byBjcm9zc2hhaXIgd2hlbiBBbHQgaXMgaGVsZCBvbiBNYWMuXG4gICAgaWYgKGNvZGUgPT0gMTggJiYgIS9cXGJDb2RlTWlycm9yLWNyb3NzaGFpclxcYi8udGVzdChjbS5kaXNwbGF5LmxpbmVEaXYuY2xhc3NOYW1lKSlcbiAgICAgIHsgc2hvd0Nyb3NzSGFpcihjbSk7IH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3dDcm9zc0hhaXIoY20pIHtcbiAgICB2YXIgbGluZURpdiA9IGNtLmRpc3BsYXkubGluZURpdjtcbiAgICBhZGRDbGFzcyhsaW5lRGl2LCBcIkNvZGVNaXJyb3ItY3Jvc3NoYWlyXCIpO1xuXG4gICAgZnVuY3Rpb24gdXAoZSkge1xuICAgICAgaWYgKGUua2V5Q29kZSA9PSAxOCB8fCAhZS5hbHRLZXkpIHtcbiAgICAgICAgcm1DbGFzcyhsaW5lRGl2LCBcIkNvZGVNaXJyb3ItY3Jvc3NoYWlyXCIpO1xuICAgICAgICBvZmYoZG9jdW1lbnQsIFwia2V5dXBcIiwgdXApO1xuICAgICAgICBvZmYoZG9jdW1lbnQsIFwibW91c2VvdmVyXCIsIHVwKTtcbiAgICAgIH1cbiAgICB9XG4gICAgb24oZG9jdW1lbnQsIFwia2V5dXBcIiwgdXApO1xuICAgIG9uKGRvY3VtZW50LCBcIm1vdXNlb3ZlclwiLCB1cCk7XG4gIH1cblxuICBmdW5jdGlvbiBvbktleVVwKGUpIHtcbiAgICBpZiAoZS5rZXlDb2RlID09IDE2KSB7IHRoaXMuZG9jLnNlbC5zaGlmdCA9IGZhbHNlOyB9XG4gICAgc2lnbmFsRE9NRXZlbnQodGhpcywgZSk7XG4gIH1cblxuICBmdW5jdGlvbiBvbktleVByZXNzKGUpIHtcbiAgICB2YXIgY20gPSB0aGlzO1xuICAgIGlmIChlLnRhcmdldCAmJiBlLnRhcmdldCAhPSBjbS5kaXNwbGF5LmlucHV0LmdldEZpZWxkKCkpIHsgcmV0dXJuIH1cbiAgICBpZiAoZXZlbnRJbldpZGdldChjbS5kaXNwbGF5LCBlKSB8fCBzaWduYWxET01FdmVudChjbSwgZSkgfHwgZS5jdHJsS2V5ICYmICFlLmFsdEtleSB8fCBtYWMgJiYgZS5tZXRhS2V5KSB7IHJldHVybiB9XG4gICAgdmFyIGtleUNvZGUgPSBlLmtleUNvZGUsIGNoYXJDb2RlID0gZS5jaGFyQ29kZTtcbiAgICBpZiAocHJlc3RvICYmIGtleUNvZGUgPT0gbGFzdFN0b3BwZWRLZXkpIHtsYXN0U3RvcHBlZEtleSA9IG51bGw7IGVfcHJldmVudERlZmF1bHQoZSk7IHJldHVybn1cbiAgICBpZiAoKHByZXN0byAmJiAoIWUud2hpY2ggfHwgZS53aGljaCA8IDEwKSkgJiYgaGFuZGxlS2V5QmluZGluZyhjbSwgZSkpIHsgcmV0dXJuIH1cbiAgICB2YXIgY2ggPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXJDb2RlID09IG51bGwgPyBrZXlDb2RlIDogY2hhckNvZGUpO1xuICAgIC8vIFNvbWUgYnJvd3NlcnMgZmlyZSBrZXlwcmVzcyBldmVudHMgZm9yIGJhY2tzcGFjZVxuICAgIGlmIChjaCA9PSBcIlxceDA4XCIpIHsgcmV0dXJuIH1cbiAgICBpZiAoaGFuZGxlQ2hhckJpbmRpbmcoY20sIGUsIGNoKSkgeyByZXR1cm4gfVxuICAgIGNtLmRpc3BsYXkuaW5wdXQub25LZXlQcmVzcyhlKTtcbiAgfVxuXG4gIHZhciBET1VCTEVDTElDS19ERUxBWSA9IDQwMDtcblxuICB2YXIgUGFzdENsaWNrID0gZnVuY3Rpb24odGltZSwgcG9zLCBidXR0b24pIHtcbiAgICB0aGlzLnRpbWUgPSB0aW1lO1xuICAgIHRoaXMucG9zID0gcG9zO1xuICAgIHRoaXMuYnV0dG9uID0gYnV0dG9uO1xuICB9O1xuXG4gIFBhc3RDbGljay5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uICh0aW1lLCBwb3MsIGJ1dHRvbikge1xuICAgIHJldHVybiB0aGlzLnRpbWUgKyBET1VCTEVDTElDS19ERUxBWSA+IHRpbWUgJiZcbiAgICAgIGNtcChwb3MsIHRoaXMucG9zKSA9PSAwICYmIGJ1dHRvbiA9PSB0aGlzLmJ1dHRvblxuICB9O1xuXG4gIHZhciBsYXN0Q2xpY2ssIGxhc3REb3VibGVDbGljaztcbiAgZnVuY3Rpb24gY2xpY2tSZXBlYXQocG9zLCBidXR0b24pIHtcbiAgICB2YXIgbm93ID0gK25ldyBEYXRlO1xuICAgIGlmIChsYXN0RG91YmxlQ2xpY2sgJiYgbGFzdERvdWJsZUNsaWNrLmNvbXBhcmUobm93LCBwb3MsIGJ1dHRvbikpIHtcbiAgICAgIGxhc3RDbGljayA9IGxhc3REb3VibGVDbGljayA9IG51bGw7XG4gICAgICByZXR1cm4gXCJ0cmlwbGVcIlxuICAgIH0gZWxzZSBpZiAobGFzdENsaWNrICYmIGxhc3RDbGljay5jb21wYXJlKG5vdywgcG9zLCBidXR0b24pKSB7XG4gICAgICBsYXN0RG91YmxlQ2xpY2sgPSBuZXcgUGFzdENsaWNrKG5vdywgcG9zLCBidXR0b24pO1xuICAgICAgbGFzdENsaWNrID0gbnVsbDtcbiAgICAgIHJldHVybiBcImRvdWJsZVwiXG4gICAgfSBlbHNlIHtcbiAgICAgIGxhc3RDbGljayA9IG5ldyBQYXN0Q2xpY2sobm93LCBwb3MsIGJ1dHRvbik7XG4gICAgICBsYXN0RG91YmxlQ2xpY2sgPSBudWxsO1xuICAgICAgcmV0dXJuIFwic2luZ2xlXCJcbiAgICB9XG4gIH1cblxuICAvLyBBIG1vdXNlIGRvd24gY2FuIGJlIGEgc2luZ2xlIGNsaWNrLCBkb3VibGUgY2xpY2ssIHRyaXBsZSBjbGljayxcbiAgLy8gc3RhcnQgb2Ygc2VsZWN0aW9uIGRyYWcsIHN0YXJ0IG9mIHRleHQgZHJhZywgbmV3IGN1cnNvclxuICAvLyAoY3RybC1jbGljayksIHJlY3RhbmdsZSBkcmFnIChhbHQtZHJhZyksIG9yIHh3aW5cbiAgLy8gbWlkZGxlLWNsaWNrLXBhc3RlLiBPciBpdCBtaWdodCBiZSBhIGNsaWNrIG9uIHNvbWV0aGluZyB3ZSBzaG91bGRcbiAgLy8gbm90IGludGVyZmVyZSB3aXRoLCBzdWNoIGFzIGEgc2Nyb2xsYmFyIG9yIHdpZGdldC5cbiAgZnVuY3Rpb24gb25Nb3VzZURvd24oZSkge1xuICAgIHZhciBjbSA9IHRoaXMsIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIGlmIChzaWduYWxET01FdmVudChjbSwgZSkgfHwgZGlzcGxheS5hY3RpdmVUb3VjaCAmJiBkaXNwbGF5LmlucHV0LnN1cHBvcnRzVG91Y2goKSkgeyByZXR1cm4gfVxuICAgIGRpc3BsYXkuaW5wdXQuZW5zdXJlUG9sbGVkKCk7XG4gICAgZGlzcGxheS5zaGlmdCA9IGUuc2hpZnRLZXk7XG5cbiAgICBpZiAoZXZlbnRJbldpZGdldChkaXNwbGF5LCBlKSkge1xuICAgICAgaWYgKCF3ZWJraXQpIHtcbiAgICAgICAgLy8gQnJpZWZseSB0dXJuIG9mZiBkcmFnZ2FiaWxpdHksIHRvIGFsbG93IHdpZGdldHMgdG8gZG9cbiAgICAgICAgLy8gbm9ybWFsIGRyYWdnaW5nIHRoaW5ncy5cbiAgICAgICAgZGlzcGxheS5zY3JvbGxlci5kcmFnZ2FibGUgPSBmYWxzZTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBkaXNwbGF5LnNjcm9sbGVyLmRyYWdnYWJsZSA9IHRydWU7IH0sIDEwMCk7XG4gICAgICB9XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKGNsaWNrSW5HdXR0ZXIoY20sIGUpKSB7IHJldHVybiB9XG4gICAgdmFyIHBvcyA9IHBvc0Zyb21Nb3VzZShjbSwgZSksIGJ1dHRvbiA9IGVfYnV0dG9uKGUpLCByZXBlYXQgPSBwb3MgPyBjbGlja1JlcGVhdChwb3MsIGJ1dHRvbikgOiBcInNpbmdsZVwiO1xuICAgIHdpbmRvdy5mb2N1cygpO1xuXG4gICAgLy8gIzMyNjE6IG1ha2Ugc3VyZSwgdGhhdCB3ZSdyZSBub3Qgc3RhcnRpbmcgYSBzZWNvbmQgc2VsZWN0aW9uXG4gICAgaWYgKGJ1dHRvbiA9PSAxICYmIGNtLnN0YXRlLnNlbGVjdGluZ1RleHQpXG4gICAgICB7IGNtLnN0YXRlLnNlbGVjdGluZ1RleHQoZSk7IH1cblxuICAgIGlmIChwb3MgJiYgaGFuZGxlTWFwcGVkQnV0dG9uKGNtLCBidXR0b24sIHBvcywgcmVwZWF0LCBlKSkgeyByZXR1cm4gfVxuXG4gICAgaWYgKGJ1dHRvbiA9PSAxKSB7XG4gICAgICBpZiAocG9zKSB7IGxlZnRCdXR0b25Eb3duKGNtLCBwb3MsIHJlcGVhdCwgZSk7IH1cbiAgICAgIGVsc2UgaWYgKGVfdGFyZ2V0KGUpID09IGRpc3BsYXkuc2Nyb2xsZXIpIHsgZV9wcmV2ZW50RGVmYXVsdChlKTsgfVxuICAgIH0gZWxzZSBpZiAoYnV0dG9uID09IDIpIHtcbiAgICAgIGlmIChwb3MpIHsgZXh0ZW5kU2VsZWN0aW9uKGNtLmRvYywgcG9zKTsgfVxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBkaXNwbGF5LmlucHV0LmZvY3VzKCk7IH0sIDIwKTtcbiAgICB9IGVsc2UgaWYgKGJ1dHRvbiA9PSAzKSB7XG4gICAgICBpZiAoY2FwdHVyZVJpZ2h0Q2xpY2spIHsgY20uZGlzcGxheS5pbnB1dC5vbkNvbnRleHRNZW51KGUpOyB9XG4gICAgICBlbHNlIHsgZGVsYXlCbHVyRXZlbnQoY20pOyB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlTWFwcGVkQnV0dG9uKGNtLCBidXR0b24sIHBvcywgcmVwZWF0LCBldmVudCkge1xuICAgIHZhciBuYW1lID0gXCJDbGlja1wiO1xuICAgIGlmIChyZXBlYXQgPT0gXCJkb3VibGVcIikgeyBuYW1lID0gXCJEb3VibGVcIiArIG5hbWU7IH1cbiAgICBlbHNlIGlmIChyZXBlYXQgPT0gXCJ0cmlwbGVcIikgeyBuYW1lID0gXCJUcmlwbGVcIiArIG5hbWU7IH1cbiAgICBuYW1lID0gKGJ1dHRvbiA9PSAxID8gXCJMZWZ0XCIgOiBidXR0b24gPT0gMiA/IFwiTWlkZGxlXCIgOiBcIlJpZ2h0XCIpICsgbmFtZTtcblxuICAgIHJldHVybiBkaXNwYXRjaEtleShjbSwgIGFkZE1vZGlmaWVyTmFtZXMobmFtZSwgZXZlbnQpLCBldmVudCwgZnVuY3Rpb24gKGJvdW5kKSB7XG4gICAgICBpZiAodHlwZW9mIGJvdW5kID09IFwic3RyaW5nXCIpIHsgYm91bmQgPSBjb21tYW5kc1tib3VuZF07IH1cbiAgICAgIGlmICghYm91bmQpIHsgcmV0dXJuIGZhbHNlIH1cbiAgICAgIHZhciBkb25lID0gZmFsc2U7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoY20uaXNSZWFkT25seSgpKSB7IGNtLnN0YXRlLnN1cHByZXNzRWRpdHMgPSB0cnVlOyB9XG4gICAgICAgIGRvbmUgPSBib3VuZChjbSwgcG9zKSAhPSBQYXNzO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgY20uc3RhdGUuc3VwcHJlc3NFZGl0cyA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRvbmVcbiAgICB9KVxuICB9XG5cbiAgZnVuY3Rpb24gY29uZmlndXJlTW91c2UoY20sIHJlcGVhdCwgZXZlbnQpIHtcbiAgICB2YXIgb3B0aW9uID0gY20uZ2V0T3B0aW9uKFwiY29uZmlndXJlTW91c2VcIik7XG4gICAgdmFyIHZhbHVlID0gb3B0aW9uID8gb3B0aW9uKGNtLCByZXBlYXQsIGV2ZW50KSA6IHt9O1xuICAgIGlmICh2YWx1ZS51bml0ID09IG51bGwpIHtcbiAgICAgIHZhciByZWN0ID0gY2hyb21lT1MgPyBldmVudC5zaGlmdEtleSAmJiBldmVudC5tZXRhS2V5IDogZXZlbnQuYWx0S2V5O1xuICAgICAgdmFsdWUudW5pdCA9IHJlY3QgPyBcInJlY3RhbmdsZVwiIDogcmVwZWF0ID09IFwic2luZ2xlXCIgPyBcImNoYXJcIiA6IHJlcGVhdCA9PSBcImRvdWJsZVwiID8gXCJ3b3JkXCIgOiBcImxpbmVcIjtcbiAgICB9XG4gICAgaWYgKHZhbHVlLmV4dGVuZCA9PSBudWxsIHx8IGNtLmRvYy5leHRlbmQpIHsgdmFsdWUuZXh0ZW5kID0gY20uZG9jLmV4dGVuZCB8fCBldmVudC5zaGlmdEtleTsgfVxuICAgIGlmICh2YWx1ZS5hZGROZXcgPT0gbnVsbCkgeyB2YWx1ZS5hZGROZXcgPSBtYWMgPyBldmVudC5tZXRhS2V5IDogZXZlbnQuY3RybEtleTsgfVxuICAgIGlmICh2YWx1ZS5tb3ZlT25EcmFnID09IG51bGwpIHsgdmFsdWUubW92ZU9uRHJhZyA9ICEobWFjID8gZXZlbnQuYWx0S2V5IDogZXZlbnQuY3RybEtleSk7IH1cbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIGZ1bmN0aW9uIGxlZnRCdXR0b25Eb3duKGNtLCBwb3MsIHJlcGVhdCwgZXZlbnQpIHtcbiAgICBpZiAoaWUpIHsgc2V0VGltZW91dChiaW5kKGVuc3VyZUZvY3VzLCBjbSksIDApOyB9XG4gICAgZWxzZSB7IGNtLmN1ck9wLmZvY3VzID0gYWN0aXZlRWx0KCk7IH1cblxuICAgIHZhciBiZWhhdmlvciA9IGNvbmZpZ3VyZU1vdXNlKGNtLCByZXBlYXQsIGV2ZW50KTtcblxuICAgIHZhciBzZWwgPSBjbS5kb2Muc2VsLCBjb250YWluZWQ7XG4gICAgaWYgKGNtLm9wdGlvbnMuZHJhZ0Ryb3AgJiYgZHJhZ0FuZERyb3AgJiYgIWNtLmlzUmVhZE9ubHkoKSAmJlxuICAgICAgICByZXBlYXQgPT0gXCJzaW5nbGVcIiAmJiAoY29udGFpbmVkID0gc2VsLmNvbnRhaW5zKHBvcykpID4gLTEgJiZcbiAgICAgICAgKGNtcCgoY29udGFpbmVkID0gc2VsLnJhbmdlc1tjb250YWluZWRdKS5mcm9tKCksIHBvcykgPCAwIHx8IHBvcy54UmVsID4gMCkgJiZcbiAgICAgICAgKGNtcChjb250YWluZWQudG8oKSwgcG9zKSA+IDAgfHwgcG9zLnhSZWwgPCAwKSlcbiAgICAgIHsgbGVmdEJ1dHRvblN0YXJ0RHJhZyhjbSwgZXZlbnQsIHBvcywgYmVoYXZpb3IpOyB9XG4gICAgZWxzZVxuICAgICAgeyBsZWZ0QnV0dG9uU2VsZWN0KGNtLCBldmVudCwgcG9zLCBiZWhhdmlvcik7IH1cbiAgfVxuXG4gIC8vIFN0YXJ0IGEgdGV4dCBkcmFnLiBXaGVuIGl0IGVuZHMsIHNlZSBpZiBhbnkgZHJhZ2dpbmcgYWN0dWFsbHlcbiAgLy8gaGFwcGVuLCBhbmQgdHJlYXQgYXMgYSBjbGljayBpZiBpdCBkaWRuJ3QuXG4gIGZ1bmN0aW9uIGxlZnRCdXR0b25TdGFydERyYWcoY20sIGV2ZW50LCBwb3MsIGJlaGF2aW9yKSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBtb3ZlZCA9IGZhbHNlO1xuICAgIHZhciBkcmFnRW5kID0gb3BlcmF0aW9uKGNtLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKHdlYmtpdCkgeyBkaXNwbGF5LnNjcm9sbGVyLmRyYWdnYWJsZSA9IGZhbHNlOyB9XG4gICAgICBjbS5zdGF0ZS5kcmFnZ2luZ1RleHQgPSBmYWxzZTtcbiAgICAgIG9mZihkaXNwbGF5LndyYXBwZXIub3duZXJEb2N1bWVudCwgXCJtb3VzZXVwXCIsIGRyYWdFbmQpO1xuICAgICAgb2ZmKGRpc3BsYXkud3JhcHBlci5vd25lckRvY3VtZW50LCBcIm1vdXNlbW92ZVwiLCBtb3VzZU1vdmUpO1xuICAgICAgb2ZmKGRpc3BsYXkuc2Nyb2xsZXIsIFwiZHJhZ3N0YXJ0XCIsIGRyYWdTdGFydCk7XG4gICAgICBvZmYoZGlzcGxheS5zY3JvbGxlciwgXCJkcm9wXCIsIGRyYWdFbmQpO1xuICAgICAgaWYgKCFtb3ZlZCkge1xuICAgICAgICBlX3ByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgICBpZiAoIWJlaGF2aW9yLmFkZE5ldylcbiAgICAgICAgICB7IGV4dGVuZFNlbGVjdGlvbihjbS5kb2MsIHBvcywgbnVsbCwgbnVsbCwgYmVoYXZpb3IuZXh0ZW5kKTsgfVxuICAgICAgICAvLyBXb3JrIGFyb3VuZCB1bmV4cGxhaW5hYmxlIGZvY3VzIHByb2JsZW0gaW4gSUU5ICgjMjEyNykgYW5kIENocm9tZSAoIzMwODEpXG4gICAgICAgIGlmICgod2Via2l0ICYmICFzYWZhcmkpIHx8IGllICYmIGllX3ZlcnNpb24gPT0gOSlcbiAgICAgICAgICB7IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge2Rpc3BsYXkud3JhcHBlci5vd25lckRvY3VtZW50LmJvZHkuZm9jdXMoe3ByZXZlbnRTY3JvbGw6IHRydWV9KTsgZGlzcGxheS5pbnB1dC5mb2N1cygpO30sIDIwKTsgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgeyBkaXNwbGF5LmlucHV0LmZvY3VzKCk7IH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgbW91c2VNb3ZlID0gZnVuY3Rpb24oZTIpIHtcbiAgICAgIG1vdmVkID0gbW92ZWQgfHwgTWF0aC5hYnMoZXZlbnQuY2xpZW50WCAtIGUyLmNsaWVudFgpICsgTWF0aC5hYnMoZXZlbnQuY2xpZW50WSAtIGUyLmNsaWVudFkpID49IDEwO1xuICAgIH07XG4gICAgdmFyIGRyYWdTdGFydCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1vdmVkID0gdHJ1ZTsgfTtcbiAgICAvLyBMZXQgdGhlIGRyYWcgaGFuZGxlciBoYW5kbGUgdGhpcy5cbiAgICBpZiAod2Via2l0KSB7IGRpc3BsYXkuc2Nyb2xsZXIuZHJhZ2dhYmxlID0gdHJ1ZTsgfVxuICAgIGNtLnN0YXRlLmRyYWdnaW5nVGV4dCA9IGRyYWdFbmQ7XG4gICAgZHJhZ0VuZC5jb3B5ID0gIWJlaGF2aW9yLm1vdmVPbkRyYWc7XG4gICAgLy8gSUUncyBhcHByb2FjaCB0byBkcmFnZ2FibGVcbiAgICBpZiAoZGlzcGxheS5zY3JvbGxlci5kcmFnRHJvcCkgeyBkaXNwbGF5LnNjcm9sbGVyLmRyYWdEcm9wKCk7IH1cbiAgICBvbihkaXNwbGF5LndyYXBwZXIub3duZXJEb2N1bWVudCwgXCJtb3VzZXVwXCIsIGRyYWdFbmQpO1xuICAgIG9uKGRpc3BsYXkud3JhcHBlci5vd25lckRvY3VtZW50LCBcIm1vdXNlbW92ZVwiLCBtb3VzZU1vdmUpO1xuICAgIG9uKGRpc3BsYXkuc2Nyb2xsZXIsIFwiZHJhZ3N0YXJ0XCIsIGRyYWdTdGFydCk7XG4gICAgb24oZGlzcGxheS5zY3JvbGxlciwgXCJkcm9wXCIsIGRyYWdFbmQpO1xuXG4gICAgZGVsYXlCbHVyRXZlbnQoY20pO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gZGlzcGxheS5pbnB1dC5mb2N1cygpOyB9LCAyMCk7XG4gIH1cblxuICBmdW5jdGlvbiByYW5nZUZvclVuaXQoY20sIHBvcywgdW5pdCkge1xuICAgIGlmICh1bml0ID09IFwiY2hhclwiKSB7IHJldHVybiBuZXcgUmFuZ2UocG9zLCBwb3MpIH1cbiAgICBpZiAodW5pdCA9PSBcIndvcmRcIikgeyByZXR1cm4gY20uZmluZFdvcmRBdChwb3MpIH1cbiAgICBpZiAodW5pdCA9PSBcImxpbmVcIikgeyByZXR1cm4gbmV3IFJhbmdlKFBvcyhwb3MubGluZSwgMCksIGNsaXBQb3MoY20uZG9jLCBQb3MocG9zLmxpbmUgKyAxLCAwKSkpIH1cbiAgICB2YXIgcmVzdWx0ID0gdW5pdChjbSwgcG9zKTtcbiAgICByZXR1cm4gbmV3IFJhbmdlKHJlc3VsdC5mcm9tLCByZXN1bHQudG8pXG4gIH1cblxuICAvLyBOb3JtYWwgc2VsZWN0aW9uLCBhcyBvcHBvc2VkIHRvIHRleHQgZHJhZ2dpbmcuXG4gIGZ1bmN0aW9uIGxlZnRCdXR0b25TZWxlY3QoY20sIGV2ZW50LCBzdGFydCwgYmVoYXZpb3IpIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGRvYyA9IGNtLmRvYztcbiAgICBlX3ByZXZlbnREZWZhdWx0KGV2ZW50KTtcblxuICAgIHZhciBvdXJSYW5nZSwgb3VySW5kZXgsIHN0YXJ0U2VsID0gZG9jLnNlbCwgcmFuZ2VzID0gc3RhcnRTZWwucmFuZ2VzO1xuICAgIGlmIChiZWhhdmlvci5hZGROZXcgJiYgIWJlaGF2aW9yLmV4dGVuZCkge1xuICAgICAgb3VySW5kZXggPSBkb2Muc2VsLmNvbnRhaW5zKHN0YXJ0KTtcbiAgICAgIGlmIChvdXJJbmRleCA+IC0xKVxuICAgICAgICB7IG91clJhbmdlID0gcmFuZ2VzW291ckluZGV4XTsgfVxuICAgICAgZWxzZVxuICAgICAgICB7IG91clJhbmdlID0gbmV3IFJhbmdlKHN0YXJ0LCBzdGFydCk7IH1cbiAgICB9IGVsc2Uge1xuICAgICAgb3VyUmFuZ2UgPSBkb2Muc2VsLnByaW1hcnkoKTtcbiAgICAgIG91ckluZGV4ID0gZG9jLnNlbC5wcmltSW5kZXg7XG4gICAgfVxuXG4gICAgaWYgKGJlaGF2aW9yLnVuaXQgPT0gXCJyZWN0YW5nbGVcIikge1xuICAgICAgaWYgKCFiZWhhdmlvci5hZGROZXcpIHsgb3VyUmFuZ2UgPSBuZXcgUmFuZ2Uoc3RhcnQsIHN0YXJ0KTsgfVxuICAgICAgc3RhcnQgPSBwb3NGcm9tTW91c2UoY20sIGV2ZW50LCB0cnVlLCB0cnVlKTtcbiAgICAgIG91ckluZGV4ID0gLTE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciByYW5nZSA9IHJhbmdlRm9yVW5pdChjbSwgc3RhcnQsIGJlaGF2aW9yLnVuaXQpO1xuICAgICAgaWYgKGJlaGF2aW9yLmV4dGVuZClcbiAgICAgICAgeyBvdXJSYW5nZSA9IGV4dGVuZFJhbmdlKG91clJhbmdlLCByYW5nZS5hbmNob3IsIHJhbmdlLmhlYWQsIGJlaGF2aW9yLmV4dGVuZCk7IH1cbiAgICAgIGVsc2VcbiAgICAgICAgeyBvdXJSYW5nZSA9IHJhbmdlOyB9XG4gICAgfVxuXG4gICAgaWYgKCFiZWhhdmlvci5hZGROZXcpIHtcbiAgICAgIG91ckluZGV4ID0gMDtcbiAgICAgIHNldFNlbGVjdGlvbihkb2MsIG5ldyBTZWxlY3Rpb24oW291clJhbmdlXSwgMCksIHNlbF9tb3VzZSk7XG4gICAgICBzdGFydFNlbCA9IGRvYy5zZWw7XG4gICAgfSBlbHNlIGlmIChvdXJJbmRleCA9PSAtMSkge1xuICAgICAgb3VySW5kZXggPSByYW5nZXMubGVuZ3RoO1xuICAgICAgc2V0U2VsZWN0aW9uKGRvYywgbm9ybWFsaXplU2VsZWN0aW9uKGNtLCByYW5nZXMuY29uY2F0KFtvdXJSYW5nZV0pLCBvdXJJbmRleCksXG4gICAgICAgICAgICAgICAgICAge3Njcm9sbDogZmFsc2UsIG9yaWdpbjogXCIqbW91c2VcIn0pO1xuICAgIH0gZWxzZSBpZiAocmFuZ2VzLmxlbmd0aCA+IDEgJiYgcmFuZ2VzW291ckluZGV4XS5lbXB0eSgpICYmIGJlaGF2aW9yLnVuaXQgPT0gXCJjaGFyXCIgJiYgIWJlaGF2aW9yLmV4dGVuZCkge1xuICAgICAgc2V0U2VsZWN0aW9uKGRvYywgbm9ybWFsaXplU2VsZWN0aW9uKGNtLCByYW5nZXMuc2xpY2UoMCwgb3VySW5kZXgpLmNvbmNhdChyYW5nZXMuc2xpY2Uob3VySW5kZXggKyAxKSksIDApLFxuICAgICAgICAgICAgICAgICAgIHtzY3JvbGw6IGZhbHNlLCBvcmlnaW46IFwiKm1vdXNlXCJ9KTtcbiAgICAgIHN0YXJ0U2VsID0gZG9jLnNlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVwbGFjZU9uZVNlbGVjdGlvbihkb2MsIG91ckluZGV4LCBvdXJSYW5nZSwgc2VsX21vdXNlKTtcbiAgICB9XG5cbiAgICB2YXIgbGFzdFBvcyA9IHN0YXJ0O1xuICAgIGZ1bmN0aW9uIGV4dGVuZFRvKHBvcykge1xuICAgICAgaWYgKGNtcChsYXN0UG9zLCBwb3MpID09IDApIHsgcmV0dXJuIH1cbiAgICAgIGxhc3RQb3MgPSBwb3M7XG5cbiAgICAgIGlmIChiZWhhdmlvci51bml0ID09IFwicmVjdGFuZ2xlXCIpIHtcbiAgICAgICAgdmFyIHJhbmdlcyA9IFtdLCB0YWJTaXplID0gY20ub3B0aW9ucy50YWJTaXplO1xuICAgICAgICB2YXIgc3RhcnRDb2wgPSBjb3VudENvbHVtbihnZXRMaW5lKGRvYywgc3RhcnQubGluZSkudGV4dCwgc3RhcnQuY2gsIHRhYlNpemUpO1xuICAgICAgICB2YXIgcG9zQ29sID0gY291bnRDb2x1bW4oZ2V0TGluZShkb2MsIHBvcy5saW5lKS50ZXh0LCBwb3MuY2gsIHRhYlNpemUpO1xuICAgICAgICB2YXIgbGVmdCA9IE1hdGgubWluKHN0YXJ0Q29sLCBwb3NDb2wpLCByaWdodCA9IE1hdGgubWF4KHN0YXJ0Q29sLCBwb3NDb2wpO1xuICAgICAgICBmb3IgKHZhciBsaW5lID0gTWF0aC5taW4oc3RhcnQubGluZSwgcG9zLmxpbmUpLCBlbmQgPSBNYXRoLm1pbihjbS5sYXN0TGluZSgpLCBNYXRoLm1heChzdGFydC5saW5lLCBwb3MubGluZSkpO1xuICAgICAgICAgICAgIGxpbmUgPD0gZW5kOyBsaW5lKyspIHtcbiAgICAgICAgICB2YXIgdGV4dCA9IGdldExpbmUoZG9jLCBsaW5lKS50ZXh0LCBsZWZ0UG9zID0gZmluZENvbHVtbih0ZXh0LCBsZWZ0LCB0YWJTaXplKTtcbiAgICAgICAgICBpZiAobGVmdCA9PSByaWdodClcbiAgICAgICAgICAgIHsgcmFuZ2VzLnB1c2gobmV3IFJhbmdlKFBvcyhsaW5lLCBsZWZ0UG9zKSwgUG9zKGxpbmUsIGxlZnRQb3MpKSk7IH1cbiAgICAgICAgICBlbHNlIGlmICh0ZXh0Lmxlbmd0aCA+IGxlZnRQb3MpXG4gICAgICAgICAgICB7IHJhbmdlcy5wdXNoKG5ldyBSYW5nZShQb3MobGluZSwgbGVmdFBvcyksIFBvcyhsaW5lLCBmaW5kQ29sdW1uKHRleHQsIHJpZ2h0LCB0YWJTaXplKSkpKTsgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghcmFuZ2VzLmxlbmd0aCkgeyByYW5nZXMucHVzaChuZXcgUmFuZ2Uoc3RhcnQsIHN0YXJ0KSk7IH1cbiAgICAgICAgc2V0U2VsZWN0aW9uKGRvYywgbm9ybWFsaXplU2VsZWN0aW9uKGNtLCBzdGFydFNlbC5yYW5nZXMuc2xpY2UoMCwgb3VySW5kZXgpLmNvbmNhdChyYW5nZXMpLCBvdXJJbmRleCksXG4gICAgICAgICAgICAgICAgICAgICB7b3JpZ2luOiBcIiptb3VzZVwiLCBzY3JvbGw6IGZhbHNlfSk7XG4gICAgICAgIGNtLnNjcm9sbEludG9WaWV3KHBvcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgb2xkUmFuZ2UgPSBvdXJSYW5nZTtcbiAgICAgICAgdmFyIHJhbmdlID0gcmFuZ2VGb3JVbml0KGNtLCBwb3MsIGJlaGF2aW9yLnVuaXQpO1xuICAgICAgICB2YXIgYW5jaG9yID0gb2xkUmFuZ2UuYW5jaG9yLCBoZWFkO1xuICAgICAgICBpZiAoY21wKHJhbmdlLmFuY2hvciwgYW5jaG9yKSA+IDApIHtcbiAgICAgICAgICBoZWFkID0gcmFuZ2UuaGVhZDtcbiAgICAgICAgICBhbmNob3IgPSBtaW5Qb3Mob2xkUmFuZ2UuZnJvbSgpLCByYW5nZS5hbmNob3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGhlYWQgPSByYW5nZS5hbmNob3I7XG4gICAgICAgICAgYW5jaG9yID0gbWF4UG9zKG9sZFJhbmdlLnRvKCksIHJhbmdlLmhlYWQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciByYW5nZXMkMSA9IHN0YXJ0U2VsLnJhbmdlcy5zbGljZSgwKTtcbiAgICAgICAgcmFuZ2VzJDFbb3VySW5kZXhdID0gYmlkaVNpbXBsaWZ5KGNtLCBuZXcgUmFuZ2UoY2xpcFBvcyhkb2MsIGFuY2hvciksIGhlYWQpKTtcbiAgICAgICAgc2V0U2VsZWN0aW9uKGRvYywgbm9ybWFsaXplU2VsZWN0aW9uKGNtLCByYW5nZXMkMSwgb3VySW5kZXgpLCBzZWxfbW91c2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBlZGl0b3JTaXplID0gZGlzcGxheS53cmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIC8vIFVzZWQgdG8gZW5zdXJlIHRpbWVvdXQgcmUtdHJpZXMgZG9uJ3QgZmlyZSB3aGVuIGFub3RoZXIgZXh0ZW5kXG4gICAgLy8gaGFwcGVuZWQgaW4gdGhlIG1lYW50aW1lIChjbGVhclRpbWVvdXQgaXNuJ3QgcmVsaWFibGUgLS0gYXRcbiAgICAvLyBsZWFzdCBvbiBDaHJvbWUsIHRoZSB0aW1lb3V0cyBzdGlsbCBoYXBwZW4gZXZlbiB3aGVuIGNsZWFyZWQsXG4gICAgLy8gaWYgdGhlIGNsZWFyIGhhcHBlbnMgYWZ0ZXIgdGhlaXIgc2NoZWR1bGVkIGZpcmluZyB0aW1lKS5cbiAgICB2YXIgY291bnRlciA9IDA7XG5cbiAgICBmdW5jdGlvbiBleHRlbmQoZSkge1xuICAgICAgdmFyIGN1ckNvdW50ID0gKytjb3VudGVyO1xuICAgICAgdmFyIGN1ciA9IHBvc0Zyb21Nb3VzZShjbSwgZSwgdHJ1ZSwgYmVoYXZpb3IudW5pdCA9PSBcInJlY3RhbmdsZVwiKTtcbiAgICAgIGlmICghY3VyKSB7IHJldHVybiB9XG4gICAgICBpZiAoY21wKGN1ciwgbGFzdFBvcykgIT0gMCkge1xuICAgICAgICBjbS5jdXJPcC5mb2N1cyA9IGFjdGl2ZUVsdCgpO1xuICAgICAgICBleHRlbmRUbyhjdXIpO1xuICAgICAgICB2YXIgdmlzaWJsZSA9IHZpc2libGVMaW5lcyhkaXNwbGF5LCBkb2MpO1xuICAgICAgICBpZiAoY3VyLmxpbmUgPj0gdmlzaWJsZS50byB8fCBjdXIubGluZSA8IHZpc2libGUuZnJvbSlcbiAgICAgICAgICB7IHNldFRpbWVvdXQob3BlcmF0aW9uKGNtLCBmdW5jdGlvbiAoKSB7aWYgKGNvdW50ZXIgPT0gY3VyQ291bnQpIHsgZXh0ZW5kKGUpOyB9fSksIDE1MCk7IH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBvdXRzaWRlID0gZS5jbGllbnRZIDwgZWRpdG9yU2l6ZS50b3AgPyAtMjAgOiBlLmNsaWVudFkgPiBlZGl0b3JTaXplLmJvdHRvbSA/IDIwIDogMDtcbiAgICAgICAgaWYgKG91dHNpZGUpIHsgc2V0VGltZW91dChvcGVyYXRpb24oY20sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoY291bnRlciAhPSBjdXJDb3VudCkgeyByZXR1cm4gfVxuICAgICAgICAgIGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wICs9IG91dHNpZGU7XG4gICAgICAgICAgZXh0ZW5kKGUpO1xuICAgICAgICB9KSwgNTApOyB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZG9uZShlKSB7XG4gICAgICBjbS5zdGF0ZS5zZWxlY3RpbmdUZXh0ID0gZmFsc2U7XG4gICAgICBjb3VudGVyID0gSW5maW5pdHk7XG4gICAgICAvLyBJZiBlIGlzIG51bGwgb3IgdW5kZWZpbmVkIHdlIGludGVycHJldCB0aGlzIGFzIHNvbWVvbmUgdHJ5aW5nXG4gICAgICAvLyB0byBleHBsaWNpdGx5IGNhbmNlbCB0aGUgc2VsZWN0aW9uIHJhdGhlciB0aGFuIHRoZSB1c2VyXG4gICAgICAvLyBsZXR0aW5nIGdvIG9mIHRoZSBtb3VzZSBidXR0b24uXG4gICAgICBpZiAoZSkge1xuICAgICAgICBlX3ByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgICBkaXNwbGF5LmlucHV0LmZvY3VzKCk7XG4gICAgICB9XG4gICAgICBvZmYoZGlzcGxheS53cmFwcGVyLm93bmVyRG9jdW1lbnQsIFwibW91c2Vtb3ZlXCIsIG1vdmUpO1xuICAgICAgb2ZmKGRpc3BsYXkud3JhcHBlci5vd25lckRvY3VtZW50LCBcIm1vdXNldXBcIiwgdXApO1xuICAgICAgZG9jLmhpc3RvcnkubGFzdFNlbE9yaWdpbiA9IG51bGw7XG4gICAgfVxuXG4gICAgdmFyIG1vdmUgPSBvcGVyYXRpb24oY20sIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoZS5idXR0b25zID09PSAwIHx8ICFlX2J1dHRvbihlKSkgeyBkb25lKGUpOyB9XG4gICAgICBlbHNlIHsgZXh0ZW5kKGUpOyB9XG4gICAgfSk7XG4gICAgdmFyIHVwID0gb3BlcmF0aW9uKGNtLCBkb25lKTtcbiAgICBjbS5zdGF0ZS5zZWxlY3RpbmdUZXh0ID0gdXA7XG4gICAgb24oZGlzcGxheS53cmFwcGVyLm93bmVyRG9jdW1lbnQsIFwibW91c2Vtb3ZlXCIsIG1vdmUpO1xuICAgIG9uKGRpc3BsYXkud3JhcHBlci5vd25lckRvY3VtZW50LCBcIm1vdXNldXBcIiwgdXApO1xuICB9XG5cbiAgLy8gVXNlZCB3aGVuIG1vdXNlLXNlbGVjdGluZyB0byBhZGp1c3QgdGhlIGFuY2hvciB0byB0aGUgcHJvcGVyIHNpZGVcbiAgLy8gb2YgYSBiaWRpIGp1bXAgZGVwZW5kaW5nIG9uIHRoZSB2aXN1YWwgcG9zaXRpb24gb2YgdGhlIGhlYWQuXG4gIGZ1bmN0aW9uIGJpZGlTaW1wbGlmeShjbSwgcmFuZ2UpIHtcbiAgICB2YXIgYW5jaG9yID0gcmFuZ2UuYW5jaG9yO1xuICAgIHZhciBoZWFkID0gcmFuZ2UuaGVhZDtcbiAgICB2YXIgYW5jaG9yTGluZSA9IGdldExpbmUoY20uZG9jLCBhbmNob3IubGluZSk7XG4gICAgaWYgKGNtcChhbmNob3IsIGhlYWQpID09IDAgJiYgYW5jaG9yLnN0aWNreSA9PSBoZWFkLnN0aWNreSkgeyByZXR1cm4gcmFuZ2UgfVxuICAgIHZhciBvcmRlciA9IGdldE9yZGVyKGFuY2hvckxpbmUpO1xuICAgIGlmICghb3JkZXIpIHsgcmV0dXJuIHJhbmdlIH1cbiAgICB2YXIgaW5kZXggPSBnZXRCaWRpUGFydEF0KG9yZGVyLCBhbmNob3IuY2gsIGFuY2hvci5zdGlja3kpLCBwYXJ0ID0gb3JkZXJbaW5kZXhdO1xuICAgIGlmIChwYXJ0LmZyb20gIT0gYW5jaG9yLmNoICYmIHBhcnQudG8gIT0gYW5jaG9yLmNoKSB7IHJldHVybiByYW5nZSB9XG4gICAgdmFyIGJvdW5kYXJ5ID0gaW5kZXggKyAoKHBhcnQuZnJvbSA9PSBhbmNob3IuY2gpID09IChwYXJ0LmxldmVsICE9IDEpID8gMCA6IDEpO1xuICAgIGlmIChib3VuZGFyeSA9PSAwIHx8IGJvdW5kYXJ5ID09IG9yZGVyLmxlbmd0aCkgeyByZXR1cm4gcmFuZ2UgfVxuXG4gICAgLy8gQ29tcHV0ZSB0aGUgcmVsYXRpdmUgdmlzdWFsIHBvc2l0aW9uIG9mIHRoZSBoZWFkIGNvbXBhcmVkIHRvIHRoZVxuICAgIC8vIGFuY2hvciAoPDAgaXMgdG8gdGhlIGxlZnQsID4wIHRvIHRoZSByaWdodClcbiAgICB2YXIgbGVmdFNpZGU7XG4gICAgaWYgKGhlYWQubGluZSAhPSBhbmNob3IubGluZSkge1xuICAgICAgbGVmdFNpZGUgPSAoaGVhZC5saW5lIC0gYW5jaG9yLmxpbmUpICogKGNtLmRvYy5kaXJlY3Rpb24gPT0gXCJsdHJcIiA/IDEgOiAtMSkgPiAwO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgaGVhZEluZGV4ID0gZ2V0QmlkaVBhcnRBdChvcmRlciwgaGVhZC5jaCwgaGVhZC5zdGlja3kpO1xuICAgICAgdmFyIGRpciA9IGhlYWRJbmRleCAtIGluZGV4IHx8IChoZWFkLmNoIC0gYW5jaG9yLmNoKSAqIChwYXJ0LmxldmVsID09IDEgPyAtMSA6IDEpO1xuICAgICAgaWYgKGhlYWRJbmRleCA9PSBib3VuZGFyeSAtIDEgfHwgaGVhZEluZGV4ID09IGJvdW5kYXJ5KVxuICAgICAgICB7IGxlZnRTaWRlID0gZGlyIDwgMDsgfVxuICAgICAgZWxzZVxuICAgICAgICB7IGxlZnRTaWRlID0gZGlyID4gMDsgfVxuICAgIH1cblxuICAgIHZhciB1c2VQYXJ0ID0gb3JkZXJbYm91bmRhcnkgKyAobGVmdFNpZGUgPyAtMSA6IDApXTtcbiAgICB2YXIgZnJvbSA9IGxlZnRTaWRlID09ICh1c2VQYXJ0LmxldmVsID09IDEpO1xuICAgIHZhciBjaCA9IGZyb20gPyB1c2VQYXJ0LmZyb20gOiB1c2VQYXJ0LnRvLCBzdGlja3kgPSBmcm9tID8gXCJhZnRlclwiIDogXCJiZWZvcmVcIjtcbiAgICByZXR1cm4gYW5jaG9yLmNoID09IGNoICYmIGFuY2hvci5zdGlja3kgPT0gc3RpY2t5ID8gcmFuZ2UgOiBuZXcgUmFuZ2UobmV3IFBvcyhhbmNob3IubGluZSwgY2gsIHN0aWNreSksIGhlYWQpXG4gIH1cblxuXG4gIC8vIERldGVybWluZXMgd2hldGhlciBhbiBldmVudCBoYXBwZW5lZCBpbiB0aGUgZ3V0dGVyLCBhbmQgZmlyZXMgdGhlXG4gIC8vIGhhbmRsZXJzIGZvciB0aGUgY29ycmVzcG9uZGluZyBldmVudC5cbiAgZnVuY3Rpb24gZ3V0dGVyRXZlbnQoY20sIGUsIHR5cGUsIHByZXZlbnQpIHtcbiAgICB2YXIgbVgsIG1ZO1xuICAgIGlmIChlLnRvdWNoZXMpIHtcbiAgICAgIG1YID0gZS50b3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICBtWSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cnkgeyBtWCA9IGUuY2xpZW50WDsgbVkgPSBlLmNsaWVudFk7IH1cbiAgICAgIGNhdGNoKGUkMSkgeyByZXR1cm4gZmFsc2UgfVxuICAgIH1cbiAgICBpZiAobVggPj0gTWF0aC5mbG9vcihjbS5kaXNwbGF5Lmd1dHRlcnMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQpKSB7IHJldHVybiBmYWxzZSB9XG4gICAgaWYgKHByZXZlbnQpIHsgZV9wcmV2ZW50RGVmYXVsdChlKTsgfVxuXG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIHZhciBsaW5lQm94ID0gZGlzcGxheS5saW5lRGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgaWYgKG1ZID4gbGluZUJveC5ib3R0b20gfHwgIWhhc0hhbmRsZXIoY20sIHR5cGUpKSB7IHJldHVybiBlX2RlZmF1bHRQcmV2ZW50ZWQoZSkgfVxuICAgIG1ZIC09IGxpbmVCb3gudG9wIC0gZGlzcGxheS52aWV3T2Zmc2V0O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbS5kaXNwbGF5Lmd1dHRlclNwZWNzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgZyA9IGRpc3BsYXkuZ3V0dGVycy5jaGlsZE5vZGVzW2ldO1xuICAgICAgaWYgKGcgJiYgZy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCA+PSBtWCkge1xuICAgICAgICB2YXIgbGluZSA9IGxpbmVBdEhlaWdodChjbS5kb2MsIG1ZKTtcbiAgICAgICAgdmFyIGd1dHRlciA9IGNtLmRpc3BsYXkuZ3V0dGVyU3BlY3NbaV07XG4gICAgICAgIHNpZ25hbChjbSwgdHlwZSwgY20sIGxpbmUsIGd1dHRlci5jbGFzc05hbWUsIGUpO1xuICAgICAgICByZXR1cm4gZV9kZWZhdWx0UHJldmVudGVkKGUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2xpY2tJbkd1dHRlcihjbSwgZSkge1xuICAgIHJldHVybiBndXR0ZXJFdmVudChjbSwgZSwgXCJndXR0ZXJDbGlja1wiLCB0cnVlKVxuICB9XG5cbiAgLy8gQ09OVEVYVCBNRU5VIEhBTkRMSU5HXG5cbiAgLy8gVG8gbWFrZSB0aGUgY29udGV4dCBtZW51IHdvcmssIHdlIG5lZWQgdG8gYnJpZWZseSB1bmhpZGUgdGhlXG4gIC8vIHRleHRhcmVhIChtYWtpbmcgaXQgYXMgdW5vYnRydXNpdmUgYXMgcG9zc2libGUpIHRvIGxldCB0aGVcbiAgLy8gcmlnaHQtY2xpY2sgdGFrZSBlZmZlY3Qgb24gaXQuXG4gIGZ1bmN0aW9uIG9uQ29udGV4dE1lbnUoY20sIGUpIHtcbiAgICBpZiAoZXZlbnRJbldpZGdldChjbS5kaXNwbGF5LCBlKSB8fCBjb250ZXh0TWVudUluR3V0dGVyKGNtLCBlKSkgeyByZXR1cm4gfVxuICAgIGlmIChzaWduYWxET01FdmVudChjbSwgZSwgXCJjb250ZXh0bWVudVwiKSkgeyByZXR1cm4gfVxuICAgIGlmICghY2FwdHVyZVJpZ2h0Q2xpY2spIHsgY20uZGlzcGxheS5pbnB1dC5vbkNvbnRleHRNZW51KGUpOyB9XG4gIH1cblxuICBmdW5jdGlvbiBjb250ZXh0TWVudUluR3V0dGVyKGNtLCBlKSB7XG4gICAgaWYgKCFoYXNIYW5kbGVyKGNtLCBcImd1dHRlckNvbnRleHRNZW51XCIpKSB7IHJldHVybiBmYWxzZSB9XG4gICAgcmV0dXJuIGd1dHRlckV2ZW50KGNtLCBlLCBcImd1dHRlckNvbnRleHRNZW51XCIsIGZhbHNlKVxuICB9XG5cbiAgZnVuY3Rpb24gdGhlbWVDaGFuZ2VkKGNtKSB7XG4gICAgY20uZGlzcGxheS53cmFwcGVyLmNsYXNzTmFtZSA9IGNtLmRpc3BsYXkud3JhcHBlci5jbGFzc05hbWUucmVwbGFjZSgvXFxzKmNtLXMtXFxTKy9nLCBcIlwiKSArXG4gICAgICBjbS5vcHRpb25zLnRoZW1lLnJlcGxhY2UoLyhefFxccylcXHMqL2csIFwiIGNtLXMtXCIpO1xuICAgIGNsZWFyQ2FjaGVzKGNtKTtcbiAgfVxuXG4gIHZhciBJbml0ID0ge3RvU3RyaW5nOiBmdW5jdGlvbigpe3JldHVybiBcIkNvZGVNaXJyb3IuSW5pdFwifX07XG5cbiAgdmFyIGRlZmF1bHRzID0ge307XG4gIHZhciBvcHRpb25IYW5kbGVycyA9IHt9O1xuXG4gIGZ1bmN0aW9uIGRlZmluZU9wdGlvbnMoQ29kZU1pcnJvcikge1xuICAgIHZhciBvcHRpb25IYW5kbGVycyA9IENvZGVNaXJyb3Iub3B0aW9uSGFuZGxlcnM7XG5cbiAgICBmdW5jdGlvbiBvcHRpb24obmFtZSwgZGVmbHQsIGhhbmRsZSwgbm90T25Jbml0KSB7XG4gICAgICBDb2RlTWlycm9yLmRlZmF1bHRzW25hbWVdID0gZGVmbHQ7XG4gICAgICBpZiAoaGFuZGxlKSB7IG9wdGlvbkhhbmRsZXJzW25hbWVdID1cbiAgICAgICAgbm90T25Jbml0ID8gZnVuY3Rpb24gKGNtLCB2YWwsIG9sZCkge2lmIChvbGQgIT0gSW5pdCkgeyBoYW5kbGUoY20sIHZhbCwgb2xkKTsgfX0gOiBoYW5kbGU7IH1cbiAgICB9XG5cbiAgICBDb2RlTWlycm9yLmRlZmluZU9wdGlvbiA9IG9wdGlvbjtcblxuICAgIC8vIFBhc3NlZCB0byBvcHRpb24gaGFuZGxlcnMgd2hlbiB0aGVyZSBpcyBubyBvbGQgdmFsdWUuXG4gICAgQ29kZU1pcnJvci5Jbml0ID0gSW5pdDtcblxuICAgIC8vIFRoZXNlIHR3byBhcmUsIG9uIGluaXQsIGNhbGxlZCBmcm9tIHRoZSBjb25zdHJ1Y3RvciBiZWNhdXNlIHRoZXlcbiAgICAvLyBoYXZlIHRvIGJlIGluaXRpYWxpemVkIGJlZm9yZSB0aGUgZWRpdG9yIGNhbiBzdGFydCBhdCBhbGwuXG4gICAgb3B0aW9uKFwidmFsdWVcIiwgXCJcIiwgZnVuY3Rpb24gKGNtLCB2YWwpIHsgcmV0dXJuIGNtLnNldFZhbHVlKHZhbCk7IH0sIHRydWUpO1xuICAgIG9wdGlvbihcIm1vZGVcIiwgbnVsbCwgZnVuY3Rpb24gKGNtLCB2YWwpIHtcbiAgICAgIGNtLmRvYy5tb2RlT3B0aW9uID0gdmFsO1xuICAgICAgbG9hZE1vZGUoY20pO1xuICAgIH0sIHRydWUpO1xuXG4gICAgb3B0aW9uKFwiaW5kZW50VW5pdFwiLCAyLCBsb2FkTW9kZSwgdHJ1ZSk7XG4gICAgb3B0aW9uKFwiaW5kZW50V2l0aFRhYnNcIiwgZmFsc2UpO1xuICAgIG9wdGlvbihcInNtYXJ0SW5kZW50XCIsIHRydWUpO1xuICAgIG9wdGlvbihcInRhYlNpemVcIiwgNCwgZnVuY3Rpb24gKGNtKSB7XG4gICAgICByZXNldE1vZGVTdGF0ZShjbSk7XG4gICAgICBjbGVhckNhY2hlcyhjbSk7XG4gICAgICByZWdDaGFuZ2UoY20pO1xuICAgIH0sIHRydWUpO1xuXG4gICAgb3B0aW9uKFwibGluZVNlcGFyYXRvclwiLCBudWxsLCBmdW5jdGlvbiAoY20sIHZhbCkge1xuICAgICAgY20uZG9jLmxpbmVTZXAgPSB2YWw7XG4gICAgICBpZiAoIXZhbCkgeyByZXR1cm4gfVxuICAgICAgdmFyIG5ld0JyZWFrcyA9IFtdLCBsaW5lTm8gPSBjbS5kb2MuZmlyc3Q7XG4gICAgICBjbS5kb2MuaXRlcihmdW5jdGlvbiAobGluZSkge1xuICAgICAgICBmb3IgKHZhciBwb3MgPSAwOzspIHtcbiAgICAgICAgICB2YXIgZm91bmQgPSBsaW5lLnRleHQuaW5kZXhPZih2YWwsIHBvcyk7XG4gICAgICAgICAgaWYgKGZvdW5kID09IC0xKSB7IGJyZWFrIH1cbiAgICAgICAgICBwb3MgPSBmb3VuZCArIHZhbC5sZW5ndGg7XG4gICAgICAgICAgbmV3QnJlYWtzLnB1c2goUG9zKGxpbmVObywgZm91bmQpKTtcbiAgICAgICAgfVxuICAgICAgICBsaW5lTm8rKztcbiAgICAgIH0pO1xuICAgICAgZm9yICh2YXIgaSA9IG5ld0JyZWFrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcbiAgICAgICAgeyByZXBsYWNlUmFuZ2UoY20uZG9jLCB2YWwsIG5ld0JyZWFrc1tpXSwgUG9zKG5ld0JyZWFrc1tpXS5saW5lLCBuZXdCcmVha3NbaV0uY2ggKyB2YWwubGVuZ3RoKSk7IH1cbiAgICB9KTtcbiAgICBvcHRpb24oXCJzcGVjaWFsQ2hhcnNcIiwgL1tcXHUwMDAwLVxcdTAwMWZcXHUwMDdmLVxcdTAwOWZcXHUwMGFkXFx1MDYxY1xcdTIwMGItXFx1MjAwY1xcdTIwMGVcXHUyMDBmXFx1MjAyOFxcdTIwMjlcXHVmZWZmXFx1ZmZmOS1cXHVmZmZjXS9nLCBmdW5jdGlvbiAoY20sIHZhbCwgb2xkKSB7XG4gICAgICBjbS5zdGF0ZS5zcGVjaWFsQ2hhcnMgPSBuZXcgUmVnRXhwKHZhbC5zb3VyY2UgKyAodmFsLnRlc3QoXCJcXHRcIikgPyBcIlwiIDogXCJ8XFx0XCIpLCBcImdcIik7XG4gICAgICBpZiAob2xkICE9IEluaXQpIHsgY20ucmVmcmVzaCgpOyB9XG4gICAgfSk7XG4gICAgb3B0aW9uKFwic3BlY2lhbENoYXJQbGFjZWhvbGRlclwiLCBkZWZhdWx0U3BlY2lhbENoYXJQbGFjZWhvbGRlciwgZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5yZWZyZXNoKCk7IH0sIHRydWUpO1xuICAgIG9wdGlvbihcImVsZWN0cmljQ2hhcnNcIiwgdHJ1ZSk7XG4gICAgb3B0aW9uKFwiaW5wdXRTdHlsZVwiLCBtb2JpbGUgPyBcImNvbnRlbnRlZGl0YWJsZVwiIDogXCJ0ZXh0YXJlYVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnB1dFN0eWxlIGNhbiBub3QgKHlldCkgYmUgY2hhbmdlZCBpbiBhIHJ1bm5pbmcgZWRpdG9yXCIpIC8vIEZJWE1FXG4gICAgfSwgdHJ1ZSk7XG4gICAgb3B0aW9uKFwic3BlbGxjaGVja1wiLCBmYWxzZSwgZnVuY3Rpb24gKGNtLCB2YWwpIHsgcmV0dXJuIGNtLmdldElucHV0RmllbGQoKS5zcGVsbGNoZWNrID0gdmFsOyB9LCB0cnVlKTtcbiAgICBvcHRpb24oXCJhdXRvY29ycmVjdFwiLCBmYWxzZSwgZnVuY3Rpb24gKGNtLCB2YWwpIHsgcmV0dXJuIGNtLmdldElucHV0RmllbGQoKS5hdXRvY29ycmVjdCA9IHZhbDsgfSwgdHJ1ZSk7XG4gICAgb3B0aW9uKFwiYXV0b2NhcGl0YWxpemVcIiwgZmFsc2UsIGZ1bmN0aW9uIChjbSwgdmFsKSB7IHJldHVybiBjbS5nZXRJbnB1dEZpZWxkKCkuYXV0b2NhcGl0YWxpemUgPSB2YWw7IH0sIHRydWUpO1xuICAgIG9wdGlvbihcInJ0bE1vdmVWaXN1YWxseVwiLCAhd2luZG93cyk7XG4gICAgb3B0aW9uKFwid2hvbGVMaW5lVXBkYXRlQmVmb3JlXCIsIHRydWUpO1xuXG4gICAgb3B0aW9uKFwidGhlbWVcIiwgXCJkZWZhdWx0XCIsIGZ1bmN0aW9uIChjbSkge1xuICAgICAgdGhlbWVDaGFuZ2VkKGNtKTtcbiAgICAgIHVwZGF0ZUd1dHRlcnMoY20pO1xuICAgIH0sIHRydWUpO1xuICAgIG9wdGlvbihcImtleU1hcFwiLCBcImRlZmF1bHRcIiwgZnVuY3Rpb24gKGNtLCB2YWwsIG9sZCkge1xuICAgICAgdmFyIG5leHQgPSBnZXRLZXlNYXAodmFsKTtcbiAgICAgIHZhciBwcmV2ID0gb2xkICE9IEluaXQgJiYgZ2V0S2V5TWFwKG9sZCk7XG4gICAgICBpZiAocHJldiAmJiBwcmV2LmRldGFjaCkgeyBwcmV2LmRldGFjaChjbSwgbmV4dCk7IH1cbiAgICAgIGlmIChuZXh0LmF0dGFjaCkgeyBuZXh0LmF0dGFjaChjbSwgcHJldiB8fCBudWxsKTsgfVxuICAgIH0pO1xuICAgIG9wdGlvbihcImV4dHJhS2V5c1wiLCBudWxsKTtcbiAgICBvcHRpb24oXCJjb25maWd1cmVNb3VzZVwiLCBudWxsKTtcblxuICAgIG9wdGlvbihcImxpbmVXcmFwcGluZ1wiLCBmYWxzZSwgd3JhcHBpbmdDaGFuZ2VkLCB0cnVlKTtcbiAgICBvcHRpb24oXCJndXR0ZXJzXCIsIFtdLCBmdW5jdGlvbiAoY20sIHZhbCkge1xuICAgICAgY20uZGlzcGxheS5ndXR0ZXJTcGVjcyA9IGdldEd1dHRlcnModmFsLCBjbS5vcHRpb25zLmxpbmVOdW1iZXJzKTtcbiAgICAgIHVwZGF0ZUd1dHRlcnMoY20pO1xuICAgIH0sIHRydWUpO1xuICAgIG9wdGlvbihcImZpeGVkR3V0dGVyXCIsIHRydWUsIGZ1bmN0aW9uIChjbSwgdmFsKSB7XG4gICAgICBjbS5kaXNwbGF5Lmd1dHRlcnMuc3R5bGUubGVmdCA9IHZhbCA/IGNvbXBlbnNhdGVGb3JIU2Nyb2xsKGNtLmRpc3BsYXkpICsgXCJweFwiIDogXCIwXCI7XG4gICAgICBjbS5yZWZyZXNoKCk7XG4gICAgfSwgdHJ1ZSk7XG4gICAgb3B0aW9uKFwiY292ZXJHdXR0ZXJOZXh0VG9TY3JvbGxiYXJcIiwgZmFsc2UsIGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gdXBkYXRlU2Nyb2xsYmFycyhjbSk7IH0sIHRydWUpO1xuICAgIG9wdGlvbihcInNjcm9sbGJhclN0eWxlXCIsIFwibmF0aXZlXCIsIGZ1bmN0aW9uIChjbSkge1xuICAgICAgaW5pdFNjcm9sbGJhcnMoY20pO1xuICAgICAgdXBkYXRlU2Nyb2xsYmFycyhjbSk7XG4gICAgICBjbS5kaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsVG9wKGNtLmRvYy5zY3JvbGxUb3ApO1xuICAgICAgY20uZGlzcGxheS5zY3JvbGxiYXJzLnNldFNjcm9sbExlZnQoY20uZG9jLnNjcm9sbExlZnQpO1xuICAgIH0sIHRydWUpO1xuICAgIG9wdGlvbihcImxpbmVOdW1iZXJzXCIsIGZhbHNlLCBmdW5jdGlvbiAoY20sIHZhbCkge1xuICAgICAgY20uZGlzcGxheS5ndXR0ZXJTcGVjcyA9IGdldEd1dHRlcnMoY20ub3B0aW9ucy5ndXR0ZXJzLCB2YWwpO1xuICAgICAgdXBkYXRlR3V0dGVycyhjbSk7XG4gICAgfSwgdHJ1ZSk7XG4gICAgb3B0aW9uKFwiZmlyc3RMaW5lTnVtYmVyXCIsIDEsIHVwZGF0ZUd1dHRlcnMsIHRydWUpO1xuICAgIG9wdGlvbihcImxpbmVOdW1iZXJGb3JtYXR0ZXJcIiwgZnVuY3Rpb24gKGludGVnZXIpIHsgcmV0dXJuIGludGVnZXI7IH0sIHVwZGF0ZUd1dHRlcnMsIHRydWUpO1xuICAgIG9wdGlvbihcInNob3dDdXJzb3JXaGVuU2VsZWN0aW5nXCIsIGZhbHNlLCB1cGRhdGVTZWxlY3Rpb24sIHRydWUpO1xuXG4gICAgb3B0aW9uKFwicmVzZXRTZWxlY3Rpb25PbkNvbnRleHRNZW51XCIsIHRydWUpO1xuICAgIG9wdGlvbihcImxpbmVXaXNlQ29weUN1dFwiLCB0cnVlKTtcbiAgICBvcHRpb24oXCJwYXN0ZUxpbmVzUGVyU2VsZWN0aW9uXCIsIHRydWUpO1xuICAgIG9wdGlvbihcInNlbGVjdGlvbnNNYXlUb3VjaFwiLCBmYWxzZSk7XG5cbiAgICBvcHRpb24oXCJyZWFkT25seVwiLCBmYWxzZSwgZnVuY3Rpb24gKGNtLCB2YWwpIHtcbiAgICAgIGlmICh2YWwgPT0gXCJub2N1cnNvclwiKSB7XG4gICAgICAgIG9uQmx1cihjbSk7XG4gICAgICAgIGNtLmRpc3BsYXkuaW5wdXQuYmx1cigpO1xuICAgICAgfVxuICAgICAgY20uZGlzcGxheS5pbnB1dC5yZWFkT25seUNoYW5nZWQodmFsKTtcbiAgICB9KTtcblxuICAgIG9wdGlvbihcInNjcmVlblJlYWRlckxhYmVsXCIsIG51bGwsIGZ1bmN0aW9uIChjbSwgdmFsKSB7XG4gICAgICB2YWwgPSAodmFsID09PSAnJykgPyBudWxsIDogdmFsO1xuICAgICAgY20uZGlzcGxheS5pbnB1dC5zY3JlZW5SZWFkZXJMYWJlbENoYW5nZWQodmFsKTtcbiAgICB9KTtcblxuICAgIG9wdGlvbihcImRpc2FibGVJbnB1dFwiLCBmYWxzZSwgZnVuY3Rpb24gKGNtLCB2YWwpIHtpZiAoIXZhbCkgeyBjbS5kaXNwbGF5LmlucHV0LnJlc2V0KCk7IH19LCB0cnVlKTtcbiAgICBvcHRpb24oXCJkcmFnRHJvcFwiLCB0cnVlLCBkcmFnRHJvcENoYW5nZWQpO1xuICAgIG9wdGlvbihcImFsbG93RHJvcEZpbGVUeXBlc1wiLCBudWxsKTtcblxuICAgIG9wdGlvbihcImN1cnNvckJsaW5rUmF0ZVwiLCA1MzApO1xuICAgIG9wdGlvbihcImN1cnNvclNjcm9sbE1hcmdpblwiLCAwKTtcbiAgICBvcHRpb24oXCJjdXJzb3JIZWlnaHRcIiwgMSwgdXBkYXRlU2VsZWN0aW9uLCB0cnVlKTtcbiAgICBvcHRpb24oXCJzaW5nbGVDdXJzb3JIZWlnaHRQZXJMaW5lXCIsIHRydWUsIHVwZGF0ZVNlbGVjdGlvbiwgdHJ1ZSk7XG4gICAgb3B0aW9uKFwid29ya1RpbWVcIiwgMTAwKTtcbiAgICBvcHRpb24oXCJ3b3JrRGVsYXlcIiwgMTAwKTtcbiAgICBvcHRpb24oXCJmbGF0dGVuU3BhbnNcIiwgdHJ1ZSwgcmVzZXRNb2RlU3RhdGUsIHRydWUpO1xuICAgIG9wdGlvbihcImFkZE1vZGVDbGFzc1wiLCBmYWxzZSwgcmVzZXRNb2RlU3RhdGUsIHRydWUpO1xuICAgIG9wdGlvbihcInBvbGxJbnRlcnZhbFwiLCAxMDApO1xuICAgIG9wdGlvbihcInVuZG9EZXB0aFwiLCAyMDAsIGZ1bmN0aW9uIChjbSwgdmFsKSB7IHJldHVybiBjbS5kb2MuaGlzdG9yeS51bmRvRGVwdGggPSB2YWw7IH0pO1xuICAgIG9wdGlvbihcImhpc3RvcnlFdmVudERlbGF5XCIsIDEyNTApO1xuICAgIG9wdGlvbihcInZpZXdwb3J0TWFyZ2luXCIsIDEwLCBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLnJlZnJlc2goKTsgfSwgdHJ1ZSk7XG4gICAgb3B0aW9uKFwibWF4SGlnaGxpZ2h0TGVuZ3RoXCIsIDEwMDAwLCByZXNldE1vZGVTdGF0ZSwgdHJ1ZSk7XG4gICAgb3B0aW9uKFwibW92ZUlucHV0V2l0aEN1cnNvclwiLCB0cnVlLCBmdW5jdGlvbiAoY20sIHZhbCkge1xuICAgICAgaWYgKCF2YWwpIHsgY20uZGlzcGxheS5pbnB1dC5yZXNldFBvc2l0aW9uKCk7IH1cbiAgICB9KTtcblxuICAgIG9wdGlvbihcInRhYmluZGV4XCIsIG51bGwsIGZ1bmN0aW9uIChjbSwgdmFsKSB7IHJldHVybiBjbS5kaXNwbGF5LmlucHV0LmdldEZpZWxkKCkudGFiSW5kZXggPSB2YWwgfHwgXCJcIjsgfSk7XG4gICAgb3B0aW9uKFwiYXV0b2ZvY3VzXCIsIG51bGwpO1xuICAgIG9wdGlvbihcImRpcmVjdGlvblwiLCBcImx0clwiLCBmdW5jdGlvbiAoY20sIHZhbCkgeyByZXR1cm4gY20uZG9jLnNldERpcmVjdGlvbih2YWwpOyB9LCB0cnVlKTtcbiAgICBvcHRpb24oXCJwaHJhc2VzXCIsIG51bGwpO1xuICB9XG5cbiAgZnVuY3Rpb24gZHJhZ0Ryb3BDaGFuZ2VkKGNtLCB2YWx1ZSwgb2xkKSB7XG4gICAgdmFyIHdhc09uID0gb2xkICYmIG9sZCAhPSBJbml0O1xuICAgIGlmICghdmFsdWUgIT0gIXdhc09uKSB7XG4gICAgICB2YXIgZnVuY3MgPSBjbS5kaXNwbGF5LmRyYWdGdW5jdGlvbnM7XG4gICAgICB2YXIgdG9nZ2xlID0gdmFsdWUgPyBvbiA6IG9mZjtcbiAgICAgIHRvZ2dsZShjbS5kaXNwbGF5LnNjcm9sbGVyLCBcImRyYWdzdGFydFwiLCBmdW5jcy5zdGFydCk7XG4gICAgICB0b2dnbGUoY20uZGlzcGxheS5zY3JvbGxlciwgXCJkcmFnZW50ZXJcIiwgZnVuY3MuZW50ZXIpO1xuICAgICAgdG9nZ2xlKGNtLmRpc3BsYXkuc2Nyb2xsZXIsIFwiZHJhZ292ZXJcIiwgZnVuY3Mub3Zlcik7XG4gICAgICB0b2dnbGUoY20uZGlzcGxheS5zY3JvbGxlciwgXCJkcmFnbGVhdmVcIiwgZnVuY3MubGVhdmUpO1xuICAgICAgdG9nZ2xlKGNtLmRpc3BsYXkuc2Nyb2xsZXIsIFwiZHJvcFwiLCBmdW5jcy5kcm9wKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB3cmFwcGluZ0NoYW5nZWQoY20pIHtcbiAgICBpZiAoY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIHtcbiAgICAgIGFkZENsYXNzKGNtLmRpc3BsYXkud3JhcHBlciwgXCJDb2RlTWlycm9yLXdyYXBcIik7XG4gICAgICBjbS5kaXNwbGF5LnNpemVyLnN0eWxlLm1pbldpZHRoID0gXCJcIjtcbiAgICAgIGNtLmRpc3BsYXkuc2l6ZXJXaWR0aCA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJtQ2xhc3MoY20uZGlzcGxheS53cmFwcGVyLCBcIkNvZGVNaXJyb3Itd3JhcFwiKTtcbiAgICAgIGZpbmRNYXhMaW5lKGNtKTtcbiAgICB9XG4gICAgZXN0aW1hdGVMaW5lSGVpZ2h0cyhjbSk7XG4gICAgcmVnQ2hhbmdlKGNtKTtcbiAgICBjbGVhckNhY2hlcyhjbSk7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiB1cGRhdGVTY3JvbGxiYXJzKGNtKTsgfSwgMTAwKTtcbiAgfVxuXG4gIC8vIEEgQ29kZU1pcnJvciBpbnN0YW5jZSByZXByZXNlbnRzIGFuIGVkaXRvci4gVGhpcyBpcyB0aGUgb2JqZWN0XG4gIC8vIHRoYXQgdXNlciBjb2RlIGlzIHVzdWFsbHkgZGVhbGluZyB3aXRoLlxuXG4gIGZ1bmN0aW9uIENvZGVNaXJyb3IocGxhY2UsIG9wdGlvbnMpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBDb2RlTWlycm9yKSkgeyByZXR1cm4gbmV3IENvZGVNaXJyb3IocGxhY2UsIG9wdGlvbnMpIH1cblxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgPSBvcHRpb25zID8gY29weU9iaihvcHRpb25zKSA6IHt9O1xuICAgIC8vIERldGVybWluZSBlZmZlY3RpdmUgb3B0aW9ucyBiYXNlZCBvbiBnaXZlbiB2YWx1ZXMgYW5kIGRlZmF1bHRzLlxuICAgIGNvcHlPYmooZGVmYXVsdHMsIG9wdGlvbnMsIGZhbHNlKTtcblxuICAgIHZhciBkb2MgPSBvcHRpb25zLnZhbHVlO1xuICAgIGlmICh0eXBlb2YgZG9jID09IFwic3RyaW5nXCIpIHsgZG9jID0gbmV3IERvYyhkb2MsIG9wdGlvbnMubW9kZSwgbnVsbCwgb3B0aW9ucy5saW5lU2VwYXJhdG9yLCBvcHRpb25zLmRpcmVjdGlvbik7IH1cbiAgICBlbHNlIGlmIChvcHRpb25zLm1vZGUpIHsgZG9jLm1vZGVPcHRpb24gPSBvcHRpb25zLm1vZGU7IH1cbiAgICB0aGlzLmRvYyA9IGRvYztcblxuICAgIHZhciBpbnB1dCA9IG5ldyBDb2RlTWlycm9yLmlucHV0U3R5bGVzW29wdGlvbnMuaW5wdXRTdHlsZV0odGhpcyk7XG4gICAgdmFyIGRpc3BsYXkgPSB0aGlzLmRpc3BsYXkgPSBuZXcgRGlzcGxheShwbGFjZSwgZG9jLCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgZGlzcGxheS53cmFwcGVyLkNvZGVNaXJyb3IgPSB0aGlzO1xuICAgIHRoZW1lQ2hhbmdlZCh0aGlzKTtcbiAgICBpZiAob3B0aW9ucy5saW5lV3JhcHBpbmcpXG4gICAgICB7IHRoaXMuZGlzcGxheS53cmFwcGVyLmNsYXNzTmFtZSArPSBcIiBDb2RlTWlycm9yLXdyYXBcIjsgfVxuICAgIGluaXRTY3JvbGxiYXJzKHRoaXMpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGtleU1hcHM6IFtdLCAgLy8gc3RvcmVzIG1hcHMgYWRkZWQgYnkgYWRkS2V5TWFwXG4gICAgICBvdmVybGF5czogW10sIC8vIGhpZ2hsaWdodGluZyBvdmVybGF5cywgYXMgYWRkZWQgYnkgYWRkT3ZlcmxheVxuICAgICAgbW9kZUdlbjogMCwgICAvLyBidW1wZWQgd2hlbiBtb2RlL292ZXJsYXkgY2hhbmdlcywgdXNlZCB0byBpbnZhbGlkYXRlIGhpZ2hsaWdodGluZyBpbmZvXG4gICAgICBvdmVyd3JpdGU6IGZhbHNlLFxuICAgICAgZGVsYXlpbmdCbHVyRXZlbnQ6IGZhbHNlLFxuICAgICAgZm9jdXNlZDogZmFsc2UsXG4gICAgICBzdXBwcmVzc0VkaXRzOiBmYWxzZSwgLy8gdXNlZCB0byBkaXNhYmxlIGVkaXRpbmcgZHVyaW5nIGtleSBoYW5kbGVycyB3aGVuIGluIHJlYWRPbmx5IG1vZGVcbiAgICAgIHBhc3RlSW5jb21pbmc6IC0xLCBjdXRJbmNvbWluZzogLTEsIC8vIGhlbHAgcmVjb2duaXplIHBhc3RlL2N1dCBlZGl0cyBpbiBpbnB1dC5wb2xsXG4gICAgICBzZWxlY3RpbmdUZXh0OiBmYWxzZSxcbiAgICAgIGRyYWdnaW5nVGV4dDogZmFsc2UsXG4gICAgICBoaWdobGlnaHQ6IG5ldyBEZWxheWVkKCksIC8vIHN0b3JlcyBoaWdobGlnaHQgd29ya2VyIHRpbWVvdXRcbiAgICAgIGtleVNlcTogbnVsbCwgIC8vIFVuZmluaXNoZWQga2V5IHNlcXVlbmNlXG4gICAgICBzcGVjaWFsQ2hhcnM6IG51bGxcbiAgICB9O1xuXG4gICAgaWYgKG9wdGlvbnMuYXV0b2ZvY3VzICYmICFtb2JpbGUpIHsgZGlzcGxheS5pbnB1dC5mb2N1cygpOyB9XG5cbiAgICAvLyBPdmVycmlkZSBtYWdpYyB0ZXh0YXJlYSBjb250ZW50IHJlc3RvcmUgdGhhdCBJRSBzb21ldGltZXMgZG9lc1xuICAgIC8vIG9uIG91ciBoaWRkZW4gdGV4dGFyZWEgb24gcmVsb2FkXG4gICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCAxMSkgeyBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMkMS5kaXNwbGF5LmlucHV0LnJlc2V0KHRydWUpOyB9LCAyMCk7IH1cblxuICAgIHJlZ2lzdGVyRXZlbnRIYW5kbGVycyh0aGlzKTtcbiAgICBlbnN1cmVHbG9iYWxIYW5kbGVycygpO1xuXG4gICAgc3RhcnRPcGVyYXRpb24odGhpcyk7XG4gICAgdGhpcy5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7XG4gICAgYXR0YWNoRG9jKHRoaXMsIGRvYyk7XG5cbiAgICBpZiAoKG9wdGlvbnMuYXV0b2ZvY3VzICYmICFtb2JpbGUpIHx8IHRoaXMuaGFzRm9jdXMoKSlcbiAgICAgIHsgc2V0VGltZW91dChiaW5kKG9uRm9jdXMsIHRoaXMpLCAyMCk7IH1cbiAgICBlbHNlXG4gICAgICB7IG9uQmx1cih0aGlzKTsgfVxuXG4gICAgZm9yICh2YXIgb3B0IGluIG9wdGlvbkhhbmRsZXJzKSB7IGlmIChvcHRpb25IYW5kbGVycy5oYXNPd25Qcm9wZXJ0eShvcHQpKVxuICAgICAgeyBvcHRpb25IYW5kbGVyc1tvcHRdKHRoaXMsIG9wdGlvbnNbb3B0XSwgSW5pdCk7IH0gfVxuICAgIG1heWJlVXBkYXRlTGluZU51bWJlcldpZHRoKHRoaXMpO1xuICAgIGlmIChvcHRpb25zLmZpbmlzaEluaXQpIHsgb3B0aW9ucy5maW5pc2hJbml0KHRoaXMpOyB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbml0SG9va3MubGVuZ3RoOyArK2kpIHsgaW5pdEhvb2tzW2ldKHRoaXMpOyB9XG4gICAgZW5kT3BlcmF0aW9uKHRoaXMpO1xuICAgIC8vIFN1cHByZXNzIG9wdGltaXplbGVnaWJpbGl0eSBpbiBXZWJraXQsIHNpbmNlIGl0IGJyZWFrcyB0ZXh0XG4gICAgLy8gbWVhc3VyaW5nIG9uIGxpbmUgd3JhcHBpbmcgYm91bmRhcmllcy5cbiAgICBpZiAod2Via2l0ICYmIG9wdGlvbnMubGluZVdyYXBwaW5nICYmXG4gICAgICAgIGdldENvbXB1dGVkU3R5bGUoZGlzcGxheS5saW5lRGl2KS50ZXh0UmVuZGVyaW5nID09IFwib3B0aW1pemVsZWdpYmlsaXR5XCIpXG4gICAgICB7IGRpc3BsYXkubGluZURpdi5zdHlsZS50ZXh0UmVuZGVyaW5nID0gXCJhdXRvXCI7IH1cbiAgfVxuXG4gIC8vIFRoZSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiAgQ29kZU1pcnJvci5kZWZhdWx0cyA9IGRlZmF1bHRzO1xuICAvLyBGdW5jdGlvbnMgdG8gcnVuIHdoZW4gb3B0aW9ucyBhcmUgY2hhbmdlZC5cbiAgQ29kZU1pcnJvci5vcHRpb25IYW5kbGVycyA9IG9wdGlvbkhhbmRsZXJzO1xuXG4gIC8vIEF0dGFjaCB0aGUgbmVjZXNzYXJ5IGV2ZW50IGhhbmRsZXJzIHdoZW4gaW5pdGlhbGl6aW5nIHRoZSBlZGl0b3JcbiAgZnVuY3Rpb24gcmVnaXN0ZXJFdmVudEhhbmRsZXJzKGNtKSB7XG4gICAgdmFyIGQgPSBjbS5kaXNwbGF5O1xuICAgIG9uKGQuc2Nyb2xsZXIsIFwibW91c2Vkb3duXCIsIG9wZXJhdGlvbihjbSwgb25Nb3VzZURvd24pKTtcbiAgICAvLyBPbGRlciBJRSdzIHdpbGwgbm90IGZpcmUgYSBzZWNvbmQgbW91c2Vkb3duIGZvciBhIGRvdWJsZSBjbGlja1xuICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgMTEpXG4gICAgICB7IG9uKGQuc2Nyb2xsZXIsIFwiZGJsY2xpY2tcIiwgb3BlcmF0aW9uKGNtLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpKSB7IHJldHVybiB9XG4gICAgICAgIHZhciBwb3MgPSBwb3NGcm9tTW91c2UoY20sIGUpO1xuICAgICAgICBpZiAoIXBvcyB8fCBjbGlja0luR3V0dGVyKGNtLCBlKSB8fCBldmVudEluV2lkZ2V0KGNtLmRpc3BsYXksIGUpKSB7IHJldHVybiB9XG4gICAgICAgIGVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgICAgIHZhciB3b3JkID0gY20uZmluZFdvcmRBdChwb3MpO1xuICAgICAgICBleHRlbmRTZWxlY3Rpb24oY20uZG9jLCB3b3JkLmFuY2hvciwgd29yZC5oZWFkKTtcbiAgICAgIH0pKTsgfVxuICAgIGVsc2VcbiAgICAgIHsgb24oZC5zY3JvbGxlciwgXCJkYmxjbGlja1wiLCBmdW5jdGlvbiAoZSkgeyByZXR1cm4gc2lnbmFsRE9NRXZlbnQoY20sIGUpIHx8IGVfcHJldmVudERlZmF1bHQoZSk7IH0pOyB9XG4gICAgLy8gU29tZSBicm93c2VycyBmaXJlIGNvbnRleHRtZW51ICphZnRlciogb3BlbmluZyB0aGUgbWVudSwgYXRcbiAgICAvLyB3aGljaCBwb2ludCB3ZSBjYW4ndCBtZXNzIHdpdGggaXQgYW55bW9yZS4gQ29udGV4dCBtZW51IGlzXG4gICAgLy8gaGFuZGxlZCBpbiBvbk1vdXNlRG93biBmb3IgdGhlc2UgYnJvd3NlcnMuXG4gICAgb24oZC5zY3JvbGxlciwgXCJjb250ZXh0bWVudVwiLCBmdW5jdGlvbiAoZSkgeyByZXR1cm4gb25Db250ZXh0TWVudShjbSwgZSk7IH0pO1xuICAgIG9uKGQuaW5wdXQuZ2V0RmllbGQoKSwgXCJjb250ZXh0bWVudVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKCFkLnNjcm9sbGVyLmNvbnRhaW5zKGUudGFyZ2V0KSkgeyBvbkNvbnRleHRNZW51KGNtLCBlKTsgfVxuICAgIH0pO1xuXG4gICAgLy8gVXNlZCB0byBzdXBwcmVzcyBtb3VzZSBldmVudCBoYW5kbGluZyB3aGVuIGEgdG91Y2ggaGFwcGVuc1xuICAgIHZhciB0b3VjaEZpbmlzaGVkLCBwcmV2VG91Y2ggPSB7ZW5kOiAwfTtcbiAgICBmdW5jdGlvbiBmaW5pc2hUb3VjaCgpIHtcbiAgICAgIGlmIChkLmFjdGl2ZVRvdWNoKSB7XG4gICAgICAgIHRvdWNoRmluaXNoZWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGQuYWN0aXZlVG91Y2ggPSBudWxsOyB9LCAxMDAwKTtcbiAgICAgICAgcHJldlRvdWNoID0gZC5hY3RpdmVUb3VjaDtcbiAgICAgICAgcHJldlRvdWNoLmVuZCA9ICtuZXcgRGF0ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gaXNNb3VzZUxpa2VUb3VjaEV2ZW50KGUpIHtcbiAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoICE9IDEpIHsgcmV0dXJuIGZhbHNlIH1cbiAgICAgIHZhciB0b3VjaCA9IGUudG91Y2hlc1swXTtcbiAgICAgIHJldHVybiB0b3VjaC5yYWRpdXNYIDw9IDEgJiYgdG91Y2gucmFkaXVzWSA8PSAxXG4gICAgfVxuICAgIGZ1bmN0aW9uIGZhckF3YXkodG91Y2gsIG90aGVyKSB7XG4gICAgICBpZiAob3RoZXIubGVmdCA9PSBudWxsKSB7IHJldHVybiB0cnVlIH1cbiAgICAgIHZhciBkeCA9IG90aGVyLmxlZnQgLSB0b3VjaC5sZWZ0LCBkeSA9IG90aGVyLnRvcCAtIHRvdWNoLnRvcDtcbiAgICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeSA+IDIwICogMjBcbiAgICB9XG4gICAgb24oZC5zY3JvbGxlciwgXCJ0b3VjaHN0YXJ0XCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoIXNpZ25hbERPTUV2ZW50KGNtLCBlKSAmJiAhaXNNb3VzZUxpa2VUb3VjaEV2ZW50KGUpICYmICFjbGlja0luR3V0dGVyKGNtLCBlKSkge1xuICAgICAgICBkLmlucHV0LmVuc3VyZVBvbGxlZCgpO1xuICAgICAgICBjbGVhclRpbWVvdXQodG91Y2hGaW5pc2hlZCk7XG4gICAgICAgIHZhciBub3cgPSArbmV3IERhdGU7XG4gICAgICAgIGQuYWN0aXZlVG91Y2ggPSB7c3RhcnQ6IG5vdywgbW92ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgIHByZXY6IG5vdyAtIHByZXZUb3VjaC5lbmQgPD0gMzAwID8gcHJldlRvdWNoIDogbnVsbH07XG4gICAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICBkLmFjdGl2ZVRvdWNoLmxlZnQgPSBlLnRvdWNoZXNbMF0ucGFnZVg7XG4gICAgICAgICAgZC5hY3RpdmVUb3VjaC50b3AgPSBlLnRvdWNoZXNbMF0ucGFnZVk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBvbihkLnNjcm9sbGVyLCBcInRvdWNobW92ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoZC5hY3RpdmVUb3VjaCkgeyBkLmFjdGl2ZVRvdWNoLm1vdmVkID0gdHJ1ZTsgfVxuICAgIH0pO1xuICAgIG9uKGQuc2Nyb2xsZXIsIFwidG91Y2hlbmRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciB0b3VjaCA9IGQuYWN0aXZlVG91Y2g7XG4gICAgICBpZiAodG91Y2ggJiYgIWV2ZW50SW5XaWRnZXQoZCwgZSkgJiYgdG91Y2gubGVmdCAhPSBudWxsICYmXG4gICAgICAgICAgIXRvdWNoLm1vdmVkICYmIG5ldyBEYXRlIC0gdG91Y2guc3RhcnQgPCAzMDApIHtcbiAgICAgICAgdmFyIHBvcyA9IGNtLmNvb3Jkc0NoYXIoZC5hY3RpdmVUb3VjaCwgXCJwYWdlXCIpLCByYW5nZTtcbiAgICAgICAgaWYgKCF0b3VjaC5wcmV2IHx8IGZhckF3YXkodG91Y2gsIHRvdWNoLnByZXYpKSAvLyBTaW5nbGUgdGFwXG4gICAgICAgICAgeyByYW5nZSA9IG5ldyBSYW5nZShwb3MsIHBvcyk7IH1cbiAgICAgICAgZWxzZSBpZiAoIXRvdWNoLnByZXYucHJldiB8fCBmYXJBd2F5KHRvdWNoLCB0b3VjaC5wcmV2LnByZXYpKSAvLyBEb3VibGUgdGFwXG4gICAgICAgICAgeyByYW5nZSA9IGNtLmZpbmRXb3JkQXQocG9zKTsgfVxuICAgICAgICBlbHNlIC8vIFRyaXBsZSB0YXBcbiAgICAgICAgICB7IHJhbmdlID0gbmV3IFJhbmdlKFBvcyhwb3MubGluZSwgMCksIGNsaXBQb3MoY20uZG9jLCBQb3MocG9zLmxpbmUgKyAxLCAwKSkpOyB9XG4gICAgICAgIGNtLnNldFNlbGVjdGlvbihyYW5nZS5hbmNob3IsIHJhbmdlLmhlYWQpO1xuICAgICAgICBjbS5mb2N1cygpO1xuICAgICAgICBlX3ByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgfVxuICAgICAgZmluaXNoVG91Y2goKTtcbiAgICB9KTtcbiAgICBvbihkLnNjcm9sbGVyLCBcInRvdWNoY2FuY2VsXCIsIGZpbmlzaFRvdWNoKTtcblxuICAgIC8vIFN5bmMgc2Nyb2xsaW5nIGJldHdlZW4gZmFrZSBzY3JvbGxiYXJzIGFuZCByZWFsIHNjcm9sbGFibGVcbiAgICAvLyBhcmVhLCBlbnN1cmUgdmlld3BvcnQgaXMgdXBkYXRlZCB3aGVuIHNjcm9sbGluZy5cbiAgICBvbihkLnNjcm9sbGVyLCBcInNjcm9sbFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoZC5zY3JvbGxlci5jbGllbnRIZWlnaHQpIHtcbiAgICAgICAgdXBkYXRlU2Nyb2xsVG9wKGNtLCBkLnNjcm9sbGVyLnNjcm9sbFRvcCk7XG4gICAgICAgIHNldFNjcm9sbExlZnQoY20sIGQuc2Nyb2xsZXIuc2Nyb2xsTGVmdCwgdHJ1ZSk7XG4gICAgICAgIHNpZ25hbChjbSwgXCJzY3JvbGxcIiwgY20pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gTGlzdGVuIHRvIHdoZWVsIGV2ZW50cyBpbiBvcmRlciB0byB0cnkgYW5kIHVwZGF0ZSB0aGUgdmlld3BvcnQgb24gdGltZS5cbiAgICBvbihkLnNjcm9sbGVyLCBcIm1vdXNld2hlZWxcIiwgZnVuY3Rpb24gKGUpIHsgcmV0dXJuIG9uU2Nyb2xsV2hlZWwoY20sIGUpOyB9KTtcbiAgICBvbihkLnNjcm9sbGVyLCBcIkRPTU1vdXNlU2Nyb2xsXCIsIGZ1bmN0aW9uIChlKSB7IHJldHVybiBvblNjcm9sbFdoZWVsKGNtLCBlKTsgfSk7XG5cbiAgICAvLyBQcmV2ZW50IHdyYXBwZXIgZnJvbSBldmVyIHNjcm9sbGluZ1xuICAgIG9uKGQud3JhcHBlciwgXCJzY3JvbGxcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gZC53cmFwcGVyLnNjcm9sbFRvcCA9IGQud3JhcHBlci5zY3JvbGxMZWZ0ID0gMDsgfSk7XG5cbiAgICBkLmRyYWdGdW5jdGlvbnMgPSB7XG4gICAgICBlbnRlcjogZnVuY3Rpb24gKGUpIHtpZiAoIXNpZ25hbERPTUV2ZW50KGNtLCBlKSkgeyBlX3N0b3AoZSk7IH19LFxuICAgICAgb3ZlcjogZnVuY3Rpb24gKGUpIHtpZiAoIXNpZ25hbERPTUV2ZW50KGNtLCBlKSkgeyBvbkRyYWdPdmVyKGNtLCBlKTsgZV9zdG9wKGUpOyB9fSxcbiAgICAgIHN0YXJ0OiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gb25EcmFnU3RhcnQoY20sIGUpOyB9LFxuICAgICAgZHJvcDogb3BlcmF0aW9uKGNtLCBvbkRyb3ApLFxuICAgICAgbGVhdmU6IGZ1bmN0aW9uIChlKSB7aWYgKCFzaWduYWxET01FdmVudChjbSwgZSkpIHsgY2xlYXJEcmFnQ3Vyc29yKGNtKTsgfX1cbiAgICB9O1xuXG4gICAgdmFyIGlucCA9IGQuaW5wdXQuZ2V0RmllbGQoKTtcbiAgICBvbihpbnAsIFwia2V5dXBcIiwgZnVuY3Rpb24gKGUpIHsgcmV0dXJuIG9uS2V5VXAuY2FsbChjbSwgZSk7IH0pO1xuICAgIG9uKGlucCwgXCJrZXlkb3duXCIsIG9wZXJhdGlvbihjbSwgb25LZXlEb3duKSk7XG4gICAgb24oaW5wLCBcImtleXByZXNzXCIsIG9wZXJhdGlvbihjbSwgb25LZXlQcmVzcykpO1xuICAgIG9uKGlucCwgXCJmb2N1c1wiLCBmdW5jdGlvbiAoZSkgeyByZXR1cm4gb25Gb2N1cyhjbSwgZSk7IH0pO1xuICAgIG9uKGlucCwgXCJibHVyXCIsIGZ1bmN0aW9uIChlKSB7IHJldHVybiBvbkJsdXIoY20sIGUpOyB9KTtcbiAgfVxuXG4gIHZhciBpbml0SG9va3MgPSBbXTtcbiAgQ29kZU1pcnJvci5kZWZpbmVJbml0SG9vayA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBpbml0SG9va3MucHVzaChmKTsgfTtcblxuICAvLyBJbmRlbnQgdGhlIGdpdmVuIGxpbmUuIFRoZSBob3cgcGFyYW1ldGVyIGNhbiBiZSBcInNtYXJ0XCIsXG4gIC8vIFwiYWRkXCIvbnVsbCwgXCJzdWJ0cmFjdFwiLCBvciBcInByZXZcIi4gV2hlbiBhZ2dyZXNzaXZlIGlzIGZhbHNlXG4gIC8vICh0eXBpY2FsbHkgc2V0IHRvIHRydWUgZm9yIGZvcmNlZCBzaW5nbGUtbGluZSBpbmRlbnRzKSwgZW1wdHlcbiAgLy8gbGluZXMgYXJlIG5vdCBpbmRlbnRlZCwgYW5kIHBsYWNlcyB3aGVyZSB0aGUgbW9kZSByZXR1cm5zIFBhc3NcbiAgLy8gYXJlIGxlZnQgYWxvbmUuXG4gIGZ1bmN0aW9uIGluZGVudExpbmUoY20sIG4sIGhvdywgYWdncmVzc2l2ZSkge1xuICAgIHZhciBkb2MgPSBjbS5kb2MsIHN0YXRlO1xuICAgIGlmIChob3cgPT0gbnVsbCkgeyBob3cgPSBcImFkZFwiOyB9XG4gICAgaWYgKGhvdyA9PSBcInNtYXJ0XCIpIHtcbiAgICAgIC8vIEZhbGwgYmFjayB0byBcInByZXZcIiB3aGVuIHRoZSBtb2RlIGRvZXNuJ3QgaGF2ZSBhbiBpbmRlbnRhdGlvblxuICAgICAgLy8gbWV0aG9kLlxuICAgICAgaWYgKCFkb2MubW9kZS5pbmRlbnQpIHsgaG93ID0gXCJwcmV2XCI7IH1cbiAgICAgIGVsc2UgeyBzdGF0ZSA9IGdldENvbnRleHRCZWZvcmUoY20sIG4pLnN0YXRlOyB9XG4gICAgfVxuXG4gICAgdmFyIHRhYlNpemUgPSBjbS5vcHRpb25zLnRhYlNpemU7XG4gICAgdmFyIGxpbmUgPSBnZXRMaW5lKGRvYywgbiksIGN1clNwYWNlID0gY291bnRDb2x1bW4obGluZS50ZXh0LCBudWxsLCB0YWJTaXplKTtcbiAgICBpZiAobGluZS5zdGF0ZUFmdGVyKSB7IGxpbmUuc3RhdGVBZnRlciA9IG51bGw7IH1cbiAgICB2YXIgY3VyU3BhY2VTdHJpbmcgPSBsaW5lLnRleHQubWF0Y2goL15cXHMqLylbMF0sIGluZGVudGF0aW9uO1xuICAgIGlmICghYWdncmVzc2l2ZSAmJiAhL1xcUy8udGVzdChsaW5lLnRleHQpKSB7XG4gICAgICBpbmRlbnRhdGlvbiA9IDA7XG4gICAgICBob3cgPSBcIm5vdFwiO1xuICAgIH0gZWxzZSBpZiAoaG93ID09IFwic21hcnRcIikge1xuICAgICAgaW5kZW50YXRpb24gPSBkb2MubW9kZS5pbmRlbnQoc3RhdGUsIGxpbmUudGV4dC5zbGljZShjdXJTcGFjZVN0cmluZy5sZW5ndGgpLCBsaW5lLnRleHQpO1xuICAgICAgaWYgKGluZGVudGF0aW9uID09IFBhc3MgfHwgaW5kZW50YXRpb24gPiAxNTApIHtcbiAgICAgICAgaWYgKCFhZ2dyZXNzaXZlKSB7IHJldHVybiB9XG4gICAgICAgIGhvdyA9IFwicHJldlwiO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaG93ID09IFwicHJldlwiKSB7XG4gICAgICBpZiAobiA+IGRvYy5maXJzdCkgeyBpbmRlbnRhdGlvbiA9IGNvdW50Q29sdW1uKGdldExpbmUoZG9jLCBuLTEpLnRleHQsIG51bGwsIHRhYlNpemUpOyB9XG4gICAgICBlbHNlIHsgaW5kZW50YXRpb24gPSAwOyB9XG4gICAgfSBlbHNlIGlmIChob3cgPT0gXCJhZGRcIikge1xuICAgICAgaW5kZW50YXRpb24gPSBjdXJTcGFjZSArIGNtLm9wdGlvbnMuaW5kZW50VW5pdDtcbiAgICB9IGVsc2UgaWYgKGhvdyA9PSBcInN1YnRyYWN0XCIpIHtcbiAgICAgIGluZGVudGF0aW9uID0gY3VyU3BhY2UgLSBjbS5vcHRpb25zLmluZGVudFVuaXQ7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgaG93ID09IFwibnVtYmVyXCIpIHtcbiAgICAgIGluZGVudGF0aW9uID0gY3VyU3BhY2UgKyBob3c7XG4gICAgfVxuICAgIGluZGVudGF0aW9uID0gTWF0aC5tYXgoMCwgaW5kZW50YXRpb24pO1xuXG4gICAgdmFyIGluZGVudFN0cmluZyA9IFwiXCIsIHBvcyA9IDA7XG4gICAgaWYgKGNtLm9wdGlvbnMuaW5kZW50V2l0aFRhYnMpXG4gICAgICB7IGZvciAodmFyIGkgPSBNYXRoLmZsb29yKGluZGVudGF0aW9uIC8gdGFiU2l6ZSk7IGk7IC0taSkge3BvcyArPSB0YWJTaXplOyBpbmRlbnRTdHJpbmcgKz0gXCJcXHRcIjt9IH1cbiAgICBpZiAocG9zIDwgaW5kZW50YXRpb24pIHsgaW5kZW50U3RyaW5nICs9IHNwYWNlU3RyKGluZGVudGF0aW9uIC0gcG9zKTsgfVxuXG4gICAgaWYgKGluZGVudFN0cmluZyAhPSBjdXJTcGFjZVN0cmluZykge1xuICAgICAgcmVwbGFjZVJhbmdlKGRvYywgaW5kZW50U3RyaW5nLCBQb3MobiwgMCksIFBvcyhuLCBjdXJTcGFjZVN0cmluZy5sZW5ndGgpLCBcIitpbnB1dFwiKTtcbiAgICAgIGxpbmUuc3RhdGVBZnRlciA9IG51bGw7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBFbnN1cmUgdGhhdCwgaWYgdGhlIGN1cnNvciB3YXMgaW4gdGhlIHdoaXRlc3BhY2UgYXQgdGhlIHN0YXJ0XG4gICAgICAvLyBvZiB0aGUgbGluZSwgaXQgaXMgbW92ZWQgdG8gdGhlIGVuZCBvZiB0aGF0IHNwYWNlLlxuICAgICAgZm9yICh2YXIgaSQxID0gMDsgaSQxIDwgZG9jLnNlbC5yYW5nZXMubGVuZ3RoOyBpJDErKykge1xuICAgICAgICB2YXIgcmFuZ2UgPSBkb2Muc2VsLnJhbmdlc1tpJDFdO1xuICAgICAgICBpZiAocmFuZ2UuaGVhZC5saW5lID09IG4gJiYgcmFuZ2UuaGVhZC5jaCA8IGN1clNwYWNlU3RyaW5nLmxlbmd0aCkge1xuICAgICAgICAgIHZhciBwb3MkMSA9IFBvcyhuLCBjdXJTcGFjZVN0cmluZy5sZW5ndGgpO1xuICAgICAgICAgIHJlcGxhY2VPbmVTZWxlY3Rpb24oZG9jLCBpJDEsIG5ldyBSYW5nZShwb3MkMSwgcG9zJDEpKTtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gVGhpcyB3aWxsIGJlIHNldCB0byBhIHtsaW5lV2lzZTogYm9vbCwgdGV4dDogW3N0cmluZ119IG9iamVjdCwgc29cbiAgLy8gdGhhdCwgd2hlbiBwYXN0aW5nLCB3ZSBrbm93IHdoYXQga2luZCBvZiBzZWxlY3Rpb25zIHRoZSBjb3BpZWRcbiAgLy8gdGV4dCB3YXMgbWFkZSBvdXQgb2YuXG4gIHZhciBsYXN0Q29waWVkID0gbnVsbDtcblxuICBmdW5jdGlvbiBzZXRMYXN0Q29waWVkKG5ld0xhc3RDb3BpZWQpIHtcbiAgICBsYXN0Q29waWVkID0gbmV3TGFzdENvcGllZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFwcGx5VGV4dElucHV0KGNtLCBpbnNlcnRlZCwgZGVsZXRlZCwgc2VsLCBvcmlnaW4pIHtcbiAgICB2YXIgZG9jID0gY20uZG9jO1xuICAgIGNtLmRpc3BsYXkuc2hpZnQgPSBmYWxzZTtcbiAgICBpZiAoIXNlbCkgeyBzZWwgPSBkb2Muc2VsOyB9XG5cbiAgICB2YXIgcmVjZW50ID0gK25ldyBEYXRlIC0gMjAwO1xuICAgIHZhciBwYXN0ZSA9IG9yaWdpbiA9PSBcInBhc3RlXCIgfHwgY20uc3RhdGUucGFzdGVJbmNvbWluZyA+IHJlY2VudDtcbiAgICB2YXIgdGV4dExpbmVzID0gc3BsaXRMaW5lc0F1dG8oaW5zZXJ0ZWQpLCBtdWx0aVBhc3RlID0gbnVsbDtcbiAgICAvLyBXaGVuIHBhc3RpbmcgTiBsaW5lcyBpbnRvIE4gc2VsZWN0aW9ucywgaW5zZXJ0IG9uZSBsaW5lIHBlciBzZWxlY3Rpb25cbiAgICBpZiAocGFzdGUgJiYgc2VsLnJhbmdlcy5sZW5ndGggPiAxKSB7XG4gICAgICBpZiAobGFzdENvcGllZCAmJiBsYXN0Q29waWVkLnRleHQuam9pbihcIlxcblwiKSA9PSBpbnNlcnRlZCkge1xuICAgICAgICBpZiAoc2VsLnJhbmdlcy5sZW5ndGggJSBsYXN0Q29waWVkLnRleHQubGVuZ3RoID09IDApIHtcbiAgICAgICAgICBtdWx0aVBhc3RlID0gW107XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0Q29waWVkLnRleHQubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB7IG11bHRpUGFzdGUucHVzaChkb2Muc3BsaXRMaW5lcyhsYXN0Q29waWVkLnRleHRbaV0pKTsgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRleHRMaW5lcy5sZW5ndGggPT0gc2VsLnJhbmdlcy5sZW5ndGggJiYgY20ub3B0aW9ucy5wYXN0ZUxpbmVzUGVyU2VsZWN0aW9uKSB7XG4gICAgICAgIG11bHRpUGFzdGUgPSBtYXAodGV4dExpbmVzLCBmdW5jdGlvbiAobCkgeyByZXR1cm4gW2xdOyB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgdXBkYXRlSW5wdXQgPSBjbS5jdXJPcC51cGRhdGVJbnB1dDtcbiAgICAvLyBOb3JtYWwgYmVoYXZpb3IgaXMgdG8gaW5zZXJ0IHRoZSBuZXcgdGV4dCBpbnRvIGV2ZXJ5IHNlbGVjdGlvblxuICAgIGZvciAodmFyIGkkMSA9IHNlbC5yYW5nZXMubGVuZ3RoIC0gMTsgaSQxID49IDA7IGkkMS0tKSB7XG4gICAgICB2YXIgcmFuZ2UgPSBzZWwucmFuZ2VzW2kkMV07XG4gICAgICB2YXIgZnJvbSA9IHJhbmdlLmZyb20oKSwgdG8gPSByYW5nZS50bygpO1xuICAgICAgaWYgKHJhbmdlLmVtcHR5KCkpIHtcbiAgICAgICAgaWYgKGRlbGV0ZWQgJiYgZGVsZXRlZCA+IDApIC8vIEhhbmRsZSBkZWxldGlvblxuICAgICAgICAgIHsgZnJvbSA9IFBvcyhmcm9tLmxpbmUsIGZyb20uY2ggLSBkZWxldGVkKTsgfVxuICAgICAgICBlbHNlIGlmIChjbS5zdGF0ZS5vdmVyd3JpdGUgJiYgIXBhc3RlKSAvLyBIYW5kbGUgb3ZlcndyaXRlXG4gICAgICAgICAgeyB0byA9IFBvcyh0by5saW5lLCBNYXRoLm1pbihnZXRMaW5lKGRvYywgdG8ubGluZSkudGV4dC5sZW5ndGgsIHRvLmNoICsgbHN0KHRleHRMaW5lcykubGVuZ3RoKSk7IH1cbiAgICAgICAgZWxzZSBpZiAocGFzdGUgJiYgbGFzdENvcGllZCAmJiBsYXN0Q29waWVkLmxpbmVXaXNlICYmIGxhc3RDb3BpZWQudGV4dC5qb2luKFwiXFxuXCIpID09IGluc2VydGVkKVxuICAgICAgICAgIHsgZnJvbSA9IHRvID0gUG9zKGZyb20ubGluZSwgMCk7IH1cbiAgICAgIH1cbiAgICAgIHZhciBjaGFuZ2VFdmVudCA9IHtmcm9tOiBmcm9tLCB0bzogdG8sIHRleHQ6IG11bHRpUGFzdGUgPyBtdWx0aVBhc3RlW2kkMSAlIG11bHRpUGFzdGUubGVuZ3RoXSA6IHRleHRMaW5lcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46IG9yaWdpbiB8fCAocGFzdGUgPyBcInBhc3RlXCIgOiBjbS5zdGF0ZS5jdXRJbmNvbWluZyA+IHJlY2VudCA/IFwiY3V0XCIgOiBcIitpbnB1dFwiKX07XG4gICAgICBtYWtlQ2hhbmdlKGNtLmRvYywgY2hhbmdlRXZlbnQpO1xuICAgICAgc2lnbmFsTGF0ZXIoY20sIFwiaW5wdXRSZWFkXCIsIGNtLCBjaGFuZ2VFdmVudCk7XG4gICAgfVxuICAgIGlmIChpbnNlcnRlZCAmJiAhcGFzdGUpXG4gICAgICB7IHRyaWdnZXJFbGVjdHJpYyhjbSwgaW5zZXJ0ZWQpOyB9XG5cbiAgICBlbnN1cmVDdXJzb3JWaXNpYmxlKGNtKTtcbiAgICBpZiAoY20uY3VyT3AudXBkYXRlSW5wdXQgPCAyKSB7IGNtLmN1ck9wLnVwZGF0ZUlucHV0ID0gdXBkYXRlSW5wdXQ7IH1cbiAgICBjbS5jdXJPcC50eXBpbmcgPSB0cnVlO1xuICAgIGNtLnN0YXRlLnBhc3RlSW5jb21pbmcgPSBjbS5zdGF0ZS5jdXRJbmNvbWluZyA9IC0xO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlUGFzdGUoZSwgY20pIHtcbiAgICB2YXIgcGFzdGVkID0gZS5jbGlwYm9hcmREYXRhICYmIGUuY2xpcGJvYXJkRGF0YS5nZXREYXRhKFwiVGV4dFwiKTtcbiAgICBpZiAocGFzdGVkKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoIWNtLmlzUmVhZE9ubHkoKSAmJiAhY20ub3B0aW9ucy5kaXNhYmxlSW5wdXQpXG4gICAgICAgIHsgcnVuSW5PcChjbSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gYXBwbHlUZXh0SW5wdXQoY20sIHBhc3RlZCwgMCwgbnVsbCwgXCJwYXN0ZVwiKTsgfSk7IH1cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdHJpZ2dlckVsZWN0cmljKGNtLCBpbnNlcnRlZCkge1xuICAgIC8vIFdoZW4gYW4gJ2VsZWN0cmljJyBjaGFyYWN0ZXIgaXMgaW5zZXJ0ZWQsIGltbWVkaWF0ZWx5IHRyaWdnZXIgYSByZWluZGVudFxuICAgIGlmICghY20ub3B0aW9ucy5lbGVjdHJpY0NoYXJzIHx8ICFjbS5vcHRpb25zLnNtYXJ0SW5kZW50KSB7IHJldHVybiB9XG4gICAgdmFyIHNlbCA9IGNtLmRvYy5zZWw7XG5cbiAgICBmb3IgKHZhciBpID0gc2VsLnJhbmdlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgdmFyIHJhbmdlID0gc2VsLnJhbmdlc1tpXTtcbiAgICAgIGlmIChyYW5nZS5oZWFkLmNoID4gMTAwIHx8IChpICYmIHNlbC5yYW5nZXNbaSAtIDFdLmhlYWQubGluZSA9PSByYW5nZS5oZWFkLmxpbmUpKSB7IGNvbnRpbnVlIH1cbiAgICAgIHZhciBtb2RlID0gY20uZ2V0TW9kZUF0KHJhbmdlLmhlYWQpO1xuICAgICAgdmFyIGluZGVudGVkID0gZmFsc2U7XG4gICAgICBpZiAobW9kZS5lbGVjdHJpY0NoYXJzKSB7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbW9kZS5lbGVjdHJpY0NoYXJzLmxlbmd0aDsgaisrKVxuICAgICAgICAgIHsgaWYgKGluc2VydGVkLmluZGV4T2YobW9kZS5lbGVjdHJpY0NoYXJzLmNoYXJBdChqKSkgPiAtMSkge1xuICAgICAgICAgICAgaW5kZW50ZWQgPSBpbmRlbnRMaW5lKGNtLCByYW5nZS5oZWFkLmxpbmUsIFwic21hcnRcIik7XG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH0gfVxuICAgICAgfSBlbHNlIGlmIChtb2RlLmVsZWN0cmljSW5wdXQpIHtcbiAgICAgICAgaWYgKG1vZGUuZWxlY3RyaWNJbnB1dC50ZXN0KGdldExpbmUoY20uZG9jLCByYW5nZS5oZWFkLmxpbmUpLnRleHQuc2xpY2UoMCwgcmFuZ2UuaGVhZC5jaCkpKVxuICAgICAgICAgIHsgaW5kZW50ZWQgPSBpbmRlbnRMaW5lKGNtLCByYW5nZS5oZWFkLmxpbmUsIFwic21hcnRcIik7IH1cbiAgICAgIH1cbiAgICAgIGlmIChpbmRlbnRlZCkgeyBzaWduYWxMYXRlcihjbSwgXCJlbGVjdHJpY0lucHV0XCIsIGNtLCByYW5nZS5oZWFkLmxpbmUpOyB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY29weWFibGVSYW5nZXMoY20pIHtcbiAgICB2YXIgdGV4dCA9IFtdLCByYW5nZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNtLmRvYy5zZWwucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbGluZSA9IGNtLmRvYy5zZWwucmFuZ2VzW2ldLmhlYWQubGluZTtcbiAgICAgIHZhciBsaW5lUmFuZ2UgPSB7YW5jaG9yOiBQb3MobGluZSwgMCksIGhlYWQ6IFBvcyhsaW5lICsgMSwgMCl9O1xuICAgICAgcmFuZ2VzLnB1c2gobGluZVJhbmdlKTtcbiAgICAgIHRleHQucHVzaChjbS5nZXRSYW5nZShsaW5lUmFuZ2UuYW5jaG9yLCBsaW5lUmFuZ2UuaGVhZCkpO1xuICAgIH1cbiAgICByZXR1cm4ge3RleHQ6IHRleHQsIHJhbmdlczogcmFuZ2VzfVxuICB9XG5cbiAgZnVuY3Rpb24gZGlzYWJsZUJyb3dzZXJNYWdpYyhmaWVsZCwgc3BlbGxjaGVjaywgYXV0b2NvcnJlY3QsIGF1dG9jYXBpdGFsaXplKSB7XG4gICAgZmllbGQuc2V0QXR0cmlidXRlKFwiYXV0b2NvcnJlY3RcIiwgYXV0b2NvcnJlY3QgPyBcIlwiIDogXCJvZmZcIik7XG4gICAgZmllbGQuc2V0QXR0cmlidXRlKFwiYXV0b2NhcGl0YWxpemVcIiwgYXV0b2NhcGl0YWxpemUgPyBcIlwiIDogXCJvZmZcIik7XG4gICAgZmllbGQuc2V0QXR0cmlidXRlKFwic3BlbGxjaGVja1wiLCAhIXNwZWxsY2hlY2spO1xuICB9XG5cbiAgZnVuY3Rpb24gaGlkZGVuVGV4dGFyZWEoKSB7XG4gICAgdmFyIHRlID0gZWx0KFwidGV4dGFyZWFcIiwgbnVsbCwgbnVsbCwgXCJwb3NpdGlvbjogYWJzb2x1dGU7IGJvdHRvbTogLTFlbTsgcGFkZGluZzogMDsgd2lkdGg6IDFweDsgaGVpZ2h0OiAxZW07IG91dGxpbmU6IG5vbmVcIik7XG4gICAgdmFyIGRpdiA9IGVsdChcImRpdlwiLCBbdGVdLCBudWxsLCBcIm92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsgd2lkdGg6IDNweDsgaGVpZ2h0OiAwcHg7XCIpO1xuICAgIC8vIFRoZSB0ZXh0YXJlYSBpcyBrZXB0IHBvc2l0aW9uZWQgbmVhciB0aGUgY3Vyc29yIHRvIHByZXZlbnQgdGhlXG4gICAgLy8gZmFjdCB0aGF0IGl0J2xsIGJlIHNjcm9sbGVkIGludG8gdmlldyBvbiBpbnB1dCBmcm9tIHNjcm9sbGluZ1xuICAgIC8vIG91ciBmYWtlIGN1cnNvciBvdXQgb2Ygdmlldy4gT24gd2Via2l0LCB3aGVuIHdyYXA9b2ZmLCBwYXN0ZSBpc1xuICAgIC8vIHZlcnkgc2xvdy4gU28gbWFrZSB0aGUgYXJlYSB3aWRlIGluc3RlYWQuXG4gICAgaWYgKHdlYmtpdCkgeyB0ZS5zdHlsZS53aWR0aCA9IFwiMTAwMHB4XCI7IH1cbiAgICBlbHNlIHsgdGUuc2V0QXR0cmlidXRlKFwid3JhcFwiLCBcIm9mZlwiKTsgfVxuICAgIC8vIElmIGJvcmRlcjogMDsgLS0gaU9TIGZhaWxzIHRvIG9wZW4ga2V5Ym9hcmQgKGlzc3VlICMxMjg3KVxuICAgIGlmIChpb3MpIHsgdGUuc3R5bGUuYm9yZGVyID0gXCIxcHggc29saWQgYmxhY2tcIjsgfVxuICAgIGRpc2FibGVCcm93c2VyTWFnaWModGUpO1xuICAgIHJldHVybiBkaXZcbiAgfVxuXG4gIC8vIFRoZSBwdWJsaWNseSB2aXNpYmxlIEFQSS4gTm90ZSB0aGF0IG1ldGhvZE9wKGYpIG1lYW5zXG4gIC8vICd3cmFwIGYgaW4gYW4gb3BlcmF0aW9uLCBwZXJmb3JtZWQgb24gaXRzIGB0aGlzYCBwYXJhbWV0ZXInLlxuXG4gIC8vIFRoaXMgaXMgbm90IHRoZSBjb21wbGV0ZSBzZXQgb2YgZWRpdG9yIG1ldGhvZHMuIE1vc3Qgb2YgdGhlXG4gIC8vIG1ldGhvZHMgZGVmaW5lZCBvbiB0aGUgRG9jIHR5cGUgYXJlIGFsc28gaW5qZWN0ZWQgaW50b1xuICAvLyBDb2RlTWlycm9yLnByb3RvdHlwZSwgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGFuZFxuICAvLyBjb252ZW5pZW5jZS5cblxuICBmdW5jdGlvbiBhZGRFZGl0b3JNZXRob2RzKENvZGVNaXJyb3IpIHtcbiAgICB2YXIgb3B0aW9uSGFuZGxlcnMgPSBDb2RlTWlycm9yLm9wdGlvbkhhbmRsZXJzO1xuXG4gICAgdmFyIGhlbHBlcnMgPSBDb2RlTWlycm9yLmhlbHBlcnMgPSB7fTtcblxuICAgIENvZGVNaXJyb3IucHJvdG90eXBlID0ge1xuICAgICAgY29uc3RydWN0b3I6IENvZGVNaXJyb3IsXG4gICAgICBmb2N1czogZnVuY3Rpb24oKXt3aW5kb3cuZm9jdXMoKTsgdGhpcy5kaXNwbGF5LmlucHV0LmZvY3VzKCk7fSxcblxuICAgICAgc2V0T3B0aW9uOiBmdW5jdGlvbihvcHRpb24sIHZhbHVlKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLCBvbGQgPSBvcHRpb25zW29wdGlvbl07XG4gICAgICAgIGlmIChvcHRpb25zW29wdGlvbl0gPT0gdmFsdWUgJiYgb3B0aW9uICE9IFwibW9kZVwiKSB7IHJldHVybiB9XG4gICAgICAgIG9wdGlvbnNbb3B0aW9uXSA9IHZhbHVlO1xuICAgICAgICBpZiAob3B0aW9uSGFuZGxlcnMuaGFzT3duUHJvcGVydHkob3B0aW9uKSlcbiAgICAgICAgICB7IG9wZXJhdGlvbih0aGlzLCBvcHRpb25IYW5kbGVyc1tvcHRpb25dKSh0aGlzLCB2YWx1ZSwgb2xkKTsgfVxuICAgICAgICBzaWduYWwodGhpcywgXCJvcHRpb25DaGFuZ2VcIiwgdGhpcywgb3B0aW9uKTtcbiAgICAgIH0sXG5cbiAgICAgIGdldE9wdGlvbjogZnVuY3Rpb24ob3B0aW9uKSB7cmV0dXJuIHRoaXMub3B0aW9uc1tvcHRpb25dfSxcbiAgICAgIGdldERvYzogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuZG9jfSxcblxuICAgICAgYWRkS2V5TWFwOiBmdW5jdGlvbihtYXAsIGJvdHRvbSkge1xuICAgICAgICB0aGlzLnN0YXRlLmtleU1hcHNbYm90dG9tID8gXCJwdXNoXCIgOiBcInVuc2hpZnRcIl0oZ2V0S2V5TWFwKG1hcCkpO1xuICAgICAgfSxcbiAgICAgIHJlbW92ZUtleU1hcDogZnVuY3Rpb24obWFwKSB7XG4gICAgICAgIHZhciBtYXBzID0gdGhpcy5zdGF0ZS5rZXlNYXBzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcHMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgeyBpZiAobWFwc1tpXSA9PSBtYXAgfHwgbWFwc1tpXS5uYW1lID09IG1hcCkge1xuICAgICAgICAgICAgbWFwcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH0gfVxuICAgICAgfSxcblxuICAgICAgYWRkT3ZlcmxheTogbWV0aG9kT3AoZnVuY3Rpb24oc3BlYywgb3B0aW9ucykge1xuICAgICAgICB2YXIgbW9kZSA9IHNwZWMudG9rZW4gPyBzcGVjIDogQ29kZU1pcnJvci5nZXRNb2RlKHRoaXMub3B0aW9ucywgc3BlYyk7XG4gICAgICAgIGlmIChtb2RlLnN0YXJ0U3RhdGUpIHsgdGhyb3cgbmV3IEVycm9yKFwiT3ZlcmxheXMgbWF5IG5vdCBiZSBzdGF0ZWZ1bC5cIikgfVxuICAgICAgICBpbnNlcnRTb3J0ZWQodGhpcy5zdGF0ZS5vdmVybGF5cyxcbiAgICAgICAgICAgICAgICAgICAgIHttb2RlOiBtb2RlLCBtb2RlU3BlYzogc3BlYywgb3BhcXVlOiBvcHRpb25zICYmIG9wdGlvbnMub3BhcXVlLFxuICAgICAgICAgICAgICAgICAgICAgIHByaW9yaXR5OiAob3B0aW9ucyAmJiBvcHRpb25zLnByaW9yaXR5KSB8fCAwfSxcbiAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChvdmVybGF5KSB7IHJldHVybiBvdmVybGF5LnByaW9yaXR5OyB9KTtcbiAgICAgICAgdGhpcy5zdGF0ZS5tb2RlR2VuKys7XG4gICAgICAgIHJlZ0NoYW5nZSh0aGlzKTtcbiAgICAgIH0pLFxuICAgICAgcmVtb3ZlT3ZlcmxheTogbWV0aG9kT3AoZnVuY3Rpb24oc3BlYykge1xuICAgICAgICB2YXIgb3ZlcmxheXMgPSB0aGlzLnN0YXRlLm92ZXJsYXlzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG92ZXJsYXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgdmFyIGN1ciA9IG92ZXJsYXlzW2ldLm1vZGVTcGVjO1xuICAgICAgICAgIGlmIChjdXIgPT0gc3BlYyB8fCB0eXBlb2Ygc3BlYyA9PSBcInN0cmluZ1wiICYmIGN1ci5uYW1lID09IHNwZWMpIHtcbiAgICAgICAgICAgIG92ZXJsYXlzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUubW9kZUdlbisrO1xuICAgICAgICAgICAgcmVnQ2hhbmdlKHRoaXMpO1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KSxcblxuICAgICAgaW5kZW50TGluZTogbWV0aG9kT3AoZnVuY3Rpb24obiwgZGlyLCBhZ2dyZXNzaXZlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZGlyICE9IFwic3RyaW5nXCIgJiYgdHlwZW9mIGRpciAhPSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgaWYgKGRpciA9PSBudWxsKSB7IGRpciA9IHRoaXMub3B0aW9ucy5zbWFydEluZGVudCA/IFwic21hcnRcIiA6IFwicHJldlwiOyB9XG4gICAgICAgICAgZWxzZSB7IGRpciA9IGRpciA/IFwiYWRkXCIgOiBcInN1YnRyYWN0XCI7IH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNMaW5lKHRoaXMuZG9jLCBuKSkgeyBpbmRlbnRMaW5lKHRoaXMsIG4sIGRpciwgYWdncmVzc2l2ZSk7IH1cbiAgICAgIH0pLFxuICAgICAgaW5kZW50U2VsZWN0aW9uOiBtZXRob2RPcChmdW5jdGlvbihob3cpIHtcbiAgICAgICAgdmFyIHJhbmdlcyA9IHRoaXMuZG9jLnNlbC5yYW5nZXMsIGVuZCA9IC0xO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciByYW5nZSA9IHJhbmdlc1tpXTtcbiAgICAgICAgICBpZiAoIXJhbmdlLmVtcHR5KCkpIHtcbiAgICAgICAgICAgIHZhciBmcm9tID0gcmFuZ2UuZnJvbSgpLCB0byA9IHJhbmdlLnRvKCk7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSBNYXRoLm1heChlbmQsIGZyb20ubGluZSk7XG4gICAgICAgICAgICBlbmQgPSBNYXRoLm1pbih0aGlzLmxhc3RMaW5lKCksIHRvLmxpbmUgLSAodG8uY2ggPyAwIDogMSkpICsgMTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBzdGFydDsgaiA8IGVuZDsgKytqKVxuICAgICAgICAgICAgICB7IGluZGVudExpbmUodGhpcywgaiwgaG93KTsgfVxuICAgICAgICAgICAgdmFyIG5ld1JhbmdlcyA9IHRoaXMuZG9jLnNlbC5yYW5nZXM7XG4gICAgICAgICAgICBpZiAoZnJvbS5jaCA9PSAwICYmIHJhbmdlcy5sZW5ndGggPT0gbmV3UmFuZ2VzLmxlbmd0aCAmJiBuZXdSYW5nZXNbaV0uZnJvbSgpLmNoID4gMClcbiAgICAgICAgICAgICAgeyByZXBsYWNlT25lU2VsZWN0aW9uKHRoaXMuZG9jLCBpLCBuZXcgUmFuZ2UoZnJvbSwgbmV3UmFuZ2VzW2ldLnRvKCkpLCBzZWxfZG9udFNjcm9sbCk7IH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHJhbmdlLmhlYWQubGluZSA+IGVuZCkge1xuICAgICAgICAgICAgaW5kZW50TGluZSh0aGlzLCByYW5nZS5oZWFkLmxpbmUsIGhvdywgdHJ1ZSk7XG4gICAgICAgICAgICBlbmQgPSByYW5nZS5oZWFkLmxpbmU7XG4gICAgICAgICAgICBpZiAoaSA9PSB0aGlzLmRvYy5zZWwucHJpbUluZGV4KSB7IGVuc3VyZUN1cnNvclZpc2libGUodGhpcyk7IH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLFxuXG4gICAgICAvLyBGZXRjaCB0aGUgcGFyc2VyIHRva2VuIGZvciBhIGdpdmVuIGNoYXJhY3Rlci4gVXNlZnVsIGZvciBoYWNrc1xuICAgICAgLy8gdGhhdCB3YW50IHRvIGluc3BlY3QgdGhlIG1vZGUgc3RhdGUgKHNheSwgZm9yIGNvbXBsZXRpb24pLlxuICAgICAgZ2V0VG9rZW5BdDogZnVuY3Rpb24ocG9zLCBwcmVjaXNlKSB7XG4gICAgICAgIHJldHVybiB0YWtlVG9rZW4odGhpcywgcG9zLCBwcmVjaXNlKVxuICAgICAgfSxcblxuICAgICAgZ2V0TGluZVRva2VuczogZnVuY3Rpb24obGluZSwgcHJlY2lzZSkge1xuICAgICAgICByZXR1cm4gdGFrZVRva2VuKHRoaXMsIFBvcyhsaW5lKSwgcHJlY2lzZSwgdHJ1ZSlcbiAgICAgIH0sXG5cbiAgICAgIGdldFRva2VuVHlwZUF0OiBmdW5jdGlvbihwb3MpIHtcbiAgICAgICAgcG9zID0gY2xpcFBvcyh0aGlzLmRvYywgcG9zKTtcbiAgICAgICAgdmFyIHN0eWxlcyA9IGdldExpbmVTdHlsZXModGhpcywgZ2V0TGluZSh0aGlzLmRvYywgcG9zLmxpbmUpKTtcbiAgICAgICAgdmFyIGJlZm9yZSA9IDAsIGFmdGVyID0gKHN0eWxlcy5sZW5ndGggLSAxKSAvIDIsIGNoID0gcG9zLmNoO1xuICAgICAgICB2YXIgdHlwZTtcbiAgICAgICAgaWYgKGNoID09IDApIHsgdHlwZSA9IHN0eWxlc1syXTsgfVxuICAgICAgICBlbHNlIHsgZm9yICg7Oykge1xuICAgICAgICAgIHZhciBtaWQgPSAoYmVmb3JlICsgYWZ0ZXIpID4+IDE7XG4gICAgICAgICAgaWYgKChtaWQgPyBzdHlsZXNbbWlkICogMiAtIDFdIDogMCkgPj0gY2gpIHsgYWZ0ZXIgPSBtaWQ7IH1cbiAgICAgICAgICBlbHNlIGlmIChzdHlsZXNbbWlkICogMiArIDFdIDwgY2gpIHsgYmVmb3JlID0gbWlkICsgMTsgfVxuICAgICAgICAgIGVsc2UgeyB0eXBlID0gc3R5bGVzW21pZCAqIDIgKyAyXTsgYnJlYWsgfVxuICAgICAgICB9IH1cbiAgICAgICAgdmFyIGN1dCA9IHR5cGUgPyB0eXBlLmluZGV4T2YoXCJvdmVybGF5IFwiKSA6IC0xO1xuICAgICAgICByZXR1cm4gY3V0IDwgMCA/IHR5cGUgOiBjdXQgPT0gMCA/IG51bGwgOiB0eXBlLnNsaWNlKDAsIGN1dCAtIDEpXG4gICAgICB9LFxuXG4gICAgICBnZXRNb2RlQXQ6IGZ1bmN0aW9uKHBvcykge1xuICAgICAgICB2YXIgbW9kZSA9IHRoaXMuZG9jLm1vZGU7XG4gICAgICAgIGlmICghbW9kZS5pbm5lck1vZGUpIHsgcmV0dXJuIG1vZGUgfVxuICAgICAgICByZXR1cm4gQ29kZU1pcnJvci5pbm5lck1vZGUobW9kZSwgdGhpcy5nZXRUb2tlbkF0KHBvcykuc3RhdGUpLm1vZGVcbiAgICAgIH0sXG5cbiAgICAgIGdldEhlbHBlcjogZnVuY3Rpb24ocG9zLCB0eXBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEhlbHBlcnMocG9zLCB0eXBlKVswXVxuICAgICAgfSxcblxuICAgICAgZ2V0SGVscGVyczogZnVuY3Rpb24ocG9zLCB0eXBlKSB7XG4gICAgICAgIHZhciBmb3VuZCA9IFtdO1xuICAgICAgICBpZiAoIWhlbHBlcnMuaGFzT3duUHJvcGVydHkodHlwZSkpIHsgcmV0dXJuIGZvdW5kIH1cbiAgICAgICAgdmFyIGhlbHAgPSBoZWxwZXJzW3R5cGVdLCBtb2RlID0gdGhpcy5nZXRNb2RlQXQocG9zKTtcbiAgICAgICAgaWYgKHR5cGVvZiBtb2RlW3R5cGVdID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBpZiAoaGVscFttb2RlW3R5cGVdXSkgeyBmb3VuZC5wdXNoKGhlbHBbbW9kZVt0eXBlXV0pOyB9XG4gICAgICAgIH0gZWxzZSBpZiAobW9kZVt0eXBlXSkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kZVt0eXBlXS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHZhbCA9IGhlbHBbbW9kZVt0eXBlXVtpXV07XG4gICAgICAgICAgICBpZiAodmFsKSB7IGZvdW5kLnB1c2godmFsKTsgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChtb2RlLmhlbHBlclR5cGUgJiYgaGVscFttb2RlLmhlbHBlclR5cGVdKSB7XG4gICAgICAgICAgZm91bmQucHVzaChoZWxwW21vZGUuaGVscGVyVHlwZV0pO1xuICAgICAgICB9IGVsc2UgaWYgKGhlbHBbbW9kZS5uYW1lXSkge1xuICAgICAgICAgIGZvdW5kLnB1c2goaGVscFttb2RlLm5hbWVdKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBoZWxwLl9nbG9iYWwubGVuZ3RoOyBpJDErKykge1xuICAgICAgICAgIHZhciBjdXIgPSBoZWxwLl9nbG9iYWxbaSQxXTtcbiAgICAgICAgICBpZiAoY3VyLnByZWQobW9kZSwgdGhpcykgJiYgaW5kZXhPZihmb3VuZCwgY3VyLnZhbCkgPT0gLTEpXG4gICAgICAgICAgICB7IGZvdW5kLnB1c2goY3VyLnZhbCk7IH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm91bmRcbiAgICAgIH0sXG5cbiAgICAgIGdldFN0YXRlQWZ0ZXI6IGZ1bmN0aW9uKGxpbmUsIHByZWNpc2UpIHtcbiAgICAgICAgdmFyIGRvYyA9IHRoaXMuZG9jO1xuICAgICAgICBsaW5lID0gY2xpcExpbmUoZG9jLCBsaW5lID09IG51bGwgPyBkb2MuZmlyc3QgKyBkb2Muc2l6ZSAtIDE6IGxpbmUpO1xuICAgICAgICByZXR1cm4gZ2V0Q29udGV4dEJlZm9yZSh0aGlzLCBsaW5lICsgMSwgcHJlY2lzZSkuc3RhdGVcbiAgICAgIH0sXG5cbiAgICAgIGN1cnNvckNvb3JkczogZnVuY3Rpb24oc3RhcnQsIG1vZGUpIHtcbiAgICAgICAgdmFyIHBvcywgcmFuZ2UgPSB0aGlzLmRvYy5zZWwucHJpbWFyeSgpO1xuICAgICAgICBpZiAoc3RhcnQgPT0gbnVsbCkgeyBwb3MgPSByYW5nZS5oZWFkOyB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBzdGFydCA9PSBcIm9iamVjdFwiKSB7IHBvcyA9IGNsaXBQb3ModGhpcy5kb2MsIHN0YXJ0KTsgfVxuICAgICAgICBlbHNlIHsgcG9zID0gc3RhcnQgPyByYW5nZS5mcm9tKCkgOiByYW5nZS50bygpOyB9XG4gICAgICAgIHJldHVybiBjdXJzb3JDb29yZHModGhpcywgcG9zLCBtb2RlIHx8IFwicGFnZVwiKVxuICAgICAgfSxcblxuICAgICAgY2hhckNvb3JkczogZnVuY3Rpb24ocG9zLCBtb2RlKSB7XG4gICAgICAgIHJldHVybiBjaGFyQ29vcmRzKHRoaXMsIGNsaXBQb3ModGhpcy5kb2MsIHBvcyksIG1vZGUgfHwgXCJwYWdlXCIpXG4gICAgICB9LFxuXG4gICAgICBjb29yZHNDaGFyOiBmdW5jdGlvbihjb29yZHMsIG1vZGUpIHtcbiAgICAgICAgY29vcmRzID0gZnJvbUNvb3JkU3lzdGVtKHRoaXMsIGNvb3JkcywgbW9kZSB8fCBcInBhZ2VcIik7XG4gICAgICAgIHJldHVybiBjb29yZHNDaGFyKHRoaXMsIGNvb3Jkcy5sZWZ0LCBjb29yZHMudG9wKVxuICAgICAgfSxcblxuICAgICAgbGluZUF0SGVpZ2h0OiBmdW5jdGlvbihoZWlnaHQsIG1vZGUpIHtcbiAgICAgICAgaGVpZ2h0ID0gZnJvbUNvb3JkU3lzdGVtKHRoaXMsIHt0b3A6IGhlaWdodCwgbGVmdDogMH0sIG1vZGUgfHwgXCJwYWdlXCIpLnRvcDtcbiAgICAgICAgcmV0dXJuIGxpbmVBdEhlaWdodCh0aGlzLmRvYywgaGVpZ2h0ICsgdGhpcy5kaXNwbGF5LnZpZXdPZmZzZXQpXG4gICAgICB9LFxuICAgICAgaGVpZ2h0QXRMaW5lOiBmdW5jdGlvbihsaW5lLCBtb2RlLCBpbmNsdWRlV2lkZ2V0cykge1xuICAgICAgICB2YXIgZW5kID0gZmFsc2UsIGxpbmVPYmo7XG4gICAgICAgIGlmICh0eXBlb2YgbGluZSA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgdmFyIGxhc3QgPSB0aGlzLmRvYy5maXJzdCArIHRoaXMuZG9jLnNpemUgLSAxO1xuICAgICAgICAgIGlmIChsaW5lIDwgdGhpcy5kb2MuZmlyc3QpIHsgbGluZSA9IHRoaXMuZG9jLmZpcnN0OyB9XG4gICAgICAgICAgZWxzZSBpZiAobGluZSA+IGxhc3QpIHsgbGluZSA9IGxhc3Q7IGVuZCA9IHRydWU7IH1cbiAgICAgICAgICBsaW5lT2JqID0gZ2V0TGluZSh0aGlzLmRvYywgbGluZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGluZU9iaiA9IGxpbmU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGludG9Db29yZFN5c3RlbSh0aGlzLCBsaW5lT2JqLCB7dG9wOiAwLCBsZWZ0OiAwfSwgbW9kZSB8fCBcInBhZ2VcIiwgaW5jbHVkZVdpZGdldHMgfHwgZW5kKS50b3AgK1xuICAgICAgICAgIChlbmQgPyB0aGlzLmRvYy5oZWlnaHQgLSBoZWlnaHRBdExpbmUobGluZU9iaikgOiAwKVxuICAgICAgfSxcblxuICAgICAgZGVmYXVsdFRleHRIZWlnaHQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGV4dEhlaWdodCh0aGlzLmRpc3BsYXkpIH0sXG4gICAgICBkZWZhdWx0Q2hhcldpZHRoOiBmdW5jdGlvbigpIHsgcmV0dXJuIGNoYXJXaWR0aCh0aGlzLmRpc3BsYXkpIH0sXG5cbiAgICAgIGdldFZpZXdwb3J0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHtmcm9tOiB0aGlzLmRpc3BsYXkudmlld0Zyb20sIHRvOiB0aGlzLmRpc3BsYXkudmlld1RvfX0sXG5cbiAgICAgIGFkZFdpZGdldDogZnVuY3Rpb24ocG9zLCBub2RlLCBzY3JvbGwsIHZlcnQsIGhvcml6KSB7XG4gICAgICAgIHZhciBkaXNwbGF5ID0gdGhpcy5kaXNwbGF5O1xuICAgICAgICBwb3MgPSBjdXJzb3JDb29yZHModGhpcywgY2xpcFBvcyh0aGlzLmRvYywgcG9zKSk7XG4gICAgICAgIHZhciB0b3AgPSBwb3MuYm90dG9tLCBsZWZ0ID0gcG9zLmxlZnQ7XG4gICAgICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKFwiY20taWdub3JlLWV2ZW50c1wiLCBcInRydWVcIik7XG4gICAgICAgIHRoaXMuZGlzcGxheS5pbnB1dC5zZXRVbmVkaXRhYmxlKG5vZGUpO1xuICAgICAgICBkaXNwbGF5LnNpemVyLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICBpZiAodmVydCA9PSBcIm92ZXJcIikge1xuICAgICAgICAgIHRvcCA9IHBvcy50b3A7XG4gICAgICAgIH0gZWxzZSBpZiAodmVydCA9PSBcImFib3ZlXCIgfHwgdmVydCA9PSBcIm5lYXJcIikge1xuICAgICAgICAgIHZhciB2c3BhY2UgPSBNYXRoLm1heChkaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0LCB0aGlzLmRvYy5oZWlnaHQpLFxuICAgICAgICAgIGhzcGFjZSA9IE1hdGgubWF4KGRpc3BsYXkuc2l6ZXIuY2xpZW50V2lkdGgsIGRpc3BsYXkubGluZVNwYWNlLmNsaWVudFdpZHRoKTtcbiAgICAgICAgICAvLyBEZWZhdWx0IHRvIHBvc2l0aW9uaW5nIGFib3ZlIChpZiBzcGVjaWZpZWQgYW5kIHBvc3NpYmxlKTsgb3RoZXJ3aXNlIGRlZmF1bHQgdG8gcG9zaXRpb25pbmcgYmVsb3dcbiAgICAgICAgICBpZiAoKHZlcnQgPT0gJ2Fib3ZlJyB8fCBwb3MuYm90dG9tICsgbm9kZS5vZmZzZXRIZWlnaHQgPiB2c3BhY2UpICYmIHBvcy50b3AgPiBub2RlLm9mZnNldEhlaWdodClcbiAgICAgICAgICAgIHsgdG9wID0gcG9zLnRvcCAtIG5vZGUub2Zmc2V0SGVpZ2h0OyB9XG4gICAgICAgICAgZWxzZSBpZiAocG9zLmJvdHRvbSArIG5vZGUub2Zmc2V0SGVpZ2h0IDw9IHZzcGFjZSlcbiAgICAgICAgICAgIHsgdG9wID0gcG9zLmJvdHRvbTsgfVxuICAgICAgICAgIGlmIChsZWZ0ICsgbm9kZS5vZmZzZXRXaWR0aCA+IGhzcGFjZSlcbiAgICAgICAgICAgIHsgbGVmdCA9IGhzcGFjZSAtIG5vZGUub2Zmc2V0V2lkdGg7IH1cbiAgICAgICAgfVxuICAgICAgICBub2RlLnN0eWxlLnRvcCA9IHRvcCArIFwicHhcIjtcbiAgICAgICAgbm9kZS5zdHlsZS5sZWZ0ID0gbm9kZS5zdHlsZS5yaWdodCA9IFwiXCI7XG4gICAgICAgIGlmIChob3JpeiA9PSBcInJpZ2h0XCIpIHtcbiAgICAgICAgICBsZWZ0ID0gZGlzcGxheS5zaXplci5jbGllbnRXaWR0aCAtIG5vZGUub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgbm9kZS5zdHlsZS5yaWdodCA9IFwiMHB4XCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGhvcml6ID09IFwibGVmdFwiKSB7IGxlZnQgPSAwOyB9XG4gICAgICAgICAgZWxzZSBpZiAoaG9yaXogPT0gXCJtaWRkbGVcIikgeyBsZWZ0ID0gKGRpc3BsYXkuc2l6ZXIuY2xpZW50V2lkdGggLSBub2RlLm9mZnNldFdpZHRoKSAvIDI7IH1cbiAgICAgICAgICBub2RlLnN0eWxlLmxlZnQgPSBsZWZ0ICsgXCJweFwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzY3JvbGwpXG4gICAgICAgICAgeyBzY3JvbGxJbnRvVmlldyh0aGlzLCB7bGVmdDogbGVmdCwgdG9wOiB0b3AsIHJpZ2h0OiBsZWZ0ICsgbm9kZS5vZmZzZXRXaWR0aCwgYm90dG9tOiB0b3AgKyBub2RlLm9mZnNldEhlaWdodH0pOyB9XG4gICAgICB9LFxuXG4gICAgICB0cmlnZ2VyT25LZXlEb3duOiBtZXRob2RPcChvbktleURvd24pLFxuICAgICAgdHJpZ2dlck9uS2V5UHJlc3M6IG1ldGhvZE9wKG9uS2V5UHJlc3MpLFxuICAgICAgdHJpZ2dlck9uS2V5VXA6IG9uS2V5VXAsXG4gICAgICB0cmlnZ2VyT25Nb3VzZURvd246IG1ldGhvZE9wKG9uTW91c2VEb3duKSxcblxuICAgICAgZXhlY0NvbW1hbmQ6IGZ1bmN0aW9uKGNtZCkge1xuICAgICAgICBpZiAoY29tbWFuZHMuaGFzT3duUHJvcGVydHkoY21kKSlcbiAgICAgICAgICB7IHJldHVybiBjb21tYW5kc1tjbWRdLmNhbGwobnVsbCwgdGhpcykgfVxuICAgICAgfSxcblxuICAgICAgdHJpZ2dlckVsZWN0cmljOiBtZXRob2RPcChmdW5jdGlvbih0ZXh0KSB7IHRyaWdnZXJFbGVjdHJpYyh0aGlzLCB0ZXh0KTsgfSksXG5cbiAgICAgIGZpbmRQb3NIOiBmdW5jdGlvbihmcm9tLCBhbW91bnQsIHVuaXQsIHZpc3VhbGx5KSB7XG4gICAgICAgIHZhciBkaXIgPSAxO1xuICAgICAgICBpZiAoYW1vdW50IDwgMCkgeyBkaXIgPSAtMTsgYW1vdW50ID0gLWFtb3VudDsgfVxuICAgICAgICB2YXIgY3VyID0gY2xpcFBvcyh0aGlzLmRvYywgZnJvbSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW1vdW50OyArK2kpIHtcbiAgICAgICAgICBjdXIgPSBmaW5kUG9zSCh0aGlzLmRvYywgY3VyLCBkaXIsIHVuaXQsIHZpc3VhbGx5KTtcbiAgICAgICAgICBpZiAoY3VyLmhpdFNpZGUpIHsgYnJlYWsgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjdXJcbiAgICAgIH0sXG5cbiAgICAgIG1vdmVIOiBtZXRob2RPcChmdW5jdGlvbihkaXIsIHVuaXQpIHtcbiAgICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24gKHJhbmdlKSB7XG4gICAgICAgICAgaWYgKHRoaXMkMS5kaXNwbGF5LnNoaWZ0IHx8IHRoaXMkMS5kb2MuZXh0ZW5kIHx8IHJhbmdlLmVtcHR5KCkpXG4gICAgICAgICAgICB7IHJldHVybiBmaW5kUG9zSCh0aGlzJDEuZG9jLCByYW5nZS5oZWFkLCBkaXIsIHVuaXQsIHRoaXMkMS5vcHRpb25zLnJ0bE1vdmVWaXN1YWxseSkgfVxuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHsgcmV0dXJuIGRpciA8IDAgPyByYW5nZS5mcm9tKCkgOiByYW5nZS50bygpIH1cbiAgICAgICAgfSwgc2VsX21vdmUpO1xuICAgICAgfSksXG5cbiAgICAgIGRlbGV0ZUg6IG1ldGhvZE9wKGZ1bmN0aW9uKGRpciwgdW5pdCkge1xuICAgICAgICB2YXIgc2VsID0gdGhpcy5kb2Muc2VsLCBkb2MgPSB0aGlzLmRvYztcbiAgICAgICAgaWYgKHNlbC5zb21ldGhpbmdTZWxlY3RlZCgpKVxuICAgICAgICAgIHsgZG9jLnJlcGxhY2VTZWxlY3Rpb24oXCJcIiwgbnVsbCwgXCIrZGVsZXRlXCIpOyB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICB7IGRlbGV0ZU5lYXJTZWxlY3Rpb24odGhpcywgZnVuY3Rpb24gKHJhbmdlKSB7XG4gICAgICAgICAgICB2YXIgb3RoZXIgPSBmaW5kUG9zSChkb2MsIHJhbmdlLmhlYWQsIGRpciwgdW5pdCwgZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuIGRpciA8IDAgPyB7ZnJvbTogb3RoZXIsIHRvOiByYW5nZS5oZWFkfSA6IHtmcm9tOiByYW5nZS5oZWFkLCB0bzogb3RoZXJ9XG4gICAgICAgICAgfSk7IH1cbiAgICAgIH0pLFxuXG4gICAgICBmaW5kUG9zVjogZnVuY3Rpb24oZnJvbSwgYW1vdW50LCB1bml0LCBnb2FsQ29sdW1uKSB7XG4gICAgICAgIHZhciBkaXIgPSAxLCB4ID0gZ29hbENvbHVtbjtcbiAgICAgICAgaWYgKGFtb3VudCA8IDApIHsgZGlyID0gLTE7IGFtb3VudCA9IC1hbW91bnQ7IH1cbiAgICAgICAgdmFyIGN1ciA9IGNsaXBQb3ModGhpcy5kb2MsIGZyb20pO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFtb3VudDsgKytpKSB7XG4gICAgICAgICAgdmFyIGNvb3JkcyA9IGN1cnNvckNvb3Jkcyh0aGlzLCBjdXIsIFwiZGl2XCIpO1xuICAgICAgICAgIGlmICh4ID09IG51bGwpIHsgeCA9IGNvb3Jkcy5sZWZ0OyB9XG4gICAgICAgICAgZWxzZSB7IGNvb3Jkcy5sZWZ0ID0geDsgfVxuICAgICAgICAgIGN1ciA9IGZpbmRQb3NWKHRoaXMsIGNvb3JkcywgZGlyLCB1bml0KTtcbiAgICAgICAgICBpZiAoY3VyLmhpdFNpZGUpIHsgYnJlYWsgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjdXJcbiAgICAgIH0sXG5cbiAgICAgIG1vdmVWOiBtZXRob2RPcChmdW5jdGlvbihkaXIsIHVuaXQpIHtcbiAgICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICAgICAgdmFyIGRvYyA9IHRoaXMuZG9jLCBnb2FscyA9IFtdO1xuICAgICAgICB2YXIgY29sbGFwc2UgPSAhdGhpcy5kaXNwbGF5LnNoaWZ0ICYmICFkb2MuZXh0ZW5kICYmIGRvYy5zZWwuc29tZXRoaW5nU2VsZWN0ZWQoKTtcbiAgICAgICAgZG9jLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbiAocmFuZ2UpIHtcbiAgICAgICAgICBpZiAoY29sbGFwc2UpXG4gICAgICAgICAgICB7IHJldHVybiBkaXIgPCAwID8gcmFuZ2UuZnJvbSgpIDogcmFuZ2UudG8oKSB9XG4gICAgICAgICAgdmFyIGhlYWRQb3MgPSBjdXJzb3JDb29yZHModGhpcyQxLCByYW5nZS5oZWFkLCBcImRpdlwiKTtcbiAgICAgICAgICBpZiAocmFuZ2UuZ29hbENvbHVtbiAhPSBudWxsKSB7IGhlYWRQb3MubGVmdCA9IHJhbmdlLmdvYWxDb2x1bW47IH1cbiAgICAgICAgICBnb2Fscy5wdXNoKGhlYWRQb3MubGVmdCk7XG4gICAgICAgICAgdmFyIHBvcyA9IGZpbmRQb3NWKHRoaXMkMSwgaGVhZFBvcywgZGlyLCB1bml0KTtcbiAgICAgICAgICBpZiAodW5pdCA9PSBcInBhZ2VcIiAmJiByYW5nZSA9PSBkb2Muc2VsLnByaW1hcnkoKSlcbiAgICAgICAgICAgIHsgYWRkVG9TY3JvbGxUb3AodGhpcyQxLCBjaGFyQ29vcmRzKHRoaXMkMSwgcG9zLCBcImRpdlwiKS50b3AgLSBoZWFkUG9zLnRvcCk7IH1cbiAgICAgICAgICByZXR1cm4gcG9zXG4gICAgICAgIH0sIHNlbF9tb3ZlKTtcbiAgICAgICAgaWYgKGdvYWxzLmxlbmd0aCkgeyBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5zZWwucmFuZ2VzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgIHsgZG9jLnNlbC5yYW5nZXNbaV0uZ29hbENvbHVtbiA9IGdvYWxzW2ldOyB9IH1cbiAgICAgIH0pLFxuXG4gICAgICAvLyBGaW5kIHRoZSB3b3JkIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiAoYXMgcmV0dXJuZWQgYnkgY29vcmRzQ2hhcikuXG4gICAgICBmaW5kV29yZEF0OiBmdW5jdGlvbihwb3MpIHtcbiAgICAgICAgdmFyIGRvYyA9IHRoaXMuZG9jLCBsaW5lID0gZ2V0TGluZShkb2MsIHBvcy5saW5lKS50ZXh0O1xuICAgICAgICB2YXIgc3RhcnQgPSBwb3MuY2gsIGVuZCA9IHBvcy5jaDtcbiAgICAgICAgaWYgKGxpbmUpIHtcbiAgICAgICAgICB2YXIgaGVscGVyID0gdGhpcy5nZXRIZWxwZXIocG9zLCBcIndvcmRDaGFyc1wiKTtcbiAgICAgICAgICBpZiAoKHBvcy5zdGlja3kgPT0gXCJiZWZvcmVcIiB8fCBlbmQgPT0gbGluZS5sZW5ndGgpICYmIHN0YXJ0KSB7IC0tc3RhcnQ7IH0gZWxzZSB7ICsrZW5kOyB9XG4gICAgICAgICAgdmFyIHN0YXJ0Q2hhciA9IGxpbmUuY2hhckF0KHN0YXJ0KTtcbiAgICAgICAgICB2YXIgY2hlY2sgPSBpc1dvcmRDaGFyKHN0YXJ0Q2hhciwgaGVscGVyKVxuICAgICAgICAgICAgPyBmdW5jdGlvbiAoY2gpIHsgcmV0dXJuIGlzV29yZENoYXIoY2gsIGhlbHBlcik7IH1cbiAgICAgICAgICAgIDogL1xccy8udGVzdChzdGFydENoYXIpID8gZnVuY3Rpb24gKGNoKSB7IHJldHVybiAvXFxzLy50ZXN0KGNoKTsgfVxuICAgICAgICAgICAgOiBmdW5jdGlvbiAoY2gpIHsgcmV0dXJuICghL1xccy8udGVzdChjaCkgJiYgIWlzV29yZENoYXIoY2gpKTsgfTtcbiAgICAgICAgICB3aGlsZSAoc3RhcnQgPiAwICYmIGNoZWNrKGxpbmUuY2hhckF0KHN0YXJ0IC0gMSkpKSB7IC0tc3RhcnQ7IH1cbiAgICAgICAgICB3aGlsZSAoZW5kIDwgbGluZS5sZW5ndGggJiYgY2hlY2sobGluZS5jaGFyQXQoZW5kKSkpIHsgKytlbmQ7IH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFJhbmdlKFBvcyhwb3MubGluZSwgc3RhcnQpLCBQb3MocG9zLmxpbmUsIGVuZCkpXG4gICAgICB9LFxuXG4gICAgICB0b2dnbGVPdmVyd3JpdGU6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPSBudWxsICYmIHZhbHVlID09IHRoaXMuc3RhdGUub3ZlcndyaXRlKSB7IHJldHVybiB9XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLm92ZXJ3cml0ZSA9ICF0aGlzLnN0YXRlLm92ZXJ3cml0ZSlcbiAgICAgICAgICB7IGFkZENsYXNzKHRoaXMuZGlzcGxheS5jdXJzb3JEaXYsIFwiQ29kZU1pcnJvci1vdmVyd3JpdGVcIik7IH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgIHsgcm1DbGFzcyh0aGlzLmRpc3BsYXkuY3Vyc29yRGl2LCBcIkNvZGVNaXJyb3Itb3ZlcndyaXRlXCIpOyB9XG5cbiAgICAgICAgc2lnbmFsKHRoaXMsIFwib3ZlcndyaXRlVG9nZ2xlXCIsIHRoaXMsIHRoaXMuc3RhdGUub3ZlcndyaXRlKTtcbiAgICAgIH0sXG4gICAgICBoYXNGb2N1czogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmRpc3BsYXkuaW5wdXQuZ2V0RmllbGQoKSA9PSBhY3RpdmVFbHQoKSB9LFxuICAgICAgaXNSZWFkT25seTogZnVuY3Rpb24oKSB7IHJldHVybiAhISh0aGlzLm9wdGlvbnMucmVhZE9ubHkgfHwgdGhpcy5kb2MuY2FudEVkaXQpIH0sXG5cbiAgICAgIHNjcm9sbFRvOiBtZXRob2RPcChmdW5jdGlvbiAoeCwgeSkgeyBzY3JvbGxUb0Nvb3Jkcyh0aGlzLCB4LCB5KTsgfSksXG4gICAgICBnZXRTY3JvbGxJbmZvOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNjcm9sbGVyID0gdGhpcy5kaXNwbGF5LnNjcm9sbGVyO1xuICAgICAgICByZXR1cm4ge2xlZnQ6IHNjcm9sbGVyLnNjcm9sbExlZnQsIHRvcDogc2Nyb2xsZXIuc2Nyb2xsVG9wLFxuICAgICAgICAgICAgICAgIGhlaWdodDogc2Nyb2xsZXIuc2Nyb2xsSGVpZ2h0IC0gc2Nyb2xsR2FwKHRoaXMpIC0gdGhpcy5kaXNwbGF5LmJhckhlaWdodCxcbiAgICAgICAgICAgICAgICB3aWR0aDogc2Nyb2xsZXIuc2Nyb2xsV2lkdGggLSBzY3JvbGxHYXAodGhpcykgLSB0aGlzLmRpc3BsYXkuYmFyV2lkdGgsXG4gICAgICAgICAgICAgICAgY2xpZW50SGVpZ2h0OiBkaXNwbGF5SGVpZ2h0KHRoaXMpLCBjbGllbnRXaWR0aDogZGlzcGxheVdpZHRoKHRoaXMpfVxuICAgICAgfSxcblxuICAgICAgc2Nyb2xsSW50b1ZpZXc6IG1ldGhvZE9wKGZ1bmN0aW9uKHJhbmdlLCBtYXJnaW4pIHtcbiAgICAgICAgaWYgKHJhbmdlID09IG51bGwpIHtcbiAgICAgICAgICByYW5nZSA9IHtmcm9tOiB0aGlzLmRvYy5zZWwucHJpbWFyeSgpLmhlYWQsIHRvOiBudWxsfTtcbiAgICAgICAgICBpZiAobWFyZ2luID09IG51bGwpIHsgbWFyZ2luID0gdGhpcy5vcHRpb25zLmN1cnNvclNjcm9sbE1hcmdpbjsgfVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByYW5nZSA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgcmFuZ2UgPSB7ZnJvbTogUG9zKHJhbmdlLCAwKSwgdG86IG51bGx9O1xuICAgICAgICB9IGVsc2UgaWYgKHJhbmdlLmZyb20gPT0gbnVsbCkge1xuICAgICAgICAgIHJhbmdlID0ge2Zyb206IHJhbmdlLCB0bzogbnVsbH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyYW5nZS50bykgeyByYW5nZS50byA9IHJhbmdlLmZyb207IH1cbiAgICAgICAgcmFuZ2UubWFyZ2luID0gbWFyZ2luIHx8IDA7XG5cbiAgICAgICAgaWYgKHJhbmdlLmZyb20ubGluZSAhPSBudWxsKSB7XG4gICAgICAgICAgc2Nyb2xsVG9SYW5nZSh0aGlzLCByYW5nZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2Nyb2xsVG9Db29yZHNSYW5nZSh0aGlzLCByYW5nZS5mcm9tLCByYW5nZS50bywgcmFuZ2UubWFyZ2luKTtcbiAgICAgICAgfVxuICAgICAgfSksXG5cbiAgICAgIHNldFNpemU6IG1ldGhvZE9wKGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICAgICAgdmFyIGludGVycHJldCA9IGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIHR5cGVvZiB2YWwgPT0gXCJudW1iZXJcIiB8fCAvXlxcZCskLy50ZXN0KFN0cmluZyh2YWwpKSA/IHZhbCArIFwicHhcIiA6IHZhbDsgfTtcbiAgICAgICAgaWYgKHdpZHRoICE9IG51bGwpIHsgdGhpcy5kaXNwbGF5LndyYXBwZXIuc3R5bGUud2lkdGggPSBpbnRlcnByZXQod2lkdGgpOyB9XG4gICAgICAgIGlmIChoZWlnaHQgIT0gbnVsbCkgeyB0aGlzLmRpc3BsYXkud3JhcHBlci5zdHlsZS5oZWlnaHQgPSBpbnRlcnByZXQoaGVpZ2h0KTsgfVxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmxpbmVXcmFwcGluZykgeyBjbGVhckxpbmVNZWFzdXJlbWVudENhY2hlKHRoaXMpOyB9XG4gICAgICAgIHZhciBsaW5lTm8gPSB0aGlzLmRpc3BsYXkudmlld0Zyb207XG4gICAgICAgIHRoaXMuZG9jLml0ZXIobGluZU5vLCB0aGlzLmRpc3BsYXkudmlld1RvLCBmdW5jdGlvbiAobGluZSkge1xuICAgICAgICAgIGlmIChsaW5lLndpZGdldHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lLndpZGdldHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB7IGlmIChsaW5lLndpZGdldHNbaV0ubm9IU2Nyb2xsKSB7IHJlZ0xpbmVDaGFuZ2UodGhpcyQxLCBsaW5lTm8sIFwid2lkZ2V0XCIpOyBicmVhayB9IH0gfVxuICAgICAgICAgICsrbGluZU5vO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7XG4gICAgICAgIHNpZ25hbCh0aGlzLCBcInJlZnJlc2hcIiwgdGhpcyk7XG4gICAgICB9KSxcblxuICAgICAgb3BlcmF0aW9uOiBmdW5jdGlvbihmKXtyZXR1cm4gcnVuSW5PcCh0aGlzLCBmKX0sXG4gICAgICBzdGFydE9wZXJhdGlvbjogZnVuY3Rpb24oKXtyZXR1cm4gc3RhcnRPcGVyYXRpb24odGhpcyl9LFxuICAgICAgZW5kT3BlcmF0aW9uOiBmdW5jdGlvbigpe3JldHVybiBlbmRPcGVyYXRpb24odGhpcyl9LFxuXG4gICAgICByZWZyZXNoOiBtZXRob2RPcChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG9sZEhlaWdodCA9IHRoaXMuZGlzcGxheS5jYWNoZWRUZXh0SGVpZ2h0O1xuICAgICAgICByZWdDaGFuZ2UodGhpcyk7XG4gICAgICAgIHRoaXMuY3VyT3AuZm9yY2VVcGRhdGUgPSB0cnVlO1xuICAgICAgICBjbGVhckNhY2hlcyh0aGlzKTtcbiAgICAgICAgc2Nyb2xsVG9Db29yZHModGhpcywgdGhpcy5kb2Muc2Nyb2xsTGVmdCwgdGhpcy5kb2Muc2Nyb2xsVG9wKTtcbiAgICAgICAgdXBkYXRlR3V0dGVyU3BhY2UodGhpcy5kaXNwbGF5KTtcbiAgICAgICAgaWYgKG9sZEhlaWdodCA9PSBudWxsIHx8IE1hdGguYWJzKG9sZEhlaWdodCAtIHRleHRIZWlnaHQodGhpcy5kaXNwbGF5KSkgPiAuNSB8fCB0aGlzLm9wdGlvbnMubGluZVdyYXBwaW5nKVxuICAgICAgICAgIHsgZXN0aW1hdGVMaW5lSGVpZ2h0cyh0aGlzKTsgfVxuICAgICAgICBzaWduYWwodGhpcywgXCJyZWZyZXNoXCIsIHRoaXMpO1xuICAgICAgfSksXG5cbiAgICAgIHN3YXBEb2M6IG1ldGhvZE9wKGZ1bmN0aW9uKGRvYykge1xuICAgICAgICB2YXIgb2xkID0gdGhpcy5kb2M7XG4gICAgICAgIG9sZC5jbSA9IG51bGw7XG4gICAgICAgIC8vIENhbmNlbCB0aGUgY3VycmVudCB0ZXh0IHNlbGVjdGlvbiBpZiBhbnkgKCM1ODIxKVxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zZWxlY3RpbmdUZXh0KSB7IHRoaXMuc3RhdGUuc2VsZWN0aW5nVGV4dCgpOyB9XG4gICAgICAgIGF0dGFjaERvYyh0aGlzLCBkb2MpO1xuICAgICAgICBjbGVhckNhY2hlcyh0aGlzKTtcbiAgICAgICAgdGhpcy5kaXNwbGF5LmlucHV0LnJlc2V0KCk7XG4gICAgICAgIHNjcm9sbFRvQ29vcmRzKHRoaXMsIGRvYy5zY3JvbGxMZWZ0LCBkb2Muc2Nyb2xsVG9wKTtcbiAgICAgICAgdGhpcy5jdXJPcC5mb3JjZVNjcm9sbCA9IHRydWU7XG4gICAgICAgIHNpZ25hbExhdGVyKHRoaXMsIFwic3dhcERvY1wiLCB0aGlzLCBvbGQpO1xuICAgICAgICByZXR1cm4gb2xkXG4gICAgICB9KSxcblxuICAgICAgcGhyYXNlOiBmdW5jdGlvbihwaHJhc2VUZXh0KSB7XG4gICAgICAgIHZhciBwaHJhc2VzID0gdGhpcy5vcHRpb25zLnBocmFzZXM7XG4gICAgICAgIHJldHVybiBwaHJhc2VzICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwaHJhc2VzLCBwaHJhc2VUZXh0KSA/IHBocmFzZXNbcGhyYXNlVGV4dF0gOiBwaHJhc2VUZXh0XG4gICAgICB9LFxuXG4gICAgICBnZXRJbnB1dEZpZWxkOiBmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc3BsYXkuaW5wdXQuZ2V0RmllbGQoKX0sXG4gICAgICBnZXRXcmFwcGVyRWxlbWVudDogZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNwbGF5LndyYXBwZXJ9LFxuICAgICAgZ2V0U2Nyb2xsZXJFbGVtZW50OiBmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc3BsYXkuc2Nyb2xsZXJ9LFxuICAgICAgZ2V0R3V0dGVyRWxlbWVudDogZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNwbGF5Lmd1dHRlcnN9XG4gICAgfTtcbiAgICBldmVudE1peGluKENvZGVNaXJyb3IpO1xuXG4gICAgQ29kZU1pcnJvci5yZWdpc3RlckhlbHBlciA9IGZ1bmN0aW9uKHR5cGUsIG5hbWUsIHZhbHVlKSB7XG4gICAgICBpZiAoIWhlbHBlcnMuaGFzT3duUHJvcGVydHkodHlwZSkpIHsgaGVscGVyc1t0eXBlXSA9IENvZGVNaXJyb3JbdHlwZV0gPSB7X2dsb2JhbDogW119OyB9XG4gICAgICBoZWxwZXJzW3R5cGVdW25hbWVdID0gdmFsdWU7XG4gICAgfTtcbiAgICBDb2RlTWlycm9yLnJlZ2lzdGVyR2xvYmFsSGVscGVyID0gZnVuY3Rpb24odHlwZSwgbmFtZSwgcHJlZGljYXRlLCB2YWx1ZSkge1xuICAgICAgQ29kZU1pcnJvci5yZWdpc3RlckhlbHBlcih0eXBlLCBuYW1lLCB2YWx1ZSk7XG4gICAgICBoZWxwZXJzW3R5cGVdLl9nbG9iYWwucHVzaCh7cHJlZDogcHJlZGljYXRlLCB2YWw6IHZhbHVlfSk7XG4gICAgfTtcbiAgfVxuXG4gIC8vIFVzZWQgZm9yIGhvcml6b250YWwgcmVsYXRpdmUgbW90aW9uLiBEaXIgaXMgLTEgb3IgMSAobGVmdCBvclxuICAvLyByaWdodCksIHVuaXQgY2FuIGJlIFwiY2hhclwiLCBcImNvbHVtblwiIChsaWtlIGNoYXIsIGJ1dCBkb2Vzbid0XG4gIC8vIGNyb3NzIGxpbmUgYm91bmRhcmllcyksIFwid29yZFwiIChhY3Jvc3MgbmV4dCB3b3JkKSwgb3IgXCJncm91cFwiICh0b1xuICAvLyB0aGUgc3RhcnQgb2YgbmV4dCBncm91cCBvZiB3b3JkIG9yIG5vbi13b3JkLW5vbi13aGl0ZXNwYWNlXG4gIC8vIGNoYXJzKS4gVGhlIHZpc3VhbGx5IHBhcmFtIGNvbnRyb2xzIHdoZXRoZXIsIGluIHJpZ2h0LXRvLWxlZnRcbiAgLy8gdGV4dCwgZGlyZWN0aW9uIDEgbWVhbnMgdG8gbW92ZSB0b3dhcmRzIHRoZSBuZXh0IGluZGV4IGluIHRoZVxuICAvLyBzdHJpbmcsIG9yIHRvd2FyZHMgdGhlIGNoYXJhY3RlciB0byB0aGUgcmlnaHQgb2YgdGhlIGN1cnJlbnRcbiAgLy8gcG9zaXRpb24uIFRoZSByZXN1bHRpbmcgcG9zaXRpb24gd2lsbCBoYXZlIGEgaGl0U2lkZT10cnVlXG4gIC8vIHByb3BlcnR5IGlmIGl0IHJlYWNoZWQgdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQuXG4gIGZ1bmN0aW9uIGZpbmRQb3NIKGRvYywgcG9zLCBkaXIsIHVuaXQsIHZpc3VhbGx5KSB7XG4gICAgdmFyIG9sZFBvcyA9IHBvcztcbiAgICB2YXIgb3JpZ0RpciA9IGRpcjtcbiAgICB2YXIgbGluZU9iaiA9IGdldExpbmUoZG9jLCBwb3MubGluZSk7XG4gICAgdmFyIGxpbmVEaXIgPSB2aXN1YWxseSAmJiBkb2MuZGlyZWN0aW9uID09IFwicnRsXCIgPyAtZGlyIDogZGlyO1xuICAgIGZ1bmN0aW9uIGZpbmROZXh0TGluZSgpIHtcbiAgICAgIHZhciBsID0gcG9zLmxpbmUgKyBsaW5lRGlyO1xuICAgICAgaWYgKGwgPCBkb2MuZmlyc3QgfHwgbCA+PSBkb2MuZmlyc3QgKyBkb2Muc2l6ZSkgeyByZXR1cm4gZmFsc2UgfVxuICAgICAgcG9zID0gbmV3IFBvcyhsLCBwb3MuY2gsIHBvcy5zdGlja3kpO1xuICAgICAgcmV0dXJuIGxpbmVPYmogPSBnZXRMaW5lKGRvYywgbClcbiAgICB9XG4gICAgZnVuY3Rpb24gbW92ZU9uY2UoYm91bmRUb0xpbmUpIHtcbiAgICAgIHZhciBuZXh0O1xuICAgICAgaWYgKHZpc3VhbGx5KSB7XG4gICAgICAgIG5leHQgPSBtb3ZlVmlzdWFsbHkoZG9jLmNtLCBsaW5lT2JqLCBwb3MsIGRpcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXh0ID0gbW92ZUxvZ2ljYWxseShsaW5lT2JqLCBwb3MsIGRpcik7XG4gICAgICB9XG4gICAgICBpZiAobmV4dCA9PSBudWxsKSB7XG4gICAgICAgIGlmICghYm91bmRUb0xpbmUgJiYgZmluZE5leHRMaW5lKCkpXG4gICAgICAgICAgeyBwb3MgPSBlbmRPZkxpbmUodmlzdWFsbHksIGRvYy5jbSwgbGluZU9iaiwgcG9zLmxpbmUsIGxpbmVEaXIpOyB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICB7IHJldHVybiBmYWxzZSB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwb3MgPSBuZXh0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICBpZiAodW5pdCA9PSBcImNoYXJcIikge1xuICAgICAgbW92ZU9uY2UoKTtcbiAgICB9IGVsc2UgaWYgKHVuaXQgPT0gXCJjb2x1bW5cIikge1xuICAgICAgbW92ZU9uY2UodHJ1ZSk7XG4gICAgfSBlbHNlIGlmICh1bml0ID09IFwid29yZFwiIHx8IHVuaXQgPT0gXCJncm91cFwiKSB7XG4gICAgICB2YXIgc2F3VHlwZSA9IG51bGwsIGdyb3VwID0gdW5pdCA9PSBcImdyb3VwXCI7XG4gICAgICB2YXIgaGVscGVyID0gZG9jLmNtICYmIGRvYy5jbS5nZXRIZWxwZXIocG9zLCBcIndvcmRDaGFyc1wiKTtcbiAgICAgIGZvciAodmFyIGZpcnN0ID0gdHJ1ZTs7IGZpcnN0ID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKGRpciA8IDAgJiYgIW1vdmVPbmNlKCFmaXJzdCkpIHsgYnJlYWsgfVxuICAgICAgICB2YXIgY3VyID0gbGluZU9iai50ZXh0LmNoYXJBdChwb3MuY2gpIHx8IFwiXFxuXCI7XG4gICAgICAgIHZhciB0eXBlID0gaXNXb3JkQ2hhcihjdXIsIGhlbHBlcikgPyBcIndcIlxuICAgICAgICAgIDogZ3JvdXAgJiYgY3VyID09IFwiXFxuXCIgPyBcIm5cIlxuICAgICAgICAgIDogIWdyb3VwIHx8IC9cXHMvLnRlc3QoY3VyKSA/IG51bGxcbiAgICAgICAgICA6IFwicFwiO1xuICAgICAgICBpZiAoZ3JvdXAgJiYgIWZpcnN0ICYmICF0eXBlKSB7IHR5cGUgPSBcInNcIjsgfVxuICAgICAgICBpZiAoc2F3VHlwZSAmJiBzYXdUeXBlICE9IHR5cGUpIHtcbiAgICAgICAgICBpZiAoZGlyIDwgMCkge2RpciA9IDE7IG1vdmVPbmNlKCk7IHBvcy5zdGlja3kgPSBcImFmdGVyXCI7fVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZSkgeyBzYXdUeXBlID0gdHlwZTsgfVxuICAgICAgICBpZiAoZGlyID4gMCAmJiAhbW92ZU9uY2UoIWZpcnN0KSkgeyBicmVhayB9XG4gICAgICB9XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBza2lwQXRvbWljKGRvYywgcG9zLCBvbGRQb3MsIG9yaWdEaXIsIHRydWUpO1xuICAgIGlmIChlcXVhbEN1cnNvclBvcyhvbGRQb3MsIHJlc3VsdCkpIHsgcmVzdWx0LmhpdFNpZGUgPSB0cnVlOyB9XG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgLy8gRm9yIHJlbGF0aXZlIHZlcnRpY2FsIG1vdmVtZW50LiBEaXIgbWF5IGJlIC0xIG9yIDEuIFVuaXQgY2FuIGJlXG4gIC8vIFwicGFnZVwiIG9yIFwibGluZVwiLiBUaGUgcmVzdWx0aW5nIHBvc2l0aW9uIHdpbGwgaGF2ZSBhIGhpdFNpZGU9dHJ1ZVxuICAvLyBwcm9wZXJ0eSBpZiBpdCByZWFjaGVkIHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50LlxuICBmdW5jdGlvbiBmaW5kUG9zVihjbSwgcG9zLCBkaXIsIHVuaXQpIHtcbiAgICB2YXIgZG9jID0gY20uZG9jLCB4ID0gcG9zLmxlZnQsIHk7XG4gICAgaWYgKHVuaXQgPT0gXCJwYWdlXCIpIHtcbiAgICAgIHZhciBwYWdlU2l6ZSA9IE1hdGgubWluKGNtLmRpc3BsYXkud3JhcHBlci5jbGllbnRIZWlnaHQsIHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KTtcbiAgICAgIHZhciBtb3ZlQW1vdW50ID0gTWF0aC5tYXgocGFnZVNpemUgLSAuNSAqIHRleHRIZWlnaHQoY20uZGlzcGxheSksIDMpO1xuICAgICAgeSA9IChkaXIgPiAwID8gcG9zLmJvdHRvbSA6IHBvcy50b3ApICsgZGlyICogbW92ZUFtb3VudDtcblxuICAgIH0gZWxzZSBpZiAodW5pdCA9PSBcImxpbmVcIikge1xuICAgICAgeSA9IGRpciA+IDAgPyBwb3MuYm90dG9tICsgMyA6IHBvcy50b3AgLSAzO1xuICAgIH1cbiAgICB2YXIgdGFyZ2V0O1xuICAgIGZvciAoOzspIHtcbiAgICAgIHRhcmdldCA9IGNvb3Jkc0NoYXIoY20sIHgsIHkpO1xuICAgICAgaWYgKCF0YXJnZXQub3V0c2lkZSkgeyBicmVhayB9XG4gICAgICBpZiAoZGlyIDwgMCA/IHkgPD0gMCA6IHkgPj0gZG9jLmhlaWdodCkgeyB0YXJnZXQuaGl0U2lkZSA9IHRydWU7IGJyZWFrIH1cbiAgICAgIHkgKz0gZGlyICogNTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldFxuICB9XG5cbiAgLy8gQ09OVEVOVEVESVRBQkxFIElOUFVUIFNUWUxFXG5cbiAgdmFyIENvbnRlbnRFZGl0YWJsZUlucHV0ID0gZnVuY3Rpb24oY20pIHtcbiAgICB0aGlzLmNtID0gY207XG4gICAgdGhpcy5sYXN0QW5jaG9yTm9kZSA9IHRoaXMubGFzdEFuY2hvck9mZnNldCA9IHRoaXMubGFzdEZvY3VzTm9kZSA9IHRoaXMubGFzdEZvY3VzT2Zmc2V0ID0gbnVsbDtcbiAgICB0aGlzLnBvbGxpbmcgPSBuZXcgRGVsYXllZCgpO1xuICAgIHRoaXMuY29tcG9zaW5nID0gbnVsbDtcbiAgICB0aGlzLmdyYWNlUGVyaW9kID0gZmFsc2U7XG4gICAgdGhpcy5yZWFkRE9NVGltZW91dCA9IG51bGw7XG4gIH07XG5cbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoZGlzcGxheSkge1xuICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICB2YXIgaW5wdXQgPSB0aGlzLCBjbSA9IGlucHV0LmNtO1xuICAgIHZhciBkaXYgPSBpbnB1dC5kaXYgPSBkaXNwbGF5LmxpbmVEaXY7XG4gICAgZGlzYWJsZUJyb3dzZXJNYWdpYyhkaXYsIGNtLm9wdGlvbnMuc3BlbGxjaGVjaywgY20ub3B0aW9ucy5hdXRvY29ycmVjdCwgY20ub3B0aW9ucy5hdXRvY2FwaXRhbGl6ZSk7XG5cbiAgICBmdW5jdGlvbiBiZWxvbmdzVG9JbnB1dChlKSB7XG4gICAgICBmb3IgKHZhciB0ID0gZS50YXJnZXQ7IHQ7IHQgPSB0LnBhcmVudE5vZGUpIHtcbiAgICAgICAgaWYgKHQgPT0gZGl2KSB7IHJldHVybiB0cnVlIH1cbiAgICAgICAgaWYgKC9cXGJDb2RlTWlycm9yLSg/OmxpbmUpP3dpZGdldFxcYi8udGVzdCh0LmNsYXNzTmFtZSkpIHsgYnJlYWsgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgb24oZGl2LCBcInBhc3RlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoIWJlbG9uZ3NUb0lucHV0KGUpIHx8IHNpZ25hbERPTUV2ZW50KGNtLCBlKSB8fCBoYW5kbGVQYXN0ZShlLCBjbSkpIHsgcmV0dXJuIH1cbiAgICAgIC8vIElFIGRvZXNuJ3QgZmlyZSBpbnB1dCBldmVudHMsIHNvIHdlIHNjaGVkdWxlIGEgcmVhZCBmb3IgdGhlIHBhc3RlZCBjb250ZW50IGluIHRoaXMgd2F5XG4gICAgICBpZiAoaWVfdmVyc2lvbiA8PSAxMSkgeyBzZXRUaW1lb3V0KG9wZXJhdGlvbihjbSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcyQxLnVwZGF0ZUZyb21ET00oKTsgfSksIDIwKTsgfVxuICAgIH0pO1xuXG4gICAgb24oZGl2LCBcImNvbXBvc2l0aW9uc3RhcnRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMkMS5jb21wb3NpbmcgPSB7ZGF0YTogZS5kYXRhLCBkb25lOiBmYWxzZX07XG4gICAgfSk7XG4gICAgb24oZGl2LCBcImNvbXBvc2l0aW9udXBkYXRlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoIXRoaXMkMS5jb21wb3NpbmcpIHsgdGhpcyQxLmNvbXBvc2luZyA9IHtkYXRhOiBlLmRhdGEsIGRvbmU6IGZhbHNlfTsgfVxuICAgIH0pO1xuICAgIG9uKGRpdiwgXCJjb21wb3NpdGlvbmVuZFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKHRoaXMkMS5jb21wb3NpbmcpIHtcbiAgICAgICAgaWYgKGUuZGF0YSAhPSB0aGlzJDEuY29tcG9zaW5nLmRhdGEpIHsgdGhpcyQxLnJlYWRGcm9tRE9NU29vbigpOyB9XG4gICAgICAgIHRoaXMkMS5jb21wb3NpbmcuZG9uZSA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBvbihkaXYsIFwidG91Y2hzdGFydFwiLCBmdW5jdGlvbiAoKSB7IHJldHVybiBpbnB1dC5mb3JjZUNvbXBvc2l0aW9uRW5kKCk7IH0pO1xuXG4gICAgb24oZGl2LCBcImlucHV0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdGhpcyQxLmNvbXBvc2luZykgeyB0aGlzJDEucmVhZEZyb21ET01Tb29uKCk7IH1cbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIG9uQ29weUN1dChlKSB7XG4gICAgICBpZiAoIWJlbG9uZ3NUb0lucHV0KGUpIHx8IHNpZ25hbERPTUV2ZW50KGNtLCBlKSkgeyByZXR1cm4gfVxuICAgICAgaWYgKGNtLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHtcbiAgICAgICAgc2V0TGFzdENvcGllZCh7bGluZVdpc2U6IGZhbHNlLCB0ZXh0OiBjbS5nZXRTZWxlY3Rpb25zKCl9KTtcbiAgICAgICAgaWYgKGUudHlwZSA9PSBcImN1dFwiKSB7IGNtLnJlcGxhY2VTZWxlY3Rpb24oXCJcIiwgbnVsbCwgXCJjdXRcIik7IH1cbiAgICAgIH0gZWxzZSBpZiAoIWNtLm9wdGlvbnMubGluZVdpc2VDb3B5Q3V0KSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJhbmdlcyA9IGNvcHlhYmxlUmFuZ2VzKGNtKTtcbiAgICAgICAgc2V0TGFzdENvcGllZCh7bGluZVdpc2U6IHRydWUsIHRleHQ6IHJhbmdlcy50ZXh0fSk7XG4gICAgICAgIGlmIChlLnR5cGUgPT0gXCJjdXRcIikge1xuICAgICAgICAgIGNtLm9wZXJhdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjbS5zZXRTZWxlY3Rpb25zKHJhbmdlcy5yYW5nZXMsIDAsIHNlbF9kb250U2Nyb2xsKTtcbiAgICAgICAgICAgIGNtLnJlcGxhY2VTZWxlY3Rpb24oXCJcIiwgbnVsbCwgXCJjdXRcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChlLmNsaXBib2FyZERhdGEpIHtcbiAgICAgICAgZS5jbGlwYm9hcmREYXRhLmNsZWFyRGF0YSgpO1xuICAgICAgICB2YXIgY29udGVudCA9IGxhc3RDb3BpZWQudGV4dC5qb2luKFwiXFxuXCIpO1xuICAgICAgICAvLyBpT1MgZXhwb3NlcyB0aGUgY2xpcGJvYXJkIEFQSSwgYnV0IHNlZW1zIHRvIGRpc2NhcmQgY29udGVudCBpbnNlcnRlZCBpbnRvIGl0XG4gICAgICAgIGUuY2xpcGJvYXJkRGF0YS5zZXREYXRhKFwiVGV4dFwiLCBjb250ZW50KTtcbiAgICAgICAgaWYgKGUuY2xpcGJvYXJkRGF0YS5nZXREYXRhKFwiVGV4dFwiKSA9PSBjb250ZW50KSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBPbGQtZmFzaGlvbmVkIGJyaWVmbHktZm9jdXMtYS10ZXh0YXJlYSBoYWNrXG4gICAgICB2YXIga2x1ZGdlID0gaGlkZGVuVGV4dGFyZWEoKSwgdGUgPSBrbHVkZ2UuZmlyc3RDaGlsZDtcbiAgICAgIGNtLmRpc3BsYXkubGluZVNwYWNlLmluc2VydEJlZm9yZShrbHVkZ2UsIGNtLmRpc3BsYXkubGluZVNwYWNlLmZpcnN0Q2hpbGQpO1xuICAgICAgdGUudmFsdWUgPSBsYXN0Q29waWVkLnRleHQuam9pbihcIlxcblwiKTtcbiAgICAgIHZhciBoYWRGb2N1cyA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICBzZWxlY3RJbnB1dCh0ZSk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY20uZGlzcGxheS5saW5lU3BhY2UucmVtb3ZlQ2hpbGQoa2x1ZGdlKTtcbiAgICAgICAgaGFkRm9jdXMuZm9jdXMoKTtcbiAgICAgICAgaWYgKGhhZEZvY3VzID09IGRpdikgeyBpbnB1dC5zaG93UHJpbWFyeVNlbGVjdGlvbigpOyB9XG4gICAgICB9LCA1MCk7XG4gICAgfVxuICAgIG9uKGRpdiwgXCJjb3B5XCIsIG9uQ29weUN1dCk7XG4gICAgb24oZGl2LCBcImN1dFwiLCBvbkNvcHlDdXQpO1xuICB9O1xuXG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5zY3JlZW5SZWFkZXJMYWJlbENoYW5nZWQgPSBmdW5jdGlvbiAobGFiZWwpIHtcbiAgICAvLyBMYWJlbCBmb3Igc2NyZWVucmVhZGVycywgYWNjZXNzaWJpbGl0eVxuICAgIGlmKGxhYmVsKSB7XG4gICAgICB0aGlzLmRpdi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBsYWJlbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGl2LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpO1xuICAgIH1cbiAgfTtcblxuICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUucHJlcGFyZVNlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVzdWx0ID0gcHJlcGFyZVNlbGVjdGlvbih0aGlzLmNtLCBmYWxzZSk7XG4gICAgcmVzdWx0LmZvY3VzID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PSB0aGlzLmRpdjtcbiAgICByZXR1cm4gcmVzdWx0XG4gIH07XG5cbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLnNob3dTZWxlY3Rpb24gPSBmdW5jdGlvbiAoaW5mbywgdGFrZUZvY3VzKSB7XG4gICAgaWYgKCFpbmZvIHx8ICF0aGlzLmNtLmRpc3BsYXkudmlldy5sZW5ndGgpIHsgcmV0dXJuIH1cbiAgICBpZiAoaW5mby5mb2N1cyB8fCB0YWtlRm9jdXMpIHsgdGhpcy5zaG93UHJpbWFyeVNlbGVjdGlvbigpOyB9XG4gICAgdGhpcy5zaG93TXVsdGlwbGVTZWxlY3Rpb25zKGluZm8pO1xuICB9O1xuXG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5nZXRTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY20uZGlzcGxheS53cmFwcGVyLm93bmVyRG9jdW1lbnQuZ2V0U2VsZWN0aW9uKClcbiAgfTtcblxuICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUuc2hvd1ByaW1hcnlTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbCA9IHRoaXMuZ2V0U2VsZWN0aW9uKCksIGNtID0gdGhpcy5jbSwgcHJpbSA9IGNtLmRvYy5zZWwucHJpbWFyeSgpO1xuICAgIHZhciBmcm9tID0gcHJpbS5mcm9tKCksIHRvID0gcHJpbS50bygpO1xuXG4gICAgaWYgKGNtLmRpc3BsYXkudmlld1RvID09IGNtLmRpc3BsYXkudmlld0Zyb20gfHwgZnJvbS5saW5lID49IGNtLmRpc3BsYXkudmlld1RvIHx8IHRvLmxpbmUgPCBjbS5kaXNwbGF5LnZpZXdGcm9tKSB7XG4gICAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB2YXIgY3VyQW5jaG9yID0gZG9tVG9Qb3MoY20sIHNlbC5hbmNob3JOb2RlLCBzZWwuYW5jaG9yT2Zmc2V0KTtcbiAgICB2YXIgY3VyRm9jdXMgPSBkb21Ub1BvcyhjbSwgc2VsLmZvY3VzTm9kZSwgc2VsLmZvY3VzT2Zmc2V0KTtcbiAgICBpZiAoY3VyQW5jaG9yICYmICFjdXJBbmNob3IuYmFkICYmIGN1ckZvY3VzICYmICFjdXJGb2N1cy5iYWQgJiZcbiAgICAgICAgY21wKG1pblBvcyhjdXJBbmNob3IsIGN1ckZvY3VzKSwgZnJvbSkgPT0gMCAmJlxuICAgICAgICBjbXAobWF4UG9zKGN1ckFuY2hvciwgY3VyRm9jdXMpLCB0bykgPT0gMClcbiAgICAgIHsgcmV0dXJuIH1cblxuICAgIHZhciB2aWV3ID0gY20uZGlzcGxheS52aWV3O1xuICAgIHZhciBzdGFydCA9IChmcm9tLmxpbmUgPj0gY20uZGlzcGxheS52aWV3RnJvbSAmJiBwb3NUb0RPTShjbSwgZnJvbSkpIHx8XG4gICAgICAgIHtub2RlOiB2aWV3WzBdLm1lYXN1cmUubWFwWzJdLCBvZmZzZXQ6IDB9O1xuICAgIHZhciBlbmQgPSB0by5saW5lIDwgY20uZGlzcGxheS52aWV3VG8gJiYgcG9zVG9ET00oY20sIHRvKTtcbiAgICBpZiAoIWVuZCkge1xuICAgICAgdmFyIG1lYXN1cmUgPSB2aWV3W3ZpZXcubGVuZ3RoIC0gMV0ubWVhc3VyZTtcbiAgICAgIHZhciBtYXAgPSBtZWFzdXJlLm1hcHMgPyBtZWFzdXJlLm1hcHNbbWVhc3VyZS5tYXBzLmxlbmd0aCAtIDFdIDogbWVhc3VyZS5tYXA7XG4gICAgICBlbmQgPSB7bm9kZTogbWFwW21hcC5sZW5ndGggLSAxXSwgb2Zmc2V0OiBtYXBbbWFwLmxlbmd0aCAtIDJdIC0gbWFwW21hcC5sZW5ndGggLSAzXX07XG4gICAgfVxuXG4gICAgaWYgKCFzdGFydCB8fCAhZW5kKSB7XG4gICAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB2YXIgb2xkID0gc2VsLnJhbmdlQ291bnQgJiYgc2VsLmdldFJhbmdlQXQoMCksIHJuZztcbiAgICB0cnkgeyBybmcgPSByYW5nZShzdGFydC5ub2RlLCBzdGFydC5vZmZzZXQsIGVuZC5vZmZzZXQsIGVuZC5ub2RlKTsgfVxuICAgIGNhdGNoKGUpIHt9IC8vIE91ciBtb2RlbCBvZiB0aGUgRE9NIG1pZ2h0IGJlIG91dGRhdGVkLCBpbiB3aGljaCBjYXNlIHRoZSByYW5nZSB3ZSB0cnkgdG8gc2V0IGNhbiBiZSBpbXBvc3NpYmxlXG4gICAgaWYgKHJuZykge1xuICAgICAgaWYgKCFnZWNrbyAmJiBjbS5zdGF0ZS5mb2N1c2VkKSB7XG4gICAgICAgIHNlbC5jb2xsYXBzZShzdGFydC5ub2RlLCBzdGFydC5vZmZzZXQpO1xuICAgICAgICBpZiAoIXJuZy5jb2xsYXBzZWQpIHtcbiAgICAgICAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgICAgc2VsLmFkZFJhbmdlKHJuZyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgICAgc2VsLmFkZFJhbmdlKHJuZyk7XG4gICAgICB9XG4gICAgICBpZiAob2xkICYmIHNlbC5hbmNob3JOb2RlID09IG51bGwpIHsgc2VsLmFkZFJhbmdlKG9sZCk7IH1cbiAgICAgIGVsc2UgaWYgKGdlY2tvKSB7IHRoaXMuc3RhcnRHcmFjZVBlcmlvZCgpOyB9XG4gICAgfVxuICAgIHRoaXMucmVtZW1iZXJTZWxlY3Rpb24oKTtcbiAgfTtcblxuICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUuc3RhcnRHcmFjZVBlcmlvZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuZ3JhY2VQZXJpb2QpO1xuICAgIHRoaXMuZ3JhY2VQZXJpb2QgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMkMS5ncmFjZVBlcmlvZCA9IGZhbHNlO1xuICAgICAgaWYgKHRoaXMkMS5zZWxlY3Rpb25DaGFuZ2VkKCkpXG4gICAgICAgIHsgdGhpcyQxLmNtLm9wZXJhdGlvbihmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzJDEuY20uY3VyT3Auc2VsZWN0aW9uQ2hhbmdlZCA9IHRydWU7IH0pOyB9XG4gICAgfSwgMjApO1xuICB9O1xuXG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5zaG93TXVsdGlwbGVTZWxlY3Rpb25zID0gZnVuY3Rpb24gKGluZm8pIHtcbiAgICByZW1vdmVDaGlsZHJlbkFuZEFkZCh0aGlzLmNtLmRpc3BsYXkuY3Vyc29yRGl2LCBpbmZvLmN1cnNvcnMpO1xuICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKHRoaXMuY20uZGlzcGxheS5zZWxlY3Rpb25EaXYsIGluZm8uc2VsZWN0aW9uKTtcbiAgfTtcblxuICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUucmVtZW1iZXJTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbCA9IHRoaXMuZ2V0U2VsZWN0aW9uKCk7XG4gICAgdGhpcy5sYXN0QW5jaG9yTm9kZSA9IHNlbC5hbmNob3JOb2RlOyB0aGlzLmxhc3RBbmNob3JPZmZzZXQgPSBzZWwuYW5jaG9yT2Zmc2V0O1xuICAgIHRoaXMubGFzdEZvY3VzTm9kZSA9IHNlbC5mb2N1c05vZGU7IHRoaXMubGFzdEZvY3VzT2Zmc2V0ID0gc2VsLmZvY3VzT2Zmc2V0O1xuICB9O1xuXG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5zZWxlY3Rpb25JbkVkaXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsID0gdGhpcy5nZXRTZWxlY3Rpb24oKTtcbiAgICBpZiAoIXNlbC5yYW5nZUNvdW50KSB7IHJldHVybiBmYWxzZSB9XG4gICAgdmFyIG5vZGUgPSBzZWwuZ2V0UmFuZ2VBdCgwKS5jb21tb25BbmNlc3RvckNvbnRhaW5lcjtcbiAgICByZXR1cm4gY29udGFpbnModGhpcy5kaXYsIG5vZGUpXG4gIH07XG5cbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLmZvY3VzID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmNtLm9wdGlvbnMucmVhZE9ubHkgIT0gXCJub2N1cnNvclwiKSB7XG4gICAgICBpZiAoIXRoaXMuc2VsZWN0aW9uSW5FZGl0b3IoKSB8fCBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICE9IHRoaXMuZGl2KVxuICAgICAgICB7IHRoaXMuc2hvd1NlbGVjdGlvbih0aGlzLnByZXBhcmVTZWxlY3Rpb24oKSwgdHJ1ZSk7IH1cbiAgICAgIHRoaXMuZGl2LmZvY3VzKCk7XG4gICAgfVxuICB9O1xuICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUuYmx1ciA9IGZ1bmN0aW9uICgpIHsgdGhpcy5kaXYuYmx1cigpOyB9O1xuICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUuZ2V0RmllbGQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmRpdiB9O1xuXG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5zdXBwb3J0c1RvdWNoID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZSB9O1xuXG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5yZWNlaXZlZEZvY3VzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBpbnB1dCA9IHRoaXM7XG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uSW5FZGl0b3IoKSlcbiAgICAgIHsgdGhpcy5wb2xsU2VsZWN0aW9uKCk7IH1cbiAgICBlbHNlXG4gICAgICB7IHJ1bkluT3AodGhpcy5jbSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5wdXQuY20uY3VyT3Auc2VsZWN0aW9uQ2hhbmdlZCA9IHRydWU7IH0pOyB9XG5cbiAgICBmdW5jdGlvbiBwb2xsKCkge1xuICAgICAgaWYgKGlucHV0LmNtLnN0YXRlLmZvY3VzZWQpIHtcbiAgICAgICAgaW5wdXQucG9sbFNlbGVjdGlvbigpO1xuICAgICAgICBpbnB1dC5wb2xsaW5nLnNldChpbnB1dC5jbS5vcHRpb25zLnBvbGxJbnRlcnZhbCwgcG9sbCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucG9sbGluZy5zZXQodGhpcy5jbS5vcHRpb25zLnBvbGxJbnRlcnZhbCwgcG9sbCk7XG4gIH07XG5cbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLnNlbGVjdGlvbkNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbCA9IHRoaXMuZ2V0U2VsZWN0aW9uKCk7XG4gICAgcmV0dXJuIHNlbC5hbmNob3JOb2RlICE9IHRoaXMubGFzdEFuY2hvck5vZGUgfHwgc2VsLmFuY2hvck9mZnNldCAhPSB0aGlzLmxhc3RBbmNob3JPZmZzZXQgfHxcbiAgICAgIHNlbC5mb2N1c05vZGUgIT0gdGhpcy5sYXN0Rm9jdXNOb2RlIHx8IHNlbC5mb2N1c09mZnNldCAhPSB0aGlzLmxhc3RGb2N1c09mZnNldFxuICB9O1xuXG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5wb2xsU2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLnJlYWRET01UaW1lb3V0ICE9IG51bGwgfHwgdGhpcy5ncmFjZVBlcmlvZCB8fCAhdGhpcy5zZWxlY3Rpb25DaGFuZ2VkKCkpIHsgcmV0dXJuIH1cbiAgICB2YXIgc2VsID0gdGhpcy5nZXRTZWxlY3Rpb24oKSwgY20gPSB0aGlzLmNtO1xuICAgIC8vIE9uIEFuZHJvaWQgQ2hyb21lICh2ZXJzaW9uIDU2LCBhdCBsZWFzdCksIGJhY2tzcGFjaW5nIGludG8gYW5cbiAgICAvLyB1bmVkaXRhYmxlIGJsb2NrIGVsZW1lbnQgd2lsbCBwdXQgdGhlIGN1cnNvciBpbiB0aGF0IGVsZW1lbnQsXG4gICAgLy8gYW5kIHRoZW4sIGJlY2F1c2UgaXQncyBub3QgZWRpdGFibGUsIGhpZGUgdGhlIHZpcnR1YWwga2V5Ym9hcmQuXG4gICAgLy8gQmVjYXVzZSBBbmRyb2lkIGRvZXNuJ3QgYWxsb3cgdXMgdG8gYWN0dWFsbHkgZGV0ZWN0IGJhY2tzcGFjZVxuICAgIC8vIHByZXNzZXMgaW4gYSBzYW5lIHdheSwgdGhpcyBjb2RlIGNoZWNrcyBmb3Igd2hlbiB0aGF0IGhhcHBlbnNcbiAgICAvLyBhbmQgc2ltdWxhdGVzIGEgYmFja3NwYWNlIHByZXNzIGluIHRoaXMgY2FzZS5cbiAgICBpZiAoYW5kcm9pZCAmJiBjaHJvbWUgJiYgdGhpcy5jbS5kaXNwbGF5Lmd1dHRlclNwZWNzLmxlbmd0aCAmJiBpc0luR3V0dGVyKHNlbC5hbmNob3JOb2RlKSkge1xuICAgICAgdGhpcy5jbS50cmlnZ2VyT25LZXlEb3duKHt0eXBlOiBcImtleWRvd25cIiwga2V5Q29kZTogOCwgcHJldmVudERlZmF1bHQ6IE1hdGguYWJzfSk7XG4gICAgICB0aGlzLmJsdXIoKTtcbiAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpcy5jb21wb3NpbmcpIHsgcmV0dXJuIH1cbiAgICB0aGlzLnJlbWVtYmVyU2VsZWN0aW9uKCk7XG4gICAgdmFyIGFuY2hvciA9IGRvbVRvUG9zKGNtLCBzZWwuYW5jaG9yTm9kZSwgc2VsLmFuY2hvck9mZnNldCk7XG4gICAgdmFyIGhlYWQgPSBkb21Ub1BvcyhjbSwgc2VsLmZvY3VzTm9kZSwgc2VsLmZvY3VzT2Zmc2V0KTtcbiAgICBpZiAoYW5jaG9yICYmIGhlYWQpIHsgcnVuSW5PcChjbSwgZnVuY3Rpb24gKCkge1xuICAgICAgc2V0U2VsZWN0aW9uKGNtLmRvYywgc2ltcGxlU2VsZWN0aW9uKGFuY2hvciwgaGVhZCksIHNlbF9kb250U2Nyb2xsKTtcbiAgICAgIGlmIChhbmNob3IuYmFkIHx8IGhlYWQuYmFkKSB7IGNtLmN1ck9wLnNlbGVjdGlvbkNoYW5nZWQgPSB0cnVlOyB9XG4gICAgfSk7IH1cbiAgfTtcblxuICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUucG9sbENvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMucmVhZERPTVRpbWVvdXQgIT0gbnVsbCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVhZERPTVRpbWVvdXQpO1xuICAgICAgdGhpcy5yZWFkRE9NVGltZW91dCA9IG51bGw7XG4gICAgfVxuXG4gICAgdmFyIGNtID0gdGhpcy5jbSwgZGlzcGxheSA9IGNtLmRpc3BsYXksIHNlbCA9IGNtLmRvYy5zZWwucHJpbWFyeSgpO1xuICAgIHZhciBmcm9tID0gc2VsLmZyb20oKSwgdG8gPSBzZWwudG8oKTtcbiAgICBpZiAoZnJvbS5jaCA9PSAwICYmIGZyb20ubGluZSA+IGNtLmZpcnN0TGluZSgpKVxuICAgICAgeyBmcm9tID0gUG9zKGZyb20ubGluZSAtIDEsIGdldExpbmUoY20uZG9jLCBmcm9tLmxpbmUgLSAxKS5sZW5ndGgpOyB9XG4gICAgaWYgKHRvLmNoID09IGdldExpbmUoY20uZG9jLCB0by5saW5lKS50ZXh0Lmxlbmd0aCAmJiB0by5saW5lIDwgY20ubGFzdExpbmUoKSlcbiAgICAgIHsgdG8gPSBQb3ModG8ubGluZSArIDEsIDApOyB9XG4gICAgaWYgKGZyb20ubGluZSA8IGRpc3BsYXkudmlld0Zyb20gfHwgdG8ubGluZSA+IGRpc3BsYXkudmlld1RvIC0gMSkgeyByZXR1cm4gZmFsc2UgfVxuXG4gICAgdmFyIGZyb21JbmRleCwgZnJvbUxpbmUsIGZyb21Ob2RlO1xuICAgIGlmIChmcm9tLmxpbmUgPT0gZGlzcGxheS52aWV3RnJvbSB8fCAoZnJvbUluZGV4ID0gZmluZFZpZXdJbmRleChjbSwgZnJvbS5saW5lKSkgPT0gMCkge1xuICAgICAgZnJvbUxpbmUgPSBsaW5lTm8oZGlzcGxheS52aWV3WzBdLmxpbmUpO1xuICAgICAgZnJvbU5vZGUgPSBkaXNwbGF5LnZpZXdbMF0ubm9kZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZnJvbUxpbmUgPSBsaW5lTm8oZGlzcGxheS52aWV3W2Zyb21JbmRleF0ubGluZSk7XG4gICAgICBmcm9tTm9kZSA9IGRpc3BsYXkudmlld1tmcm9tSW5kZXggLSAxXS5ub2RlLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICB2YXIgdG9JbmRleCA9IGZpbmRWaWV3SW5kZXgoY20sIHRvLmxpbmUpO1xuICAgIHZhciB0b0xpbmUsIHRvTm9kZTtcbiAgICBpZiAodG9JbmRleCA9PSBkaXNwbGF5LnZpZXcubGVuZ3RoIC0gMSkge1xuICAgICAgdG9MaW5lID0gZGlzcGxheS52aWV3VG8gLSAxO1xuICAgICAgdG9Ob2RlID0gZGlzcGxheS5saW5lRGl2Lmxhc3RDaGlsZDtcbiAgICB9IGVsc2Uge1xuICAgICAgdG9MaW5lID0gbGluZU5vKGRpc3BsYXkudmlld1t0b0luZGV4ICsgMV0ubGluZSkgLSAxO1xuICAgICAgdG9Ob2RlID0gZGlzcGxheS52aWV3W3RvSW5kZXggKyAxXS5ub2RlLnByZXZpb3VzU2libGluZztcbiAgICB9XG5cbiAgICBpZiAoIWZyb21Ob2RlKSB7IHJldHVybiBmYWxzZSB9XG4gICAgdmFyIG5ld1RleHQgPSBjbS5kb2Muc3BsaXRMaW5lcyhkb21UZXh0QmV0d2VlbihjbSwgZnJvbU5vZGUsIHRvTm9kZSwgZnJvbUxpbmUsIHRvTGluZSkpO1xuICAgIHZhciBvbGRUZXh0ID0gZ2V0QmV0d2VlbihjbS5kb2MsIFBvcyhmcm9tTGluZSwgMCksIFBvcyh0b0xpbmUsIGdldExpbmUoY20uZG9jLCB0b0xpbmUpLnRleHQubGVuZ3RoKSk7XG4gICAgd2hpbGUgKG5ld1RleHQubGVuZ3RoID4gMSAmJiBvbGRUZXh0Lmxlbmd0aCA+IDEpIHtcbiAgICAgIGlmIChsc3QobmV3VGV4dCkgPT0gbHN0KG9sZFRleHQpKSB7IG5ld1RleHQucG9wKCk7IG9sZFRleHQucG9wKCk7IHRvTGluZS0tOyB9XG4gICAgICBlbHNlIGlmIChuZXdUZXh0WzBdID09IG9sZFRleHRbMF0pIHsgbmV3VGV4dC5zaGlmdCgpOyBvbGRUZXh0LnNoaWZ0KCk7IGZyb21MaW5lKys7IH1cbiAgICAgIGVsc2UgeyBicmVhayB9XG4gICAgfVxuXG4gICAgdmFyIGN1dEZyb250ID0gMCwgY3V0RW5kID0gMDtcbiAgICB2YXIgbmV3VG9wID0gbmV3VGV4dFswXSwgb2xkVG9wID0gb2xkVGV4dFswXSwgbWF4Q3V0RnJvbnQgPSBNYXRoLm1pbihuZXdUb3AubGVuZ3RoLCBvbGRUb3AubGVuZ3RoKTtcbiAgICB3aGlsZSAoY3V0RnJvbnQgPCBtYXhDdXRGcm9udCAmJiBuZXdUb3AuY2hhckNvZGVBdChjdXRGcm9udCkgPT0gb2xkVG9wLmNoYXJDb2RlQXQoY3V0RnJvbnQpKVxuICAgICAgeyArK2N1dEZyb250OyB9XG4gICAgdmFyIG5ld0JvdCA9IGxzdChuZXdUZXh0KSwgb2xkQm90ID0gbHN0KG9sZFRleHQpO1xuICAgIHZhciBtYXhDdXRFbmQgPSBNYXRoLm1pbihuZXdCb3QubGVuZ3RoIC0gKG5ld1RleHQubGVuZ3RoID09IDEgPyBjdXRGcm9udCA6IDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRCb3QubGVuZ3RoIC0gKG9sZFRleHQubGVuZ3RoID09IDEgPyBjdXRGcm9udCA6IDApKTtcbiAgICB3aGlsZSAoY3V0RW5kIDwgbWF4Q3V0RW5kICYmXG4gICAgICAgICAgIG5ld0JvdC5jaGFyQ29kZUF0KG5ld0JvdC5sZW5ndGggLSBjdXRFbmQgLSAxKSA9PSBvbGRCb3QuY2hhckNvZGVBdChvbGRCb3QubGVuZ3RoIC0gY3V0RW5kIC0gMSkpXG4gICAgICB7ICsrY3V0RW5kOyB9XG4gICAgLy8gVHJ5IHRvIG1vdmUgc3RhcnQgb2YgY2hhbmdlIHRvIHN0YXJ0IG9mIHNlbGVjdGlvbiBpZiBhbWJpZ3VvdXNcbiAgICBpZiAobmV3VGV4dC5sZW5ndGggPT0gMSAmJiBvbGRUZXh0Lmxlbmd0aCA9PSAxICYmIGZyb21MaW5lID09IGZyb20ubGluZSkge1xuICAgICAgd2hpbGUgKGN1dEZyb250ICYmIGN1dEZyb250ID4gZnJvbS5jaCAmJlxuICAgICAgICAgICAgIG5ld0JvdC5jaGFyQ29kZUF0KG5ld0JvdC5sZW5ndGggLSBjdXRFbmQgLSAxKSA9PSBvbGRCb3QuY2hhckNvZGVBdChvbGRCb3QubGVuZ3RoIC0gY3V0RW5kIC0gMSkpIHtcbiAgICAgICAgY3V0RnJvbnQtLTtcbiAgICAgICAgY3V0RW5kKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbmV3VGV4dFtuZXdUZXh0Lmxlbmd0aCAtIDFdID0gbmV3Qm90LnNsaWNlKDAsIG5ld0JvdC5sZW5ndGggLSBjdXRFbmQpLnJlcGxhY2UoL15cXHUyMDBiKy8sIFwiXCIpO1xuICAgIG5ld1RleHRbMF0gPSBuZXdUZXh0WzBdLnNsaWNlKGN1dEZyb250KS5yZXBsYWNlKC9cXHUyMDBiKyQvLCBcIlwiKTtcblxuICAgIHZhciBjaEZyb20gPSBQb3MoZnJvbUxpbmUsIGN1dEZyb250KTtcbiAgICB2YXIgY2hUbyA9IFBvcyh0b0xpbmUsIG9sZFRleHQubGVuZ3RoID8gbHN0KG9sZFRleHQpLmxlbmd0aCAtIGN1dEVuZCA6IDApO1xuICAgIGlmIChuZXdUZXh0Lmxlbmd0aCA+IDEgfHwgbmV3VGV4dFswXSB8fCBjbXAoY2hGcm9tLCBjaFRvKSkge1xuICAgICAgcmVwbGFjZVJhbmdlKGNtLmRvYywgbmV3VGV4dCwgY2hGcm9tLCBjaFRvLCBcIitpbnB1dFwiKTtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9O1xuXG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5lbnN1cmVQb2xsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mb3JjZUNvbXBvc2l0aW9uRW5kKCk7XG4gIH07XG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZvcmNlQ29tcG9zaXRpb25FbmQoKTtcbiAgfTtcbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLmZvcmNlQ29tcG9zaXRpb25FbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmNvbXBvc2luZykgeyByZXR1cm4gfVxuICAgIGNsZWFyVGltZW91dCh0aGlzLnJlYWRET01UaW1lb3V0KTtcbiAgICB0aGlzLmNvbXBvc2luZyA9IG51bGw7XG4gICAgdGhpcy51cGRhdGVGcm9tRE9NKCk7XG4gICAgdGhpcy5kaXYuYmx1cigpO1xuICAgIHRoaXMuZGl2LmZvY3VzKCk7XG4gIH07XG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5yZWFkRnJvbURPTVNvb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIGlmICh0aGlzLnJlYWRET01UaW1lb3V0ICE9IG51bGwpIHsgcmV0dXJuIH1cbiAgICB0aGlzLnJlYWRET01UaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzJDEucmVhZERPTVRpbWVvdXQgPSBudWxsO1xuICAgICAgaWYgKHRoaXMkMS5jb21wb3NpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMkMS5jb21wb3NpbmcuZG9uZSkgeyB0aGlzJDEuY29tcG9zaW5nID0gbnVsbDsgfVxuICAgICAgICBlbHNlIHsgcmV0dXJuIH1cbiAgICAgIH1cbiAgICAgIHRoaXMkMS51cGRhdGVGcm9tRE9NKCk7XG4gICAgfSwgODApO1xuICB9O1xuXG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS51cGRhdGVGcm9tRE9NID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICBpZiAodGhpcy5jbS5pc1JlYWRPbmx5KCkgfHwgIXRoaXMucG9sbENvbnRlbnQoKSlcbiAgICAgIHsgcnVuSW5PcCh0aGlzLmNtLCBmdW5jdGlvbiAoKSB7IHJldHVybiByZWdDaGFuZ2UodGhpcyQxLmNtKTsgfSk7IH1cbiAgfTtcblxuICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUuc2V0VW5lZGl0YWJsZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgbm9kZS5jb250ZW50RWRpdGFibGUgPSBcImZhbHNlXCI7XG4gIH07XG5cbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLm9uS2V5UHJlc3MgPSBmdW5jdGlvbiAoZSkge1xuICAgIGlmIChlLmNoYXJDb2RlID09IDAgfHwgdGhpcy5jb21wb3NpbmcpIHsgcmV0dXJuIH1cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKCF0aGlzLmNtLmlzUmVhZE9ubHkoKSlcbiAgICAgIHsgb3BlcmF0aW9uKHRoaXMuY20sIGFwcGx5VGV4dElucHV0KSh0aGlzLmNtLCBTdHJpbmcuZnJvbUNoYXJDb2RlKGUuY2hhckNvZGUgPT0gbnVsbCA/IGUua2V5Q29kZSA6IGUuY2hhckNvZGUpLCAwKTsgfVxuICB9O1xuXG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5yZWFkT25seUNoYW5nZWQgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgdGhpcy5kaXYuY29udGVudEVkaXRhYmxlID0gU3RyaW5nKHZhbCAhPSBcIm5vY3Vyc29yXCIpO1xuICB9O1xuXG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5vbkNvbnRleHRNZW51ID0gZnVuY3Rpb24gKCkge307XG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5yZXNldFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge307XG5cbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLm5lZWRzQ29udGVudEF0dHJpYnV0ZSA9IHRydWU7XG5cbiAgZnVuY3Rpb24gcG9zVG9ET00oY20sIHBvcykge1xuICAgIHZhciB2aWV3ID0gZmluZFZpZXdGb3JMaW5lKGNtLCBwb3MubGluZSk7XG4gICAgaWYgKCF2aWV3IHx8IHZpZXcuaGlkZGVuKSB7IHJldHVybiBudWxsIH1cbiAgICB2YXIgbGluZSA9IGdldExpbmUoY20uZG9jLCBwb3MubGluZSk7XG4gICAgdmFyIGluZm8gPSBtYXBGcm9tTGluZVZpZXcodmlldywgbGluZSwgcG9zLmxpbmUpO1xuXG4gICAgdmFyIG9yZGVyID0gZ2V0T3JkZXIobGluZSwgY20uZG9jLmRpcmVjdGlvbiksIHNpZGUgPSBcImxlZnRcIjtcbiAgICBpZiAob3JkZXIpIHtcbiAgICAgIHZhciBwYXJ0UG9zID0gZ2V0QmlkaVBhcnRBdChvcmRlciwgcG9zLmNoKTtcbiAgICAgIHNpZGUgPSBwYXJ0UG9zICUgMiA/IFwicmlnaHRcIiA6IFwibGVmdFwiO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gbm9kZUFuZE9mZnNldEluTGluZU1hcChpbmZvLm1hcCwgcG9zLmNoLCBzaWRlKTtcbiAgICByZXN1bHQub2Zmc2V0ID0gcmVzdWx0LmNvbGxhcHNlID09IFwicmlnaHRcIiA/IHJlc3VsdC5lbmQgOiByZXN1bHQuc3RhcnQ7XG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgZnVuY3Rpb24gaXNJbkd1dHRlcihub2RlKSB7XG4gICAgZm9yICh2YXIgc2NhbiA9IG5vZGU7IHNjYW47IHNjYW4gPSBzY2FuLnBhcmVudE5vZGUpXG4gICAgICB7IGlmICgvQ29kZU1pcnJvci1ndXR0ZXItd3JhcHBlci8udGVzdChzY2FuLmNsYXNzTmFtZSkpIHsgcmV0dXJuIHRydWUgfSB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBmdW5jdGlvbiBiYWRQb3MocG9zLCBiYWQpIHsgaWYgKGJhZCkgeyBwb3MuYmFkID0gdHJ1ZTsgfSByZXR1cm4gcG9zIH1cblxuICBmdW5jdGlvbiBkb21UZXh0QmV0d2VlbihjbSwgZnJvbSwgdG8sIGZyb21MaW5lLCB0b0xpbmUpIHtcbiAgICB2YXIgdGV4dCA9IFwiXCIsIGNsb3NpbmcgPSBmYWxzZSwgbGluZVNlcCA9IGNtLmRvYy5saW5lU2VwYXJhdG9yKCksIGV4dHJhTGluZWJyZWFrID0gZmFsc2U7XG4gICAgZnVuY3Rpb24gcmVjb2duaXplTWFya2VyKGlkKSB7IHJldHVybiBmdW5jdGlvbiAobWFya2VyKSB7IHJldHVybiBtYXJrZXIuaWQgPT0gaWQ7IH0gfVxuICAgIGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgICAgaWYgKGNsb3NpbmcpIHtcbiAgICAgICAgdGV4dCArPSBsaW5lU2VwO1xuICAgICAgICBpZiAoZXh0cmFMaW5lYnJlYWspIHsgdGV4dCArPSBsaW5lU2VwOyB9XG4gICAgICAgIGNsb3NpbmcgPSBleHRyYUxpbmVicmVhayA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBhZGRUZXh0KHN0cikge1xuICAgICAgaWYgKHN0cikge1xuICAgICAgICBjbG9zZSgpO1xuICAgICAgICB0ZXh0ICs9IHN0cjtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gd2Fsayhub2RlKSB7XG4gICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKSB7XG4gICAgICAgIHZhciBjbVRleHQgPSBub2RlLmdldEF0dHJpYnV0ZShcImNtLXRleHRcIik7XG4gICAgICAgIGlmIChjbVRleHQpIHtcbiAgICAgICAgICBhZGRUZXh0KGNtVGV4dCk7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1hcmtlcklEID0gbm9kZS5nZXRBdHRyaWJ1dGUoXCJjbS1tYXJrZXJcIiksIHJhbmdlO1xuICAgICAgICBpZiAobWFya2VySUQpIHtcbiAgICAgICAgICB2YXIgZm91bmQgPSBjbS5maW5kTWFya3MoUG9zKGZyb21MaW5lLCAwKSwgUG9zKHRvTGluZSArIDEsIDApLCByZWNvZ25pemVNYXJrZXIoK21hcmtlcklEKSk7XG4gICAgICAgICAgaWYgKGZvdW5kLmxlbmd0aCAmJiAocmFuZ2UgPSBmb3VuZFswXS5maW5kKDApKSlcbiAgICAgICAgICAgIHsgYWRkVGV4dChnZXRCZXR3ZWVuKGNtLmRvYywgcmFuZ2UuZnJvbSwgcmFuZ2UudG8pLmpvaW4obGluZVNlcCkpOyB9XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpID09IFwiZmFsc2VcIikgeyByZXR1cm4gfVxuICAgICAgICB2YXIgaXNCbG9jayA9IC9eKHByZXxkaXZ8cHxsaXx0YWJsZXxicikkL2kudGVzdChub2RlLm5vZGVOYW1lKTtcbiAgICAgICAgaWYgKCEvXmJyJC9pLnRlc3Qobm9kZS5ub2RlTmFtZSkgJiYgbm9kZS50ZXh0Q29udGVudC5sZW5ndGggPT0gMCkgeyByZXR1cm4gfVxuXG4gICAgICAgIGlmIChpc0Jsb2NrKSB7IGNsb3NlKCk7IH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgeyB3YWxrKG5vZGUuY2hpbGROb2Rlc1tpXSk7IH1cblxuICAgICAgICBpZiAoL14ocHJlfHApJC9pLnRlc3Qobm9kZS5ub2RlTmFtZSkpIHsgZXh0cmFMaW5lYnJlYWsgPSB0cnVlOyB9XG4gICAgICAgIGlmIChpc0Jsb2NrKSB7IGNsb3NpbmcgPSB0cnVlOyB9XG4gICAgICB9IGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT0gMykge1xuICAgICAgICBhZGRUZXh0KG5vZGUubm9kZVZhbHVlLnJlcGxhY2UoL1xcdTIwMGIvZywgXCJcIikucmVwbGFjZSgvXFx1MDBhMC9nLCBcIiBcIikpO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKDs7KSB7XG4gICAgICB3YWxrKGZyb20pO1xuICAgICAgaWYgKGZyb20gPT0gdG8pIHsgYnJlYWsgfVxuICAgICAgZnJvbSA9IGZyb20ubmV4dFNpYmxpbmc7XG4gICAgICBleHRyYUxpbmVicmVhayA9IGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGV4dFxuICB9XG5cbiAgZnVuY3Rpb24gZG9tVG9Qb3MoY20sIG5vZGUsIG9mZnNldCkge1xuICAgIHZhciBsaW5lTm9kZTtcbiAgICBpZiAobm9kZSA9PSBjbS5kaXNwbGF5LmxpbmVEaXYpIHtcbiAgICAgIGxpbmVOb2RlID0gY20uZGlzcGxheS5saW5lRGl2LmNoaWxkTm9kZXNbb2Zmc2V0XTtcbiAgICAgIGlmICghbGluZU5vZGUpIHsgcmV0dXJuIGJhZFBvcyhjbS5jbGlwUG9zKFBvcyhjbS5kaXNwbGF5LnZpZXdUbyAtIDEpKSwgdHJ1ZSkgfVxuICAgICAgbm9kZSA9IG51bGw7IG9mZnNldCA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGluZU5vZGUgPSBub2RlOzsgbGluZU5vZGUgPSBsaW5lTm9kZS5wYXJlbnROb2RlKSB7XG4gICAgICAgIGlmICghbGluZU5vZGUgfHwgbGluZU5vZGUgPT0gY20uZGlzcGxheS5saW5lRGl2KSB7IHJldHVybiBudWxsIH1cbiAgICAgICAgaWYgKGxpbmVOb2RlLnBhcmVudE5vZGUgJiYgbGluZU5vZGUucGFyZW50Tm9kZSA9PSBjbS5kaXNwbGF5LmxpbmVEaXYpIHsgYnJlYWsgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNtLmRpc3BsYXkudmlldy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGxpbmVWaWV3ID0gY20uZGlzcGxheS52aWV3W2ldO1xuICAgICAgaWYgKGxpbmVWaWV3Lm5vZGUgPT0gbGluZU5vZGUpXG4gICAgICAgIHsgcmV0dXJuIGxvY2F0ZU5vZGVJbkxpbmVWaWV3KGxpbmVWaWV3LCBub2RlLCBvZmZzZXQpIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBsb2NhdGVOb2RlSW5MaW5lVmlldyhsaW5lVmlldywgbm9kZSwgb2Zmc2V0KSB7XG4gICAgdmFyIHdyYXBwZXIgPSBsaW5lVmlldy50ZXh0LmZpcnN0Q2hpbGQsIGJhZCA9IGZhbHNlO1xuICAgIGlmICghbm9kZSB8fCAhY29udGFpbnMod3JhcHBlciwgbm9kZSkpIHsgcmV0dXJuIGJhZFBvcyhQb3MobGluZU5vKGxpbmVWaWV3LmxpbmUpLCAwKSwgdHJ1ZSkgfVxuICAgIGlmIChub2RlID09IHdyYXBwZXIpIHtcbiAgICAgIGJhZCA9IHRydWU7XG4gICAgICBub2RlID0gd3JhcHBlci5jaGlsZE5vZGVzW29mZnNldF07XG4gICAgICBvZmZzZXQgPSAwO1xuICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgIHZhciBsaW5lID0gbGluZVZpZXcucmVzdCA/IGxzdChsaW5lVmlldy5yZXN0KSA6IGxpbmVWaWV3LmxpbmU7XG4gICAgICAgIHJldHVybiBiYWRQb3MoUG9zKGxpbmVObyhsaW5lKSwgbGluZS50ZXh0Lmxlbmd0aCksIGJhZClcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgdGV4dE5vZGUgPSBub2RlLm5vZGVUeXBlID09IDMgPyBub2RlIDogbnVsbCwgdG9wTm9kZSA9IG5vZGU7XG4gICAgaWYgKCF0ZXh0Tm9kZSAmJiBub2RlLmNoaWxkTm9kZXMubGVuZ3RoID09IDEgJiYgbm9kZS5maXJzdENoaWxkLm5vZGVUeXBlID09IDMpIHtcbiAgICAgIHRleHROb2RlID0gbm9kZS5maXJzdENoaWxkO1xuICAgICAgaWYgKG9mZnNldCkgeyBvZmZzZXQgPSB0ZXh0Tm9kZS5ub2RlVmFsdWUubGVuZ3RoOyB9XG4gICAgfVxuICAgIHdoaWxlICh0b3BOb2RlLnBhcmVudE5vZGUgIT0gd3JhcHBlcikgeyB0b3BOb2RlID0gdG9wTm9kZS5wYXJlbnROb2RlOyB9XG4gICAgdmFyIG1lYXN1cmUgPSBsaW5lVmlldy5tZWFzdXJlLCBtYXBzID0gbWVhc3VyZS5tYXBzO1xuXG4gICAgZnVuY3Rpb24gZmluZCh0ZXh0Tm9kZSwgdG9wTm9kZSwgb2Zmc2V0KSB7XG4gICAgICBmb3IgKHZhciBpID0gLTE7IGkgPCAobWFwcyA/IG1hcHMubGVuZ3RoIDogMCk7IGkrKykge1xuICAgICAgICB2YXIgbWFwID0gaSA8IDAgPyBtZWFzdXJlLm1hcCA6IG1hcHNbaV07XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWFwLmxlbmd0aDsgaiArPSAzKSB7XG4gICAgICAgICAgdmFyIGN1ck5vZGUgPSBtYXBbaiArIDJdO1xuICAgICAgICAgIGlmIChjdXJOb2RlID09IHRleHROb2RlIHx8IGN1ck5vZGUgPT0gdG9wTm9kZSkge1xuICAgICAgICAgICAgdmFyIGxpbmUgPSBsaW5lTm8oaSA8IDAgPyBsaW5lVmlldy5saW5lIDogbGluZVZpZXcucmVzdFtpXSk7XG4gICAgICAgICAgICB2YXIgY2ggPSBtYXBbal0gKyBvZmZzZXQ7XG4gICAgICAgICAgICBpZiAob2Zmc2V0IDwgMCB8fCBjdXJOb2RlICE9IHRleHROb2RlKSB7IGNoID0gbWFwW2ogKyAob2Zmc2V0ID8gMSA6IDApXTsgfVxuICAgICAgICAgICAgcmV0dXJuIFBvcyhsaW5lLCBjaClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIGZvdW5kID0gZmluZCh0ZXh0Tm9kZSwgdG9wTm9kZSwgb2Zmc2V0KTtcbiAgICBpZiAoZm91bmQpIHsgcmV0dXJuIGJhZFBvcyhmb3VuZCwgYmFkKSB9XG5cbiAgICAvLyBGSVhNRSB0aGlzIGlzIGFsbCByZWFsbHkgc2hha3kuIG1pZ2h0IGhhbmRsZSB0aGUgZmV3IGNhc2VzIGl0IG5lZWRzIHRvIGhhbmRsZSwgYnV0IGxpa2VseSB0byBjYXVzZSBwcm9ibGVtc1xuICAgIGZvciAodmFyIGFmdGVyID0gdG9wTm9kZS5uZXh0U2libGluZywgZGlzdCA9IHRleHROb2RlID8gdGV4dE5vZGUubm9kZVZhbHVlLmxlbmd0aCAtIG9mZnNldCA6IDA7IGFmdGVyOyBhZnRlciA9IGFmdGVyLm5leHRTaWJsaW5nKSB7XG4gICAgICBmb3VuZCA9IGZpbmQoYWZ0ZXIsIGFmdGVyLmZpcnN0Q2hpbGQsIDApO1xuICAgICAgaWYgKGZvdW5kKVxuICAgICAgICB7IHJldHVybiBiYWRQb3MoUG9zKGZvdW5kLmxpbmUsIGZvdW5kLmNoIC0gZGlzdCksIGJhZCkgfVxuICAgICAgZWxzZVxuICAgICAgICB7IGRpc3QgKz0gYWZ0ZXIudGV4dENvbnRlbnQubGVuZ3RoOyB9XG4gICAgfVxuICAgIGZvciAodmFyIGJlZm9yZSA9IHRvcE5vZGUucHJldmlvdXNTaWJsaW5nLCBkaXN0JDEgPSBvZmZzZXQ7IGJlZm9yZTsgYmVmb3JlID0gYmVmb3JlLnByZXZpb3VzU2libGluZykge1xuICAgICAgZm91bmQgPSBmaW5kKGJlZm9yZSwgYmVmb3JlLmZpcnN0Q2hpbGQsIC0xKTtcbiAgICAgIGlmIChmb3VuZClcbiAgICAgICAgeyByZXR1cm4gYmFkUG9zKFBvcyhmb3VuZC5saW5lLCBmb3VuZC5jaCArIGRpc3QkMSksIGJhZCkgfVxuICAgICAgZWxzZVxuICAgICAgICB7IGRpc3QkMSArPSBiZWZvcmUudGV4dENvbnRlbnQubGVuZ3RoOyB9XG4gICAgfVxuICB9XG5cbiAgLy8gVEVYVEFSRUEgSU5QVVQgU1RZTEVcblxuICB2YXIgVGV4dGFyZWFJbnB1dCA9IGZ1bmN0aW9uKGNtKSB7XG4gICAgdGhpcy5jbSA9IGNtO1xuICAgIC8vIFNlZSBpbnB1dC5wb2xsIGFuZCBpbnB1dC5yZXNldFxuICAgIHRoaXMucHJldklucHV0ID0gXCJcIjtcblxuICAgIC8vIEZsYWcgdGhhdCBpbmRpY2F0ZXMgd2hldGhlciB3ZSBleHBlY3QgaW5wdXQgdG8gYXBwZWFyIHJlYWwgc29vblxuICAgIC8vIG5vdyAoYWZ0ZXIgc29tZSBldmVudCBsaWtlICdrZXlwcmVzcycgb3IgJ2lucHV0JykgYW5kIGFyZVxuICAgIC8vIHBvbGxpbmcgaW50ZW5zaXZlbHkuXG4gICAgdGhpcy5wb2xsaW5nRmFzdCA9IGZhbHNlO1xuICAgIC8vIFNlbGYtcmVzZXR0aW5nIHRpbWVvdXQgZm9yIHRoZSBwb2xsZXJcbiAgICB0aGlzLnBvbGxpbmcgPSBuZXcgRGVsYXllZCgpO1xuICAgIC8vIFVzZWQgdG8gd29yayBhcm91bmQgSUUgaXNzdWUgd2l0aCBzZWxlY3Rpb24gYmVpbmcgZm9yZ290dGVuIHdoZW4gZm9jdXMgbW92ZXMgYXdheSBmcm9tIHRleHRhcmVhXG4gICAgdGhpcy5oYXNTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICB0aGlzLmNvbXBvc2luZyA9IG51bGw7XG4gIH07XG5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChkaXNwbGF5KSB7XG4gICAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHZhciBpbnB1dCA9IHRoaXMsIGNtID0gdGhpcy5jbTtcbiAgICB0aGlzLmNyZWF0ZUZpZWxkKGRpc3BsYXkpO1xuICAgIHZhciB0ZSA9IHRoaXMudGV4dGFyZWE7XG5cbiAgICBkaXNwbGF5LndyYXBwZXIuaW5zZXJ0QmVmb3JlKHRoaXMud3JhcHBlciwgZGlzcGxheS53cmFwcGVyLmZpcnN0Q2hpbGQpO1xuXG4gICAgLy8gTmVlZGVkIHRvIGhpZGUgYmlnIGJsdWUgYmxpbmtpbmcgY3Vyc29yIG9uIE1vYmlsZSBTYWZhcmkgKGRvZXNuJ3Qgc2VlbSB0byB3b3JrIGluIGlPUyA4IGFueW1vcmUpXG4gICAgaWYgKGlvcykgeyB0ZS5zdHlsZS53aWR0aCA9IFwiMHB4XCI7IH1cblxuICAgIG9uKHRlLCBcImlucHV0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uID49IDkgJiYgdGhpcyQxLmhhc1NlbGVjdGlvbikgeyB0aGlzJDEuaGFzU2VsZWN0aW9uID0gbnVsbDsgfVxuICAgICAgaW5wdXQucG9sbCgpO1xuICAgIH0pO1xuXG4gICAgb24odGUsIFwicGFzdGVcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmIChzaWduYWxET01FdmVudChjbSwgZSkgfHwgaGFuZGxlUGFzdGUoZSwgY20pKSB7IHJldHVybiB9XG5cbiAgICAgIGNtLnN0YXRlLnBhc3RlSW5jb21pbmcgPSArbmV3IERhdGU7XG4gICAgICBpbnB1dC5mYXN0UG9sbCgpO1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gcHJlcGFyZUNvcHlDdXQoZSkge1xuICAgICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBlKSkgeyByZXR1cm4gfVxuICAgICAgaWYgKGNtLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHtcbiAgICAgICAgc2V0TGFzdENvcGllZCh7bGluZVdpc2U6IGZhbHNlLCB0ZXh0OiBjbS5nZXRTZWxlY3Rpb25zKCl9KTtcbiAgICAgIH0gZWxzZSBpZiAoIWNtLm9wdGlvbnMubGluZVdpc2VDb3B5Q3V0KSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJhbmdlcyA9IGNvcHlhYmxlUmFuZ2VzKGNtKTtcbiAgICAgICAgc2V0TGFzdENvcGllZCh7bGluZVdpc2U6IHRydWUsIHRleHQ6IHJhbmdlcy50ZXh0fSk7XG4gICAgICAgIGlmIChlLnR5cGUgPT0gXCJjdXRcIikge1xuICAgICAgICAgIGNtLnNldFNlbGVjdGlvbnMocmFuZ2VzLnJhbmdlcywgbnVsbCwgc2VsX2RvbnRTY3JvbGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlucHV0LnByZXZJbnB1dCA9IFwiXCI7XG4gICAgICAgICAgdGUudmFsdWUgPSByYW5nZXMudGV4dC5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgIHNlbGVjdElucHV0KHRlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGUudHlwZSA9PSBcImN1dFwiKSB7IGNtLnN0YXRlLmN1dEluY29taW5nID0gK25ldyBEYXRlOyB9XG4gICAgfVxuICAgIG9uKHRlLCBcImN1dFwiLCBwcmVwYXJlQ29weUN1dCk7XG4gICAgb24odGUsIFwiY29weVwiLCBwcmVwYXJlQ29weUN1dCk7XG5cbiAgICBvbihkaXNwbGF5LnNjcm9sbGVyLCBcInBhc3RlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoZXZlbnRJbldpZGdldChkaXNwbGF5LCBlKSB8fCBzaWduYWxET01FdmVudChjbSwgZSkpIHsgcmV0dXJuIH1cbiAgICAgIGlmICghdGUuZGlzcGF0Y2hFdmVudCkge1xuICAgICAgICBjbS5zdGF0ZS5wYXN0ZUluY29taW5nID0gK25ldyBEYXRlO1xuICAgICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgLy8gUGFzcyB0aGUgYHBhc3RlYCBldmVudCB0byB0aGUgdGV4dGFyZWEgc28gaXQncyBoYW5kbGVkIGJ5IGl0cyBldmVudCBsaXN0ZW5lci5cbiAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudChcInBhc3RlXCIpO1xuICAgICAgZXZlbnQuY2xpcGJvYXJkRGF0YSA9IGUuY2xpcGJvYXJkRGF0YTtcbiAgICAgIHRlLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIH0pO1xuXG4gICAgLy8gUHJldmVudCBub3JtYWwgc2VsZWN0aW9uIGluIHRoZSBlZGl0b3IgKHdlIGhhbmRsZSBvdXIgb3duKVxuICAgIG9uKGRpc3BsYXkubGluZVNwYWNlLCBcInNlbGVjdHN0YXJ0XCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoIWV2ZW50SW5XaWRnZXQoZGlzcGxheSwgZSkpIHsgZV9wcmV2ZW50RGVmYXVsdChlKTsgfVxuICAgIH0pO1xuXG4gICAgb24odGUsIFwiY29tcG9zaXRpb25zdGFydFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgc3RhcnQgPSBjbS5nZXRDdXJzb3IoXCJmcm9tXCIpO1xuICAgICAgaWYgKGlucHV0LmNvbXBvc2luZykgeyBpbnB1dC5jb21wb3NpbmcucmFuZ2UuY2xlYXIoKTsgfVxuICAgICAgaW5wdXQuY29tcG9zaW5nID0ge1xuICAgICAgICBzdGFydDogc3RhcnQsXG4gICAgICAgIHJhbmdlOiBjbS5tYXJrVGV4dChzdGFydCwgY20uZ2V0Q3Vyc29yKFwidG9cIiksIHtjbGFzc05hbWU6IFwiQ29kZU1pcnJvci1jb21wb3NpbmdcIn0pXG4gICAgICB9O1xuICAgIH0pO1xuICAgIG9uKHRlLCBcImNvbXBvc2l0aW9uZW5kXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChpbnB1dC5jb21wb3NpbmcpIHtcbiAgICAgICAgaW5wdXQucG9sbCgpO1xuICAgICAgICBpbnB1dC5jb21wb3NpbmcucmFuZ2UuY2xlYXIoKTtcbiAgICAgICAgaW5wdXQuY29tcG9zaW5nID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBUZXh0YXJlYUlucHV0LnByb3RvdHlwZS5jcmVhdGVGaWVsZCA9IGZ1bmN0aW9uIChfZGlzcGxheSkge1xuICAgIC8vIFdyYXBzIGFuZCBoaWRlcyBpbnB1dCB0ZXh0YXJlYVxuICAgIHRoaXMud3JhcHBlciA9IGhpZGRlblRleHRhcmVhKCk7XG4gICAgLy8gVGhlIHNlbWloaWRkZW4gdGV4dGFyZWEgdGhhdCBpcyBmb2N1c2VkIHdoZW4gdGhlIGVkaXRvciBpc1xuICAgIC8vIGZvY3VzZWQsIGFuZCByZWNlaXZlcyBpbnB1dC5cbiAgICB0aGlzLnRleHRhcmVhID0gdGhpcy53cmFwcGVyLmZpcnN0Q2hpbGQ7XG4gIH07XG5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUuc2NyZWVuUmVhZGVyTGFiZWxDaGFuZ2VkID0gZnVuY3Rpb24gKGxhYmVsKSB7XG4gICAgLy8gTGFiZWwgZm9yIHNjcmVlbnJlYWRlcnMsIGFjY2Vzc2liaWxpdHlcbiAgICBpZihsYWJlbCkge1xuICAgICAgdGhpcy50ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBsYWJlbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudGV4dGFyZWEucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWxhYmVsJyk7XG4gICAgfVxuICB9O1xuXG4gIFRleHRhcmVhSW5wdXQucHJvdG90eXBlLnByZXBhcmVTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gUmVkcmF3IHRoZSBzZWxlY3Rpb24gYW5kL29yIGN1cnNvclxuICAgIHZhciBjbSA9IHRoaXMuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBkb2MgPSBjbS5kb2M7XG4gICAgdmFyIHJlc3VsdCA9IHByZXBhcmVTZWxlY3Rpb24oY20pO1xuXG4gICAgLy8gTW92ZSB0aGUgaGlkZGVuIHRleHRhcmVhIG5lYXIgdGhlIGN1cnNvciB0byBwcmV2ZW50IHNjcm9sbGluZyBhcnRpZmFjdHNcbiAgICBpZiAoY20ub3B0aW9ucy5tb3ZlSW5wdXRXaXRoQ3Vyc29yKSB7XG4gICAgICB2YXIgaGVhZFBvcyA9IGN1cnNvckNvb3JkcyhjbSwgZG9jLnNlbC5wcmltYXJ5KCkuaGVhZCwgXCJkaXZcIik7XG4gICAgICB2YXIgd3JhcE9mZiA9IGRpc3BsYXkud3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgbGluZU9mZiA9IGRpc3BsYXkubGluZURpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHJlc3VsdC50ZVRvcCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGRpc3BsYXkud3JhcHBlci5jbGllbnRIZWlnaHQgLSAxMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRQb3MudG9wICsgbGluZU9mZi50b3AgLSB3cmFwT2ZmLnRvcCkpO1xuICAgICAgcmVzdWx0LnRlTGVmdCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGRpc3BsYXkud3JhcHBlci5jbGllbnRXaWR0aCAtIDEwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRQb3MubGVmdCArIGxpbmVPZmYubGVmdCAtIHdyYXBPZmYubGVmdCkpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRcbiAgfTtcblxuICBUZXh0YXJlYUlucHV0LnByb3RvdHlwZS5zaG93U2VsZWN0aW9uID0gZnVuY3Rpb24gKGRyYXduKSB7XG4gICAgdmFyIGNtID0gdGhpcy5jbSwgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG4gICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQoZGlzcGxheS5jdXJzb3JEaXYsIGRyYXduLmN1cnNvcnMpO1xuICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKGRpc3BsYXkuc2VsZWN0aW9uRGl2LCBkcmF3bi5zZWxlY3Rpb24pO1xuICAgIGlmIChkcmF3bi50ZVRvcCAhPSBudWxsKSB7XG4gICAgICB0aGlzLndyYXBwZXIuc3R5bGUudG9wID0gZHJhd24udGVUb3AgKyBcInB4XCI7XG4gICAgICB0aGlzLndyYXBwZXIuc3R5bGUubGVmdCA9IGRyYXduLnRlTGVmdCArIFwicHhcIjtcbiAgICB9XG4gIH07XG5cbiAgLy8gUmVzZXQgdGhlIGlucHV0IHRvIGNvcnJlc3BvbmQgdG8gdGhlIHNlbGVjdGlvbiAob3IgdG8gYmUgZW1wdHksXG4gIC8vIHdoZW4gbm90IHR5cGluZyBhbmQgbm90aGluZyBpcyBzZWxlY3RlZClcbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAodHlwaW5nKSB7XG4gICAgaWYgKHRoaXMuY29udGV4dE1lbnVQZW5kaW5nIHx8IHRoaXMuY29tcG9zaW5nKSB7IHJldHVybiB9XG4gICAgdmFyIGNtID0gdGhpcy5jbTtcbiAgICBpZiAoY20uc29tZXRoaW5nU2VsZWN0ZWQoKSkge1xuICAgICAgdGhpcy5wcmV2SW5wdXQgPSBcIlwiO1xuICAgICAgdmFyIGNvbnRlbnQgPSBjbS5nZXRTZWxlY3Rpb24oKTtcbiAgICAgIHRoaXMudGV4dGFyZWEudmFsdWUgPSBjb250ZW50O1xuICAgICAgaWYgKGNtLnN0YXRlLmZvY3VzZWQpIHsgc2VsZWN0SW5wdXQodGhpcy50ZXh0YXJlYSk7IH1cbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uID49IDkpIHsgdGhpcy5oYXNTZWxlY3Rpb24gPSBjb250ZW50OyB9XG4gICAgfSBlbHNlIGlmICghdHlwaW5nKSB7XG4gICAgICB0aGlzLnByZXZJbnB1dCA9IHRoaXMudGV4dGFyZWEudmFsdWUgPSBcIlwiO1xuICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPj0gOSkgeyB0aGlzLmhhc1NlbGVjdGlvbiA9IG51bGw7IH1cbiAgICB9XG4gIH07XG5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUuZ2V0RmllbGQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLnRleHRhcmVhIH07XG5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUuc3VwcG9ydHNUb3VjaCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZhbHNlIH07XG5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUuZm9jdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuY20ub3B0aW9ucy5yZWFkT25seSAhPSBcIm5vY3Vyc29yXCIgJiYgKCFtb2JpbGUgfHwgYWN0aXZlRWx0KCkgIT0gdGhpcy50ZXh0YXJlYSkpIHtcbiAgICAgIHRyeSB7IHRoaXMudGV4dGFyZWEuZm9jdXMoKTsgfVxuICAgICAgY2F0Y2ggKGUpIHt9IC8vIElFOCB3aWxsIHRocm93IGlmIHRoZSB0ZXh0YXJlYSBpcyBkaXNwbGF5OiBub25lIG9yIG5vdCBpbiBET01cbiAgICB9XG4gIH07XG5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUuYmx1ciA9IGZ1bmN0aW9uICgpIHsgdGhpcy50ZXh0YXJlYS5ibHVyKCk7IH07XG5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUucmVzZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLndyYXBwZXIuc3R5bGUudG9wID0gdGhpcy53cmFwcGVyLnN0eWxlLmxlZnQgPSAwO1xuICB9O1xuXG4gIFRleHRhcmVhSW5wdXQucHJvdG90eXBlLnJlY2VpdmVkRm9jdXMgPSBmdW5jdGlvbiAoKSB7IHRoaXMuc2xvd1BvbGwoKTsgfTtcblxuICAvLyBQb2xsIGZvciBpbnB1dCBjaGFuZ2VzLCB1c2luZyB0aGUgbm9ybWFsIHJhdGUgb2YgcG9sbGluZy4gVGhpc1xuICAvLyBydW5zIGFzIGxvbmcgYXMgdGhlIGVkaXRvciBpcyBmb2N1c2VkLlxuICBUZXh0YXJlYUlucHV0LnByb3RvdHlwZS5zbG93UG9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gICAgaWYgKHRoaXMucG9sbGluZ0Zhc3QpIHsgcmV0dXJuIH1cbiAgICB0aGlzLnBvbGxpbmcuc2V0KHRoaXMuY20ub3B0aW9ucy5wb2xsSW50ZXJ2YWwsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMkMS5wb2xsKCk7XG4gICAgICBpZiAodGhpcyQxLmNtLnN0YXRlLmZvY3VzZWQpIHsgdGhpcyQxLnNsb3dQb2xsKCk7IH1cbiAgICB9KTtcbiAgfTtcblxuICAvLyBXaGVuIGFuIGV2ZW50IGhhcyBqdXN0IGNvbWUgaW4gdGhhdCBpcyBsaWtlbHkgdG8gYWRkIG9yIGNoYW5nZVxuICAvLyBzb21ldGhpbmcgaW4gdGhlIGlucHV0IHRleHRhcmVhLCB3ZSBwb2xsIGZhc3RlciwgdG8gZW5zdXJlIHRoYXRcbiAgLy8gdGhlIGNoYW5nZSBhcHBlYXJzIG9uIHRoZSBzY3JlZW4gcXVpY2tseS5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUuZmFzdFBvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1pc3NlZCA9IGZhbHNlLCBpbnB1dCA9IHRoaXM7XG4gICAgaW5wdXQucG9sbGluZ0Zhc3QgPSB0cnVlO1xuICAgIGZ1bmN0aW9uIHAoKSB7XG4gICAgICB2YXIgY2hhbmdlZCA9IGlucHV0LnBvbGwoKTtcbiAgICAgIGlmICghY2hhbmdlZCAmJiAhbWlzc2VkKSB7bWlzc2VkID0gdHJ1ZTsgaW5wdXQucG9sbGluZy5zZXQoNjAsIHApO31cbiAgICAgIGVsc2Uge2lucHV0LnBvbGxpbmdGYXN0ID0gZmFsc2U7IGlucHV0LnNsb3dQb2xsKCk7fVxuICAgIH1cbiAgICBpbnB1dC5wb2xsaW5nLnNldCgyMCwgcCk7XG4gIH07XG5cbiAgLy8gUmVhZCBpbnB1dCBmcm9tIHRoZSB0ZXh0YXJlYSwgYW5kIHVwZGF0ZSB0aGUgZG9jdW1lbnQgdG8gbWF0Y2guXG4gIC8vIFdoZW4gc29tZXRoaW5nIGlzIHNlbGVjdGVkLCBpdCBpcyBwcmVzZW50IGluIHRoZSB0ZXh0YXJlYSwgYW5kXG4gIC8vIHNlbGVjdGVkICh1bmxlc3MgaXQgaXMgaHVnZSwgaW4gd2hpY2ggY2FzZSBhIHBsYWNlaG9sZGVyIGlzXG4gIC8vIHVzZWQpLiBXaGVuIG5vdGhpbmcgaXMgc2VsZWN0ZWQsIHRoZSBjdXJzb3Igc2l0cyBhZnRlciBwcmV2aW91c2x5XG4gIC8vIHNlZW4gdGV4dCAoY2FuIGJlIGVtcHR5KSwgd2hpY2ggaXMgc3RvcmVkIGluIHByZXZJbnB1dCAod2UgbXVzdFxuICAvLyBub3QgcmVzZXQgdGhlIHRleHRhcmVhIHdoZW4gdHlwaW5nLCBiZWNhdXNlIHRoYXQgYnJlYWtzIElNRSkuXG4gIFRleHRhcmVhSW5wdXQucHJvdG90eXBlLnBvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHZhciBjbSA9IHRoaXMuY20sIGlucHV0ID0gdGhpcy50ZXh0YXJlYSwgcHJldklucHV0ID0gdGhpcy5wcmV2SW5wdXQ7XG4gICAgLy8gU2luY2UgdGhpcyBpcyBjYWxsZWQgYSAqbG90KiwgdHJ5IHRvIGJhaWwgb3V0IGFzIGNoZWFwbHkgYXNcbiAgICAvLyBwb3NzaWJsZSB3aGVuIGl0IGlzIGNsZWFyIHRoYXQgbm90aGluZyBoYXBwZW5lZC4gaGFzU2VsZWN0aW9uXG4gICAgLy8gd2lsbCBiZSB0aGUgY2FzZSB3aGVuIHRoZXJlIGlzIGEgbG90IG9mIHRleHQgaW4gdGhlIHRleHRhcmVhLFxuICAgIC8vIGluIHdoaWNoIGNhc2UgcmVhZGluZyBpdHMgdmFsdWUgd291bGQgYmUgZXhwZW5zaXZlLlxuICAgIGlmICh0aGlzLmNvbnRleHRNZW51UGVuZGluZyB8fCAhY20uc3RhdGUuZm9jdXNlZCB8fFxuICAgICAgICAoaGFzU2VsZWN0aW9uKGlucHV0KSAmJiAhcHJldklucHV0ICYmICF0aGlzLmNvbXBvc2luZykgfHxcbiAgICAgICAgY20uaXNSZWFkT25seSgpIHx8IGNtLm9wdGlvbnMuZGlzYWJsZUlucHV0IHx8IGNtLnN0YXRlLmtleVNlcSlcbiAgICAgIHsgcmV0dXJuIGZhbHNlIH1cblxuICAgIHZhciB0ZXh0ID0gaW5wdXQudmFsdWU7XG4gICAgLy8gSWYgbm90aGluZyBjaGFuZ2VkLCBiYWlsLlxuICAgIGlmICh0ZXh0ID09IHByZXZJbnB1dCAmJiAhY20uc29tZXRoaW5nU2VsZWN0ZWQoKSkgeyByZXR1cm4gZmFsc2UgfVxuICAgIC8vIFdvcmsgYXJvdW5kIG5vbnNlbnNpY2FsIHNlbGVjdGlvbiByZXNldHRpbmcgaW4gSUU5LzEwLCBhbmRcbiAgICAvLyBpbmV4cGxpY2FibGUgYXBwZWFyYW5jZSBvZiBwcml2YXRlIGFyZWEgdW5pY29kZSBjaGFyYWN0ZXJzIG9uXG4gICAgLy8gc29tZSBrZXkgY29tYm9zIGluIE1hYyAoIzI2ODkpLlxuICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uID49IDkgJiYgdGhpcy5oYXNTZWxlY3Rpb24gPT09IHRleHQgfHxcbiAgICAgICAgbWFjICYmIC9bXFx1ZjcwMC1cXHVmN2ZmXS8udGVzdCh0ZXh0KSkge1xuICAgICAgY20uZGlzcGxheS5pbnB1dC5yZXNldCgpO1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKGNtLmRvYy5zZWwgPT0gY20uZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudSkge1xuICAgICAgdmFyIGZpcnN0ID0gdGV4dC5jaGFyQ29kZUF0KDApO1xuICAgICAgaWYgKGZpcnN0ID09IDB4MjAwYiAmJiAhcHJldklucHV0KSB7IHByZXZJbnB1dCA9IFwiXFx1MjAwYlwiOyB9XG4gICAgICBpZiAoZmlyc3QgPT0gMHgyMWRhKSB7IHRoaXMucmVzZXQoKTsgcmV0dXJuIHRoaXMuY20uZXhlY0NvbW1hbmQoXCJ1bmRvXCIpIH1cbiAgICB9XG4gICAgLy8gRmluZCB0aGUgcGFydCBvZiB0aGUgaW5wdXQgdGhhdCBpcyBhY3R1YWxseSBuZXdcbiAgICB2YXIgc2FtZSA9IDAsIGwgPSBNYXRoLm1pbihwcmV2SW5wdXQubGVuZ3RoLCB0ZXh0Lmxlbmd0aCk7XG4gICAgd2hpbGUgKHNhbWUgPCBsICYmIHByZXZJbnB1dC5jaGFyQ29kZUF0KHNhbWUpID09IHRleHQuY2hhckNvZGVBdChzYW1lKSkgeyArK3NhbWU7IH1cblxuICAgIHJ1bkluT3AoY20sIGZ1bmN0aW9uICgpIHtcbiAgICAgIGFwcGx5VGV4dElucHV0KGNtLCB0ZXh0LnNsaWNlKHNhbWUpLCBwcmV2SW5wdXQubGVuZ3RoIC0gc2FtZSxcbiAgICAgICAgICAgICAgICAgICAgIG51bGwsIHRoaXMkMS5jb21wb3NpbmcgPyBcIipjb21wb3NlXCIgOiBudWxsKTtcblxuICAgICAgLy8gRG9uJ3QgbGVhdmUgbG9uZyB0ZXh0IGluIHRoZSB0ZXh0YXJlYSwgc2luY2UgaXQgbWFrZXMgZnVydGhlciBwb2xsaW5nIHNsb3dcbiAgICAgIGlmICh0ZXh0Lmxlbmd0aCA+IDEwMDAgfHwgdGV4dC5pbmRleE9mKFwiXFxuXCIpID4gLTEpIHsgaW5wdXQudmFsdWUgPSB0aGlzJDEucHJldklucHV0ID0gXCJcIjsgfVxuICAgICAgZWxzZSB7IHRoaXMkMS5wcmV2SW5wdXQgPSB0ZXh0OyB9XG5cbiAgICAgIGlmICh0aGlzJDEuY29tcG9zaW5nKSB7XG4gICAgICAgIHRoaXMkMS5jb21wb3NpbmcucmFuZ2UuY2xlYXIoKTtcbiAgICAgICAgdGhpcyQxLmNvbXBvc2luZy5yYW5nZSA9IGNtLm1hcmtUZXh0KHRoaXMkMS5jb21wb3Npbmcuc3RhcnQsIGNtLmdldEN1cnNvcihcInRvXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjbGFzc05hbWU6IFwiQ29kZU1pcnJvci1jb21wb3NpbmdcIn0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB0cnVlXG4gIH07XG5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUuZW5zdXJlUG9sbGVkID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLnBvbGxpbmdGYXN0ICYmIHRoaXMucG9sbCgpKSB7IHRoaXMucG9sbGluZ0Zhc3QgPSBmYWxzZTsgfVxuICB9O1xuXG4gIFRleHRhcmVhSW5wdXQucHJvdG90eXBlLm9uS2V5UHJlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGllICYmIGllX3ZlcnNpb24gPj0gOSkgeyB0aGlzLmhhc1NlbGVjdGlvbiA9IG51bGw7IH1cbiAgICB0aGlzLmZhc3RQb2xsKCk7XG4gIH07XG5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUub25Db250ZXh0TWVudSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIGlucHV0ID0gdGhpcywgY20gPSBpbnB1dC5jbSwgZGlzcGxheSA9IGNtLmRpc3BsYXksIHRlID0gaW5wdXQudGV4dGFyZWE7XG4gICAgaWYgKGlucHV0LmNvbnRleHRNZW51UGVuZGluZykgeyBpbnB1dC5jb250ZXh0TWVudVBlbmRpbmcoKTsgfVxuICAgIHZhciBwb3MgPSBwb3NGcm9tTW91c2UoY20sIGUpLCBzY3JvbGxQb3MgPSBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcDtcbiAgICBpZiAoIXBvcyB8fCBwcmVzdG8pIHsgcmV0dXJuIH0gLy8gT3BlcmEgaXMgZGlmZmljdWx0LlxuXG4gICAgLy8gUmVzZXQgdGhlIGN1cnJlbnQgdGV4dCBzZWxlY3Rpb24gb25seSBpZiB0aGUgY2xpY2sgaXMgZG9uZSBvdXRzaWRlIG9mIHRoZSBzZWxlY3Rpb25cbiAgICAvLyBhbmQgJ3Jlc2V0U2VsZWN0aW9uT25Db250ZXh0TWVudScgb3B0aW9uIGlzIHRydWUuXG4gICAgdmFyIHJlc2V0ID0gY20ub3B0aW9ucy5yZXNldFNlbGVjdGlvbk9uQ29udGV4dE1lbnU7XG4gICAgaWYgKHJlc2V0ICYmIGNtLmRvYy5zZWwuY29udGFpbnMocG9zKSA9PSAtMSlcbiAgICAgIHsgb3BlcmF0aW9uKGNtLCBzZXRTZWxlY3Rpb24pKGNtLmRvYywgc2ltcGxlU2VsZWN0aW9uKHBvcyksIHNlbF9kb250U2Nyb2xsKTsgfVxuXG4gICAgdmFyIG9sZENTUyA9IHRlLnN0eWxlLmNzc1RleHQsIG9sZFdyYXBwZXJDU1MgPSBpbnB1dC53cmFwcGVyLnN0eWxlLmNzc1RleHQ7XG4gICAgdmFyIHdyYXBwZXJCb3ggPSBpbnB1dC53cmFwcGVyLm9mZnNldFBhcmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBpbnB1dC53cmFwcGVyLnN0eWxlLmNzc1RleHQgPSBcInBvc2l0aW9uOiBzdGF0aWNcIjtcbiAgICB0ZS5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjogYWJzb2x1dGU7IHdpZHRoOiAzMHB4OyBoZWlnaHQ6IDMwcHg7XFxuICAgICAgdG9wOiBcIiArIChlLmNsaWVudFkgLSB3cmFwcGVyQm94LnRvcCAtIDUpICsgXCJweDsgbGVmdDogXCIgKyAoZS5jbGllbnRYIC0gd3JhcHBlckJveC5sZWZ0IC0gNSkgKyBcInB4O1xcbiAgICAgIHotaW5kZXg6IDEwMDA7IGJhY2tncm91bmQ6IFwiICsgKGllID8gXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIC4wNSlcIiA6IFwidHJhbnNwYXJlbnRcIikgKyBcIjtcXG4gICAgICBvdXRsaW5lOiBub25lOyBib3JkZXItd2lkdGg6IDA7IG91dGxpbmU6IG5vbmU7IG92ZXJmbG93OiBoaWRkZW47IG9wYWNpdHk6IC4wNTsgZmlsdGVyOiBhbHBoYShvcGFjaXR5PTUpO1wiO1xuICAgIHZhciBvbGRTY3JvbGxZO1xuICAgIGlmICh3ZWJraXQpIHsgb2xkU2Nyb2xsWSA9IHdpbmRvdy5zY3JvbGxZOyB9IC8vIFdvcmsgYXJvdW5kIENocm9tZSBpc3N1ZSAoIzI3MTIpXG4gICAgZGlzcGxheS5pbnB1dC5mb2N1cygpO1xuICAgIGlmICh3ZWJraXQpIHsgd2luZG93LnNjcm9sbFRvKG51bGwsIG9sZFNjcm9sbFkpOyB9XG4gICAgZGlzcGxheS5pbnB1dC5yZXNldCgpO1xuICAgIC8vIEFkZHMgXCJTZWxlY3QgYWxsXCIgdG8gY29udGV4dCBtZW51IGluIEZGXG4gICAgaWYgKCFjbS5zb21ldGhpbmdTZWxlY3RlZCgpKSB7IHRlLnZhbHVlID0gaW5wdXQucHJldklucHV0ID0gXCIgXCI7IH1cbiAgICBpbnB1dC5jb250ZXh0TWVudVBlbmRpbmcgPSByZWhpZGU7XG4gICAgZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudSA9IGNtLmRvYy5zZWw7XG4gICAgY2xlYXJUaW1lb3V0KGRpc3BsYXkuZGV0ZWN0aW5nU2VsZWN0QWxsKTtcblxuICAgIC8vIFNlbGVjdC1hbGwgd2lsbCBiZSBncmV5ZWQgb3V0IGlmIHRoZXJlJ3Mgbm90aGluZyB0byBzZWxlY3QsIHNvXG4gICAgLy8gdGhpcyBhZGRzIGEgemVyby13aWR0aCBzcGFjZSBzbyB0aGF0IHdlIGNhbiBsYXRlciBjaGVjayB3aGV0aGVyXG4gICAgLy8gaXQgZ290IHNlbGVjdGVkLlxuICAgIGZ1bmN0aW9uIHByZXBhcmVTZWxlY3RBbGxIYWNrKCkge1xuICAgICAgaWYgKHRlLnNlbGVjdGlvblN0YXJ0ICE9IG51bGwpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkID0gY20uc29tZXRoaW5nU2VsZWN0ZWQoKTtcbiAgICAgICAgdmFyIGV4dHZhbCA9IFwiXFx1MjAwYlwiICsgKHNlbGVjdGVkID8gdGUudmFsdWUgOiBcIlwiKTtcbiAgICAgICAgdGUudmFsdWUgPSBcIlxcdTIxZGFcIjsgLy8gVXNlZCB0byBjYXRjaCBjb250ZXh0LW1lbnUgdW5kb1xuICAgICAgICB0ZS52YWx1ZSA9IGV4dHZhbDtcbiAgICAgICAgaW5wdXQucHJldklucHV0ID0gc2VsZWN0ZWQgPyBcIlwiIDogXCJcXHUyMDBiXCI7XG4gICAgICAgIHRlLnNlbGVjdGlvblN0YXJ0ID0gMTsgdGUuc2VsZWN0aW9uRW5kID0gZXh0dmFsLmxlbmd0aDtcbiAgICAgICAgLy8gUmUtc2V0IHRoaXMsIGluIGNhc2Ugc29tZSBvdGhlciBoYW5kbGVyIHRvdWNoZWQgdGhlXG4gICAgICAgIC8vIHNlbGVjdGlvbiBpbiB0aGUgbWVhbnRpbWUuXG4gICAgICAgIGRpc3BsYXkuc2VsRm9yQ29udGV4dE1lbnUgPSBjbS5kb2Muc2VsO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiByZWhpZGUoKSB7XG4gICAgICBpZiAoaW5wdXQuY29udGV4dE1lbnVQZW5kaW5nICE9IHJlaGlkZSkgeyByZXR1cm4gfVxuICAgICAgaW5wdXQuY29udGV4dE1lbnVQZW5kaW5nID0gZmFsc2U7XG4gICAgICBpbnB1dC53cmFwcGVyLnN0eWxlLmNzc1RleHQgPSBvbGRXcmFwcGVyQ1NTO1xuICAgICAgdGUuc3R5bGUuY3NzVGV4dCA9IG9sZENTUztcbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOSkgeyBkaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsVG9wKGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zKTsgfVxuXG4gICAgICAvLyBUcnkgdG8gZGV0ZWN0IHRoZSB1c2VyIGNob29zaW5nIHNlbGVjdC1hbGxcbiAgICAgIGlmICh0ZS5zZWxlY3Rpb25TdGFydCAhPSBudWxsKSB7XG4gICAgICAgIGlmICghaWUgfHwgKGllICYmIGllX3ZlcnNpb24gPCA5KSkgeyBwcmVwYXJlU2VsZWN0QWxsSGFjaygpOyB9XG4gICAgICAgIHZhciBpID0gMCwgcG9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudSA9PSBjbS5kb2Muc2VsICYmIHRlLnNlbGVjdGlvblN0YXJ0ID09IDAgJiZcbiAgICAgICAgICAgICAgdGUuc2VsZWN0aW9uRW5kID4gMCAmJiBpbnB1dC5wcmV2SW5wdXQgPT0gXCJcXHUyMDBiXCIpIHtcbiAgICAgICAgICAgIG9wZXJhdGlvbihjbSwgc2VsZWN0QWxsKShjbSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpKysgPCAxMCkge1xuICAgICAgICAgICAgZGlzcGxheS5kZXRlY3RpbmdTZWxlY3RBbGwgPSBzZXRUaW1lb3V0KHBvbGwsIDUwMCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRpc3BsYXkuc2VsRm9yQ29udGV4dE1lbnUgPSBudWxsO1xuICAgICAgICAgICAgZGlzcGxheS5pbnB1dC5yZXNldCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZGlzcGxheS5kZXRlY3RpbmdTZWxlY3RBbGwgPSBzZXRUaW1lb3V0KHBvbGwsIDIwMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGllICYmIGllX3ZlcnNpb24gPj0gOSkgeyBwcmVwYXJlU2VsZWN0QWxsSGFjaygpOyB9XG4gICAgaWYgKGNhcHR1cmVSaWdodENsaWNrKSB7XG4gICAgICBlX3N0b3AoZSk7XG4gICAgICB2YXIgbW91c2V1cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgb2ZmKHdpbmRvdywgXCJtb3VzZXVwXCIsIG1vdXNldXApO1xuICAgICAgICBzZXRUaW1lb3V0KHJlaGlkZSwgMjApO1xuICAgICAgfTtcbiAgICAgIG9uKHdpbmRvdywgXCJtb3VzZXVwXCIsIG1vdXNldXApO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRUaW1lb3V0KHJlaGlkZSwgNTApO1xuICAgIH1cbiAgfTtcblxuICBUZXh0YXJlYUlucHV0LnByb3RvdHlwZS5yZWFkT25seUNoYW5nZWQgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgaWYgKCF2YWwpIHsgdGhpcy5yZXNldCgpOyB9XG4gICAgdGhpcy50ZXh0YXJlYS5kaXNhYmxlZCA9IHZhbCA9PSBcIm5vY3Vyc29yXCI7XG4gIH07XG5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUuc2V0VW5lZGl0YWJsZSA9IGZ1bmN0aW9uICgpIHt9O1xuXG4gIFRleHRhcmVhSW5wdXQucHJvdG90eXBlLm5lZWRzQ29udGVudEF0dHJpYnV0ZSA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIGZyb21UZXh0QXJlYSh0ZXh0YXJlYSwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zID8gY29weU9iaihvcHRpb25zKSA6IHt9O1xuICAgIG9wdGlvbnMudmFsdWUgPSB0ZXh0YXJlYS52YWx1ZTtcbiAgICBpZiAoIW9wdGlvbnMudGFiaW5kZXggJiYgdGV4dGFyZWEudGFiSW5kZXgpXG4gICAgICB7IG9wdGlvbnMudGFiaW5kZXggPSB0ZXh0YXJlYS50YWJJbmRleDsgfVxuICAgIGlmICghb3B0aW9ucy5wbGFjZWhvbGRlciAmJiB0ZXh0YXJlYS5wbGFjZWhvbGRlcilcbiAgICAgIHsgb3B0aW9ucy5wbGFjZWhvbGRlciA9IHRleHRhcmVhLnBsYWNlaG9sZGVyOyB9XG4gICAgLy8gU2V0IGF1dG9mb2N1cyB0byB0cnVlIGlmIHRoaXMgdGV4dGFyZWEgaXMgZm9jdXNlZCwgb3IgaWYgaXQgaGFzXG4gICAgLy8gYXV0b2ZvY3VzIGFuZCBubyBvdGhlciBlbGVtZW50IGlzIGZvY3VzZWQuXG4gICAgaWYgKG9wdGlvbnMuYXV0b2ZvY3VzID09IG51bGwpIHtcbiAgICAgIHZhciBoYXNGb2N1cyA9IGFjdGl2ZUVsdCgpO1xuICAgICAgb3B0aW9ucy5hdXRvZm9jdXMgPSBoYXNGb2N1cyA9PSB0ZXh0YXJlYSB8fFxuICAgICAgICB0ZXh0YXJlYS5nZXRBdHRyaWJ1dGUoXCJhdXRvZm9jdXNcIikgIT0gbnVsbCAmJiBoYXNGb2N1cyA9PSBkb2N1bWVudC5ib2R5O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNhdmUoKSB7dGV4dGFyZWEudmFsdWUgPSBjbS5nZXRWYWx1ZSgpO31cblxuICAgIHZhciByZWFsU3VibWl0O1xuICAgIGlmICh0ZXh0YXJlYS5mb3JtKSB7XG4gICAgICBvbih0ZXh0YXJlYS5mb3JtLCBcInN1Ym1pdFwiLCBzYXZlKTtcbiAgICAgIC8vIERlcGxvcmFibGUgaGFjayB0byBtYWtlIHRoZSBzdWJtaXQgbWV0aG9kIGRvIHRoZSByaWdodCB0aGluZy5cbiAgICAgIGlmICghb3B0aW9ucy5sZWF2ZVN1Ym1pdE1ldGhvZEFsb25lKSB7XG4gICAgICAgIHZhciBmb3JtID0gdGV4dGFyZWEuZm9ybTtcbiAgICAgICAgcmVhbFN1Ym1pdCA9IGZvcm0uc3VibWl0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciB3cmFwcGVkU3VibWl0ID0gZm9ybS5zdWJtaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzYXZlKCk7XG4gICAgICAgICAgICBmb3JtLnN1Ym1pdCA9IHJlYWxTdWJtaXQ7XG4gICAgICAgICAgICBmb3JtLnN1Ym1pdCgpO1xuICAgICAgICAgICAgZm9ybS5zdWJtaXQgPSB3cmFwcGVkU3VibWl0O1xuICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2goZSkge31cbiAgICAgIH1cbiAgICB9XG5cbiAgICBvcHRpb25zLmZpbmlzaEluaXQgPSBmdW5jdGlvbiAoY20pIHtcbiAgICAgIGNtLnNhdmUgPSBzYXZlO1xuICAgICAgY20uZ2V0VGV4dEFyZWEgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0ZXh0YXJlYTsgfTtcbiAgICAgIGNtLnRvVGV4dEFyZWEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNtLnRvVGV4dEFyZWEgPSBpc05hTjsgLy8gUHJldmVudCB0aGlzIGZyb20gYmVpbmcgcmFuIHR3aWNlXG4gICAgICAgIHNhdmUoKTtcbiAgICAgICAgdGV4dGFyZWEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjbS5nZXRXcmFwcGVyRWxlbWVudCgpKTtcbiAgICAgICAgdGV4dGFyZWEuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICAgIGlmICh0ZXh0YXJlYS5mb3JtKSB7XG4gICAgICAgICAgb2ZmKHRleHRhcmVhLmZvcm0sIFwic3VibWl0XCIsIHNhdmUpO1xuICAgICAgICAgIGlmICghb3B0aW9ucy5sZWF2ZVN1Ym1pdE1ldGhvZEFsb25lICYmIHR5cGVvZiB0ZXh0YXJlYS5mb3JtLnN1Ym1pdCA9PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICB7IHRleHRhcmVhLmZvcm0uc3VibWl0ID0gcmVhbFN1Ym1pdDsgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH07XG5cbiAgICB0ZXh0YXJlYS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgdmFyIGNtID0gQ29kZU1pcnJvcihmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gdGV4dGFyZWEucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgdGV4dGFyZWEubmV4dFNpYmxpbmcpOyB9LFxuICAgICAgb3B0aW9ucyk7XG4gICAgcmV0dXJuIGNtXG4gIH1cblxuICBmdW5jdGlvbiBhZGRMZWdhY3lQcm9wcyhDb2RlTWlycm9yKSB7XG4gICAgQ29kZU1pcnJvci5vZmYgPSBvZmY7XG4gICAgQ29kZU1pcnJvci5vbiA9IG9uO1xuICAgIENvZGVNaXJyb3Iud2hlZWxFdmVudFBpeGVscyA9IHdoZWVsRXZlbnRQaXhlbHM7XG4gICAgQ29kZU1pcnJvci5Eb2MgPSBEb2M7XG4gICAgQ29kZU1pcnJvci5zcGxpdExpbmVzID0gc3BsaXRMaW5lc0F1dG87XG4gICAgQ29kZU1pcnJvci5jb3VudENvbHVtbiA9IGNvdW50Q29sdW1uO1xuICAgIENvZGVNaXJyb3IuZmluZENvbHVtbiA9IGZpbmRDb2x1bW47XG4gICAgQ29kZU1pcnJvci5pc1dvcmRDaGFyID0gaXNXb3JkQ2hhckJhc2ljO1xuICAgIENvZGVNaXJyb3IuUGFzcyA9IFBhc3M7XG4gICAgQ29kZU1pcnJvci5zaWduYWwgPSBzaWduYWw7XG4gICAgQ29kZU1pcnJvci5MaW5lID0gTGluZTtcbiAgICBDb2RlTWlycm9yLmNoYW5nZUVuZCA9IGNoYW5nZUVuZDtcbiAgICBDb2RlTWlycm9yLnNjcm9sbGJhck1vZGVsID0gc2Nyb2xsYmFyTW9kZWw7XG4gICAgQ29kZU1pcnJvci5Qb3MgPSBQb3M7XG4gICAgQ29kZU1pcnJvci5jbXBQb3MgPSBjbXA7XG4gICAgQ29kZU1pcnJvci5tb2RlcyA9IG1vZGVzO1xuICAgIENvZGVNaXJyb3IubWltZU1vZGVzID0gbWltZU1vZGVzO1xuICAgIENvZGVNaXJyb3IucmVzb2x2ZU1vZGUgPSByZXNvbHZlTW9kZTtcbiAgICBDb2RlTWlycm9yLmdldE1vZGUgPSBnZXRNb2RlO1xuICAgIENvZGVNaXJyb3IubW9kZUV4dGVuc2lvbnMgPSBtb2RlRXh0ZW5zaW9ucztcbiAgICBDb2RlTWlycm9yLmV4dGVuZE1vZGUgPSBleHRlbmRNb2RlO1xuICAgIENvZGVNaXJyb3IuY29weVN0YXRlID0gY29weVN0YXRlO1xuICAgIENvZGVNaXJyb3Iuc3RhcnRTdGF0ZSA9IHN0YXJ0U3RhdGU7XG4gICAgQ29kZU1pcnJvci5pbm5lck1vZGUgPSBpbm5lck1vZGU7XG4gICAgQ29kZU1pcnJvci5jb21tYW5kcyA9IGNvbW1hbmRzO1xuICAgIENvZGVNaXJyb3Iua2V5TWFwID0ga2V5TWFwO1xuICAgIENvZGVNaXJyb3Iua2V5TmFtZSA9IGtleU5hbWU7XG4gICAgQ29kZU1pcnJvci5pc01vZGlmaWVyS2V5ID0gaXNNb2RpZmllcktleTtcbiAgICBDb2RlTWlycm9yLmxvb2t1cEtleSA9IGxvb2t1cEtleTtcbiAgICBDb2RlTWlycm9yLm5vcm1hbGl6ZUtleU1hcCA9IG5vcm1hbGl6ZUtleU1hcDtcbiAgICBDb2RlTWlycm9yLlN0cmluZ1N0cmVhbSA9IFN0cmluZ1N0cmVhbTtcbiAgICBDb2RlTWlycm9yLlNoYXJlZFRleHRNYXJrZXIgPSBTaGFyZWRUZXh0TWFya2VyO1xuICAgIENvZGVNaXJyb3IuVGV4dE1hcmtlciA9IFRleHRNYXJrZXI7XG4gICAgQ29kZU1pcnJvci5MaW5lV2lkZ2V0ID0gTGluZVdpZGdldDtcbiAgICBDb2RlTWlycm9yLmVfcHJldmVudERlZmF1bHQgPSBlX3ByZXZlbnREZWZhdWx0O1xuICAgIENvZGVNaXJyb3IuZV9zdG9wUHJvcGFnYXRpb24gPSBlX3N0b3BQcm9wYWdhdGlvbjtcbiAgICBDb2RlTWlycm9yLmVfc3RvcCA9IGVfc3RvcDtcbiAgICBDb2RlTWlycm9yLmFkZENsYXNzID0gYWRkQ2xhc3M7XG4gICAgQ29kZU1pcnJvci5jb250YWlucyA9IGNvbnRhaW5zO1xuICAgIENvZGVNaXJyb3Iucm1DbGFzcyA9IHJtQ2xhc3M7XG4gICAgQ29kZU1pcnJvci5rZXlOYW1lcyA9IGtleU5hbWVzO1xuICB9XG5cbiAgLy8gRURJVE9SIENPTlNUUlVDVE9SXG5cbiAgZGVmaW5lT3B0aW9ucyhDb2RlTWlycm9yKTtcblxuICBhZGRFZGl0b3JNZXRob2RzKENvZGVNaXJyb3IpO1xuXG4gIC8vIFNldCB1cCBtZXRob2RzIG9uIENvZGVNaXJyb3IncyBwcm90b3R5cGUgdG8gcmVkaXJlY3QgdG8gdGhlIGVkaXRvcidzIGRvY3VtZW50LlxuICB2YXIgZG9udERlbGVnYXRlID0gXCJpdGVyIGluc2VydCByZW1vdmUgY29weSBnZXRFZGl0b3IgY29uc3RydWN0b3JcIi5zcGxpdChcIiBcIik7XG4gIGZvciAodmFyIHByb3AgaW4gRG9jLnByb3RvdHlwZSkgeyBpZiAoRG9jLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShwcm9wKSAmJiBpbmRleE9mKGRvbnREZWxlZ2F0ZSwgcHJvcCkgPCAwKVxuICAgIHsgQ29kZU1pcnJvci5wcm90b3R5cGVbcHJvcF0gPSAoZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7cmV0dXJuIG1ldGhvZC5hcHBseSh0aGlzLmRvYywgYXJndW1lbnRzKX1cbiAgICB9KShEb2MucHJvdG90eXBlW3Byb3BdKTsgfSB9XG5cbiAgZXZlbnRNaXhpbihEb2MpO1xuICBDb2RlTWlycm9yLmlucHV0U3R5bGVzID0ge1widGV4dGFyZWFcIjogVGV4dGFyZWFJbnB1dCwgXCJjb250ZW50ZWRpdGFibGVcIjogQ29udGVudEVkaXRhYmxlSW5wdXR9O1xuXG4gIC8vIEV4dHJhIGFyZ3VtZW50cyBhcmUgc3RvcmVkIGFzIHRoZSBtb2RlJ3MgZGVwZW5kZW5jaWVzLCB3aGljaCBpc1xuICAvLyB1c2VkIGJ5IChsZWdhY3kpIG1lY2hhbmlzbXMgbGlrZSBsb2FkbW9kZS5qcyB0byBhdXRvbWF0aWNhbGx5XG4gIC8vIGxvYWQgYSBtb2RlLiAoUHJlZmVycmVkIG1lY2hhbmlzbSBpcyB0aGUgcmVxdWlyZS9kZWZpbmUgY2FsbHMuKVxuICBDb2RlTWlycm9yLmRlZmluZU1vZGUgPSBmdW5jdGlvbihuYW1lLyosIG1vZGUsIFx1MjAyNiovKSB7XG4gICAgaWYgKCFDb2RlTWlycm9yLmRlZmF1bHRzLm1vZGUgJiYgbmFtZSAhPSBcIm51bGxcIikgeyBDb2RlTWlycm9yLmRlZmF1bHRzLm1vZGUgPSBuYW1lOyB9XG4gICAgZGVmaW5lTW9kZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lTUlNRSA9IGRlZmluZU1JTUU7XG5cbiAgLy8gTWluaW1hbCBkZWZhdWx0IG1vZGUuXG4gIENvZGVNaXJyb3IuZGVmaW5lTW9kZShcIm51bGxcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gKHt0b2tlbjogZnVuY3Rpb24gKHN0cmVhbSkgeyByZXR1cm4gc3RyZWFtLnNraXBUb0VuZCgpOyB9fSk7IH0pO1xuICBDb2RlTWlycm9yLmRlZmluZU1JTUUoXCJ0ZXh0L3BsYWluXCIsIFwibnVsbFwiKTtcblxuICAvLyBFWFRFTlNJT05TXG5cbiAgQ29kZU1pcnJvci5kZWZpbmVFeHRlbnNpb24gPSBmdW5jdGlvbiAobmFtZSwgZnVuYykge1xuICAgIENvZGVNaXJyb3IucHJvdG90eXBlW25hbWVdID0gZnVuYztcbiAgfTtcbiAgQ29kZU1pcnJvci5kZWZpbmVEb2NFeHRlbnNpb24gPSBmdW5jdGlvbiAobmFtZSwgZnVuYykge1xuICAgIERvYy5wcm90b3R5cGVbbmFtZV0gPSBmdW5jO1xuICB9O1xuXG4gIENvZGVNaXJyb3IuZnJvbVRleHRBcmVhID0gZnJvbVRleHRBcmVhO1xuXG4gIGFkZExlZ2FjeVByb3BzKENvZGVNaXJyb3IpO1xuXG4gIENvZGVNaXJyb3IudmVyc2lvbiA9IFwiNS41NS4wXCI7XG5cbiAgcmV0dXJuIENvZGVNaXJyb3I7XG5cbn0pKSk7XG4iLCAiLypcbiogRmlsZVNhdmVyLmpzXG4qIEEgc2F2ZUFzKCkgRmlsZVNhdmVyIGltcGxlbWVudGF0aW9uLlxuKlxuKiBCeSBFbGkgR3JleSwgaHR0cDovL2VsaWdyZXkuY29tXG4qXG4qIExpY2Vuc2UgOiBodHRwczovL2dpdGh1Yi5jb20vZWxpZ3JleS9GaWxlU2F2ZXIuanMvYmxvYi9tYXN0ZXIvTElDRU5TRS5tZCAoTUlUKVxuKiBzb3VyY2UgIDogaHR0cDovL3B1cmwuZWxpZ3JleS5jb20vZ2l0aHViL0ZpbGVTYXZlci5qc1xuKi9cblxuLy8gVGhlIG9uZSBhbmQgb25seSB3YXkgb2YgZ2V0dGluZyBnbG9iYWwgc2NvcGUgaW4gYWxsIGVudmlyb25tZW50c1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzMyNzcxODIvMTAwODk5OVxudmFyIF9nbG9iYWwgPSB0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cud2luZG93ID09PSB3aW5kb3dcbiAgPyB3aW5kb3cgOiB0eXBlb2Ygc2VsZiA9PT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmXG4gID8gc2VsZiA6IHR5cGVvZiBnbG9iYWwgPT09ICdvYmplY3QnICYmIGdsb2JhbC5nbG9iYWwgPT09IGdsb2JhbFxuICA/IGdsb2JhbFxuICA6IHRoaXNcblxuZnVuY3Rpb24gYm9tIChibG9iLCBvcHRzKSB7XG4gIGlmICh0eXBlb2Ygb3B0cyA9PT0gJ3VuZGVmaW5lZCcpIG9wdHMgPSB7IGF1dG9Cb206IGZhbHNlIH1cbiAgZWxzZSBpZiAodHlwZW9mIG9wdHMgIT09ICdvYmplY3QnKSB7XG4gICAgY29uc29sZS53YXJuKCdEZXByZWNhdGVkOiBFeHBlY3RlZCB0aGlyZCBhcmd1bWVudCB0byBiZSBhIG9iamVjdCcpXG4gICAgb3B0cyA9IHsgYXV0b0JvbTogIW9wdHMgfVxuICB9XG5cbiAgLy8gcHJlcGVuZCBCT00gZm9yIFVURi04IFhNTCBhbmQgdGV4dC8qIHR5cGVzIChpbmNsdWRpbmcgSFRNTClcbiAgLy8gbm90ZTogeW91ciBicm93c2VyIHdpbGwgYXV0b21hdGljYWxseSBjb252ZXJ0IFVURi0xNiBVK0ZFRkYgdG8gRUYgQkIgQkZcbiAgaWYgKG9wdHMuYXV0b0JvbSAmJiAvXlxccyooPzp0ZXh0XFwvXFxTKnxhcHBsaWNhdGlvblxcL3htbHxcXFMqXFwvXFxTKlxcK3htbClcXHMqOy4qY2hhcnNldFxccyo9XFxzKnV0Zi04L2kudGVzdChibG9iLnR5cGUpKSB7XG4gICAgcmV0dXJuIG5ldyBCbG9iKFtTdHJpbmcuZnJvbUNoYXJDb2RlKDB4RkVGRiksIGJsb2JdLCB7IHR5cGU6IGJsb2IudHlwZSB9KVxuICB9XG4gIHJldHVybiBibG9iXG59XG5cbmZ1bmN0aW9uIGRvd25sb2FkICh1cmwsIG5hbWUsIG9wdHMpIHtcbiAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXG4gIHhoci5vcGVuKCdHRVQnLCB1cmwpXG4gIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYidcbiAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBzYXZlQXMoeGhyLnJlc3BvbnNlLCBuYW1lLCBvcHRzKVxuICB9XG4gIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ2NvdWxkIG5vdCBkb3dubG9hZCBmaWxlJylcbiAgfVxuICB4aHIuc2VuZCgpXG59XG5cbmZ1bmN0aW9uIGNvcnNFbmFibGVkICh1cmwpIHtcbiAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXG4gIC8vIHVzZSBzeW5jIHRvIGF2b2lkIHBvcHVwIGJsb2NrZXJcbiAgeGhyLm9wZW4oJ0hFQUQnLCB1cmwsIGZhbHNlKVxuICB0cnkge1xuICAgIHhoci5zZW5kKClcbiAgfSBjYXRjaCAoZSkge31cbiAgcmV0dXJuIHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPD0gMjk5XG59XG5cbi8vIGBhLmNsaWNrKClgIGRvZXNuJ3Qgd29yayBmb3IgYWxsIGJyb3dzZXJzICgjNDY1KVxuZnVuY3Rpb24gY2xpY2sgKG5vZGUpIHtcbiAgdHJ5IHtcbiAgICBub2RlLmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoJ2NsaWNrJykpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ01vdXNlRXZlbnRzJylcbiAgICBldnQuaW5pdE1vdXNlRXZlbnQoJ2NsaWNrJywgdHJ1ZSwgdHJ1ZSwgd2luZG93LCAwLCAwLCAwLCA4MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgMjAsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCAwLCBudWxsKVxuICAgIG5vZGUuZGlzcGF0Y2hFdmVudChldnQpXG4gIH1cbn1cblxuLy8gRGV0ZWN0IFdlYlZpZXcgaW5zaWRlIGEgbmF0aXZlIG1hY09TIGFwcCBieSBydWxpbmcgb3V0IGFsbCBicm93c2Vyc1xuLy8gV2UganVzdCBuZWVkIHRvIGNoZWNrIGZvciAnU2FmYXJpJyBiZWNhdXNlIGFsbCBvdGhlciBicm93c2VycyAoYmVzaWRlcyBGaXJlZm94KSBpbmNsdWRlIHRoYXQgdG9vXG4vLyBodHRwczovL3d3dy53aGF0aXNteWJyb3dzZXIuY29tL2d1aWRlcy90aGUtbGF0ZXN0LXVzZXItYWdlbnQvbWFjb3NcbnZhciBpc01hY09TV2ViVmlldyA9IF9nbG9iYWwubmF2aWdhdG9yICYmIC9NYWNpbnRvc2gvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiYgL0FwcGxlV2ViS2l0Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmICEvU2FmYXJpLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXG5cbnZhciBzYXZlQXMgPSBfZ2xvYmFsLnNhdmVBcyB8fCAoXG4gIC8vIHByb2JhYmx5IGluIHNvbWUgd2ViIHdvcmtlclxuICAodHlwZW9mIHdpbmRvdyAhPT0gJ29iamVjdCcgfHwgd2luZG93ICE9PSBfZ2xvYmFsKVxuICAgID8gZnVuY3Rpb24gc2F2ZUFzICgpIHsgLyogbm9vcCAqLyB9XG5cbiAgLy8gVXNlIGRvd25sb2FkIGF0dHJpYnV0ZSBmaXJzdCBpZiBwb3NzaWJsZSAoIzE5MyBMdW1pYSBtb2JpbGUpIHVubGVzcyB0aGlzIGlzIGEgbWFjT1MgV2ViVmlld1xuICA6ICgnZG93bmxvYWQnIGluIEhUTUxBbmNob3JFbGVtZW50LnByb3RvdHlwZSAmJiAhaXNNYWNPU1dlYlZpZXcpXG4gID8gZnVuY3Rpb24gc2F2ZUFzIChibG9iLCBuYW1lLCBvcHRzKSB7XG4gICAgdmFyIFVSTCA9IF9nbG9iYWwuVVJMIHx8IF9nbG9iYWwud2Via2l0VVJMXG4gICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgICBuYW1lID0gbmFtZSB8fCBibG9iLm5hbWUgfHwgJ2Rvd25sb2FkJ1xuXG4gICAgYS5kb3dubG9hZCA9IG5hbWVcbiAgICBhLnJlbCA9ICdub29wZW5lcicgLy8gdGFibmFiYmluZ1xuXG4gICAgLy8gVE9ETzogZGV0ZWN0IGNocm9tZSBleHRlbnNpb25zICYgcGFja2FnZWQgYXBwc1xuICAgIC8vIGEudGFyZ2V0ID0gJ19ibGFuaydcblxuICAgIGlmICh0eXBlb2YgYmxvYiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIFN1cHBvcnQgcmVndWxhciBsaW5rc1xuICAgICAgYS5ocmVmID0gYmxvYlxuICAgICAgaWYgKGEub3JpZ2luICE9PSBsb2NhdGlvbi5vcmlnaW4pIHtcbiAgICAgICAgY29yc0VuYWJsZWQoYS5ocmVmKVxuICAgICAgICAgID8gZG93bmxvYWQoYmxvYiwgbmFtZSwgb3B0cylcbiAgICAgICAgICA6IGNsaWNrKGEsIGEudGFyZ2V0ID0gJ19ibGFuaycpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbGljayhhKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTdXBwb3J0IGJsb2JzXG4gICAgICBhLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgVVJMLnJldm9rZU9iamVjdFVSTChhLmhyZWYpIH0sIDRFNCkgLy8gNDBzXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgY2xpY2soYSkgfSwgMClcbiAgICB9XG4gIH1cblxuICAvLyBVc2UgbXNTYXZlT3JPcGVuQmxvYiBhcyBhIHNlY29uZCBhcHByb2FjaFxuICA6ICdtc1NhdmVPck9wZW5CbG9iJyBpbiBuYXZpZ2F0b3JcbiAgPyBmdW5jdGlvbiBzYXZlQXMgKGJsb2IsIG5hbWUsIG9wdHMpIHtcbiAgICBuYW1lID0gbmFtZSB8fCBibG9iLm5hbWUgfHwgJ2Rvd25sb2FkJ1xuXG4gICAgaWYgKHR5cGVvZiBibG9iID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKGNvcnNFbmFibGVkKGJsb2IpKSB7XG4gICAgICAgIGRvd25sb2FkKGJsb2IsIG5hbWUsIG9wdHMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxuICAgICAgICBhLmhyZWYgPSBibG9iXG4gICAgICAgIGEudGFyZ2V0ID0gJ19ibGFuaydcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGNsaWNrKGEpIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGJvbShibG9iLCBvcHRzKSwgbmFtZSlcbiAgICB9XG4gIH1cblxuICAvLyBGYWxsYmFjayB0byB1c2luZyBGaWxlUmVhZGVyIGFuZCBhIHBvcHVwXG4gIDogZnVuY3Rpb24gc2F2ZUFzIChibG9iLCBuYW1lLCBvcHRzLCBwb3B1cCkge1xuICAgIC8vIE9wZW4gYSBwb3B1cCBpbW1lZGlhdGVseSBkbyBnbyBhcm91bmQgcG9wdXAgYmxvY2tlclxuICAgIC8vIE1vc3RseSBvbmx5IGF2YWlsYWJsZSBvbiB1c2VyIGludGVyYWN0aW9uIGFuZCB0aGUgZmlsZVJlYWRlciBpcyBhc3luYyBzby4uLlxuICAgIHBvcHVwID0gcG9wdXAgfHwgb3BlbignJywgJ19ibGFuaycpXG4gICAgaWYgKHBvcHVwKSB7XG4gICAgICBwb3B1cC5kb2N1bWVudC50aXRsZSA9XG4gICAgICBwb3B1cC5kb2N1bWVudC5ib2R5LmlubmVyVGV4dCA9ICdkb3dubG9hZGluZy4uLidcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGJsb2IgPT09ICdzdHJpbmcnKSByZXR1cm4gZG93bmxvYWQoYmxvYiwgbmFtZSwgb3B0cylcblxuICAgIHZhciBmb3JjZSA9IGJsb2IudHlwZSA9PT0gJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSdcbiAgICB2YXIgaXNTYWZhcmkgPSAvY29uc3RydWN0b3IvaS50ZXN0KF9nbG9iYWwuSFRNTEVsZW1lbnQpIHx8IF9nbG9iYWwuc2FmYXJpXG4gICAgdmFyIGlzQ2hyb21lSU9TID0gL0NyaU9TXFwvW1xcZF0rLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXG5cbiAgICBpZiAoKGlzQ2hyb21lSU9TIHx8IChmb3JjZSAmJiBpc1NhZmFyaSkgfHwgaXNNYWNPU1dlYlZpZXcpICYmIHR5cGVvZiBGaWxlUmVhZGVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gU2FmYXJpIGRvZXNuJ3QgYWxsb3cgZG93bmxvYWRpbmcgb2YgYmxvYiBVUkxzXG4gICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHVybCA9IHJlYWRlci5yZXN1bHRcbiAgICAgICAgdXJsID0gaXNDaHJvbWVJT1MgPyB1cmwgOiB1cmwucmVwbGFjZSgvXmRhdGE6W147XSo7LywgJ2RhdGE6YXR0YWNobWVudC9maWxlOycpXG4gICAgICAgIGlmIChwb3B1cCkgcG9wdXAubG9jYXRpb24uaHJlZiA9IHVybFxuICAgICAgICBlbHNlIGxvY2F0aW9uID0gdXJsXG4gICAgICAgIHBvcHVwID0gbnVsbCAvLyByZXZlcnNlLXRhYm5hYmJpbmcgIzQ2MFxuICAgICAgfVxuICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYilcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIFVSTCA9IF9nbG9iYWwuVVJMIHx8IF9nbG9iYWwud2Via2l0VVJMXG4gICAgICB2YXIgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKVxuICAgICAgaWYgKHBvcHVwKSBwb3B1cC5sb2NhdGlvbiA9IHVybFxuICAgICAgZWxzZSBsb2NhdGlvbi5ocmVmID0gdXJsXG4gICAgICBwb3B1cCA9IG51bGwgLy8gcmV2ZXJzZS10YWJuYWJiaW5nICM0NjBcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCkgfSwgNEU0KSAvLyA0MHNcbiAgICB9XG4gIH1cbilcblxuX2dsb2JhbC5zYXZlQXMgPSBzYXZlQXMuc2F2ZUFzID0gc2F2ZUFzXG5cbmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuICBtb2R1bGUuZXhwb3J0cyA9IHNhdmVBcztcbn1cbiIsICJmdW5jdGlvbiBnZXRTaXRlVVJMKCkge1xyXG4gIHJldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZlxyXG4gICAgLnJlcGxhY2Uod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLCAnJylcclxuICAgIC5yZXBsYWNlKHdpbmRvdy5sb2NhdGlvbi5oYXNoLCAnJyk7XHJcbn1cclxuXHJcbmV4cG9ydCB7IGdldFNpdGVVUkwgfTtcclxuIiwgImZ1bmN0aW9uIGdldFJlZ2V4TWF0Y2hlcyhzdHJpbmcsIHJlZ2V4LCBpbmRleCA9IDEpIHtcclxuICBjb25zdCBtYXRjaGVzID0gW107XHJcbiAgbGV0IG1hdGNoO1xyXG5cclxuICB3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyhzdHJpbmcpKSkge1xyXG4gICAgbWF0Y2hlcy5wdXNoKG1hdGNoW2luZGV4XSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbWF0Y2hlcztcclxufVxyXG5cclxuZXhwb3J0IHsgZ2V0UmVnZXhNYXRjaGVzIH07XHJcbiIsICIvLyBUT0RPLUhJR0ggdGhpcyBzaG91bGQgYmUgZG9uZSBieSB0aGUgRmlsZSBjbGFzcyBwcm9iYWJseS5cclxuLy8gVE9ETy1ISUdIIG5vdCB3b3JraW5nIHdpdGggdW5wa2cuY29tIGltcG9ydHNcclxuLy8gcmVwbGFjZSB1cmxzIHRoYXQgc3RhcnQgd2l0aCAuLyBvciAuLi8gd2l0aCBhYnMgdXJsIGJhc2VkIG9uIGN1cnJlbnQgZGlyXHJcbi8vIGxlYXZlIGFsbCBvdGhlciB1cmxzIHVuY2hhbmdlZFxyXG5mdW5jdGlvbiBpbXBvcnRVUkxDb252ZXJ0ZXIodXJsLCBjdXJyZW50VVJMKSB7XHJcbiAgaWYgKHVybC5pbmRleE9mKCcuLycpID09PSAwKSByZXR1cm4gdXJsLnJlcGxhY2UoJy4vJywgY3VycmVudFVSTCk7XHJcblxyXG4gIGlmICh1cmwuaW5kZXhPZignLi4vJykgPT09IDApIHtcclxuICAgIGNvbnN0IGN1cnJlbnRVUkxQYXJ0cyA9IGN1cnJlbnRVUkwuc3BsaXQoJy8nKS5maWx0ZXIoU3RyaW5nKTtcclxuXHJcbiAgICB3aGlsZSAodXJsLmluZGV4T2YoJy4uLycpID09PSAwKSB7XHJcbiAgICAgIGlmIChjdXJyZW50VVJMUGFydHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICAgIGBDb3VsZCBub3QgcmVzb2x2ZSBpbXBvcnQgJHt1cmx9IHJlbGF0aXZlIHRvICR7Y3VycmVudFVSTH1gLFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICB9XHJcbiAgICAgIHVybCA9IHVybC5yZXBsYWNlKCcuLi8nLCAnJyk7XHJcblxyXG4gICAgICBjdXJyZW50VVJMUGFydHMucG9wKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGN1cnJlbnRVUkxQYXJ0cy5sZW5ndGhcclxuICAgICAgPyBjdXJyZW50VVJMUGFydHMuam9pbignLycpICsgJy8nICsgdXJsXHJcbiAgICAgIDogdXJsO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHVybDtcclxufVxyXG5cclxuZXhwb3J0IHsgaW1wb3J0VVJMQ29udmVydGVyIH07XHJcbiIsICJjb25zdCBjbGVhblVSTCA9ICh1cmwpID0+IHtcclxuICByZXR1cm4gdXJsXHJcbiAgICAucmVwbGFjZSgvKFxcLlxcLlxcLykvZywgJycpXHJcbiAgICAucmVwbGFjZSgvXihcXC5cXC8pLywgJycpXHJcbiAgICAucmVwbGFjZSgvXihcXC8pLywgJycpO1xyXG59XHJcblxyXG5leHBvcnQgeyBjbGVhblVSTCB9IiwgImltcG9ydCB7IGdldFNpdGVVUkwgfSBmcm9tIFwiLi4vdXRpbHMvZ2V0U2l0ZVVSTC5qc1wiO1xyXG5pbXBvcnQgeyBnZXRSZWdleE1hdGNoZXMgfSBmcm9tIFwiLi91dGlscy9nZXRSZWdleE1hdGNoZXMuanNcIjtcclxuaW1wb3J0IHsgaW1wb3J0VVJMQ29udmVydGVyIH0gZnJvbSBcIi4vdXRpbHMvaW1wb3J0VVJMQ29udmVydGVyLmpzXCI7XHJcbmltcG9ydCB7IGNsZWFuVVJMIH0gZnJvbSBcIi4vdXRpbHMvY2xlYW5VUkwuanNcIjtcclxuXHJcbmNsYXNzIEJsb2JVUkxHZW5lcmF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGZpbGVzLCBhc3NldHNMb2NhdGlvbiwgZW50cnkpIHtcclxuICAgIHRoaXMuZmlsZXMgPSBmaWxlcztcclxuICAgIHRoaXMuYXNzZXRzTG9jYXRpb24gPSBhc3NldHNMb2NhdGlvbjtcclxuICAgIHRoaXMudmVuZG9yTG9jYXRpb24gPSBhc3NldHNMb2NhdGlvbi5yZXBsYWNlKFwiYXNzZXRzXCIsIFwidmVuZG9yXCIpO1xyXG4gICAgdGhpcy5lbnRyeSA9IGVudHJ5O1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVTcmNVUkwoKSB7XHJcbiAgICBpZiAoIXRoaXMuZmlsZXNbdGhpcy5lbnRyeV0pIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlQmxvYlVSTChcImVudHJ5IGZpbGUgbm90IGZvdW5kIVwiLCBcInRleHQvaHRtbFwiKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUZpbGVVUkwodGhpcy5maWxlc1t0aGlzLmVudHJ5XSk7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUZpbGVVUkwoZmlsZSkge1xyXG4gICAgc3dpdGNoIChmaWxlLnR5cGUpIHtcclxuICAgICAgY2FzZSBcImh0bWxcIjpcclxuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUh0bWxVUkwoZmlsZSk7XHJcbiAgICAgIGNhc2UgXCJjc3NcIjpcclxuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUNzc1VSTChmaWxlKTtcclxuICAgICAgY2FzZSBcImpzXCI6XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVKc1VSTChmaWxlKTtcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVCbG9iVVJMKGBGaWxlIHR5cGUgXCIuJHtmaWxlLnR5cGV9IGlzIHVua25vd25gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdlbmVyYXRlSHRtbFVSTChmaWxlKSB7XHJcbiAgICBjb25zdCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XHJcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoZmlsZS5jb250ZW50cywgZmlsZS5taW1lVHlwZSk7XHJcblxyXG4gICAgY29uc3Qgc3R5bGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnbGlua1tyZWw9XCJzdHlsZXNoZWV0XCJdJyk7XHJcblxyXG4gICAgc3R5bGVzLmZvckVhY2goKHN0eWxlKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlZiA9IGNsZWFuVVJMKHN0eWxlLmdldEF0dHJpYnV0ZShcImhyZWZcIikpO1xyXG4gICAgICBjb25zdCBjc3NGaWxlID0gdGhpcy5maWxlc1tyZWZdO1xyXG4gICAgICBpZiAoY3NzRmlsZSkgc3R5bGUuaHJlZiA9IHRoaXMuZ2VuZXJhdGVGaWxlVVJMKGNzc0ZpbGUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3Qgc2NyaXB0VGFncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJzY3JpcHRcIik7XHJcblxyXG4gICAgc2NyaXB0VGFncy5mb3JFYWNoKChzY3JpcHQpID0+IHtcclxuICAgICAgY29uc3Qgc3JjID0gc2NyaXB0LmdldEF0dHJpYnV0ZShcInNyY1wiKTtcclxuICAgICAgaWYgKCFzcmMpIHJldHVybjtcclxuICAgICAgY29uc3QgcmVmID0gY2xlYW5VUkwoc3JjKTtcclxuICAgICAgY29uc3QganNGaWxlID0gdGhpcy5maWxlc1tyZWZdO1xyXG4gICAgICBpZiAoanNGaWxlKSBzY3JpcHQuc3JjID0gdGhpcy5nZW5lcmF0ZUZpbGVVUkwoanNGaWxlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHNlcmlhbGl6ZXIgPSBuZXcgWE1MU2VyaWFsaXplcigpO1xyXG5cclxuICAgIGNvbnN0IGh0bWxTdHJpbmcgPSBzZXJpYWxpemVyLnNlcmlhbGl6ZVRvU3RyaW5nKGRvY3VtZW50KTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVCbG9iVVJMKGh0bWxTdHJpbmcsIFwidGV4dC9odG1sXCIpO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDc3NVUkwoZmlsZSkge1xyXG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlQmxvYlVSTChmaWxlLmNvbnRlbnRzLCBmaWxlLm1pbWVUeXBlKTtcclxuICB9XHJcblxyXG4gIC8vIFRPRE8gaGFuZGxlIG11bHRpcGxlIGltcG9ydHMgZnJvbSB0aGUgc2FtZSBmaWxlXHJcbiAgZ2VuZXJhdGVKc1VSTChmaWxlKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VVJMID0gZmlsZS51cmwuc3Vic3RyaW5nKDAsIGZpbGUudXJsLmxhc3RJbmRleE9mKFwiL1wiKSArIDEpO1xyXG5cclxuICAgIGxldCB0ZXh0ID0gZmlsZS5jb250ZW50cztcclxuXHJcbiAgICBjb25zdCBpbXBvcnRVUkxzID0gZ2V0UmVnZXhNYXRjaGVzKHRleHQsIC9cXGJcXHMqZnJvbVxccypbJ1wiXSguKj8pWydcIl0vZywgMSk7XHJcblxyXG4gICAgY29uc3QgY29udmVydGVkVVJMcyA9IGltcG9ydFVSTHMubWFwKCh1cmwpID0+IHtcclxuICAgICAgaWYgKCF1cmwuaW5jbHVkZXMoXCJ0aHJlZVwiKSkge1xyXG4gICAgICAgIHJldHVybiBpbXBvcnRVUkxDb252ZXJ0ZXIodXJsLCBjdXJyZW50VVJMKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29udmVydGVkVVJMcy5mb3JFYWNoKCh1cmwsIGkpID0+IHtcclxuICAgICAgaWYgKHRoaXMuZmlsZXNbdXJsXSkge1xyXG4gICAgICAgIGNvbnN0IGJsb2JVUkwgPSB0aGlzLmdlbmVyYXRlRmlsZVVSTCh0aGlzLmZpbGVzW3VybF0pO1xyXG5cclxuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKGltcG9ydFVSTHNbaV0sIGJsb2JVUkwpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXh0ID0gdGhpcy5yZXBsYWNlQXNzZXRzVVJMcyh0ZXh0KTtcclxuICAgIHRleHQgPSB0aGlzLnJlcGxhY2VWZW5kb3JVUkxzKHRleHQpO1xyXG5cclxuICAgIGNvbnN0IHByb2Nlc3NlZFVSTCA9IHRoaXMuY3JlYXRlQmxvYlVSTCh0ZXh0LCBmaWxlLm1pbWVUeXBlKTtcclxuXHJcbiAgICByZXR1cm4gcHJvY2Vzc2VkVVJMO1xyXG4gIH1cclxuXHJcbiAgcmVwbGFjZVZlbmRvclVSTHModGV4dCkge1xyXG4gICAgbGV0IG5ld1RleHQgPSB0ZXh0LnJlcGxhY2UoXHJcbiAgICAgIC9mcm9tICd0aHJlZScvZ2ksXHJcbiAgICAgIGBmcm9tICcke2dldFNpdGVVUkwoKX0vc3RhdGljL3ZlbmRvci90aHJlZS9idWlsZC90aHJlZS5tb2R1bGUuanMnYFxyXG4gICAgKTtcclxuICAgIG5ld1RleHQgPSBuZXdUZXh0LnJlcGxhY2UoXHJcbiAgICAgIC9mcm9tICd0aHJlZS9naSxcclxuICAgICAgYGZyb20gJyR7Z2V0U2l0ZVVSTCgpfS9zdGF0aWMvdmVuZG9yL3RocmVlYFxyXG4gICAgKTtcclxuICAgIHJldHVybiBuZXdUZXh0O1xyXG4gIH1cclxuXHJcbiAgLy8gcmVwbGFjZSBhbGwgYXNzZXRzIHVybHMgd2l0aCBkaXJlY3QgdXJsIHRvIHRoZSBzZXJ2ZXJcclxuICAvLyBUT0RPOiB0aGlzIGZ1bmN0aW9uIGlzIGR1cGxpY2F0ZWQgaW4gRG93bmxvYWRlclxyXG4gIHJlcGxhY2VBc3NldHNVUkxzKHRleHQpIHtcclxuICAgIGNvbnN0IHNlcnZlclVSTCA9IHRleHQucmVwbGFjZSgvXFwvYXNzZXRzXFwvL2csIHRoaXMuYXNzZXRzTG9jYXRpb24pO1xyXG5cclxuICAgIHJldHVybiBzZXJ2ZXJVUkw7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVCbG9iVVJMKGNvZGUsIHR5cGUpIHtcclxuICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY29kZV0sIHtcclxuICAgICAgdHlwZSxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBCbG9iVVJMR2VuZXJhdG9yIH07XHJcbiIsICJpbXBvcnQgQ29kZU1pcnJvciBmcm9tICdjb2RlbWlycm9yJztcclxuXHJcbmltcG9ydCB7IGFkZEZ1bmN0aW9uc1RvQ29kZU1pcnJvciB9IGZyb20gJy4vdXRpbHMvYWRkRnVuY3Rpb25Ub0NvZGVNaXJyb3IuanMnO1xyXG5cclxuZnVuY3Rpb24gc2V0dXBDb2RlTWlycm9yKHRleHRBcmVhKSB7XHJcbiAgYWRkRnVuY3Rpb25zVG9Db2RlTWlycm9yKCk7XHJcblxyXG4gIHJldHVybiBDb2RlTWlycm9yLmZyb21UZXh0QXJlYSh0ZXh0QXJlYSwge1xyXG4gICAgLy8gYXV0b1JlZnJlc2g6IHRydWUsIC8vIGRvZXNuJ3Qgd29ya1xyXG4gICAgLy8gc2Nyb2xsYmFyU3R5bGU6ICduYXRpdmUnLFxyXG4gICAgLy8gc2Nyb2xsYmFyU3R5bGU6ICdzaW1wbGUnLFxyXG4gICAgLy8gc2Nyb2xsYmFyU3R5bGU6ICdudWxsJyxcclxuICAgIC8vIHRoZW1lOiAnYW1iaWFuY2UnLFxyXG4gICAgYXV0b0Nsb3NlQnJhY2tldHM6IHRydWUsXHJcbiAgICBhdXRvQ2xvc2VUYWdzOiB0cnVlLFxyXG4gICAgYXV0b0ZvY3VzOiB0cnVlLFxyXG4gICAgYXV0b0NvcnJlY3Q6IHRydWUsXHJcbiAgICBmbGF0dGVuU3BhbnM6IHRydWUsXHJcbiAgICBmb2xkR3V0dGVyOiB0cnVlLFxyXG4gICAgbGluZU51bWJlcnM6IHRydWUsXHJcbiAgICBsaW50OiB0cnVlLFxyXG4gICAgbWF0Y2hCcmFja2V0czogdHJ1ZSxcclxuICAgIG1vZGU6ICd0ZXh0L2h0bWwnLFxyXG4gICAgcG9sbEludGVydmFsOiAyMDAsXHJcbiAgICByZXNldFNlbGVjdGlvbk9uQ29udGV4dE1lbnU6IGZhbHNlLFxyXG4gICAgc2NyZWVuUmVhZGVyTGFiZWw6ICdJbmxpbmUgQ29kZSBFZGl0b3IgVGV4dCBBcmVhJyxcclxuICAgIHNob3dDdXJzb3JXaGVuU2VsZWN0aW5nOiBmYWxzZSxcclxuICAgIHNtYXJ0SW5kZW50OiB0cnVlLFxyXG4gICAgc3BlbGxjaGVjazogdHJ1ZSxcclxuICAgIHN0eWxlQWN0aXZlTGluZTogdHJ1ZSxcclxuICAgIHRhYkluZGV4OiAyLFxyXG4gICAgdGFiU2l6ZTogMixcclxuICAgIC8vIGxpbmVXcmFwcGluZzogdHJ1ZSxcclxuICAgIGV4dHJhS2V5czoge1xyXG4gICAgICAnQ3RybC1TcGFjZSc6ICdhdXRvY29tcGxldGUnLFxyXG4gICAgICAnQ21kLVNwYWNlJzogJ2F1dG9jb21wbGV0ZScsXHJcbiAgICAgICdDdHJsLVEnOiAoY20pID0+IHtcclxuICAgICAgICBjbS5mb2xkQ29kZShjbS5nZXRDdXJzb3IoKSk7XHJcbiAgICAgIH0sXHJcbiAgICAgICdDbWQtUSc6IChjbSkgPT4ge1xyXG4gICAgICAgIGNtLmZvbGRDb2RlKGNtLmdldEN1cnNvcigpKTtcclxuICAgICAgfSxcclxuICAgICAgJ0NtZC0vJzogJ3RvZ2dsZUNvbW1lbnQnLFxyXG4gICAgICAnQ3RybC0vJzogJ3RvZ2dsZUNvbW1lbnQnLFxyXG4gICAgICBGMTEoY20pIHtcclxuICAgICAgICBjbS5zZXRPcHRpb24oJ2Z1bGxTY3JlZW4nLCAhY20uZ2V0T3B0aW9uKCdmdWxsU2NyZWVuJykpO1xyXG4gICAgICB9LFxyXG4gICAgICBFc2MoY20pIHtcclxuICAgICAgICBpZiAoY20uZ2V0T3B0aW9uKCdmdWxsU2NyZWVuJykpXHJcbiAgICAgICAgICBjbS5zZXRPcHRpb24oJ2Z1bGxTY3JlZW4nLCBmYWxzZSk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgZ3V0dGVyczogW1xyXG4gICAgICAnQ29kZU1pcnJvci1saW5lbnVtYmVycycsXHJcbiAgICAgICdDb2RlTWlycm9yLWZvbGRndXR0ZXInLFxyXG4gICAgICAnQ29kZU1pcnJvci1saW50LW1hcmtlcnMnLFxyXG4gICAgXSxcclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IHsgc2V0dXBDb2RlTWlycm9yIH07XHJcbiIsICJpbXBvcnQgQ29kZU1pcnJvciBmcm9tICdjb2RlbWlycm9yJztcclxuLy8gaW1wb3J0IENvZGVNaXJyb3IgZnJvbSAnLi4vdmVuZG9yL2NvZGVtaXJyb3IvY29kZW1pcnJvci5qcyc7XHJcblxyXG4vLyBpbXBvcnQgeyBhZGRNZXRhTW9kZSB9IGZyb20gJy4uL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9tb2Rlcy9tZXRhLmpzJztcclxuaW1wb3J0IHsgYWRkSFRNTE1peGVkTW9kZSB9IGZyb20gJy4uL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9tb2Rlcy9odG1sbWl4ZWQvaHRtbG1peGVkLmpzJztcclxuaW1wb3J0IHsgYWRkQ1NTTW9kZSB9IGZyb20gJy4uL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9tb2Rlcy9jc3MvY3NzLmpzJztcclxuaW1wb3J0IHsgYWRkWE1MTW9kZSB9IGZyb20gJy4uL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9tb2Rlcy94bWwveG1sLmpzJztcclxuaW1wb3J0IHsgYWRkSmF2YVNjcmlwdE1vZGUgfSBmcm9tICcuLi92ZW5kb3IvY3VzdG9tL0NvZGVNaXJyb3JFUzYvbW9kZXMvamF2YXNjcmlwdC9qYXZhc2NyaXB0LmpzJztcclxuXHJcbi8vIGltcG9ydCB7IGFkZFNpbXBsZVNjcm9sbGJhciB9IGZyb20gJy4uL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9hZGRvbnMvc2Nyb2xsL3NpbXBsZXNjcm9sbGJhcnMuanMnO1xyXG5pbXBvcnQgeyBhZGRBbm5vdGF0ZVNjcm9sbGJhciB9IGZyb20gJy4uL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9hZGRvbnMvc2Nyb2xsL2Fubm90YXRlc2Nyb2xsYmFyLmpzJztcclxuXHJcbmltcG9ydCB7IGFkZENvbW1lbnQgfSBmcm9tICcuLi92ZW5kb3IvY3VzdG9tL0NvZGVNaXJyb3JFUzYvYWRkb25zL2NvbW1lbnQvY29tbWVudC5qcyc7XHJcbmltcG9ydCB7IGFkZEZ1bGxzY3JlZW4gfSBmcm9tICcuLi92ZW5kb3IvY3VzdG9tL0NvZGVNaXJyb3JFUzYvYWRkb25zL2Rpc3BsYXkvZnVsbHNjcmVlbi5qcyc7XHJcbi8vIGltcG9ydCB7IGFkZEF1dG9yZWZyZXNoIH0gZnJvbSAnLi4vdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L2FkZG9ucy9kaXNwbGF5L2F1dG9yZWZyZXNoLmpzJztcclxuXHJcbmltcG9ydCB7IGFkZEFjdGl2ZUxpbmUgfSBmcm9tICcuLi92ZW5kb3IvY3VzdG9tL0NvZGVNaXJyb3JFUzYvYWRkb25zL3NlbGVjdGlvbi9hY3RpdmUtbGluZS5qcyc7XHJcblxyXG5pbXBvcnQgeyBhZGREaWFsb2cgfSBmcm9tICcuLi92ZW5kb3IvY3VzdG9tL0NvZGVNaXJyb3JFUzYvYWRkb25zL2RpYWxvZy9kaWFsb2cuanMnO1xyXG5pbXBvcnQgeyBhZGRKdW1wdG9saW5lIH0gZnJvbSAnLi4vdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L2FkZG9ucy9zZWFyY2gvanVtcC10by1saW5lLmpzJztcclxuaW1wb3J0IHsgYWRkTWF0Y2hoaWdobGlnaHRlciB9IGZyb20gJy4uL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9hZGRvbnMvc2VhcmNoL21hdGNoLWhpZ2hsaWdodGVyLmpzJztcclxuaW1wb3J0IHsgYWRkTWF0Y2hlc29uc2Nyb2xsIH0gZnJvbSAnLi4vdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L2FkZG9ucy9zZWFyY2gvbWF0Y2hlc29uc2Nyb2xsYmFyLmpzJztcclxuaW1wb3J0IHsgYWRkU2VhcmNoIH0gZnJvbSAnLi4vdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L2FkZG9ucy9zZWFyY2gvc2VhcmNoLmpzJztcclxuaW1wb3J0IHsgYWRkU2VhcmNoY3Vyc29yIH0gZnJvbSAnLi4vdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L2FkZG9ucy9zZWFyY2gvc2VhcmNoY3Vyc29yLmpzJztcclxuXHJcbmltcG9ydCB7IGFkZEZvbGRjb2RlIH0gZnJvbSAnLi4vdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L2FkZG9ucy9mb2xkL2ZvbGRjb2RlLmpzJztcclxuaW1wb3J0IHsgYWRkQnJhY2Vmb2xkIH0gZnJvbSAnLi4vdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L2FkZG9ucy9mb2xkL2JyYWNlLWZvbGQuanMnO1xyXG5pbXBvcnQgeyBhZGRDb21tZW50Zm9sZCB9IGZyb20gJy4uL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9hZGRvbnMvZm9sZC9jb21tZW50LWZvbGQuanMnO1xyXG5pbXBvcnQgeyBhZGRGb2xkZ3V0dGVyIH0gZnJvbSAnLi4vdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L2FkZG9ucy9mb2xkL2ZvbGRndXR0ZXIuanMnO1xyXG5pbXBvcnQgeyBhZGRJbmRlbnRmb2xkIH0gZnJvbSAnLi4vdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L2FkZG9ucy9mb2xkL2luZGVudC1mb2xkLmpzJztcclxuaW1wb3J0IHsgYWRkWG1sZm9sZCB9IGZyb20gJy4uL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9hZGRvbnMvZm9sZC94bWwtZm9sZC5qcyc7XHJcblxyXG5pbXBvcnQgeyBhZGRDbG9zZWJyYWNrZXRzIH0gZnJvbSAnLi4vdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L2FkZG9ucy9lZGl0L2Nsb3NlYnJhY2tldHMuanMnO1xyXG5pbXBvcnQgeyBhZGRDbG9zZXRhZyB9IGZyb20gJy4uL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9hZGRvbnMvZWRpdC9jbG9zZXRhZy5qcyc7XHJcblxyXG5pbXBvcnQgeyBhZGRTaG93aGludCB9IGZyb20gJy4uL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9hZGRvbnMvaGludC9zaG93LWhpbnQuanMnO1xyXG5pbXBvcnQgeyBhZGRBbnl3b3JkaGludCB9IGZyb20gJy4uL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9hZGRvbnMvaGludC9hbnl3b3JkLWhpbnQuanMnO1xyXG5pbXBvcnQgeyBhZGRYTUxoaW50IH0gZnJvbSAnLi4vdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L2FkZG9ucy9oaW50L3htbC1oaW50LmpzJztcclxuaW1wb3J0IHsgYWRkQ1NTSGludCB9IGZyb20gJy4uL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9hZGRvbnMvaGludC9jc3MtaGludC5qcyc7XHJcbmltcG9ydCB7IGFkZEhUTUxoaW50IH0gZnJvbSAnLi4vdmVuZG9yL2N1c3RvbS9Db2RlTWlycm9yRVM2L2FkZG9ucy9oaW50L2h0bWwtaGludC5qcyc7XHJcbmltcG9ydCB7IGFkZEpTaGludCB9IGZyb20gJy4uL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9hZGRvbnMvaGludC9qYXZhc2NyaXB0LWhpbnQuanMnO1xyXG5cclxuLy8gaW1wb3J0IHsgYWRkUnVubW9kZSB9IGZyb20gJy4uL3ZlbmRvci9jdXN0b20vQ29kZU1pcnJvckVTNi9hZGRvbnMvcnVubW9kZS9ydW5tb2RlLmpzJztcclxuXHJcbmZ1bmN0aW9uIGFkZEZ1bmN0aW9uc1RvQ29kZU1pcnJvcigpIHtcclxuICAvLyBhZGRNZXRhTW9kZShDb2RlTWlycm9yKTtcclxuICBhZGRYTUxNb2RlKENvZGVNaXJyb3IpO1xyXG4gIGFkZENTU01vZGUoQ29kZU1pcnJvcik7XHJcbiAgYWRkSmF2YVNjcmlwdE1vZGUoQ29kZU1pcnJvcik7XHJcbiAgYWRkSFRNTE1peGVkTW9kZShDb2RlTWlycm9yKTtcclxuXHJcbiAgLy8gYWRkU2ltcGxlU2Nyb2xsYmFyKENvZGVNaXJyb3IpO1xyXG4gIGFkZEFubm90YXRlU2Nyb2xsYmFyKENvZGVNaXJyb3IpO1xyXG5cclxuICBhZGRDb21tZW50KENvZGVNaXJyb3IpO1xyXG4gIGFkZEZ1bGxzY3JlZW4oQ29kZU1pcnJvcik7XHJcbiAgLy8gYWRkQXV0b3JlZnJlc2goQ29kZU1pcnJvcik7XHJcbiAgYWRkQWN0aXZlTGluZShDb2RlTWlycm9yKTtcclxuXHJcbiAgYWRkRGlhbG9nKENvZGVNaXJyb3IpO1xyXG4gIGFkZEp1bXB0b2xpbmUoQ29kZU1pcnJvcik7XHJcbiAgYWRkTWF0Y2hoaWdobGlnaHRlcihDb2RlTWlycm9yKTtcclxuICBhZGRNYXRjaGVzb25zY3JvbGwoQ29kZU1pcnJvcik7XHJcbiAgYWRkU2VhcmNoKENvZGVNaXJyb3IpO1xyXG4gIGFkZFNlYXJjaGN1cnNvcihDb2RlTWlycm9yKTtcclxuXHJcbiAgYWRkRm9sZGNvZGUoQ29kZU1pcnJvcik7XHJcbiAgYWRkQnJhY2Vmb2xkKENvZGVNaXJyb3IpO1xyXG4gIGFkZENvbW1lbnRmb2xkKENvZGVNaXJyb3IpO1xyXG4gIGFkZEZvbGRndXR0ZXIoQ29kZU1pcnJvcik7XHJcbiAgYWRkSW5kZW50Zm9sZChDb2RlTWlycm9yKTtcclxuICBhZGRYbWxmb2xkKENvZGVNaXJyb3IpO1xyXG5cclxuICBhZGRDbG9zZWJyYWNrZXRzKENvZGVNaXJyb3IpO1xyXG4gIGFkZENsb3NldGFnKENvZGVNaXJyb3IpO1xyXG5cclxuICBhZGRTaG93aGludChDb2RlTWlycm9yKTtcclxuICBhZGRBbnl3b3JkaGludChDb2RlTWlycm9yKTtcclxuICBhZGRYTUxoaW50KENvZGVNaXJyb3IpO1xyXG4gIGFkZENTU0hpbnQoQ29kZU1pcnJvcik7XHJcbiAgYWRkSFRNTGhpbnQoQ29kZU1pcnJvcik7XHJcbiAgYWRkSlNoaW50KENvZGVNaXJyb3IpO1xyXG5cclxuICAvLyBhZGRSdW5tb2RlKENvZGVNaXJyb3IpO1xyXG59XHJcblxyXG5leHBvcnQgeyBhZGRGdW5jdGlvbnNUb0NvZGVNaXJyb3IgfTtcclxuIiwgIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRIVE1MTWl4ZWRNb2RlKENvZGVNaXJyb3IpIHtcblxuICBjb25zdCBkZWZhdWx0VGFncyA9IHtcbiAgICBzY3JpcHQ6IFtcbiAgICAgIFsnbGFuZycsIC8oamF2YXNjcmlwdHxiYWJlbCkvaSwgJ2phdmFzY3JpcHQnXSxcbiAgICAgIFsndHlwZScsIC9eKD86dGV4dHxhcHBsaWNhdGlvbilcXC8oPzp4LSk/KD86amF2YXxlY21hKXNjcmlwdCR8Xm1vZHVsZSR8XiQvaSwgJ2phdmFzY3JpcHQnXSxcbiAgICAgIFsndHlwZScsIC8uLywgJ3RleHQvcGxhaW4nXSxcbiAgICAgIFtudWxsLCBudWxsLCAnamF2YXNjcmlwdCddLFxuICAgIF0sXG4gICAgc3R5bGU6IFtcbiAgICAgIFsnbGFuZycsIC9eY3NzJC9pLCAnY3NzJ10sXG4gICAgICBbJ3R5cGUnLCAvXih0ZXh0XFwvKT8oeC0pPyhzdHlsZXNoZWV0fGNzcykkL2ksICdjc3MnXSxcbiAgICAgIFsndHlwZScsIC8uLywgJ3RleHQvcGxhaW4nXSxcbiAgICAgIFtudWxsLCBudWxsLCAnY3NzJ10sXG4gICAgXSxcbiAgfTtcblxuICBmdW5jdGlvbiBtYXliZUJhY2t1cChzdHJlYW0sIHBhdCwgc3R5bGUpIHtcbiAgICBjb25zdCBjdXIgPSBzdHJlYW0uY3VycmVudCgpO1xuICAgIGNvbnN0IGNsb3NlID0gY3VyLnNlYXJjaChwYXQpO1xuICAgIGlmIChjbG9zZSA+IC0xKSB7XG4gICAgICBzdHJlYW0uYmFja1VwKGN1ci5sZW5ndGggLSBjbG9zZSk7XG4gICAgfSBlbHNlIGlmIChjdXIubWF0Y2goLzxcXC8/JC8pKSB7XG4gICAgICBzdHJlYW0uYmFja1VwKGN1ci5sZW5ndGgpO1xuICAgICAgaWYgKCFzdHJlYW0ubWF0Y2gocGF0LCBmYWxzZSkpIHN0cmVhbS5tYXRjaChjdXIpO1xuICAgIH1cbiAgICByZXR1cm4gc3R5bGU7XG4gIH1cblxuICBjb25zdCBhdHRyUmVnZXhwQ2FjaGUgPSB7fTtcblxuICBmdW5jdGlvbiBnZXRBdHRyUmVnZXhwKGF0dHIpIHtcbiAgICBjb25zdCByZWdleHAgPSBhdHRyUmVnZXhwQ2FjaGVbYXR0cl07XG4gICAgaWYgKHJlZ2V4cCkgcmV0dXJuIHJlZ2V4cDtcbiAgICByZXR1cm4gYXR0clJlZ2V4cENhY2hlW2F0dHJdID0gbmV3IFJlZ0V4cCgnXFxcXHMrJyArIGF0dHIgKyBcIlxcXFxzKj1cXFxccyooJ3xcXFwiKT8oW14nXFxcIl0rKSgnfFxcXCIpP1xcXFxzKlwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEF0dHJWYWx1ZSh0ZXh0LCBhdHRyKSB7XG4gICAgY29uc3QgbWF0Y2ggPSB0ZXh0Lm1hdGNoKGdldEF0dHJSZWdleHAoYXR0cikpO1xuICAgIHJldHVybiBtYXRjaCA/IC9eXFxzKiguKj8pXFxzKiQvLmV4ZWMobWF0Y2hbMl0pWzFdIDogJyc7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRUYWdSZWdleHAodGFnTmFtZSwgYW5jaG9yZWQpIHtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cCgoYW5jaG9yZWQgPyAnXicgOiAnJykgKyAnPFxcL1xccyonICsgdGFnTmFtZSArICdcXHMqPicsICdpJyk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRUYWdzKGZyb20sIHRvKSB7XG4gICAgZm9yIChjb25zdCB0YWcgaW4gZnJvbSkge1xuICAgICAgY29uc3QgZGVzdCA9IHRvW3RhZ10gfHwgKHRvW3RhZ10gPSBbXSk7XG4gICAgICBjb25zdCBzb3VyY2UgPSBmcm9tW3RhZ107XG4gICAgICBmb3IgKGxldCBpID0gc291cmNlLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGRlc3QudW5zaGlmdChzb3VyY2VbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmRNYXRjaGluZ01vZGUodGFnSW5mbywgdGFnVGV4dCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFnSW5mby5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgc3BlYyA9IHRhZ0luZm9baV07XG4gICAgICBpZiAoIXNwZWNbMF0gfHwgc3BlY1sxXS50ZXN0KGdldEF0dHJWYWx1ZSh0YWdUZXh0LCBzcGVjWzBdKSkpIHJldHVybiBzcGVjWzJdO1xuICAgIH1cbiAgfVxuXG4gIENvZGVNaXJyb3IuZGVmaW5lTW9kZSgnaHRtbG1peGVkJywgKGNvbmZpZywgcGFyc2VyQ29uZmlnKSA9PiB7XG4gICAgY29uc3QgaHRtbE1vZGUgPSBDb2RlTWlycm9yLmdldE1vZGUoY29uZmlnLCB7XG4gICAgICBuYW1lOiAneG1sJyxcbiAgICAgIGh0bWxNb2RlOiB0cnVlLFxuICAgICAgbXVsdGlsaW5lVGFnSW5kZW50RmFjdG9yOiBwYXJzZXJDb25maWcubXVsdGlsaW5lVGFnSW5kZW50RmFjdG9yLFxuICAgICAgbXVsdGlsaW5lVGFnSW5kZW50UGFzdFRhZzogcGFyc2VyQ29uZmlnLm11bHRpbGluZVRhZ0luZGVudFBhc3RUYWcsXG4gICAgfSk7XG5cbiAgICBjb25zdCB0YWdzID0ge307XG4gICAgY29uc3QgY29uZmlnVGFncyA9IHBhcnNlckNvbmZpZyAmJiBwYXJzZXJDb25maWcudGFncztcbiAgICBjb25zdCBjb25maWdTY3JpcHQgPSBwYXJzZXJDb25maWcgJiYgcGFyc2VyQ29uZmlnLnNjcmlwdFR5cGVzO1xuICAgIGFkZFRhZ3MoZGVmYXVsdFRhZ3MsIHRhZ3MpO1xuICAgIGlmIChjb25maWdUYWdzKSBhZGRUYWdzKGNvbmZpZ1RhZ3MsIHRhZ3MpO1xuICAgIGlmIChjb25maWdTY3JpcHQpIHtcbiAgICAgIGZvciAobGV0IGkgPSBjb25maWdTY3JpcHQubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgdGFncy5zY3JpcHQudW5zaGlmdChbJ3R5cGUnLCBjb25maWdTY3JpcHRbaV0ubWF0Y2hlcywgY29uZmlnU2NyaXB0W2ldLm1vZGVdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBodG1sKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIGNvbnN0IHN0eWxlID0gaHRtbE1vZGUudG9rZW4oc3RyZWFtLCBzdGF0ZS5odG1sU3RhdGUpO1xuICAgICAgY29uc3QgdGFnID0gL1xcYnRhZ1xcYi8udGVzdChzdHlsZSk7XG4gICAgICBsZXQgdGFnTmFtZTtcbiAgICAgIGlmICh0YWcgJiYgIS9bPD5cXHNcXC9dLy50ZXN0KHN0cmVhbS5jdXJyZW50KCkpICYmXG4gICAgICAgICh0YWdOYW1lID0gc3RhdGUuaHRtbFN0YXRlLnRhZ05hbWUgJiYgc3RhdGUuaHRtbFN0YXRlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkgJiZcbiAgICAgICAgdGFncy5oYXNPd25Qcm9wZXJ0eSh0YWdOYW1lKSkge1xuICAgICAgICBzdGF0ZS5pblRhZyA9IHRhZ05hbWUgKyAnICc7XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlLmluVGFnICYmIHRhZyAmJiAvPiQvLnRlc3Qoc3RyZWFtLmN1cnJlbnQoKSkpIHtcbiAgICAgICAgY29uc3QgaW5UYWcgPSAvXihbXFxTXSspICguKikvLmV4ZWMoc3RhdGUuaW5UYWcpO1xuICAgICAgICBzdGF0ZS5pblRhZyA9IG51bGw7XG4gICAgICAgIGNvbnN0IG1vZGVTcGVjID0gc3RyZWFtLmN1cnJlbnQoKSA9PSAnPicgJiYgZmluZE1hdGNoaW5nTW9kZSh0YWdzW2luVGFnWzFdXSwgaW5UYWdbMl0pO1xuICAgICAgICBjb25zdCBtb2RlID0gQ29kZU1pcnJvci5nZXRNb2RlKGNvbmZpZywgbW9kZVNwZWMpO1xuICAgICAgICBjb25zdCBlbmRUYWdBID0gZ2V0VGFnUmVnZXhwKGluVGFnWzFdLCB0cnVlKTtcbiAgICAgICAgY29uc3QgZW5kVGFnID0gZ2V0VGFnUmVnZXhwKGluVGFnWzFdLCBmYWxzZSk7XG4gICAgICAgIHN0YXRlLnRva2VuID0gZnVuY3Rpb24gKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgICAgICBpZiAoc3RyZWFtLm1hdGNoKGVuZFRhZ0EsIGZhbHNlKSkge1xuICAgICAgICAgICAgc3RhdGUudG9rZW4gPSBodG1sO1xuICAgICAgICAgICAgc3RhdGUubG9jYWxTdGF0ZSA9IHN0YXRlLmxvY2FsTW9kZSA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG1heWJlQmFja3VwKHN0cmVhbSwgZW5kVGFnLCBzdGF0ZS5sb2NhbE1vZGUudG9rZW4oc3RyZWFtLCBzdGF0ZS5sb2NhbFN0YXRlKSk7XG4gICAgICAgIH07XG4gICAgICAgIHN0YXRlLmxvY2FsTW9kZSA9IG1vZGU7XG4gICAgICAgIHN0YXRlLmxvY2FsU3RhdGUgPSBDb2RlTWlycm9yLnN0YXJ0U3RhdGUobW9kZSwgaHRtbE1vZGUuaW5kZW50KHN0YXRlLmh0bWxTdGF0ZSwgJycsICcnKSk7XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlLmluVGFnKSB7XG4gICAgICAgIHN0YXRlLmluVGFnICs9IHN0cmVhbS5jdXJyZW50KCk7XG4gICAgICAgIGlmIChzdHJlYW0uZW9sKCkpIHN0YXRlLmluVGFnICs9ICcgJztcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdHlsZTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnRTdGF0ZSgpIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBDb2RlTWlycm9yLnN0YXJ0U3RhdGUoaHRtbE1vZGUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRva2VuOiBodG1sLFxuICAgICAgICAgIGluVGFnOiBudWxsLFxuICAgICAgICAgIGxvY2FsTW9kZTogbnVsbCxcbiAgICAgICAgICBsb2NhbFN0YXRlOiBudWxsLFxuICAgICAgICAgIGh0bWxTdGF0ZTogc3RhdGUsXG4gICAgICAgIH07XG4gICAgICB9LFxuXG4gICAgICBjb3B5U3RhdGUoc3RhdGUpIHtcbiAgICAgICAgbGV0IGxvY2FsO1xuICAgICAgICBpZiAoc3RhdGUubG9jYWxTdGF0ZSkge1xuICAgICAgICAgIGxvY2FsID0gQ29kZU1pcnJvci5jb3B5U3RhdGUoc3RhdGUubG9jYWxNb2RlLCBzdGF0ZS5sb2NhbFN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRva2VuOiBzdGF0ZS50b2tlbixcbiAgICAgICAgICBpblRhZzogc3RhdGUuaW5UYWcsXG4gICAgICAgICAgbG9jYWxNb2RlOiBzdGF0ZS5sb2NhbE1vZGUsXG4gICAgICAgICAgbG9jYWxTdGF0ZTogbG9jYWwsXG4gICAgICAgICAgaHRtbFN0YXRlOiBDb2RlTWlycm9yLmNvcHlTdGF0ZShodG1sTW9kZSwgc3RhdGUuaHRtbFN0YXRlKSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG5cbiAgICAgIHRva2VuKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlLnRva2VuKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgfSxcblxuICAgICAgaW5kZW50KHN0YXRlLCB0ZXh0QWZ0ZXIsIGxpbmUpIHtcbiAgICAgICAgaWYgKCFzdGF0ZS5sb2NhbE1vZGUgfHwgL15cXHMqPFxcLy8udGVzdCh0ZXh0QWZ0ZXIpKSB7XG4gICAgICAgICAgcmV0dXJuIGh0bWxNb2RlLmluZGVudChzdGF0ZS5odG1sU3RhdGUsIHRleHRBZnRlciwgbGluZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXRlLmxvY2FsTW9kZS5pbmRlbnQpIHtcbiAgICAgICAgICByZXR1cm4gc3RhdGUubG9jYWxNb2RlLmluZGVudChzdGF0ZS5sb2NhbFN0YXRlLCB0ZXh0QWZ0ZXIsIGxpbmUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDb2RlTWlycm9yLlBhc3M7XG4gICAgICB9LFxuXG4gICAgICBpbm5lck1vZGUoc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdGF0ZTogc3RhdGUubG9jYWxTdGF0ZSB8fCBzdGF0ZS5odG1sU3RhdGUsXG4gICAgICAgICAgbW9kZTogc3RhdGUubG9jYWxNb2RlIHx8IGh0bWxNb2RlXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH07XG4gIH0sICd4bWwnLCAnamF2YXNjcmlwdCcsICdjc3MnKTtcblxuICBDb2RlTWlycm9yLmRlZmluZU1JTUUoJ3RleHQvaHRtbCcsICdodG1sbWl4ZWQnKTtcbn1cbiIsICIvLyBDb2RlTWlycm9yLCBjb3B5cmlnaHQgKGMpIGJ5IE1hcmlqbiBIYXZlcmJla2UgYW5kIG90aGVyc1xuLy8gRGlzdHJpYnV0ZWQgdW5kZXIgYW4gTUlUIGxpY2Vuc2U6IGh0dHBzOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkQ1NTTW9kZShDb2RlTWlycm9yKSB7XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVNb2RlKCdjc3MnLCAoY29uZmlnLCBwYXJzZXJDb25maWcpID0+IHtcbiAgICBjb25zdCBpbmxpbmUgPSBwYXJzZXJDb25maWcuaW5saW5lO1xuICAgIGlmICghcGFyc2VyQ29uZmlnLnByb3BlcnR5S2V5d29yZHMpIHBhcnNlckNvbmZpZyA9IENvZGVNaXJyb3IucmVzb2x2ZU1vZGUoJ3RleHQvY3NzJyk7XG5cbiAgICBjb25zdCBpbmRlbnRVbml0ID0gY29uZmlnLmluZGVudFVuaXQ7XG4gICAgY29uc3QgdG9rZW5Ib29rcyA9IHBhcnNlckNvbmZpZy50b2tlbkhvb2tzO1xuICAgIGNvbnN0IGRvY3VtZW50VHlwZXMgPSBwYXJzZXJDb25maWcuZG9jdW1lbnRUeXBlcyB8fCB7fTtcbiAgICBjb25zdCBtZWRpYVR5cGVzID0gcGFyc2VyQ29uZmlnLm1lZGlhVHlwZXMgfHwge307XG4gICAgY29uc3QgbWVkaWFGZWF0dXJlcyA9IHBhcnNlckNvbmZpZy5tZWRpYUZlYXR1cmVzIHx8IHt9O1xuICAgIGNvbnN0IG1lZGlhVmFsdWVLZXl3b3JkcyA9IHBhcnNlckNvbmZpZy5tZWRpYVZhbHVlS2V5d29yZHMgfHwge307XG4gICAgY29uc3QgcHJvcGVydHlLZXl3b3JkcyA9IHBhcnNlckNvbmZpZy5wcm9wZXJ0eUtleXdvcmRzIHx8IHt9O1xuICAgIGNvbnN0IG5vblN0YW5kYXJkUHJvcGVydHlLZXl3b3JkcyA9IHBhcnNlckNvbmZpZy5ub25TdGFuZGFyZFByb3BlcnR5S2V5d29yZHMgfHwge307XG4gICAgY29uc3QgZm9udFByb3BlcnRpZXMgPSBwYXJzZXJDb25maWcuZm9udFByb3BlcnRpZXMgfHwge307XG4gICAgY29uc3QgY291bnRlckRlc2NyaXB0b3JzID0gcGFyc2VyQ29uZmlnLmNvdW50ZXJEZXNjcmlwdG9ycyB8fCB7fTtcbiAgICBjb25zdCBjb2xvcktleXdvcmRzID0gcGFyc2VyQ29uZmlnLmNvbG9yS2V5d29yZHMgfHwge307XG4gICAgY29uc3QgdmFsdWVLZXl3b3JkcyA9IHBhcnNlckNvbmZpZy52YWx1ZUtleXdvcmRzIHx8IHt9O1xuICAgIGNvbnN0IGFsbG93TmVzdGVkID0gcGFyc2VyQ29uZmlnLmFsbG93TmVzdGVkO1xuICAgIGNvbnN0IGxpbmVDb21tZW50ID0gcGFyc2VyQ29uZmlnLmxpbmVDb21tZW50O1xuICAgIGNvbnN0IHN1cHBvcnRzQXRDb21wb25lbnQgPSBwYXJzZXJDb25maWcuc3VwcG9ydHNBdENvbXBvbmVudCA9PT0gdHJ1ZTtcblxuICAgIGxldCB0eXBlO1xuICAgIGxldCBvdmVycmlkZTtcblxuICAgIGZ1bmN0aW9uIHJldChzdHlsZSwgdHApIHtcbiAgICAgIHR5cGUgPSB0cDtcbiAgICAgIHJldHVybiBzdHlsZTtcbiAgICB9XG5cbiAgICAvLyBUb2tlbml6ZXJzXG5cbiAgICBmdW5jdGlvbiB0b2tlbkJhc2Uoc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgdmFyIGNoID0gc3RyZWFtLm5leHQoKTtcbiAgICAgIGlmICh0b2tlbkhvb2tzW2NoXSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdG9rZW5Ib29rc1tjaF0oc3RyZWFtLCBzdGF0ZSk7XG4gICAgICAgIGlmIChyZXN1bHQgIT09IGZhbHNlKSByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgaWYgKGNoID09IFwiQFwiKSB7XG4gICAgICAgIHN0cmVhbS5lYXRXaGlsZSgvW1xcd1xcXFxcXC1dLyk7XG4gICAgICAgIHJldHVybiByZXQoXCJkZWZcIiwgc3RyZWFtLmN1cnJlbnQoKSk7XG4gICAgICB9XG4gICAgICBpZiAoY2ggPT0gXCI9XCIgfHwgKGNoID09IFwiflwiIHx8IGNoID09IFwifFwiKSAmJiBzdHJlYW0uZWF0KFwiPVwiKSkge1xuICAgICAgICByZXR1cm4gcmV0KG51bGwsIFwiY29tcGFyZVwiKTtcbiAgICAgIH1cbiAgICAgIGlmIChjaCA9PSBcIlxcXCJcIiB8fCBjaCA9PSBcIidcIikge1xuICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuU3RyaW5nKGNoKTtcbiAgICAgICAgcmV0dXJuIHN0YXRlLnRva2VuaXplKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgfVxuICAgICAgaWYgKGNoID09IFwiI1wiKSB7XG4gICAgICAgIHN0cmVhbS5lYXRXaGlsZSgvW1xcd1xcXFxcXC1dLyk7XG4gICAgICAgIHJldHVybiByZXQoXCJhdG9tXCIsIFwiaGFzaFwiKTtcbiAgICAgIH1cbiAgICAgIGlmIChjaCA9PSBcIiFcIikge1xuICAgICAgICBzdHJlYW0ubWF0Y2goL15cXHMqXFx3Ki8pO1xuICAgICAgICByZXR1cm4gcmV0KFwia2V5d29yZFwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgIH0gaWYgKC9cXGQvLnRlc3QoY2gpIHx8IGNoID09IFwiLlwiICYmIHN0cmVhbS5lYXQoL1xcZC8pKSB7XG4gICAgICAgIHN0cmVhbS5lYXRXaGlsZSgvW1xcdy4lXS8pO1xuICAgICAgICByZXR1cm4gcmV0KFwibnVtYmVyXCIsIFwidW5pdFwiKTtcbiAgICAgIH0gaWYgKGNoID09PSBcIi1cIikge1xuICAgICAgICBpZiAoL1tcXGQuXS8udGVzdChzdHJlYW0ucGVlaygpKSkge1xuICAgICAgICAgIHN0cmVhbS5lYXRXaGlsZSgvW1xcdy4lXS8pO1xuICAgICAgICAgIHJldHVybiByZXQoXCJudW1iZXJcIiwgXCJ1bml0XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdHJlYW0ubWF0Y2goL14tW1xcd1xcXFxcXC1dKi8pKSB7XG4gICAgICAgICAgc3RyZWFtLmVhdFdoaWxlKC9bXFx3XFxcXFxcLV0vKTtcbiAgICAgICAgICBpZiAoc3RyZWFtLm1hdGNoKC9eXFxzKjovLCBmYWxzZSkpXG4gICAgICAgICAgICByZXR1cm4gcmV0KFwidmFyaWFibGUtMlwiLCBcInZhcmlhYmxlLWRlZmluaXRpb25cIik7XG4gICAgICAgICAgcmV0dXJuIHJldChcInZhcmlhYmxlLTJcIiwgXCJ2YXJpYWJsZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RyZWFtLm1hdGNoKC9eXFx3Ky0vKSkge1xuICAgICAgICAgIHJldHVybiByZXQoXCJtZXRhXCIsIFwibWV0YVwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICgvWywrPipcXC9dLy50ZXN0KGNoKSkge1xuICAgICAgICByZXR1cm4gcmV0KG51bGwsIFwic2VsZWN0LW9wXCIpO1xuICAgICAgfSBlbHNlIGlmIChjaCA9PSBcIi5cIiAmJiBzdHJlYW0ubWF0Y2goL14tP1tfYS16XVtfYS16MC05LV0qL2kpKSB7XG4gICAgICAgIHJldHVybiByZXQoXCJxdWFsaWZpZXJcIiwgXCJxdWFsaWZpZXJcIik7XG4gICAgICB9IGVsc2UgaWYgKC9bOjt7fVxcW1xcXVxcKFxcKV0vLnRlc3QoY2gpKSB7XG4gICAgICAgIHJldHVybiByZXQobnVsbCwgY2gpO1xuICAgICAgfSBlbHNlIGlmIChzdHJlYW0ubWF0Y2goL1tcXHctLl0rKD89XFwoKS8pKSB7XG4gICAgICAgIGlmICgvXih1cmwoLXByZWZpeCk/fGRvbWFpbnxyZWdleHApJC8udGVzdChzdHJlYW0uY3VycmVudCgpXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlblBhcmVudGhlc2l6ZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldChcInZhcmlhYmxlIGNhbGxlZVwiLCBcInZhcmlhYmxlXCIpO1xuICAgICAgfSBlbHNlIGlmICgvW1xcd1xcXFxcXC1dLy50ZXN0KGNoKSkge1xuICAgICAgICBzdHJlYW0uZWF0V2hpbGUoL1tcXHdcXFxcXFwtXS8pO1xuICAgICAgICByZXR1cm4gcmV0KFwicHJvcGVydHlcIiwgXCJ3b3JkXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJldChudWxsLCBudWxsKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b2tlblN0cmluZyhxdW90ZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdHJlYW0sIHN0YXRlKSB7XG4gICAgICAgIGxldCBlc2NhcGVkID0gZmFsc2U7XG4gICAgICAgIGxldCBjaDtcbiAgICAgICAgd2hpbGUgKChjaCA9IHN0cmVhbS5uZXh0KCkpICE9IG51bGwpIHtcbiAgICAgICAgICBpZiAoY2ggPT0gcXVvdGUgJiYgIWVzY2FwZWQpIHtcbiAgICAgICAgICAgIGlmIChxdW90ZSA9PSAnKScpIHN0cmVhbS5iYWNrVXAoMSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgZXNjYXBlZCA9ICFlc2NhcGVkICYmIGNoID09ICdcXFxcJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2ggPT0gcXVvdGUgfHwgIWVzY2FwZWQgJiYgcXVvdGUgIT0gJyknKSBzdGF0ZS50b2tlbml6ZSA9IG51bGw7XG4gICAgICAgIHJldHVybiByZXQoJ3N0cmluZycsICdzdHJpbmcnKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdG9rZW5QYXJlbnRoZXNpemVkKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIHN0cmVhbS5uZXh0KCk7IC8vIE11c3QgYmUgJygnXG4gICAgICBpZiAoIXN0cmVhbS5tYXRjaCgvXFxzKltcXFwiXFwnKV0vLCBmYWxzZSkpIHtcbiAgICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlblN0cmluZygnKScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUudG9rZW5pemUgPSBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJldChudWxsLCAnKCcpO1xuICAgIH1cblxuICAgIC8vIENvbnRleHQgbWFuYWdlbWVudFxuXG4gICAgZnVuY3Rpb24gQ29udGV4dCh0eXBlLCBpbmRlbnQsIHByZXYpIHtcbiAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICB0aGlzLmluZGVudCA9IGluZGVudDtcbiAgICAgIHRoaXMucHJldiA9IHByZXY7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcHVzaENvbnRleHQoc3RhdGUsIHN0cmVhbSwgdHlwZSwgaW5kZW50KSB7XG4gICAgICBzdGF0ZS5jb250ZXh0ID0gbmV3IENvbnRleHQodHlwZSwgc3RyZWFtLmluZGVudGF0aW9uKCkgKyAoaW5kZW50ID09PSBmYWxzZSA/IDAgOiBpbmRlbnRVbml0KSwgc3RhdGVcbiAgICAgICAgLmNvbnRleHQpO1xuICAgICAgcmV0dXJuIHR5cGU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcG9wQ29udGV4dChzdGF0ZSkge1xuICAgICAgaWYgKHN0YXRlLmNvbnRleHQucHJldikge1xuICAgICAgICBzdGF0ZS5jb250ZXh0ID0gc3RhdGUuY29udGV4dC5wcmV2O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0YXRlLmNvbnRleHQudHlwZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXNzKHR5cGUsIHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIHJldHVybiBzdGF0ZXNbc3RhdGUuY29udGV4dC50eXBlXSh0eXBlLCBzdHJlYW0sIHN0YXRlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwb3BBbmRQYXNzKHR5cGUsIHN0cmVhbSwgc3RhdGUsIG4pIHtcbiAgICAgIGZvciAobGV0IGkgPSBuIHx8IDE7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgc3RhdGUuY29udGV4dCA9IHN0YXRlLmNvbnRleHQucHJldjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXNzKHR5cGUsIHN0cmVhbSwgc3RhdGUpO1xuICAgIH1cblxuICAgIC8vIFBhcnNlclxuXG4gICAgZnVuY3Rpb24gd29yZEFzVmFsdWUoc3RyZWFtKSB7XG4gICAgICBjb25zdCB3b3JkID0gc3RyZWFtLmN1cnJlbnQoKVxuICAgICAgICAudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmICh2YWx1ZUtleXdvcmRzLmhhc093blByb3BlcnR5KHdvcmQpKSB7XG4gICAgICAgIG92ZXJyaWRlID0gJ2F0b20nO1xuICAgICAgfSBlbHNlIGlmIChjb2xvcktleXdvcmRzLmhhc093blByb3BlcnR5KHdvcmQpKSB7XG4gICAgICAgIG92ZXJyaWRlID0gJ2tleXdvcmQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3ZlcnJpZGUgPSAndmFyaWFibGUnO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBzdGF0ZXMgPSB7fTtcblxuICAgIHN0YXRlcy50b3AgPSBmdW5jdGlvbiAodHlwZSwgc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgaWYgKHR5cGUgPT0gXCJ7XCIpIHtcbiAgICAgICAgcmV0dXJuIHB1c2hDb250ZXh0KHN0YXRlLCBzdHJlYW0sIFwiYmxvY2tcIik7XG4gICAgICB9XG4gICAgICBpZiAodHlwZSA9PSBcIn1cIiAmJiBzdGF0ZS5jb250ZXh0LnByZXYpIHtcbiAgICAgICAgcmV0dXJuIHBvcENvbnRleHQoc3RhdGUpO1xuICAgICAgfVxuICAgICAgaWYgKHN1cHBvcnRzQXRDb21wb25lbnQgJiYgL0Bjb21wb25lbnQvaS50ZXN0KHR5cGUpKSB7XG4gICAgICAgIHJldHVybiBwdXNoQ29udGV4dChzdGF0ZSwgc3RyZWFtLCBcImF0Q29tcG9uZW50QmxvY2tcIik7XG4gICAgICB9XG4gICAgICBpZiAoL15AKC1tb3otKT9kb2N1bWVudCQvaS50ZXN0KHR5cGUpKSB7XG4gICAgICAgIHJldHVybiBwdXNoQ29udGV4dChzdGF0ZSwgc3RyZWFtLCBcImRvY3VtZW50VHlwZXNcIik7XG4gICAgICB9XG4gICAgICBpZiAoL15AKG1lZGlhfHN1cHBvcnRzfCgtbW96LSk/ZG9jdW1lbnR8aW1wb3J0KSQvaS50ZXN0KHR5cGUpKSB7XG4gICAgICAgIHJldHVybiBwdXNoQ29udGV4dChzdGF0ZSwgc3RyZWFtLCBcImF0QmxvY2tcIik7XG4gICAgICB9XG4gICAgICBpZiAoL15AKGZvbnQtZmFjZXxjb3VudGVyLXN0eWxlKS9pLnRlc3QodHlwZSkpIHtcbiAgICAgICAgc3RhdGUuc3RhdGVBcmcgPSB0eXBlO1xuICAgICAgICByZXR1cm4gXCJyZXN0cmljdGVkX2F0QmxvY2tfYmVmb3JlXCI7XG4gICAgICB9XG4gICAgICBpZiAoL15AKC0obW96fG1zfG98d2Via2l0KS0pP2tleWZyYW1lcyQvaS50ZXN0KHR5cGUpKSB7XG4gICAgICAgIHJldHVybiBcImtleWZyYW1lc1wiO1xuICAgICAgfSBpZiAodHlwZSAmJiB0eXBlLmNoYXJBdCgwKSA9PSBcIkBcIikge1xuICAgICAgICByZXR1cm4gcHVzaENvbnRleHQoc3RhdGUsIHN0cmVhbSwgXCJhdFwiKTtcbiAgICAgIH0gaWYgKHR5cGUgPT0gXCJoYXNoXCIpIHtcbiAgICAgICAgb3ZlcnJpZGUgPSBcImJ1aWx0aW5cIjtcbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcIndvcmRcIikge1xuICAgICAgICBvdmVycmlkZSA9IFwidGFnXCI7XG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJ2YXJpYWJsZS1kZWZpbml0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIFwibWF5YmVwcm9wXCI7XG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJpbnRlcnBvbGF0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIHB1c2hDb250ZXh0KHN0YXRlLCBzdHJlYW0sIFwiaW50ZXJwb2xhdGlvblwiKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcIjpcIikge1xuICAgICAgICByZXR1cm4gXCJwc2V1ZG9cIjtcbiAgICAgIH0gZWxzZSBpZiAoYWxsb3dOZXN0ZWQgJiYgdHlwZSA9PSBcIihcIikge1xuICAgICAgICByZXR1cm4gcHVzaENvbnRleHQoc3RhdGUsIHN0cmVhbSwgXCJwYXJlbnNcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RhdGUuY29udGV4dC50eXBlO1xuICAgIH07XG5cbiAgICBzdGF0ZXMuYmxvY2sgPSBmdW5jdGlvbiAodHlwZSwgc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgaWYgKHR5cGUgPT0gJ3dvcmQnKSB7XG4gICAgICAgIGNvbnN0IHdvcmQgPSBzdHJlYW0uY3VycmVudCgpXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmIChwcm9wZXJ0eUtleXdvcmRzLmhhc093blByb3BlcnR5KHdvcmQpKSB7XG4gICAgICAgICAgb3ZlcnJpZGUgPSAncHJvcGVydHknO1xuICAgICAgICAgIHJldHVybiAnbWF5YmVwcm9wJztcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9uU3RhbmRhcmRQcm9wZXJ0eUtleXdvcmRzLmhhc093blByb3BlcnR5KHdvcmQpKSB7XG4gICAgICAgICAgb3ZlcnJpZGUgPSAnc3RyaW5nLTInO1xuICAgICAgICAgIHJldHVybiAnbWF5YmVwcm9wJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWxsb3dOZXN0ZWQpIHtcbiAgICAgICAgICBvdmVycmlkZSA9IHN0cmVhbS5tYXRjaCgvXlxccyo6KD86XFxzfCQpLywgZmFsc2UpID8gJ3Byb3BlcnR5JyA6ICd0YWcnO1xuICAgICAgICAgIHJldHVybiAnYmxvY2snO1xuICAgICAgICB9XG4gICAgICAgIG92ZXJyaWRlICs9ICcgZXJyb3InO1xuICAgICAgICByZXR1cm4gJ21heWJlcHJvcCc7XG5cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09ICdtZXRhJykge1xuICAgICAgICByZXR1cm4gJ2Jsb2NrJztcbiAgICAgIH1cbiAgICAgIGlmICghYWxsb3dOZXN0ZWQgJiYgKHR5cGUgPT0gJ2hhc2gnIHx8IHR5cGUgPT0gJ3F1YWxpZmllcicpKSB7XG4gICAgICAgIG92ZXJyaWRlID0gJ2Vycm9yJztcbiAgICAgICAgcmV0dXJuICdibG9jayc7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RhdGVzLnRvcCh0eXBlLCBzdHJlYW0sIHN0YXRlKTtcblxuICAgIH07XG5cbiAgICBzdGF0ZXMubWF5YmVwcm9wID0gZnVuY3Rpb24gKHR5cGUsIHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIGlmICh0eXBlID09ICc6JykgcmV0dXJuIHB1c2hDb250ZXh0KHN0YXRlLCBzdHJlYW0sICdwcm9wJyk7XG4gICAgICByZXR1cm4gcGFzcyh0eXBlLCBzdHJlYW0sIHN0YXRlKTtcbiAgICB9O1xuXG4gICAgc3RhdGVzLnByb3AgPSBmdW5jdGlvbiAodHlwZSwgc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgaWYgKHR5cGUgPT0gJzsnKSByZXR1cm4gcG9wQ29udGV4dChzdGF0ZSk7XG4gICAgICBpZiAodHlwZSA9PSAneycgJiYgYWxsb3dOZXN0ZWQpIHJldHVybiBwdXNoQ29udGV4dChzdGF0ZSwgc3RyZWFtLCAncHJvcEJsb2NrJyk7XG4gICAgICBpZiAodHlwZSA9PSAnfScgfHwgdHlwZSA9PSAneycpIHJldHVybiBwb3BBbmRQYXNzKHR5cGUsIHN0cmVhbSwgc3RhdGUpO1xuICAgICAgaWYgKHR5cGUgPT0gJygnKSByZXR1cm4gcHVzaENvbnRleHQoc3RhdGUsIHN0cmVhbSwgJ3BhcmVucycpO1xuXG4gICAgICBpZiAodHlwZSA9PSAnaGFzaCcgJiYgIS9eIyhbMC05YS1mQS1mXXszLDR9fFswLTlhLWZBLWZdezZ9fFswLTlhLWZBLWZdezh9KSQvLnRlc3Qoc3RyZWFtLmN1cnJlbnQoKSkpIHtcbiAgICAgICAgb3ZlcnJpZGUgKz0gJyBlcnJvcic7XG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ3dvcmQnKSB7XG4gICAgICAgIHdvcmRBc1ZhbHVlKHN0cmVhbSk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ2ludGVycG9sYXRpb24nKSB7XG4gICAgICAgIHJldHVybiBwdXNoQ29udGV4dChzdGF0ZSwgc3RyZWFtLCAnaW50ZXJwb2xhdGlvbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuICdwcm9wJztcbiAgICB9O1xuXG4gICAgc3RhdGVzLnByb3BCbG9jayA9IGZ1bmN0aW9uICh0eXBlLCBfc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgaWYgKHR5cGUgPT0gJ30nKSByZXR1cm4gcG9wQ29udGV4dChzdGF0ZSk7XG4gICAgICBpZiAodHlwZSA9PSAnd29yZCcpIHtcbiAgICAgICAgb3ZlcnJpZGUgPSAncHJvcGVydHknO1xuICAgICAgICByZXR1cm4gJ21heWJlcHJvcCc7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RhdGUuY29udGV4dC50eXBlO1xuICAgIH07XG5cbiAgICBzdGF0ZXMucGFyZW5zID0gZnVuY3Rpb24gKHR5cGUsIHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIGlmICh0eXBlID09ICd7JyB8fCB0eXBlID09ICd9JykgcmV0dXJuIHBvcEFuZFBhc3ModHlwZSwgc3RyZWFtLCBzdGF0ZSk7XG4gICAgICBpZiAodHlwZSA9PSAnKScpIHJldHVybiBwb3BDb250ZXh0KHN0YXRlKTtcbiAgICAgIGlmICh0eXBlID09ICcoJykgcmV0dXJuIHB1c2hDb250ZXh0KHN0YXRlLCBzdHJlYW0sICdwYXJlbnMnKTtcbiAgICAgIGlmICh0eXBlID09ICdpbnRlcnBvbGF0aW9uJykgcmV0dXJuIHB1c2hDb250ZXh0KHN0YXRlLCBzdHJlYW0sICdpbnRlcnBvbGF0aW9uJyk7XG4gICAgICBpZiAodHlwZSA9PSAnd29yZCcpIHdvcmRBc1ZhbHVlKHN0cmVhbSk7XG4gICAgICByZXR1cm4gJ3BhcmVucyc7XG4gICAgfTtcblxuICAgIHN0YXRlcy5wc2V1ZG8gPSBmdW5jdGlvbiAodHlwZSwgc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgaWYgKHR5cGUgPT0gJ21ldGEnKSByZXR1cm4gJ3BzZXVkbyc7XG5cbiAgICAgIGlmICh0eXBlID09ICd3b3JkJykge1xuICAgICAgICBvdmVycmlkZSA9ICd2YXJpYWJsZS0zJztcbiAgICAgICAgcmV0dXJuIHN0YXRlLmNvbnRleHQudHlwZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXNzKHR5cGUsIHN0cmVhbSwgc3RhdGUpO1xuICAgIH07XG5cbiAgICBzdGF0ZXMuZG9jdW1lbnRUeXBlcyA9IGZ1bmN0aW9uICh0eXBlLCBzdHJlYW0sIHN0YXRlKSB7XG4gICAgICBpZiAodHlwZSA9PSAnd29yZCcgJiYgZG9jdW1lbnRUeXBlcy5oYXNPd25Qcm9wZXJ0eShzdHJlYW0uY3VycmVudCgpKSkge1xuICAgICAgICBvdmVycmlkZSA9ICd0YWcnO1xuICAgICAgICByZXR1cm4gc3RhdGUuY29udGV4dC50eXBlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0YXRlcy5hdEJsb2NrKHR5cGUsIHN0cmVhbSwgc3RhdGUpO1xuXG4gICAgfTtcblxuICAgIHN0YXRlcy5hdEJsb2NrID0gZnVuY3Rpb24gKHR5cGUsIHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIGlmICh0eXBlID09ICcoJykgcmV0dXJuIHB1c2hDb250ZXh0KHN0YXRlLCBzdHJlYW0sICdhdEJsb2NrX3BhcmVucycpO1xuICAgICAgaWYgKHR5cGUgPT0gJ30nIHx8IHR5cGUgPT0gJzsnKSByZXR1cm4gcG9wQW5kUGFzcyh0eXBlLCBzdHJlYW0sIHN0YXRlKTtcbiAgICAgIGlmICh0eXBlID09ICd7Jykge1xuICAgICAgICByZXR1cm4gcG9wQ29udGV4dChzdGF0ZSkgJiYgcHVzaENvbnRleHQoc3RhdGUsIHN0cmVhbSwgYWxsb3dOZXN0ZWQgPyAnYmxvY2snXG4gICAgICAgICAgOiAndG9wJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlID09ICdpbnRlcnBvbGF0aW9uJykgcmV0dXJuIHB1c2hDb250ZXh0KHN0YXRlLCBzdHJlYW0sICdpbnRlcnBvbGF0aW9uJyk7XG5cbiAgICAgIGlmICh0eXBlID09ICd3b3JkJykge1xuICAgICAgICBjb25zdCB3b3JkID0gc3RyZWFtLmN1cnJlbnQoKVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAod29yZCA9PSAnb25seScgfHwgd29yZCA9PSAnbm90JyB8fCB3b3JkID09ICdhbmQnIHx8IHdvcmQgPT0gJ29yJykge1xuICAgICAgICAgIG92ZXJyaWRlID0gJ2tleXdvcmQnO1xuICAgICAgICB9IGVsc2UgaWYgKG1lZGlhVHlwZXMuaGFzT3duUHJvcGVydHkod29yZCkpIHtcbiAgICAgICAgICBvdmVycmlkZSA9ICdhdHRyaWJ1dGUnO1xuICAgICAgICB9IGVsc2UgaWYgKG1lZGlhRmVhdHVyZXMuaGFzT3duUHJvcGVydHkod29yZCkpIHtcbiAgICAgICAgICBvdmVycmlkZSA9ICdwcm9wZXJ0eSc7XG4gICAgICAgIH0gZWxzZSBpZiAobWVkaWFWYWx1ZUtleXdvcmRzLmhhc093blByb3BlcnR5KHdvcmQpKSB7XG4gICAgICAgICAgb3ZlcnJpZGUgPSAna2V5d29yZCc7XG4gICAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlLZXl3b3Jkcy5oYXNPd25Qcm9wZXJ0eSh3b3JkKSkge1xuICAgICAgICAgIG92ZXJyaWRlID0gJ3Byb3BlcnR5JztcbiAgICAgICAgfSBlbHNlIGlmIChub25TdGFuZGFyZFByb3BlcnR5S2V5d29yZHMuaGFzT3duUHJvcGVydHkod29yZCkpIHtcbiAgICAgICAgICBvdmVycmlkZSA9ICdzdHJpbmctMic7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWVLZXl3b3Jkcy5oYXNPd25Qcm9wZXJ0eSh3b3JkKSkge1xuICAgICAgICAgIG92ZXJyaWRlID0gJ2F0b20nO1xuICAgICAgICB9IGVsc2UgaWYgKGNvbG9yS2V5d29yZHMuaGFzT3duUHJvcGVydHkod29yZCkpIHtcbiAgICAgICAgICBvdmVycmlkZSA9ICdrZXl3b3JkJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvdmVycmlkZSA9ICdlcnJvcic7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzdGF0ZS5jb250ZXh0LnR5cGU7XG4gICAgfTtcblxuICAgIHN0YXRlcy5hdENvbXBvbmVudEJsb2NrID0gZnVuY3Rpb24gKHR5cGUsIHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIGlmICh0eXBlID09ICd9Jykge1xuICAgICAgICByZXR1cm4gcG9wQW5kUGFzcyh0eXBlLCBzdHJlYW0sIHN0YXRlKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09ICd7Jykge1xuICAgICAgICByZXR1cm4gcG9wQ29udGV4dChzdGF0ZSkgJiYgcHVzaENvbnRleHQoc3RhdGUsIHN0cmVhbSwgYWxsb3dOZXN0ZWQgPyAnYmxvY2snIDogJ3RvcCcsIGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09ICd3b3JkJykge1xuICAgICAgICBvdmVycmlkZSA9ICdlcnJvcic7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RhdGUuY29udGV4dC50eXBlO1xuICAgIH07XG5cbiAgICBzdGF0ZXMuYXRCbG9ja19wYXJlbnMgPSBmdW5jdGlvbiAodHlwZSwgc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgaWYgKHR5cGUgPT0gJyknKSByZXR1cm4gcG9wQ29udGV4dChzdGF0ZSk7XG4gICAgICBpZiAodHlwZSA9PSAneycgfHwgdHlwZSA9PSAnfScpIHJldHVybiBwb3BBbmRQYXNzKHR5cGUsIHN0cmVhbSwgc3RhdGUsIDIpO1xuICAgICAgcmV0dXJuIHN0YXRlcy5hdEJsb2NrKHR5cGUsIHN0cmVhbSwgc3RhdGUpO1xuICAgIH07XG5cbiAgICBzdGF0ZXMucmVzdHJpY3RlZF9hdEJsb2NrX2JlZm9yZSA9IGZ1bmN0aW9uICh0eXBlLCBzdHJlYW0sIHN0YXRlKSB7XG4gICAgICBpZiAodHlwZSA9PSAneycpIHtcbiAgICAgICAgcmV0dXJuIHB1c2hDb250ZXh0KHN0YXRlLCBzdHJlYW0sICdyZXN0cmljdGVkX2F0QmxvY2snKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09ICd3b3JkJyAmJiBzdGF0ZS5zdGF0ZUFyZyA9PSAnQGNvdW50ZXItc3R5bGUnKSB7XG4gICAgICAgIG92ZXJyaWRlID0gJ3ZhcmlhYmxlJztcbiAgICAgICAgcmV0dXJuICdyZXN0cmljdGVkX2F0QmxvY2tfYmVmb3JlJztcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXNzKHR5cGUsIHN0cmVhbSwgc3RhdGUpO1xuICAgIH07XG5cbiAgICBzdGF0ZXMucmVzdHJpY3RlZF9hdEJsb2NrID0gZnVuY3Rpb24gKHR5cGUsIHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIGlmICh0eXBlID09ICd9Jykge1xuICAgICAgICBzdGF0ZS5zdGF0ZUFyZyA9IG51bGw7XG4gICAgICAgIHJldHVybiBwb3BDb250ZXh0KHN0YXRlKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09ICd3b3JkJykge1xuICAgICAgICBpZiAoKHN0YXRlLnN0YXRlQXJnID09ICdAZm9udC1mYWNlJyAmJiAhZm9udFByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoc3RyZWFtLmN1cnJlbnQoKVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpKSlcbiAgICAgICAgICB8fCAoc3RhdGUuc3RhdGVBcmcgPT0gJ0Bjb3VudGVyLXN0eWxlJyAmJiAhY291bnRlckRlc2NyaXB0b3JzLmhhc093blByb3BlcnR5KHN0cmVhbS5jdXJyZW50KClcbiAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpKSkpIHtcbiAgICAgICAgICBvdmVycmlkZSA9ICdlcnJvcic7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3ZlcnJpZGUgPSAncHJvcGVydHknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnbWF5YmVwcm9wJztcbiAgICAgIH1cbiAgICAgIHJldHVybiAncmVzdHJpY3RlZF9hdEJsb2NrJztcbiAgICB9O1xuXG4gICAgc3RhdGVzLmtleWZyYW1lcyA9IGZ1bmN0aW9uICh0eXBlLCBzdHJlYW0sIHN0YXRlKSB7XG4gICAgICBpZiAodHlwZSA9PSAnd29yZCcpIHtcbiAgICAgICAgb3ZlcnJpZGUgPSAndmFyaWFibGUnO1xuICAgICAgICByZXR1cm4gJ2tleWZyYW1lcyc7XG4gICAgICB9XG4gICAgICBpZiAodHlwZSA9PSAneycpIHJldHVybiBwdXNoQ29udGV4dChzdGF0ZSwgc3RyZWFtLCAndG9wJyk7XG4gICAgICByZXR1cm4gcGFzcyh0eXBlLCBzdHJlYW0sIHN0YXRlKTtcbiAgICB9O1xuXG4gICAgc3RhdGVzLmF0ID0gZnVuY3Rpb24gKHR5cGUsIHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIGlmICh0eXBlID09ICc7JykgcmV0dXJuIHBvcENvbnRleHQoc3RhdGUpO1xuICAgICAgaWYgKHR5cGUgPT0gJ3snIHx8IHR5cGUgPT0gJ30nKSByZXR1cm4gcG9wQW5kUGFzcyh0eXBlLCBzdHJlYW0sIHN0YXRlKTtcbiAgICAgIGlmICh0eXBlID09ICd3b3JkJykgb3ZlcnJpZGUgPSAndGFnJztcbiAgICAgIGVsc2UgaWYgKHR5cGUgPT0gJ2hhc2gnKSBvdmVycmlkZSA9ICdidWlsdGluJztcbiAgICAgIHJldHVybiAnYXQnO1xuICAgIH07XG5cbiAgICBzdGF0ZXMuaW50ZXJwb2xhdGlvbiA9IGZ1bmN0aW9uICh0eXBlLCBzdHJlYW0sIHN0YXRlKSB7XG4gICAgICBpZiAodHlwZSA9PSAnfScpIHJldHVybiBwb3BDb250ZXh0KHN0YXRlKTtcbiAgICAgIGlmICh0eXBlID09ICd7JyB8fCB0eXBlID09ICc7JykgcmV0dXJuIHBvcEFuZFBhc3ModHlwZSwgc3RyZWFtLCBzdGF0ZSk7XG4gICAgICBpZiAodHlwZSA9PSAnd29yZCcpIG92ZXJyaWRlID0gJ3ZhcmlhYmxlJztcbiAgICAgIGVsc2UgaWYgKHR5cGUgIT0gJ3ZhcmlhYmxlJyAmJiB0eXBlICE9ICcoJyAmJiB0eXBlICE9ICcpJykgb3ZlcnJpZGUgPSAnZXJyb3InO1xuICAgICAgcmV0dXJuICdpbnRlcnBvbGF0aW9uJztcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0U3RhdGUoYmFzZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRva2VuaXplOiBudWxsLFxuICAgICAgICAgIHN0YXRlOiBpbmxpbmUgPyAnYmxvY2snIDogJ3RvcCcsXG4gICAgICAgICAgc3RhdGVBcmc6IG51bGwsXG4gICAgICAgICAgY29udGV4dDogbmV3IENvbnRleHQoaW5saW5lID8gJ2Jsb2NrJyA6ICd0b3AnLCBiYXNlIHx8IDAsIG51bGwpLFxuICAgICAgICB9O1xuICAgICAgfSxcblxuICAgICAgdG9rZW4oc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgICBpZiAoIXN0YXRlLnRva2VuaXplICYmIHN0cmVhbS5lYXRTcGFjZSgpKSByZXR1cm4gbnVsbDtcbiAgICAgICAgbGV0IHN0eWxlID0gKHN0YXRlLnRva2VuaXplIHx8IHRva2VuQmFzZSkoc3RyZWFtLCBzdGF0ZSk7XG4gICAgICAgIGlmIChzdHlsZSAmJiB0eXBlb2Ygc3R5bGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgdHlwZSA9IHN0eWxlWzFdO1xuICAgICAgICAgIHN0eWxlID0gc3R5bGVbMF07XG4gICAgICAgIH1cbiAgICAgICAgb3ZlcnJpZGUgPSBzdHlsZTtcbiAgICAgICAgaWYgKHR5cGUgIT0gJ2NvbW1lbnQnKSB7XG4gICAgICAgICAgc3RhdGUuc3RhdGUgPSBzdGF0ZXNbc3RhdGUuc3RhdGVdKHR5cGUsIHN0cmVhbSwgc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdmVycmlkZTtcbiAgICAgIH0sXG5cbiAgICAgIGluZGVudChzdGF0ZSwgdGV4dEFmdGVyKSB7XG4gICAgICAgIGxldCBjeCA9IHN0YXRlLmNvbnRleHQ7XG4gICAgICAgIGNvbnN0IGNoID0gdGV4dEFmdGVyICYmIHRleHRBZnRlci5jaGFyQXQoMCk7XG4gICAgICAgIGxldCBpbmRlbnQgPSBjeC5pbmRlbnQ7XG4gICAgICAgIGlmIChjeC50eXBlID09ICdwcm9wJyAmJiAoY2ggPT0gJ30nIHx8IGNoID09ICcpJykpIGN4ID0gY3gucHJldjtcbiAgICAgICAgaWYgKGN4LnByZXYpIHtcbiAgICAgICAgICBpZiAoY2ggPT0gJ30nICYmIChjeC50eXBlID09ICdibG9jaycgfHwgY3gudHlwZSA9PSAndG9wJ1xuICAgICAgICAgICAgfHwgY3gudHlwZSA9PSAnaW50ZXJwb2xhdGlvbicgfHwgY3gudHlwZSA9PSAncmVzdHJpY3RlZF9hdEJsb2NrJykpIHtcbiAgICAgICAgICAgIC8vIFJlc3VtZSBpbmRlbnRhdGlvbiBmcm9tIHBhcmVudCBjb250ZXh0LlxuICAgICAgICAgICAgY3ggPSBjeC5wcmV2O1xuICAgICAgICAgICAgaW5kZW50ID0gY3guaW5kZW50O1xuICAgICAgICAgIH0gZWxzZSBpZiAoY2ggPT0gJyknICYmIChjeC50eXBlID09ICdwYXJlbnMnIHx8IGN4LnR5cGUgPT0gJ2F0QmxvY2tfcGFyZW5zJylcbiAgICAgICAgICAgIHx8IGNoID09ICd7JyAmJiAoY3gudHlwZSA9PSAnYXQnIHx8IGN4LnR5cGUgPT0gJ2F0QmxvY2snKSkge1xuICAgICAgICAgICAgLy8gRGVkZW50IHJlbGF0aXZlIHRvIGN1cnJlbnQgY29udGV4dC5cbiAgICAgICAgICAgIGluZGVudCA9IE1hdGgubWF4KDAsIGN4LmluZGVudCAtIGluZGVudFVuaXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5kZW50O1xuICAgICAgfSxcblxuICAgICAgZWxlY3RyaWNDaGFyczogJ30nLFxuICAgICAgYmxvY2tDb21tZW50U3RhcnQ6ICcvKicsXG4gICAgICBibG9ja0NvbW1lbnRFbmQ6ICcqLycsXG4gICAgICBibG9ja0NvbW1lbnRDb250aW51ZTogJyAqICcsXG4gICAgICBsaW5lQ29tbWVudCxcbiAgICAgIGZvbGQ6ICdicmFjZScsXG4gICAgfTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24ga2V5U2V0KGFycmF5KSB7XG4gICAgY29uc3Qga2V5cyA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyArK2kpIHtcbiAgICAgIGtleXNbYXJyYXlbaV0udG9Mb3dlckNhc2UoKV0gPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4ga2V5cztcbiAgfVxuXG4gIGNvbnN0IGRvY3VtZW50VHlwZXNfID0gW1xuICAgICdkb21haW4nLCAncmVnZXhwJywgJ3VybCcsICd1cmwtcHJlZml4JyxcbiAgXTtcbiAgY29uc3QgZG9jdW1lbnRUeXBlcyA9IGtleVNldChkb2N1bWVudFR5cGVzXyk7XG5cbiAgY29uc3QgbWVkaWFUeXBlc18gPSBbXG4gICAgJ2FsbCcsICdhdXJhbCcsICdicmFpbGxlJywgJ2hhbmRoZWxkJywgJ3ByaW50JywgJ3Byb2plY3Rpb24nLCAnc2NyZWVuJyxcbiAgICAndHR5JywgJ3R2JywgJ2VtYm9zc2VkJyxcbiAgXTtcbiAgY29uc3QgbWVkaWFUeXBlcyA9IGtleVNldChtZWRpYVR5cGVzXyk7XG5cbiAgY29uc3QgbWVkaWFGZWF0dXJlc18gPSBbXG4gICAgJ3dpZHRoJywgJ21pbi13aWR0aCcsICdtYXgtd2lkdGgnLCAnaGVpZ2h0JywgJ21pbi1oZWlnaHQnLCAnbWF4LWhlaWdodCcsXG4gICAgJ2RldmljZS13aWR0aCcsICdtaW4tZGV2aWNlLXdpZHRoJywgJ21heC1kZXZpY2Utd2lkdGgnLCAnZGV2aWNlLWhlaWdodCcsXG4gICAgJ21pbi1kZXZpY2UtaGVpZ2h0JywgJ21heC1kZXZpY2UtaGVpZ2h0JywgJ2FzcGVjdC1yYXRpbycsXG4gICAgJ21pbi1hc3BlY3QtcmF0aW8nLCAnbWF4LWFzcGVjdC1yYXRpbycsICdkZXZpY2UtYXNwZWN0LXJhdGlvJyxcbiAgICAnbWluLWRldmljZS1hc3BlY3QtcmF0aW8nLCAnbWF4LWRldmljZS1hc3BlY3QtcmF0aW8nLCAnY29sb3InLCAnbWluLWNvbG9yJyxcbiAgICAnbWF4LWNvbG9yJywgJ2NvbG9yLWluZGV4JywgJ21pbi1jb2xvci1pbmRleCcsICdtYXgtY29sb3ItaW5kZXgnLFxuICAgICdtb25vY2hyb21lJywgJ21pbi1tb25vY2hyb21lJywgJ21heC1tb25vY2hyb21lJywgJ3Jlc29sdXRpb24nLFxuICAgICdtaW4tcmVzb2x1dGlvbicsICdtYXgtcmVzb2x1dGlvbicsICdzY2FuJywgJ2dyaWQnLCAnb3JpZW50YXRpb24nLFxuICAgICdkZXZpY2UtcGl4ZWwtcmF0aW8nLCAnbWluLWRldmljZS1waXhlbC1yYXRpbycsICdtYXgtZGV2aWNlLXBpeGVsLXJhdGlvJyxcbiAgICAncG9pbnRlcicsICdhbnktcG9pbnRlcicsICdob3ZlcicsICdhbnktaG92ZXInLFxuICBdO1xuICBjb25zdCBtZWRpYUZlYXR1cmVzID0ga2V5U2V0KG1lZGlhRmVhdHVyZXNfKTtcblxuICBjb25zdCBtZWRpYVZhbHVlS2V5d29yZHNfID0gW1xuICAgICdsYW5kc2NhcGUnLCAncG9ydHJhaXQnLCAnbm9uZScsICdjb2Fyc2UnLCAnZmluZScsICdvbi1kZW1hbmQnLCAnaG92ZXInLFxuICAgICdpbnRlcmxhY2UnLCAncHJvZ3Jlc3NpdmUnLFxuICBdO1xuICBjb25zdCBtZWRpYVZhbHVlS2V5d29yZHMgPSBrZXlTZXQobWVkaWFWYWx1ZUtleXdvcmRzXyk7XG5cbiAgY29uc3QgcHJvcGVydHlLZXl3b3Jkc18gPSBbXG4gICAgJ2FsaWduLWNvbnRlbnQnLCAnYWxpZ24taXRlbXMnLCAnYWxpZ24tc2VsZicsICdhbGlnbm1lbnQtYWRqdXN0JyxcbiAgICAnYWxpZ25tZW50LWJhc2VsaW5lJywgJ2FuY2hvci1wb2ludCcsICdhbmltYXRpb24nLCAnYW5pbWF0aW9uLWRlbGF5JyxcbiAgICAnYW5pbWF0aW9uLWRpcmVjdGlvbicsICdhbmltYXRpb24tZHVyYXRpb24nLCAnYW5pbWF0aW9uLWZpbGwtbW9kZScsXG4gICAgJ2FuaW1hdGlvbi1pdGVyYXRpb24tY291bnQnLCAnYW5pbWF0aW9uLW5hbWUnLCAnYW5pbWF0aW9uLXBsYXktc3RhdGUnLFxuICAgICdhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uJywgJ2FwcGVhcmFuY2UnLCAnYXppbXV0aCcsICdiYWNrZmFjZS12aXNpYmlsaXR5JyxcbiAgICAnYmFja2dyb3VuZCcsICdiYWNrZ3JvdW5kLWF0dGFjaG1lbnQnLCAnYmFja2dyb3VuZC1ibGVuZC1tb2RlJywgJ2JhY2tncm91bmQtY2xpcCcsXG4gICAgJ2JhY2tncm91bmQtY29sb3InLCAnYmFja2dyb3VuZC1pbWFnZScsICdiYWNrZ3JvdW5kLW9yaWdpbicsICdiYWNrZ3JvdW5kLXBvc2l0aW9uJyxcbiAgICAnYmFja2dyb3VuZC1yZXBlYXQnLCAnYmFja2dyb3VuZC1zaXplJywgJ2Jhc2VsaW5lLXNoaWZ0JywgJ2JpbmRpbmcnLFxuICAgICdibGVlZCcsICdib29rbWFyay1sYWJlbCcsICdib29rbWFyay1sZXZlbCcsICdib29rbWFyay1zdGF0ZScsXG4gICAgJ2Jvb2ttYXJrLXRhcmdldCcsICdib3JkZXInLCAnYm9yZGVyLWJvdHRvbScsICdib3JkZXItYm90dG9tLWNvbG9yJyxcbiAgICAnYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1cycsICdib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1cycsXG4gICAgJ2JvcmRlci1ib3R0b20tc3R5bGUnLCAnYm9yZGVyLWJvdHRvbS13aWR0aCcsICdib3JkZXItY29sbGFwc2UnLFxuICAgICdib3JkZXItY29sb3InLCAnYm9yZGVyLWltYWdlJywgJ2JvcmRlci1pbWFnZS1vdXRzZXQnLFxuICAgICdib3JkZXItaW1hZ2UtcmVwZWF0JywgJ2JvcmRlci1pbWFnZS1zbGljZScsICdib3JkZXItaW1hZ2Utc291cmNlJyxcbiAgICAnYm9yZGVyLWltYWdlLXdpZHRoJywgJ2JvcmRlci1sZWZ0JywgJ2JvcmRlci1sZWZ0LWNvbG9yJyxcbiAgICAnYm9yZGVyLWxlZnQtc3R5bGUnLCAnYm9yZGVyLWxlZnQtd2lkdGgnLCAnYm9yZGVyLXJhZGl1cycsICdib3JkZXItcmlnaHQnLFxuICAgICdib3JkZXItcmlnaHQtY29sb3InLCAnYm9yZGVyLXJpZ2h0LXN0eWxlJywgJ2JvcmRlci1yaWdodC13aWR0aCcsXG4gICAgJ2JvcmRlci1zcGFjaW5nJywgJ2JvcmRlci1zdHlsZScsICdib3JkZXItdG9wJywgJ2JvcmRlci10b3AtY29sb3InLFxuICAgICdib3JkZXItdG9wLWxlZnQtcmFkaXVzJywgJ2JvcmRlci10b3AtcmlnaHQtcmFkaXVzJywgJ2JvcmRlci10b3Atc3R5bGUnLFxuICAgICdib3JkZXItdG9wLXdpZHRoJywgJ2JvcmRlci13aWR0aCcsICdib3R0b20nLCAnYm94LWRlY29yYXRpb24tYnJlYWsnLFxuICAgICdib3gtc2hhZG93JywgJ2JveC1zaXppbmcnLCAnYnJlYWstYWZ0ZXInLCAnYnJlYWstYmVmb3JlJywgJ2JyZWFrLWluc2lkZScsXG4gICAgJ2NhcHRpb24tc2lkZScsICdjYXJldC1jb2xvcicsICdjbGVhcicsICdjbGlwJywgJ2NvbG9yJywgJ2NvbG9yLXByb2ZpbGUnLCAnY29sdW1uLWNvdW50JyxcbiAgICAnY29sdW1uLWZpbGwnLCAnY29sdW1uLWdhcCcsICdjb2x1bW4tcnVsZScsICdjb2x1bW4tcnVsZS1jb2xvcicsXG4gICAgJ2NvbHVtbi1ydWxlLXN0eWxlJywgJ2NvbHVtbi1ydWxlLXdpZHRoJywgJ2NvbHVtbi1zcGFuJywgJ2NvbHVtbi13aWR0aCcsXG4gICAgJ2NvbHVtbnMnLCAnY29udGVudCcsICdjb3VudGVyLWluY3JlbWVudCcsICdjb3VudGVyLXJlc2V0JywgJ2Nyb3AnLCAnY3VlJyxcbiAgICAnY3VlLWFmdGVyJywgJ2N1ZS1iZWZvcmUnLCAnY3Vyc29yJywgJ2RpcmVjdGlvbicsICdkaXNwbGF5JyxcbiAgICAnZG9taW5hbnQtYmFzZWxpbmUnLCAnZHJvcC1pbml0aWFsLWFmdGVyLWFkanVzdCcsXG4gICAgJ2Ryb3AtaW5pdGlhbC1hZnRlci1hbGlnbicsICdkcm9wLWluaXRpYWwtYmVmb3JlLWFkanVzdCcsXG4gICAgJ2Ryb3AtaW5pdGlhbC1iZWZvcmUtYWxpZ24nLCAnZHJvcC1pbml0aWFsLXNpemUnLCAnZHJvcC1pbml0aWFsLXZhbHVlJyxcbiAgICAnZWxldmF0aW9uJywgJ2VtcHR5LWNlbGxzJywgJ2ZpdCcsICdmaXQtcG9zaXRpb24nLCAnZmxleCcsICdmbGV4LWJhc2lzJyxcbiAgICAnZmxleC1kaXJlY3Rpb24nLCAnZmxleC1mbG93JywgJ2ZsZXgtZ3JvdycsICdmbGV4LXNocmluaycsICdmbGV4LXdyYXAnLFxuICAgICdmbG9hdCcsICdmbG9hdC1vZmZzZXQnLCAnZmxvdy1mcm9tJywgJ2Zsb3ctaW50bycsICdmb250JywgJ2ZvbnQtZmVhdHVyZS1zZXR0aW5ncycsXG4gICAgJ2ZvbnQtZmFtaWx5JywgJ2ZvbnQta2VybmluZycsICdmb250LWxhbmd1YWdlLW92ZXJyaWRlJywgJ2ZvbnQtc2l6ZScsICdmb250LXNpemUtYWRqdXN0JyxcbiAgICAnZm9udC1zdHJldGNoJywgJ2ZvbnQtc3R5bGUnLCAnZm9udC1zeW50aGVzaXMnLCAnZm9udC12YXJpYW50JyxcbiAgICAnZm9udC12YXJpYW50LWFsdGVybmF0ZXMnLCAnZm9udC12YXJpYW50LWNhcHMnLCAnZm9udC12YXJpYW50LWVhc3QtYXNpYW4nLFxuICAgICdmb250LXZhcmlhbnQtbGlnYXR1cmVzJywgJ2ZvbnQtdmFyaWFudC1udW1lcmljJywgJ2ZvbnQtdmFyaWFudC1wb3NpdGlvbicsXG4gICAgJ2ZvbnQtd2VpZ2h0JywgJ2dyaWQnLCAnZ3JpZC1hcmVhJywgJ2dyaWQtYXV0by1jb2x1bW5zJywgJ2dyaWQtYXV0by1mbG93JyxcbiAgICAnZ3JpZC1hdXRvLXJvd3MnLCAnZ3JpZC1jb2x1bW4nLCAnZ3JpZC1jb2x1bW4tZW5kJywgJ2dyaWQtY29sdW1uLWdhcCcsXG4gICAgJ2dyaWQtY29sdW1uLXN0YXJ0JywgJ2dyaWQtZ2FwJywgJ2dyaWQtcm93JywgJ2dyaWQtcm93LWVuZCcsICdncmlkLXJvdy1nYXAnLFxuICAgICdncmlkLXJvdy1zdGFydCcsICdncmlkLXRlbXBsYXRlJywgJ2dyaWQtdGVtcGxhdGUtYXJlYXMnLCAnZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zJyxcbiAgICAnZ3JpZC10ZW1wbGF0ZS1yb3dzJywgJ2hhbmdpbmctcHVuY3R1YXRpb24nLCAnaGVpZ2h0JywgJ2h5cGhlbnMnLFxuICAgICdpY29uJywgJ2ltYWdlLW9yaWVudGF0aW9uJywgJ2ltYWdlLXJlbmRlcmluZycsICdpbWFnZS1yZXNvbHV0aW9uJyxcbiAgICAnaW5saW5lLWJveC1hbGlnbicsICdqdXN0aWZ5LWNvbnRlbnQnLCAnanVzdGlmeS1pdGVtcycsICdqdXN0aWZ5LXNlbGYnLCAnbGVmdCcsICdsZXR0ZXItc3BhY2luZycsXG4gICAgJ2xpbmUtYnJlYWsnLCAnbGluZS1oZWlnaHQnLCAnbGluZS1zdGFja2luZycsICdsaW5lLXN0YWNraW5nLXJ1YnknLFxuICAgICdsaW5lLXN0YWNraW5nLXNoaWZ0JywgJ2xpbmUtc3RhY2tpbmctc3RyYXRlZ3knLCAnbGlzdC1zdHlsZScsXG4gICAgJ2xpc3Qtc3R5bGUtaW1hZ2UnLCAnbGlzdC1zdHlsZS1wb3NpdGlvbicsICdsaXN0LXN0eWxlLXR5cGUnLCAnbWFyZ2luJyxcbiAgICAnbWFyZ2luLWJvdHRvbScsICdtYXJnaW4tbGVmdCcsICdtYXJnaW4tcmlnaHQnLCAnbWFyZ2luLXRvcCcsXG4gICAgJ21hcmtzJywgJ21hcnF1ZWUtZGlyZWN0aW9uJywgJ21hcnF1ZWUtbG9vcCcsXG4gICAgJ21hcnF1ZWUtcGxheS1jb3VudCcsICdtYXJxdWVlLXNwZWVkJywgJ21hcnF1ZWUtc3R5bGUnLCAnbWF4LWhlaWdodCcsXG4gICAgJ21heC13aWR0aCcsICdtaW4taGVpZ2h0JywgJ21pbi13aWR0aCcsICdtaXgtYmxlbmQtbW9kZScsICdtb3ZlLXRvJywgJ25hdi1kb3duJywgJ25hdi1pbmRleCcsXG4gICAgJ25hdi1sZWZ0JywgJ25hdi1yaWdodCcsICduYXYtdXAnLCAnb2JqZWN0LWZpdCcsICdvYmplY3QtcG9zaXRpb24nLFxuICAgICdvcGFjaXR5JywgJ29yZGVyJywgJ29ycGhhbnMnLCAnb3V0bGluZScsXG4gICAgJ291dGxpbmUtY29sb3InLCAnb3V0bGluZS1vZmZzZXQnLCAnb3V0bGluZS1zdHlsZScsICdvdXRsaW5lLXdpZHRoJyxcbiAgICAnb3ZlcmZsb3cnLCAnb3ZlcmZsb3ctc3R5bGUnLCAnb3ZlcmZsb3ctd3JhcCcsICdvdmVyZmxvdy14JywgJ292ZXJmbG93LXknLFxuICAgICdwYWRkaW5nJywgJ3BhZGRpbmctYm90dG9tJywgJ3BhZGRpbmctbGVmdCcsICdwYWRkaW5nLXJpZ2h0JywgJ3BhZGRpbmctdG9wJyxcbiAgICAncGFnZScsICdwYWdlLWJyZWFrLWFmdGVyJywgJ3BhZ2UtYnJlYWstYmVmb3JlJywgJ3BhZ2UtYnJlYWstaW5zaWRlJyxcbiAgICAncGFnZS1wb2xpY3knLCAncGF1c2UnLCAncGF1c2UtYWZ0ZXInLCAncGF1c2UtYmVmb3JlJywgJ3BlcnNwZWN0aXZlJyxcbiAgICAncGVyc3BlY3RpdmUtb3JpZ2luJywgJ3BpdGNoJywgJ3BpdGNoLXJhbmdlJywgJ3BsYWNlLWNvbnRlbnQnLCAncGxhY2UtaXRlbXMnLCAncGxhY2Utc2VsZicsICdwbGF5LWR1cmluZycsICdwb3NpdGlvbicsXG4gICAgJ3ByZXNlbnRhdGlvbi1sZXZlbCcsICdwdW5jdHVhdGlvbi10cmltJywgJ3F1b3RlcycsICdyZWdpb24tYnJlYWstYWZ0ZXInLFxuICAgICdyZWdpb24tYnJlYWstYmVmb3JlJywgJ3JlZ2lvbi1icmVhay1pbnNpZGUnLCAncmVnaW9uLWZyYWdtZW50JyxcbiAgICAncmVuZGVyaW5nLWludGVudCcsICdyZXNpemUnLCAncmVzdCcsICdyZXN0LWFmdGVyJywgJ3Jlc3QtYmVmb3JlJywgJ3JpY2huZXNzJyxcbiAgICAncmlnaHQnLCAncm90YXRpb24nLCAncm90YXRpb24tcG9pbnQnLCAncnVieS1hbGlnbicsICdydWJ5LW92ZXJoYW5nJyxcbiAgICAncnVieS1wb3NpdGlvbicsICdydWJ5LXNwYW4nLCAnc2hhcGUtaW1hZ2UtdGhyZXNob2xkJywgJ3NoYXBlLWluc2lkZScsICdzaGFwZS1tYXJnaW4nLFxuICAgICdzaGFwZS1vdXRzaWRlJywgJ3NpemUnLCAnc3BlYWsnLCAnc3BlYWstYXMnLCAnc3BlYWstaGVhZGVyJyxcbiAgICAnc3BlYWstbnVtZXJhbCcsICdzcGVhay1wdW5jdHVhdGlvbicsICdzcGVlY2gtcmF0ZScsICdzdHJlc3MnLCAnc3RyaW5nLXNldCcsXG4gICAgJ3RhYi1zaXplJywgJ3RhYmxlLWxheW91dCcsICd0YXJnZXQnLCAndGFyZ2V0LW5hbWUnLCAndGFyZ2V0LW5ldycsXG4gICAgJ3RhcmdldC1wb3NpdGlvbicsICd0ZXh0LWFsaWduJywgJ3RleHQtYWxpZ24tbGFzdCcsICd0ZXh0LWRlY29yYXRpb24nLFxuICAgICd0ZXh0LWRlY29yYXRpb24tY29sb3InLCAndGV4dC1kZWNvcmF0aW9uLWxpbmUnLCAndGV4dC1kZWNvcmF0aW9uLXNraXAnLFxuICAgICd0ZXh0LWRlY29yYXRpb24tc3R5bGUnLCAndGV4dC1lbXBoYXNpcycsICd0ZXh0LWVtcGhhc2lzLWNvbG9yJyxcbiAgICAndGV4dC1lbXBoYXNpcy1wb3NpdGlvbicsICd0ZXh0LWVtcGhhc2lzLXN0eWxlJywgJ3RleHQtaGVpZ2h0JyxcbiAgICAndGV4dC1pbmRlbnQnLCAndGV4dC1qdXN0aWZ5JywgJ3RleHQtb3V0bGluZScsICd0ZXh0LW92ZXJmbG93JywgJ3RleHQtc2hhZG93JyxcbiAgICAndGV4dC1zaXplLWFkanVzdCcsICd0ZXh0LXNwYWNlLWNvbGxhcHNlJywgJ3RleHQtdHJhbnNmb3JtJywgJ3RleHQtdW5kZXJsaW5lLXBvc2l0aW9uJyxcbiAgICAndGV4dC13cmFwJywgJ3RvcCcsICd0cmFuc2Zvcm0nLCAndHJhbnNmb3JtLW9yaWdpbicsICd0cmFuc2Zvcm0tc3R5bGUnLFxuICAgICd0cmFuc2l0aW9uJywgJ3RyYW5zaXRpb24tZGVsYXknLCAndHJhbnNpdGlvbi1kdXJhdGlvbicsXG4gICAgJ3RyYW5zaXRpb24tcHJvcGVydHknLCAndHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nLCAndW5pY29kZS1iaWRpJyxcbiAgICAndXNlci1zZWxlY3QnLCAndmVydGljYWwtYWxpZ24nLCAndmlzaWJpbGl0eScsICd2b2ljZS1iYWxhbmNlJywgJ3ZvaWNlLWR1cmF0aW9uJyxcbiAgICAndm9pY2UtZmFtaWx5JywgJ3ZvaWNlLXBpdGNoJywgJ3ZvaWNlLXJhbmdlJywgJ3ZvaWNlLXJhdGUnLCAndm9pY2Utc3RyZXNzJyxcbiAgICAndm9pY2Utdm9sdW1lJywgJ3ZvbHVtZScsICd3aGl0ZS1zcGFjZScsICd3aWRvd3MnLCAnd2lkdGgnLCAnd2lsbC1jaGFuZ2UnLCAnd29yZC1icmVhaycsXG4gICAgJ3dvcmQtc3BhY2luZycsICd3b3JkLXdyYXAnLCAnei1pbmRleCcsXG4gICAgLy8gU1ZHLXNwZWNpZmljXG4gICAgJ2NsaXAtcGF0aCcsICdjbGlwLXJ1bGUnLCAnbWFzaycsICdlbmFibGUtYmFja2dyb3VuZCcsICdmaWx0ZXInLCAnZmxvb2QtY29sb3InLFxuICAgICdmbG9vZC1vcGFjaXR5JywgJ2xpZ2h0aW5nLWNvbG9yJywgJ3N0b3AtY29sb3InLCAnc3RvcC1vcGFjaXR5JywgJ3BvaW50ZXItZXZlbnRzJyxcbiAgICAnY29sb3ItaW50ZXJwb2xhdGlvbicsICdjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnMnLFxuICAgICdjb2xvci1yZW5kZXJpbmcnLCAnZmlsbCcsICdmaWxsLW9wYWNpdHknLCAnZmlsbC1ydWxlJywgJ2ltYWdlLXJlbmRlcmluZycsXG4gICAgJ21hcmtlcicsICdtYXJrZXItZW5kJywgJ21hcmtlci1taWQnLCAnbWFya2VyLXN0YXJ0JywgJ3NoYXBlLXJlbmRlcmluZycsICdzdHJva2UnLFxuICAgICdzdHJva2UtZGFzaGFycmF5JywgJ3N0cm9rZS1kYXNob2Zmc2V0JywgJ3N0cm9rZS1saW5lY2FwJywgJ3N0cm9rZS1saW5lam9pbicsXG4gICAgJ3N0cm9rZS1taXRlcmxpbWl0JywgJ3N0cm9rZS1vcGFjaXR5JywgJ3N0cm9rZS13aWR0aCcsICd0ZXh0LXJlbmRlcmluZycsXG4gICAgJ2Jhc2VsaW5lLXNoaWZ0JywgJ2RvbWluYW50LWJhc2VsaW5lJywgJ2dseXBoLW9yaWVudGF0aW9uLWhvcml6b250YWwnLFxuICAgICdnbHlwaC1vcmllbnRhdGlvbi12ZXJ0aWNhbCcsICd0ZXh0LWFuY2hvcicsICd3cml0aW5nLW1vZGUnLFxuICBdO1xuICBjb25zdCBwcm9wZXJ0eUtleXdvcmRzID0ga2V5U2V0KHByb3BlcnR5S2V5d29yZHNfKTtcblxuICBjb25zdCBub25TdGFuZGFyZFByb3BlcnR5S2V5d29yZHNfID0gW1xuICAgICdzY3JvbGxiYXItYXJyb3ctY29sb3InLCAnc2Nyb2xsYmFyLWJhc2UtY29sb3InLCAnc2Nyb2xsYmFyLWRhcmstc2hhZG93LWNvbG9yJyxcbiAgICAnc2Nyb2xsYmFyLWZhY2UtY29sb3InLCAnc2Nyb2xsYmFyLWhpZ2hsaWdodC1jb2xvcicsICdzY3JvbGxiYXItc2hhZG93LWNvbG9yJyxcbiAgICAnc2Nyb2xsYmFyLTNkLWxpZ2h0LWNvbG9yJywgJ3Njcm9sbGJhci10cmFjay1jb2xvcicsICdzaGFwZS1pbnNpZGUnLFxuICAgICdzZWFyY2hmaWVsZC1jYW5jZWwtYnV0dG9uJywgJ3NlYXJjaGZpZWxkLWRlY29yYXRpb24nLCAnc2VhcmNoZmllbGQtcmVzdWx0cy1idXR0b24nLFxuICAgICdzZWFyY2hmaWVsZC1yZXN1bHRzLWRlY29yYXRpb24nLCAnem9vbScsXG4gIF07XG4gIGNvbnN0IG5vblN0YW5kYXJkUHJvcGVydHlLZXl3b3JkcyA9IGtleVNldChub25TdGFuZGFyZFByb3BlcnR5S2V5d29yZHNfKTtcblxuICBjb25zdCBmb250UHJvcGVydGllc18gPSBbXG4gICAgJ2ZvbnQtZmFtaWx5JywgJ3NyYycsICd1bmljb2RlLXJhbmdlJywgJ2ZvbnQtdmFyaWFudCcsICdmb250LWZlYXR1cmUtc2V0dGluZ3MnLFxuICAgICdmb250LXN0cmV0Y2gnLCAnZm9udC13ZWlnaHQnLCAnZm9udC1zdHlsZScsXG4gIF07XG4gIGNvbnN0IGZvbnRQcm9wZXJ0aWVzID0ga2V5U2V0KGZvbnRQcm9wZXJ0aWVzXyk7XG5cbiAgY29uc3QgY291bnRlckRlc2NyaXB0b3JzXyA9IFtcbiAgICAnYWRkaXRpdmUtc3ltYm9scycsICdmYWxsYmFjaycsICduZWdhdGl2ZScsICdwYWQnLCAncHJlZml4JywgJ3JhbmdlJyxcbiAgICAnc3BlYWstYXMnLCAnc3VmZml4JywgJ3N5bWJvbHMnLCAnc3lzdGVtJyxcbiAgXTtcbiAgY29uc3QgY291bnRlckRlc2NyaXB0b3JzID0ga2V5U2V0KGNvdW50ZXJEZXNjcmlwdG9yc18pO1xuXG4gIGNvbnN0IGNvbG9yS2V5d29yZHNfID0gW1xuICAgICdhbGljZWJsdWUnLCAnYW50aXF1ZXdoaXRlJywgJ2FxdWEnLCAnYXF1YW1hcmluZScsICdhenVyZScsICdiZWlnZScsXG4gICAgJ2Jpc3F1ZScsICdibGFjaycsICdibGFuY2hlZGFsbW9uZCcsICdibHVlJywgJ2JsdWV2aW9sZXQnLCAnYnJvd24nLFxuICAgICdidXJseXdvb2QnLCAnY2FkZXRibHVlJywgJ2NoYXJ0cmV1c2UnLCAnY2hvY29sYXRlJywgJ2NvcmFsJywgJ2Nvcm5mbG93ZXJibHVlJyxcbiAgICAnY29ybnNpbGsnLCAnY3JpbXNvbicsICdjeWFuJywgJ2RhcmtibHVlJywgJ2RhcmtjeWFuJywgJ2Rhcmtnb2xkZW5yb2QnLFxuICAgICdkYXJrZ3JheScsICdkYXJrZ3JlZW4nLCAnZGFya2toYWtpJywgJ2RhcmttYWdlbnRhJywgJ2RhcmtvbGl2ZWdyZWVuJyxcbiAgICAnZGFya29yYW5nZScsICdkYXJrb3JjaGlkJywgJ2RhcmtyZWQnLCAnZGFya3NhbG1vbicsICdkYXJrc2VhZ3JlZW4nLFxuICAgICdkYXJrc2xhdGVibHVlJywgJ2RhcmtzbGF0ZWdyYXknLCAnZGFya3R1cnF1b2lzZScsICdkYXJrdmlvbGV0JyxcbiAgICAnZGVlcHBpbmsnLCAnZGVlcHNreWJsdWUnLCAnZGltZ3JheScsICdkb2RnZXJibHVlJywgJ2ZpcmVicmljaycsXG4gICAgJ2Zsb3JhbHdoaXRlJywgJ2ZvcmVzdGdyZWVuJywgJ2Z1Y2hzaWEnLCAnZ2FpbnNib3JvJywgJ2dob3N0d2hpdGUnLFxuICAgICdnb2xkJywgJ2dvbGRlbnJvZCcsICdncmF5JywgJ2dyZXknLCAnZ3JlZW4nLCAnZ3JlZW55ZWxsb3cnLCAnaG9uZXlkZXcnLFxuICAgICdob3RwaW5rJywgJ2luZGlhbnJlZCcsICdpbmRpZ28nLCAnaXZvcnknLCAna2hha2knLCAnbGF2ZW5kZXInLFxuICAgICdsYXZlbmRlcmJsdXNoJywgJ2xhd25ncmVlbicsICdsZW1vbmNoaWZmb24nLCAnbGlnaHRibHVlJywgJ2xpZ2h0Y29yYWwnLFxuICAgICdsaWdodGN5YW4nLCAnbGlnaHRnb2xkZW5yb2R5ZWxsb3cnLCAnbGlnaHRncmF5JywgJ2xpZ2h0Z3JlZW4nLCAnbGlnaHRwaW5rJyxcbiAgICAnbGlnaHRzYWxtb24nLCAnbGlnaHRzZWFncmVlbicsICdsaWdodHNreWJsdWUnLCAnbGlnaHRzbGF0ZWdyYXknLFxuICAgICdsaWdodHN0ZWVsYmx1ZScsICdsaWdodHllbGxvdycsICdsaW1lJywgJ2xpbWVncmVlbicsICdsaW5lbicsICdtYWdlbnRhJyxcbiAgICAnbWFyb29uJywgJ21lZGl1bWFxdWFtYXJpbmUnLCAnbWVkaXVtYmx1ZScsICdtZWRpdW1vcmNoaWQnLCAnbWVkaXVtcHVycGxlJyxcbiAgICAnbWVkaXVtc2VhZ3JlZW4nLCAnbWVkaXVtc2xhdGVibHVlJywgJ21lZGl1bXNwcmluZ2dyZWVuJywgJ21lZGl1bXR1cnF1b2lzZScsXG4gICAgJ21lZGl1bXZpb2xldHJlZCcsICdtaWRuaWdodGJsdWUnLCAnbWludGNyZWFtJywgJ21pc3R5cm9zZScsICdtb2NjYXNpbicsXG4gICAgJ25hdmFqb3doaXRlJywgJ25hdnknLCAnb2xkbGFjZScsICdvbGl2ZScsICdvbGl2ZWRyYWInLCAnb3JhbmdlJywgJ29yYW5nZXJlZCcsXG4gICAgJ29yY2hpZCcsICdwYWxlZ29sZGVucm9kJywgJ3BhbGVncmVlbicsICdwYWxldHVycXVvaXNlJywgJ3BhbGV2aW9sZXRyZWQnLFxuICAgICdwYXBheWF3aGlwJywgJ3BlYWNocHVmZicsICdwZXJ1JywgJ3BpbmsnLCAncGx1bScsICdwb3dkZXJibHVlJyxcbiAgICAncHVycGxlJywgJ3JlYmVjY2FwdXJwbGUnLCAncmVkJywgJ3Jvc3licm93bicsICdyb3lhbGJsdWUnLCAnc2FkZGxlYnJvd24nLFxuICAgICdzYWxtb24nLCAnc2FuZHlicm93bicsICdzZWFncmVlbicsICdzZWFzaGVsbCcsICdzaWVubmEnLCAnc2lsdmVyJywgJ3NreWJsdWUnLFxuICAgICdzbGF0ZWJsdWUnLCAnc2xhdGVncmF5JywgJ3Nub3cnLCAnc3ByaW5nZ3JlZW4nLCAnc3RlZWxibHVlJywgJ3RhbicsXG4gICAgJ3RlYWwnLCAndGhpc3RsZScsICd0b21hdG8nLCAndHVycXVvaXNlJywgJ3Zpb2xldCcsICd3aGVhdCcsICd3aGl0ZScsXG4gICAgJ3doaXRlc21va2UnLCAneWVsbG93JywgJ3llbGxvd2dyZWVuJyxcbiAgXTtcbiAgY29uc3QgY29sb3JLZXl3b3JkcyA9IGtleVNldChjb2xvcktleXdvcmRzXyk7XG5cbiAgY29uc3QgdmFsdWVLZXl3b3Jkc18gPSBbXG4gICAgJ2Fib3ZlJywgJ2Fic29sdXRlJywgJ2FjdGl2ZWJvcmRlcicsICdhZGRpdGl2ZScsICdhY3RpdmVjYXB0aW9uJywgJ2FmYXInLFxuICAgICdhZnRlci13aGl0ZS1zcGFjZScsICdhaGVhZCcsICdhbGlhcycsICdhbGwnLCAnYWxsLXNjcm9sbCcsICdhbHBoYWJldGljJywgJ2FsdGVybmF0ZScsXG4gICAgJ2Fsd2F5cycsICdhbWhhcmljJywgJ2FtaGFyaWMtYWJlZ2VkZScsICdhbnRpYWxpYXNlZCcsICdhcHB3b3Jrc3BhY2UnLFxuICAgICdhcmFiaWMtaW5kaWMnLCAnYXJtZW5pYW4nLCAnYXN0ZXJpc2tzJywgJ2F0dHInLCAnYXV0bycsICdhdXRvLWZsb3cnLCAnYXZvaWQnLCAnYXZvaWQtY29sdW1uJywgJ2F2b2lkLXBhZ2UnLFxuICAgICdhdm9pZC1yZWdpb24nLCAnYmFja2dyb3VuZCcsICdiYWNrd2FyZHMnLCAnYmFzZWxpbmUnLCAnYmVsb3cnLCAnYmlkaS1vdmVycmlkZScsICdiaW5hcnknLFxuICAgICdiZW5nYWxpJywgJ2JsaW5rJywgJ2Jsb2NrJywgJ2Jsb2NrLWF4aXMnLCAnYm9sZCcsICdib2xkZXInLCAnYm9yZGVyJywgJ2JvcmRlci1ib3gnLFxuICAgICdib3RoJywgJ2JvdHRvbScsICdicmVhaycsICdicmVhay1hbGwnLCAnYnJlYWstd29yZCcsICdidWxsZXRzJywgJ2J1dHRvbicsICdidXR0b24tYmV2ZWwnLFxuICAgICdidXR0b25mYWNlJywgJ2J1dHRvbmhpZ2hsaWdodCcsICdidXR0b25zaGFkb3cnLCAnYnV0dG9udGV4dCcsICdjYWxjJywgJ2NhbWJvZGlhbicsXG4gICAgJ2NhcGl0YWxpemUnLCAnY2Fwcy1sb2NrLWluZGljYXRvcicsICdjYXB0aW9uJywgJ2NhcHRpb250ZXh0JywgJ2NhcmV0JyxcbiAgICAnY2VsbCcsICdjZW50ZXInLCAnY2hlY2tib3gnLCAnY2lyY2xlJywgJ2Nqay1kZWNpbWFsJywgJ2Nqay1lYXJ0aGx5LWJyYW5jaCcsXG4gICAgJ2Nqay1oZWF2ZW5seS1zdGVtJywgJ2Nqay1pZGVvZ3JhcGhpYycsICdjbGVhcicsICdjbGlwJywgJ2Nsb3NlLXF1b3RlJyxcbiAgICAnY29sLXJlc2l6ZScsICdjb2xsYXBzZScsICdjb2xvcicsICdjb2xvci1idXJuJywgJ2NvbG9yLWRvZGdlJywgJ2NvbHVtbicsICdjb2x1bW4tcmV2ZXJzZScsXG4gICAgJ2NvbXBhY3QnLCAnY29uZGVuc2VkJywgJ2NvbnRhaW4nLCAnY29udGVudCcsICdjb250ZW50cycsXG4gICAgJ2NvbnRlbnQtYm94JywgJ2NvbnRleHQtbWVudScsICdjb250aW51b3VzJywgJ2NvcHknLCAnY291bnRlcicsICdjb3VudGVycycsICdjb3ZlcicsICdjcm9wJyxcbiAgICAnY3Jvc3MnLCAnY3Jvc3NoYWlyJywgJ2N1cnJlbnRjb2xvcicsICdjdXJzaXZlJywgJ2N5Y2xpYycsICdkYXJrZW4nLCAnZGFzaGVkJywgJ2RlY2ltYWwnLFxuICAgICdkZWNpbWFsLWxlYWRpbmctemVybycsICdkZWZhdWx0JywgJ2RlZmF1bHQtYnV0dG9uJywgJ2RlbnNlJywgJ2Rlc3RpbmF0aW9uLWF0b3AnLFxuICAgICdkZXN0aW5hdGlvbi1pbicsICdkZXN0aW5hdGlvbi1vdXQnLCAnZGVzdGluYXRpb24tb3ZlcicsICdkZXZhbmFnYXJpJywgJ2RpZmZlcmVuY2UnLFxuICAgICdkaXNjJywgJ2Rpc2NhcmQnLCAnZGlzY2xvc3VyZS1jbG9zZWQnLCAnZGlzY2xvc3VyZS1vcGVuJywgJ2RvY3VtZW50JyxcbiAgICAnZG90LWRhc2gnLCAnZG90LWRvdC1kYXNoJyxcbiAgICAnZG90dGVkJywgJ2RvdWJsZScsICdkb3duJywgJ2UtcmVzaXplJywgJ2Vhc2UnLCAnZWFzZS1pbicsICdlYXNlLWluLW91dCcsICdlYXNlLW91dCcsXG4gICAgJ2VsZW1lbnQnLCAnZWxsaXBzZScsICdlbGxpcHNpcycsICdlbWJlZCcsICdlbmQnLCAnZXRoaW9waWMnLCAnZXRoaW9waWMtYWJlZ2VkZScsXG4gICAgJ2V0aGlvcGljLWFiZWdlZGUtYW0tZXQnLCAnZXRoaW9waWMtYWJlZ2VkZS1nZXonLCAnZXRoaW9waWMtYWJlZ2VkZS10aS1lcicsXG4gICAgJ2V0aGlvcGljLWFiZWdlZGUtdGktZXQnLCAnZXRoaW9waWMtaGFsZWhhbWUtYWEtZXInLFxuICAgICdldGhpb3BpYy1oYWxlaGFtZS1hYS1ldCcsICdldGhpb3BpYy1oYWxlaGFtZS1hbS1ldCcsXG4gICAgJ2V0aGlvcGljLWhhbGVoYW1lLWdleicsICdldGhpb3BpYy1oYWxlaGFtZS1vbS1ldCcsXG4gICAgJ2V0aGlvcGljLWhhbGVoYW1lLXNpZC1ldCcsICdldGhpb3BpYy1oYWxlaGFtZS1zby1ldCcsXG4gICAgJ2V0aGlvcGljLWhhbGVoYW1lLXRpLWVyJywgJ2V0aGlvcGljLWhhbGVoYW1lLXRpLWV0JywgJ2V0aGlvcGljLWhhbGVoYW1lLXRpZycsXG4gICAgJ2V0aGlvcGljLW51bWVyaWMnLCAnZXctcmVzaXplJywgJ2V4Y2x1c2lvbicsICdleHBhbmRlZCcsICdleHRlbmRzJywgJ2V4dHJhLWNvbmRlbnNlZCcsXG4gICAgJ2V4dHJhLWV4cGFuZGVkJywgJ2ZhbnRhc3knLCAnZmFzdCcsICdmaWxsJywgJ2ZpeGVkJywgJ2ZsYXQnLCAnZmxleCcsICdmbGV4LWVuZCcsICdmbGV4LXN0YXJ0JywgJ2Zvb3Rub3RlcycsXG4gICAgJ2ZvcndhcmRzJywgJ2Zyb20nLCAnZ2VvbWV0cmljUHJlY2lzaW9uJywgJ2dlb3JnaWFuJywgJ2dyYXl0ZXh0JywgJ2dyaWQnLCAnZ3Jvb3ZlJyxcbiAgICAnZ3VqYXJhdGknLCAnZ3VybXVraGknLCAnaGFuZCcsICdoYW5ndWwnLCAnaGFuZ3VsLWNvbnNvbmFudCcsICdoYXJkLWxpZ2h0JywgJ2hlYnJldycsXG4gICAgJ2hlbHAnLCAnaGlkZGVuJywgJ2hpZGUnLCAnaGlnaGVyJywgJ2hpZ2hsaWdodCcsICdoaWdobGlnaHR0ZXh0JyxcbiAgICAnaGlyYWdhbmEnLCAnaGlyYWdhbmEtaXJvaGEnLCAnaG9yaXpvbnRhbCcsICdoc2wnLCAnaHNsYScsICdodWUnLCAnaWNvbicsICdpZ25vcmUnLFxuICAgICdpbmFjdGl2ZWJvcmRlcicsICdpbmFjdGl2ZWNhcHRpb24nLCAnaW5hY3RpdmVjYXB0aW9udGV4dCcsICdpbmZpbml0ZScsXG4gICAgJ2luZm9iYWNrZ3JvdW5kJywgJ2luZm90ZXh0JywgJ2luaGVyaXQnLCAnaW5pdGlhbCcsICdpbmxpbmUnLCAnaW5saW5lLWF4aXMnLFxuICAgICdpbmxpbmUtYmxvY2snLCAnaW5saW5lLWZsZXgnLCAnaW5saW5lLWdyaWQnLCAnaW5saW5lLXRhYmxlJywgJ2luc2V0JywgJ2luc2lkZScsICdpbnRyaW5zaWMnLCAnaW52ZXJ0JyxcbiAgICAnaXRhbGljJywgJ2phcGFuZXNlLWZvcm1hbCcsICdqYXBhbmVzZS1pbmZvcm1hbCcsICdqdXN0aWZ5JywgJ2thbm5hZGEnLFxuICAgICdrYXRha2FuYScsICdrYXRha2FuYS1pcm9oYScsICdrZWVwLWFsbCcsICdraG1lcicsXG4gICAgJ2tvcmVhbi1oYW5ndWwtZm9ybWFsJywgJ2tvcmVhbi1oYW5qYS1mb3JtYWwnLCAna29yZWFuLWhhbmphLWluZm9ybWFsJyxcbiAgICAnbGFuZHNjYXBlJywgJ2xhbycsICdsYXJnZScsICdsYXJnZXInLCAnbGVmdCcsICdsZXZlbCcsICdsaWdodGVyJywgJ2xpZ2h0ZW4nLFxuICAgICdsaW5lLXRocm91Z2gnLCAnbGluZWFyJywgJ2xpbmVhci1ncmFkaWVudCcsICdsaW5lcycsICdsaXN0LWl0ZW0nLCAnbGlzdGJveCcsICdsaXN0aXRlbScsXG4gICAgJ2xvY2FsJywgJ2xvZ2ljYWwnLCAnbG91ZCcsICdsb3dlcicsICdsb3dlci1hbHBoYScsICdsb3dlci1hcm1lbmlhbicsXG4gICAgJ2xvd2VyLWdyZWVrJywgJ2xvd2VyLWhleGFkZWNpbWFsJywgJ2xvd2VyLWxhdGluJywgJ2xvd2VyLW5vcndlZ2lhbicsXG4gICAgJ2xvd2VyLXJvbWFuJywgJ2xvd2VyY2FzZScsICdsdHInLCAnbHVtaW5vc2l0eScsICdtYWxheWFsYW0nLCAnbWF0Y2gnLCAnbWF0cml4JywgJ21hdHJpeDNkJyxcbiAgICAnbWVkaWEtY29udHJvbHMtYmFja2dyb3VuZCcsICdtZWRpYS1jdXJyZW50LXRpbWUtZGlzcGxheScsXG4gICAgJ21lZGlhLWZ1bGxzY3JlZW4tYnV0dG9uJywgJ21lZGlhLW11dGUtYnV0dG9uJywgJ21lZGlhLXBsYXktYnV0dG9uJyxcbiAgICAnbWVkaWEtcmV0dXJuLXRvLXJlYWx0aW1lLWJ1dHRvbicsICdtZWRpYS1yZXdpbmQtYnV0dG9uJyxcbiAgICAnbWVkaWEtc2Vlay1iYWNrLWJ1dHRvbicsICdtZWRpYS1zZWVrLWZvcndhcmQtYnV0dG9uJywgJ21lZGlhLXNsaWRlcicsXG4gICAgJ21lZGlhLXNsaWRlcnRodW1iJywgJ21lZGlhLXRpbWUtcmVtYWluaW5nLWRpc3BsYXknLCAnbWVkaWEtdm9sdW1lLXNsaWRlcicsXG4gICAgJ21lZGlhLXZvbHVtZS1zbGlkZXItY29udGFpbmVyJywgJ21lZGlhLXZvbHVtZS1zbGlkZXJ0aHVtYicsICdtZWRpdW0nLFxuICAgICdtZW51JywgJ21lbnVsaXN0JywgJ21lbnVsaXN0LWJ1dHRvbicsICdtZW51bGlzdC10ZXh0JyxcbiAgICAnbWVudWxpc3QtdGV4dGZpZWxkJywgJ21lbnV0ZXh0JywgJ21lc3NhZ2UtYm94JywgJ21pZGRsZScsICdtaW4taW50cmluc2ljJyxcbiAgICAnbWl4JywgJ21vbmdvbGlhbicsICdtb25vc3BhY2UnLCAnbW92ZScsICdtdWx0aXBsZScsICdtdWx0aXBseScsICdteWFubWFyJywgJ24tcmVzaXplJyxcbiAgICAnbmFycm93ZXInLCAnbmUtcmVzaXplJywgJ25lc3ctcmVzaXplJywgJ25vLWNsb3NlLXF1b3RlJywgJ25vLWRyb3AnLFxuICAgICduby1vcGVuLXF1b3RlJywgJ25vLXJlcGVhdCcsICdub25lJywgJ25vcm1hbCcsICdub3QtYWxsb3dlZCcsICdub3dyYXAnLFxuICAgICducy1yZXNpemUnLCAnbnVtYmVycycsICdudW1lcmljJywgJ253LXJlc2l6ZScsICdud3NlLXJlc2l6ZScsICdvYmxpcXVlJywgJ29jdGFsJywgJ29wYWNpdHknLCAnb3Blbi1xdW90ZScsXG4gICAgJ29wdGltaXplTGVnaWJpbGl0eScsICdvcHRpbWl6ZVNwZWVkJywgJ29yaXlhJywgJ29yb21vJywgJ291dHNldCcsXG4gICAgJ291dHNpZGUnLCAnb3V0c2lkZS1zaGFwZScsICdvdmVybGF5JywgJ292ZXJsaW5lJywgJ3BhZGRpbmcnLCAncGFkZGluZy1ib3gnLFxuICAgICdwYWludGVkJywgJ3BhZ2UnLCAncGF1c2VkJywgJ3BlcnNpYW4nLCAncGVyc3BlY3RpdmUnLCAncGx1cy1kYXJrZXInLCAncGx1cy1saWdodGVyJyxcbiAgICAncG9pbnRlcicsICdwb2x5Z29uJywgJ3BvcnRyYWl0JywgJ3ByZScsICdwcmUtbGluZScsICdwcmUtd3JhcCcsICdwcmVzZXJ2ZS0zZCcsXG4gICAgJ3Byb2dyZXNzJywgJ3B1c2gtYnV0dG9uJywgJ3JhZGlhbC1ncmFkaWVudCcsICdyYWRpbycsICdyZWFkLW9ubHknLFxuICAgICdyZWFkLXdyaXRlJywgJ3JlYWQtd3JpdGUtcGxhaW50ZXh0LW9ubHknLCAncmVjdGFuZ2xlJywgJ3JlZ2lvbicsXG4gICAgJ3JlbGF0aXZlJywgJ3JlcGVhdCcsICdyZXBlYXRpbmctbGluZWFyLWdyYWRpZW50JyxcbiAgICAncmVwZWF0aW5nLXJhZGlhbC1ncmFkaWVudCcsICdyZXBlYXQteCcsICdyZXBlYXQteScsICdyZXNldCcsICdyZXZlcnNlJyxcbiAgICAncmdiJywgJ3JnYmEnLCAncmlkZ2UnLCAncmlnaHQnLCAncm90YXRlJywgJ3JvdGF0ZTNkJywgJ3JvdGF0ZVgnLCAncm90YXRlWScsXG4gICAgJ3JvdGF0ZVonLCAncm91bmQnLCAncm93JywgJ3Jvdy1yZXNpemUnLCAncm93LXJldmVyc2UnLCAncnRsJywgJ3J1bi1pbicsICdydW5uaW5nJyxcbiAgICAncy1yZXNpemUnLCAnc2Fucy1zZXJpZicsICdzYXR1cmF0aW9uJywgJ3NjYWxlJywgJ3NjYWxlM2QnLCAnc2NhbGVYJywgJ3NjYWxlWScsICdzY2FsZVonLCAnc2NyZWVuJyxcbiAgICAnc2Nyb2xsJywgJ3Njcm9sbGJhcicsICdzY3JvbGwtcG9zaXRpb24nLCAnc2UtcmVzaXplJywgJ3NlYXJjaGZpZWxkJyxcbiAgICAnc2VhcmNoZmllbGQtY2FuY2VsLWJ1dHRvbicsICdzZWFyY2hmaWVsZC1kZWNvcmF0aW9uJyxcbiAgICAnc2VhcmNoZmllbGQtcmVzdWx0cy1idXR0b24nLCAnc2VhcmNoZmllbGQtcmVzdWx0cy1kZWNvcmF0aW9uJywgJ3NlbGYtc3RhcnQnLCAnc2VsZi1lbmQnLFxuICAgICdzZW1pLWNvbmRlbnNlZCcsICdzZW1pLWV4cGFuZGVkJywgJ3NlcGFyYXRlJywgJ3NlcmlmJywgJ3Nob3cnLCAnc2lkYW1hJyxcbiAgICAnc2ltcC1jaGluZXNlLWZvcm1hbCcsICdzaW1wLWNoaW5lc2UtaW5mb3JtYWwnLCAnc2luZ2xlJyxcbiAgICAnc2tldycsICdza2V3WCcsICdza2V3WScsICdza2lwLXdoaXRlLXNwYWNlJywgJ3NsaWRlJywgJ3NsaWRlci1ob3Jpem9udGFsJyxcbiAgICAnc2xpZGVyLXZlcnRpY2FsJywgJ3NsaWRlcnRodW1iLWhvcml6b250YWwnLCAnc2xpZGVydGh1bWItdmVydGljYWwnLCAnc2xvdycsXG4gICAgJ3NtYWxsJywgJ3NtYWxsLWNhcHMnLCAnc21hbGwtY2FwdGlvbicsICdzbWFsbGVyJywgJ3NvZnQtbGlnaHQnLCAnc29saWQnLCAnc29tYWxpJyxcbiAgICAnc291cmNlLWF0b3AnLCAnc291cmNlLWluJywgJ3NvdXJjZS1vdXQnLCAnc291cmNlLW92ZXInLCAnc3BhY2UnLCAnc3BhY2UtYXJvdW5kJywgJ3NwYWNlLWJldHdlZW4nLCAnc3BhY2UtZXZlbmx5JyxcbiAgICAnc3BlbGwtb3V0JywgJ3NxdWFyZScsXG4gICAgJ3NxdWFyZS1idXR0b24nLCAnc3RhcnQnLCAnc3RhdGljJywgJ3N0YXR1cy1iYXInLCAnc3RyZXRjaCcsICdzdHJva2UnLCAnc3ViJyxcbiAgICAnc3VicGl4ZWwtYW50aWFsaWFzZWQnLCAnc3VwZXInLCAnc3ctcmVzaXplJywgJ3N5bWJvbGljJywgJ3N5bWJvbHMnLCAnc3lzdGVtLXVpJywgJ3RhYmxlJyxcbiAgICAndGFibGUtY2FwdGlvbicsICd0YWJsZS1jZWxsJywgJ3RhYmxlLWNvbHVtbicsICd0YWJsZS1jb2x1bW4tZ3JvdXAnLFxuICAgICd0YWJsZS1mb290ZXItZ3JvdXAnLCAndGFibGUtaGVhZGVyLWdyb3VwJywgJ3RhYmxlLXJvdycsICd0YWJsZS1yb3ctZ3JvdXAnLFxuICAgICd0YW1pbCcsXG4gICAgJ3RlbHVndScsICd0ZXh0JywgJ3RleHQtYm90dG9tJywgJ3RleHQtdG9wJywgJ3RleHRhcmVhJywgJ3RleHRmaWVsZCcsICd0aGFpJyxcbiAgICAndGhpY2snLCAndGhpbicsICd0aHJlZWRkYXJrc2hhZG93JywgJ3RocmVlZGZhY2UnLCAndGhyZWVkaGlnaGxpZ2h0JyxcbiAgICAndGhyZWVkbGlnaHRzaGFkb3cnLCAndGhyZWVkc2hhZG93JywgJ3RpYmV0YW4nLCAndGlncmUnLCAndGlncmlueWEtZXInLFxuICAgICd0aWdyaW55YS1lci1hYmVnZWRlJywgJ3RpZ3JpbnlhLWV0JywgJ3RpZ3JpbnlhLWV0LWFiZWdlZGUnLCAndG8nLCAndG9wJyxcbiAgICAndHJhZC1jaGluZXNlLWZvcm1hbCcsICd0cmFkLWNoaW5lc2UtaW5mb3JtYWwnLCAndHJhbnNmb3JtJyxcbiAgICAndHJhbnNsYXRlJywgJ3RyYW5zbGF0ZTNkJywgJ3RyYW5zbGF0ZVgnLCAndHJhbnNsYXRlWScsICd0cmFuc2xhdGVaJyxcbiAgICAndHJhbnNwYXJlbnQnLCAndWx0cmEtY29uZGVuc2VkJywgJ3VsdHJhLWV4cGFuZGVkJywgJ3VuZGVybGluZScsICd1bnNldCcsICd1cCcsXG4gICAgJ3VwcGVyLWFscGhhJywgJ3VwcGVyLWFybWVuaWFuJywgJ3VwcGVyLWdyZWVrJywgJ3VwcGVyLWhleGFkZWNpbWFsJyxcbiAgICAndXBwZXItbGF0aW4nLCAndXBwZXItbm9yd2VnaWFuJywgJ3VwcGVyLXJvbWFuJywgJ3VwcGVyY2FzZScsICd1cmR1JywgJ3VybCcsXG4gICAgJ3ZhcicsICd2ZXJ0aWNhbCcsICd2ZXJ0aWNhbC10ZXh0JywgJ3Zpc2libGUnLCAndmlzaWJsZUZpbGwnLCAndmlzaWJsZVBhaW50ZWQnLFxuICAgICd2aXNpYmxlU3Ryb2tlJywgJ3Zpc3VhbCcsICd3LXJlc2l6ZScsICd3YWl0JywgJ3dhdmUnLCAnd2lkZXInLFxuICAgICd3aW5kb3cnLCAnd2luZG93ZnJhbWUnLCAnd2luZG93dGV4dCcsICd3b3JkcycsICd3cmFwJywgJ3dyYXAtcmV2ZXJzZScsICd4LWxhcmdlJywgJ3gtc21hbGwnLCAneG9yJyxcbiAgICAneHgtbGFyZ2UnLCAneHgtc21hbGwnLFxuICBdO1xuICBjb25zdCB2YWx1ZUtleXdvcmRzID0ga2V5U2V0KHZhbHVlS2V5d29yZHNfKTtcblxuICBjb25zdCBhbGxXb3JkcyA9IGRvY3VtZW50VHlwZXNfLmNvbmNhdChtZWRpYVR5cGVzXylcbiAgICAuY29uY2F0KG1lZGlhRmVhdHVyZXNfKVxuICAgIC5jb25jYXQobWVkaWFWYWx1ZUtleXdvcmRzXylcbiAgICAuY29uY2F0KHByb3BlcnR5S2V5d29yZHNfKVxuICAgIC5jb25jYXQobm9uU3RhbmRhcmRQcm9wZXJ0eUtleXdvcmRzXylcbiAgICAuY29uY2F0KGNvbG9yS2V5d29yZHNfKVxuICAgIC5jb25jYXQodmFsdWVLZXl3b3Jkc18pO1xuICBDb2RlTWlycm9yLnJlZ2lzdGVySGVscGVyKCdoaW50V29yZHMnLCAnY3NzJywgYWxsV29yZHMpO1xuXG4gIGZ1bmN0aW9uIHRva2VuQ0NvbW1lbnQoc3RyZWFtLCBzdGF0ZSkge1xuICAgIGxldCBtYXliZUVuZCA9IGZhbHNlO1xuICAgIGxldCBjaDtcbiAgICB3aGlsZSAoKGNoID0gc3RyZWFtLm5leHQoKSkgIT0gbnVsbCkge1xuICAgICAgaWYgKG1heWJlRW5kICYmIGNoID09ICcvJykge1xuICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IG51bGw7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgbWF5YmVFbmQgPSAoY2ggPT0gJyonKTtcbiAgICB9XG4gICAgcmV0dXJuIFsnY29tbWVudCcsICdjb21tZW50J107XG4gIH1cblxuICBDb2RlTWlycm9yLmRlZmluZU1JTUUoJ3RleHQvY3NzJywge1xuICAgIGRvY3VtZW50VHlwZXMsXG4gICAgbWVkaWFUeXBlcyxcbiAgICBtZWRpYUZlYXR1cmVzLFxuICAgIG1lZGlhVmFsdWVLZXl3b3JkcyxcbiAgICBwcm9wZXJ0eUtleXdvcmRzLFxuICAgIG5vblN0YW5kYXJkUHJvcGVydHlLZXl3b3JkcyxcbiAgICBmb250UHJvcGVydGllcyxcbiAgICBjb3VudGVyRGVzY3JpcHRvcnMsXG4gICAgY29sb3JLZXl3b3JkcyxcbiAgICB2YWx1ZUtleXdvcmRzLFxuICAgIHRva2VuSG9va3M6IHtcbiAgICAgICcvJzogZnVuY3Rpb24gKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgICAgaWYgKCFzdHJlYW0uZWF0KCcqJykpIHJldHVybiBmYWxzZTtcbiAgICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlbkNDb21tZW50O1xuICAgICAgICByZXR1cm4gdG9rZW5DQ29tbWVudChzdHJlYW0sIHN0YXRlKTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICBuYW1lOiAnY3NzJyxcbiAgfSk7XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVNSU1FKCd0ZXh0L3gtc2NzcycsIHtcbiAgICBtZWRpYVR5cGVzLFxuICAgIG1lZGlhRmVhdHVyZXMsXG4gICAgbWVkaWFWYWx1ZUtleXdvcmRzLFxuICAgIHByb3BlcnR5S2V5d29yZHMsXG4gICAgbm9uU3RhbmRhcmRQcm9wZXJ0eUtleXdvcmRzLFxuICAgIGNvbG9yS2V5d29yZHMsXG4gICAgdmFsdWVLZXl3b3JkcyxcbiAgICBmb250UHJvcGVydGllcyxcbiAgICBhbGxvd05lc3RlZDogdHJ1ZSxcbiAgICBsaW5lQ29tbWVudDogJy8vJyxcbiAgICB0b2tlbkhvb2tzOiB7XG4gICAgICAnLyc6IGZ1bmN0aW9uIChzdHJlYW0sIHN0YXRlKSB7XG4gICAgICAgIGlmIChzdHJlYW0uZWF0KCcvJykpIHtcbiAgICAgICAgICBzdHJlYW0uc2tpcFRvRW5kKCk7XG4gICAgICAgICAgcmV0dXJuIFsnY29tbWVudCcsICdjb21tZW50J107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0cmVhbS5lYXQoJyonKSkge1xuICAgICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5DQ29tbWVudDtcbiAgICAgICAgICByZXR1cm4gdG9rZW5DQ29tbWVudChzdHJlYW0sIHN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gWydvcGVyYXRvcicsICdvcGVyYXRvciddO1xuXG4gICAgICB9LFxuICAgICAgJzonOiBmdW5jdGlvbiAoc3RyZWFtKSB7XG4gICAgICAgIGlmIChzdHJlYW0ubWF0Y2goL1xccypcXHsvLCBmYWxzZSkpIHtcbiAgICAgICAgICByZXR1cm4gW251bGwsIG51bGxdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0sXG4gICAgICAkKHN0cmVhbSkge1xuICAgICAgICBzdHJlYW0ubWF0Y2goL15bXFx3LV0rLyk7XG4gICAgICAgIGlmIChzdHJlYW0ubWF0Y2goL15cXHMqOi8sIGZhbHNlKSkge1xuICAgICAgICAgIHJldHVybiBbJ3ZhcmlhYmxlLTInLCAndmFyaWFibGUtZGVmaW5pdGlvbiddO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbJ3ZhcmlhYmxlLTInLCAndmFyaWFibGUnXTtcbiAgICAgIH0sXG4gICAgICAnIyc6IGZ1bmN0aW9uIChzdHJlYW0pIHtcbiAgICAgICAgaWYgKCFzdHJlYW0uZWF0KCd7JykpIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIFtudWxsLCAnaW50ZXJwb2xhdGlvbiddO1xuICAgICAgfSxcbiAgICB9LFxuICAgIG5hbWU6ICdjc3MnLFxuICAgIGhlbHBlclR5cGU6ICdzY3NzJyxcbiAgfSk7XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVNSU1FKCd0ZXh0L3gtbGVzcycsIHtcbiAgICBtZWRpYVR5cGVzLFxuICAgIG1lZGlhRmVhdHVyZXMsXG4gICAgbWVkaWFWYWx1ZUtleXdvcmRzLFxuICAgIHByb3BlcnR5S2V5d29yZHMsXG4gICAgbm9uU3RhbmRhcmRQcm9wZXJ0eUtleXdvcmRzLFxuICAgIGNvbG9yS2V5d29yZHMsXG4gICAgdmFsdWVLZXl3b3JkcyxcbiAgICBmb250UHJvcGVydGllcyxcbiAgICBhbGxvd05lc3RlZDogdHJ1ZSxcbiAgICBsaW5lQ29tbWVudDogJy8vJyxcbiAgICB0b2tlbkhvb2tzOiB7XG4gICAgICAnLyc6IGZ1bmN0aW9uIChzdHJlYW0sIHN0YXRlKSB7XG4gICAgICAgIGlmIChzdHJlYW0uZWF0KCcvJykpIHtcbiAgICAgICAgICBzdHJlYW0uc2tpcFRvRW5kKCk7XG4gICAgICAgICAgcmV0dXJuIFsnY29tbWVudCcsICdjb21tZW50J107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0cmVhbS5lYXQoJyonKSkge1xuICAgICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5DQ29tbWVudDtcbiAgICAgICAgICByZXR1cm4gdG9rZW5DQ29tbWVudChzdHJlYW0sIHN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gWydvcGVyYXRvcicsICdvcGVyYXRvciddO1xuXG4gICAgICB9LFxuICAgICAgJ0AnOiBmdW5jdGlvbiAoc3RyZWFtKSB7XG4gICAgICAgIGlmIChzdHJlYW0uZWF0KCd7JykpIHJldHVybiBbbnVsbCwgJ2ludGVycG9sYXRpb24nXTtcbiAgICAgICAgaWYgKHN0cmVhbS5tYXRjaChcbiAgICAgICAgICAvXihjaGFyc2V0fGRvY3VtZW50fGZvbnQtZmFjZXxpbXBvcnR8KC0obW96fG1zfG98d2Via2l0KS0pP2tleWZyYW1lc3xtZWRpYXxuYW1lc3BhY2V8cGFnZXxzdXBwb3J0cylcXGIvaSxcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBzdHJlYW0uZWF0V2hpbGUoL1tcXHdcXFxcXFwtXS8pO1xuICAgICAgICBpZiAoc3RyZWFtLm1hdGNoKC9eXFxzKjovLCBmYWxzZSkpIHtcbiAgICAgICAgICByZXR1cm4gWyd2YXJpYWJsZS0yJywgJ3ZhcmlhYmxlLWRlZmluaXRpb24nXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gWyd2YXJpYWJsZS0yJywgJ3ZhcmlhYmxlJ107XG4gICAgICB9LFxuICAgICAgJyYnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBbJ2F0b20nLCAnYXRvbSddO1xuICAgICAgfSxcbiAgICB9LFxuICAgIG5hbWU6ICdjc3MnLFxuICAgIGhlbHBlclR5cGU6ICdsZXNzJyxcbiAgfSk7XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVNSU1FKCd0ZXh0L3gtZ3NzJywge1xuICAgIGRvY3VtZW50VHlwZXMsXG4gICAgbWVkaWFUeXBlcyxcbiAgICBtZWRpYUZlYXR1cmVzLFxuICAgIHByb3BlcnR5S2V5d29yZHMsXG4gICAgbm9uU3RhbmRhcmRQcm9wZXJ0eUtleXdvcmRzLFxuICAgIGZvbnRQcm9wZXJ0aWVzLFxuICAgIGNvdW50ZXJEZXNjcmlwdG9ycyxcbiAgICBjb2xvcktleXdvcmRzLFxuICAgIHZhbHVlS2V5d29yZHMsXG4gICAgc3VwcG9ydHNBdENvbXBvbmVudDogdHJ1ZSxcbiAgICB0b2tlbkhvb2tzOiB7XG4gICAgICAnLyc6IGZ1bmN0aW9uIChzdHJlYW0sIHN0YXRlKSB7XG4gICAgICAgIGlmICghc3RyZWFtLmVhdCgnKicpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5DQ29tbWVudDtcbiAgICAgICAgcmV0dXJuIHRva2VuQ0NvbW1lbnQoc3RyZWFtLCBzdGF0ZSk7XG4gICAgICB9LFxuICAgIH0sXG4gICAgbmFtZTogJ2NzcycsXG4gICAgaGVscGVyVHlwZTogJ2dzcycsXG4gIH0pO1xuXG59XG4iLCAiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwczovL2NvZGVtaXJyb3IubmV0L0xJQ0VOU0VcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZFhNTE1vZGUoQ29kZU1pcnJvcikge1xuXG4gIGNvbnN0IGh0bWxDb25maWcgPSB7XG4gICAgYXV0b1NlbGZDbG9zZXJzOiB7XG4gICAgICBhcmVhOiB0cnVlLFxuICAgICAgYmFzZTogdHJ1ZSxcbiAgICAgIGJyOiB0cnVlLFxuICAgICAgY29sOiB0cnVlLFxuICAgICAgY29tbWFuZDogdHJ1ZSxcbiAgICAgIGVtYmVkOiB0cnVlLFxuICAgICAgZnJhbWU6IHRydWUsXG4gICAgICBocjogdHJ1ZSxcbiAgICAgIGltZzogdHJ1ZSxcbiAgICAgIGlucHV0OiB0cnVlLFxuICAgICAga2V5Z2VuOiB0cnVlLFxuICAgICAgbGluazogdHJ1ZSxcbiAgICAgIG1ldGE6IHRydWUsXG4gICAgICBwYXJhbTogdHJ1ZSxcbiAgICAgIHNvdXJjZTogdHJ1ZSxcbiAgICAgIHRyYWNrOiB0cnVlLFxuICAgICAgd2JyOiB0cnVlLFxuICAgICAgbWVudWl0ZW06IHRydWUsXG4gICAgfSxcbiAgICBpbXBsaWNpdGx5Q2xvc2VkOiB7XG4gICAgICBkZDogdHJ1ZSxcbiAgICAgIGxpOiB0cnVlLFxuICAgICAgb3B0Z3JvdXA6IHRydWUsXG4gICAgICBvcHRpb246IHRydWUsXG4gICAgICBwOiB0cnVlLFxuICAgICAgcnA6IHRydWUsXG4gICAgICBydDogdHJ1ZSxcbiAgICAgIHRib2R5OiB0cnVlLFxuICAgICAgdGQ6IHRydWUsXG4gICAgICB0Zm9vdDogdHJ1ZSxcbiAgICAgIHRoOiB0cnVlLFxuICAgICAgdHI6IHRydWUsXG4gICAgfSxcbiAgICBjb250ZXh0R3JhYmJlcnM6IHtcbiAgICAgIGRkOiB7XG4gICAgICAgIGRkOiB0cnVlLFxuICAgICAgICBkdDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBkdDoge1xuICAgICAgICBkZDogdHJ1ZSxcbiAgICAgICAgZHQ6IHRydWUsXG4gICAgICB9LFxuICAgICAgbGk6IHtcbiAgICAgICAgbGk6IHRydWUsXG4gICAgICB9LFxuICAgICAgb3B0aW9uOiB7XG4gICAgICAgIG9wdGlvbjogdHJ1ZSxcbiAgICAgICAgb3B0Z3JvdXA6IHRydWUsXG4gICAgICB9LFxuICAgICAgb3B0Z3JvdXA6IHtcbiAgICAgICAgb3B0Z3JvdXA6IHRydWUsXG4gICAgICB9LFxuICAgICAgcDoge1xuICAgICAgICBhZGRyZXNzOiB0cnVlLFxuICAgICAgICBhcnRpY2xlOiB0cnVlLFxuICAgICAgICBhc2lkZTogdHJ1ZSxcbiAgICAgICAgYmxvY2txdW90ZTogdHJ1ZSxcbiAgICAgICAgZGlyOiB0cnVlLFxuICAgICAgICBkaXY6IHRydWUsXG4gICAgICAgIGRsOiB0cnVlLFxuICAgICAgICBmaWVsZHNldDogdHJ1ZSxcbiAgICAgICAgZm9vdGVyOiB0cnVlLFxuICAgICAgICBmb3JtOiB0cnVlLFxuICAgICAgICBoMTogdHJ1ZSxcbiAgICAgICAgaDI6IHRydWUsXG4gICAgICAgIGgzOiB0cnVlLFxuICAgICAgICBoNDogdHJ1ZSxcbiAgICAgICAgaDU6IHRydWUsXG4gICAgICAgIGg2OiB0cnVlLFxuICAgICAgICBoZWFkZXI6IHRydWUsXG4gICAgICAgIGhncm91cDogdHJ1ZSxcbiAgICAgICAgaHI6IHRydWUsXG4gICAgICAgIG1lbnU6IHRydWUsXG4gICAgICAgIG5hdjogdHJ1ZSxcbiAgICAgICAgb2w6IHRydWUsXG4gICAgICAgIHA6IHRydWUsXG4gICAgICAgIHByZTogdHJ1ZSxcbiAgICAgICAgc2VjdGlvbjogdHJ1ZSxcbiAgICAgICAgdGFibGU6IHRydWUsXG4gICAgICAgIHVsOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIHJwOiB7XG4gICAgICAgIHJwOiB0cnVlLFxuICAgICAgICBydDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBydDoge1xuICAgICAgICBycDogdHJ1ZSxcbiAgICAgICAgcnQ6IHRydWUsXG4gICAgICB9LFxuICAgICAgdGJvZHk6IHtcbiAgICAgICAgdGJvZHk6IHRydWUsXG4gICAgICAgIHRmb290OiB0cnVlLFxuICAgICAgfSxcbiAgICAgIHRkOiB7XG4gICAgICAgIHRkOiB0cnVlLFxuICAgICAgICB0aDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICB0Zm9vdDoge1xuICAgICAgICB0Ym9keTogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICB0aDoge1xuICAgICAgICB0ZDogdHJ1ZSxcbiAgICAgICAgdGg6IHRydWUsXG4gICAgICB9LFxuICAgICAgdGhlYWQ6IHtcbiAgICAgICAgdGJvZHk6IHRydWUsXG4gICAgICAgIHRmb290OiB0cnVlLFxuICAgICAgfSxcbiAgICAgIHRyOiB7XG4gICAgICAgIHRyOiB0cnVlLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGRvTm90SW5kZW50OiB7XG4gICAgICBwcmU6IHRydWUsXG4gICAgfSxcbiAgICBhbGxvd1VucXVvdGVkOiB0cnVlLFxuICAgIGFsbG93TWlzc2luZzogdHJ1ZSxcbiAgICBjYXNlRm9sZDogdHJ1ZSxcbiAgfTtcblxuICBjb25zdCB4bWxDb25maWcgPSB7XG4gICAgYXV0b1NlbGZDbG9zZXJzOiB7fSxcbiAgICBpbXBsaWNpdGx5Q2xvc2VkOiB7fSxcbiAgICBjb250ZXh0R3JhYmJlcnM6IHt9LFxuICAgIGRvTm90SW5kZW50OiB7fSxcbiAgICBhbGxvd1VucXVvdGVkOiBmYWxzZSxcbiAgICBhbGxvd01pc3Npbmc6IGZhbHNlLFxuICAgIGFsbG93TWlzc2luZ1RhZ05hbWU6IGZhbHNlLFxuICAgIGNhc2VGb2xkOiBmYWxzZSxcbiAgfTtcblxuICBDb2RlTWlycm9yLmRlZmluZU1vZGUoJ3htbCcsIChlZGl0b3JDb25mLCBjb25maWdfKSA9PiB7XG4gICAgY29uc3QgaW5kZW50VW5pdCA9IGVkaXRvckNvbmYuaW5kZW50VW5pdDtcbiAgICBjb25zdCBjb25maWcgPSB7fTtcbiAgICBjb25zdCBkZWZhdWx0cyA9IGNvbmZpZ18uaHRtbE1vZGUgPyBodG1sQ29uZmlnIDogeG1sQ29uZmlnO1xuICAgIGZvciAodmFyIHByb3AgaW4gZGVmYXVsdHMpIGNvbmZpZ1twcm9wXSA9IGRlZmF1bHRzW3Byb3BdO1xuICAgIGZvciAodmFyIHByb3AgaW4gY29uZmlnXykgY29uZmlnW3Byb3BdID0gY29uZmlnX1twcm9wXTtcblxuICAgIC8vIFJldHVybiB2YXJpYWJsZXMgZm9yIHRva2VuaXplcnNcbiAgICBsZXQgdHlwZTtcbiAgICBsZXQgc2V0U3R5bGU7XG5cbiAgICBmdW5jdGlvbiBpblRleHQoc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgZnVuY3Rpb24gY2hhaW4ocGFyc2VyKSB7XG4gICAgICAgIHN0YXRlLnRva2VuaXplID0gcGFyc2VyO1xuICAgICAgICByZXR1cm4gcGFyc2VyKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2ggPSBzdHJlYW0ubmV4dCgpO1xuICAgICAgaWYgKGNoID09IFwiPFwiKSB7XG4gICAgICAgIGlmIChzdHJlYW0uZWF0KFwiIVwiKSkge1xuICAgICAgICAgIGlmIChzdHJlYW0uZWF0KFwiW1wiKSkge1xuICAgICAgICAgICAgaWYgKHN0cmVhbS5tYXRjaChcIkNEQVRBW1wiKSkgcmV0dXJuIGNoYWluKGluQmxvY2soXCJhdG9tXCIsIFwiXV0+XCIpKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc3RyZWFtLm1hdGNoKFwiLS1cIikpIHtcbiAgICAgICAgICAgIHJldHVybiBjaGFpbihpbkJsb2NrKFwiY29tbWVudFwiLCBcIi0tPlwiKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzdHJlYW0ubWF0Y2goXCJET0NUWVBFXCIsIHRydWUsIHRydWUpKSB7XG4gICAgICAgICAgICBzdHJlYW0uZWF0V2hpbGUoL1tcXHdcXC5fXFwtXS8pO1xuICAgICAgICAgICAgcmV0dXJuIGNoYWluKGRvY3R5cGUoMSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICB9XG4gICAgICAgIGlmIChzdHJlYW0uZWF0KFwiP1wiKSkge1xuICAgICAgICAgIHN0cmVhbS5lYXRXaGlsZSgvW1xcd1xcLl9cXC1dLyk7XG4gICAgICAgICAgc3RhdGUudG9rZW5pemUgPSBpbkJsb2NrKFwibWV0YVwiLCBcIj8+XCIpO1xuICAgICAgICAgIHJldHVybiBcIm1ldGFcIjtcbiAgICAgICAgfVxuICAgICAgICB0eXBlID0gc3RyZWFtLmVhdChcIi9cIikgPyBcImNsb3NlVGFnXCIgOiBcIm9wZW5UYWdcIjtcbiAgICAgICAgc3RhdGUudG9rZW5pemUgPSBpblRhZztcbiAgICAgICAgcmV0dXJuIFwidGFnIGJyYWNrZXRcIjtcblxuICAgICAgfVxuICAgICAgaWYgKGNoID09IFwiJlwiKSB7XG4gICAgICAgIHZhciBvaztcbiAgICAgICAgaWYgKHN0cmVhbS5lYXQoXCIjXCIpKSB7XG4gICAgICAgICAgaWYgKHN0cmVhbS5lYXQoXCJ4XCIpKSB7XG4gICAgICAgICAgICBvayA9IHN0cmVhbS5lYXRXaGlsZSgvW2EtZkEtRlxcZF0vKSAmJiBzdHJlYW0uZWF0KFwiO1wiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb2sgPSBzdHJlYW0uZWF0V2hpbGUoL1tcXGRdLykgJiYgc3RyZWFtLmVhdChcIjtcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9rID0gc3RyZWFtLmVhdFdoaWxlKC9bXFx3XFwuXFwtOl0vKSAmJiBzdHJlYW0uZWF0KFwiO1wiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2sgPyBcImF0b21cIiA6IFwiZXJyb3JcIjtcbiAgICAgIH1cbiAgICAgIHN0cmVhbS5lYXRXaGlsZSgvW14mPF0vKTtcbiAgICAgIHJldHVybiBudWxsO1xuXG4gICAgfVxuICAgIGluVGV4dC5pc0luVGV4dCA9IHRydWU7XG5cbiAgICBmdW5jdGlvbiBpblRhZyhzdHJlYW0sIHN0YXRlKSB7XG4gICAgICBjb25zdCBjaCA9IHN0cmVhbS5uZXh0KCk7XG4gICAgICBpZiAoY2ggPT0gJz4nIHx8IChjaCA9PSAnLycgJiYgc3RyZWFtLmVhdCgnPicpKSkge1xuICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IGluVGV4dDtcbiAgICAgICAgdHlwZSA9IGNoID09ICc+JyA/ICdlbmRUYWcnIDogJ3NlbGZjbG9zZVRhZyc7XG4gICAgICAgIHJldHVybiAndGFnIGJyYWNrZXQnO1xuICAgICAgfVxuICAgICAgaWYgKGNoID09ICc9Jykge1xuICAgICAgICB0eXBlID0gJ2VxdWFscyc7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKGNoID09ICc8Jykge1xuICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IGluVGV4dDtcbiAgICAgICAgc3RhdGUuc3RhdGUgPSBiYXNlU3RhdGU7XG4gICAgICAgIHN0YXRlLnRhZ05hbWUgPSBzdGF0ZS50YWdTdGFydCA9IG51bGw7XG4gICAgICAgIGNvbnN0IG5leHQgPSBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTtcbiAgICAgICAgcmV0dXJuIG5leHQgPyBuZXh0ICsgJyB0YWcgZXJyb3InIDogJ3RhZyBlcnJvcic7XG4gICAgICB9XG4gICAgICBpZiAoL1tcXCdcXFwiXS8udGVzdChjaCkpIHtcbiAgICAgICAgc3RhdGUudG9rZW5pemUgPSBpbkF0dHJpYnV0ZShjaCk7XG4gICAgICAgIHN0YXRlLnN0cmluZ1N0YXJ0Q29sID0gc3RyZWFtLmNvbHVtbigpO1xuICAgICAgICByZXR1cm4gc3RhdGUudG9rZW5pemUoc3RyZWFtLCBzdGF0ZSk7XG4gICAgICB9XG4gICAgICBzdHJlYW0ubWF0Y2goL15bXlxcc1xcdTAwYTA9PD5cXFwiXFwnXSpbXlxcc1xcdTAwYTA9PD5cXFwiXFwnXFwvXS8pO1xuICAgICAgcmV0dXJuICd3b3JkJztcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluQXR0cmlidXRlKHF1b3RlKSB7XG4gICAgICBjb25zdCBjbG9zdXJlID0gZnVuY3Rpb24gKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgICAgd2hpbGUgKCFzdHJlYW0uZW9sKCkpIHtcbiAgICAgICAgICBpZiAoc3RyZWFtLm5leHQoKSA9PSBxdW90ZSkge1xuICAgICAgICAgICAgc3RhdGUudG9rZW5pemUgPSBpblRhZztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ3N0cmluZyc7XG4gICAgICB9O1xuICAgICAgY2xvc3VyZS5pc0luQXR0cmlidXRlID0gdHJ1ZTtcbiAgICAgIHJldHVybiBjbG9zdXJlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluQmxvY2soc3R5bGUsIHRlcm1pbmF0b3IpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgICB3aGlsZSAoIXN0cmVhbS5lb2woKSkge1xuICAgICAgICAgIGlmIChzdHJlYW0ubWF0Y2godGVybWluYXRvcikpIHtcbiAgICAgICAgICAgIHN0YXRlLnRva2VuaXplID0gaW5UZXh0O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN0cmVhbS5uZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkb2N0eXBlKGRlcHRoKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgICAgbGV0IGNoO1xuICAgICAgICB3aGlsZSAoKGNoID0gc3RyZWFtLm5leHQoKSkgIT0gbnVsbCkge1xuICAgICAgICAgIGlmIChjaCA9PSAnPCcpIHtcbiAgICAgICAgICAgIHN0YXRlLnRva2VuaXplID0gZG9jdHlwZShkZXB0aCArIDEpO1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlLnRva2VuaXplKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2ggPT0gJz4nKSB7XG4gICAgICAgICAgICBpZiAoZGVwdGggPT0gMSkge1xuICAgICAgICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IGluVGV4dDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IGRvY3R5cGUoZGVwdGggLSAxKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlLnRva2VuaXplKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ21ldGEnO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBDb250ZXh0KHN0YXRlLCB0YWdOYW1lLCBzdGFydE9mTGluZSkge1xuICAgICAgdGhpcy5wcmV2ID0gc3RhdGUuY29udGV4dDtcbiAgICAgIHRoaXMudGFnTmFtZSA9IHRhZ05hbWU7XG4gICAgICB0aGlzLmluZGVudCA9IHN0YXRlLmluZGVudGVkO1xuICAgICAgdGhpcy5zdGFydE9mTGluZSA9IHN0YXJ0T2ZMaW5lO1xuICAgICAgaWYgKGNvbmZpZy5kb05vdEluZGVudC5oYXNPd25Qcm9wZXJ0eSh0YWdOYW1lKSB8fCAoc3RhdGUuY29udGV4dCAmJiBzdGF0ZS5jb250ZXh0Lm5vSW5kZW50KSkge1xuICAgICAgICB0aGlzLm5vSW5kZW50ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwb3BDb250ZXh0KHN0YXRlKSB7XG4gICAgICBpZiAoc3RhdGUuY29udGV4dCkgc3RhdGUuY29udGV4dCA9IHN0YXRlLmNvbnRleHQucHJldjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYXliZVBvcENvbnRleHQoc3RhdGUsIG5leHRUYWdOYW1lKSB7XG4gICAgICBsZXQgcGFyZW50VGFnTmFtZTtcbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGlmICghc3RhdGUuY29udGV4dCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBwYXJlbnRUYWdOYW1lID0gc3RhdGUuY29udGV4dC50YWdOYW1lO1xuICAgICAgICBpZiAoIWNvbmZpZy5jb250ZXh0R3JhYmJlcnMuaGFzT3duUHJvcGVydHkocGFyZW50VGFnTmFtZSlcbiAgICAgICAgICB8fCAhY29uZmlnLmNvbnRleHRHcmFiYmVyc1twYXJlbnRUYWdOYW1lXS5oYXNPd25Qcm9wZXJ0eShuZXh0VGFnTmFtZSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcG9wQ29udGV4dChzdGF0ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYmFzZVN0YXRlKHR5cGUsIHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIGlmICh0eXBlID09ICdvcGVuVGFnJykge1xuICAgICAgICBzdGF0ZS50YWdTdGFydCA9IHN0cmVhbS5jb2x1bW4oKTtcbiAgICAgICAgcmV0dXJuIHRhZ05hbWVTdGF0ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09ICdjbG9zZVRhZycpIHtcbiAgICAgICAgcmV0dXJuIGNsb3NlVGFnTmFtZVN0YXRlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VTdGF0ZTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRhZ05hbWVTdGF0ZSh0eXBlLCBzdHJlYW0sIHN0YXRlKSB7XG4gICAgICBpZiAodHlwZSA9PSAnd29yZCcpIHtcbiAgICAgICAgc3RhdGUudGFnTmFtZSA9IHN0cmVhbS5jdXJyZW50KCk7XG4gICAgICAgIHNldFN0eWxlID0gJ3RhZyc7XG4gICAgICAgIHJldHVybiBhdHRyU3RhdGU7XG4gICAgICB9XG4gICAgICBpZiAoY29uZmlnLmFsbG93TWlzc2luZ1RhZ05hbWUgJiYgdHlwZSA9PSAnZW5kVGFnJykge1xuICAgICAgICBzZXRTdHlsZSA9ICd0YWcgYnJhY2tldCc7XG4gICAgICAgIHJldHVybiBhdHRyU3RhdGUodHlwZSwgc3RyZWFtLCBzdGF0ZSk7XG4gICAgICB9XG4gICAgICBzZXRTdHlsZSA9ICdlcnJvcic7XG4gICAgICByZXR1cm4gdGFnTmFtZVN0YXRlO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xvc2VUYWdOYW1lU3RhdGUodHlwZSwgc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgaWYgKHR5cGUgPT0gJ3dvcmQnKSB7XG4gICAgICAgIGNvbnN0IHRhZ05hbWUgPSBzdHJlYW0uY3VycmVudCgpO1xuICAgICAgICBpZiAoc3RhdGUuY29udGV4dCAmJiBzdGF0ZS5jb250ZXh0LnRhZ05hbWUgIT0gdGFnTmFtZVxuICAgICAgICAgICYmIGNvbmZpZy5pbXBsaWNpdGx5Q2xvc2VkLmhhc093blByb3BlcnR5KHN0YXRlLmNvbnRleHQudGFnTmFtZSkpIHtcbiAgICAgICAgICBwb3BDb250ZXh0KHN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHN0YXRlLmNvbnRleHQgJiYgc3RhdGUuY29udGV4dC50YWdOYW1lID09IHRhZ05hbWUpIHx8IGNvbmZpZy5tYXRjaENsb3NpbmcgPT09IGZhbHNlKSB7XG4gICAgICAgICAgc2V0U3R5bGUgPSAndGFnJztcbiAgICAgICAgICByZXR1cm4gY2xvc2VTdGF0ZTtcbiAgICAgICAgfVxuICAgICAgICBzZXRTdHlsZSA9ICd0YWcgZXJyb3InO1xuICAgICAgICByZXR1cm4gY2xvc2VTdGF0ZUVycjtcblxuICAgICAgfVxuICAgICAgaWYgKGNvbmZpZy5hbGxvd01pc3NpbmdUYWdOYW1lICYmIHR5cGUgPT0gJ2VuZFRhZycpIHtcbiAgICAgICAgc2V0U3R5bGUgPSAndGFnIGJyYWNrZXQnO1xuICAgICAgICByZXR1cm4gY2xvc2VTdGF0ZSh0eXBlLCBzdHJlYW0sIHN0YXRlKTtcbiAgICAgIH1cbiAgICAgIHNldFN0eWxlID0gJ2Vycm9yJztcbiAgICAgIHJldHVybiBjbG9zZVN0YXRlRXJyO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xvc2VTdGF0ZSh0eXBlLCBfc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgaWYgKHR5cGUgIT0gJ2VuZFRhZycpIHtcbiAgICAgICAgc2V0U3R5bGUgPSAnZXJyb3InO1xuICAgICAgICByZXR1cm4gY2xvc2VTdGF0ZTtcbiAgICAgIH1cbiAgICAgIHBvcENvbnRleHQoc3RhdGUpO1xuICAgICAgcmV0dXJuIGJhc2VTdGF0ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbG9zZVN0YXRlRXJyKHR5cGUsIHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIHNldFN0eWxlID0gJ2Vycm9yJztcbiAgICAgIHJldHVybiBjbG9zZVN0YXRlKHR5cGUsIHN0cmVhbSwgc3RhdGUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGF0dHJTdGF0ZSh0eXBlLCBfc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgaWYgKHR5cGUgPT0gJ3dvcmQnKSB7XG4gICAgICAgIHNldFN0eWxlID0gJ2F0dHJpYnV0ZSc7XG4gICAgICAgIHJldHVybiBhdHRyRXFTdGF0ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09ICdlbmRUYWcnIHx8IHR5cGUgPT0gJ3NlbGZjbG9zZVRhZycpIHtcbiAgICAgICAgY29uc3QgdGFnTmFtZSA9IHN0YXRlLnRhZ05hbWU7XG4gICAgICAgIGNvbnN0IHRhZ1N0YXJ0ID0gc3RhdGUudGFnU3RhcnQ7XG4gICAgICAgIHN0YXRlLnRhZ05hbWUgPSBzdGF0ZS50YWdTdGFydCA9IG51bGw7XG4gICAgICAgIGlmICh0eXBlID09ICdzZWxmY2xvc2VUYWcnXG4gICAgICAgICAgfHwgY29uZmlnLmF1dG9TZWxmQ2xvc2Vycy5oYXNPd25Qcm9wZXJ0eSh0YWdOYW1lKSkge1xuICAgICAgICAgIG1heWJlUG9wQ29udGV4dChzdGF0ZSwgdGFnTmFtZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWF5YmVQb3BDb250ZXh0KHN0YXRlLCB0YWdOYW1lKTtcbiAgICAgICAgICBzdGF0ZS5jb250ZXh0ID0gbmV3IENvbnRleHQoc3RhdGUsIHRhZ05hbWUsIHRhZ1N0YXJ0ID09IHN0YXRlLmluZGVudGVkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmFzZVN0YXRlO1xuICAgICAgfVxuICAgICAgc2V0U3R5bGUgPSAnZXJyb3InO1xuICAgICAgcmV0dXJuIGF0dHJTdGF0ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdHRyRXFTdGF0ZSh0eXBlLCBzdHJlYW0sIHN0YXRlKSB7XG4gICAgICBpZiAodHlwZSA9PSAnZXF1YWxzJykgcmV0dXJuIGF0dHJWYWx1ZVN0YXRlO1xuICAgICAgaWYgKCFjb25maWcuYWxsb3dNaXNzaW5nKSBzZXRTdHlsZSA9ICdlcnJvcic7XG4gICAgICByZXR1cm4gYXR0clN0YXRlKHR5cGUsIHN0cmVhbSwgc3RhdGUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGF0dHJWYWx1ZVN0YXRlKHR5cGUsIHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIGlmICh0eXBlID09ICdzdHJpbmcnKSByZXR1cm4gYXR0ckNvbnRpbnVlZFN0YXRlO1xuICAgICAgaWYgKHR5cGUgPT0gJ3dvcmQnICYmIGNvbmZpZy5hbGxvd1VucXVvdGVkKSB7XG4gICAgICAgIHNldFN0eWxlID0gJ3N0cmluZyc7XG4gICAgICAgIHJldHVybiBhdHRyU3RhdGU7XG4gICAgICB9XG4gICAgICBzZXRTdHlsZSA9ICdlcnJvcic7XG4gICAgICByZXR1cm4gYXR0clN0YXRlKHR5cGUsIHN0cmVhbSwgc3RhdGUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGF0dHJDb250aW51ZWRTdGF0ZSh0eXBlLCBzdHJlYW0sIHN0YXRlKSB7XG4gICAgICBpZiAodHlwZSA9PSAnc3RyaW5nJykgcmV0dXJuIGF0dHJDb250aW51ZWRTdGF0ZTtcbiAgICAgIHJldHVybiBhdHRyU3RhdGUodHlwZSwgc3RyZWFtLCBzdGF0ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0U3RhdGUoYmFzZUluZGVudCkge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHtcbiAgICAgICAgICB0b2tlbml6ZTogaW5UZXh0LFxuICAgICAgICAgIHN0YXRlOiBiYXNlU3RhdGUsXG4gICAgICAgICAgaW5kZW50ZWQ6IGJhc2VJbmRlbnQgfHwgMCxcbiAgICAgICAgICB0YWdOYW1lOiBudWxsLFxuICAgICAgICAgIHRhZ1N0YXJ0OiBudWxsLFxuICAgICAgICAgIGNvbnRleHQ6IG51bGwsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChiYXNlSW5kZW50ICE9IG51bGwpIHN0YXRlLmJhc2VJbmRlbnQgPSBiYXNlSW5kZW50O1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICB9LFxuXG4gICAgICB0b2tlbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICAgIGlmICghc3RhdGUudGFnTmFtZSAmJiBzdHJlYW0uc29sKCkpIHtcbiAgICAgICAgICBzdGF0ZS5pbmRlbnRlZCA9IHN0cmVhbS5pbmRlbnRhdGlvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0cmVhbS5lYXRTcGFjZSgpKSByZXR1cm4gbnVsbDtcbiAgICAgICAgdHlwZSA9IG51bGw7XG4gICAgICAgIGxldCBzdHlsZSA9IHN0YXRlLnRva2VuaXplKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgICBpZiAoKHN0eWxlIHx8IHR5cGUpICYmIHN0eWxlICE9ICdjb21tZW50Jykge1xuICAgICAgICAgIHNldFN0eWxlID0gbnVsbDtcbiAgICAgICAgICBzdGF0ZS5zdGF0ZSA9IHN0YXRlLnN0YXRlKHR5cGUgfHwgc3R5bGUsIHN0cmVhbSwgc3RhdGUpO1xuICAgICAgICAgIGlmIChzZXRTdHlsZSkge1xuICAgICAgICAgICAgc3R5bGUgPSBzZXRTdHlsZSA9PSAnZXJyb3InID8gc3R5bGUgKyAnIGVycm9yJyA6IHNldFN0eWxlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICB9LFxuXG4gICAgICBpbmRlbnQoc3RhdGUsIHRleHRBZnRlciwgZnVsbExpbmUpIHtcbiAgICAgICAgbGV0IGNvbnRleHQgPSBzdGF0ZS5jb250ZXh0O1xuICAgICAgICAvLyBJbmRlbnQgbXVsdGktbGluZSBzdHJpbmdzIChlLmcuIGNzcykuXG4gICAgICAgIGlmIChzdGF0ZS50b2tlbml6ZS5pc0luQXR0cmlidXRlKSB7XG4gICAgICAgICAgaWYgKHN0YXRlLnRhZ1N0YXJ0ID09IHN0YXRlLmluZGVudGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGUuc3RyaW5nU3RhcnRDb2wgKyAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gc3RhdGUuaW5kZW50ZWQgKyBpbmRlbnRVbml0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHQubm9JbmRlbnQpIHJldHVybiBDb2RlTWlycm9yLlBhc3M7XG4gICAgICAgIGlmIChzdGF0ZS50b2tlbml6ZSAhPSBpblRhZyAmJiBzdGF0ZS50b2tlbml6ZSAhPSBpblRleHQpIHtcbiAgICAgICAgICByZXR1cm4gZnVsbExpbmUgPyBmdWxsTGluZS5tYXRjaCgvXihcXHMqKS8pWzBdLmxlbmd0aCA6IDA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSW5kZW50IHRoZSBzdGFydHMgb2YgYXR0cmlidXRlIG5hbWVzLlxuICAgICAgICBpZiAoc3RhdGUudGFnTmFtZSkge1xuICAgICAgICAgIGlmIChjb25maWcubXVsdGlsaW5lVGFnSW5kZW50UGFzdFRhZyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZS50YWdTdGFydCArIHN0YXRlLnRhZ05hbWUubGVuZ3RoICsgMjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHN0YXRlLnRhZ1N0YXJ0ICsgaW5kZW50VW5pdCAqIChjb25maWcubXVsdGlsaW5lVGFnSW5kZW50RmFjdG9yIHx8IDEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWcuYWxpZ25DREFUQSAmJiAvPCFcXFtDREFUQVxcWy8udGVzdCh0ZXh0QWZ0ZXIpKSByZXR1cm4gMDtcbiAgICAgICAgY29uc3QgdGFnQWZ0ZXIgPSB0ZXh0QWZ0ZXIgJiYgL148KFxcLyk/KFtcXHdfOlxcLi1dKikvLmV4ZWModGV4dEFmdGVyKTtcbiAgICAgICAgaWYgKHRhZ0FmdGVyICYmIHRhZ0FmdGVyWzFdKSB7IC8vIENsb3NpbmcgdGFnIHNwb3R0ZWRcbiAgICAgICAgICB3aGlsZSAoY29udGV4dCkge1xuICAgICAgICAgICAgaWYgKGNvbnRleHQudGFnTmFtZSA9PSB0YWdBZnRlclsyXSkge1xuICAgICAgICAgICAgICBjb250ZXh0ID0gY29udGV4dC5wcmV2O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLmltcGxpY2l0bHlDbG9zZWQuaGFzT3duUHJvcGVydHkoY29udGV4dC50YWdOYW1lKSkge1xuICAgICAgICAgICAgICBjb250ZXh0ID0gY29udGV4dC5wcmV2O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRhZ0FmdGVyKSB7IC8vIE9wZW5pbmcgdGFnIHNwb3R0ZWRcbiAgICAgICAgICB3aGlsZSAoY29udGV4dCkge1xuICAgICAgICAgICAgY29uc3QgZ3JhYmJlcnMgPSBjb25maWcuY29udGV4dEdyYWJiZXJzW2NvbnRleHQudGFnTmFtZV07XG4gICAgICAgICAgICBpZiAoZ3JhYmJlcnMgJiYgZ3JhYmJlcnMuaGFzT3duUHJvcGVydHkodGFnQWZ0ZXJbMl0pKSB7XG4gICAgICAgICAgICAgIGNvbnRleHQgPSBjb250ZXh0LnByZXY7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGNvbnRleHQgJiYgY29udGV4dC5wcmV2ICYmICFjb250ZXh0LnN0YXJ0T2ZMaW5lKSB7XG4gICAgICAgICAgY29udGV4dCA9IGNvbnRleHQucHJldjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udGV4dCkgcmV0dXJuIGNvbnRleHQuaW5kZW50ICsgaW5kZW50VW5pdDtcbiAgICAgICAgcmV0dXJuIHN0YXRlLmJhc2VJbmRlbnQgfHwgMDtcbiAgICAgIH0sXG5cbiAgICAgIGVsZWN0cmljSW5wdXQ6IC88XFwvW1xcc1xcdzpdKz4kLyxcbiAgICAgIGJsb2NrQ29tbWVudFN0YXJ0OiAnPCEtLScsXG4gICAgICBibG9ja0NvbW1lbnRFbmQ6ICctLT4nLFxuXG4gICAgICBjb25maWd1cmF0aW9uOiBjb25maWcuaHRtbE1vZGUgPyAnaHRtbCcgOiAneG1sJyxcbiAgICAgIGhlbHBlclR5cGU6IGNvbmZpZy5odG1sTW9kZSA/ICdodG1sJyA6ICd4bWwnLFxuXG4gICAgICBza2lwQXR0cmlidXRlKHN0YXRlKSB7XG4gICAgICAgIGlmIChzdGF0ZS5zdGF0ZSA9PSBhdHRyVmFsdWVTdGF0ZSkge1xuICAgICAgICAgIHN0YXRlLnN0YXRlID0gYXR0clN0YXRlO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH07XG4gIH0pO1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lTUlNRSgndGV4dC94bWwnLCAneG1sJyk7XG4gIENvZGVNaXJyb3IuZGVmaW5lTUlNRSgnYXBwbGljYXRpb24veG1sJywgJ3htbCcpO1xuICBpZiAoIUNvZGVNaXJyb3IubWltZU1vZGVzLmhhc093blByb3BlcnR5KCd0ZXh0L2h0bWwnKSkge1xuICAgIENvZGVNaXJyb3IuZGVmaW5lTUlNRSgndGV4dC9odG1sJywge1xuICAgICAgbmFtZTogJ3htbCcsXG4gICAgICBodG1sTW9kZTogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG59XG4iLCAiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwczovL2NvZGVtaXJyb3IubmV0L0xJQ0VOU0VcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEphdmFTY3JpcHRNb2RlKENvZGVNaXJyb3IpIHtcbiAgQ29kZU1pcnJvci5kZWZpbmVNb2RlKCdqYXZhc2NyaXB0JywgKGNvbmZpZywgcGFyc2VyQ29uZmlnKSA9PiB7XG4gICAgY29uc3QgaW5kZW50VW5pdCA9IGNvbmZpZy5pbmRlbnRVbml0O1xuICAgIGNvbnN0IHN0YXRlbWVudEluZGVudCA9IHBhcnNlckNvbmZpZy5zdGF0ZW1lbnRJbmRlbnQ7XG4gICAgY29uc3QganNvbmxkTW9kZSA9IHBhcnNlckNvbmZpZy5qc29ubGQ7XG4gICAgY29uc3QganNvbk1vZGUgPSBwYXJzZXJDb25maWcuanNvbiB8fCBqc29ubGRNb2RlO1xuICAgIGNvbnN0IGlzVFMgPSBwYXJzZXJDb25maWcudHlwZXNjcmlwdDtcbiAgICBjb25zdCB3b3JkUkUgPSBwYXJzZXJDb25maWcud29yZENoYXJhY3RlcnMgfHwgL1tcXHckXFx4YTEtXFx1ZmZmZl0vO1xuXG4gICAgLy8gVG9rZW5pemVyXG5cbiAgICBjb25zdCBrZXl3b3JkcyA9IChmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiBrdyh0eXBlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZSxcbiAgICAgICAgICBzdHlsZTogJ2tleXdvcmQnLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY29uc3QgQSA9IGt3KCdrZXl3b3JkIGEnKTtcbiAgICAgIGNvbnN0IEIgPSBrdygna2V5d29yZCBiJyk7XG4gICAgICBjb25zdCBDID0ga3coJ2tleXdvcmQgYycpO1xuICAgICAgY29uc3QgRCA9IGt3KCdrZXl3b3JkIGQnKTtcbiAgICAgIGNvbnN0IG9wZXJhdG9yID0ga3coJ29wZXJhdG9yJyk7XG4gICAgICBjb25zdCBhdG9tID0ge1xuICAgICAgICB0eXBlOiAnYXRvbScsXG4gICAgICAgIHN0eWxlOiAnYXRvbScsXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZjoga3coJ2lmJyksXG4gICAgICAgIHdoaWxlOiBBLFxuICAgICAgICB3aXRoOiBBLFxuICAgICAgICBlbHNlOiBCLFxuICAgICAgICBkbzogQixcbiAgICAgICAgdHJ5OiBCLFxuICAgICAgICBmaW5hbGx5OiBCLFxuICAgICAgICByZXR1cm46IEQsXG4gICAgICAgIGJyZWFrOiBELFxuICAgICAgICBjb250aW51ZTogRCxcbiAgICAgICAgbmV3OiBrdygnbmV3JyksXG4gICAgICAgIGRlbGV0ZTogQyxcbiAgICAgICAgdm9pZDogQyxcbiAgICAgICAgdGhyb3c6IEMsXG4gICAgICAgIGRlYnVnZ2VyOiBrdygnZGVidWdnZXInKSxcbiAgICAgICAgdmFyOiBrdygndmFyJyksXG4gICAgICAgIGNvbnN0OiBrdygndmFyJyksXG4gICAgICAgIGxldDoga3coJ3ZhcicpLFxuICAgICAgICBmdW5jdGlvbjoga3coJ2Z1bmN0aW9uJyksXG4gICAgICAgIGNhdGNoOiBrdygnY2F0Y2gnKSxcbiAgICAgICAgZm9yOiBrdygnZm9yJyksXG4gICAgICAgIHN3aXRjaDoga3coJ3N3aXRjaCcpLFxuICAgICAgICBjYXNlOiBrdygnY2FzZScpLFxuICAgICAgICBkZWZhdWx0OiBrdygnZGVmYXVsdCcpLFxuICAgICAgICBpbjogb3BlcmF0b3IsXG4gICAgICAgIHR5cGVvZjogb3BlcmF0b3IsXG4gICAgICAgIGluc3RhbmNlb2Y6IG9wZXJhdG9yLFxuICAgICAgICB0cnVlOiBhdG9tLFxuICAgICAgICBmYWxzZTogYXRvbSxcbiAgICAgICAgbnVsbDogYXRvbSxcbiAgICAgICAgdW5kZWZpbmVkOiBhdG9tLFxuICAgICAgICBOYU46IGF0b20sXG4gICAgICAgIEluZmluaXR5OiBhdG9tLFxuICAgICAgICB0aGlzOiBrdygndGhpcycpLFxuICAgICAgICBjbGFzczoga3coJ2NsYXNzJyksXG4gICAgICAgIHN1cGVyOiBrdygnYXRvbScpLFxuICAgICAgICB5aWVsZDogQyxcbiAgICAgICAgZXhwb3J0OiBrdygnZXhwb3J0JyksXG4gICAgICAgIGltcG9ydDoga3coJ2ltcG9ydCcpLFxuICAgICAgICBleHRlbmRzOiBDLFxuICAgICAgICBhd2FpdDogQyxcbiAgICAgIH07XG4gICAgfSkoKTtcblxuICAgIGNvbnN0IGlzT3BlcmF0b3JDaGFyID0gL1srXFwtKiYlPTw+IT98fl5AXS87XG4gICAgY29uc3QgaXNKc29ubGRLZXl3b3JkID0gL15AKGNvbnRleHR8aWR8dmFsdWV8bGFuZ3VhZ2V8dHlwZXxjb250YWluZXJ8bGlzdHxzZXR8cmV2ZXJzZXxpbmRleHxiYXNlfHZvY2FifGdyYXBoKVwiLztcblxuICAgIGZ1bmN0aW9uIHJlYWRSZWdleHAoc3RyZWFtKSB7XG4gICAgICBsZXQgZXNjYXBlZCA9IGZhbHNlO1xuICAgICAgbGV0IG5leHQ7XG4gICAgICBsZXQgaW5TZXQgPSBmYWxzZTtcbiAgICAgIHdoaWxlICgobmV4dCA9IHN0cmVhbS5uZXh0KCkpICE9IG51bGwpIHtcbiAgICAgICAgaWYgKCFlc2NhcGVkKSB7XG4gICAgICAgICAgaWYgKG5leHQgPT0gJy8nICYmICFpblNldCkgcmV0dXJuO1xuICAgICAgICAgIGlmIChuZXh0ID09ICdbJykgaW5TZXQgPSB0cnVlO1xuICAgICAgICAgIGVsc2UgaWYgKGluU2V0ICYmIG5leHQgPT0gJ10nKSBpblNldCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVzY2FwZWQgPSAhZXNjYXBlZCAmJiBuZXh0ID09ICdcXFxcJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVc2VkIGFzIHNjcmF0Y2ggdmFyaWFibGVzIHRvIGNvbW11bmljYXRlIG11bHRpcGxlIHZhbHVlcyB3aXRob3V0XG4gICAgLy8gY29uc2luZyB1cCB0b25zIG9mIG9iamVjdHMuXG4gICAgbGV0IHR5cGU7XG4gICAgbGV0IGNvbnRlbnQ7XG5cbiAgICBmdW5jdGlvbiByZXQodHAsIHN0eWxlLCBjb250KSB7XG4gICAgICB0eXBlID0gdHA7XG4gICAgICBjb250ZW50ID0gY29udDtcbiAgICAgIHJldHVybiBzdHlsZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b2tlbkJhc2Uoc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgY29uc3QgY2ggPSBzdHJlYW0ubmV4dCgpO1xuICAgICAgaWYgKGNoID09ICdcIicgfHwgY2ggPT0gXCInXCIpIHtcbiAgICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlblN0cmluZyhjaCk7XG4gICAgICAgIHJldHVybiBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTtcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgY2ggPT0gJy4nICYmXG4gICAgICAgIHN0cmVhbS5tYXRjaCgvXlxcZFtcXGRfXSooPzpbZUVdWytcXC1dP1tcXGRfXSspPy8pXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHJldCgnbnVtYmVyJywgJ251bWJlcicpO1xuICAgICAgfVxuICAgICAgaWYgKGNoID09ICcuJyAmJiBzdHJlYW0ubWF0Y2goJy4uJykpIHtcbiAgICAgICAgcmV0dXJuIHJldCgnc3ByZWFkJywgJ21ldGEnKTtcbiAgICAgIH1cbiAgICAgIGlmICgvW1xcW1xcXXt9XFwoXFwpLDtcXDpcXC5dLy50ZXN0KGNoKSkge1xuICAgICAgICByZXR1cm4gcmV0KGNoKTtcbiAgICAgIH1cbiAgICAgIGlmIChjaCA9PSAnPScgJiYgc3RyZWFtLmVhdCgnPicpKSB7XG4gICAgICAgIHJldHVybiByZXQoJz0+JywgJ29wZXJhdG9yJyk7XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIGNoID09ICcwJyAmJlxuICAgICAgICBzdHJlYW0ubWF0Y2goL14oPzp4W1xcZEEtRmEtZl9dK3xvWzAtN19dK3xiWzAxX10rKW4/LylcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gcmV0KCdudW1iZXInLCAnbnVtYmVyJyk7XG4gICAgICB9XG4gICAgICBpZiAoL1xcZC8udGVzdChjaCkpIHtcbiAgICAgICAgc3RyZWFtLm1hdGNoKFxuICAgICAgICAgIC9eW1xcZF9dKig/Om58KD86XFwuW1xcZF9dKik/KD86W2VFXVsrXFwtXT9bXFxkX10rKT8pPy8sXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiByZXQoJ251bWJlcicsICdudW1iZXInKTtcbiAgICAgIH1cbiAgICAgIGlmIChjaCA9PSAnLycpIHtcbiAgICAgICAgaWYgKHN0cmVhbS5lYXQoJyonKSkge1xuICAgICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5Db21tZW50O1xuICAgICAgICAgIHJldHVybiB0b2tlbkNvbW1lbnQoc3RyZWFtLCBzdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0cmVhbS5lYXQoJy8nKSkge1xuICAgICAgICAgIHN0cmVhbS5za2lwVG9FbmQoKTtcbiAgICAgICAgICByZXR1cm4gcmV0KCdjb21tZW50JywgJ2NvbW1lbnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwcmVzc2lvbkFsbG93ZWQoc3RyZWFtLCBzdGF0ZSwgMSkpIHtcbiAgICAgICAgICByZWFkUmVnZXhwKHN0cmVhbSk7XG4gICAgICAgICAgc3RyZWFtLm1hdGNoKC9eXFxiKChbZ2lteXVzXSkoPyFbZ2lteXVzXSpcXDIpKStcXGIvKTtcbiAgICAgICAgICByZXR1cm4gcmV0KCdyZWdleHAnLCAnc3RyaW5nLTInKTtcbiAgICAgICAgfVxuICAgICAgICBzdHJlYW0uZWF0KCc9Jyk7XG4gICAgICAgIHJldHVybiByZXQoJ29wZXJhdG9yJywgJ29wZXJhdG9yJywgc3RyZWFtLmN1cnJlbnQoKSk7XG4gICAgICB9XG4gICAgICBpZiAoY2ggPT0gJ2AnKSB7XG4gICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5RdWFzaTtcbiAgICAgICAgcmV0dXJuIHRva2VuUXVhc2koc3RyZWFtLCBzdGF0ZSk7XG4gICAgICB9XG4gICAgICBpZiAoY2ggPT0gJyMnKSB7XG4gICAgICAgIHN0cmVhbS5za2lwVG9FbmQoKTtcbiAgICAgICAgcmV0dXJuIHJldCgnZXJyb3InLCAnZXJyb3InKTtcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgKGNoID09ICc8JyAmJiBzdHJlYW0ubWF0Y2goJyEtLScpKSB8fFxuICAgICAgICAoY2ggPT0gJy0nICYmIHN0cmVhbS5tYXRjaCgnLT4nKSlcbiAgICAgICkge1xuICAgICAgICBzdHJlYW0uc2tpcFRvRW5kKCk7XG4gICAgICAgIHJldHVybiByZXQoJ2NvbW1lbnQnLCAnY29tbWVudCcpO1xuICAgICAgfVxuICAgICAgaWYgKGlzT3BlcmF0b3JDaGFyLnRlc3QoY2gpKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjaCAhPSAnPicgfHxcbiAgICAgICAgICAhc3RhdGUubGV4aWNhbCB8fFxuICAgICAgICAgIHN0YXRlLmxleGljYWwudHlwZSAhPSAnPidcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKHN0cmVhbS5lYXQoJz0nKSkge1xuICAgICAgICAgICAgaWYgKGNoID09ICchJyB8fCBjaCA9PSAnPScpIHN0cmVhbS5lYXQoJz0nKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKC9bPD4qK1xcLV0vLnRlc3QoY2gpKSB7XG4gICAgICAgICAgICBzdHJlYW0uZWF0KGNoKTtcbiAgICAgICAgICAgIGlmIChjaCA9PSAnPicpIHN0cmVhbS5lYXQoY2gpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0KCdvcGVyYXRvcicsICdvcGVyYXRvcicsIHN0cmVhbS5jdXJyZW50KCkpO1xuICAgICAgfVxuICAgICAgaWYgKHdvcmRSRS50ZXN0KGNoKSkge1xuICAgICAgICBzdHJlYW0uZWF0V2hpbGUod29yZFJFKTtcbiAgICAgICAgY29uc3Qgd29yZCA9IHN0cmVhbS5jdXJyZW50KCk7XG4gICAgICAgIGlmIChzdGF0ZS5sYXN0VHlwZSAhPSAnLicpIHtcbiAgICAgICAgICBpZiAoa2V5d29yZHMucHJvcGVydHlJc0VudW1lcmFibGUod29yZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGt3ID0ga2V5d29yZHNbd29yZF07XG4gICAgICAgICAgICByZXR1cm4gcmV0KGt3LnR5cGUsIGt3LnN0eWxlLCB3b3JkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgd29yZCA9PSAnYXN5bmMnICYmXG4gICAgICAgICAgICBzdHJlYW0ubWF0Y2goL14oXFxzfFxcL1xcKi4qP1xcKlxcLykqW1xcW1xcKFxcd10vLCBmYWxzZSlcbiAgICAgICAgICApXG4gICAgICAgICAgICByZXR1cm4gcmV0KCdhc3luYycsICdrZXl3b3JkJywgd29yZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldCgndmFyaWFibGUnLCAndmFyaWFibGUnLCB3b3JkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b2tlblN0cmluZyhxdW90ZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdHJlYW0sIHN0YXRlKSB7XG4gICAgICAgIGxldCBlc2NhcGVkID0gZmFsc2U7XG4gICAgICAgIGxldCBuZXh0O1xuICAgICAgICBpZiAoXG4gICAgICAgICAganNvbmxkTW9kZSAmJlxuICAgICAgICAgIHN0cmVhbS5wZWVrKCkgPT0gJ0AnICYmXG4gICAgICAgICAgc3RyZWFtLm1hdGNoKGlzSnNvbmxkS2V5d29yZClcbiAgICAgICAgKSB7XG4gICAgICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlbkJhc2U7XG4gICAgICAgICAgcmV0dXJuIHJldCgnanNvbmxkLWtleXdvcmQnLCAnbWV0YScpO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlICgobmV4dCA9IHN0cmVhbS5uZXh0KCkpICE9IG51bGwpIHtcbiAgICAgICAgICBpZiAobmV4dCA9PSBxdW90ZSAmJiAhZXNjYXBlZCkgYnJlYWs7XG4gICAgICAgICAgZXNjYXBlZCA9ICFlc2NhcGVkICYmIG5leHQgPT0gJ1xcXFwnO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZXNjYXBlZCkgc3RhdGUudG9rZW5pemUgPSB0b2tlbkJhc2U7XG4gICAgICAgIHJldHVybiByZXQoJ3N0cmluZycsICdzdHJpbmcnKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdG9rZW5Db21tZW50KHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIGxldCBtYXliZUVuZCA9IGZhbHNlO1xuICAgICAgbGV0IGNoO1xuICAgICAgd2hpbGUgKChjaCA9IHN0cmVhbS5uZXh0KCkpKSB7XG4gICAgICAgIGlmIChjaCA9PSAnLycgJiYgbWF5YmVFbmQpIHtcbiAgICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuQmFzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBtYXliZUVuZCA9IGNoID09ICcqJztcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXQoJ2NvbW1lbnQnLCAnY29tbWVudCcpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRva2VuUXVhc2koc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgbGV0IGVzY2FwZWQgPSBmYWxzZTtcbiAgICAgIGxldCBuZXh0O1xuICAgICAgd2hpbGUgKChuZXh0ID0gc3RyZWFtLm5leHQoKSkgIT0gbnVsbCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgIWVzY2FwZWQgJiZcbiAgICAgICAgICAobmV4dCA9PSAnYCcgfHwgKG5leHQgPT0gJyQnICYmIHN0cmVhbS5lYXQoJ3snKSkpXG4gICAgICAgICkge1xuICAgICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5CYXNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGVzY2FwZWQgPSAhZXNjYXBlZCAmJiBuZXh0ID09ICdcXFxcJztcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXQoJ3F1YXNpJywgJ3N0cmluZy0yJywgc3RyZWFtLmN1cnJlbnQoKSk7XG4gICAgfVxuXG4gICAgY29uc3QgYnJhY2tldHMgPSAnKFt7fV0pJztcbiAgICAvLyBUaGlzIGlzIGEgY3J1ZGUgbG9va2FoZWFkIHRyaWNrIHRvIHRyeSBhbmQgbm90aWNlIHRoYXQgd2UncmVcbiAgICAvLyBwYXJzaW5nIHRoZSBhcmd1bWVudCBwYXR0ZXJucyBmb3IgYSBmYXQtYXJyb3cgZnVuY3Rpb24gYmVmb3JlIHdlXG4gICAgLy8gYWN0dWFsbHkgaGl0IHRoZSBhcnJvdyB0b2tlbi4gSXQgb25seSB3b3JrcyBpZiB0aGUgYXJyb3cgaXMgb25cbiAgICAvLyB0aGUgc2FtZSBsaW5lIGFzIHRoZSBhcmd1bWVudHMgYW5kIHRoZXJlJ3Mgbm8gc3RyYW5nZSBub2lzZVxuICAgIC8vIChjb21tZW50cykgaW4gYmV0d2Vlbi4gRmFsbGJhY2sgaXMgdG8gb25seSBub3RpY2Ugd2hlbiB3ZSBoaXQgdGhlXG4gICAgLy8gYXJyb3csIGFuZCBub3QgZGVjbGFyZSB0aGUgYXJndW1lbnRzIGFzIGxvY2FscyBmb3IgdGhlIGFycm93XG4gICAgLy8gYm9keS5cbiAgICBmdW5jdGlvbiBmaW5kRmF0QXJyb3coc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgaWYgKHN0YXRlLmZhdEFycm93QXQpIHN0YXRlLmZhdEFycm93QXQgPSBudWxsO1xuICAgICAgbGV0IGFycm93ID0gc3RyZWFtLnN0cmluZy5pbmRleE9mKCc9PicsIHN0cmVhbS5zdGFydCk7XG4gICAgICBpZiAoYXJyb3cgPCAwKSByZXR1cm47XG5cbiAgICAgIGlmIChpc1RTKSB7XG4gICAgICAgIC8vIFRyeSB0byBza2lwIFR5cGVTY3JpcHQgcmV0dXJuIHR5cGUgZGVjbGFyYXRpb25zIGFmdGVyIHRoZSBhcmd1bWVudHNcbiAgICAgICAgY29uc3QgbSA9IC86XFxzKig/OlxcdysoPzo8W14+XSo+fFxcW1xcXSk/fFxce1tefV0qXFx9KVxccyokLy5leGVjKFxuICAgICAgICAgIHN0cmVhbS5zdHJpbmcuc2xpY2Uoc3RyZWFtLnN0YXJ0LCBhcnJvdyksXG4gICAgICAgICk7XG4gICAgICAgIGlmIChtKSBhcnJvdyA9IG0uaW5kZXg7XG4gICAgICB9XG5cbiAgICAgIGxldCBkZXB0aCA9IDA7XG4gICAgICBsZXQgc2F3U29tZXRoaW5nID0gZmFsc2U7XG4gICAgICBmb3IgKHZhciBwb3MgPSBhcnJvdyAtIDE7IHBvcyA+PSAwOyAtLXBvcykge1xuICAgICAgICBjb25zdCBjaCA9IHN0cmVhbS5zdHJpbmcuY2hhckF0KHBvcyk7XG4gICAgICAgIGNvbnN0IGJyYWNrZXQgPSBicmFja2V0cy5pbmRleE9mKGNoKTtcbiAgICAgICAgaWYgKGJyYWNrZXQgPj0gMCAmJiBicmFja2V0IDwgMykge1xuICAgICAgICAgIGlmICghZGVwdGgpIHtcbiAgICAgICAgICAgICsrcG9zO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICgtLWRlcHRoID09IDApIHtcbiAgICAgICAgICAgIGlmIChjaCA9PSAnKCcpIHNhd1NvbWV0aGluZyA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYnJhY2tldCA+PSAzICYmIGJyYWNrZXQgPCA2KSB7XG4gICAgICAgICAgKytkZXB0aDtcbiAgICAgICAgfSBlbHNlIGlmICh3b3JkUkUudGVzdChjaCkpIHtcbiAgICAgICAgICBzYXdTb21ldGhpbmcgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKC9bXCInXFwvYF0vLnRlc3QoY2gpKSB7XG4gICAgICAgICAgZm9yICg7IDsgLS1wb3MpIHtcbiAgICAgICAgICAgIGlmIChwb3MgPT0gMCkgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3QgbmV4dCA9IHN0cmVhbS5zdHJpbmcuY2hhckF0KHBvcyAtIDEpO1xuICAgICAgICAgICAgaWYgKG5leHQgPT0gY2ggJiYgc3RyZWFtLnN0cmluZy5jaGFyQXQocG9zIC0gMikgIT0gJ1xcXFwnKSB7XG4gICAgICAgICAgICAgIHBvcy0tO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoc2F3U29tZXRoaW5nICYmICFkZXB0aCkge1xuICAgICAgICAgICsrcG9zO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc2F3U29tZXRoaW5nICYmICFkZXB0aCkgc3RhdGUuZmF0QXJyb3dBdCA9IHBvcztcbiAgICB9XG5cbiAgICAvLyBQYXJzZXJcblxuICAgIGNvbnN0IGF0b21pY1R5cGVzID0ge1xuICAgICAgYXRvbTogdHJ1ZSxcbiAgICAgIG51bWJlcjogdHJ1ZSxcbiAgICAgIHZhcmlhYmxlOiB0cnVlLFxuICAgICAgc3RyaW5nOiB0cnVlLFxuICAgICAgcmVnZXhwOiB0cnVlLFxuICAgICAgdGhpczogdHJ1ZSxcbiAgICAgICdqc29ubGQta2V5d29yZCc6IHRydWUsXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIEpTTGV4aWNhbChpbmRlbnRlZCwgY29sdW1uLCB0eXBlLCBhbGlnbiwgcHJldiwgaW5mbykge1xuICAgICAgdGhpcy5pbmRlbnRlZCA9IGluZGVudGVkO1xuICAgICAgdGhpcy5jb2x1bW4gPSBjb2x1bW47XG4gICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgdGhpcy5wcmV2ID0gcHJldjtcbiAgICAgIHRoaXMuaW5mbyA9IGluZm87XG4gICAgICBpZiAoYWxpZ24gIT0gbnVsbCkgdGhpcy5hbGlnbiA9IGFsaWduO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluU2NvcGUoc3RhdGUsIHZhcm5hbWUpIHtcbiAgICAgIGZvciAodmFyIHYgPSBzdGF0ZS5sb2NhbFZhcnM7IHY7IHYgPSB2Lm5leHQpIHtcbiAgICAgICAgaWYgKHYubmFtZSA9PSB2YXJuYW1lKSByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGN4ID0gc3RhdGUuY29udGV4dDsgY3g7IGN4ID0gY3gucHJldikge1xuICAgICAgICBmb3IgKHZhciB2ID0gY3gudmFyczsgdjsgdiA9IHYubmV4dCkge1xuICAgICAgICAgIGlmICh2Lm5hbWUgPT0gdmFybmFtZSkgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUpTKHN0YXRlLCBzdHlsZSwgdHlwZSwgY29udGVudCwgc3RyZWFtKSB7XG4gICAgICBjb25zdCBjYyA9IHN0YXRlLmNjO1xuICAgICAgLy8gQ29tbXVuaWNhdGUgb3VyIGNvbnRleHQgdG8gdGhlIGNvbWJpbmF0b3JzLlxuICAgICAgLy8gKExlc3Mgd2FzdGVmdWwgdGhhbiBjb25zaW5nIHVwIGEgaHVuZHJlZCBjbG9zdXJlcyBvbiBldmVyeSBjYWxsLilcbiAgICAgIGN4LnN0YXRlID0gc3RhdGU7XG4gICAgICBjeC5zdHJlYW0gPSBzdHJlYW07XG4gICAgICAoY3gubWFya2VkID0gbnVsbCksIChjeC5jYyA9IGNjKTtcbiAgICAgIGN4LnN0eWxlID0gc3R5bGU7XG5cbiAgICAgIGlmICghc3RhdGUubGV4aWNhbC5oYXNPd25Qcm9wZXJ0eSgnYWxpZ24nKSkge1xuICAgICAgICBzdGF0ZS5sZXhpY2FsLmFsaWduID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgY29uc3QgY29tYmluYXRvciA9IGNjLmxlbmd0aFxuICAgICAgICAgID8gY2MucG9wKClcbiAgICAgICAgICA6IGpzb25Nb2RlXG4gICAgICAgICAgPyBleHByZXNzaW9uXG4gICAgICAgICAgOiBzdGF0ZW1lbnQ7XG4gICAgICAgIGlmIChjb21iaW5hdG9yKHR5cGUsIGNvbnRlbnQpKSB7XG4gICAgICAgICAgd2hpbGUgKGNjLmxlbmd0aCAmJiBjY1tjYy5sZW5ndGggLSAxXS5sZXgpIHtcbiAgICAgICAgICAgIGNjLnBvcCgpKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjeC5tYXJrZWQpIHJldHVybiBjeC5tYXJrZWQ7XG4gICAgICAgICAgaWYgKHR5cGUgPT0gJ3ZhcmlhYmxlJyAmJiBpblNjb3BlKHN0YXRlLCBjb250ZW50KSlcbiAgICAgICAgICAgIHJldHVybiAndmFyaWFibGUtMic7XG4gICAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ29tYmluYXRvciB1dGlsc1xuXG4gICAgdmFyIGN4ID0ge1xuICAgICAgc3RhdGU6IG51bGwsXG4gICAgICBjb2x1bW46IG51bGwsXG4gICAgICBtYXJrZWQ6IG51bGwsXG4gICAgICBjYzogbnVsbCxcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcGFzcygpIHtcbiAgICAgIGZvciAobGV0IGkgPSBhcmd1bWVudHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXG4gICAgICAgIGN4LmNjLnB1c2goYXJndW1lbnRzW2ldKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb250KCkge1xuICAgICAgcGFzcy5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5MaXN0KG5hbWUsIGxpc3QpIHtcbiAgICAgIGZvciAobGV0IHYgPSBsaXN0OyB2OyB2ID0gdi5uZXh0KSB7XG4gICAgICAgIGlmICh2Lm5hbWUgPT0gbmFtZSkgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVnaXN0ZXIodmFybmFtZSkge1xuICAgICAgY29uc3Qgc3RhdGUgPSBjeC5zdGF0ZTtcbiAgICAgIGN4Lm1hcmtlZCA9ICdkZWYnO1xuICAgICAgaWYgKHN0YXRlLmNvbnRleHQpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHN0YXRlLmxleGljYWwuaW5mbyA9PSAndmFyJyAmJlxuICAgICAgICAgIHN0YXRlLmNvbnRleHQgJiZcbiAgICAgICAgICBzdGF0ZS5jb250ZXh0LmJsb2NrXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIEZJWE1FIGZ1bmN0aW9uIGRlY2xzIGFyZSBhbHNvIG5vdCBibG9jayBzY29wZWRcbiAgICAgICAgICBjb25zdCBuZXdDb250ZXh0ID0gcmVnaXN0ZXJWYXJTY29wZWQoXG4gICAgICAgICAgICB2YXJuYW1lLFxuICAgICAgICAgICAgc3RhdGUuY29udGV4dCxcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChuZXdDb250ZXh0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHN0YXRlLmNvbnRleHQgPSBuZXdDb250ZXh0O1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghaW5MaXN0KHZhcm5hbWUsIHN0YXRlLmxvY2FsVmFycykpIHtcbiAgICAgICAgICBzdGF0ZS5sb2NhbFZhcnMgPSBuZXcgVmFyKHZhcm5hbWUsIHN0YXRlLmxvY2FsVmFycyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBGYWxsIHRocm91Z2ggbWVhbnMgdGhpcyBpcyBnbG9iYWxcbiAgICAgIGlmIChcbiAgICAgICAgcGFyc2VyQ29uZmlnLmdsb2JhbFZhcnMgJiZcbiAgICAgICAgIWluTGlzdCh2YXJuYW1lLCBzdGF0ZS5nbG9iYWxWYXJzKVxuICAgICAgKSB7XG4gICAgICAgIHN0YXRlLmdsb2JhbFZhcnMgPSBuZXcgVmFyKHZhcm5hbWUsIHN0YXRlLmdsb2JhbFZhcnMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyVmFyU2NvcGVkKHZhcm5hbWUsIGNvbnRleHQpIHtcbiAgICAgIGlmICghY29udGV4dCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmIChjb250ZXh0LmJsb2NrKSB7XG4gICAgICAgIGNvbnN0IGlubmVyID0gcmVnaXN0ZXJWYXJTY29wZWQodmFybmFtZSwgY29udGV4dC5wcmV2KTtcbiAgICAgICAgaWYgKCFpbm5lcikgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmIChpbm5lciA9PSBjb250ZXh0LnByZXYpIHJldHVybiBjb250ZXh0O1xuICAgICAgICByZXR1cm4gbmV3IENvbnRleHQoaW5uZXIsIGNvbnRleHQudmFycywgdHJ1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoaW5MaXN0KHZhcm5hbWUsIGNvbnRleHQudmFycykpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IENvbnRleHQoXG4gICAgICAgIGNvbnRleHQucHJldixcbiAgICAgICAgbmV3IFZhcih2YXJuYW1lLCBjb250ZXh0LnZhcnMpLFxuICAgICAgICBmYWxzZSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNNb2RpZmllcihuYW1lKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBuYW1lID09ICdwdWJsaWMnIHx8XG4gICAgICAgIG5hbWUgPT0gJ3ByaXZhdGUnIHx8XG4gICAgICAgIG5hbWUgPT0gJ3Byb3RlY3RlZCcgfHxcbiAgICAgICAgbmFtZSA9PSAnYWJzdHJhY3QnIHx8XG4gICAgICAgIG5hbWUgPT0gJ3JlYWRvbmx5J1xuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBDb21iaW5hdG9yc1xuXG4gICAgZnVuY3Rpb24gQ29udGV4dChwcmV2LCB2YXJzLCBibG9jaykge1xuICAgICAgdGhpcy5wcmV2ID0gcHJldjtcbiAgICAgIHRoaXMudmFycyA9IHZhcnM7XG4gICAgICB0aGlzLmJsb2NrID0gYmxvY2s7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gVmFyKG5hbWUsIG5leHQpIHtcbiAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICB0aGlzLm5leHQgPSBuZXh0O1xuICAgIH1cblxuICAgIGNvbnN0IGRlZmF1bHRWYXJzID0gbmV3IFZhcigndGhpcycsIG5ldyBWYXIoJ2FyZ3VtZW50cycsIG51bGwpKTtcblxuICAgIGZ1bmN0aW9uIHB1c2hjb250ZXh0KCkge1xuICAgICAgY3guc3RhdGUuY29udGV4dCA9IG5ldyBDb250ZXh0KFxuICAgICAgICBjeC5zdGF0ZS5jb250ZXh0LFxuICAgICAgICBjeC5zdGF0ZS5sb2NhbFZhcnMsXG4gICAgICAgIGZhbHNlLFxuICAgICAgKTtcbiAgICAgIGN4LnN0YXRlLmxvY2FsVmFycyA9IGRlZmF1bHRWYXJzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHB1c2hibG9ja2NvbnRleHQoKSB7XG4gICAgICBjeC5zdGF0ZS5jb250ZXh0ID0gbmV3IENvbnRleHQoXG4gICAgICAgIGN4LnN0YXRlLmNvbnRleHQsXG4gICAgICAgIGN4LnN0YXRlLmxvY2FsVmFycyxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICk7XG4gICAgICBjeC5zdGF0ZS5sb2NhbFZhcnMgPSBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBvcGNvbnRleHQoKSB7XG4gICAgICBjeC5zdGF0ZS5sb2NhbFZhcnMgPSBjeC5zdGF0ZS5jb250ZXh0LnZhcnM7XG4gICAgICBjeC5zdGF0ZS5jb250ZXh0ID0gY3guc3RhdGUuY29udGV4dC5wcmV2O1xuICAgIH1cbiAgICBwb3Bjb250ZXh0LmxleCA9IHRydWU7XG5cbiAgICBmdW5jdGlvbiBwdXNobGV4KHR5cGUsIGluZm8pIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBjeC5zdGF0ZTtcbiAgICAgICAgbGV0IGluZGVudCA9IHN0YXRlLmluZGVudGVkO1xuICAgICAgICBpZiAoc3RhdGUubGV4aWNhbC50eXBlID09ICdzdGF0JylcbiAgICAgICAgICBpbmRlbnQgPSBzdGF0ZS5sZXhpY2FsLmluZGVudGVkO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgbGV0IG91dGVyID0gc3RhdGUubGV4aWNhbDtcbiAgICAgICAgICAgIG91dGVyICYmIG91dGVyLnR5cGUgPT0gJyknICYmIG91dGVyLmFsaWduO1xuICAgICAgICAgICAgb3V0ZXIgPSBvdXRlci5wcmV2XG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpbmRlbnQgPSBvdXRlci5pbmRlbnRlZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUubGV4aWNhbCA9IG5ldyBKU0xleGljYWwoXG4gICAgICAgICAgaW5kZW50LFxuICAgICAgICAgIGN4LnN0cmVhbS5jb2x1bW4oKSxcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgc3RhdGUubGV4aWNhbCxcbiAgICAgICAgICBpbmZvLFxuICAgICAgICApO1xuICAgICAgfTtcbiAgICAgIHJlc3VsdC5sZXggPSB0cnVlO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwb3BsZXgoKSB7XG4gICAgICBjb25zdCBzdGF0ZSA9IGN4LnN0YXRlO1xuICAgICAgaWYgKHN0YXRlLmxleGljYWwucHJldikge1xuICAgICAgICBpZiAoc3RhdGUubGV4aWNhbC50eXBlID09ICcpJykge1xuICAgICAgICAgIHN0YXRlLmluZGVudGVkID0gc3RhdGUubGV4aWNhbC5pbmRlbnRlZDtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5sZXhpY2FsID0gc3RhdGUubGV4aWNhbC5wcmV2O1xuICAgICAgfVxuICAgIH1cbiAgICBwb3BsZXgubGV4ID0gdHJ1ZTtcblxuICAgIGZ1bmN0aW9uIGV4cGVjdCh3YW50ZWQpIHtcbiAgICAgIGZ1bmN0aW9uIGV4cCh0eXBlKSB7XG4gICAgICAgIGlmICh0eXBlID09IHdhbnRlZCkgcmV0dXJuIGNvbnQoKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHdhbnRlZCA9PSAnOycgfHxcbiAgICAgICAgICB0eXBlID09ICd9JyB8fFxuICAgICAgICAgIHR5cGUgPT0gJyknIHx8XG4gICAgICAgICAgdHlwZSA9PSAnXSdcbiAgICAgICAgKVxuICAgICAgICAgIHJldHVybiBwYXNzKCk7XG4gICAgICAgIHJldHVybiBjb250KGV4cCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZXhwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN0YXRlbWVudCh0eXBlLCB2YWx1ZSkge1xuICAgICAgaWYgKHR5cGUgPT0gJ3ZhcicpXG4gICAgICAgIHJldHVybiBjb250KFxuICAgICAgICAgIHB1c2hsZXgoJ3ZhcmRlZicsIHZhbHVlKSxcbiAgICAgICAgICB2YXJkZWYsXG4gICAgICAgICAgZXhwZWN0KCc7JyksXG4gICAgICAgICAgcG9wbGV4LFxuICAgICAgICApO1xuICAgICAgaWYgKHR5cGUgPT0gJ2tleXdvcmQgYScpXG4gICAgICAgIHJldHVybiBjb250KHB1c2hsZXgoJ2Zvcm0nKSwgcGFyZW5FeHByLCBzdGF0ZW1lbnQsIHBvcGxleCk7XG4gICAgICBpZiAodHlwZSA9PSAna2V5d29yZCBiJylcbiAgICAgICAgcmV0dXJuIGNvbnQocHVzaGxleCgnZm9ybScpLCBzdGF0ZW1lbnQsIHBvcGxleCk7XG4gICAgICBpZiAodHlwZSA9PSAna2V5d29yZCBkJykge1xuICAgICAgICByZXR1cm4gY3guc3RyZWFtLm1hdGNoKC9eXFxzKiQvLCBmYWxzZSlcbiAgICAgICAgICA/IGNvbnQoKVxuICAgICAgICAgIDogY29udChcbiAgICAgICAgICAgICAgcHVzaGxleCgnc3RhdCcpLFxuICAgICAgICAgICAgICBtYXliZWV4cHJlc3Npb24sXG4gICAgICAgICAgICAgIGV4cGVjdCgnOycpLFxuICAgICAgICAgICAgICBwb3BsZXgsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgPT0gJ2RlYnVnZ2VyJykgcmV0dXJuIGNvbnQoZXhwZWN0KCc7JykpO1xuICAgICAgaWYgKHR5cGUgPT0gJ3snKVxuICAgICAgICByZXR1cm4gY29udChcbiAgICAgICAgICBwdXNobGV4KCd9JyksXG4gICAgICAgICAgcHVzaGJsb2NrY29udGV4dCxcbiAgICAgICAgICBibG9jayxcbiAgICAgICAgICBwb3BsZXgsXG4gICAgICAgICAgcG9wY29udGV4dCxcbiAgICAgICAgKTtcbiAgICAgIGlmICh0eXBlID09ICc7JykgcmV0dXJuIGNvbnQoKTtcbiAgICAgIGlmICh0eXBlID09ICdpZicpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGN4LnN0YXRlLmxleGljYWwuaW5mbyA9PSAnZWxzZScgJiZcbiAgICAgICAgICBjeC5zdGF0ZS5jY1tjeC5zdGF0ZS5jYy5sZW5ndGggLSAxXSA9PSBwb3BsZXhcbiAgICAgICAgKSB7XG4gICAgICAgICAgY3guc3RhdGUuY2MucG9wKCkoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udChcbiAgICAgICAgICBwdXNobGV4KCdmb3JtJyksXG4gICAgICAgICAgcGFyZW5FeHByLFxuICAgICAgICAgIHN0YXRlbWVudCxcbiAgICAgICAgICBwb3BsZXgsXG4gICAgICAgICAgbWF5YmVlbHNlLFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgPT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGNvbnQoZnVuY3Rpb25kZWYpO1xuICAgICAgaWYgKHR5cGUgPT0gJ2ZvcicpXG4gICAgICAgIHJldHVybiBjb250KHB1c2hsZXgoJ2Zvcm0nKSwgZm9yc3BlYywgc3RhdGVtZW50LCBwb3BsZXgpO1xuICAgICAgaWYgKHR5cGUgPT0gJ2NsYXNzJyB8fCAoaXNUUyAmJiB2YWx1ZSA9PSAnaW50ZXJmYWNlJykpIHtcbiAgICAgICAgY3gubWFya2VkID0gJ2tleXdvcmQnO1xuICAgICAgICByZXR1cm4gY29udChcbiAgICAgICAgICBwdXNobGV4KCdmb3JtJywgdHlwZSA9PSAnY2xhc3MnID8gdHlwZSA6IHZhbHVlKSxcbiAgICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgICAgcG9wbGV4LFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgPT0gJ3ZhcmlhYmxlJykge1xuICAgICAgICBpZiAoaXNUUyAmJiB2YWx1ZSA9PSAnZGVjbGFyZScpIHtcbiAgICAgICAgICBjeC5tYXJrZWQgPSAna2V5d29yZCc7XG4gICAgICAgICAgcmV0dXJuIGNvbnQoc3RhdGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgaXNUUyAmJlxuICAgICAgICAgICh2YWx1ZSA9PSAnbW9kdWxlJyB8fCB2YWx1ZSA9PSAnZW51bScgfHwgdmFsdWUgPT0gJ3R5cGUnKSAmJlxuICAgICAgICAgIGN4LnN0cmVhbS5tYXRjaCgvXlxccypcXHcvLCBmYWxzZSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgY3gubWFya2VkID0gJ2tleXdvcmQnO1xuICAgICAgICAgIGlmICh2YWx1ZSA9PSAnZW51bScpIHJldHVybiBjb250KGVudW1kZWYpO1xuICAgICAgICAgIGlmICh2YWx1ZSA9PSAndHlwZScpXG4gICAgICAgICAgICByZXR1cm4gY29udChcbiAgICAgICAgICAgICAgdHlwZW5hbWUsXG4gICAgICAgICAgICAgIGV4cGVjdCgnb3BlcmF0b3InKSxcbiAgICAgICAgICAgICAgdHlwZWV4cHIsXG4gICAgICAgICAgICAgIGV4cGVjdCgnOycpLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gY29udChcbiAgICAgICAgICAgIHB1c2hsZXgoJ2Zvcm0nKSxcbiAgICAgICAgICAgIHBhdHRlcm4sXG4gICAgICAgICAgICBleHBlY3QoJ3snKSxcbiAgICAgICAgICAgIHB1c2hsZXgoJ30nKSxcbiAgICAgICAgICAgIGJsb2NrLFxuICAgICAgICAgICAgcG9wbGV4LFxuICAgICAgICAgICAgcG9wbGV4LFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzVFMgJiYgdmFsdWUgPT0gJ25hbWVzcGFjZScpIHtcbiAgICAgICAgICBjeC5tYXJrZWQgPSAna2V5d29yZCc7XG4gICAgICAgICAgcmV0dXJuIGNvbnQocHVzaGxleCgnZm9ybScpLCBleHByZXNzaW9uLCBzdGF0ZW1lbnQsIHBvcGxleCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzVFMgJiYgdmFsdWUgPT0gJ2Fic3RyYWN0Jykge1xuICAgICAgICAgIGN4Lm1hcmtlZCA9ICdrZXl3b3JkJztcbiAgICAgICAgICByZXR1cm4gY29udChzdGF0ZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250KHB1c2hsZXgoJ3N0YXQnKSwgbWF5YmVsYWJlbCk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZSA9PSAnc3dpdGNoJykge1xuICAgICAgICByZXR1cm4gY29udChcbiAgICAgICAgICBwdXNobGV4KCdmb3JtJyksXG4gICAgICAgICAgcGFyZW5FeHByLFxuICAgICAgICAgIGV4cGVjdCgneycpLFxuICAgICAgICAgIHB1c2hsZXgoJ30nLCAnc3dpdGNoJyksXG4gICAgICAgICAgcHVzaGJsb2NrY29udGV4dCxcbiAgICAgICAgICBibG9jayxcbiAgICAgICAgICBwb3BsZXgsXG4gICAgICAgICAgcG9wbGV4LFxuICAgICAgICAgIHBvcGNvbnRleHQsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZSA9PSAnY2FzZScpIHJldHVybiBjb250KGV4cHJlc3Npb24sIGV4cGVjdCgnOicpKTtcbiAgICAgIGlmICh0eXBlID09ICdkZWZhdWx0JykgcmV0dXJuIGNvbnQoZXhwZWN0KCc6JykpO1xuICAgICAgaWYgKHR5cGUgPT0gJ2NhdGNoJykge1xuICAgICAgICByZXR1cm4gY29udChcbiAgICAgICAgICBwdXNobGV4KCdmb3JtJyksXG4gICAgICAgICAgcHVzaGNvbnRleHQsXG4gICAgICAgICAgbWF5YmVDYXRjaEJpbmRpbmcsXG4gICAgICAgICAgc3RhdGVtZW50LFxuICAgICAgICAgIHBvcGxleCxcbiAgICAgICAgICBwb3Bjb250ZXh0LFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgPT0gJ2V4cG9ydCcpXG4gICAgICAgIHJldHVybiBjb250KHB1c2hsZXgoJ3N0YXQnKSwgYWZ0ZXJFeHBvcnQsIHBvcGxleCk7XG4gICAgICBpZiAodHlwZSA9PSAnaW1wb3J0JylcbiAgICAgICAgcmV0dXJuIGNvbnQocHVzaGxleCgnc3RhdCcpLCBhZnRlckltcG9ydCwgcG9wbGV4KTtcbiAgICAgIGlmICh0eXBlID09ICdhc3luYycpIHJldHVybiBjb250KHN0YXRlbWVudCk7XG4gICAgICBpZiAodmFsdWUgPT0gJ0AnKSByZXR1cm4gY29udChleHByZXNzaW9uLCBzdGF0ZW1lbnQpO1xuICAgICAgcmV0dXJuIHBhc3MocHVzaGxleCgnc3RhdCcpLCBleHByZXNzaW9uLCBleHBlY3QoJzsnKSwgcG9wbGV4KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYXliZUNhdGNoQmluZGluZyh0eXBlKSB7XG4gICAgICBpZiAodHlwZSA9PSAnKCcpIHJldHVybiBjb250KGZ1bmFyZywgZXhwZWN0KCcpJykpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV4cHJlc3Npb24odHlwZSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiBleHByZXNzaW9uSW5uZXIodHlwZSwgdmFsdWUsIGZhbHNlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBleHByZXNzaW9uTm9Db21tYSh0eXBlLCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIGV4cHJlc3Npb25Jbm5lcih0eXBlLCB2YWx1ZSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyZW5FeHByKHR5cGUpIHtcbiAgICAgIGlmICh0eXBlICE9ICcoJykgcmV0dXJuIHBhc3MoKTtcbiAgICAgIHJldHVybiBjb250KHB1c2hsZXgoJyknKSwgZXhwcmVzc2lvbiwgZXhwZWN0KCcpJyksIHBvcGxleCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXhwcmVzc2lvbklubmVyKHR5cGUsIHZhbHVlLCBub0NvbW1hKSB7XG4gICAgICBpZiAoY3guc3RhdGUuZmF0QXJyb3dBdCA9PSBjeC5zdHJlYW0uc3RhcnQpIHtcbiAgICAgICAgY29uc3QgYm9keSA9IG5vQ29tbWEgPyBhcnJvd0JvZHlOb0NvbW1hIDogYXJyb3dCb2R5O1xuICAgICAgICBpZiAodHlwZSA9PSAnKCcpIHtcbiAgICAgICAgICByZXR1cm4gY29udChcbiAgICAgICAgICAgIHB1c2hjb250ZXh0LFxuICAgICAgICAgICAgcHVzaGxleCgnKScpLFxuICAgICAgICAgICAgY29tbWFzZXAoZnVuYXJnLCAnKScpLFxuICAgICAgICAgICAgcG9wbGV4LFxuICAgICAgICAgICAgZXhwZWN0KCc9PicpLFxuICAgICAgICAgICAgYm9keSxcbiAgICAgICAgICAgIHBvcGNvbnRleHQsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZSA9PSAndmFyaWFibGUnKVxuICAgICAgICAgIHJldHVybiBwYXNzKFxuICAgICAgICAgICAgcHVzaGNvbnRleHQsXG4gICAgICAgICAgICBwYXR0ZXJuLFxuICAgICAgICAgICAgZXhwZWN0KCc9PicpLFxuICAgICAgICAgICAgYm9keSxcbiAgICAgICAgICAgIHBvcGNvbnRleHQsXG4gICAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbWF5YmVvcCA9IG5vQ29tbWFcbiAgICAgICAgPyBtYXliZW9wZXJhdG9yTm9Db21tYVxuICAgICAgICA6IG1heWJlb3BlcmF0b3JDb21tYTtcbiAgICAgIGlmIChhdG9taWNUeXBlcy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkgcmV0dXJuIGNvbnQobWF5YmVvcCk7XG4gICAgICBpZiAodHlwZSA9PSAnZnVuY3Rpb24nKSByZXR1cm4gY29udChmdW5jdGlvbmRlZiwgbWF5YmVvcCk7XG4gICAgICBpZiAodHlwZSA9PSAnY2xhc3MnIHx8IChpc1RTICYmIHZhbHVlID09ICdpbnRlcmZhY2UnKSkge1xuICAgICAgICBjeC5tYXJrZWQgPSAna2V5d29yZCc7XG4gICAgICAgIHJldHVybiBjb250KHB1c2hsZXgoJ2Zvcm0nKSwgY2xhc3NFeHByZXNzaW9uLCBwb3BsZXgpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgPT0gJ2tleXdvcmQgYycgfHwgdHlwZSA9PSAnYXN5bmMnKVxuICAgICAgICByZXR1cm4gY29udChub0NvbW1hID8gZXhwcmVzc2lvbk5vQ29tbWEgOiBleHByZXNzaW9uKTtcbiAgICAgIGlmICh0eXBlID09ICcoJylcbiAgICAgICAgcmV0dXJuIGNvbnQoXG4gICAgICAgICAgcHVzaGxleCgnKScpLFxuICAgICAgICAgIG1heWJlZXhwcmVzc2lvbixcbiAgICAgICAgICBleHBlY3QoJyknKSxcbiAgICAgICAgICBwb3BsZXgsXG4gICAgICAgICAgbWF5YmVvcCxcbiAgICAgICAgKTtcbiAgICAgIGlmICh0eXBlID09ICdvcGVyYXRvcicgfHwgdHlwZSA9PSAnc3ByZWFkJylcbiAgICAgICAgcmV0dXJuIGNvbnQobm9Db21tYSA/IGV4cHJlc3Npb25Ob0NvbW1hIDogZXhwcmVzc2lvbik7XG4gICAgICBpZiAodHlwZSA9PSAnWycpXG4gICAgICAgIHJldHVybiBjb250KHB1c2hsZXgoJ10nKSwgYXJyYXlMaXRlcmFsLCBwb3BsZXgsIG1heWJlb3ApO1xuICAgICAgaWYgKHR5cGUgPT0gJ3snKVxuICAgICAgICByZXR1cm4gY29udENvbW1hc2VwKG9ianByb3AsICd9JywgbnVsbCwgbWF5YmVvcCk7XG4gICAgICBpZiAodHlwZSA9PSAncXVhc2knKSByZXR1cm4gcGFzcyhxdWFzaSwgbWF5YmVvcCk7XG4gICAgICBpZiAodHlwZSA9PSAnbmV3JykgcmV0dXJuIGNvbnQobWF5YmVUYXJnZXQobm9Db21tYSkpO1xuICAgICAgaWYgKHR5cGUgPT0gJ2ltcG9ydCcpIHJldHVybiBjb250KGV4cHJlc3Npb24pO1xuICAgICAgcmV0dXJuIGNvbnQoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYXliZWV4cHJlc3Npb24odHlwZSkge1xuICAgICAgaWYgKHR5cGUubWF0Y2goL1s7XFx9XFwpXFxdLF0vKSkgcmV0dXJuIHBhc3MoKTtcbiAgICAgIHJldHVybiBwYXNzKGV4cHJlc3Npb24pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1heWJlb3BlcmF0b3JDb21tYSh0eXBlLCB2YWx1ZSkge1xuICAgICAgaWYgKHR5cGUgPT0gJywnKSByZXR1cm4gY29udChleHByZXNzaW9uKTtcbiAgICAgIHJldHVybiBtYXliZW9wZXJhdG9yTm9Db21tYSh0eXBlLCB2YWx1ZSwgZmFsc2UpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1heWJlb3BlcmF0b3JOb0NvbW1hKHR5cGUsIHZhbHVlLCBub0NvbW1hKSB7XG4gICAgICBjb25zdCBtZSA9XG4gICAgICAgIG5vQ29tbWEgPT0gZmFsc2UgPyBtYXliZW9wZXJhdG9yQ29tbWEgOiBtYXliZW9wZXJhdG9yTm9Db21tYTtcbiAgICAgIGNvbnN0IGV4cHIgPSBub0NvbW1hID09IGZhbHNlID8gZXhwcmVzc2lvbiA6IGV4cHJlc3Npb25Ob0NvbW1hO1xuICAgICAgaWYgKHR5cGUgPT0gJz0+JylcbiAgICAgICAgcmV0dXJuIGNvbnQoXG4gICAgICAgICAgcHVzaGNvbnRleHQsXG4gICAgICAgICAgbm9Db21tYSA/IGFycm93Qm9keU5vQ29tbWEgOiBhcnJvd0JvZHksXG4gICAgICAgICAgcG9wY29udGV4dCxcbiAgICAgICAgKTtcbiAgICAgIGlmICh0eXBlID09ICdvcGVyYXRvcicpIHtcbiAgICAgICAgaWYgKC9cXCtcXCt8LS0vLnRlc3QodmFsdWUpIHx8IChpc1RTICYmIHZhbHVlID09ICchJykpXG4gICAgICAgICAgcmV0dXJuIGNvbnQobWUpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgaXNUUyAmJlxuICAgICAgICAgIHZhbHVlID09ICc8JyAmJlxuICAgICAgICAgIGN4LnN0cmVhbS5tYXRjaCgvXihbXj5dfDwuKj8+KSo+XFxzKlxcKC8sIGZhbHNlKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gY29udChcbiAgICAgICAgICAgIHB1c2hsZXgoJz4nKSxcbiAgICAgICAgICAgIGNvbW1hc2VwKHR5cGVleHByLCAnPicpLFxuICAgICAgICAgICAgcG9wbGV4LFxuICAgICAgICAgICAgbWUsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgPT0gJz8nKSByZXR1cm4gY29udChleHByZXNzaW9uLCBleHBlY3QoJzonKSwgZXhwcik7XG4gICAgICAgIHJldHVybiBjb250KGV4cHIpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgPT0gJ3F1YXNpJykge1xuICAgICAgICByZXR1cm4gcGFzcyhxdWFzaSwgbWUpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgPT0gJzsnKSByZXR1cm47XG4gICAgICBpZiAodHlwZSA9PSAnKCcpXG4gICAgICAgIHJldHVybiBjb250Q29tbWFzZXAoZXhwcmVzc2lvbk5vQ29tbWEsICcpJywgJ2NhbGwnLCBtZSk7XG4gICAgICBpZiAodHlwZSA9PSAnLicpIHJldHVybiBjb250KHByb3BlcnR5LCBtZSk7XG4gICAgICBpZiAodHlwZSA9PSAnWycpXG4gICAgICAgIHJldHVybiBjb250KFxuICAgICAgICAgIHB1c2hsZXgoJ10nKSxcbiAgICAgICAgICBtYXliZWV4cHJlc3Npb24sXG4gICAgICAgICAgZXhwZWN0KCddJyksXG4gICAgICAgICAgcG9wbGV4LFxuICAgICAgICAgIG1lLFxuICAgICAgICApO1xuICAgICAgaWYgKGlzVFMgJiYgdmFsdWUgPT0gJ2FzJykge1xuICAgICAgICBjeC5tYXJrZWQgPSAna2V5d29yZCc7XG4gICAgICAgIHJldHVybiBjb250KHR5cGVleHByLCBtZSk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZSA9PSAncmVnZXhwJykge1xuICAgICAgICBjeC5zdGF0ZS5sYXN0VHlwZSA9IGN4Lm1hcmtlZCA9ICdvcGVyYXRvcic7XG4gICAgICAgIGN4LnN0cmVhbS5iYWNrVXAoY3guc3RyZWFtLnBvcyAtIGN4LnN0cmVhbS5zdGFydCAtIDEpO1xuICAgICAgICByZXR1cm4gY29udChleHByKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBxdWFzaSh0eXBlLCB2YWx1ZSkge1xuICAgICAgaWYgKHR5cGUgIT0gJ3F1YXNpJykgcmV0dXJuIHBhc3MoKTtcbiAgICAgIGlmICh2YWx1ZS5zbGljZSh2YWx1ZS5sZW5ndGggLSAyKSAhPSAnJHsnKSByZXR1cm4gY29udChxdWFzaSk7XG4gICAgICByZXR1cm4gY29udChleHByZXNzaW9uLCBjb250aW51ZVF1YXNpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb250aW51ZVF1YXNpKHR5cGUpIHtcbiAgICAgIGlmICh0eXBlID09ICd9Jykge1xuICAgICAgICBjeC5tYXJrZWQgPSAnc3RyaW5nLTInO1xuICAgICAgICBjeC5zdGF0ZS50b2tlbml6ZSA9IHRva2VuUXVhc2k7XG4gICAgICAgIHJldHVybiBjb250KHF1YXNpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhcnJvd0JvZHkodHlwZSkge1xuICAgICAgZmluZEZhdEFycm93KGN4LnN0cmVhbSwgY3guc3RhdGUpO1xuICAgICAgcmV0dXJuIHBhc3ModHlwZSA9PSAneycgPyBzdGF0ZW1lbnQgOiBleHByZXNzaW9uKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhcnJvd0JvZHlOb0NvbW1hKHR5cGUpIHtcbiAgICAgIGZpbmRGYXRBcnJvdyhjeC5zdHJlYW0sIGN4LnN0YXRlKTtcbiAgICAgIHJldHVybiBwYXNzKHR5cGUgPT0gJ3snID8gc3RhdGVtZW50IDogZXhwcmVzc2lvbk5vQ29tbWEpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1heWJlVGFyZ2V0KG5vQ29tbWEpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICBpZiAodHlwZSA9PSAnLicpXG4gICAgICAgICAgcmV0dXJuIGNvbnQobm9Db21tYSA/IHRhcmdldE5vQ29tbWEgOiB0YXJnZXQpO1xuICAgICAgICBpZiAodHlwZSA9PSAndmFyaWFibGUnICYmIGlzVFMpIHtcbiAgICAgICAgICByZXR1cm4gY29udChcbiAgICAgICAgICAgIG1heWJlVHlwZUFyZ3MsXG4gICAgICAgICAgICBub0NvbW1hID8gbWF5YmVvcGVyYXRvck5vQ29tbWEgOiBtYXliZW9wZXJhdG9yQ29tbWEsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFzcyhub0NvbW1hID8gZXhwcmVzc2lvbk5vQ29tbWEgOiBleHByZXNzaW9uKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdGFyZ2V0KF8sIHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT0gJ3RhcmdldCcpIHtcbiAgICAgICAgY3gubWFya2VkID0gJ2tleXdvcmQnO1xuICAgICAgICByZXR1cm4gY29udChtYXliZW9wZXJhdG9yQ29tbWEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRhcmdldE5vQ29tbWEoXywgdmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PSAndGFyZ2V0Jykge1xuICAgICAgICBjeC5tYXJrZWQgPSAna2V5d29yZCc7XG4gICAgICAgIHJldHVybiBjb250KG1heWJlb3BlcmF0b3JOb0NvbW1hKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYXliZWxhYmVsKHR5cGUpIHtcbiAgICAgIGlmICh0eXBlID09ICc6JykgcmV0dXJuIGNvbnQocG9wbGV4LCBzdGF0ZW1lbnQpO1xuICAgICAgcmV0dXJuIHBhc3MobWF5YmVvcGVyYXRvckNvbW1hLCBleHBlY3QoJzsnKSwgcG9wbGV4KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwcm9wZXJ0eSh0eXBlKSB7XG4gICAgICBpZiAodHlwZSA9PSAndmFyaWFibGUnKSB7XG4gICAgICAgIGN4Lm1hcmtlZCA9ICdwcm9wZXJ0eSc7XG4gICAgICAgIHJldHVybiBjb250KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb2JqcHJvcCh0eXBlLCB2YWx1ZSkge1xuICAgICAgaWYgKHR5cGUgPT0gJ2FzeW5jJykge1xuICAgICAgICBjeC5tYXJrZWQgPSAncHJvcGVydHknO1xuICAgICAgICByZXR1cm4gY29udChvYmpwcm9wKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09ICd2YXJpYWJsZScgfHwgY3guc3R5bGUgPT0gJ2tleXdvcmQnKSB7XG4gICAgICAgIGN4Lm1hcmtlZCA9ICdwcm9wZXJ0eSc7XG4gICAgICAgIGlmICh2YWx1ZSA9PSAnZ2V0JyB8fCB2YWx1ZSA9PSAnc2V0JylcbiAgICAgICAgICByZXR1cm4gY29udChnZXR0ZXJTZXR0ZXIpO1xuICAgICAgICBsZXQgbTsgLy8gV29yayBhcm91bmQgZmF0LWFycm93LWRldGVjdGlvbiBjb21wbGljYXRpb24gZm9yIGRldGVjdGluZyB0eXBlc2NyaXB0IHR5cGVkIGFycm93IHBhcmFtc1xuICAgICAgICBpZiAoXG4gICAgICAgICAgaXNUUyAmJlxuICAgICAgICAgIGN4LnN0YXRlLmZhdEFycm93QXQgPT0gY3guc3RyZWFtLnN0YXJ0ICYmXG4gICAgICAgICAgKG0gPSBjeC5zdHJlYW0ubWF0Y2goL15cXHMqOlxccyovLCBmYWxzZSkpXG4gICAgICAgICkge1xuICAgICAgICAgIGN4LnN0YXRlLmZhdEFycm93QXQgPSBjeC5zdHJlYW0ucG9zICsgbVswXS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnQoYWZ0ZXJwcm9wKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09ICdudW1iZXInIHx8IHR5cGUgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgY3gubWFya2VkID0ganNvbmxkTW9kZSA/ICdwcm9wZXJ0eScgOiBgJHtjeC5zdHlsZX0gcHJvcGVydHlgO1xuICAgICAgICByZXR1cm4gY29udChhZnRlcnByb3ApO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgPT0gJ2pzb25sZC1rZXl3b3JkJykge1xuICAgICAgICByZXR1cm4gY29udChhZnRlcnByb3ApO1xuICAgICAgfVxuICAgICAgaWYgKGlzVFMgJiYgaXNNb2RpZmllcih2YWx1ZSkpIHtcbiAgICAgICAgY3gubWFya2VkID0gJ2tleXdvcmQnO1xuICAgICAgICByZXR1cm4gY29udChvYmpwcm9wKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09ICdbJykge1xuICAgICAgICByZXR1cm4gY29udChleHByZXNzaW9uLCBtYXliZXR5cGUsIGV4cGVjdCgnXScpLCBhZnRlcnByb3ApO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgPT0gJ3NwcmVhZCcpIHtcbiAgICAgICAgcmV0dXJuIGNvbnQoZXhwcmVzc2lvbk5vQ29tbWEsIGFmdGVycHJvcCk7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUgPT0gJyonKSB7XG4gICAgICAgIGN4Lm1hcmtlZCA9ICdrZXl3b3JkJztcbiAgICAgICAgcmV0dXJuIGNvbnQob2JqcHJvcCk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZSA9PSAnOicpIHtcbiAgICAgICAgcmV0dXJuIHBhc3MoYWZ0ZXJwcm9wKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXR0ZXJTZXR0ZXIodHlwZSkge1xuICAgICAgaWYgKHR5cGUgIT0gJ3ZhcmlhYmxlJykgcmV0dXJuIHBhc3MoYWZ0ZXJwcm9wKTtcbiAgICAgIGN4Lm1hcmtlZCA9ICdwcm9wZXJ0eSc7XG4gICAgICByZXR1cm4gY29udChmdW5jdGlvbmRlZik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWZ0ZXJwcm9wKHR5cGUpIHtcbiAgICAgIGlmICh0eXBlID09ICc6JykgcmV0dXJuIGNvbnQoZXhwcmVzc2lvbk5vQ29tbWEpO1xuICAgICAgaWYgKHR5cGUgPT0gJygnKSByZXR1cm4gcGFzcyhmdW5jdGlvbmRlZik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29tbWFzZXAod2hhdCwgZW5kLCBzZXApIHtcbiAgICAgIGZ1bmN0aW9uIHByb2NlZWQodHlwZSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHNlcCA/IHNlcC5pbmRleE9mKHR5cGUpID4gLTEgOiB0eXBlID09ICcsJykge1xuICAgICAgICAgIGNvbnN0IGxleCA9IGN4LnN0YXRlLmxleGljYWw7XG4gICAgICAgICAgaWYgKGxleC5pbmZvID09ICdjYWxsJykgbGV4LnBvcyA9IChsZXgucG9zIHx8IDApICsgMTtcbiAgICAgICAgICByZXR1cm4gY29udCgodHlwZSwgdmFsdWUpID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlID09IGVuZCB8fCB2YWx1ZSA9PSBlbmQpIHJldHVybiBwYXNzKCk7XG4gICAgICAgICAgICByZXR1cm4gcGFzcyh3aGF0KTtcbiAgICAgICAgICB9LCBwcm9jZWVkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZSA9PSBlbmQgfHwgdmFsdWUgPT0gZW5kKSByZXR1cm4gY29udCgpO1xuICAgICAgICBpZiAoc2VwICYmIHNlcC5pbmRleE9mKCc7JykgPiAtMSkgcmV0dXJuIHBhc3Mod2hhdCk7XG4gICAgICAgIHJldHVybiBjb250KGV4cGVjdChlbmQpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHR5cGUgPT0gZW5kIHx8IHZhbHVlID09IGVuZCkgcmV0dXJuIGNvbnQoKTtcbiAgICAgICAgcmV0dXJuIHBhc3Mod2hhdCwgcHJvY2VlZCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbnRDb21tYXNlcCh3aGF0LCBlbmQsIGluZm8pIHtcbiAgICAgIGZvciAobGV0IGkgPSAzOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGN4LmNjLnB1c2goYXJndW1lbnRzW2ldKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250KHB1c2hsZXgoZW5kLCBpbmZvKSwgY29tbWFzZXAod2hhdCwgZW5kKSwgcG9wbGV4KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBibG9jayh0eXBlKSB7XG4gICAgICBpZiAodHlwZSA9PSAnfScpIHJldHVybiBjb250KCk7XG4gICAgICByZXR1cm4gcGFzcyhzdGF0ZW1lbnQsIGJsb2NrKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYXliZXR5cGUodHlwZSwgdmFsdWUpIHtcbiAgICAgIGlmIChpc1RTKSB7XG4gICAgICAgIGlmICh0eXBlID09ICc6JykgcmV0dXJuIGNvbnQodHlwZWV4cHIpO1xuICAgICAgICBpZiAodmFsdWUgPT0gJz8nKSByZXR1cm4gY29udChtYXliZXR5cGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1heWJldHlwZU9ySW4odHlwZSwgdmFsdWUpIHtcbiAgICAgIGlmIChpc1RTICYmICh0eXBlID09ICc6JyB8fCB2YWx1ZSA9PSAnaW4nKSlcbiAgICAgICAgcmV0dXJuIGNvbnQodHlwZWV4cHIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1heWJlcmV0dHlwZSh0eXBlKSB7XG4gICAgICBpZiAoaXNUUyAmJiB0eXBlID09ICc6Jykge1xuICAgICAgICBpZiAoY3guc3RyZWFtLm1hdGNoKC9eXFxzKlxcdytcXHMraXNcXGIvLCBmYWxzZSkpXG4gICAgICAgICAgcmV0dXJuIGNvbnQoZXhwcmVzc2lvbiwgaXNLVywgdHlwZWV4cHIpO1xuICAgICAgICByZXR1cm4gY29udCh0eXBlZXhwcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNLVyhfLCB2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09ICdpcycpIHtcbiAgICAgICAgY3gubWFya2VkID0gJ2tleXdvcmQnO1xuICAgICAgICByZXR1cm4gY29udCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHR5cGVleHByKHR5cGUsIHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT0gJ2tleW9mJyB8fCB2YWx1ZSA9PSAndHlwZW9mJyB8fCB2YWx1ZSA9PSAnaW5mZXInKSB7XG4gICAgICAgIGN4Lm1hcmtlZCA9ICdrZXl3b3JkJztcbiAgICAgICAgcmV0dXJuIGNvbnQodmFsdWUgPT0gJ3R5cGVvZicgPyBleHByZXNzaW9uTm9Db21tYSA6IHR5cGVleHByKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09ICd2YXJpYWJsZScgfHwgdmFsdWUgPT0gJ3ZvaWQnKSB7XG4gICAgICAgIGN4Lm1hcmtlZCA9ICd0eXBlJztcbiAgICAgICAgcmV0dXJuIGNvbnQoYWZ0ZXJUeXBlKTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSA9PSAnfCcgfHwgdmFsdWUgPT0gJyYnKSByZXR1cm4gY29udCh0eXBlZXhwcik7XG4gICAgICBpZiAodHlwZSA9PSAnc3RyaW5nJyB8fCB0eXBlID09ICdudW1iZXInIHx8IHR5cGUgPT0gJ2F0b20nKVxuICAgICAgICByZXR1cm4gY29udChhZnRlclR5cGUpO1xuICAgICAgaWYgKHR5cGUgPT0gJ1snKVxuICAgICAgICByZXR1cm4gY29udChcbiAgICAgICAgICBwdXNobGV4KCddJyksXG4gICAgICAgICAgY29tbWFzZXAodHlwZWV4cHIsICddJywgJywnKSxcbiAgICAgICAgICBwb3BsZXgsXG4gICAgICAgICAgYWZ0ZXJUeXBlLFxuICAgICAgICApO1xuICAgICAgaWYgKHR5cGUgPT0gJ3snKVxuICAgICAgICByZXR1cm4gY29udChcbiAgICAgICAgICBwdXNobGV4KCd9JyksXG4gICAgICAgICAgY29tbWFzZXAodHlwZXByb3AsICd9JywgJyw7JyksXG4gICAgICAgICAgcG9wbGV4LFxuICAgICAgICAgIGFmdGVyVHlwZSxcbiAgICAgICAgKTtcbiAgICAgIGlmICh0eXBlID09ICcoJylcbiAgICAgICAgcmV0dXJuIGNvbnQoXG4gICAgICAgICAgY29tbWFzZXAodHlwZWFyZywgJyknKSxcbiAgICAgICAgICBtYXliZVJldHVyblR5cGUsXG4gICAgICAgICAgYWZ0ZXJUeXBlLFxuICAgICAgICApO1xuICAgICAgaWYgKHR5cGUgPT0gJzwnKSByZXR1cm4gY29udChjb21tYXNlcCh0eXBlZXhwciwgJz4nKSwgdHlwZWV4cHIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1heWJlUmV0dXJuVHlwZSh0eXBlKSB7XG4gICAgICBpZiAodHlwZSA9PSAnPT4nKSByZXR1cm4gY29udCh0eXBlZXhwcik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdHlwZXByb3AodHlwZSwgdmFsdWUpIHtcbiAgICAgIGlmICh0eXBlID09ICd2YXJpYWJsZScgfHwgY3guc3R5bGUgPT0gJ2tleXdvcmQnKSB7XG4gICAgICAgIGN4Lm1hcmtlZCA9ICdwcm9wZXJ0eSc7XG4gICAgICAgIHJldHVybiBjb250KHR5cGVwcm9wKTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSA9PSAnPycgfHwgdHlwZSA9PSAnbnVtYmVyJyB8fCB0eXBlID09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBjb250KHR5cGVwcm9wKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09ICc6Jykge1xuICAgICAgICByZXR1cm4gY29udCh0eXBlZXhwcik7XG4gICAgICB9XG4gICAgICBpZiAodHlwZSA9PSAnWycpIHtcbiAgICAgICAgcmV0dXJuIGNvbnQoXG4gICAgICAgICAgZXhwZWN0KCd2YXJpYWJsZScpLFxuICAgICAgICAgIG1heWJldHlwZU9ySW4sXG4gICAgICAgICAgZXhwZWN0KCddJyksXG4gICAgICAgICAgdHlwZXByb3AsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZSA9PSAnKCcpIHtcbiAgICAgICAgcmV0dXJuIHBhc3MoZnVuY3Rpb25kZWNsLCB0eXBlcHJvcCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdHlwZWFyZyh0eXBlLCB2YWx1ZSkge1xuICAgICAgaWYgKFxuICAgICAgICAodHlwZSA9PSAndmFyaWFibGUnICYmIGN4LnN0cmVhbS5tYXRjaCgvXlxccypbPzpdLywgZmFsc2UpKSB8fFxuICAgICAgICB2YWx1ZSA9PSAnPydcbiAgICAgIClcbiAgICAgICAgcmV0dXJuIGNvbnQodHlwZWFyZyk7XG4gICAgICBpZiAodHlwZSA9PSAnOicpIHJldHVybiBjb250KHR5cGVleHByKTtcbiAgICAgIGlmICh0eXBlID09ICdzcHJlYWQnKSByZXR1cm4gY29udCh0eXBlYXJnKTtcbiAgICAgIHJldHVybiBwYXNzKHR5cGVleHByKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZnRlclR5cGUodHlwZSwgdmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PSAnPCcpXG4gICAgICAgIHJldHVybiBjb250KFxuICAgICAgICAgIHB1c2hsZXgoJz4nKSxcbiAgICAgICAgICBjb21tYXNlcCh0eXBlZXhwciwgJz4nKSxcbiAgICAgICAgICBwb3BsZXgsXG4gICAgICAgICAgYWZ0ZXJUeXBlLFxuICAgICAgICApO1xuICAgICAgaWYgKHZhbHVlID09ICd8JyB8fCB0eXBlID09ICcuJyB8fCB2YWx1ZSA9PSAnJicpXG4gICAgICAgIHJldHVybiBjb250KHR5cGVleHByKTtcbiAgICAgIGlmICh0eXBlID09ICdbJykgcmV0dXJuIGNvbnQodHlwZWV4cHIsIGV4cGVjdCgnXScpLCBhZnRlclR5cGUpO1xuICAgICAgaWYgKHZhbHVlID09ICdleHRlbmRzJyB8fCB2YWx1ZSA9PSAnaW1wbGVtZW50cycpIHtcbiAgICAgICAgY3gubWFya2VkID0gJ2tleXdvcmQnO1xuICAgICAgICByZXR1cm4gY29udCh0eXBlZXhwcik7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUgPT0gJz8nKSByZXR1cm4gY29udCh0eXBlZXhwciwgZXhwZWN0KCc6JyksIHR5cGVleHByKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYXliZVR5cGVBcmdzKF8sIHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT0gJzwnKVxuICAgICAgICByZXR1cm4gY29udChcbiAgICAgICAgICBwdXNobGV4KCc+JyksXG4gICAgICAgICAgY29tbWFzZXAodHlwZWV4cHIsICc+JyksXG4gICAgICAgICAgcG9wbGV4LFxuICAgICAgICAgIGFmdGVyVHlwZSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0eXBlcGFyYW0oKSB7XG4gICAgICByZXR1cm4gcGFzcyh0eXBlZXhwciwgbWF5YmVUeXBlRGVmYXVsdCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWF5YmVUeXBlRGVmYXVsdChfLCB2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09ICc9JykgcmV0dXJuIGNvbnQodHlwZWV4cHIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHZhcmRlZihfLCB2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09ICdlbnVtJykge1xuICAgICAgICBjeC5tYXJrZWQgPSAna2V5d29yZCc7XG4gICAgICAgIHJldHVybiBjb250KGVudW1kZWYpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhc3MocGF0dGVybiwgbWF5YmV0eXBlLCBtYXliZUFzc2lnbiwgdmFyZGVmQ29udCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGF0dGVybih0eXBlLCB2YWx1ZSkge1xuICAgICAgaWYgKGlzVFMgJiYgaXNNb2RpZmllcih2YWx1ZSkpIHtcbiAgICAgICAgY3gubWFya2VkID0gJ2tleXdvcmQnO1xuICAgICAgICByZXR1cm4gY29udChwYXR0ZXJuKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09ICd2YXJpYWJsZScpIHtcbiAgICAgICAgcmVnaXN0ZXIodmFsdWUpO1xuICAgICAgICByZXR1cm4gY29udCgpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgPT0gJ3NwcmVhZCcpIHJldHVybiBjb250KHBhdHRlcm4pO1xuICAgICAgaWYgKHR5cGUgPT0gJ1snKSByZXR1cm4gY29udENvbW1hc2VwKGVsdHBhdHRlcm4sICddJyk7XG4gICAgICBpZiAodHlwZSA9PSAneycpIHJldHVybiBjb250Q29tbWFzZXAocHJvcHBhdHRlcm4sICd9Jyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcHJvcHBhdHRlcm4odHlwZSwgdmFsdWUpIHtcbiAgICAgIGlmICh0eXBlID09ICd2YXJpYWJsZScgJiYgIWN4LnN0cmVhbS5tYXRjaCgvXlxccyo6LywgZmFsc2UpKSB7XG4gICAgICAgIHJlZ2lzdGVyKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIGNvbnQobWF5YmVBc3NpZ24pO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgPT0gJ3ZhcmlhYmxlJykgY3gubWFya2VkID0gJ3Byb3BlcnR5JztcbiAgICAgIGlmICh0eXBlID09ICdzcHJlYWQnKSByZXR1cm4gY29udChwYXR0ZXJuKTtcbiAgICAgIGlmICh0eXBlID09ICd9JykgcmV0dXJuIHBhc3MoKTtcbiAgICAgIGlmICh0eXBlID09ICdbJylcbiAgICAgICAgcmV0dXJuIGNvbnQoXG4gICAgICAgICAgZXhwcmVzc2lvbixcbiAgICAgICAgICBleHBlY3QoJ10nKSxcbiAgICAgICAgICBleHBlY3QoJzonKSxcbiAgICAgICAgICBwcm9wcGF0dGVybixcbiAgICAgICAgKTtcbiAgICAgIHJldHVybiBjb250KGV4cGVjdCgnOicpLCBwYXR0ZXJuLCBtYXliZUFzc2lnbik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZWx0cGF0dGVybigpIHtcbiAgICAgIHJldHVybiBwYXNzKHBhdHRlcm4sIG1heWJlQXNzaWduKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYXliZUFzc2lnbihfdHlwZSwgdmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PSAnPScpIHJldHVybiBjb250KGV4cHJlc3Npb25Ob0NvbW1hKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB2YXJkZWZDb250KHR5cGUpIHtcbiAgICAgIGlmICh0eXBlID09ICcsJykgcmV0dXJuIGNvbnQodmFyZGVmKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYXliZWVsc2UodHlwZSwgdmFsdWUpIHtcbiAgICAgIGlmICh0eXBlID09ICdrZXl3b3JkIGInICYmIHZhbHVlID09ICdlbHNlJylcbiAgICAgICAgcmV0dXJuIGNvbnQocHVzaGxleCgnZm9ybScsICdlbHNlJyksIHN0YXRlbWVudCwgcG9wbGV4KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmb3JzcGVjKHR5cGUsIHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT0gJ2F3YWl0JykgcmV0dXJuIGNvbnQoZm9yc3BlYyk7XG4gICAgICBpZiAodHlwZSA9PSAnKCcpIHJldHVybiBjb250KHB1c2hsZXgoJyknKSwgZm9yc3BlYzEsIHBvcGxleCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZm9yc3BlYzEodHlwZSkge1xuICAgICAgaWYgKHR5cGUgPT0gJ3ZhcicpIHJldHVybiBjb250KHZhcmRlZiwgZm9yc3BlYzIpO1xuICAgICAgaWYgKHR5cGUgPT0gJ3ZhcmlhYmxlJykgcmV0dXJuIGNvbnQoZm9yc3BlYzIpO1xuICAgICAgcmV0dXJuIHBhc3MoZm9yc3BlYzIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZvcnNwZWMyKHR5cGUsIHZhbHVlKSB7XG4gICAgICBpZiAodHlwZSA9PSAnKScpIHJldHVybiBjb250KCk7XG4gICAgICBpZiAodHlwZSA9PSAnOycpIHJldHVybiBjb250KGZvcnNwZWMyKTtcbiAgICAgIGlmICh2YWx1ZSA9PSAnaW4nIHx8IHZhbHVlID09ICdvZicpIHtcbiAgICAgICAgY3gubWFya2VkID0gJ2tleXdvcmQnO1xuICAgICAgICByZXR1cm4gY29udChleHByZXNzaW9uLCBmb3JzcGVjMik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGFzcyhleHByZXNzaW9uLCBmb3JzcGVjMik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZnVuY3Rpb25kZWYodHlwZSwgdmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PSAnKicpIHtcbiAgICAgICAgY3gubWFya2VkID0gJ2tleXdvcmQnO1xuICAgICAgICByZXR1cm4gY29udChmdW5jdGlvbmRlZik7XG4gICAgICB9XG4gICAgICBpZiAodHlwZSA9PSAndmFyaWFibGUnKSB7XG4gICAgICAgIHJlZ2lzdGVyKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIGNvbnQoZnVuY3Rpb25kZWYpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgPT0gJygnKSB7XG4gICAgICAgIHJldHVybiBjb250KFxuICAgICAgICAgIHB1c2hjb250ZXh0LFxuICAgICAgICAgIHB1c2hsZXgoJyknKSxcbiAgICAgICAgICBjb21tYXNlcChmdW5hcmcsICcpJyksXG4gICAgICAgICAgcG9wbGV4LFxuICAgICAgICAgIG1heWJlcmV0dHlwZSxcbiAgICAgICAgICBzdGF0ZW1lbnQsXG4gICAgICAgICAgcG9wY29udGV4dCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChpc1RTICYmIHZhbHVlID09ICc8JylcbiAgICAgICAgcmV0dXJuIGNvbnQoXG4gICAgICAgICAgcHVzaGxleCgnPicpLFxuICAgICAgICAgIGNvbW1hc2VwKHR5cGVwYXJhbSwgJz4nKSxcbiAgICAgICAgICBwb3BsZXgsXG4gICAgICAgICAgZnVuY3Rpb25kZWYsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZnVuY3Rpb25kZWNsKHR5cGUsIHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT0gJyonKSB7XG4gICAgICAgIGN4Lm1hcmtlZCA9ICdrZXl3b3JkJztcbiAgICAgICAgcmV0dXJuIGNvbnQoZnVuY3Rpb25kZWNsKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09ICd2YXJpYWJsZScpIHtcbiAgICAgICAgcmVnaXN0ZXIodmFsdWUpO1xuICAgICAgICByZXR1cm4gY29udChmdW5jdGlvbmRlY2wpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgPT0gJygnKSB7XG4gICAgICAgIHJldHVybiBjb250KFxuICAgICAgICAgIHB1c2hjb250ZXh0LFxuICAgICAgICAgIHB1c2hsZXgoJyknKSxcbiAgICAgICAgICBjb21tYXNlcChmdW5hcmcsICcpJyksXG4gICAgICAgICAgcG9wbGV4LFxuICAgICAgICAgIG1heWJlcmV0dHlwZSxcbiAgICAgICAgICBwb3Bjb250ZXh0LFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKGlzVFMgJiYgdmFsdWUgPT0gJzwnKVxuICAgICAgICByZXR1cm4gY29udChcbiAgICAgICAgICBwdXNobGV4KCc+JyksXG4gICAgICAgICAgY29tbWFzZXAodHlwZXBhcmFtLCAnPicpLFxuICAgICAgICAgIHBvcGxleCxcbiAgICAgICAgICBmdW5jdGlvbmRlY2wsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdHlwZW5hbWUodHlwZSwgdmFsdWUpIHtcbiAgICAgIGlmICh0eXBlID09ICdrZXl3b3JkJyB8fCB0eXBlID09ICd2YXJpYWJsZScpIHtcbiAgICAgICAgY3gubWFya2VkID0gJ3R5cGUnO1xuICAgICAgICByZXR1cm4gY29udCh0eXBlbmFtZSk7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUgPT0gJzwnKSB7XG4gICAgICAgIHJldHVybiBjb250KHB1c2hsZXgoJz4nKSwgY29tbWFzZXAodHlwZXBhcmFtLCAnPicpLCBwb3BsZXgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZ1bmFyZyh0eXBlLCB2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09ICdAJykgY29udChleHByZXNzaW9uLCBmdW5hcmcpO1xuICAgICAgaWYgKHR5cGUgPT0gJ3NwcmVhZCcpIHJldHVybiBjb250KGZ1bmFyZyk7XG4gICAgICBpZiAoaXNUUyAmJiBpc01vZGlmaWVyKHZhbHVlKSkge1xuICAgICAgICBjeC5tYXJrZWQgPSAna2V5d29yZCc7XG4gICAgICAgIHJldHVybiBjb250KGZ1bmFyZyk7XG4gICAgICB9XG4gICAgICBpZiAoaXNUUyAmJiB0eXBlID09ICd0aGlzJykgcmV0dXJuIGNvbnQobWF5YmV0eXBlLCBtYXliZUFzc2lnbik7XG4gICAgICByZXR1cm4gcGFzcyhwYXR0ZXJuLCBtYXliZXR5cGUsIG1heWJlQXNzaWduKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGFzc0V4cHJlc3Npb24odHlwZSwgdmFsdWUpIHtcbiAgICAgIC8vIENsYXNzIGV4cHJlc3Npb25zIG1heSBoYXZlIGFuIG9wdGlvbmFsIG5hbWUuXG4gICAgICBpZiAodHlwZSA9PSAndmFyaWFibGUnKSByZXR1cm4gY2xhc3NOYW1lKHR5cGUsIHZhbHVlKTtcbiAgICAgIHJldHVybiBjbGFzc05hbWVBZnRlcih0eXBlLCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xhc3NOYW1lKHR5cGUsIHZhbHVlKSB7XG4gICAgICBpZiAodHlwZSA9PSAndmFyaWFibGUnKSB7XG4gICAgICAgIHJlZ2lzdGVyKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIGNvbnQoY2xhc3NOYW1lQWZ0ZXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsYXNzTmFtZUFmdGVyKHR5cGUsIHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT0gJzwnKVxuICAgICAgICByZXR1cm4gY29udChcbiAgICAgICAgICBwdXNobGV4KCc+JyksXG4gICAgICAgICAgY29tbWFzZXAodHlwZXBhcmFtLCAnPicpLFxuICAgICAgICAgIHBvcGxleCxcbiAgICAgICAgICBjbGFzc05hbWVBZnRlcixcbiAgICAgICAgKTtcbiAgICAgIGlmIChcbiAgICAgICAgdmFsdWUgPT0gJ2V4dGVuZHMnIHx8XG4gICAgICAgIHZhbHVlID09ICdpbXBsZW1lbnRzJyB8fFxuICAgICAgICAoaXNUUyAmJiB0eXBlID09ICcsJylcbiAgICAgICkge1xuICAgICAgICBpZiAodmFsdWUgPT0gJ2ltcGxlbWVudHMnKSBjeC5tYXJrZWQgPSAna2V5d29yZCc7XG4gICAgICAgIHJldHVybiBjb250KGlzVFMgPyB0eXBlZXhwciA6IGV4cHJlc3Npb24sIGNsYXNzTmFtZUFmdGVyKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09ICd7JykgcmV0dXJuIGNvbnQocHVzaGxleCgnfScpLCBjbGFzc0JvZHksIHBvcGxleCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xhc3NCb2R5KHR5cGUsIHZhbHVlKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGUgPT0gJ2FzeW5jJyB8fFxuICAgICAgICAodHlwZSA9PSAndmFyaWFibGUnICYmXG4gICAgICAgICAgKHZhbHVlID09ICdzdGF0aWMnIHx8XG4gICAgICAgICAgICB2YWx1ZSA9PSAnZ2V0JyB8fFxuICAgICAgICAgICAgdmFsdWUgPT0gJ3NldCcgfHxcbiAgICAgICAgICAgIChpc1RTICYmIGlzTW9kaWZpZXIodmFsdWUpKSkgJiZcbiAgICAgICAgICBjeC5zdHJlYW0ubWF0Y2goL15cXHMrW1xcdyRcXHhhMS1cXHVmZmZmXS8sIGZhbHNlKSlcbiAgICAgICkge1xuICAgICAgICBjeC5tYXJrZWQgPSAna2V5d29yZCc7XG4gICAgICAgIHJldHVybiBjb250KGNsYXNzQm9keSk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZSA9PSAndmFyaWFibGUnIHx8IGN4LnN0eWxlID09ICdrZXl3b3JkJykge1xuICAgICAgICBjeC5tYXJrZWQgPSAncHJvcGVydHknO1xuICAgICAgICByZXR1cm4gY29udChpc1RTID8gY2xhc3NmaWVsZCA6IGZ1bmN0aW9uZGVmLCBjbGFzc0JvZHkpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgPT0gJ251bWJlcicgfHwgdHlwZSA9PSAnc3RyaW5nJylcbiAgICAgICAgcmV0dXJuIGNvbnQoaXNUUyA/IGNsYXNzZmllbGQgOiBmdW5jdGlvbmRlZiwgY2xhc3NCb2R5KTtcbiAgICAgIGlmICh0eXBlID09ICdbJykge1xuICAgICAgICByZXR1cm4gY29udChcbiAgICAgICAgICBleHByZXNzaW9uLFxuICAgICAgICAgIG1heWJldHlwZSxcbiAgICAgICAgICBleHBlY3QoJ10nKSxcbiAgICAgICAgICBpc1RTID8gY2xhc3NmaWVsZCA6IGZ1bmN0aW9uZGVmLFxuICAgICAgICAgIGNsYXNzQm9keSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSA9PSAnKicpIHtcbiAgICAgICAgY3gubWFya2VkID0gJ2tleXdvcmQnO1xuICAgICAgICByZXR1cm4gY29udChjbGFzc0JvZHkpO1xuICAgICAgfVxuICAgICAgaWYgKGlzVFMgJiYgdHlwZSA9PSAnKCcpIHJldHVybiBwYXNzKGZ1bmN0aW9uZGVjbCwgY2xhc3NCb2R5KTtcbiAgICAgIGlmICh0eXBlID09ICc7JyB8fCB0eXBlID09ICcsJykgcmV0dXJuIGNvbnQoY2xhc3NCb2R5KTtcbiAgICAgIGlmICh0eXBlID09ICd9JykgcmV0dXJuIGNvbnQoKTtcbiAgICAgIGlmICh2YWx1ZSA9PSAnQCcpIHJldHVybiBjb250KGV4cHJlc3Npb24sIGNsYXNzQm9keSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xhc3NmaWVsZCh0eXBlLCB2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09ICc/JykgcmV0dXJuIGNvbnQoY2xhc3NmaWVsZCk7XG4gICAgICBpZiAodHlwZSA9PSAnOicpIHJldHVybiBjb250KHR5cGVleHByLCBtYXliZUFzc2lnbik7XG4gICAgICBpZiAodmFsdWUgPT0gJz0nKSByZXR1cm4gY29udChleHByZXNzaW9uTm9Db21tYSk7XG4gICAgICBjb25zdCBjb250ZXh0ID0gY3guc3RhdGUubGV4aWNhbC5wcmV2O1xuICAgICAgY29uc3QgaXNJbnRlcmZhY2UgPSBjb250ZXh0ICYmIGNvbnRleHQuaW5mbyA9PSAnaW50ZXJmYWNlJztcbiAgICAgIHJldHVybiBwYXNzKGlzSW50ZXJmYWNlID8gZnVuY3Rpb25kZWNsIDogZnVuY3Rpb25kZWYpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFmdGVyRXhwb3J0KHR5cGUsIHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT0gJyonKSB7XG4gICAgICAgIGN4Lm1hcmtlZCA9ICdrZXl3b3JkJztcbiAgICAgICAgcmV0dXJuIGNvbnQobWF5YmVGcm9tLCBleHBlY3QoJzsnKSk7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUgPT0gJ2RlZmF1bHQnKSB7XG4gICAgICAgIGN4Lm1hcmtlZCA9ICdrZXl3b3JkJztcbiAgICAgICAgcmV0dXJuIGNvbnQoZXhwcmVzc2lvbiwgZXhwZWN0KCc7JykpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgPT0gJ3snKVxuICAgICAgICByZXR1cm4gY29udChcbiAgICAgICAgICBjb21tYXNlcChleHBvcnRGaWVsZCwgJ30nKSxcbiAgICAgICAgICBtYXliZUZyb20sXG4gICAgICAgICAgZXhwZWN0KCc7JyksXG4gICAgICAgICk7XG4gICAgICByZXR1cm4gcGFzcyhzdGF0ZW1lbnQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV4cG9ydEZpZWxkKHR5cGUsIHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT0gJ2FzJykge1xuICAgICAgICBjeC5tYXJrZWQgPSAna2V5d29yZCc7XG4gICAgICAgIHJldHVybiBjb250KGV4cGVjdCgndmFyaWFibGUnKSk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZSA9PSAndmFyaWFibGUnKVxuICAgICAgICByZXR1cm4gcGFzcyhleHByZXNzaW9uTm9Db21tYSwgZXhwb3J0RmllbGQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFmdGVySW1wb3J0KHR5cGUpIHtcbiAgICAgIGlmICh0eXBlID09ICdzdHJpbmcnKSByZXR1cm4gY29udCgpO1xuICAgICAgaWYgKHR5cGUgPT0gJygnKSByZXR1cm4gcGFzcyhleHByZXNzaW9uKTtcbiAgICAgIHJldHVybiBwYXNzKGltcG9ydFNwZWMsIG1heWJlTW9yZUltcG9ydHMsIG1heWJlRnJvbSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW1wb3J0U3BlYyh0eXBlLCB2YWx1ZSkge1xuICAgICAgaWYgKHR5cGUgPT0gJ3snKSByZXR1cm4gY29udENvbW1hc2VwKGltcG9ydFNwZWMsICd9Jyk7XG4gICAgICBpZiAodHlwZSA9PSAndmFyaWFibGUnKSByZWdpc3Rlcih2YWx1ZSk7XG4gICAgICBpZiAodmFsdWUgPT0gJyonKSBjeC5tYXJrZWQgPSAna2V5d29yZCc7XG4gICAgICByZXR1cm4gY29udChtYXliZUFzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYXliZU1vcmVJbXBvcnRzKHR5cGUpIHtcbiAgICAgIGlmICh0eXBlID09ICcsJykgcmV0dXJuIGNvbnQoaW1wb3J0U3BlYywgbWF5YmVNb3JlSW1wb3J0cyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWF5YmVBcyhfdHlwZSwgdmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PSAnYXMnKSB7XG4gICAgICAgIGN4Lm1hcmtlZCA9ICdrZXl3b3JkJztcbiAgICAgICAgcmV0dXJuIGNvbnQoaW1wb3J0U3BlYyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWF5YmVGcm9tKF90eXBlLCB2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09ICdmcm9tJykge1xuICAgICAgICBjeC5tYXJrZWQgPSAna2V5d29yZCc7XG4gICAgICAgIHJldHVybiBjb250KGV4cHJlc3Npb24pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFycmF5TGl0ZXJhbCh0eXBlKSB7XG4gICAgICBpZiAodHlwZSA9PSAnXScpIHJldHVybiBjb250KCk7XG4gICAgICByZXR1cm4gcGFzcyhjb21tYXNlcChleHByZXNzaW9uTm9Db21tYSwgJ10nKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZW51bWRlZigpIHtcbiAgICAgIHJldHVybiBwYXNzKFxuICAgICAgICBwdXNobGV4KCdmb3JtJyksXG4gICAgICAgIHBhdHRlcm4sXG4gICAgICAgIGV4cGVjdCgneycpLFxuICAgICAgICBwdXNobGV4KCd9JyksXG4gICAgICAgIGNvbW1hc2VwKGVudW1tZW1iZXIsICd9JyksXG4gICAgICAgIHBvcGxleCxcbiAgICAgICAgcG9wbGV4LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbnVtbWVtYmVyKCkge1xuICAgICAgcmV0dXJuIHBhc3MocGF0dGVybiwgbWF5YmVBc3NpZ24pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzQ29udGludWVkU3RhdGVtZW50KHN0YXRlLCB0ZXh0QWZ0ZXIpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHN0YXRlLmxhc3RUeXBlID09ICdvcGVyYXRvcicgfHxcbiAgICAgICAgc3RhdGUubGFzdFR5cGUgPT0gJywnIHx8XG4gICAgICAgIGlzT3BlcmF0b3JDaGFyLnRlc3QodGV4dEFmdGVyLmNoYXJBdCgwKSkgfHxcbiAgICAgICAgL1ssLl0vLnRlc3QodGV4dEFmdGVyLmNoYXJBdCgwKSlcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXhwcmVzc2lvbkFsbG93ZWQoc3RyZWFtLCBzdGF0ZSwgYmFja1VwKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICAoc3RhdGUudG9rZW5pemUgPT0gdG9rZW5CYXNlICYmXG4gICAgICAgICAgL14oPzpvcGVyYXRvcnxzb2Z8a2V5d29yZCBbYmNkXXxjYXNlfG5ld3xleHBvcnR8ZGVmYXVsdHxzcHJlYWR8W1xcW3t9XFwoLDs6XXw9PikkLy50ZXN0KFxuICAgICAgICAgICAgc3RhdGUubGFzdFR5cGUsXG4gICAgICAgICAgKSkgfHxcbiAgICAgICAgKHN0YXRlLmxhc3RUeXBlID09ICdxdWFzaScgJiZcbiAgICAgICAgICAvXFx7XFxzKiQvLnRlc3QoXG4gICAgICAgICAgICBzdHJlYW0uc3RyaW5nLnNsaWNlKDAsIHN0cmVhbS5wb3MgLSAoYmFja1VwIHx8IDApKSxcbiAgICAgICAgICApKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBJbnRlcmZhY2VcblxuICAgIHJldHVybiB7XG4gICAgICBzdGFydFN0YXRlKGJhc2Vjb2x1bW4pIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB7XG4gICAgICAgICAgdG9rZW5pemU6IHRva2VuQmFzZSxcbiAgICAgICAgICBsYXN0VHlwZTogJ3NvZicsXG4gICAgICAgICAgY2M6IFtdLFxuICAgICAgICAgIGxleGljYWw6IG5ldyBKU0xleGljYWwoXG4gICAgICAgICAgICAoYmFzZWNvbHVtbiB8fCAwKSAtIGluZGVudFVuaXQsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgJ2Jsb2NrJyxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICksXG4gICAgICAgICAgbG9jYWxWYXJzOiBwYXJzZXJDb25maWcubG9jYWxWYXJzLFxuICAgICAgICAgIGNvbnRleHQ6XG4gICAgICAgICAgICBwYXJzZXJDb25maWcubG9jYWxWYXJzICYmIG5ldyBDb250ZXh0KG51bGwsIG51bGwsIGZhbHNlKSxcbiAgICAgICAgICBpbmRlbnRlZDogYmFzZWNvbHVtbiB8fCAwLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoXG4gICAgICAgICAgcGFyc2VyQ29uZmlnLmdsb2JhbFZhcnMgJiZcbiAgICAgICAgICB0eXBlb2YgcGFyc2VyQ29uZmlnLmdsb2JhbFZhcnMgPT09ICdvYmplY3QnXG4gICAgICAgICkge1xuICAgICAgICAgIHN0YXRlLmdsb2JhbFZhcnMgPSBwYXJzZXJDb25maWcuZ2xvYmFsVmFycztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICB9LFxuXG4gICAgICB0b2tlbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICAgIGlmIChzdHJlYW0uc29sKCkpIHtcbiAgICAgICAgICBpZiAoIXN0YXRlLmxleGljYWwuaGFzT3duUHJvcGVydHkoJ2FsaWduJykpIHtcbiAgICAgICAgICAgIHN0YXRlLmxleGljYWwuYWxpZ24gPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc3RhdGUuaW5kZW50ZWQgPSBzdHJlYW0uaW5kZW50YXRpb24oKTtcbiAgICAgICAgICBmaW5kRmF0QXJyb3coc3RyZWFtLCBzdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXRlLnRva2VuaXplICE9IHRva2VuQ29tbWVudCAmJiBzdHJlYW0uZWF0U3BhY2UoKSlcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTtcbiAgICAgICAgaWYgKHR5cGUgPT0gJ2NvbW1lbnQnKSByZXR1cm4gc3R5bGU7XG4gICAgICAgIHN0YXRlLmxhc3RUeXBlID1cbiAgICAgICAgICB0eXBlID09ICdvcGVyYXRvcicgJiYgKGNvbnRlbnQgPT0gJysrJyB8fCBjb250ZW50ID09ICctLScpXG4gICAgICAgICAgICA/ICdpbmNkZWMnXG4gICAgICAgICAgICA6IHR5cGU7XG4gICAgICAgIHJldHVybiBwYXJzZUpTKHN0YXRlLCBzdHlsZSwgdHlwZSwgY29udGVudCwgc3RyZWFtKTtcbiAgICAgIH0sXG5cbiAgICAgIGluZGVudChzdGF0ZSwgdGV4dEFmdGVyKSB7XG4gICAgICAgIGlmIChzdGF0ZS50b2tlbml6ZSA9PSB0b2tlbkNvbW1lbnQpIHJldHVybiBDb2RlTWlycm9yLlBhc3M7XG4gICAgICAgIGlmIChzdGF0ZS50b2tlbml6ZSAhPSB0b2tlbkJhc2UpIHJldHVybiAwO1xuICAgICAgICBjb25zdCBmaXJzdENoYXIgPSB0ZXh0QWZ0ZXIgJiYgdGV4dEFmdGVyLmNoYXJBdCgwKTtcbiAgICAgICAgbGV0IGxleGljYWwgPSBzdGF0ZS5sZXhpY2FsO1xuICAgICAgICBsZXQgdG9wO1xuICAgICAgICAvLyBLbHVkZ2UgdG8gcHJldmVudCAnbWF5YmVsc2UnIGZyb20gYmxvY2tpbmcgbGV4aWNhbCBzY29wZSBwb3BzXG4gICAgICAgIGlmICghL15cXHMqZWxzZVxcYi8udGVzdCh0ZXh0QWZ0ZXIpKSB7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IHN0YXRlLmNjLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICBjb25zdCBjID0gc3RhdGUuY2NbaV07XG4gICAgICAgICAgICBpZiAoYyA9PSBwb3BsZXgpIGxleGljYWwgPSBsZXhpY2FsLnByZXY7XG4gICAgICAgICAgICBlbHNlIGlmIChjICE9IG1heWJlZWxzZSkgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChcbiAgICAgICAgICAobGV4aWNhbC50eXBlID09ICdzdGF0JyB8fCBsZXhpY2FsLnR5cGUgPT0gJ2Zvcm0nKSAmJlxuICAgICAgICAgIChmaXJzdENoYXIgPT0gJ30nIHx8XG4gICAgICAgICAgICAoKHRvcCA9IHN0YXRlLmNjW3N0YXRlLmNjLmxlbmd0aCAtIDFdKSAmJlxuICAgICAgICAgICAgICAodG9wID09IG1heWJlb3BlcmF0b3JDb21tYSB8fFxuICAgICAgICAgICAgICAgIHRvcCA9PSBtYXliZW9wZXJhdG9yTm9Db21tYSkgJiZcbiAgICAgICAgICAgICAgIS9eWyxcXC49K1xcLSo6P1tcXChdLy50ZXN0KHRleHRBZnRlcikpKVxuICAgICAgICApIHtcbiAgICAgICAgICBsZXhpY2FsID0gbGV4aWNhbC5wcmV2O1xuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICBzdGF0ZW1lbnRJbmRlbnQgJiZcbiAgICAgICAgICBsZXhpY2FsLnR5cGUgPT0gJyknICYmXG4gICAgICAgICAgbGV4aWNhbC5wcmV2LnR5cGUgPT0gJ3N0YXQnXG4gICAgICAgICkge1xuICAgICAgICAgIGxleGljYWwgPSBsZXhpY2FsLnByZXY7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHlwZSA9IGxleGljYWwudHlwZTtcbiAgICAgICAgY29uc3QgY2xvc2luZyA9IGZpcnN0Q2hhciA9PSB0eXBlO1xuXG4gICAgICAgIGlmICh0eXBlID09ICd2YXJkZWYnKSB7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIGxleGljYWwuaW5kZW50ZWQgK1xuICAgICAgICAgICAgKHN0YXRlLmxhc3RUeXBlID09ICdvcGVyYXRvcicgfHwgc3RhdGUubGFzdFR5cGUgPT0gJywnXG4gICAgICAgICAgICAgID8gbGV4aWNhbC5pbmZvLmxlbmd0aCArIDFcbiAgICAgICAgICAgICAgOiAwKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgPT0gJ2Zvcm0nICYmIGZpcnN0Q2hhciA9PSAneycpXG4gICAgICAgICAgcmV0dXJuIGxleGljYWwuaW5kZW50ZWQ7XG4gICAgICAgIGlmICh0eXBlID09ICdmb3JtJykgcmV0dXJuIGxleGljYWwuaW5kZW50ZWQgKyBpbmRlbnRVbml0O1xuICAgICAgICBpZiAodHlwZSA9PSAnc3RhdCcpIHtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgbGV4aWNhbC5pbmRlbnRlZCArXG4gICAgICAgICAgICAoaXNDb250aW51ZWRTdGF0ZW1lbnQoc3RhdGUsIHRleHRBZnRlcilcbiAgICAgICAgICAgICAgPyBzdGF0ZW1lbnRJbmRlbnQgfHwgaW5kZW50VW5pdFxuICAgICAgICAgICAgICA6IDApXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgbGV4aWNhbC5pbmZvID09ICdzd2l0Y2gnICYmXG4gICAgICAgICAgIWNsb3NpbmcgJiZcbiAgICAgICAgICBwYXJzZXJDb25maWcuZG91YmxlSW5kZW50U3dpdGNoICE9IGZhbHNlXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBsZXhpY2FsLmluZGVudGVkICtcbiAgICAgICAgICAgICgvXig/OmNhc2V8ZGVmYXVsdClcXGIvLnRlc3QodGV4dEFmdGVyKVxuICAgICAgICAgICAgICA/IGluZGVudFVuaXRcbiAgICAgICAgICAgICAgOiAyICogaW5kZW50VW5pdClcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsZXhpY2FsLmFsaWduKSByZXR1cm4gbGV4aWNhbC5jb2x1bW4gKyAoY2xvc2luZyA/IDAgOiAxKTtcbiAgICAgICAgcmV0dXJuIGxleGljYWwuaW5kZW50ZWQgKyAoY2xvc2luZyA/IDAgOiBpbmRlbnRVbml0KTtcbiAgICAgIH0sXG5cbiAgICAgIGVsZWN0cmljSW5wdXQ6IC9eXFxzKig/OmNhc2UgLio/OnxkZWZhdWx0OnxcXHt8XFx9KSQvLFxuICAgICAgYmxvY2tDb21tZW50U3RhcnQ6IGpzb25Nb2RlID8gbnVsbCA6ICcvKicsXG4gICAgICBibG9ja0NvbW1lbnRFbmQ6IGpzb25Nb2RlID8gbnVsbCA6ICcqLycsXG4gICAgICBibG9ja0NvbW1lbnRDb250aW51ZToganNvbk1vZGUgPyBudWxsIDogJyAqICcsXG4gICAgICBsaW5lQ29tbWVudDoganNvbk1vZGUgPyBudWxsIDogJy8vJyxcbiAgICAgIGZvbGQ6ICdicmFjZScsXG4gICAgICBjbG9zZUJyYWNrZXRzOiAnKClbXXt9XFwnXFwnXCJcImBgJyxcblxuICAgICAgaGVscGVyVHlwZToganNvbk1vZGUgPyAnanNvbicgOiAnamF2YXNjcmlwdCcsXG4gICAgICBqc29ubGRNb2RlLFxuICAgICAganNvbk1vZGUsXG5cbiAgICAgIGV4cHJlc3Npb25BbGxvd2VkLFxuXG4gICAgICBza2lwRXhwcmVzc2lvbihzdGF0ZSkge1xuICAgICAgICBjb25zdCB0b3AgPSBzdGF0ZS5jY1tzdGF0ZS5jYy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKHRvcCA9PSBleHByZXNzaW9uIHx8IHRvcCA9PSBleHByZXNzaW9uTm9Db21tYSlcbiAgICAgICAgICBzdGF0ZS5jYy5wb3AoKTtcbiAgICAgIH0sXG4gICAgfTtcbiAgfSk7XG5cbiAgQ29kZU1pcnJvci5yZWdpc3RlckhlbHBlcignd29yZENoYXJzJywgJ2phdmFzY3JpcHQnLCAvW1xcdyRdLyk7XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVNSU1FKCd0ZXh0L2phdmFzY3JpcHQnLCAnamF2YXNjcmlwdCcpO1xuICBDb2RlTWlycm9yLmRlZmluZU1JTUUoJ3RleHQvZWNtYXNjcmlwdCcsICdqYXZhc2NyaXB0Jyk7XG4gIENvZGVNaXJyb3IuZGVmaW5lTUlNRSgnYXBwbGljYXRpb24vamF2YXNjcmlwdCcsICdqYXZhc2NyaXB0Jyk7XG4gIENvZGVNaXJyb3IuZGVmaW5lTUlNRSgnYXBwbGljYXRpb24veC1qYXZhc2NyaXB0JywgJ2phdmFzY3JpcHQnKTtcbiAgQ29kZU1pcnJvci5kZWZpbmVNSU1FKCdhcHBsaWNhdGlvbi9lY21hc2NyaXB0JywgJ2phdmFzY3JpcHQnKTtcbiAgQ29kZU1pcnJvci5kZWZpbmVNSU1FKCdhcHBsaWNhdGlvbi9qc29uJywge1xuICAgIG5hbWU6ICdqYXZhc2NyaXB0JyxcbiAgICBqc29uOiB0cnVlLFxuICB9KTtcbiAgQ29kZU1pcnJvci5kZWZpbmVNSU1FKCdhcHBsaWNhdGlvbi94LWpzb24nLCB7XG4gICAgbmFtZTogJ2phdmFzY3JpcHQnLFxuICAgIGpzb246IHRydWUsXG4gIH0pO1xuICBDb2RlTWlycm9yLmRlZmluZU1JTUUoJ2FwcGxpY2F0aW9uL2xkK2pzb24nLCB7XG4gICAgbmFtZTogJ2phdmFzY3JpcHQnLFxuICAgIGpzb25sZDogdHJ1ZSxcbiAgfSk7XG4gIENvZGVNaXJyb3IuZGVmaW5lTUlNRSgndGV4dC90eXBlc2NyaXB0Jywge1xuICAgIG5hbWU6ICdqYXZhc2NyaXB0JyxcbiAgICB0eXBlc2NyaXB0OiB0cnVlLFxuICB9KTtcbiAgQ29kZU1pcnJvci5kZWZpbmVNSU1FKCdhcHBsaWNhdGlvbi90eXBlc2NyaXB0Jywge1xuICAgIG5hbWU6ICdqYXZhc2NyaXB0JyxcbiAgICB0eXBlc2NyaXB0OiB0cnVlLFxuICB9KTtcbn1cbiIsICIvLyBDb2RlTWlycm9yLCBjb3B5cmlnaHQgKGMpIGJ5IE1hcmlqbiBIYXZlcmJla2UgYW5kIG90aGVyc1xuLy8gRGlzdHJpYnV0ZWQgdW5kZXIgYW4gTUlUIGxpY2Vuc2U6IGh0dHBzOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkQW5ub3RhdGVTY3JvbGxiYXIoQ29kZU1pcnJvcikge1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lRXh0ZW5zaW9uKCdhbm5vdGF0ZVNjcm9sbGJhcicsIGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykge1xuICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgY2xhc3NOYW1lOiBvcHRpb25zLFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBBbm5vdGF0aW9uKHRoaXMsIG9wdGlvbnMpO1xuICB9KTtcblxuICBDb2RlTWlycm9yLmRlZmluZU9wdGlvbignc2Nyb2xsQnV0dG9uSGVpZ2h0JywgMCk7XG5cbiAgZnVuY3Rpb24gQW5ub3RhdGlvbihjbSwgb3B0aW9ucykge1xuICAgIHRoaXMuY20gPSBjbTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuYnV0dG9uSGVpZ2h0ID0gb3B0aW9ucy5zY3JvbGxCdXR0b25IZWlnaHQgfHwgY20uZ2V0T3B0aW9uKCdzY3JvbGxCdXR0b25IZWlnaHQnKTtcbiAgICB0aGlzLmFubm90YXRpb25zID0gW107XG4gICAgdGhpcy5kb1JlZHJhdyA9IHRoaXMuZG9VcGRhdGUgPSBudWxsO1xuICAgIHRoaXMuZGl2ID0gY20uZ2V0V3JhcHBlckVsZW1lbnQoKVxuICAgICAgLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcbiAgICB0aGlzLmRpdi5zdHlsZS5jc3NUZXh0ID0gJ3Bvc2l0aW9uOiBhYnNvbHV0ZTsgcmlnaHQ6IDA7IHRvcDogMDsgei1pbmRleDogNzsgcG9pbnRlci1ldmVudHM6IG5vbmUnO1xuICAgIHRoaXMuY29tcHV0ZVNjYWxlKCk7XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZVJlZHJhdyhkZWxheSkge1xuICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuZG9SZWRyYXcpO1xuICAgICAgc2VsZi5kb1JlZHJhdyA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgfSwgZGVsYXkpO1xuICAgIH1cblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBjbS5vbigncmVmcmVzaCcsIHRoaXMucmVzaXplSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNsZWFyVGltZW91dChzZWxmLmRvVXBkYXRlKTtcbiAgICAgIHNlbGYuZG9VcGRhdGUgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKHNlbGYuY29tcHV0ZVNjYWxlKCkpIHNjaGVkdWxlUmVkcmF3KDIwKTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfSk7XG4gICAgY20ub24oJ21hcmtlckFkZGVkJywgdGhpcy5yZXNpemVIYW5kbGVyKTtcbiAgICBjbS5vbignbWFya2VyQ2xlYXJlZCcsIHRoaXMucmVzaXplSGFuZGxlcik7XG4gICAgaWYgKG9wdGlvbnMubGlzdGVuRm9yQ2hhbmdlcyAhPT0gZmFsc2UpIHtcbiAgICAgIGNtLm9uKCdjaGFuZ2UnLCB0aGlzLmNoYW5nZUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNjaGVkdWxlUmVkcmF3KDI1MCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBBbm5vdGF0aW9uLnByb3RvdHlwZS5jb21wdXRlU2NhbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgY20gPSB0aGlzLmNtO1xuICAgIGNvbnN0IGhTY2FsZSA9IChjbS5nZXRXcmFwcGVyRWxlbWVudCgpXG4gICAgICAuY2xpZW50SGVpZ2h0IC0gY20uZGlzcGxheS5iYXJIZWlnaHQgLSB0aGlzLmJ1dHRvbkhlaWdodCAqIDIpXG4gICAgICAvIGNtLmdldFNjcm9sbGVyRWxlbWVudCgpXG4gICAgICAgIC5zY3JvbGxIZWlnaHQ7XG4gICAgaWYgKGhTY2FsZSAhPSB0aGlzLmhTY2FsZSkge1xuICAgICAgdGhpcy5oU2NhbGUgPSBoU2NhbGU7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgQW5ub3RhdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGFubm90YXRpb25zKSB7XG4gICAgdGhpcy5hbm5vdGF0aW9ucyA9IGFubm90YXRpb25zO1xuICAgIHRoaXMucmVkcmF3KCk7XG4gIH07XG5cbiAgQW5ub3RhdGlvbi5wcm90b3R5cGUucmVkcmF3ID0gZnVuY3Rpb24gKGNvbXB1dGUpIHtcbiAgICBpZiAoY29tcHV0ZSAhPT0gZmFsc2UpIHRoaXMuY29tcHV0ZVNjYWxlKCk7XG4gICAgY29uc3QgY20gPSB0aGlzLmNtO1xuICAgIGNvbnN0IGhTY2FsZSA9IHRoaXMuaFNjYWxlO1xuXG4gICAgY29uc3QgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICBjb25zdCBhbm5zID0gdGhpcy5hbm5vdGF0aW9ucztcblxuICAgIGNvbnN0IHdyYXBwaW5nID0gY20uZ2V0T3B0aW9uKCdsaW5lV3JhcHBpbmcnKTtcbiAgICBjb25zdCBzaW5nbGVMaW5lSCA9IHdyYXBwaW5nICYmIGNtLmRlZmF1bHRUZXh0SGVpZ2h0KCkgKiAxLjU7XG4gICAgbGV0IGN1ckxpbmUgPSBudWxsO1xuICAgIGxldCBjdXJMaW5lT2JqID0gbnVsbDtcblxuICAgIGZ1bmN0aW9uIGdldFkocG9zLCB0b3ApIHtcbiAgICAgIGlmIChjdXJMaW5lICE9IHBvcy5saW5lKSB7XG4gICAgICAgIGN1ckxpbmUgPSBwb3MubGluZTtcbiAgICAgICAgY3VyTGluZU9iaiA9IGNtLmdldExpbmVIYW5kbGUoY3VyTGluZSk7XG4gICAgICB9XG4gICAgICBpZiAoKGN1ckxpbmVPYmoud2lkZ2V0cyAmJiBjdXJMaW5lT2JqLndpZGdldHMubGVuZ3RoKVxuICAgICAgICB8fCAod3JhcHBpbmcgJiYgY3VyTGluZU9iai5oZWlnaHQgPiBzaW5nbGVMaW5lSCkpIHtcbiAgICAgICAgcmV0dXJuIGNtLmNoYXJDb29yZHMocG9zLCAnbG9jYWwnKVt0b3AgPyAndG9wJyA6ICdib3R0b20nXTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRvcFkgPSBjbS5oZWlnaHRBdExpbmUoY3VyTGluZU9iaiwgJ2xvY2FsJyk7XG4gICAgICByZXR1cm4gdG9wWSArICh0b3AgPyAwIDogY3VyTGluZU9iai5oZWlnaHQpO1xuICAgIH1cblxuICAgIGNvbnN0IGxhc3RMaW5lID0gY20ubGFzdExpbmUoKTtcbiAgICBpZiAoY20uZGlzcGxheS5iYXJXaWR0aCkge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIG5leHRUb3A7IGkgPCBhbm5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBhbm4gPSBhbm5zW2ldO1xuICAgICAgICBpZiAoYW5uLnRvLmxpbmUgPiBsYXN0TGluZSkgY29udGludWU7XG4gICAgICAgIGNvbnN0IHRvcCA9IG5leHRUb3AgfHwgZ2V0WShhbm4uZnJvbSwgdHJ1ZSkgKiBoU2NhbGU7XG4gICAgICAgIGxldCBib3R0b20gPSBnZXRZKGFubi50bywgZmFsc2UpICogaFNjYWxlO1xuICAgICAgICB3aGlsZSAoaSA8IGFubnMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIGlmIChhbm5zW2kgKyAxXS50by5saW5lID4gbGFzdExpbmUpIGJyZWFrO1xuICAgICAgICAgIG5leHRUb3AgPSBnZXRZKGFubnNbaSArIDFdLmZyb20sIHRydWUpICogaFNjYWxlO1xuICAgICAgICAgIGlmIChuZXh0VG9wID4gYm90dG9tICsgMC45KSBicmVhaztcbiAgICAgICAgICBhbm4gPSBhbm5zWysraV07XG4gICAgICAgICAgYm90dG9tID0gZ2V0WShhbm4udG8sIGZhbHNlKSAqIGhTY2FsZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYm90dG9tID09IHRvcCkgY29udGludWU7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGgubWF4KGJvdHRvbSAtIHRvcCwgMyk7XG5cbiAgICAgICAgY29uc3QgZWx0ID0gZnJhZy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XG4gICAgICAgIGVsdC5zdHlsZS5jc3NUZXh0ID0gJ3Bvc2l0aW9uOiBhYnNvbHV0ZTsgcmlnaHQ6IDBweDsgd2lkdGg6ICcgKyBNYXRoLm1heChjbS5kaXNwbGF5LmJhcldpZHRoIC0gMSwgMilcbiAgICAgICAgICArICdweDsgdG9wOiAnXG4gICAgICAgICAgKyAodG9wICsgdGhpcy5idXR0b25IZWlnaHQpICsgJ3B4OyBoZWlnaHQ6ICcgKyBoZWlnaHQgKyAncHgnO1xuICAgICAgICBlbHQuY2xhc3NOYW1lID0gdGhpcy5vcHRpb25zLmNsYXNzTmFtZTtcbiAgICAgICAgaWYgKGFubi5pZCkge1xuICAgICAgICAgIGVsdC5zZXRBdHRyaWJ1dGUoJ2Fubm90YXRpb24taWQnLCBhbm4uaWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuZGl2LnRleHRDb250ZW50ID0gJyc7XG4gICAgdGhpcy5kaXYuYXBwZW5kQ2hpbGQoZnJhZyk7XG4gIH07XG5cbiAgQW5ub3RhdGlvbi5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jbS5vZmYoJ3JlZnJlc2gnLCB0aGlzLnJlc2l6ZUhhbmRsZXIpO1xuICAgIHRoaXMuY20ub2ZmKCdtYXJrZXJBZGRlZCcsIHRoaXMucmVzaXplSGFuZGxlcik7XG4gICAgdGhpcy5jbS5vZmYoJ21hcmtlckNsZWFyZWQnLCB0aGlzLnJlc2l6ZUhhbmRsZXIpO1xuICAgIGlmICh0aGlzLmNoYW5nZUhhbmRsZXIpIHRoaXMuY20ub2ZmKCdjaGFuZ2UnLCB0aGlzLmNoYW5nZUhhbmRsZXIpO1xuICAgIHRoaXMuZGl2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5kaXYpO1xuICB9O1xuXG59XG4iLCAiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwczovL2NvZGVtaXJyb3IubmV0L0xJQ0VOU0VcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZENvbW1lbnQoQ29kZU1pcnJvcikge1xuICBjb25zdCBub09wdGlvbnMgPSB7fTtcbiAgY29uc3Qgbm9uV1MgPSAvW15cXHNcXHUwMGEwXS87XG4gIGNvbnN0IFBvcyA9IENvZGVNaXJyb3IuUG9zO1xuXG4gIGZ1bmN0aW9uIGZpcnN0Tm9uV1Moc3RyKSB7XG4gICAgY29uc3QgZm91bmQgPSBzdHIuc2VhcmNoKG5vbldTKTtcbiAgICByZXR1cm4gZm91bmQgPT0gLTEgPyAwIDogZm91bmQ7XG4gIH1cblxuICBDb2RlTWlycm9yLmNvbW1hbmRzLnRvZ2dsZUNvbW1lbnQgPSBmdW5jdGlvbiAoY20pIHtcbiAgICBjbS50b2dnbGVDb21tZW50KCk7XG4gIH07XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVFeHRlbnNpb24oJ3RvZ2dsZUNvbW1lbnQnLCBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IG5vT3B0aW9ucztcbiAgICBjb25zdCBjbSA9IHRoaXM7XG4gICAgbGV0IG1pbkxpbmUgPSBJbmZpbml0eTtcbiAgICBjb25zdCByYW5nZXMgPSB0aGlzLmxpc3RTZWxlY3Rpb25zKCk7XG4gICAgbGV0IG1vZGUgPSBudWxsO1xuICAgIGZvciAobGV0IGkgPSByYW5nZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IGZyb20gPSByYW5nZXNbaV0uZnJvbSgpO1xuICAgICAgbGV0IHRvID0gcmFuZ2VzW2ldLnRvKCk7XG4gICAgICBpZiAoZnJvbS5saW5lID49IG1pbkxpbmUpIGNvbnRpbnVlO1xuICAgICAgaWYgKHRvLmxpbmUgPj0gbWluTGluZSkgdG8gPSBQb3MobWluTGluZSwgMCk7XG4gICAgICBtaW5MaW5lID0gZnJvbS5saW5lO1xuICAgICAgaWYgKG1vZGUgPT0gbnVsbCkge1xuICAgICAgICBpZiAoY20udW5jb21tZW50KGZyb20sIHRvLCBvcHRpb25zKSkgbW9kZSA9ICd1bic7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGNtLmxpbmVDb21tZW50KGZyb20sIHRvLCBvcHRpb25zKTtcbiAgICAgICAgICBtb2RlID0gJ2xpbmUnO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG1vZGUgPT0gJ3VuJykge1xuICAgICAgICBjbS51bmNvbW1lbnQoZnJvbSwgdG8sIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY20ubGluZUNvbW1lbnQoZnJvbSwgdG8sIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLy8gUm91Z2ggaGV1cmlzdGljIHRvIHRyeSBhbmQgZGV0ZWN0IGxpbmVzIHRoYXQgYXJlIHBhcnQgb2YgbXVsdGktbGluZSBzdHJpbmdcbiAgZnVuY3Rpb24gcHJvYmFibHlJbnNpZGVTdHJpbmcoY20sIHBvcywgbGluZSkge1xuICAgIHJldHVybiAoXG4gICAgICAvXFxic3RyaW5nXFxiLy50ZXN0KGNtLmdldFRva2VuVHlwZUF0KFBvcyhwb3MubGluZSwgMCkpKSAmJlxuICAgICAgIS9eW1xcJ1xcXCJcXGBdLy50ZXN0KGxpbmUpXG4gICAgKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldE1vZGUoY20sIHBvcykge1xuICAgIGNvbnN0IG1vZGUgPSBjbS5nZXRNb2RlKCk7XG4gICAgcmV0dXJuIG1vZGUudXNlSW5uZXJDb21tZW50cyA9PT0gZmFsc2UgfHwgIW1vZGUuaW5uZXJNb2RlXG4gICAgICA/IG1vZGVcbiAgICAgIDogY20uZ2V0TW9kZUF0KHBvcyk7XG4gIH1cblxuICBDb2RlTWlycm9yLmRlZmluZUV4dGVuc2lvbignbGluZUNvbW1lbnQnLCBmdW5jdGlvbiAoXG4gICAgZnJvbSxcbiAgICB0byxcbiAgICBvcHRpb25zLFxuICApIHtcbiAgICBpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSBub09wdGlvbnM7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgY29uc3QgbW9kZSA9IGdldE1vZGUoc2VsZiwgZnJvbSk7XG4gICAgY29uc3QgZmlyc3RMaW5lID0gc2VsZi5nZXRMaW5lKGZyb20ubGluZSk7XG4gICAgaWYgKFxuICAgICAgZmlyc3RMaW5lID09IG51bGwgfHxcbiAgICAgIHByb2JhYmx5SW5zaWRlU3RyaW5nKHNlbGYsIGZyb20sIGZpcnN0TGluZSlcbiAgICApXG4gICAgICByZXR1cm47XG5cbiAgICBjb25zdCBjb21tZW50U3RyaW5nID0gb3B0aW9ucy5saW5lQ29tbWVudCB8fCBtb2RlLmxpbmVDb21tZW50O1xuICAgIGlmICghY29tbWVudFN0cmluZykge1xuICAgICAgaWYgKG9wdGlvbnMuYmxvY2tDb21tZW50U3RhcnQgfHwgbW9kZS5ibG9ja0NvbW1lbnRTdGFydCkge1xuICAgICAgICBvcHRpb25zLmZ1bGxMaW5lcyA9IHRydWU7XG4gICAgICAgIHNlbGYuYmxvY2tDb21tZW50KGZyb20sIHRvLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBlbmQgPSBNYXRoLm1pbihcbiAgICAgIHRvLmNoICE9IDAgfHwgdG8ubGluZSA9PSBmcm9tLmxpbmUgPyB0by5saW5lICsgMSA6IHRvLmxpbmUsXG4gICAgICBzZWxmLmxhc3RMaW5lKCkgKyAxLFxuICAgICk7XG4gICAgY29uc3QgcGFkID0gb3B0aW9ucy5wYWRkaW5nID09IG51bGwgPyAnICcgOiBvcHRpb25zLnBhZGRpbmc7XG4gICAgY29uc3QgYmxhbmtMaW5lcyA9XG4gICAgICBvcHRpb25zLmNvbW1lbnRCbGFua0xpbmVzIHx8IGZyb20ubGluZSA9PSB0by5saW5lO1xuXG4gICAgc2VsZi5vcGVyYXRpb24oKCkgPT4ge1xuICAgICAgaWYgKG9wdGlvbnMuaW5kZW50KSB7XG4gICAgICAgIGxldCBiYXNlU3RyaW5nID0gbnVsbDtcbiAgICAgICAgZm9yICh2YXIgaSA9IGZyb20ubGluZTsgaSA8IGVuZDsgKytpKSB7XG4gICAgICAgICAgdmFyIGxpbmUgPSBzZWxmLmdldExpbmUoaSk7XG4gICAgICAgICAgY29uc3Qgd2hpdGVzcGFjZSA9IGxpbmUuc2xpY2UoMCwgZmlyc3ROb25XUyhsaW5lKSk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgYmFzZVN0cmluZyA9PSBudWxsIHx8XG4gICAgICAgICAgICBiYXNlU3RyaW5nLmxlbmd0aCA+IHdoaXRlc3BhY2UubGVuZ3RoXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBiYXNlU3RyaW5nID0gd2hpdGVzcGFjZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IGZyb20ubGluZTsgaSA8IGVuZDsgKytpKSB7XG4gICAgICAgICAgdmFyIGxpbmUgPSBzZWxmLmdldExpbmUoaSk7XG4gICAgICAgICAgbGV0IGN1dCA9IGJhc2VTdHJpbmcubGVuZ3RoO1xuICAgICAgICAgIGlmICghYmxhbmtMaW5lcyAmJiAhbm9uV1MudGVzdChsaW5lKSkgY29udGludWU7XG4gICAgICAgICAgaWYgKGxpbmUuc2xpY2UoMCwgY3V0KSAhPSBiYXNlU3RyaW5nKVxuICAgICAgICAgICAgY3V0ID0gZmlyc3ROb25XUyhsaW5lKTtcbiAgICAgICAgICBzZWxmLnJlcGxhY2VSYW5nZShcbiAgICAgICAgICAgIGJhc2VTdHJpbmcgKyBjb21tZW50U3RyaW5nICsgcGFkLFxuICAgICAgICAgICAgUG9zKGksIDApLFxuICAgICAgICAgICAgUG9zKGksIGN1dCksXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IGZyb20ubGluZTsgaSA8IGVuZDsgKytpKSB7XG4gICAgICAgICAgaWYgKGJsYW5rTGluZXMgfHwgbm9uV1MudGVzdChzZWxmLmdldExpbmUoaSkpKSB7XG4gICAgICAgICAgICBzZWxmLnJlcGxhY2VSYW5nZShjb21tZW50U3RyaW5nICsgcGFkLCBQb3MoaSwgMCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBDb2RlTWlycm9yLmRlZmluZUV4dGVuc2lvbignYmxvY2tDb21tZW50JywgZnVuY3Rpb24gKFxuICAgIGZyb20sXG4gICAgdG8sXG4gICAgb3B0aW9ucyxcbiAgKSB7XG4gICAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0gbm9PcHRpb25zO1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIGNvbnN0IG1vZGUgPSBnZXRNb2RlKHNlbGYsIGZyb20pO1xuICAgIGNvbnN0IHN0YXJ0U3RyaW5nID1cbiAgICAgIG9wdGlvbnMuYmxvY2tDb21tZW50U3RhcnQgfHwgbW9kZS5ibG9ja0NvbW1lbnRTdGFydDtcbiAgICBjb25zdCBlbmRTdHJpbmcgPSBvcHRpb25zLmJsb2NrQ29tbWVudEVuZCB8fCBtb2RlLmJsb2NrQ29tbWVudEVuZDtcbiAgICBpZiAoIXN0YXJ0U3RyaW5nIHx8ICFlbmRTdHJpbmcpIHtcbiAgICAgIGlmIChcbiAgICAgICAgKG9wdGlvbnMubGluZUNvbW1lbnQgfHwgbW9kZS5saW5lQ29tbWVudCkgJiZcbiAgICAgICAgb3B0aW9ucy5mdWxsTGluZXMgIT0gZmFsc2VcbiAgICAgICkge1xuICAgICAgICBzZWxmLmxpbmVDb21tZW50KGZyb20sIHRvLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKC9cXGJjb21tZW50XFxiLy50ZXN0KHNlbGYuZ2V0VG9rZW5UeXBlQXQoUG9zKGZyb20ubGluZSwgMCkpKSlcbiAgICAgIHJldHVybjtcblxuICAgIGxldCBlbmQgPSBNYXRoLm1pbih0by5saW5lLCBzZWxmLmxhc3RMaW5lKCkpO1xuICAgIGlmIChcbiAgICAgIGVuZCAhPSBmcm9tLmxpbmUgJiZcbiAgICAgIHRvLmNoID09IDAgJiZcbiAgICAgIG5vbldTLnRlc3Qoc2VsZi5nZXRMaW5lKGVuZCkpXG4gICAgKVxuICAgICAgLS1lbmQ7XG5cbiAgICBjb25zdCBwYWQgPSBvcHRpb25zLnBhZGRpbmcgPT0gbnVsbCA/ICcgJyA6IG9wdGlvbnMucGFkZGluZztcbiAgICBpZiAoZnJvbS5saW5lID4gZW5kKSByZXR1cm47XG5cbiAgICBzZWxmLm9wZXJhdGlvbigoKSA9PiB7XG4gICAgICBpZiAob3B0aW9ucy5mdWxsTGluZXMgIT0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgbGFzdExpbmVIYXNUZXh0ID0gbm9uV1MudGVzdChzZWxmLmdldExpbmUoZW5kKSk7XG4gICAgICAgIHNlbGYucmVwbGFjZVJhbmdlKHBhZCArIGVuZFN0cmluZywgUG9zKGVuZCkpO1xuICAgICAgICBzZWxmLnJlcGxhY2VSYW5nZShzdGFydFN0cmluZyArIHBhZCwgUG9zKGZyb20ubGluZSwgMCkpO1xuICAgICAgICBjb25zdCBsZWFkID1cbiAgICAgICAgICBvcHRpb25zLmJsb2NrQ29tbWVudExlYWQgfHwgbW9kZS5ibG9ja0NvbW1lbnRMZWFkO1xuICAgICAgICBpZiAobGVhZCAhPSBudWxsKSB7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IGZyb20ubGluZSArIDE7IGkgPD0gZW5kOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChpICE9IGVuZCB8fCBsYXN0TGluZUhhc1RleHQpIHtcbiAgICAgICAgICAgICAgc2VsZi5yZXBsYWNlUmFuZ2UobGVhZCArIHBhZCwgUG9zKGksIDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYucmVwbGFjZVJhbmdlKGVuZFN0cmluZywgdG8pO1xuICAgICAgICBzZWxmLnJlcGxhY2VSYW5nZShzdGFydFN0cmluZywgZnJvbSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lRXh0ZW5zaW9uKCd1bmNvbW1lbnQnLCBmdW5jdGlvbiAoXG4gICAgZnJvbSxcbiAgICB0byxcbiAgICBvcHRpb25zLFxuICApIHtcbiAgICBpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSBub09wdGlvbnM7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgY29uc3QgbW9kZSA9IGdldE1vZGUoc2VsZiwgZnJvbSk7XG4gICAgY29uc3QgZW5kID0gTWF0aC5taW4oXG4gICAgICB0by5jaCAhPSAwIHx8IHRvLmxpbmUgPT0gZnJvbS5saW5lID8gdG8ubGluZSA6IHRvLmxpbmUgLSAxLFxuICAgICAgc2VsZi5sYXN0TGluZSgpLFxuICAgICk7XG4gICAgY29uc3Qgc3RhcnQgPSBNYXRoLm1pbihmcm9tLmxpbmUsIGVuZCk7XG5cbiAgICAvLyBUcnkgZmluZGluZyBsaW5lIGNvbW1lbnRzXG4gICAgY29uc3QgbGluZVN0cmluZyA9IG9wdGlvbnMubGluZUNvbW1lbnQgfHwgbW9kZS5saW5lQ29tbWVudDtcbiAgICBjb25zdCBsaW5lcyA9IFtdO1xuICAgIGNvbnN0IHBhZCA9IG9wdGlvbnMucGFkZGluZyA9PSBudWxsID8gJyAnIDogb3B0aW9ucy5wYWRkaW5nO1xuICAgIGxldCBkaWRTb21ldGhpbmc7XG4gICAgbGluZUNvbW1lbnQ6IHtcbiAgICAgIGlmICghbGluZVN0cmluZykgYnJlYWsgbGluZUNvbW1lbnQ7XG4gICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPD0gZW5kOyArK2kpIHtcbiAgICAgICAgY29uc3QgbGluZSA9IHNlbGYuZ2V0TGluZShpKTtcbiAgICAgICAgbGV0IGZvdW5kID0gbGluZS5pbmRleE9mKGxpbmVTdHJpbmcpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZm91bmQgPiAtMSAmJlxuICAgICAgICAgICEvY29tbWVudC8udGVzdChzZWxmLmdldFRva2VuVHlwZUF0KFBvcyhpLCBmb3VuZCArIDEpKSlcbiAgICAgICAgKVxuICAgICAgICAgIGZvdW5kID0gLTE7XG4gICAgICAgIGlmIChmb3VuZCA9PSAtMSAmJiBub25XUy50ZXN0KGxpbmUpKSBicmVhayBsaW5lQ29tbWVudDtcbiAgICAgICAgaWYgKGZvdW5kID4gLTEgJiYgbm9uV1MudGVzdChsaW5lLnNsaWNlKDAsIGZvdW5kKSkpXG4gICAgICAgICAgYnJlYWsgbGluZUNvbW1lbnQ7XG4gICAgICAgIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICB9XG4gICAgICBzZWxmLm9wZXJhdGlvbigoKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8PSBlbmQ7ICsraSkge1xuICAgICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpIC0gc3RhcnRdO1xuICAgICAgICAgIGNvbnN0IHBvcyA9IGxpbmUuaW5kZXhPZihsaW5lU3RyaW5nKTtcbiAgICAgICAgICBsZXQgZW5kUG9zID0gcG9zICsgbGluZVN0cmluZy5sZW5ndGg7XG4gICAgICAgICAgaWYgKHBvcyA8IDApIGNvbnRpbnVlO1xuICAgICAgICAgIGlmIChsaW5lLnNsaWNlKGVuZFBvcywgZW5kUG9zICsgcGFkLmxlbmd0aCkgPT0gcGFkKVxuICAgICAgICAgICAgZW5kUG9zICs9IHBhZC5sZW5ndGg7XG4gICAgICAgICAgZGlkU29tZXRoaW5nID0gdHJ1ZTtcbiAgICAgICAgICBzZWxmLnJlcGxhY2VSYW5nZSgnJywgUG9zKGksIHBvcyksIFBvcyhpLCBlbmRQb3MpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoZGlkU29tZXRoaW5nKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBUcnkgYmxvY2sgY29tbWVudHNcbiAgICBjb25zdCBzdGFydFN0cmluZyA9XG4gICAgICBvcHRpb25zLmJsb2NrQ29tbWVudFN0YXJ0IHx8IG1vZGUuYmxvY2tDb21tZW50U3RhcnQ7XG4gICAgY29uc3QgZW5kU3RyaW5nID0gb3B0aW9ucy5ibG9ja0NvbW1lbnRFbmQgfHwgbW9kZS5ibG9ja0NvbW1lbnRFbmQ7XG4gICAgaWYgKCFzdGFydFN0cmluZyB8fCAhZW5kU3RyaW5nKSByZXR1cm4gZmFsc2U7XG4gICAgY29uc3QgbGVhZCA9IG9wdGlvbnMuYmxvY2tDb21tZW50TGVhZCB8fCBtb2RlLmJsb2NrQ29tbWVudExlYWQ7XG4gICAgY29uc3Qgc3RhcnRMaW5lID0gc2VsZi5nZXRMaW5lKHN0YXJ0KTtcbiAgICBjb25zdCBvcGVuID0gc3RhcnRMaW5lLmluZGV4T2Yoc3RhcnRTdHJpbmcpO1xuICAgIGlmIChvcGVuID09IC0xKSByZXR1cm4gZmFsc2U7XG4gICAgY29uc3QgZW5kTGluZSA9IGVuZCA9PSBzdGFydCA/IHN0YXJ0TGluZSA6IHNlbGYuZ2V0TGluZShlbmQpO1xuICAgIGNvbnN0IGNsb3NlID0gZW5kTGluZS5pbmRleE9mKFxuICAgICAgZW5kU3RyaW5nLFxuICAgICAgZW5kID09IHN0YXJ0ID8gb3BlbiArIHN0YXJ0U3RyaW5nLmxlbmd0aCA6IDAsXG4gICAgKTtcbiAgICBjb25zdCBpbnNpZGVTdGFydCA9IFBvcyhzdGFydCwgb3BlbiArIDEpO1xuICAgIGNvbnN0IGluc2lkZUVuZCA9IFBvcyhlbmQsIGNsb3NlICsgMSk7XG4gICAgaWYgKFxuICAgICAgY2xvc2UgPT0gLTEgfHxcbiAgICAgICEvY29tbWVudC8udGVzdChzZWxmLmdldFRva2VuVHlwZUF0KGluc2lkZVN0YXJ0KSkgfHxcbiAgICAgICEvY29tbWVudC8udGVzdChzZWxmLmdldFRva2VuVHlwZUF0KGluc2lkZUVuZCkpIHx8XG4gICAgICBzZWxmLmdldFJhbmdlKGluc2lkZVN0YXJ0LCBpbnNpZGVFbmQsICdcXG4nKS5pbmRleE9mKGVuZFN0cmluZykgPlxuICAgICAgLTFcbiAgICApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBBdm9pZCBraWxsaW5nIGJsb2NrIGNvbW1lbnRzIGNvbXBsZXRlbHkgb3V0c2lkZSB0aGUgc2VsZWN0aW9uLlxuICAgIC8vIFBvc2l0aW9ucyBvZiB0aGUgbGFzdCBzdGFydFN0cmluZyBiZWZvcmUgdGhlIHN0YXJ0IG9mIHRoZSBzZWxlY3Rpb24sIGFuZCB0aGUgZmlyc3QgZW5kU3RyaW5nIGFmdGVyIGl0LlxuICAgIGxldCBsYXN0U3RhcnQgPSBzdGFydExpbmUubGFzdEluZGV4T2Yoc3RhcnRTdHJpbmcsIGZyb20uY2gpO1xuICAgIGxldCBmaXJzdEVuZCA9XG4gICAgICBsYXN0U3RhcnQgPT0gLTFcbiAgICAgICAgPyAtMVxuICAgICAgICA6IHN0YXJ0TGluZVxuICAgICAgICAgIC5zbGljZSgwLCBmcm9tLmNoKVxuICAgICAgICAgIC5pbmRleE9mKGVuZFN0cmluZywgbGFzdFN0YXJ0ICsgc3RhcnRTdHJpbmcubGVuZ3RoKTtcbiAgICBpZiAoXG4gICAgICBsYXN0U3RhcnQgIT0gLTEgJiZcbiAgICAgIGZpcnN0RW5kICE9IC0xICYmXG4gICAgICBmaXJzdEVuZCArIGVuZFN0cmluZy5sZW5ndGggIT0gZnJvbS5jaFxuICAgIClcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICAvLyBQb3NpdGlvbnMgb2YgdGhlIGZpcnN0IGVuZFN0cmluZyBhZnRlciB0aGUgZW5kIG9mIHRoZSBzZWxlY3Rpb24sIGFuZCB0aGUgbGFzdCBzdGFydFN0cmluZyBiZWZvcmUgaXQuXG4gICAgZmlyc3RFbmQgPSBlbmRMaW5lLmluZGV4T2YoZW5kU3RyaW5nLCB0by5jaCk7XG4gICAgY29uc3QgYWxtb3N0TGFzdFN0YXJ0ID0gZW5kTGluZVxuICAgICAgLnNsaWNlKHRvLmNoKVxuICAgICAgLmxhc3RJbmRleE9mKHN0YXJ0U3RyaW5nLCBmaXJzdEVuZCAtIHRvLmNoKTtcbiAgICBsYXN0U3RhcnQgPVxuICAgICAgZmlyc3RFbmQgPT0gLTEgfHwgYWxtb3N0TGFzdFN0YXJ0ID09IC0xXG4gICAgICAgID8gLTFcbiAgICAgICAgOiB0by5jaCArIGFsbW9zdExhc3RTdGFydDtcbiAgICBpZiAoZmlyc3RFbmQgIT0gLTEgJiYgbGFzdFN0YXJ0ICE9IC0xICYmIGxhc3RTdGFydCAhPSB0by5jaClcbiAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIHNlbGYub3BlcmF0aW9uKCgpID0+IHtcbiAgICAgIHNlbGYucmVwbGFjZVJhbmdlKFxuICAgICAgICAnJyxcbiAgICAgICAgUG9zKFxuICAgICAgICAgIGVuZCxcbiAgICAgICAgICBjbG9zZSAtXG4gICAgICAgICAgKHBhZCAmJiBlbmRMaW5lLnNsaWNlKGNsb3NlIC0gcGFkLmxlbmd0aCwgY2xvc2UpID09IHBhZFxuICAgICAgICAgICAgPyBwYWQubGVuZ3RoXG4gICAgICAgICAgICA6IDApLFxuICAgICAgICApLFxuICAgICAgICBQb3MoZW5kLCBjbG9zZSArIGVuZFN0cmluZy5sZW5ndGgpLFxuICAgICAgKTtcbiAgICAgIGxldCBvcGVuRW5kID0gb3BlbiArIHN0YXJ0U3RyaW5nLmxlbmd0aDtcbiAgICAgIGlmIChcbiAgICAgICAgcGFkICYmXG4gICAgICAgIHN0YXJ0TGluZS5zbGljZShvcGVuRW5kLCBvcGVuRW5kICsgcGFkLmxlbmd0aCkgPT0gcGFkXG4gICAgICApXG4gICAgICAgIG9wZW5FbmQgKz0gcGFkLmxlbmd0aDtcbiAgICAgIHNlbGYucmVwbGFjZVJhbmdlKCcnLCBQb3Moc3RhcnQsIG9wZW4pLCBQb3Moc3RhcnQsIG9wZW5FbmQpKTtcbiAgICAgIGlmIChsZWFkKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydCArIDE7IGkgPD0gZW5kOyArK2kpIHtcbiAgICAgICAgICBjb25zdCBsaW5lID0gc2VsZi5nZXRMaW5lKGkpO1xuICAgICAgICAgIGNvbnN0IGZvdW5kID0gbGluZS5pbmRleE9mKGxlYWQpO1xuICAgICAgICAgIGlmIChmb3VuZCA9PSAtMSB8fCBub25XUy50ZXN0KGxpbmUuc2xpY2UoMCwgZm91bmQpKSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIGxldCBmb3VuZEVuZCA9IGZvdW5kICsgbGVhZC5sZW5ndGg7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgcGFkICYmXG4gICAgICAgICAgICBsaW5lLnNsaWNlKGZvdW5kRW5kLCBmb3VuZEVuZCArIHBhZC5sZW5ndGgpID09IHBhZFxuICAgICAgICAgIClcbiAgICAgICAgICAgIGZvdW5kRW5kICs9IHBhZC5sZW5ndGg7XG4gICAgICAgICAgc2VsZi5yZXBsYWNlUmFuZ2UoJycsIFBvcyhpLCBmb3VuZCksIFBvcyhpLCBmb3VuZEVuZCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0pO1xufVxuIiwgIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRGdWxsc2NyZWVuKENvZGVNaXJyb3IpIHtcblxuICBDb2RlTWlycm9yLmRlZmluZU9wdGlvbignZnVsbFNjcmVlbicsIGZhbHNlLCAoY20sIHZhbCwgb2xkKSA9PiB7XG4gICAgaWYgKG9sZCA9PSBDb2RlTWlycm9yLkluaXQpIG9sZCA9IGZhbHNlO1xuICAgIGlmICghb2xkID09ICF2YWwpIHJldHVybjtcbiAgICBpZiAodmFsKSBzZXRGdWxsc2NyZWVuKGNtKTtcbiAgICBlbHNlIHNldE5vcm1hbChjbSk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHNldEZ1bGxzY3JlZW4oY20pIHtcbiAgICBjb25zdCB3cmFwID0gY20uZ2V0V3JhcHBlckVsZW1lbnQoKTtcbiAgICBjbS5zdGF0ZS5mdWxsU2NyZWVuUmVzdG9yZSA9IHtcbiAgICAgIHNjcm9sbFRvcDogd2luZG93LnBhZ2VZT2Zmc2V0LFxuICAgICAgc2Nyb2xsTGVmdDogd2luZG93LnBhZ2VYT2Zmc2V0LFxuICAgICAgd2lkdGg6IHdyYXAuc3R5bGUud2lkdGgsXG4gICAgICBoZWlnaHQ6IHdyYXAuc3R5bGUuaGVpZ2h0LFxuICAgIH07XG4gICAgd3JhcC5zdHlsZS53aWR0aCA9ICcnO1xuICAgIHdyYXAuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xuICAgIHdyYXAuY2xhc3NOYW1lICs9ICcgQ29kZU1pcnJvci1mdWxsc2NyZWVuJztcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICBjbS5yZWZyZXNoKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXROb3JtYWwoY20pIHtcbiAgICBjb25zdCB3cmFwID0gY20uZ2V0V3JhcHBlckVsZW1lbnQoKTtcbiAgICB3cmFwLmNsYXNzTmFtZSA9IHdyYXAuY2xhc3NOYW1lLnJlcGxhY2UoL1xccypDb2RlTWlycm9yLWZ1bGxzY3JlZW5cXGIvLCAnJyk7XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gJyc7XG4gICAgY29uc3QgaW5mbyA9IGNtLnN0YXRlLmZ1bGxTY3JlZW5SZXN0b3JlO1xuICAgIHdyYXAuc3R5bGUud2lkdGggPSBpbmZvLndpZHRoO1xuICAgIHdyYXAuc3R5bGUuaGVpZ2h0ID0gaW5mby5oZWlnaHQ7XG4gICAgd2luZG93LnNjcm9sbFRvKGluZm8uc2Nyb2xsTGVmdCwgaW5mby5zY3JvbGxUb3ApO1xuICAgIGNtLnJlZnJlc2goKTtcbiAgfVxufVxuIiwgIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRBY3RpdmVMaW5lKENvZGVNaXJyb3IpIHtcblxuICBjb25zdCBXUkFQX0NMQVNTID0gJ0NvZGVNaXJyb3ItYWN0aXZlbGluZSc7XG4gIGNvbnN0IEJBQ0tfQ0xBU1MgPSAnQ29kZU1pcnJvci1hY3RpdmVsaW5lLWJhY2tncm91bmQnO1xuICBjb25zdCBHVVRUX0NMQVNTID0gJ0NvZGVNaXJyb3ItYWN0aXZlbGluZS1ndXR0ZXInO1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lT3B0aW9uKCdzdHlsZUFjdGl2ZUxpbmUnLCBmYWxzZSwgKGNtLCB2YWwsIG9sZCkgPT4ge1xuICAgIGNvbnN0IHByZXYgPSBvbGQgPT0gQ29kZU1pcnJvci5Jbml0ID8gZmFsc2UgOiBvbGQ7XG4gICAgaWYgKHZhbCA9PSBwcmV2KSByZXR1cm47XG4gICAgaWYgKHByZXYpIHtcbiAgICAgIGNtLm9mZignYmVmb3JlU2VsZWN0aW9uQ2hhbmdlJywgc2VsZWN0aW9uQ2hhbmdlKTtcbiAgICAgIGNsZWFyQWN0aXZlTGluZXMoY20pO1xuICAgICAgZGVsZXRlIGNtLnN0YXRlLmFjdGl2ZUxpbmVzO1xuICAgIH1cbiAgICBpZiAodmFsKSB7XG4gICAgICBjbS5zdGF0ZS5hY3RpdmVMaW5lcyA9IFtdO1xuICAgICAgdXBkYXRlQWN0aXZlTGluZXMoY20sIGNtLmxpc3RTZWxlY3Rpb25zKCkpO1xuICAgICAgY20ub24oJ2JlZm9yZVNlbGVjdGlvbkNoYW5nZScsIHNlbGVjdGlvbkNoYW5nZSk7XG4gICAgfVxuICB9KTtcblxuICBmdW5jdGlvbiBjbGVhckFjdGl2ZUxpbmVzKGNtKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjbS5zdGF0ZS5hY3RpdmVMaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgY20ucmVtb3ZlTGluZUNsYXNzKGNtLnN0YXRlLmFjdGl2ZUxpbmVzW2ldLCAnd3JhcCcsIFdSQVBfQ0xBU1MpO1xuICAgICAgY20ucmVtb3ZlTGluZUNsYXNzKGNtLnN0YXRlLmFjdGl2ZUxpbmVzW2ldLCAnYmFja2dyb3VuZCcsIEJBQ0tfQ0xBU1MpO1xuICAgICAgY20ucmVtb3ZlTGluZUNsYXNzKGNtLnN0YXRlLmFjdGl2ZUxpbmVzW2ldLCAnZ3V0dGVyJywgR1VUVF9DTEFTUyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2FtZUFycmF5KGEsIGIpIHtcbiAgICBpZiAoYS5sZW5ndGggIT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChhW2ldICE9IGJbaV0pIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVBY3RpdmVMaW5lcyhjbSwgcmFuZ2VzKSB7XG4gICAgY29uc3QgYWN0aXZlID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHJhbmdlID0gcmFuZ2VzW2ldO1xuICAgICAgY29uc3Qgb3B0aW9uID0gY20uZ2V0T3B0aW9uKCdzdHlsZUFjdGl2ZUxpbmUnKTtcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09PSAnb2JqZWN0JyAmJiBvcHRpb24ubm9uRW1wdHkgPyByYW5nZS5hbmNob3IubGluZSAhPSByYW5nZS5oZWFkLmxpbmUgOiAhcmFuZ2UuZW1wdHkoKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxpbmUgPSBjbS5nZXRMaW5lSGFuZGxlVmlzdWFsU3RhcnQocmFuZ2UuaGVhZC5saW5lKTtcbiAgICAgIGlmIChhY3RpdmVbYWN0aXZlLmxlbmd0aCAtIDFdICE9IGxpbmUpIGFjdGl2ZS5wdXNoKGxpbmUpO1xuICAgIH1cbiAgICBpZiAoc2FtZUFycmF5KGNtLnN0YXRlLmFjdGl2ZUxpbmVzLCBhY3RpdmUpKSByZXR1cm47XG4gICAgY20ub3BlcmF0aW9uKCgpID0+IHtcbiAgICAgIGNsZWFyQWN0aXZlTGluZXMoY20pO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhY3RpdmUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY20uYWRkTGluZUNsYXNzKGFjdGl2ZVtpXSwgJ3dyYXAnLCBXUkFQX0NMQVNTKTtcbiAgICAgICAgY20uYWRkTGluZUNsYXNzKGFjdGl2ZVtpXSwgJ2JhY2tncm91bmQnLCBCQUNLX0NMQVNTKTtcbiAgICAgICAgY20uYWRkTGluZUNsYXNzKGFjdGl2ZVtpXSwgJ2d1dHRlcicsIEdVVFRfQ0xBU1MpO1xuICAgICAgfVxuICAgICAgY20uc3RhdGUuYWN0aXZlTGluZXMgPSBhY3RpdmU7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBzZWxlY3Rpb25DaGFuZ2UoY20sIHNlbCkge1xuICAgIHVwZGF0ZUFjdGl2ZUxpbmVzKGNtLCBzZWwucmFuZ2VzKTtcbiAgfVxufVxuIiwgIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbi8vIE9wZW4gc2ltcGxlIGRpYWxvZ3Mgb24gdG9wIG9mIGFuIGVkaXRvci4gUmVsaWVzIG9uIGRpYWxvZy5jc3MuXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGREaWFsb2coQ29kZU1pcnJvcikge1xuXG4gIGZ1bmN0aW9uIGRpYWxvZ0RpdihjbSwgdGVtcGxhdGUsIGJvdHRvbSkge1xuICAgIGNvbnN0IHdyYXAgPSBjbS5nZXRXcmFwcGVyRWxlbWVudCgpO1xuICAgIGxldCBkaWFsb2c7XG4gICAgZGlhbG9nID0gd3JhcC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XG4gICAgaWYgKGJvdHRvbSkgeyBkaWFsb2cuY2xhc3NOYW1lID0gJ0NvZGVNaXJyb3ItZGlhbG9nIENvZGVNaXJyb3ItZGlhbG9nLWJvdHRvbSc7IH0gZWxzZSB7IGRpYWxvZy5jbGFzc05hbWUgPSAnQ29kZU1pcnJvci1kaWFsb2cgQ29kZU1pcnJvci1kaWFsb2ctdG9wJzsgfVxuXG4gICAgaWYgKHR5cGVvZiB0ZW1wbGF0ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGRpYWxvZy5pbm5lckhUTUwgPSB0ZW1wbGF0ZTtcbiAgICB9IGVsc2UgeyAvLyBBc3N1bWluZyBpdCdzIGEgZGV0YWNoZWQgRE9NIGVsZW1lbnQuXG4gICAgICBkaWFsb2cuYXBwZW5kQ2hpbGQodGVtcGxhdGUpO1xuICAgIH1cbiAgICBDb2RlTWlycm9yLmFkZENsYXNzKHdyYXAsICdkaWFsb2ctb3BlbmVkJyk7XG4gICAgcmV0dXJuIGRpYWxvZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsb3NlTm90aWZpY2F0aW9uKGNtLCBuZXdWYWwpIHtcbiAgICBpZiAoY20uc3RhdGUuY3VycmVudE5vdGlmaWNhdGlvbkNsb3NlKSB7IGNtLnN0YXRlLmN1cnJlbnROb3RpZmljYXRpb25DbG9zZSgpOyB9XG4gICAgY20uc3RhdGUuY3VycmVudE5vdGlmaWNhdGlvbkNsb3NlID0gbmV3VmFsO1xuICB9XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVFeHRlbnNpb24oJ29wZW5EaWFsb2cnLCBmdW5jdGlvbiAodGVtcGxhdGUsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307XG5cbiAgICBjbG9zZU5vdGlmaWNhdGlvbih0aGlzLCBudWxsKTtcblxuICAgIGNvbnN0IGRpYWxvZyA9IGRpYWxvZ0Rpdih0aGlzLCB0ZW1wbGF0ZSwgb3B0aW9ucy5ib3R0b20pO1xuICAgIGxldCBjbG9zZWQgPSBmYWxzZTsgY29uc3QgbWUgPSB0aGlzO1xuICAgIGZ1bmN0aW9uIGNsb3NlKG5ld1ZhbCkge1xuICAgICAgaWYgKHR5cGVvZiBuZXdWYWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlucC52YWx1ZSA9IG5ld1ZhbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjbG9zZWQpIHJldHVybjtcbiAgICAgICAgY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgQ29kZU1pcnJvci5ybUNsYXNzKGRpYWxvZy5wYXJlbnROb2RlLCAnZGlhbG9nLW9wZW5lZCcpO1xuICAgICAgICBkaWFsb2cucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkaWFsb2cpO1xuICAgICAgICBtZS5mb2N1cygpO1xuXG4gICAgICAgIGlmIChvcHRpb25zLm9uQ2xvc2UpIG9wdGlvbnMub25DbG9zZShkaWFsb2cpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBpbnAgPSBkaWFsb2cuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lucHV0JylbMF07IGxldCBidXR0b247XG4gICAgaWYgKGlucCkge1xuICAgICAgaW5wLmZvY3VzKCk7XG5cbiAgICAgIGlmIChvcHRpb25zLnZhbHVlKSB7XG4gICAgICAgIGlucC52YWx1ZSA9IG9wdGlvbnMudmFsdWU7XG4gICAgICAgIGlmIChvcHRpb25zLnNlbGVjdFZhbHVlT25PcGVuICE9PSBmYWxzZSkge1xuICAgICAgICAgIGlucC5zZWxlY3QoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5vbklucHV0KSB7IENvZGVNaXJyb3Iub24oaW5wLCAnaW5wdXQnLCAoZSkgPT4geyBvcHRpb25zLm9uSW5wdXQoZSwgaW5wLnZhbHVlLCBjbG9zZSk7IH0pOyB9XG4gICAgICBpZiAob3B0aW9ucy5vbktleVVwKSB7IENvZGVNaXJyb3Iub24oaW5wLCAna2V5dXAnLCAoZSkgPT4geyBvcHRpb25zLm9uS2V5VXAoZSwgaW5wLnZhbHVlLCBjbG9zZSk7IH0pOyB9XG5cbiAgICAgIENvZGVNaXJyb3Iub24oaW5wLCAna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMub25LZXlEb3duICYmIG9wdGlvbnMub25LZXlEb3duKGUsIGlucC52YWx1ZSwgY2xvc2UpKSB7IHJldHVybjsgfVxuICAgICAgICBpZiAoZS5rZXlDb2RlID09IDI3IHx8IChvcHRpb25zLmNsb3NlT25FbnRlciAhPT0gZmFsc2UgJiYgZS5rZXlDb2RlID09IDEzKSkge1xuICAgICAgICAgIGlucC5ibHVyKCk7XG4gICAgICAgICAgQ29kZU1pcnJvci5lX3N0b3AoZSk7XG4gICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSBjYWxsYmFjayhpbnAudmFsdWUsIGUpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChvcHRpb25zLmNsb3NlT25CbHVyICE9PSBmYWxzZSkgQ29kZU1pcnJvci5vbihpbnAsICdibHVyJywgY2xvc2UpO1xuICAgIH0gZWxzZSBpZiAoYnV0dG9uID0gZGlhbG9nLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdidXR0b24nKVswXSkge1xuICAgICAgQ29kZU1pcnJvci5vbihidXR0b24sICdjbGljaycsICgpID0+IHtcbiAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgbWUuZm9jdXMoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAob3B0aW9ucy5jbG9zZU9uQmx1ciAhPT0gZmFsc2UpIENvZGVNaXJyb3Iub24oYnV0dG9uLCAnYmx1cicsIGNsb3NlKTtcblxuICAgICAgYnV0dG9uLmZvY3VzKCk7XG4gICAgfVxuICAgIHJldHVybiBjbG9zZTtcbiAgfSk7XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVFeHRlbnNpb24oJ29wZW5Db25maXJtJywgZnVuY3Rpb24gKHRlbXBsYXRlLCBjYWxsYmFja3MsIG9wdGlvbnMpIHtcbiAgICBjbG9zZU5vdGlmaWNhdGlvbih0aGlzLCBudWxsKTtcbiAgICBjb25zdCBkaWFsb2cgPSBkaWFsb2dEaXYodGhpcywgdGVtcGxhdGUsIG9wdGlvbnMgJiYgb3B0aW9ucy5ib3R0b20pO1xuICAgIGNvbnN0IGJ1dHRvbnMgPSBkaWFsb2cuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2J1dHRvbicpO1xuICAgIGxldCBjbG9zZWQgPSBmYWxzZTsgY29uc3QgbWUgPSB0aGlzOyBsZXQgYmx1cnJpbmcgPSAxO1xuICAgIGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgICAgaWYgKGNsb3NlZCkgcmV0dXJuO1xuICAgICAgY2xvc2VkID0gdHJ1ZTtcbiAgICAgIENvZGVNaXJyb3Iucm1DbGFzcyhkaWFsb2cucGFyZW50Tm9kZSwgJ2RpYWxvZy1vcGVuZWQnKTtcbiAgICAgIGRpYWxvZy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGRpYWxvZyk7XG4gICAgICBtZS5mb2N1cygpO1xuICAgIH1cbiAgICBidXR0b25zWzBdLmZvY3VzKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidXR0b25zLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgYiA9IGJ1dHRvbnNbaV07XG4gICAgICAoZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIENvZGVNaXJyb3Iub24oYiwgJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICBDb2RlTWlycm9yLmVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKG1lKTtcbiAgICAgICAgfSk7XG4gICAgICB9KGNhbGxiYWNrc1tpXSkpO1xuICAgICAgQ29kZU1pcnJvci5vbihiLCAnYmx1cicsICgpID0+IHtcbiAgICAgICAgLS1ibHVycmluZztcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IGlmIChibHVycmluZyA8PSAwKSBjbG9zZSgpOyB9LCAyMDApO1xuICAgICAgfSk7XG4gICAgICBDb2RlTWlycm9yLm9uKGIsICdmb2N1cycsICgpID0+IHsgKytibHVycmluZzsgfSk7XG4gICAgfVxuICB9KTtcblxuICAvKlxuICAgKiBvcGVuTm90aWZpY2F0aW9uXG4gICAqIE9wZW5zIGEgbm90aWZpY2F0aW9uLCB0aGF0IGNhbiBiZSBjbG9zZWQgd2l0aCBhbiBvcHRpb25hbCB0aW1lclxuICAgKiAoZGVmYXVsdCA1MDAwbXMgdGltZXIpIGFuZCBhbHdheXMgY2xvc2VzIG9uIGNsaWNrLlxuICAgKlxuICAgKiBJZiBhIG5vdGlmaWNhdGlvbiBpcyBvcGVuZWQgd2hpbGUgYW5vdGhlciBpcyBvcGVuZWQsIGl0IHdpbGwgY2xvc2UgdGhlXG4gICAqIGN1cnJlbnRseSBvcGVuZWQgb25lIGFuZCBvcGVuIHRoZSBuZXcgb25lIGltbWVkaWF0ZWx5LlxuICAgKi9cbiAgQ29kZU1pcnJvci5kZWZpbmVFeHRlbnNpb24oJ29wZW5Ob3RpZmljYXRpb24nLCBmdW5jdGlvbiAodGVtcGxhdGUsIG9wdGlvbnMpIHtcbiAgICBjbG9zZU5vdGlmaWNhdGlvbih0aGlzLCBjbG9zZSk7XG4gICAgY29uc3QgZGlhbG9nID0gZGlhbG9nRGl2KHRoaXMsIHRlbXBsYXRlLCBvcHRpb25zICYmIG9wdGlvbnMuYm90dG9tKTtcbiAgICBsZXQgY2xvc2VkID0gZmFsc2U7IGxldCBkb25lVGltZXI7XG4gICAgY29uc3QgZHVyYXRpb24gPSBvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zLmR1cmF0aW9uICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuZHVyYXRpb24gOiA1MDAwO1xuXG4gICAgZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICBpZiAoY2xvc2VkKSByZXR1cm47XG4gICAgICBjbG9zZWQgPSB0cnVlO1xuICAgICAgY2xlYXJUaW1lb3V0KGRvbmVUaW1lcik7XG4gICAgICBDb2RlTWlycm9yLnJtQ2xhc3MoZGlhbG9nLnBhcmVudE5vZGUsICdkaWFsb2ctb3BlbmVkJyk7XG4gICAgICBkaWFsb2cucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkaWFsb2cpO1xuICAgIH1cblxuICAgIENvZGVNaXJyb3Iub24oZGlhbG9nLCAnY2xpY2snLCAoZSkgPT4ge1xuICAgICAgQ29kZU1pcnJvci5lX3ByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIGlmIChkdXJhdGlvbikgeyBkb25lVGltZXIgPSBzZXRUaW1lb3V0KGNsb3NlLCBkdXJhdGlvbik7IH1cblxuICAgIHJldHVybiBjbG9zZTtcbiAgfSk7XG59XG4iLCAiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwczovL2NvZGVtaXJyb3IubmV0L0xJQ0VOU0VcblxuLy8gRGVmaW5lcyBqdW1wVG9MaW5lIGNvbW1hbmQuIFVzZXMgZGlhbG9nLmpzIGlmIHByZXNlbnQuXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRKdW1wdG9saW5lKENvZGVNaXJyb3IpIHtcblxuICBmdW5jdGlvbiBkaWFsb2coY20sIHRleHQsIHNob3J0VGV4dCwgZGVmbHQsIGYpIHtcbiAgICBpZiAoY20ub3BlbkRpYWxvZykge1xuICAgICAgY20ub3BlbkRpYWxvZyh0ZXh0LCBmLCB7XG4gICAgICAgIHZhbHVlOiBkZWZsdCxcbiAgICAgICAgc2VsZWN0VmFsdWVPbk9wZW46IHRydWUsXG4gICAgICB9KTtcbiAgICB9IGVsc2UgZihwcm9tcHQoc2hvcnRUZXh0LCBkZWZsdCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SnVtcERpYWxvZyhjbSkge1xuICAgIHJldHVybiBjbS5waHJhc2UoJ0p1bXAgdG8gbGluZTonKVxuICAgICAgKyAnIDxpbnB1dCB0eXBlPVwidGV4dFwiIHN0eWxlPVwid2lkdGg6IDEwZW1cIiBjbGFzcz1cIkNvZGVNaXJyb3Itc2VhcmNoLWZpZWxkXCIvPiA8c3BhbiBzdHlsZT1cImNvbG9yOiAjODg4XCIgY2xhc3M9XCJDb2RlTWlycm9yLXNlYXJjaC1oaW50XCI+J1xuICAgICAgKyBjbS5waHJhc2UoJyhVc2UgbGluZTpjb2x1bW4gb3Igc2Nyb2xsJSBzeW50YXgpJykgKyAnPC9zcGFuPic7XG4gIH1cblxuICBmdW5jdGlvbiBpbnRlcnByZXRMaW5lKGNtLCBzdHJpbmcpIHtcbiAgICBjb25zdCBudW0gPSBOdW1iZXIoc3RyaW5nKTtcbiAgICBpZiAoL15bLStdLy50ZXN0KHN0cmluZykpIHtcbiAgICAgIHJldHVybiBjbS5nZXRDdXJzb3IoKVxuICAgICAgICAubGluZSArIG51bTtcbiAgICB9XG4gICAgcmV0dXJuIG51bSAtIDE7XG4gIH1cblxuICBDb2RlTWlycm9yLmNvbW1hbmRzLmp1bXBUb0xpbmUgPSBmdW5jdGlvbiAoY20pIHtcbiAgICBjb25zdCBjdXIgPSBjbS5nZXRDdXJzb3IoKTtcbiAgICBkaWFsb2coY20sIGdldEp1bXBEaWFsb2coY20pLCBjbS5waHJhc2UoJ0p1bXAgdG8gbGluZTonKSwgKGN1ci5saW5lICsgMSkgKyAnOicgKyBjdXIuY2gsIChwb3NTdHIpID0+IHtcbiAgICAgIGlmICghcG9zU3RyKSByZXR1cm47XG5cbiAgICAgIGxldCBtYXRjaDtcbiAgICAgIGlmIChtYXRjaCA9IC9eXFxzKihbXFwrXFwtXT9cXGQrKVxccypcXDpcXHMqKFxcZCspXFxzKiQvLmV4ZWMocG9zU3RyKSkge1xuICAgICAgICBjbS5zZXRDdXJzb3IoaW50ZXJwcmV0TGluZShjbSwgbWF0Y2hbMV0pLCBOdW1iZXIobWF0Y2hbMl0pKTtcbiAgICAgIH0gZWxzZSBpZiAobWF0Y2ggPSAvXlxccyooW1xcK1xcLV0/XFxkKyhcXC5cXGQrKT8pXFwlXFxzKi8uZXhlYyhwb3NTdHIpKSB7XG4gICAgICAgIGxldCBsaW5lID0gTWF0aC5yb3VuZChjbS5saW5lQ291bnQoKSAqIE51bWJlcihtYXRjaFsxXSkgLyAxMDApO1xuICAgICAgICBpZiAoL15bLStdLy50ZXN0KG1hdGNoWzFdKSkgbGluZSA9IGN1ci5saW5lICsgbGluZSArIDE7XG4gICAgICAgIGNtLnNldEN1cnNvcihsaW5lIC0gMSwgY3VyLmNoKTtcbiAgICAgIH0gZWxzZSBpZiAobWF0Y2ggPSAvXlxccypcXDo/XFxzKihbXFwrXFwtXT9cXGQrKVxccyovLmV4ZWMocG9zU3RyKSkge1xuICAgICAgICBjbS5zZXRDdXJzb3IoaW50ZXJwcmV0TGluZShjbSwgbWF0Y2hbMV0pLCBjdXIuY2gpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIENvZGVNaXJyb3Iua2V5TWFwLmRlZmF1bHRbJ0FsdC1HJ10gPSAnanVtcFRvTGluZSc7XG59XG4iLCAiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwczovL2NvZGVtaXJyb3IubmV0L0xJQ0VOU0VcblxuLy8gSGlnaGxpZ2h0aW5nIHRleHQgdGhhdCBtYXRjaGVzIHRoZSBzZWxlY3Rpb25cbi8vXG4vLyBEZWZpbmVzIGFuIG9wdGlvbiBoaWdobGlnaHRTZWxlY3Rpb25NYXRjaGVzLCB3aGljaCwgd2hlbiBlbmFibGVkLFxuLy8gd2lsbCBzdHlsZSBzdHJpbmdzIHRoYXQgbWF0Y2ggdGhlIHNlbGVjdGlvbiB0aHJvdWdob3V0IHRoZVxuLy8gZG9jdW1lbnQuXG4vL1xuLy8gVGhlIG9wdGlvbiBjYW4gYmUgc2V0IHRvIHRydWUgdG8gc2ltcGx5IGVuYWJsZSBpdCwgb3IgdG8gYVxuLy8ge21pbkNoYXJzLCBzdHlsZSwgd29yZHNPbmx5LCBzaG93VG9rZW4sIGRlbGF5fSBvYmplY3QgdG8gZXhwbGljaXRseVxuLy8gY29uZmlndXJlIGl0LiBtaW5DaGFycyBpcyB0aGUgbWluaW11bSBhbW91bnQgb2YgY2hhcmFjdGVycyB0aGF0IHNob3VsZCBiZVxuLy8gc2VsZWN0ZWQgZm9yIHRoZSBiZWhhdmlvciB0byBvY2N1ciwgYW5kIHN0eWxlIGlzIHRoZSB0b2tlbiBzdHlsZSB0b1xuLy8gYXBwbHkgdG8gdGhlIG1hdGNoZXMuIFRoaXMgd2lsbCBiZSBwcmVmaXhlZCBieSBcImNtLVwiIHRvIGNyZWF0ZSBhblxuLy8gYWN0dWFsIENTUyBjbGFzcyBuYW1lLiBJZiB3b3Jkc09ubHkgaXMgZW5hYmxlZCwgdGhlIG1hdGNoZXMgd2lsbCBiZVxuLy8gaGlnaGxpZ2h0ZWQgb25seSBpZiB0aGUgc2VsZWN0ZWQgdGV4dCBpcyBhIHdvcmQuIHNob3dUb2tlbiwgd2hlbiBlbmFibGVkLFxuLy8gd2lsbCBjYXVzZSB0aGUgY3VycmVudCB0b2tlbiB0byBiZSBoaWdobGlnaHRlZCB3aGVuIG5vdGhpbmcgaXMgc2VsZWN0ZWQuXG4vLyBkZWxheSBpcyB1c2VkIHRvIHNwZWNpZnkgaG93IG11Y2ggdGltZSB0byB3YWl0LCBpbiBtaWxsaXNlY29uZHMsIGJlZm9yZVxuLy8gaGlnaGxpZ2h0aW5nIHRoZSBtYXRjaGVzLiBJZiBhbm5vdGF0ZVNjcm9sbGJhciBpcyBlbmFibGVkLCB0aGUgb2NjdXJlbmNlc1xuLy8gd2lsbCBiZSBoaWdobGlnaHRlZCBvbiB0aGUgc2Nyb2xsYmFyIHZpYSB0aGUgbWF0Y2hlc29uc2Nyb2xsYmFyIGFkZG9uLlxuXG5leHBvcnQgZnVuY3Rpb24gYWRkTWF0Y2hoaWdobGlnaHRlcihDb2RlTWlycm9yKSB7XG5cbiAgY29uc3QgZGVmYXVsdHMgPSB7XG4gICAgc3R5bGU6ICdtYXRjaGhpZ2hsaWdodCcsXG4gICAgbWluQ2hhcnM6IDIsXG4gICAgZGVsYXk6IDEwMCxcbiAgICB3b3Jkc09ubHk6IGZhbHNlLFxuICAgIGFubm90YXRlU2Nyb2xsYmFyOiBmYWxzZSxcbiAgICBzaG93VG9rZW46IGZhbHNlLFxuICAgIHRyaW06IHRydWUsXG4gIH07XG5cbiAgZnVuY3Rpb24gU3RhdGUob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IHt9O1xuICAgIGZvciAoY29uc3QgbmFtZSBpbiBkZWZhdWx0cykge1xuICAgICAgdGhpcy5vcHRpb25zW25hbWVdID0gKG9wdGlvbnMgJiYgb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShuYW1lKSA/IG9wdGlvbnMgOiBkZWZhdWx0cylbbmFtZV07XG4gICAgfVxuICAgIHRoaXMub3ZlcmxheSA9IHRoaXMudGltZW91dCA9IG51bGw7XG4gICAgdGhpcy5tYXRjaGVzb25zY3JvbGwgPSBudWxsO1xuICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gIH1cblxuICBDb2RlTWlycm9yLmRlZmluZU9wdGlvbignaGlnaGxpZ2h0U2VsZWN0aW9uTWF0Y2hlcycsIGZhbHNlLCAoY20sIHZhbCwgb2xkKSA9PiB7XG4gICAgaWYgKG9sZCAmJiBvbGQgIT0gQ29kZU1pcnJvci5Jbml0KSB7XG4gICAgICByZW1vdmVPdmVybGF5KGNtKTtcbiAgICAgIGNsZWFyVGltZW91dChjbS5zdGF0ZS5tYXRjaEhpZ2hsaWdodGVyLnRpbWVvdXQpO1xuICAgICAgY20uc3RhdGUubWF0Y2hIaWdobGlnaHRlciA9IG51bGw7XG4gICAgICBjbS5vZmYoJ2N1cnNvckFjdGl2aXR5JywgY3Vyc29yQWN0aXZpdHkpO1xuICAgICAgY20ub2ZmKCdmb2N1cycsIG9uRm9jdXMpO1xuICAgIH1cbiAgICBpZiAodmFsKSB7XG4gICAgICBjb25zdCBzdGF0ZSA9IGNtLnN0YXRlLm1hdGNoSGlnaGxpZ2h0ZXIgPSBuZXcgU3RhdGUodmFsKTtcbiAgICAgIGlmIChjbS5oYXNGb2N1cygpKSB7XG4gICAgICAgIHN0YXRlLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIGhpZ2hsaWdodE1hdGNoZXMoY20pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY20ub24oJ2ZvY3VzJywgb25Gb2N1cyk7XG4gICAgICB9XG4gICAgICBjbS5vbignY3Vyc29yQWN0aXZpdHknLCBjdXJzb3JBY3Rpdml0eSk7XG4gICAgfVxuICB9KTtcblxuICBmdW5jdGlvbiBjdXJzb3JBY3Rpdml0eShjbSkge1xuICAgIGNvbnN0IHN0YXRlID0gY20uc3RhdGUubWF0Y2hIaWdobGlnaHRlcjtcbiAgICBpZiAoc3RhdGUuYWN0aXZlIHx8IGNtLmhhc0ZvY3VzKCkpIHNjaGVkdWxlSGlnaGxpZ2h0KGNtLCBzdGF0ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkZvY3VzKGNtKSB7XG4gICAgY29uc3Qgc3RhdGUgPSBjbS5zdGF0ZS5tYXRjaEhpZ2hsaWdodGVyO1xuICAgIGlmICghc3RhdGUuYWN0aXZlKSB7XG4gICAgICBzdGF0ZS5hY3RpdmUgPSB0cnVlO1xuICAgICAgc2NoZWR1bGVIaWdobGlnaHQoY20sIHN0YXRlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzY2hlZHVsZUhpZ2hsaWdodChjbSwgc3RhdGUpIHtcbiAgICBjbGVhclRpbWVvdXQoc3RhdGUudGltZW91dCk7XG4gICAgc3RhdGUudGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaGlnaGxpZ2h0TWF0Y2hlcyhjbSk7XG4gICAgfSwgc3RhdGUub3B0aW9ucy5kZWxheSk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRPdmVybGF5KGNtLCBxdWVyeSwgaGFzQm91bmRhcnksIHN0eWxlKSB7XG4gICAgY29uc3Qgc3RhdGUgPSBjbS5zdGF0ZS5tYXRjaEhpZ2hsaWdodGVyO1xuICAgIGNtLmFkZE92ZXJsYXkoc3RhdGUub3ZlcmxheSA9IG1ha2VPdmVybGF5KHF1ZXJ5LCBoYXNCb3VuZGFyeSwgc3R5bGUpKTtcbiAgICBpZiAoc3RhdGUub3B0aW9ucy5hbm5vdGF0ZVNjcm9sbGJhciAmJiBjbS5zaG93TWF0Y2hlc09uU2Nyb2xsYmFyKSB7XG4gICAgICBjb25zdCBzZWFyY2hGb3IgPSBoYXNCb3VuZGFyeSA/IG5ldyBSZWdFeHAoJ1xcXFxiJyArIHF1ZXJ5LnJlcGxhY2UoL1tcXFxcXFxbLisqPygpe3xeJF0vZywgJ1xcXFwkJicpICsgJ1xcXFxiJylcbiAgICAgICAgOiBxdWVyeTtcbiAgICAgIHN0YXRlLm1hdGNoZXNvbnNjcm9sbCA9IGNtLnNob3dNYXRjaGVzT25TY3JvbGxiYXIoc2VhcmNoRm9yLCBmYWxzZSwge1xuICAgICAgICBjbGFzc05hbWU6ICdDb2RlTWlycm9yLXNlbGVjdGlvbi1oaWdobGlnaHQtc2Nyb2xsYmFyJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZU92ZXJsYXkoY20pIHtcbiAgICBjb25zdCBzdGF0ZSA9IGNtLnN0YXRlLm1hdGNoSGlnaGxpZ2h0ZXI7XG4gICAgaWYgKHN0YXRlLm92ZXJsYXkpIHtcbiAgICAgIGNtLnJlbW92ZU92ZXJsYXkoc3RhdGUub3ZlcmxheSk7XG4gICAgICBzdGF0ZS5vdmVybGF5ID0gbnVsbDtcbiAgICAgIGlmIChzdGF0ZS5tYXRjaGVzb25zY3JvbGwpIHtcbiAgICAgICAgc3RhdGUubWF0Y2hlc29uc2Nyb2xsLmNsZWFyKCk7XG4gICAgICAgIHN0YXRlLm1hdGNoZXNvbnNjcm9sbCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGlnaGxpZ2h0TWF0Y2hlcyhjbSkge1xuICAgIGNtLm9wZXJhdGlvbigoKSA9PiB7XG4gICAgICBjb25zdCBzdGF0ZSA9IGNtLnN0YXRlLm1hdGNoSGlnaGxpZ2h0ZXI7XG4gICAgICByZW1vdmVPdmVybGF5KGNtKTtcbiAgICAgIGlmICghY20uc29tZXRoaW5nU2VsZWN0ZWQoKSAmJiBzdGF0ZS5vcHRpb25zLnNob3dUb2tlbikge1xuICAgICAgICBjb25zdCByZSA9IHN0YXRlLm9wdGlvbnMuc2hvd1Rva2VuID09PSB0cnVlID8gL1tcXHckXS8gOiBzdGF0ZS5vcHRpb25zLnNob3dUb2tlbjtcbiAgICAgICAgY29uc3QgY3VyID0gY20uZ2V0Q3Vyc29yKCk7XG4gICAgICAgIGNvbnN0IGxpbmUgPSBjbS5nZXRMaW5lKGN1ci5saW5lKTtcbiAgICAgICAgbGV0IHN0YXJ0ID0gY3VyLmNoO1xuICAgICAgICBsZXQgZW5kID0gc3RhcnQ7XG4gICAgICAgIHdoaWxlIChzdGFydCAmJiByZS50ZXN0KGxpbmUuY2hhckF0KHN0YXJ0IC0gMSkpKSAtLXN0YXJ0O1xuICAgICAgICB3aGlsZSAoZW5kIDwgbGluZS5sZW5ndGggJiYgcmUudGVzdChsaW5lLmNoYXJBdChlbmQpKSkgKytlbmQ7XG4gICAgICAgIGlmIChzdGFydCA8IGVuZCkge1xuICAgICAgICAgIGFkZE92ZXJsYXkoY20sIGxpbmUuc2xpY2Uoc3RhcnQsIGVuZCksIHJlLCBzdGF0ZS5vcHRpb25zLnN0eWxlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBmcm9tID0gY20uZ2V0Q3Vyc29yKCdmcm9tJyk7XG4gICAgICBjb25zdCB0byA9IGNtLmdldEN1cnNvcigndG8nKTtcbiAgICAgIGlmIChmcm9tLmxpbmUgIT0gdG8ubGluZSkgcmV0dXJuO1xuICAgICAgaWYgKHN0YXRlLm9wdGlvbnMud29yZHNPbmx5ICYmICFpc1dvcmQoY20sIGZyb20sIHRvKSkgcmV0dXJuO1xuICAgICAgbGV0IHNlbGVjdGlvbiA9IGNtLmdldFJhbmdlKGZyb20sIHRvKTtcbiAgICAgIGlmIChzdGF0ZS5vcHRpb25zLnRyaW0pIHNlbGVjdGlvbiA9IHNlbGVjdGlvbi5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG4gICAgICBpZiAoc2VsZWN0aW9uLmxlbmd0aCA+PSBzdGF0ZS5vcHRpb25zLm1pbkNoYXJzKSB7XG4gICAgICAgIGFkZE92ZXJsYXkoY20sIHNlbGVjdGlvbiwgZmFsc2UsIHN0YXRlLm9wdGlvbnMuc3R5bGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNXb3JkKGNtLCBmcm9tLCB0bykge1xuICAgIGNvbnN0IHN0ciA9IGNtLmdldFJhbmdlKGZyb20sIHRvKTtcbiAgICBpZiAoc3RyLm1hdGNoKC9eXFx3KyQvKSAhPT0gbnVsbCkge1xuICAgICAgaWYgKGZyb20uY2ggPiAwKSB7XG4gICAgICAgIHZhciBwb3MgPSB7XG4gICAgICAgICAgbGluZTogZnJvbS5saW5lLFxuICAgICAgICAgIGNoOiBmcm9tLmNoIC0gMSxcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGNociA9IGNtLmdldFJhbmdlKHBvcywgZnJvbSk7XG4gICAgICAgIGlmIChjaHIubWF0Y2goL1xcVy8pID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAodG8uY2ggPCBjbS5nZXRMaW5lKGZyb20ubGluZSlcbiAgICAgICAgLmxlbmd0aCkge1xuICAgICAgICB2YXIgcG9zID0ge1xuICAgICAgICAgIGxpbmU6IHRvLmxpbmUsXG4gICAgICAgICAgY2g6IHRvLmNoICsgMSxcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGNociA9IGNtLmdldFJhbmdlKHRvLCBwb3MpO1xuICAgICAgICBpZiAoY2hyLm1hdGNoKC9cXFcvKSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJvdW5kYXJpZXNBcm91bmQoc3RyZWFtLCByZSkge1xuICAgIHJldHVybiAoIXN0cmVhbS5zdGFydCB8fCAhcmUudGVzdChzdHJlYW0uc3RyaW5nLmNoYXJBdChzdHJlYW0uc3RhcnQgLSAxKSkpXG4gICAgICAmJiAoc3RyZWFtLnBvcyA9PSBzdHJlYW0uc3RyaW5nLmxlbmd0aCB8fCAhcmUudGVzdChzdHJlYW0uc3RyaW5nLmNoYXJBdChzdHJlYW0ucG9zKSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gbWFrZU92ZXJsYXkocXVlcnksIGhhc0JvdW5kYXJ5LCBzdHlsZSkge1xuICAgIHJldHVybiB7XG4gICAgICB0b2tlbihzdHJlYW0pIHtcbiAgICAgICAgaWYgKHN0cmVhbS5tYXRjaChxdWVyeSlcbiAgICAgICAgICAmJiAoIWhhc0JvdW5kYXJ5IHx8IGJvdW5kYXJpZXNBcm91bmQoc3RyZWFtLCBoYXNCb3VuZGFyeSkpKSB7XG4gICAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgICB9XG4gICAgICAgIHN0cmVhbS5uZXh0KCk7XG4gICAgICAgIHN0cmVhbS5za2lwVG8ocXVlcnkuY2hhckF0KDApKSB8fCBzdHJlYW0uc2tpcFRvRW5kKCk7XG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cbiIsICIvLyBDb2RlTWlycm9yLCBjb3B5cmlnaHQgKGMpIGJ5IE1hcmlqbiBIYXZlcmJla2UgYW5kIG90aGVyc1xuLy8gRGlzdHJpYnV0ZWQgdW5kZXIgYW4gTUlUIGxpY2Vuc2U6IGh0dHBzOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkTWF0Y2hlc29uc2Nyb2xsKENvZGVNaXJyb3IpIHtcblxuICBDb2RlTWlycm9yLmRlZmluZUV4dGVuc2lvbignc2hvd01hdGNoZXNPblNjcm9sbGJhcicsIGZ1bmN0aW9uIChxdWVyeSwgY2FzZUZvbGQsIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnKSB7XG4gICAgICBvcHRpb25zID0ge1xuICAgICAgICBjbGFzc05hbWU6IG9wdGlvbnMsXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSB7fTtcbiAgICByZXR1cm4gbmV3IFNlYXJjaEFubm90YXRpb24odGhpcywgcXVlcnksIGNhc2VGb2xkLCBvcHRpb25zKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gU2VhcmNoQW5ub3RhdGlvbihjbSwgcXVlcnksIGNhc2VGb2xkLCBvcHRpb25zKSB7XG4gICAgdGhpcy5jbSA9IGNtO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgY29uc3QgYW5ub3RhdGVPcHRpb25zID0ge1xuICAgICAgbGlzdGVuRm9yQ2hhbmdlczogZmFsc2UsXG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IHByb3AgaW4gb3B0aW9ucykgYW5ub3RhdGVPcHRpb25zW3Byb3BdID0gb3B0aW9uc1twcm9wXTtcbiAgICBpZiAoIWFubm90YXRlT3B0aW9ucy5jbGFzc05hbWUpIGFubm90YXRlT3B0aW9ucy5jbGFzc05hbWUgPSAnQ29kZU1pcnJvci1zZWFyY2gtbWF0Y2gnO1xuICAgIHRoaXMuYW5ub3RhdGlvbiA9IGNtLmFubm90YXRlU2Nyb2xsYmFyKGFubm90YXRlT3B0aW9ucyk7XG4gICAgdGhpcy5xdWVyeSA9IHF1ZXJ5O1xuICAgIHRoaXMuY2FzZUZvbGQgPSBjYXNlRm9sZDtcbiAgICB0aGlzLmdhcCA9IHtcbiAgICAgIGZyb206IGNtLmZpcnN0TGluZSgpLFxuICAgICAgdG86IGNtLmxhc3RMaW5lKCkgKyAxLFxuICAgIH07XG4gICAgdGhpcy5tYXRjaGVzID0gW107XG4gICAgdGhpcy51cGRhdGUgPSBudWxsO1xuXG4gICAgdGhpcy5maW5kTWF0Y2hlcygpO1xuICAgIHRoaXMuYW5ub3RhdGlvbi51cGRhdGUodGhpcy5tYXRjaGVzKTtcblxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIGNtLm9uKCdjaGFuZ2UnLCB0aGlzLmNoYW5nZUhhbmRsZXIgPSBmdW5jdGlvbiAoX2NtLCBjaGFuZ2UpIHtcbiAgICAgIHNlbGYub25DaGFuZ2UoY2hhbmdlKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IE1BWF9NQVRDSEVTID0gMTAwMDtcblxuICBTZWFyY2hBbm5vdGF0aW9uLnByb3RvdHlwZS5maW5kTWF0Y2hlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuZ2FwKSByZXR1cm47XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1hdGNoZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBtYXRjaCA9IHRoaXMubWF0Y2hlc1tpXTtcbiAgICAgIGlmIChtYXRjaC5mcm9tLmxpbmUgPj0gdGhpcy5nYXAudG8pIGJyZWFrO1xuICAgICAgaWYgKG1hdGNoLnRvLmxpbmUgPj0gdGhpcy5nYXAuZnJvbSkgdGhpcy5tYXRjaGVzLnNwbGljZShpLS0sIDEpO1xuICAgIH1cbiAgICBjb25zdCBjdXJzb3IgPSB0aGlzLmNtLmdldFNlYXJjaEN1cnNvcih0aGlzLnF1ZXJ5LCBDb2RlTWlycm9yLlBvcyh0aGlzLmdhcC5mcm9tLCAwKSwge1xuICAgICAgY2FzZUZvbGQ6IHRoaXMuY2FzZUZvbGQsXG4gICAgICBtdWx0aWxpbmU6IHRoaXMub3B0aW9ucy5tdWx0aWxpbmUsXG4gICAgfSk7XG4gICAgY29uc3QgbWF4TWF0Y2hlcyA9IHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMubWF4TWF0Y2hlcyB8fCBNQVhfTUFUQ0hFUztcbiAgICB3aGlsZSAoY3Vyc29yLmZpbmROZXh0KCkpIHtcbiAgICAgIHZhciBtYXRjaCA9IHtcbiAgICAgICAgZnJvbTogY3Vyc29yLmZyb20oKSxcbiAgICAgICAgdG86IGN1cnNvci50bygpLFxuICAgICAgfTtcbiAgICAgIGlmIChtYXRjaC5mcm9tLmxpbmUgPj0gdGhpcy5nYXAudG8pIGJyZWFrO1xuICAgICAgdGhpcy5tYXRjaGVzLnNwbGljZShpKyssIDAsIG1hdGNoKTtcbiAgICAgIGlmICh0aGlzLm1hdGNoZXMubGVuZ3RoID4gbWF4TWF0Y2hlcykgYnJlYWs7XG4gICAgfVxuICAgIHRoaXMuZ2FwID0gbnVsbDtcbiAgfTtcblxuICBmdW5jdGlvbiBvZmZzZXRMaW5lKGxpbmUsIGNoYW5nZVN0YXJ0LCBzaXplQ2hhbmdlKSB7XG4gICAgaWYgKGxpbmUgPD0gY2hhbmdlU3RhcnQpIHJldHVybiBsaW5lO1xuICAgIHJldHVybiBNYXRoLm1heChjaGFuZ2VTdGFydCwgbGluZSArIHNpemVDaGFuZ2UpO1xuICB9XG5cbiAgU2VhcmNoQW5ub3RhdGlvbi5wcm90b3R5cGUub25DaGFuZ2UgPSBmdW5jdGlvbiAoY2hhbmdlKSB7XG4gICAgY29uc3Qgc3RhcnRMaW5lID0gY2hhbmdlLmZyb20ubGluZTtcbiAgICBjb25zdCBlbmRMaW5lID0gQ29kZU1pcnJvci5jaGFuZ2VFbmQoY2hhbmdlKVxuICAgICAgLmxpbmU7XG4gICAgY29uc3Qgc2l6ZUNoYW5nZSA9IGVuZExpbmUgLSBjaGFuZ2UudG8ubGluZTtcbiAgICBpZiAodGhpcy5nYXApIHtcbiAgICAgIHRoaXMuZ2FwLmZyb20gPSBNYXRoLm1pbihvZmZzZXRMaW5lKHRoaXMuZ2FwLmZyb20sIHN0YXJ0TGluZSwgc2l6ZUNoYW5nZSksIGNoYW5nZS5mcm9tLmxpbmUpO1xuICAgICAgdGhpcy5nYXAudG8gPSBNYXRoLm1heChvZmZzZXRMaW5lKHRoaXMuZ2FwLnRvLCBzdGFydExpbmUsIHNpemVDaGFuZ2UpLCBjaGFuZ2UuZnJvbS5saW5lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5nYXAgPSB7XG4gICAgICAgIGZyb206IGNoYW5nZS5mcm9tLmxpbmUsXG4gICAgICAgIHRvOiBlbmRMaW5lICsgMSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHNpemVDaGFuZ2UpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tYXRjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gdGhpcy5tYXRjaGVzW2ldO1xuICAgICAgICBjb25zdCBuZXdGcm9tID0gb2Zmc2V0TGluZShtYXRjaC5mcm9tLmxpbmUsIHN0YXJ0TGluZSwgc2l6ZUNoYW5nZSk7XG4gICAgICAgIGlmIChuZXdGcm9tICE9IG1hdGNoLmZyb20ubGluZSkgbWF0Y2guZnJvbSA9IENvZGVNaXJyb3IuUG9zKG5ld0Zyb20sIG1hdGNoLmZyb20uY2gpO1xuICAgICAgICBjb25zdCBuZXdUbyA9IG9mZnNldExpbmUobWF0Y2gudG8ubGluZSwgc3RhcnRMaW5lLCBzaXplQ2hhbmdlKTtcbiAgICAgICAgaWYgKG5ld1RvICE9IG1hdGNoLnRvLmxpbmUpIG1hdGNoLnRvID0gQ29kZU1pcnJvci5Qb3MobmV3VG8sIG1hdGNoLnRvLmNoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudXBkYXRlKTtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICB0aGlzLnVwZGF0ZSA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc2VsZi51cGRhdGVBZnRlckNoYW5nZSgpO1xuICAgIH0sIDI1MCk7XG4gIH07XG5cbiAgU2VhcmNoQW5ub3RhdGlvbi5wcm90b3R5cGUudXBkYXRlQWZ0ZXJDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5maW5kTWF0Y2hlcygpO1xuICAgIHRoaXMuYW5ub3RhdGlvbi51cGRhdGUodGhpcy5tYXRjaGVzKTtcbiAgfTtcblxuICBTZWFyY2hBbm5vdGF0aW9uLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmNtLm9mZignY2hhbmdlJywgdGhpcy5jaGFuZ2VIYW5kbGVyKTtcbiAgICB0aGlzLmFubm90YXRpb24uY2xlYXIoKTtcbiAgfTtcbn1cbiIsICIvLyBDb2RlTWlycm9yLCBjb3B5cmlnaHQgKGMpIGJ5IE1hcmlqbiBIYXZlcmJla2UgYW5kIG90aGVyc1xuLy8gRGlzdHJpYnV0ZWQgdW5kZXIgYW4gTUlUIGxpY2Vuc2U6IGh0dHBzOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxuXG4vLyBEZWZpbmUgc2VhcmNoIGNvbW1hbmRzLiBEZXBlbmRzIG9uIGRpYWxvZy5qcyBvciBhbm90aGVyXG4vLyBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgb3BlbkRpYWxvZyBtZXRob2QuXG5cbi8vIFJlcGxhY2Ugd29ya3MgYSBsaXR0bGUgb2RkbHkgLS0gaXQgd2lsbCBkbyB0aGUgcmVwbGFjZSBvbiB0aGUgbmV4dFxuLy8gQ3RybC1HIChvciB3aGF0ZXZlciBpcyBib3VuZCB0byBmaW5kTmV4dCkgcHJlc3MuIFlvdSBwcmV2ZW50IGFcbi8vIHJlcGxhY2UgYnkgbWFraW5nIHN1cmUgdGhlIG1hdGNoIGlzIG5vIGxvbmdlciBzZWxlY3RlZCB3aGVuIGhpdHRpbmdcbi8vIEN0cmwtRy5cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZFNlYXJjaChDb2RlTWlycm9yKSB7XG5cbiAgZnVuY3Rpb24gc2VhcmNoT3ZlcmxheShxdWVyeSwgY2FzZUluc2Vuc2l0aXZlKSB7XG4gICAgaWYgKHR5cGVvZiBxdWVyeSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHF1ZXJ5ID0gbmV3IFJlZ0V4cChxdWVyeS5yZXBsYWNlKC9bXFwtXFxbXFxdXFwvXFx7XFx9XFwoXFwpXFwqXFwrXFw/XFwuXFxcXFxcXlxcJFxcfF0vZywgJ1xcXFwkJicpLCBjYXNlSW5zZW5zaXRpdmUgPyAnZ2knXG4gICAgICAgIDogJ2cnKTtcbiAgICB9IGVsc2UgaWYgKCFxdWVyeS5nbG9iYWwpIHtcbiAgICAgIHF1ZXJ5ID0gbmV3IFJlZ0V4cChxdWVyeS5zb3VyY2UsIHF1ZXJ5Lmlnbm9yZUNhc2UgPyAnZ2knIDogJ2cnKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG9rZW4oc3RyZWFtKSB7XG4gICAgICAgIHF1ZXJ5Lmxhc3RJbmRleCA9IHN0cmVhbS5wb3M7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gcXVlcnkuZXhlYyhzdHJlYW0uc3RyaW5nKTtcbiAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoLmluZGV4ID09IHN0cmVhbS5wb3MpIHtcbiAgICAgICAgICBzdHJlYW0ucG9zICs9IG1hdGNoWzBdLmxlbmd0aCB8fCAxO1xuICAgICAgICAgIHJldHVybiAnc2VhcmNoaW5nJztcbiAgICAgICAgfVxuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICBzdHJlYW0ucG9zID0gbWF0Y2guaW5kZXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyZWFtLnNraXBUb0VuZCgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBTZWFyY2hTdGF0ZSgpIHtcbiAgICB0aGlzLnBvc0Zyb20gPSB0aGlzLnBvc1RvID0gdGhpcy5sYXN0UXVlcnkgPSB0aGlzLnF1ZXJ5ID0gbnVsbDtcbiAgICB0aGlzLm92ZXJsYXkgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0U2VhcmNoU3RhdGUoY20pIHtcbiAgICByZXR1cm4gY20uc3RhdGUuc2VhcmNoIHx8IChjbS5zdGF0ZS5zZWFyY2ggPSBuZXcgU2VhcmNoU3RhdGUoKSk7XG4gIH1cblxuICBmdW5jdGlvbiBxdWVyeUNhc2VJbnNlbnNpdGl2ZShxdWVyeSkge1xuICAgIHJldHVybiB0eXBlb2YgcXVlcnkgPT09ICdzdHJpbmcnICYmIHF1ZXJ5ID09IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRTZWFyY2hDdXJzb3IoY20sIHF1ZXJ5LCBwb3MpIHtcbiAgICAvLyBIZXVyaXN0aWM6IGlmIHRoZSBxdWVyeSBzdHJpbmcgaXMgYWxsIGxvd2VyY2FzZSwgZG8gYSBjYXNlIGluc2Vuc2l0aXZlIHNlYXJjaC5cbiAgICByZXR1cm4gY20uZ2V0U2VhcmNoQ3Vyc29yKHF1ZXJ5LCBwb3MsIHtcbiAgICAgIGNhc2VGb2xkOiBxdWVyeUNhc2VJbnNlbnNpdGl2ZShxdWVyeSksXG4gICAgICBtdWx0aWxpbmU6IHRydWUsXG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwZXJzaXN0ZW50RGlhbG9nKGNtLCB0ZXh0LCBkZWZsdCwgb25FbnRlciwgb25LZXlEb3duKSB7XG4gICAgY20ub3BlbkRpYWxvZyh0ZXh0LCBvbkVudGVyLCB7XG4gICAgICB2YWx1ZTogZGVmbHQsXG4gICAgICBzZWxlY3RWYWx1ZU9uT3BlbjogdHJ1ZSxcbiAgICAgIGNsb3NlT25FbnRlcjogZmFsc2UsXG4gICAgICBvbkNsb3NlKCkge1xuICAgICAgICBjbGVhclNlYXJjaChjbSk7XG4gICAgICB9LFxuICAgICAgb25LZXlEb3duLFxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlhbG9nKGNtLCB0ZXh0LCBzaG9ydFRleHQsIGRlZmx0LCBmKSB7XG4gICAgaWYgKGNtLm9wZW5EaWFsb2cpIHtcbiAgICAgIGNtLm9wZW5EaWFsb2codGV4dCwgZiwge1xuICAgICAgICB2YWx1ZTogZGVmbHQsXG4gICAgICAgIHNlbGVjdFZhbHVlT25PcGVuOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGYocHJvbXB0KHNob3J0VGV4dCwgZGVmbHQpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbmZpcm1EaWFsb2coY20sIHRleHQsIHNob3J0VGV4dCwgZnMpIHtcbiAgICBpZiAoY20ub3BlbkNvbmZpcm0pIGNtLm9wZW5Db25maXJtKHRleHQsIGZzKTtcbiAgICBlbHNlIGlmIChjb25maXJtKHNob3J0VGV4dCkpIGZzWzBdKCk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZVN0cmluZyhzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xcXFwoW25ydFxcXFxdKS9nLCAobWF0Y2gsIGNoKSA9PiB7XG4gICAgICBpZiAoY2ggPT0gJ24nKSByZXR1cm4gJ1xcbic7XG4gICAgICBpZiAoY2ggPT0gJ3InKSByZXR1cm4gJ1xccic7XG4gICAgICBpZiAoY2ggPT0gJ3QnKSByZXR1cm4gJ1xcdCc7XG4gICAgICBpZiAoY2ggPT0gJ1xcXFwnKSByZXR1cm4gJ1xcXFwnO1xuICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VRdWVyeShxdWVyeSkge1xuICAgIGNvbnN0IGlzUkUgPSBxdWVyeS5tYXRjaCgvXlxcLyguKilcXC8oW2Etel0qKSQvKTtcbiAgICBpZiAoaXNSRSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcXVlcnkgPSBuZXcgUmVnRXhwKGlzUkVbMV0sIGlzUkVbMl0uaW5kZXhPZignaScpID09IC0xID8gJycgOiAnaScpO1xuICAgICAgfSBjYXRjaCAoZSkgeyB9IC8vIE5vdCBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBhZnRlciBhbGwsIGRvIGEgc3RyaW5nIHNlYXJjaFxuICAgIH0gZWxzZSB7XG4gICAgICBxdWVyeSA9IHBhcnNlU3RyaW5nKHF1ZXJ5KTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBxdWVyeSA9PT0gJ3N0cmluZycgPyBxdWVyeSA9PSAnJyA6IHF1ZXJ5LnRlc3QoJycpKSB7XG4gICAgICBxdWVyeSA9IC94Xi87XG4gICAgfVxuICAgIHJldHVybiBxdWVyeTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0YXJ0U2VhcmNoKGNtLCBzdGF0ZSwgcXVlcnkpIHtcbiAgICBzdGF0ZS5xdWVyeVRleHQgPSBxdWVyeTtcbiAgICBzdGF0ZS5xdWVyeSA9IHBhcnNlUXVlcnkocXVlcnkpO1xuICAgIGNtLnJlbW92ZU92ZXJsYXkoc3RhdGUub3ZlcmxheSwgcXVlcnlDYXNlSW5zZW5zaXRpdmUoc3RhdGUucXVlcnkpKTtcbiAgICBzdGF0ZS5vdmVybGF5ID0gc2VhcmNoT3ZlcmxheShzdGF0ZS5xdWVyeSwgcXVlcnlDYXNlSW5zZW5zaXRpdmUoc3RhdGUucXVlcnkpKTtcbiAgICBjbS5hZGRPdmVybGF5KHN0YXRlLm92ZXJsYXkpO1xuICAgIGlmIChjbS5zaG93TWF0Y2hlc09uU2Nyb2xsYmFyKSB7XG4gICAgICBpZiAoc3RhdGUuYW5ub3RhdGUpIHtcbiAgICAgICAgc3RhdGUuYW5ub3RhdGUuY2xlYXIoKTtcbiAgICAgICAgc3RhdGUuYW5ub3RhdGUgPSBudWxsO1xuICAgICAgfVxuICAgICAgc3RhdGUuYW5ub3RhdGUgPSBjbS5zaG93TWF0Y2hlc09uU2Nyb2xsYmFyKHN0YXRlLnF1ZXJ5LCBxdWVyeUNhc2VJbnNlbnNpdGl2ZShzdGF0ZS5xdWVyeSkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRvU2VhcmNoKGNtLCByZXYsIHBlcnNpc3RlbnQsIGltbWVkaWF0ZSkge1xuICAgIGNvbnN0IHN0YXRlID0gZ2V0U2VhcmNoU3RhdGUoY20pO1xuICAgIGlmIChzdGF0ZS5xdWVyeSkgcmV0dXJuIGZpbmROZXh0KGNtLCByZXYpO1xuICAgIGxldCBxID0gY20uZ2V0U2VsZWN0aW9uKCkgfHwgc3RhdGUubGFzdFF1ZXJ5O1xuICAgIGlmIChxIGluc3RhbmNlb2YgUmVnRXhwICYmIHEuc291cmNlID09ICd4XicpIHEgPSBudWxsO1xuICAgIGlmIChwZXJzaXN0ZW50ICYmIGNtLm9wZW5EaWFsb2cpIHtcbiAgICAgIGxldCBoaWRpbmcgPSBudWxsO1xuICAgICAgY29uc3Qgc2VhcmNoTmV4dCA9IGZ1bmN0aW9uIChxdWVyeSwgZXZlbnQpIHtcbiAgICAgICAgQ29kZU1pcnJvci5lX3N0b3AoZXZlbnQpO1xuICAgICAgICBpZiAoIXF1ZXJ5KSByZXR1cm47XG4gICAgICAgIGlmIChxdWVyeSAhPSBzdGF0ZS5xdWVyeVRleHQpIHtcbiAgICAgICAgICBzdGFydFNlYXJjaChjbSwgc3RhdGUsIHF1ZXJ5KTtcbiAgICAgICAgICBzdGF0ZS5wb3NGcm9tID0gc3RhdGUucG9zVG8gPSBjbS5nZXRDdXJzb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGlkaW5nKSBoaWRpbmcuc3R5bGUub3BhY2l0eSA9IDE7XG4gICAgICAgIGZpbmROZXh0KGNtLCBldmVudC5zaGlmdEtleSwgKF8sIHRvKSA9PiB7XG4gICAgICAgICAgbGV0IGRpYWxvZztcbiAgICAgICAgICBpZiAodG8ubGluZSA8IDMgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvclxuICAgICAgICAgICAgJiYgKGRpYWxvZyA9IGNtLmRpc3BsYXkud3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuQ29kZU1pcnJvci1kaWFsb2cnKSlcbiAgICAgICAgICAgICYmIGRpYWxvZy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICAgICAgICAuYm90dG9tIC0gNCA+IGNtLmN1cnNvckNvb3Jkcyh0bywgJ3dpbmRvdycpXG4gICAgICAgICAgICAgIC50b3ApIHtcbiAgICAgICAgICAgIChoaWRpbmcgPSBkaWFsb2cpXG4gICAgICAgICAgICAgIC5zdHlsZS5vcGFjaXR5ID0gMC40O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgcGVyc2lzdGVudERpYWxvZyhjbSwgZ2V0UXVlcnlEaWFsb2coY20pLCBxLCBzZWFyY2hOZXh0LCAoZXZlbnQsIHF1ZXJ5KSA9PiB7XG4gICAgICAgIGNvbnN0IGtleU5hbWUgPSBDb2RlTWlycm9yLmtleU5hbWUoZXZlbnQpO1xuICAgICAgICBjb25zdCBleHRyYSA9IGNtLmdldE9wdGlvbignZXh0cmFLZXlzJyk7XG4gICAgICAgIGNvbnN0IGNtZCA9IChleHRyYSAmJiBleHRyYVtrZXlOYW1lXSkgfHwgQ29kZU1pcnJvci5rZXlNYXBbY20uZ2V0T3B0aW9uKCdrZXlNYXAnKV1ba2V5TmFtZV07XG4gICAgICAgIGlmIChjbWQgPT0gJ2ZpbmROZXh0JyB8fCBjbWQgPT0gJ2ZpbmRQcmV2J1xuICAgICAgICAgIHx8IGNtZCA9PSAnZmluZFBlcnNpc3RlbnROZXh0JyB8fCBjbWQgPT0gJ2ZpbmRQZXJzaXN0ZW50UHJldicpIHtcbiAgICAgICAgICBDb2RlTWlycm9yLmVfc3RvcChldmVudCk7XG4gICAgICAgICAgc3RhcnRTZWFyY2goY20sIGdldFNlYXJjaFN0YXRlKGNtKSwgcXVlcnkpO1xuICAgICAgICAgIGNtLmV4ZWNDb21tYW5kKGNtZCk7XG4gICAgICAgIH0gZWxzZSBpZiAoY21kID09ICdmaW5kJyB8fCBjbWQgPT0gJ2ZpbmRQZXJzaXN0ZW50Jykge1xuICAgICAgICAgIENvZGVNaXJyb3IuZV9zdG9wKGV2ZW50KTtcbiAgICAgICAgICBzZWFyY2hOZXh0KHF1ZXJ5LCBldmVudCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKGltbWVkaWF0ZSAmJiBxKSB7XG4gICAgICAgIHN0YXJ0U2VhcmNoKGNtLCBzdGF0ZSwgcSk7XG4gICAgICAgIGZpbmROZXh0KGNtLCByZXYpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkaWFsb2coY20sIGdldFF1ZXJ5RGlhbG9nKGNtKSwgJ1NlYXJjaCBmb3I6JywgcSwgKHF1ZXJ5KSA9PiB7XG4gICAgICAgIGlmIChxdWVyeSAmJiAhc3RhdGUucXVlcnkpIHtcbiAgICAgICAgICBjbS5vcGVyYXRpb24oKCkgPT4ge1xuICAgICAgICAgICAgc3RhcnRTZWFyY2goY20sIHN0YXRlLCBxdWVyeSk7XG4gICAgICAgICAgICBzdGF0ZS5wb3NGcm9tID0gc3RhdGUucG9zVG8gPSBjbS5nZXRDdXJzb3IoKTtcbiAgICAgICAgICAgIGZpbmROZXh0KGNtLCByZXYpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBmaW5kTmV4dChjbSwgcmV2LCBjYWxsYmFjaykge1xuICAgIGNtLm9wZXJhdGlvbigoKSA9PiB7XG4gICAgICBjb25zdCBzdGF0ZSA9IGdldFNlYXJjaFN0YXRlKGNtKTtcbiAgICAgIGxldCBjdXJzb3IgPSBnZXRTZWFyY2hDdXJzb3IoY20sIHN0YXRlLnF1ZXJ5LCByZXYgPyBzdGF0ZS5wb3NGcm9tIDogc3RhdGUucG9zVG8pO1xuICAgICAgaWYgKCFjdXJzb3IuZmluZChyZXYpKSB7XG4gICAgICAgIGN1cnNvciA9IGdldFNlYXJjaEN1cnNvcihjbSwgc3RhdGUucXVlcnksIHJldiA/IENvZGVNaXJyb3IuUG9zKGNtLmxhc3RMaW5lKCkpIDogQ29kZU1pcnJvci5Qb3MoY21cbiAgICAgICAgICAuZmlyc3RMaW5lKCksIDApKTtcbiAgICAgICAgaWYgKCFjdXJzb3IuZmluZChyZXYpKSByZXR1cm47XG4gICAgICB9XG4gICAgICBjbS5zZXRTZWxlY3Rpb24oY3Vyc29yLmZyb20oKSwgY3Vyc29yLnRvKCkpO1xuICAgICAgY20uc2Nyb2xsSW50b1ZpZXcoe1xuICAgICAgICBmcm9tOiBjdXJzb3IuZnJvbSgpLFxuICAgICAgICB0bzogY3Vyc29yLnRvKCksXG4gICAgICB9LCAyMCk7XG4gICAgICBzdGF0ZS5wb3NGcm9tID0gY3Vyc29yLmZyb20oKTtcbiAgICAgIHN0YXRlLnBvc1RvID0gY3Vyc29yLnRvKCk7XG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKGN1cnNvci5mcm9tKCksIGN1cnNvci50bygpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyU2VhcmNoKGNtKSB7XG4gICAgY20ub3BlcmF0aW9uKCgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXRlID0gZ2V0U2VhcmNoU3RhdGUoY20pO1xuICAgICAgc3RhdGUubGFzdFF1ZXJ5ID0gc3RhdGUucXVlcnk7XG4gICAgICBpZiAoIXN0YXRlLnF1ZXJ5KSByZXR1cm47XG4gICAgICBzdGF0ZS5xdWVyeSA9IHN0YXRlLnF1ZXJ5VGV4dCA9IG51bGw7XG4gICAgICBjbS5yZW1vdmVPdmVybGF5KHN0YXRlLm92ZXJsYXkpO1xuICAgICAgaWYgKHN0YXRlLmFubm90YXRlKSB7XG4gICAgICAgIHN0YXRlLmFubm90YXRlLmNsZWFyKCk7XG4gICAgICAgIHN0YXRlLmFubm90YXRlID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFF1ZXJ5RGlhbG9nKGNtKSB7XG4gICAgcmV0dXJuICc8c3BhbiBjbGFzcz1cIkNvZGVNaXJyb3Itc2VhcmNoLWxhYmVsXCI+JyArIGNtLnBocmFzZSgnU2VhcmNoOicpXG4gICAgICArICc8L3NwYW4+IDxpbnB1dCB0eXBlPVwidGV4dFwiIHN0eWxlPVwid2lkdGg6IDEwZW1cIiBjbGFzcz1cIkNvZGVNaXJyb3Itc2VhcmNoLWZpZWxkXCIvPiA8c3BhbiBzdHlsZT1cImNvbG9yOiAjODg4XCIgY2xhc3M9XCJDb2RlTWlycm9yLXNlYXJjaC1oaW50XCI+J1xuICAgICAgKyBjbS5waHJhc2UoJyhVc2UgL3JlLyBzeW50YXggZm9yIHJlZ2V4cCBzZWFyY2gpJykgKyAnPC9zcGFuPic7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRSZXBsYWNlUXVlcnlEaWFsb2coY20pIHtcbiAgICByZXR1cm4gJyA8aW5wdXQgdHlwZT1cInRleHRcIiBzdHlsZT1cIndpZHRoOiAxMGVtXCIgY2xhc3M9XCJDb2RlTWlycm9yLXNlYXJjaC1maWVsZFwiLz4gPHNwYW4gc3R5bGU9XCJjb2xvcjogIzg4OFwiIGNsYXNzPVwiQ29kZU1pcnJvci1zZWFyY2gtaGludFwiPidcbiAgICAgICsgY20ucGhyYXNlKCcoVXNlIC9yZS8gc3ludGF4IGZvciByZWdleHAgc2VhcmNoKScpICsgJzwvc3Bhbj4nO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UmVwbGFjZW1lbnRRdWVyeURpYWxvZyhjbSkge1xuICAgIHJldHVybiAnPHNwYW4gY2xhc3M9XCJDb2RlTWlycm9yLXNlYXJjaC1sYWJlbFwiPicgKyBjbS5waHJhc2UoJ1dpdGg6JylcbiAgICAgICsgJzwvc3Bhbj4gPGlucHV0IHR5cGU9XCJ0ZXh0XCIgc3R5bGU9XCJ3aWR0aDogMTBlbVwiIGNsYXNzPVwiQ29kZU1pcnJvci1zZWFyY2gtZmllbGRcIi8+JztcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldERvUmVwbGFjZUNvbmZpcm0oY20pIHtcbiAgICByZXR1cm4gJzxzcGFuIGNsYXNzPVwiQ29kZU1pcnJvci1zZWFyY2gtbGFiZWxcIj4nICsgY20ucGhyYXNlKCdSZXBsYWNlPycpICsgJzwvc3Bhbj4gPGJ1dHRvbj4nICsgY20ucGhyYXNlKFxuICAgICAgJ1llcycsXG4gICAgKSArICc8L2J1dHRvbj4gPGJ1dHRvbj4nICsgY20ucGhyYXNlKCdObycpICsgJzwvYnV0dG9uPiA8YnV0dG9uPicgKyBjbS5waHJhc2UoJ0FsbCcpXG4gICAgICArICc8L2J1dHRvbj4gPGJ1dHRvbj4nICsgY20ucGhyYXNlKCdTdG9wJykgKyAnPC9idXR0b24+ICc7XG4gIH1cblxuICBmdW5jdGlvbiByZXBsYWNlQWxsKGNtLCBxdWVyeSwgdGV4dCkge1xuICAgIGNtLm9wZXJhdGlvbigoKSA9PiB7XG4gICAgICBmb3IgKGxldCBjdXJzb3IgPSBnZXRTZWFyY2hDdXJzb3IoY20sIHF1ZXJ5KTsgY3Vyc29yLmZpbmROZXh0KCk7KSB7XG4gICAgICAgIGlmICh0eXBlb2YgcXVlcnkgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgdmFyIG1hdGNoID0gY20uZ2V0UmFuZ2UoY3Vyc29yLmZyb20oKSwgY3Vyc29yLnRvKCkpXG4gICAgICAgICAgICAubWF0Y2gocXVlcnkpO1xuICAgICAgICAgIGN1cnNvci5yZXBsYWNlKHRleHQucmVwbGFjZSgvXFwkKFxcZCkvZywgKF8sIGkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBtYXRjaFtpXTtcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH0gZWxzZSBjdXJzb3IucmVwbGFjZSh0ZXh0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlcGxhY2UoY20sIGFsbCkge1xuICAgIGlmIChjbS5nZXRPcHRpb24oJ3JlYWRPbmx5JykpIHJldHVybjtcbiAgICBjb25zdCBxdWVyeSA9IGNtLmdldFNlbGVjdGlvbigpIHx8IGdldFNlYXJjaFN0YXRlKGNtKVxuICAgICAgLmxhc3RRdWVyeTtcbiAgICBjb25zdCBkaWFsb2dUZXh0ID0gJzxzcGFuIGNsYXNzPVwiQ29kZU1pcnJvci1zZWFyY2gtbGFiZWxcIj4nICsgKGFsbCA/IGNtLnBocmFzZSgnUmVwbGFjZSBhbGw6JykgOiBjbS5waHJhc2UoXG4gICAgICAnUmVwbGFjZTonLFxuICAgICkpICsgJzwvc3Bhbj4nO1xuICAgIGRpYWxvZyhjbSwgZGlhbG9nVGV4dCArIGdldFJlcGxhY2VRdWVyeURpYWxvZyhjbSksIGRpYWxvZ1RleHQsIHF1ZXJ5LCAocXVlcnkpID0+IHtcbiAgICAgIGlmICghcXVlcnkpIHJldHVybjtcbiAgICAgIHF1ZXJ5ID0gcGFyc2VRdWVyeShxdWVyeSk7XG4gICAgICBkaWFsb2coY20sIGdldFJlcGxhY2VtZW50UXVlcnlEaWFsb2coY20pLCBjbS5waHJhc2UoJ1JlcGxhY2Ugd2l0aDonKSwgJycsICh0ZXh0KSA9PiB7XG4gICAgICAgIHRleHQgPSBwYXJzZVN0cmluZyh0ZXh0KTtcbiAgICAgICAgaWYgKGFsbCkge1xuICAgICAgICAgIHJlcGxhY2VBbGwoY20sIHF1ZXJ5LCB0ZXh0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjbGVhclNlYXJjaChjbSk7XG4gICAgICAgICAgbGV0IGN1cnNvciA9IGdldFNlYXJjaEN1cnNvcihjbSwgcXVlcnksIGNtLmdldEN1cnNvcignZnJvbScpKTtcbiAgICAgICAgICB2YXIgYWR2YW5jZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gY3Vyc29yLmZyb20oKTtcbiAgICAgICAgICAgIGxldCBtYXRjaDtcbiAgICAgICAgICAgIGlmICghKG1hdGNoID0gY3Vyc29yLmZpbmROZXh0KCkpKSB7XG4gICAgICAgICAgICAgIGN1cnNvciA9IGdldFNlYXJjaEN1cnNvcihjbSwgcXVlcnkpO1xuICAgICAgICAgICAgICBpZiAoIShtYXRjaCA9IGN1cnNvci5maW5kTmV4dCgpKVxuICAgICAgICAgICAgICAgIHx8IChzdGFydCAmJiBjdXJzb3IuZnJvbSgpXG4gICAgICAgICAgICAgICAgICAubGluZSA9PSBzdGFydC5saW5lICYmIGN1cnNvci5mcm9tKClcbiAgICAgICAgICAgICAgICAgICAgLmNoID09IHN0YXJ0LmNoKSkgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY20uc2V0U2VsZWN0aW9uKGN1cnNvci5mcm9tKCksIGN1cnNvci50bygpKTtcbiAgICAgICAgICAgIGNtLnNjcm9sbEludG9WaWV3KHtcbiAgICAgICAgICAgICAgZnJvbTogY3Vyc29yLmZyb20oKSxcbiAgICAgICAgICAgICAgdG86IGN1cnNvci50bygpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25maXJtRGlhbG9nKGNtLCBnZXREb1JlcGxhY2VDb25maXJtKGNtKSwgY20ucGhyYXNlKCdSZXBsYWNlPycpLFxuICAgICAgICAgICAgICBbZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGRvUmVwbGFjZShtYXRjaCk7XG4gICAgICAgICAgICAgIH0sIGFkdmFuY2UsXG4gICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXBsYWNlQWxsKGNtLCBxdWVyeSwgdGV4dCk7XG4gICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHZhciBkb1JlcGxhY2UgPSBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgICAgICAgIGN1cnNvci5yZXBsYWNlKHR5cGVvZiBxdWVyeSA9PT0gJ3N0cmluZycgPyB0ZXh0XG4gICAgICAgICAgICAgIDogdGV4dC5yZXBsYWNlKC9cXCQoXFxkKS9nLCAoXywgaSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaFtpXTtcbiAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgYWR2YW5jZSgpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgYWR2YW5jZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIENvZGVNaXJyb3IuY29tbWFuZHMuZmluZCA9IGZ1bmN0aW9uIChjbSkge1xuICAgIGNsZWFyU2VhcmNoKGNtKTtcbiAgICBkb1NlYXJjaChjbSk7XG4gIH07XG4gIENvZGVNaXJyb3IuY29tbWFuZHMuZmluZFBlcnNpc3RlbnQgPSBmdW5jdGlvbiAoY20pIHtcbiAgICBjbGVhclNlYXJjaChjbSk7XG4gICAgZG9TZWFyY2goY20sIGZhbHNlLCB0cnVlKTtcbiAgfTtcbiAgQ29kZU1pcnJvci5jb21tYW5kcy5maW5kUGVyc2lzdGVudE5leHQgPSBmdW5jdGlvbiAoY20pIHtcbiAgICBkb1NlYXJjaChjbSwgZmFsc2UsIHRydWUsIHRydWUpO1xuICB9O1xuICBDb2RlTWlycm9yLmNvbW1hbmRzLmZpbmRQZXJzaXN0ZW50UHJldiA9IGZ1bmN0aW9uIChjbSkge1xuICAgIGRvU2VhcmNoKGNtLCB0cnVlLCB0cnVlLCB0cnVlKTtcbiAgfTtcbiAgQ29kZU1pcnJvci5jb21tYW5kcy5maW5kTmV4dCA9IGRvU2VhcmNoO1xuICBDb2RlTWlycm9yLmNvbW1hbmRzLmZpbmRQcmV2ID0gZnVuY3Rpb24gKGNtKSB7XG4gICAgZG9TZWFyY2goY20sIHRydWUpO1xuICB9O1xuICBDb2RlTWlycm9yLmNvbW1hbmRzLmNsZWFyU2VhcmNoID0gY2xlYXJTZWFyY2g7XG4gIENvZGVNaXJyb3IuY29tbWFuZHMucmVwbGFjZSA9IHJlcGxhY2U7XG4gIENvZGVNaXJyb3IuY29tbWFuZHMucmVwbGFjZUFsbCA9IGZ1bmN0aW9uIChjbSkge1xuICAgIHJlcGxhY2UoY20sIHRydWUpO1xuICB9O1xufVxuIiwgIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRTZWFyY2hjdXJzb3IoQ29kZU1pcnJvcikge1xuXG4gIGxldCBQb3MgPSBDb2RlTWlycm9yLlBvcztcblxuICBmdW5jdGlvbiByZWdleHBGbGFncyhyZWdleHApIHtcbiAgICBsZXQgZmxhZ3MgPSByZWdleHAuZmxhZ3M7XG4gICAgcmV0dXJuIGZsYWdzICE9IG51bGwgPyBmbGFncyA6IChyZWdleHAuaWdub3JlQ2FzZSA/ICdpJyA6ICcnKSArXG4gICAgICAocmVnZXhwLmdsb2JhbCA/ICdnJyA6ICcnKSArXG4gICAgICAocmVnZXhwLm11bHRpbGluZSA/ICdtJyA6ICcnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuc3VyZUZsYWdzKHJlZ2V4cCwgZmxhZ3MpIHtcbiAgICBsZXQgY3VycmVudCA9IHJlZ2V4cEZsYWdzKHJlZ2V4cCk7XG4gICAgdmFyIHRhcmdldCA9IGN1cnJlbnQ7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbGFncy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRhcmdldC5pbmRleE9mKGZsYWdzLmNoYXJBdChpKSkgPT0gLTEpXG4gICAgICAgIHRhcmdldCArPSBmbGFncy5jaGFyQXQoaSlcbiAgICB9O1xuICAgIHJldHVybiBjdXJyZW50ID09IHRhcmdldCA/IHJlZ2V4cCA6IG5ldyBSZWdFeHAocmVnZXhwLnNvdXJjZSwgdGFyZ2V0KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1heWJlTXVsdGlsaW5lKHJlZ2V4cCkge1xuICAgIHJldHVybiAvXFxcXHN8XFxcXG58XFxufFxcXFxXfFxcXFxEfFxcW1xcXi8udGVzdChyZWdleHAuc291cmNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNlYXJjaFJlZ2V4cEZvcndhcmQoZG9jLCByZWdleHAsIHN0YXJ0KSB7XG4gICAgcmVnZXhwID0gZW5zdXJlRmxhZ3MocmVnZXhwLCAnZycpO1xuICAgIGZvciAobGV0IGxpbmUgPSBzdGFydC5saW5lLCBjaCA9IHN0YXJ0LmNoLCBsYXN0ID0gZG9jLmxhc3RMaW5lKCk7IGxpbmUgPD0gbGFzdDsgbGluZSsrLCBjaCA9IDApIHtcbiAgICAgIHJlZ2V4cC5sYXN0SW5kZXggPSBjaDtcbiAgICAgIGxldCBzdHJpbmcgPSBkb2MuZ2V0TGluZShsaW5lKTtcbiAgICAgIHZhciBtYXRjaCA9IHJlZ2V4cC5leGVjKHN0cmluZyk7XG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBmcm9tOiBQb3MobGluZSwgbWF0Y2guaW5kZXgpLFxuICAgICAgICAgIHRvOiBQb3MobGluZSwgbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgpLFxuICAgICAgICAgIG1hdGNoOiBtYXRjaFxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNlYXJjaFJlZ2V4cEZvcndhcmRNdWx0aWxpbmUoZG9jLCByZWdleHAsIHN0YXJ0KSB7XG4gICAgaWYgKCFtYXliZU11bHRpbGluZShyZWdleHApKSByZXR1cm4gc2VhcmNoUmVnZXhwRm9yd2FyZChkb2MsIHJlZ2V4cCwgc3RhcnQpO1xuXG4gICAgcmVnZXhwID0gZW5zdXJlRmxhZ3MocmVnZXhwLCAnZ20nKTtcbiAgICBsZXQgc3RyaW5nO1xuICAgIHZhciBjaHVuayA9IDE7XG4gICAgZm9yIChsZXQgbGluZSA9IHN0YXJ0LmxpbmUsIGxhc3QgPSBkb2MubGFzdExpbmUoKTsgbGluZSA8PSBsYXN0Oykge1xuICAgICAgLy8gVGhpcyBncm93cyB0aGUgc2VhcmNoIGJ1ZmZlciBpbiBleHBvbmVudGlhbGx5LXNpemVkIGNodW5rc1xuICAgICAgLy8gYmV0d2VlbiBtYXRjaGVzLCBzbyB0aGF0IG5lYXJieSBtYXRjaGVzIGFyZSBmYXN0IGFuZCBkb24ndFxuICAgICAgLy8gcmVxdWlyZSBjb25jYXRlbmF0aW5nIHRoZSB3aG9sZSBkb2N1bWVudCAoaW4gY2FzZSB3ZSdyZVxuICAgICAgLy8gc2VhcmNoaW5nIGZvciBzb21ldGhpbmcgdGhhdCBoYXMgdG9ucyBvZiBtYXRjaGVzKSwgYnV0IGF0IHRoZVxuICAgICAgLy8gc2FtZSB0aW1lLCB0aGUgYW1vdW50IG9mIHJldHJpZXMgaXMgbGltaXRlZC5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2h1bms7IGkrKykge1xuICAgICAgICBpZiAobGluZSA+IGxhc3QpIGJyZWFrO1xuICAgICAgICBsZXQgY3VyTGluZSA9IGRvYy5nZXRMaW5lKGxpbmUrKyk7XG4gICAgICAgIHN0cmluZyA9IHN0cmluZyA9PSBudWxsID8gY3VyTGluZSA6IHN0cmluZyArICdcXG4nICsgY3VyTGluZTtcbiAgICAgIH1cbiAgICAgIGNodW5rICo9IDI7XG4gICAgICByZWdleHAubGFzdEluZGV4ID0gc3RhcnQuY2g7XG4gICAgICBsZXQgbWF0Y2ggPSByZWdleHAuZXhlYyhzdHJpbmcpO1xuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGxldCBiZWZvcmUgPSBzdHJpbmcuc2xpY2UoMCwgbWF0Y2guaW5kZXgpXG4gICAgICAgICAgLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgdmFyIGluc2lkZSA9IG1hdGNoWzBdLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgbGV0IHN0YXJ0TGluZSA9IHN0YXJ0LmxpbmUgKyBiZWZvcmUubGVuZ3RoIC0gMTtcbiAgICAgICAgdmFyIHN0YXJ0Q2ggPSBiZWZvcmVbYmVmb3JlLmxlbmd0aCAtIDFdLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBmcm9tOiBQb3Moc3RhcnRMaW5lLCBzdGFydENoKSxcbiAgICAgICAgICB0bzogUG9zKHN0YXJ0TGluZSArIGluc2lkZS5sZW5ndGggLSAxLFxuICAgICAgICAgICAgaW5zaWRlLmxlbmd0aCA9PSAxID8gc3RhcnRDaCArIGluc2lkZVswXS5sZW5ndGggOiBpbnNpZGVbaW5zaWRlLmxlbmd0aCAtIDFdLmxlbmd0aCksXG4gICAgICAgICAgbWF0Y2gsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbGFzdE1hdGNoSW4oc3RyaW5nLCByZWdleHApIHtcbiAgICBsZXQgY3V0T2ZmID0gMDtcbiAgICB2YXIgbWF0Y2g7XG4gICAgZm9yICg7IDspIHtcbiAgICAgIHJlZ2V4cC5sYXN0SW5kZXggPSBjdXRPZmY7XG4gICAgICBsZXQgbmV3TWF0Y2ggPSByZWdleHAuZXhlYyhzdHJpbmcpO1xuICAgICAgaWYgKCFuZXdNYXRjaCkgcmV0dXJuIG1hdGNoO1xuICAgICAgbWF0Y2ggPSBuZXdNYXRjaDtcbiAgICAgIGN1dE9mZiA9IG1hdGNoLmluZGV4ICsgKG1hdGNoWzBdLmxlbmd0aCB8fCAxKTtcbiAgICAgIGlmIChjdXRPZmYgPT0gc3RyaW5nLmxlbmd0aCkgcmV0dXJuIG1hdGNoO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNlYXJjaFJlZ2V4cEJhY2t3YXJkKGRvYywgcmVnZXhwLCBzdGFydCkge1xuICAgIHJlZ2V4cCA9IGVuc3VyZUZsYWdzKHJlZ2V4cCwgJ2cnKTtcbiAgICBmb3IgKGxldCBsaW5lID0gc3RhcnQubGluZSwgY2ggPSBzdGFydC5jaCwgZmlyc3QgPSBkb2MuZmlyc3RMaW5lKCk7IGxpbmUgPj0gZmlyc3Q7IGxpbmUtLSwgY2ggPSAtMSkge1xuICAgICAgbGV0IHN0cmluZyA9IGRvYy5nZXRMaW5lKGxpbmUpO1xuICAgICAgaWYgKGNoID4gLTEpIHN0cmluZyA9IHN0cmluZy5zbGljZSgwLCBjaCk7XG4gICAgICBsZXQgbWF0Y2ggPSBsYXN0TWF0Y2hJbihzdHJpbmcsIHJlZ2V4cCk7XG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBmcm9tOiBQb3MobGluZSwgbWF0Y2guaW5kZXgpLFxuICAgICAgICAgIHRvOiBQb3MobGluZSwgbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgpLFxuICAgICAgICAgIG1hdGNoOiBtYXRjaFxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNlYXJjaFJlZ2V4cEJhY2t3YXJkTXVsdGlsaW5lKGRvYywgcmVnZXhwLCBzdGFydCkge1xuICAgIHJlZ2V4cCA9IGVuc3VyZUZsYWdzKHJlZ2V4cCwgJ2dtJyk7XG4gICAgbGV0IHN0cmluZztcbiAgICB2YXIgY2h1bmsgPSAxO1xuICAgIGZvciAobGV0IGxpbmUgPSBzdGFydC5saW5lLCBmaXJzdCA9IGRvYy5maXJzdExpbmUoKTsgbGluZSA+PSBmaXJzdDspIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2h1bms7IGkrKykge1xuICAgICAgICBsZXQgY3VyTGluZSA9IGRvYy5nZXRMaW5lKGxpbmUtLSk7XG4gICAgICAgIHN0cmluZyA9IHN0cmluZyA9PSBudWxsID8gY3VyTGluZS5zbGljZSgwLCBzdGFydC5jaCkgOiBjdXJMaW5lICsgJ1xcbicgKyBzdHJpbmc7XG4gICAgICB9XG4gICAgICBjaHVuayAqPSAyO1xuXG4gICAgICBsZXQgbWF0Y2ggPSBsYXN0TWF0Y2hJbihzdHJpbmcsIHJlZ2V4cCk7XG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgbGV0IGJlZm9yZSA9IHN0cmluZy5zbGljZSgwLCBtYXRjaC5pbmRleClcbiAgICAgICAgICAuc3BsaXQoJ1xcbicpO1xuICAgICAgICB2YXIgaW5zaWRlID0gbWF0Y2hbMF0uc3BsaXQoJ1xcbicpO1xuICAgICAgICBsZXQgc3RhcnRMaW5lID0gbGluZSArIGJlZm9yZS5sZW5ndGg7XG4gICAgICAgIHZhciBzdGFydENoID0gYmVmb3JlW2JlZm9yZS5sZW5ndGggLSAxXS5sZW5ndGg7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZnJvbTogUG9zKHN0YXJ0TGluZSwgc3RhcnRDaCksXG4gICAgICAgICAgdG86IFBvcyhzdGFydExpbmUgKyBpbnNpZGUubGVuZ3RoIC0gMSxcbiAgICAgICAgICAgIGluc2lkZS5sZW5ndGggPT0gMSA/IHN0YXJ0Q2ggKyBpbnNpZGVbMF0ubGVuZ3RoIDogaW5zaWRlW2luc2lkZS5sZW5ndGggLSAxXS5sZW5ndGgpLFxuICAgICAgICAgIG1hdGNoLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGxldCBkb0ZvbGQ7XG4gIHZhciBub0ZvbGQ7XG4gIGlmIChTdHJpbmcucHJvdG90eXBlLm5vcm1hbGl6ZSkge1xuICAgIGRvRm9sZCA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgIHJldHVybiBzdHIubm9ybWFsaXplKCdORkQnKVxuICAgICAgICAudG9Mb3dlckNhc2UoKTtcbiAgICB9O1xuICAgIG5vRm9sZCA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgIHJldHVybiBzdHIubm9ybWFsaXplKCdORkQnKTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGRvRm9sZCA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKTtcbiAgICB9O1xuICAgIG5vRm9sZCA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgIHJldHVybiBzdHI7XG4gICAgfTtcbiAgfVxuXG4gIC8vIE1hcHMgYSBwb3NpdGlvbiBpbiBhIGNhc2UtZm9sZGVkIGxpbmUgYmFjayB0byBhIHBvc2l0aW9uIGluIHRoZSBvcmlnaW5hbCBsaW5lXG4gIC8vIChjb21wZW5zYXRpbmcgZm9yIGNvZGVwb2ludHMgaW5jcmVhc2luZyBpbiBudW1iZXIgZHVyaW5nIGZvbGRpbmcpXG4gIGZ1bmN0aW9uIGFkanVzdFBvcyhvcmlnLCBmb2xkZWQsIHBvcywgZm9sZEZ1bmMpIHtcbiAgICBpZiAob3JpZy5sZW5ndGggPT0gZm9sZGVkLmxlbmd0aCkgcmV0dXJuIHBvc1xuICAgIGZvciAodmFyIG1pbiA9IDAsIG1heCA9IHBvcyArIE1hdGgubWF4KDAsIG9yaWcubGVuZ3RoIC0gZm9sZGVkLmxlbmd0aCk7IDspIHtcbiAgICAgIGlmIChtaW4gPT0gbWF4KSByZXR1cm4gbWluXG4gICAgICB2YXIgbWlkID0gKG1pbiArIG1heCkgPj4gMVxuICAgICAgdmFyIGxlbiA9IGZvbGRGdW5jKG9yaWcuc2xpY2UoMCwgbWlkKSlcbiAgICAgICAgLmxlbmd0aFxuICAgICAgaWYgKGxlbiA9PSBwb3MpIHJldHVybiBtaWRcbiAgICAgIGlmIChsZW4gPiBwb3MpIG1heCA9IG1pZFxuICAgICAgZWxzZSBtaW4gPSBtaWQgKyAxXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2VhcmNoU3RyaW5nRm9yd2FyZChkb2MsIHF1ZXJ5LCBzdGFydCwgY2FzZUZvbGQpIHtcbiAgICAvLyBFbXB0eSBzdHJpbmcgd291bGQgbWF0Y2ggYW55dGhpbmcgYW5kIG5ldmVyIHByb2dyZXNzLCBzbyB3ZVxuICAgIC8vIGRlZmluZSBpdCB0byBtYXRjaCBub3RoaW5nIGluc3RlYWQuXG4gICAgaWYgKCFxdWVyeS5sZW5ndGgpIHJldHVybiBudWxsXG4gICAgdmFyIGZvbGQgPSBjYXNlRm9sZCA/IGRvRm9sZCA6IG5vRm9sZFxuICAgIHZhciBsaW5lcyA9IGZvbGQocXVlcnkpXG4gICAgICAuc3BsaXQoL1xccnxcXG5cXHI/LylcblxuICAgIHNlYXJjaDogZm9yICh2YXIgbGluZSA9IHN0YXJ0LmxpbmUsIGNoID0gc3RhcnQuY2gsIGxhc3QgPSBkb2MubGFzdExpbmUoKSArIDEgLSBsaW5lcy5sZW5ndGg7IGxpbmUgPD1cbiAgICAgIGxhc3Q7IGxpbmUrKywgY2ggPSAwKSB7XG4gICAgICB2YXIgb3JpZyA9IGRvYy5nZXRMaW5lKGxpbmUpXG4gICAgICAgIC5zbGljZShjaCksXG4gICAgICAgIHN0cmluZyA9IGZvbGQob3JpZylcbiAgICAgIGlmIChsaW5lcy5sZW5ndGggPT0gMSkge1xuICAgICAgICB2YXIgZm91bmQgPSBzdHJpbmcuaW5kZXhPZihsaW5lc1swXSlcbiAgICAgICAgaWYgKGZvdW5kID09IC0xKSBjb250aW51ZSBzZWFyY2hcbiAgICAgICAgdmFyIHN0YXJ0ID0gYWRqdXN0UG9zKG9yaWcsIHN0cmluZywgZm91bmQsIGZvbGQpICsgY2hcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBmcm9tOiBQb3MobGluZSwgYWRqdXN0UG9zKG9yaWcsIHN0cmluZywgZm91bmQsIGZvbGQpICsgY2gpLFxuICAgICAgICAgIHRvOiBQb3MobGluZSwgYWRqdXN0UG9zKG9yaWcsIHN0cmluZywgZm91bmQgKyBsaW5lc1swXS5sZW5ndGgsIGZvbGQpICsgY2gpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZhciBjdXRGcm9tID0gc3RyaW5nLmxlbmd0aCAtIGxpbmVzWzBdLmxlbmd0aFxuICAgICAgaWYgKHN0cmluZy5zbGljZShjdXRGcm9tKSAhPSBsaW5lc1swXSkgY29udGludWUgc2VhcmNoXG4gICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxpbmVzLmxlbmd0aCAtIDE7IGkrKylcbiAgICAgICAgaWYgKGZvbGQoZG9jLmdldExpbmUobGluZSArIGkpKSAhPSBsaW5lc1tpXSkgY29udGludWUgc2VhcmNoXG4gICAgICB2YXIgZW5kID0gZG9jLmdldExpbmUobGluZSArIGxpbmVzLmxlbmd0aCAtIDEpLFxuICAgICAgICBlbmRTdHJpbmcgPSBmb2xkKGVuZCksXG4gICAgICAgIGxhc3RMaW5lID0gbGluZXNbbGluZXMubGVuZ3RoIC0gMV1cbiAgICAgIGlmIChlbmRTdHJpbmcuc2xpY2UoMCwgbGFzdExpbmUubGVuZ3RoKSAhPSBsYXN0TGluZSkgY29udGludWUgc2VhcmNoXG4gICAgICByZXR1cm4ge1xuICAgICAgICBmcm9tOiBQb3MobGluZSwgYWRqdXN0UG9zKG9yaWcsIHN0cmluZywgY3V0RnJvbSwgZm9sZCkgKyBjaCksXG4gICAgICAgIHRvOiBQb3MobGluZSArIGxpbmVzLmxlbmd0aCAtIDEsIGFkanVzdFBvcyhlbmQsIGVuZFN0cmluZywgbGFzdExpbmUubGVuZ3RoLCBmb2xkKSlcbiAgICAgIH1cblxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNlYXJjaFN0cmluZ0JhY2t3YXJkKGRvYywgcXVlcnksIHN0YXJ0LCBjYXNlRm9sZCkge1xuICAgIGlmICghcXVlcnkubGVuZ3RoKSByZXR1cm4gbnVsbFxuICAgIHZhciBmb2xkID0gY2FzZUZvbGQgPyBkb0ZvbGQgOiBub0ZvbGRcbiAgICB2YXIgbGluZXMgPSBmb2xkKHF1ZXJ5KVxuICAgICAgLnNwbGl0KC9cXHJ8XFxuXFxyPy8pXG5cbiAgICBzZWFyY2g6IGZvciAodmFyIGxpbmUgPSBzdGFydC5saW5lLCBjaCA9IHN0YXJ0LmNoLCBmaXJzdCA9IGRvYy5maXJzdExpbmUoKSAtIDEgKyBsaW5lcy5sZW5ndGg7IGxpbmUgPj1cbiAgICAgIGZpcnN0OyBsaW5lLS0sIGNoID0gLTEpIHtcbiAgICAgIHZhciBvcmlnID0gZG9jLmdldExpbmUobGluZSlcbiAgICAgIGlmIChjaCA+IC0xKSBvcmlnID0gb3JpZy5zbGljZSgwLCBjaClcbiAgICAgIHZhciBzdHJpbmcgPSBmb2xkKG9yaWcpXG4gICAgICBpZiAobGluZXMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgdmFyIGZvdW5kID0gc3RyaW5nLmxhc3RJbmRleE9mKGxpbmVzWzBdKVxuICAgICAgICBpZiAoZm91bmQgPT0gLTEpIGNvbnRpbnVlIHNlYXJjaFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGZyb206IFBvcyhsaW5lLCBhZGp1c3RQb3Mob3JpZywgc3RyaW5nLCBmb3VuZCwgZm9sZCkpLFxuICAgICAgICAgIHRvOiBQb3MobGluZSwgYWRqdXN0UG9zKG9yaWcsIHN0cmluZywgZm91bmQgKyBsaW5lc1swXS5sZW5ndGgsIGZvbGQpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgbGFzdExpbmUgPSBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXVxuICAgICAgaWYgKHN0cmluZy5zbGljZSgwLCBsYXN0TGluZS5sZW5ndGgpICE9IGxhc3RMaW5lKSBjb250aW51ZSBzZWFyY2hcbiAgICAgIGZvciAodmFyIGkgPSAxLCBzdGFydCA9IGxpbmUgLSBsaW5lcy5sZW5ndGggKyAxOyBpIDwgbGluZXMubGVuZ3RoIC0gMTsgaSsrKVxuICAgICAgICBpZiAoZm9sZChkb2MuZ2V0TGluZShzdGFydCArIGkpKSAhPSBsaW5lc1tpXSkgY29udGludWUgc2VhcmNoXG4gICAgICB2YXIgdG9wID0gZG9jLmdldExpbmUobGluZSArIDEgLSBsaW5lcy5sZW5ndGgpLFxuICAgICAgICB0b3BTdHJpbmcgPSBmb2xkKHRvcClcbiAgICAgIGlmICh0b3BTdHJpbmcuc2xpY2UodG9wU3RyaW5nLmxlbmd0aCAtIGxpbmVzWzBdLmxlbmd0aCkgIT0gbGluZXNbMF0pIGNvbnRpbnVlIHNlYXJjaFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZnJvbTogUG9zKGxpbmUgKyAxIC0gbGluZXMubGVuZ3RoLCBhZGp1c3RQb3ModG9wLCB0b3BTdHJpbmcsIHRvcC5sZW5ndGggLSBsaW5lc1swXS5sZW5ndGgsIGZvbGQpKSxcbiAgICAgICAgdG86IFBvcyhsaW5lLCBhZGp1c3RQb3Mob3JpZywgc3RyaW5nLCBsYXN0TGluZS5sZW5ndGgsIGZvbGQpKVxuICAgICAgfVxuXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gU2VhcmNoQ3Vyc29yKGRvYywgcXVlcnksIHBvcywgb3B0aW9ucykge1xuICAgIHRoaXMuYXRPY2N1cnJlbmNlID0gZmFsc2U7XG4gICAgdGhpcy5kb2MgPSBkb2M7XG4gICAgcG9zID0gcG9zID8gZG9jLmNsaXBQb3MocG9zKSA6IFBvcygwLCAwKTtcbiAgICB0aGlzLnBvcyA9IHtcbiAgICAgIGZyb206IHBvcyxcbiAgICAgIHRvOiBwb3MsXG4gICAgfTtcblxuICAgIGxldCBjYXNlRm9sZDtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnKSB7XG4gICAgICBjYXNlRm9sZCA9IG9wdGlvbnMuY2FzZUZvbGQ7XG4gICAgfSBlbHNlIHsgLy8gQmFja3dhcmRzIGNvbXBhdCBmb3Igd2hlbiBjYXNlRm9sZCB3YXMgdGhlIDR0aCBhcmd1bWVudFxuICAgICAgY2FzZUZvbGQgPSBvcHRpb25zO1xuICAgICAgb3B0aW9ucyA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBxdWVyeSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmIChjYXNlRm9sZCA9PSBudWxsKSBjYXNlRm9sZCA9IGZhbHNlO1xuICAgICAgdGhpcy5tYXRjaGVzID0gZnVuY3Rpb24gKHJldmVyc2UsIHBvcykge1xuICAgICAgICByZXR1cm4gKHJldmVyc2UgPyBzZWFyY2hTdHJpbmdCYWNrd2FyZCA6IHNlYXJjaFN0cmluZ0ZvcndhcmQpKGRvYywgcXVlcnksIHBvcywgY2FzZUZvbGQpO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcXVlcnkgPSBlbnN1cmVGbGFncyhxdWVyeSwgJ2dtJyk7XG4gICAgICBpZiAoIW9wdGlvbnMgfHwgb3B0aW9ucy5tdWx0aWxpbmUgIT09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMubWF0Y2hlcyA9IGZ1bmN0aW9uIChyZXZlcnNlLCBwb3MpIHtcbiAgICAgICAgICByZXR1cm4gKHJldmVyc2UgPyBzZWFyY2hSZWdleHBCYWNrd2FyZE11bHRpbGluZSA6IHNlYXJjaFJlZ2V4cEZvcndhcmRNdWx0aWxpbmUpKGRvYywgcXVlcnksIHBvcylcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMubWF0Y2hlcyA9IGZ1bmN0aW9uIChyZXZlcnNlLCBwb3MpIHtcbiAgICAgICAgICByZXR1cm4gKHJldmVyc2UgPyBzZWFyY2hSZWdleHBCYWNrd2FyZCA6IHNlYXJjaFJlZ2V4cEZvcndhcmQpKGRvYywgcXVlcnksIHBvcylcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBTZWFyY2hDdXJzb3IucHJvdG90eXBlID0ge1xuICAgIGZpbmROZXh0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuZmluZChmYWxzZSlcbiAgICB9LFxuICAgIGZpbmRQcmV2aW91cygpIHtcbiAgICAgIHJldHVybiB0aGlzLmZpbmQodHJ1ZSlcbiAgICB9LFxuXG4gICAgZmluZChyZXZlcnNlKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdGhpcy5tYXRjaGVzKHJldmVyc2UsIHRoaXMuZG9jLmNsaXBQb3MocmV2ZXJzZSA/IHRoaXMucG9zLmZyb20gOiB0aGlzLnBvcy50bykpXG5cbiAgICAgIC8vIEltcGxlbWVudHMgd2VpcmQgYXV0by1ncm93aW5nIGJlaGF2aW9yIG9uIG51bGwtbWF0Y2hlcyBmb3JcbiAgICAgIC8vIGJhY2t3YXJkcy1jb21wYXRpYmxpdHkgd2l0aCB0aGUgdmltIGNvZGUgKHVuZm9ydHVuYXRlbHkpXG4gICAgICB3aGlsZSAocmVzdWx0ICYmIENvZGVNaXJyb3IuY21wUG9zKHJlc3VsdC5mcm9tLCByZXN1bHQudG8pID09IDApIHtcbiAgICAgICAgaWYgKHJldmVyc2UpIHtcbiAgICAgICAgICBpZiAocmVzdWx0LmZyb20uY2gpIHJlc3VsdC5mcm9tID0gUG9zKHJlc3VsdC5mcm9tLmxpbmUsIHJlc3VsdC5mcm9tLmNoIC0gMSlcbiAgICAgICAgICBlbHNlIGlmIChyZXN1bHQuZnJvbS5saW5lID09IHRoaXMuZG9jLmZpcnN0TGluZSgpKSByZXN1bHQgPSBudWxsXG4gICAgICAgICAgZWxzZSByZXN1bHQgPSB0aGlzLm1hdGNoZXMocmV2ZXJzZSwgdGhpcy5kb2MuY2xpcFBvcyhQb3MocmVzdWx0LmZyb20ubGluZSAtIDEpKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAocmVzdWx0LnRvLmNoIDwgdGhpcy5kb2MuZ2V0TGluZShyZXN1bHQudG8ubGluZSlcbiAgICAgICAgICAgIC5sZW5ndGgpIHJlc3VsdC50byA9IFBvcyhyZXN1bHQudG8ubGluZSwgcmVzdWx0LnRvLmNoICsgMSlcbiAgICAgICAgICBlbHNlIGlmIChyZXN1bHQudG8ubGluZSA9PSB0aGlzLmRvYy5sYXN0TGluZSgpKSByZXN1bHQgPSBudWxsXG4gICAgICAgICAgZWxzZSByZXN1bHQgPSB0aGlzLm1hdGNoZXMocmV2ZXJzZSwgUG9zKHJlc3VsdC50by5saW5lICsgMSwgMCkpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICB0aGlzLnBvcyA9IHJlc3VsdFxuICAgICAgICB0aGlzLmF0T2NjdXJyZW5jZSA9IHRydWVcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zLm1hdGNoIHx8IHRydWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBlbmQgPSBQb3MocmV2ZXJzZSA/IHRoaXMuZG9jLmZpcnN0TGluZSgpIDogdGhpcy5kb2MubGFzdExpbmUoKSArIDEsIDApXG4gICAgICAgIHRoaXMucG9zID0ge1xuICAgICAgICAgIGZyb206IGVuZCxcbiAgICAgICAgICB0bzogZW5kXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYXRPY2N1cnJlbmNlID0gZmFsc2VcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZnJvbSgpIHtcbiAgICAgIGlmICh0aGlzLmF0T2NjdXJyZW5jZSkgcmV0dXJuIHRoaXMucG9zLmZyb21cbiAgICB9LFxuICAgIHRvKCkge1xuICAgICAgaWYgKHRoaXMuYXRPY2N1cnJlbmNlKSByZXR1cm4gdGhpcy5wb3MudG9cbiAgICB9LFxuXG4gICAgcmVwbGFjZShuZXdUZXh0LCBvcmlnaW4pIHtcbiAgICAgIGlmICghdGhpcy5hdE9jY3VycmVuY2UpIHJldHVyblxuICAgICAgdmFyIGxpbmVzID0gQ29kZU1pcnJvci5zcGxpdExpbmVzKG5ld1RleHQpXG4gICAgICB0aGlzLmRvYy5yZXBsYWNlUmFuZ2UobGluZXMsIHRoaXMucG9zLmZyb20sIHRoaXMucG9zLnRvLCBvcmlnaW4pXG4gICAgICB0aGlzLnBvcy50byA9IFBvcyh0aGlzLnBvcy5mcm9tLmxpbmUgKyBsaW5lcy5sZW5ndGggLSAxLFxuICAgICAgICBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXS5sZW5ndGggKyAobGluZXMubGVuZ3RoID09IDEgPyB0aGlzLnBvcy5mcm9tLmNoIDogMCkpXG4gICAgfSxcbiAgfTtcblxuICBDb2RlTWlycm9yLmRlZmluZUV4dGVuc2lvbignZ2V0U2VhcmNoQ3Vyc29yJywgZnVuY3Rpb24gKHF1ZXJ5LCBwb3MsIGNhc2VGb2xkKSB7XG4gICAgcmV0dXJuIG5ldyBTZWFyY2hDdXJzb3IodGhpcy5kb2MsIHF1ZXJ5LCBwb3MsIGNhc2VGb2xkKTtcbiAgfSk7XG4gIENvZGVNaXJyb3IuZGVmaW5lRG9jRXh0ZW5zaW9uKCdnZXRTZWFyY2hDdXJzb3InLCBmdW5jdGlvbiAocXVlcnksIHBvcywgY2FzZUZvbGQpIHtcbiAgICByZXR1cm4gbmV3IFNlYXJjaEN1cnNvcih0aGlzLCBxdWVyeSwgcG9zLCBjYXNlRm9sZCk7XG4gIH0pO1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lRXh0ZW5zaW9uKCdzZWxlY3RNYXRjaGVzJywgZnVuY3Rpb24gKHF1ZXJ5LCBjYXNlRm9sZCkge1xuICAgIGxldCByYW5nZXMgPSBbXTtcbiAgICBsZXQgY3VyID0gdGhpcy5nZXRTZWFyY2hDdXJzb3IocXVlcnksIHRoaXMuZ2V0Q3Vyc29yKCdmcm9tJyksIGNhc2VGb2xkKTtcbiAgICB3aGlsZSAoY3VyLmZpbmROZXh0KCkpIHtcbiAgICAgIGlmIChDb2RlTWlycm9yLmNtcFBvcyhjdXIudG8oKSwgdGhpcy5nZXRDdXJzb3IoJ3RvJykpID4gMCkgYnJlYWs7XG4gICAgICByYW5nZXMucHVzaCh7XG4gICAgICAgIGFuY2hvcjogY3VyLmZyb20oKSxcbiAgICAgICAgaGVhZDogY3VyLnRvKCksXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHJhbmdlcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuc2V0U2VsZWN0aW9ucyhyYW5nZXMsIDApXG4gICAgfTtcbiAgfSk7XG59XG4iLCAiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwczovL2NvZGVtaXJyb3IubmV0L0xJQ0VOU0VcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEZvbGRjb2RlKENvZGVNaXJyb3IpIHtcblxuICBmdW5jdGlvbiBkb0ZvbGQoY20sIHBvcywgb3B0aW9ucywgZm9yY2UpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmNhbGwpIHtcbiAgICAgIHZhciBmaW5kZXIgPSBvcHRpb25zO1xuICAgICAgb3B0aW9ucyA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBmaW5kZXIgPSBnZXRPcHRpb24oY20sIG9wdGlvbnMsICdyYW5nZUZpbmRlcicpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHBvcyA9PT0gJ251bWJlcicpIHBvcyA9IENvZGVNaXJyb3IuUG9zKHBvcywgMCk7XG4gICAgY29uc3QgbWluU2l6ZSA9IGdldE9wdGlvbihjbSwgb3B0aW9ucywgJ21pbkZvbGRTaXplJyk7XG5cbiAgICBmdW5jdGlvbiBnZXRSYW5nZShhbGxvd0ZvbGRlZCkge1xuICAgICAgY29uc3QgcmFuZ2UgPSBmaW5kZXIoY20sIHBvcyk7XG4gICAgICBpZiAoIXJhbmdlIHx8IHJhbmdlLnRvLmxpbmUgLSByYW5nZS5mcm9tLmxpbmUgPCBtaW5TaXplKSByZXR1cm4gbnVsbDtcbiAgICAgIGNvbnN0IG1hcmtzID0gY20uZmluZE1hcmtzQXQocmFuZ2UuZnJvbSk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hcmtzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGlmIChtYXJrc1tpXS5fX2lzRm9sZCAmJiBmb3JjZSAhPT0gJ2ZvbGQnKSB7XG4gICAgICAgICAgaWYgKCFhbGxvd0ZvbGRlZCkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgcmFuZ2UuY2xlYXJlZCA9IHRydWU7XG4gICAgICAgICAgbWFya3NbaV0uY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJhbmdlO1xuICAgIH1cblxuICAgIGxldCByYW5nZSA9IGdldFJhbmdlKHRydWUpO1xuICAgIGlmIChnZXRPcHRpb24oY20sIG9wdGlvbnMsICdzY2FuVXAnKSkge1xuICAgICAgd2hpbGUgKCFyYW5nZSAmJiBwb3MubGluZSA+IGNtLmZpcnN0TGluZSgpKSB7XG4gICAgICAgIHBvcyA9IENvZGVNaXJyb3IuUG9zKHBvcy5saW5lIC0gMSwgMCk7XG4gICAgICAgIHJhbmdlID0gZ2V0UmFuZ2UoZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXJhbmdlIHx8IHJhbmdlLmNsZWFyZWQgfHwgZm9yY2UgPT09ICd1bmZvbGQnKSByZXR1cm47XG5cbiAgICBjb25zdCBteVdpZGdldCA9IG1ha2VXaWRnZXQoY20sIG9wdGlvbnMpO1xuICAgIENvZGVNaXJyb3Iub24obXlXaWRnZXQsICdtb3VzZWRvd24nLCAoZSkgPT4ge1xuICAgICAgbXlSYW5nZS5jbGVhcigpO1xuICAgICAgQ29kZU1pcnJvci5lX3ByZXZlbnREZWZhdWx0KGUpO1xuICAgIH0pO1xuICAgIHZhciBteVJhbmdlID0gY20ubWFya1RleHQocmFuZ2UuZnJvbSwgcmFuZ2UudG8sIHtcbiAgICAgIHJlcGxhY2VkV2l0aDogbXlXaWRnZXQsXG4gICAgICBjbGVhck9uRW50ZXI6IGdldE9wdGlvbihjbSwgb3B0aW9ucywgJ2NsZWFyT25FbnRlcicpLFxuICAgICAgX19pc0ZvbGQ6IHRydWUsXG4gICAgfSk7XG4gICAgbXlSYW5nZS5vbignY2xlYXInLCAoZnJvbSwgdG8pID0+IHtcbiAgICAgIENvZGVNaXJyb3Iuc2lnbmFsKGNtLCAndW5mb2xkJywgY20sIGZyb20sIHRvKTtcbiAgICB9KTtcbiAgICBDb2RlTWlycm9yLnNpZ25hbChjbSwgJ2ZvbGQnLCBjbSwgcmFuZ2UuZnJvbSwgcmFuZ2UudG8pO1xuICB9XG5cbiAgZnVuY3Rpb24gbWFrZVdpZGdldChjbSwgb3B0aW9ucykge1xuICAgIGxldCB3aWRnZXQgPSBnZXRPcHRpb24oY20sIG9wdGlvbnMsICd3aWRnZXQnKTtcbiAgICBpZiAodHlwZW9mIHdpZGdldCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnN0IHRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh3aWRnZXQpO1xuICAgICAgd2lkZ2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgd2lkZ2V0LmFwcGVuZENoaWxkKHRleHQpO1xuICAgICAgd2lkZ2V0LmNsYXNzTmFtZSA9ICdDb2RlTWlycm9yLWZvbGRtYXJrZXInO1xuICAgIH0gZWxzZSBpZiAod2lkZ2V0KSB7XG4gICAgICB3aWRnZXQgPSB3aWRnZXQuY2xvbmVOb2RlKHRydWUpO1xuICAgIH1cbiAgICByZXR1cm4gd2lkZ2V0O1xuICB9XG5cbiAgLy8gQ2x1bXN5IGJhY2t3YXJkcy1jb21wYXRpYmxlIGludGVyZmFjZVxuICBDb2RlTWlycm9yLm5ld0ZvbGRGdW5jdGlvbiA9IGZ1bmN0aW9uIChyYW5nZUZpbmRlciwgd2lkZ2V0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjbSwgcG9zKSB7XG4gICAgICBkb0ZvbGQoY20sIHBvcywge1xuICAgICAgICByYW5nZUZpbmRlcixcbiAgICAgICAgd2lkZ2V0LFxuICAgICAgfSk7XG4gICAgfTtcbiAgfTtcblxuICAvLyBOZXctc3R5bGUgaW50ZXJmYWNlXG4gIENvZGVNaXJyb3IuZGVmaW5lRXh0ZW5zaW9uKCdmb2xkQ29kZScsIGZ1bmN0aW9uIChwb3MsIG9wdGlvbnMsIGZvcmNlKSB7XG4gICAgZG9Gb2xkKHRoaXMsIHBvcywgb3B0aW9ucywgZm9yY2UpO1xuICB9KTtcblxuICBDb2RlTWlycm9yLmRlZmluZUV4dGVuc2lvbignaXNGb2xkZWQnLCBmdW5jdGlvbiAocG9zKSB7XG4gICAgY29uc3QgbWFya3MgPSB0aGlzLmZpbmRNYXJrc0F0KHBvcyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXJrcy5sZW5ndGg7ICsraSkge1xuICAgICAgaWYgKG1hcmtzW2ldLl9faXNGb2xkKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIENvZGVNaXJyb3IuY29tbWFuZHMudG9nZ2xlRm9sZCA9IGZ1bmN0aW9uIChjbSkge1xuICAgIGNtLmZvbGRDb2RlKGNtLmdldEN1cnNvcigpKTtcbiAgfTtcbiAgQ29kZU1pcnJvci5jb21tYW5kcy5mb2xkID0gZnVuY3Rpb24gKGNtKSB7XG4gICAgY20uZm9sZENvZGUoY20uZ2V0Q3Vyc29yKCksIG51bGwsICdmb2xkJyk7XG4gIH07XG4gIENvZGVNaXJyb3IuY29tbWFuZHMudW5mb2xkID0gZnVuY3Rpb24gKGNtKSB7XG4gICAgY20uZm9sZENvZGUoY20uZ2V0Q3Vyc29yKCksIG51bGwsICd1bmZvbGQnKTtcbiAgfTtcbiAgQ29kZU1pcnJvci5jb21tYW5kcy5mb2xkQWxsID0gZnVuY3Rpb24gKGNtKSB7XG4gICAgY20ub3BlcmF0aW9uKCgpID0+IHtcbiAgICAgIGZvciAobGV0IGkgPSBjbS5maXJzdExpbmUoKSwgZSA9IGNtLmxhc3RMaW5lKCk7IGkgPD0gZTsgaSsrKSB7XG4gICAgICAgIGNtLmZvbGRDb2RlKENvZGVNaXJyb3IuUG9zKGksIDApLCBudWxsLCAnZm9sZCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuICBDb2RlTWlycm9yLmNvbW1hbmRzLnVuZm9sZEFsbCA9IGZ1bmN0aW9uIChjbSkge1xuICAgIGNtLm9wZXJhdGlvbigoKSA9PiB7XG4gICAgICBmb3IgKGxldCBpID0gY20uZmlyc3RMaW5lKCksIGUgPSBjbS5sYXN0TGluZSgpOyBpIDw9IGU7IGkrKykge1xuICAgICAgICBjbS5mb2xkQ29kZShDb2RlTWlycm9yLlBvcyhpLCAwKSwgbnVsbCwgJ3VuZm9sZCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIENvZGVNaXJyb3IucmVnaXN0ZXJIZWxwZXIoJ2ZvbGQnLCAnY29tYmluZScsIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBmdW5jcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjbSwgc3RhcnQpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZnVuY3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgY29uc3QgZm91bmQgPSBmdW5jc1tpXShjbSwgc3RhcnQpO1xuICAgICAgICBpZiAoZm91bmQpIHJldHVybiBmb3VuZDtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcblxuICBDb2RlTWlycm9yLnJlZ2lzdGVySGVscGVyKCdmb2xkJywgJ2F1dG8nLCAoY20sIHN0YXJ0KSA9PiB7XG4gICAgY29uc3QgaGVscGVycyA9IGNtLmdldEhlbHBlcnMoc3RhcnQsICdmb2xkJyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoZWxwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjdXIgPSBoZWxwZXJzW2ldKGNtLCBzdGFydCk7XG4gICAgICBpZiAoY3VyKSByZXR1cm4gY3VyO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgcmFuZ2VGaW5kZXI6IENvZGVNaXJyb3IuZm9sZC5hdXRvLFxuICAgIHdpZGdldDogJ1xcdTIxOTQnLFxuICAgIG1pbkZvbGRTaXplOiAwLFxuICAgIHNjYW5VcDogZmFsc2UsXG4gICAgY2xlYXJPbkVudGVyOiB0cnVlLFxuICB9O1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lT3B0aW9uKCdmb2xkT3B0aW9ucycsIG51bGwpO1xuXG4gIGZ1bmN0aW9uIGdldE9wdGlvbihjbSwgb3B0aW9ucywgbmFtZSkge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnNbbmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIG9wdGlvbnNbbmFtZV07XG4gICAgfVxuICAgIGNvbnN0IGVkaXRvck9wdGlvbnMgPSBjbS5vcHRpb25zLmZvbGRPcHRpb25zO1xuICAgIGlmIChlZGl0b3JPcHRpb25zICYmIGVkaXRvck9wdGlvbnNbbmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGVkaXRvck9wdGlvbnNbbmFtZV07XG4gICAgfVxuICAgIHJldHVybiBkZWZhdWx0T3B0aW9uc1tuYW1lXTtcbiAgfVxuXG4gIENvZGVNaXJyb3IuZGVmaW5lRXh0ZW5zaW9uKCdmb2xkT3B0aW9uJywgZnVuY3Rpb24gKG9wdGlvbnMsIG5hbWUpIHtcbiAgICByZXR1cm4gZ2V0T3B0aW9uKHRoaXMsIG9wdGlvbnMsIG5hbWUpO1xuICB9KTtcblxufVxuIiwgIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRCcmFjZWZvbGQoQ29kZU1pcnJvcikge1xuXG4gIENvZGVNaXJyb3IucmVnaXN0ZXJIZWxwZXIoJ2ZvbGQnLCAnYnJhY2UnLCAoY20sIHN0YXJ0KSA9PiB7XG4gICAgY29uc3QgbGluZSA9IHN0YXJ0LmxpbmU7XG4gICAgY29uc3QgbGluZVRleHQgPSBjbS5nZXRMaW5lKGxpbmUpO1xuICAgIGxldCB0b2tlblR5cGU7XG5cbiAgICBmdW5jdGlvbiBmaW5kT3BlbmluZyhvcGVuQ2gpIHtcbiAgICAgIGZvciAobGV0IGF0ID0gc3RhcnQuY2gsIHBhc3MgPSAwOyA7KSB7XG4gICAgICAgIGNvbnN0IGZvdW5kID0gYXQgPD0gMCA/IC0xIDogbGluZVRleHQubGFzdEluZGV4T2Yob3BlbkNoLCBhdCAtIDEpO1xuICAgICAgICBpZiAoZm91bmQgPT0gLTEpIHtcbiAgICAgICAgICBpZiAocGFzcyA9PSAxKSBicmVhaztcbiAgICAgICAgICBwYXNzID0gMTtcbiAgICAgICAgICBhdCA9IGxpbmVUZXh0Lmxlbmd0aDtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFzcyA9PSAxICYmIGZvdW5kIDwgc3RhcnQuY2gpIGJyZWFrO1xuICAgICAgICB0b2tlblR5cGUgPSBjbS5nZXRUb2tlblR5cGVBdChDb2RlTWlycm9yLlBvcyhsaW5lLCBmb3VuZCArIDEpKTtcbiAgICAgICAgaWYgKCEvXihjb21tZW50fHN0cmluZykvLnRlc3QodG9rZW5UeXBlKSkgcmV0dXJuIGZvdW5kICsgMTtcbiAgICAgICAgYXQgPSBmb3VuZCAtIDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHN0YXJ0VG9rZW4gPSAneyc7XG4gICAgbGV0IGVuZFRva2VuID0gJ30nO1xuICAgIGxldCBzdGFydENoID0gZmluZE9wZW5pbmcoJ3snKTtcbiAgICBpZiAoc3RhcnRDaCA9PSBudWxsKSB7XG4gICAgICBzdGFydFRva2VuID0gJ1snLCBlbmRUb2tlbiA9ICddJztcbiAgICAgIHN0YXJ0Q2ggPSBmaW5kT3BlbmluZygnWycpO1xuICAgIH1cblxuICAgIGlmIChzdGFydENoID09IG51bGwpIHJldHVybjtcbiAgICBsZXQgY291bnQgPSAxO1xuICAgIGNvbnN0IGxhc3RMaW5lID0gY20ubGFzdExpbmUoKTtcbiAgICBsZXQgZW5kO1xuICAgIGxldCBlbmRDaDtcbiAgICBvdXRlcjogZm9yIChsZXQgaSA9IGxpbmU7IGkgPD0gbGFzdExpbmU7ICsraSkge1xuICAgICAgY29uc3QgdGV4dCA9IGNtLmdldExpbmUoaSk7XG4gICAgICBsZXQgcG9zID0gaSA9PSBsaW5lID8gc3RhcnRDaCA6IDA7XG4gICAgICBmb3IgKDsgOykge1xuICAgICAgICBsZXQgbmV4dE9wZW4gPSB0ZXh0LmluZGV4T2Yoc3RhcnRUb2tlbiwgcG9zKTtcbiAgICAgICAgbGV0IG5leHRDbG9zZSA9IHRleHQuaW5kZXhPZihlbmRUb2tlbiwgcG9zKTtcbiAgICAgICAgaWYgKG5leHRPcGVuIDwgMCkgbmV4dE9wZW4gPSB0ZXh0Lmxlbmd0aDtcbiAgICAgICAgaWYgKG5leHRDbG9zZSA8IDApIG5leHRDbG9zZSA9IHRleHQubGVuZ3RoO1xuICAgICAgICBwb3MgPSBNYXRoLm1pbihuZXh0T3BlbiwgbmV4dENsb3NlKTtcbiAgICAgICAgaWYgKHBvcyA9PSB0ZXh0Lmxlbmd0aCkgYnJlYWs7XG4gICAgICAgIGlmIChjbS5nZXRUb2tlblR5cGVBdChDb2RlTWlycm9yLlBvcyhpLCBwb3MgKyAxKSkgPT0gdG9rZW5UeXBlKSB7XG4gICAgICAgICAgaWYgKHBvcyA9PSBuZXh0T3BlbikgKytjb3VudDtcbiAgICAgICAgICBlbHNlIGlmICghLS1jb3VudCkge1xuICAgICAgICAgICAgZW5kID0gaTtcbiAgICAgICAgICAgIGVuZENoID0gcG9zO1xuICAgICAgICAgICAgYnJlYWsgb3V0ZXI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICsrcG9zO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZW5kID09IG51bGwgfHwgbGluZSA9PSBlbmQpIHJldHVybjtcbiAgICByZXR1cm4ge1xuICAgICAgZnJvbTogQ29kZU1pcnJvci5Qb3MobGluZSwgc3RhcnRDaCksXG4gICAgICB0bzogQ29kZU1pcnJvci5Qb3MoZW5kLCBlbmRDaCksXG4gICAgfTtcbiAgfSk7XG5cbiAgQ29kZU1pcnJvci5yZWdpc3RlckhlbHBlcignZm9sZCcsICdpbXBvcnQnLCAoY20sIHN0YXJ0KSA9PiB7XG4gICAgZnVuY3Rpb24gaGFzSW1wb3J0KGxpbmUpIHtcbiAgICAgIGlmIChsaW5lIDwgY20uZmlyc3RMaW5lKCkgfHwgbGluZSA+IGNtLmxhc3RMaW5lKCkpIHJldHVybiBudWxsO1xuICAgICAgbGV0IHN0YXJ0ID0gY20uZ2V0VG9rZW5BdChDb2RlTWlycm9yLlBvcyhsaW5lLCAxKSk7XG4gICAgICBpZiAoIS9cXFMvLnRlc3Qoc3RhcnQuc3RyaW5nKSkgc3RhcnQgPSBjbS5nZXRUb2tlbkF0KENvZGVNaXJyb3IuUG9zKGxpbmUsIHN0YXJ0LmVuZCArIDEpKTtcbiAgICAgIGlmIChzdGFydC50eXBlICE9ICdrZXl3b3JkJyB8fCBzdGFydC5zdHJpbmcgIT0gJ2ltcG9ydCcpIHJldHVybiBudWxsO1xuICAgICAgLy8gTm93IGZpbmQgY2xvc2luZyBzZW1pY29sb24sIHJldHVybiBpdHMgcG9zaXRpb25cbiAgICAgIGZvciAobGV0IGkgPSBsaW5lLCBlID0gTWF0aC5taW4oY20ubGFzdExpbmUoKSwgbGluZSArIDEwKTsgaSA8PSBlOyArK2kpIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGNtLmdldExpbmUoaSk7XG4gICAgICAgIGNvbnN0IHNlbWkgPSB0ZXh0LmluZGV4T2YoJzsnKTtcbiAgICAgICAgaWYgKHNlbWkgIT0gLTEpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhcnRDaDogc3RhcnQuZW5kLFxuICAgICAgICAgICAgZW5kOiBDb2RlTWlycm9yLlBvcyhpLCBzZW1pKSxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnRMaW5lID0gc3RhcnQubGluZTtcbiAgICBjb25zdCBoYXMgPSBoYXNJbXBvcnQoc3RhcnRMaW5lKTtcbiAgICBsZXQgcHJldjtcbiAgICBpZiAoIWhhcyB8fCBoYXNJbXBvcnQoc3RhcnRMaW5lIC0gMSkgfHwgKChwcmV2ID0gaGFzSW1wb3J0KHN0YXJ0TGluZSAtIDIpKSAmJiBwcmV2LmVuZC5saW5lXG4gICAgICA9PSBzdGFydExpbmUgLSAxKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGZvciAodmFyIGVuZCA9IGhhcy5lbmQ7IDspIHtcbiAgICAgIGNvbnN0IG5leHQgPSBoYXNJbXBvcnQoZW5kLmxpbmUgKyAxKTtcbiAgICAgIGlmIChuZXh0ID09IG51bGwpIGJyZWFrO1xuICAgICAgZW5kID0gbmV4dC5lbmQ7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBmcm9tOiBjbS5jbGlwUG9zKENvZGVNaXJyb3IuUG9zKHN0YXJ0TGluZSwgaGFzLnN0YXJ0Q2ggKyAxKSksXG4gICAgICB0bzogZW5kLFxuICAgIH07XG4gIH0pO1xuXG4gIENvZGVNaXJyb3IucmVnaXN0ZXJIZWxwZXIoJ2ZvbGQnLCAnaW5jbHVkZScsIChjbSwgc3RhcnQpID0+IHtcbiAgICBmdW5jdGlvbiBoYXNJbmNsdWRlKGxpbmUpIHtcbiAgICAgIGlmIChsaW5lIDwgY20uZmlyc3RMaW5lKCkgfHwgbGluZSA+IGNtLmxhc3RMaW5lKCkpIHJldHVybiBudWxsO1xuICAgICAgbGV0IHN0YXJ0ID0gY20uZ2V0VG9rZW5BdChDb2RlTWlycm9yLlBvcyhsaW5lLCAxKSk7XG4gICAgICBpZiAoIS9cXFMvLnRlc3Qoc3RhcnQuc3RyaW5nKSkgc3RhcnQgPSBjbS5nZXRUb2tlbkF0KENvZGVNaXJyb3IuUG9zKGxpbmUsIHN0YXJ0LmVuZCArIDEpKTtcbiAgICAgIGlmIChzdGFydC50eXBlID09ICdtZXRhJyAmJiBzdGFydC5zdHJpbmcuc2xpY2UoMCwgOCkgPT0gJyNpbmNsdWRlJykgcmV0dXJuIHN0YXJ0LnN0YXJ0ICsgODtcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydExpbmUgPSBzdGFydC5saW5lO1xuICAgIGNvbnN0IGhhcyA9IGhhc0luY2x1ZGUoc3RhcnRMaW5lKTtcbiAgICBpZiAoaGFzID09IG51bGwgfHwgaGFzSW5jbHVkZShzdGFydExpbmUgLSAxKSAhPSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICBmb3IgKHZhciBlbmQgPSBzdGFydExpbmU7IDspIHtcbiAgICAgIGNvbnN0IG5leHQgPSBoYXNJbmNsdWRlKGVuZCArIDEpO1xuICAgICAgaWYgKG5leHQgPT0gbnVsbCkgYnJlYWs7XG4gICAgICArK2VuZDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGZyb206IENvZGVNaXJyb3IuUG9zKHN0YXJ0TGluZSwgaGFzICsgMSksXG4gICAgICB0bzogY20uY2xpcFBvcyhDb2RlTWlycm9yLlBvcyhlbmQpKSxcbiAgICB9O1xuICB9KTtcblxufVxuIiwgIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRDb21tZW50Zm9sZChDb2RlTWlycm9yKSB7XG5cbiAgQ29kZU1pcnJvci5yZWdpc3Rlckdsb2JhbEhlbHBlcignZm9sZCcsICdjb21tZW50JywgKG1vZGUpID0+IHtcbiAgICByZXR1cm4gbW9kZS5ibG9ja0NvbW1lbnRTdGFydCAmJiBtb2RlLmJsb2NrQ29tbWVudEVuZDtcbiAgfSwgKGNtLCBzdGFydCkgPT4ge1xuICAgIGNvbnN0IG1vZGUgPSBjbS5nZXRNb2RlQXQoc3RhcnQpO1xuICAgIGNvbnN0IHN0YXJ0VG9rZW4gPSBtb2RlLmJsb2NrQ29tbWVudFN0YXJ0O1xuICAgIGNvbnN0IGVuZFRva2VuID0gbW9kZS5ibG9ja0NvbW1lbnRFbmQ7XG4gICAgaWYgKCFzdGFydFRva2VuIHx8ICFlbmRUb2tlbikgcmV0dXJuO1xuICAgIGNvbnN0IGxpbmUgPSBzdGFydC5saW5lO1xuICAgIGNvbnN0IGxpbmVUZXh0ID0gY20uZ2V0TGluZShsaW5lKTtcblxuICAgIGxldCBzdGFydENoO1xuICAgIGZvciAobGV0IGF0ID0gc3RhcnQuY2gsIHBhc3MgPSAwOyA7KSB7XG4gICAgICBjb25zdCBmb3VuZCA9IGF0IDw9IDAgPyAtMSA6IGxpbmVUZXh0Lmxhc3RJbmRleE9mKHN0YXJ0VG9rZW4sIGF0IC0gMSk7XG4gICAgICBpZiAoZm91bmQgPT0gLTEpIHtcbiAgICAgICAgaWYgKHBhc3MgPT0gMSkgcmV0dXJuO1xuICAgICAgICBwYXNzID0gMTtcbiAgICAgICAgYXQgPSBsaW5lVGV4dC5sZW5ndGg7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHBhc3MgPT0gMSAmJiBmb3VuZCA8IHN0YXJ0LmNoKSByZXR1cm47XG4gICAgICBpZiAoL2NvbW1lbnQvLnRlc3QoY20uZ2V0VG9rZW5UeXBlQXQoQ29kZU1pcnJvci5Qb3MobGluZSwgZm91bmQgKyAxKSkpXG4gICAgICAgICYmIChmb3VuZCA9PSAwIHx8IGxpbmVUZXh0LnNsaWNlKGZvdW5kIC0gZW5kVG9rZW4ubGVuZ3RoLCBmb3VuZCkgPT0gZW5kVG9rZW5cbiAgICAgICAgICB8fCAhL2NvbW1lbnQvLnRlc3QoY20uZ2V0VG9rZW5UeXBlQXQoQ29kZU1pcnJvci5Qb3MobGluZSwgZm91bmQpKSkpKSB7XG4gICAgICAgIHN0YXJ0Q2ggPSBmb3VuZCArIHN0YXJ0VG9rZW4ubGVuZ3RoO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGF0ID0gZm91bmQgLSAxO1xuICAgIH1cblxuICAgIGxldCBkZXB0aCA9IDE7XG4gICAgY29uc3QgbGFzdExpbmUgPSBjbS5sYXN0TGluZSgpO1xuICAgIGxldCBlbmQ7XG4gICAgbGV0IGVuZENoO1xuICAgIG91dGVyOiBmb3IgKGxldCBpID0gbGluZTsgaSA8PSBsYXN0TGluZTsgKytpKSB7XG4gICAgICBjb25zdCB0ZXh0ID0gY20uZ2V0TGluZShpKTtcbiAgICAgIGxldCBwb3MgPSBpID09IGxpbmUgPyBzdGFydENoIDogMDtcbiAgICAgIGZvciAoOyA7KSB7XG4gICAgICAgIGxldCBuZXh0T3BlbiA9IHRleHQuaW5kZXhPZihzdGFydFRva2VuLCBwb3MpO1xuICAgICAgICBsZXQgbmV4dENsb3NlID0gdGV4dC5pbmRleE9mKGVuZFRva2VuLCBwb3MpO1xuICAgICAgICBpZiAobmV4dE9wZW4gPCAwKSBuZXh0T3BlbiA9IHRleHQubGVuZ3RoO1xuICAgICAgICBpZiAobmV4dENsb3NlIDwgMCkgbmV4dENsb3NlID0gdGV4dC5sZW5ndGg7XG4gICAgICAgIHBvcyA9IE1hdGgubWluKG5leHRPcGVuLCBuZXh0Q2xvc2UpO1xuICAgICAgICBpZiAocG9zID09IHRleHQubGVuZ3RoKSBicmVhaztcbiAgICAgICAgaWYgKHBvcyA9PSBuZXh0T3BlbikgKytkZXB0aDtcbiAgICAgICAgZWxzZSBpZiAoIS0tZGVwdGgpIHtcbiAgICAgICAgICBlbmQgPSBpO1xuICAgICAgICAgIGVuZENoID0gcG9zO1xuICAgICAgICAgIGJyZWFrIG91dGVyO1xuICAgICAgICB9XG4gICAgICAgICsrcG9zO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZW5kID09IG51bGwgfHwgbGluZSA9PSBlbmQgJiYgZW5kQ2ggPT0gc3RhcnRDaCkgcmV0dXJuO1xuICAgIHJldHVybiB7XG4gICAgICBmcm9tOiBDb2RlTWlycm9yLlBvcyhsaW5lLCBzdGFydENoKSxcbiAgICAgIHRvOiBDb2RlTWlycm9yLlBvcyhlbmQsIGVuZENoKSxcbiAgICB9O1xuICB9KTtcblxufVxuIiwgIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRGb2xkZ3V0dGVyKENvZGVNaXJyb3IpIHtcblxuICBDb2RlTWlycm9yLmRlZmluZU9wdGlvbignZm9sZEd1dHRlcicsIGZhbHNlLCAoY20sIHZhbCwgb2xkKSA9PiB7XG4gICAgaWYgKG9sZCAmJiBvbGQgIT0gQ29kZU1pcnJvci5Jbml0KSB7XG4gICAgICBjbS5jbGVhckd1dHRlcihjbS5zdGF0ZS5mb2xkR3V0dGVyLm9wdGlvbnMuZ3V0dGVyKTtcbiAgICAgIGNtLnN0YXRlLmZvbGRHdXR0ZXIgPSBudWxsO1xuICAgICAgY20ub2ZmKCdndXR0ZXJDbGljaycsIG9uR3V0dGVyQ2xpY2spO1xuICAgICAgY20ub2ZmKCdjaGFuZ2UnLCBvbkNoYW5nZSk7XG4gICAgICBjbS5vZmYoJ3ZpZXdwb3J0Q2hhbmdlJywgb25WaWV3cG9ydENoYW5nZSk7XG4gICAgICBjbS5vZmYoJ2ZvbGQnLCBvbkZvbGQpO1xuICAgICAgY20ub2ZmKCd1bmZvbGQnLCBvbkZvbGQpO1xuICAgICAgY20ub2ZmKCdzd2FwRG9jJywgb25DaGFuZ2UpO1xuICAgIH1cbiAgICBpZiAodmFsKSB7XG4gICAgICBjbS5zdGF0ZS5mb2xkR3V0dGVyID0gbmV3IFN0YXRlKHBhcnNlT3B0aW9ucyh2YWwpKTtcbiAgICAgIHVwZGF0ZUluVmlld3BvcnQoY20pO1xuICAgICAgY20ub24oJ2d1dHRlckNsaWNrJywgb25HdXR0ZXJDbGljayk7XG4gICAgICBjbS5vbignY2hhbmdlJywgb25DaGFuZ2UpO1xuICAgICAgY20ub24oJ3ZpZXdwb3J0Q2hhbmdlJywgb25WaWV3cG9ydENoYW5nZSk7XG4gICAgICBjbS5vbignZm9sZCcsIG9uRm9sZCk7XG4gICAgICBjbS5vbigndW5mb2xkJywgb25Gb2xkKTtcbiAgICAgIGNtLm9uKCdzd2FwRG9jJywgb25DaGFuZ2UpO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3QgUG9zID0gQ29kZU1pcnJvci5Qb3M7XG5cbiAgZnVuY3Rpb24gU3RhdGUob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5mcm9tID0gdGhpcy50byA9IDA7XG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZU9wdGlvbnMob3B0cykge1xuICAgIGlmIChvcHRzID09PSB0cnVlKSBvcHRzID0ge307XG4gICAgaWYgKG9wdHMuZ3V0dGVyID09IG51bGwpIG9wdHMuZ3V0dGVyID0gJ0NvZGVNaXJyb3ItZm9sZGd1dHRlcic7XG4gICAgaWYgKG9wdHMuaW5kaWNhdG9yT3BlbiA9PSBudWxsKSBvcHRzLmluZGljYXRvck9wZW4gPSAnQ29kZU1pcnJvci1mb2xkZ3V0dGVyLW9wZW4nO1xuICAgIGlmIChvcHRzLmluZGljYXRvckZvbGRlZCA9PSBudWxsKSBvcHRzLmluZGljYXRvckZvbGRlZCA9ICdDb2RlTWlycm9yLWZvbGRndXR0ZXItZm9sZGVkJztcbiAgICByZXR1cm4gb3B0cztcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzRm9sZGVkKGNtLCBsaW5lKSB7XG4gICAgY29uc3QgbWFya3MgPSBjbS5maW5kTWFya3MoUG9zKGxpbmUsIDApLCBQb3MobGluZSArIDEsIDApKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hcmtzLmxlbmd0aDsgKytpKSB7XG4gICAgICBpZiAobWFya3NbaV0uX19pc0ZvbGQpIHtcbiAgICAgICAgY29uc3QgZnJvbVBvcyA9IG1hcmtzW2ldLmZpbmQoLTEpO1xuICAgICAgICBpZiAoZnJvbVBvcyAmJiBmcm9tUG9zLmxpbmUgPT09IGxpbmUpIHtcbiAgICAgICAgICByZXR1cm4gbWFya3NbaV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBtYXJrZXIoc3BlYykge1xuICAgIGlmICh0eXBlb2Ygc3BlYyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnN0IGVsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgZWx0LmNsYXNzTmFtZSA9IHNwZWMgKyAnIENvZGVNaXJyb3ItZ3V0dGVybWFya2VyLXN1YnRsZSc7XG4gICAgICByZXR1cm4gZWx0O1xuICAgIH1cbiAgICByZXR1cm4gc3BlYy5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUZvbGRJbmZvKGNtLCBmcm9tLCB0bykge1xuICAgIGNvbnN0IG9wdHMgPSBjbS5zdGF0ZS5mb2xkR3V0dGVyLm9wdGlvbnM7XG4gICAgbGV0IGN1ciA9IGZyb207XG4gICAgY29uc3QgbWluU2l6ZSA9IGNtLmZvbGRPcHRpb24ob3B0cywgJ21pbkZvbGRTaXplJyk7XG4gICAgY29uc3QgZnVuYyA9IGNtLmZvbGRPcHRpb24ob3B0cywgJ3JhbmdlRmluZGVyJyk7XG4gICAgY20uZWFjaExpbmUoZnJvbSwgdG8sIChsaW5lKSA9PiB7XG4gICAgICBsZXQgbWFyayA9IG51bGw7XG4gICAgICBpZiAoaXNGb2xkZWQoY20sIGN1cikpIHtcbiAgICAgICAgbWFyayA9IG1hcmtlcihvcHRzLmluZGljYXRvckZvbGRlZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBwb3MgPSBQb3MoY3VyLCAwKTtcbiAgICAgICAgY29uc3QgcmFuZ2UgPSBmdW5jICYmIGZ1bmMoY20sIHBvcyk7XG4gICAgICAgIGlmIChyYW5nZSAmJiByYW5nZS50by5saW5lIC0gcmFuZ2UuZnJvbS5saW5lID49IG1pblNpemUpIHtcbiAgICAgICAgICBtYXJrID0gbWFya2VyKG9wdHMuaW5kaWNhdG9yT3Blbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNtLnNldEd1dHRlck1hcmtlcihsaW5lLCBvcHRzLmd1dHRlciwgbWFyayk7XG4gICAgICArK2N1cjtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUluVmlld3BvcnQoY20pIHtcbiAgICBjb25zdCB2cCA9IGNtLmdldFZpZXdwb3J0KCk7XG4gICAgY29uc3Qgc3RhdGUgPSBjbS5zdGF0ZS5mb2xkR3V0dGVyO1xuICAgIGlmICghc3RhdGUpIHJldHVybjtcbiAgICBjbS5vcGVyYXRpb24oKCkgPT4ge1xuICAgICAgdXBkYXRlRm9sZEluZm8oY20sIHZwLmZyb20sIHZwLnRvKTtcbiAgICB9KTtcbiAgICBzdGF0ZS5mcm9tID0gdnAuZnJvbTtcbiAgICBzdGF0ZS50byA9IHZwLnRvO1xuICB9XG5cbiAgZnVuY3Rpb24gb25HdXR0ZXJDbGljayhjbSwgbGluZSwgZ3V0dGVyKSB7XG4gICAgY29uc3Qgc3RhdGUgPSBjbS5zdGF0ZS5mb2xkR3V0dGVyO1xuICAgIGlmICghc3RhdGUpIHJldHVybjtcbiAgICBjb25zdCBvcHRzID0gc3RhdGUub3B0aW9ucztcbiAgICBpZiAoZ3V0dGVyICE9IG9wdHMuZ3V0dGVyKSByZXR1cm47XG4gICAgY29uc3QgZm9sZGVkID0gaXNGb2xkZWQoY20sIGxpbmUpO1xuICAgIGlmIChmb2xkZWQpIGZvbGRlZC5jbGVhcigpO1xuICAgIGVsc2UgY20uZm9sZENvZGUoUG9zKGxpbmUsIDApLCBvcHRzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uQ2hhbmdlKGNtKSB7XG4gICAgY29uc3Qgc3RhdGUgPSBjbS5zdGF0ZS5mb2xkR3V0dGVyO1xuICAgIGlmICghc3RhdGUpIHJldHVybjtcbiAgICBjb25zdCBvcHRzID0gc3RhdGUub3B0aW9ucztcbiAgICBzdGF0ZS5mcm9tID0gc3RhdGUudG8gPSAwO1xuICAgIGNsZWFyVGltZW91dChzdGF0ZS5jaGFuZ2VVcGRhdGUpO1xuICAgIHN0YXRlLmNoYW5nZVVwZGF0ZSA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdXBkYXRlSW5WaWV3cG9ydChjbSk7XG4gICAgfSwgb3B0cy5mb2xkT25DaGFuZ2VUaW1lU3BhbiB8fCA2MDApO1xuICB9XG5cbiAgZnVuY3Rpb24gb25WaWV3cG9ydENoYW5nZShjbSkge1xuICAgIGNvbnN0IHN0YXRlID0gY20uc3RhdGUuZm9sZEd1dHRlcjtcbiAgICBpZiAoIXN0YXRlKSByZXR1cm47XG4gICAgY29uc3Qgb3B0cyA9IHN0YXRlLm9wdGlvbnM7XG4gICAgY2xlYXJUaW1lb3V0KHN0YXRlLmNoYW5nZVVwZGF0ZSk7XG4gICAgc3RhdGUuY2hhbmdlVXBkYXRlID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCB2cCA9IGNtLmdldFZpZXdwb3J0KCk7XG4gICAgICBpZiAoc3RhdGUuZnJvbSA9PSBzdGF0ZS50byB8fCB2cC5mcm9tIC0gc3RhdGUudG8gPiAyMCB8fCBzdGF0ZS5mcm9tIC0gdnAudG8gPiAyMCkge1xuICAgICAgICB1cGRhdGVJblZpZXdwb3J0KGNtKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNtLm9wZXJhdGlvbigoKSA9PiB7XG4gICAgICAgICAgaWYgKHZwLmZyb20gPCBzdGF0ZS5mcm9tKSB7XG4gICAgICAgICAgICB1cGRhdGVGb2xkSW5mbyhjbSwgdnAuZnJvbSwgc3RhdGUuZnJvbSk7XG4gICAgICAgICAgICBzdGF0ZS5mcm9tID0gdnAuZnJvbTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHZwLnRvID4gc3RhdGUudG8pIHtcbiAgICAgICAgICAgIHVwZGF0ZUZvbGRJbmZvKGNtLCBzdGF0ZS50bywgdnAudG8pO1xuICAgICAgICAgICAgc3RhdGUudG8gPSB2cC50bztcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIG9wdHMudXBkYXRlVmlld3BvcnRUaW1lU3BhbiB8fCA0MDApO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Gb2xkKGNtLCBmcm9tKSB7XG4gICAgY29uc3Qgc3RhdGUgPSBjbS5zdGF0ZS5mb2xkR3V0dGVyO1xuICAgIGlmICghc3RhdGUpIHJldHVybjtcbiAgICBjb25zdCBsaW5lID0gZnJvbS5saW5lO1xuICAgIGlmIChsaW5lID49IHN0YXRlLmZyb20gJiYgbGluZSA8IHN0YXRlLnRvKSB7XG4gICAgICB1cGRhdGVGb2xkSW5mbyhjbSwgbGluZSwgbGluZSArIDEpO1xuICAgIH1cbiAgfVxuXG59XG4iLCAiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwczovL2NvZGVtaXJyb3IubmV0L0xJQ0VOU0VcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEluZGVudGZvbGQoQ29kZU1pcnJvcikge1xuXG4gIGZ1bmN0aW9uIGxpbmVJbmRlbnQoY20sIGxpbmVObykge1xuICAgIGNvbnN0IHRleHQgPSBjbS5nZXRMaW5lKGxpbmVObyk7XG4gICAgY29uc3Qgc3BhY2VUbyA9IHRleHQuc2VhcmNoKC9cXFMvKTtcbiAgICBpZiAoc3BhY2VUbyA9PSAtMSB8fCAvXFxiY29tbWVudFxcYi8udGVzdChjbS5nZXRUb2tlblR5cGVBdChDb2RlTWlycm9yLlBvcyhsaW5lTm8sIHNwYWNlVG8gKyAxKSkpKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIHJldHVybiBDb2RlTWlycm9yLmNvdW50Q29sdW1uKHRleHQsIG51bGwsIGNtLmdldE9wdGlvbigndGFiU2l6ZScpKTtcbiAgfVxuXG4gIENvZGVNaXJyb3IucmVnaXN0ZXJIZWxwZXIoJ2ZvbGQnLCAnaW5kZW50JywgKGNtLCBzdGFydCkgPT4ge1xuICAgIGNvbnN0IG15SW5kZW50ID0gbGluZUluZGVudChjbSwgc3RhcnQubGluZSk7XG4gICAgaWYgKG15SW5kZW50IDwgMCkgcmV0dXJuO1xuICAgIGxldCBsYXN0TGluZUluRm9sZCA9IG51bGw7XG5cbiAgICAvLyBHbyB0aHJvdWdoIGxpbmVzIHVudGlsIHdlIGZpbmQgYSBsaW5lIHRoYXQgZGVmaW5pdGVseSBkb2Vzbid0IGJlbG9uZyBpblxuICAgIC8vIHRoZSBibG9jayB3ZSdyZSBmb2xkaW5nLCBvciB0byB0aGUgZW5kLlxuICAgIGZvciAobGV0IGkgPSBzdGFydC5saW5lICsgMSwgZW5kID0gY20ubGFzdExpbmUoKTsgaSA8PSBlbmQ7ICsraSkge1xuICAgICAgY29uc3QgaW5kZW50ID0gbGluZUluZGVudChjbSwgaSk7XG4gICAgICBpZiAoaW5kZW50ID09IC0xKSB7IH0gZWxzZSBpZiAoaW5kZW50ID4gbXlJbmRlbnQpIHtcbiAgICAgICAgLy8gTGluZXMgd2l0aCBhIGdyZWF0ZXIgaW5kZW50IGFyZSBjb25zaWRlcmVkIHBhcnQgb2YgdGhlIGJsb2NrLlxuICAgICAgICBsYXN0TGluZUluRm9sZCA9IGk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJZiB0aGlzIGxpbmUgaGFzIG5vbi1zcGFjZSwgbm9uLWNvbW1lbnQgY29udGVudCwgYW5kIGlzXG4gICAgICAgIC8vIGluZGVudGVkIGxlc3Mgb3IgZXF1YWwgdG8gdGhlIHN0YXJ0IGxpbmUsIGl0IGlzIHRoZSBzdGFydCBvZlxuICAgICAgICAvLyBhbm90aGVyIGJsb2NrLlxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGxhc3RMaW5lSW5Gb2xkKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBmcm9tOiBDb2RlTWlycm9yLlBvcyhzdGFydC5saW5lLCBjbS5nZXRMaW5lKHN0YXJ0LmxpbmUpXG4gICAgICAgICAgLmxlbmd0aCksXG4gICAgICAgIHRvOiBDb2RlTWlycm9yLlBvcyhsYXN0TGluZUluRm9sZCwgY20uZ2V0TGluZShsYXN0TGluZUluRm9sZClcbiAgICAgICAgICAubGVuZ3RoKSxcbiAgICAgIH07XG4gICAgfVxuICB9KTtcblxufVxuIiwgIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRYbWxmb2xkKENvZGVNaXJyb3IpIHtcblxuICBjb25zdCBQb3MgPSBDb2RlTWlycm9yLlBvcztcblxuICBmdW5jdGlvbiBjbXAoYSwgYikge1xuICAgIHJldHVybiBhLmxpbmUgLSBiLmxpbmUgfHwgYS5jaCAtIGIuY2g7XG4gIH1cblxuICBjb25zdCBuYW1lU3RhcnRDaGFyID0gJ0EtWl9hLXpcXFxcdTAwQzAtXFxcXHUwMEQ2XFxcXHUwMEQ4LVxcXFx1MDBGNlxcXFx1MDBGOC1cXFxcdTAyRkZcXFxcdTAzNzAtXFxcXHUwMzdEXFxcXHUwMzdGLVxcXFx1MUZGRlxcXFx1MjAwQy1cXFxcdTIwMERcXFxcdTIwNzAtXFxcXHUyMThGXFxcXHUyQzAwLVxcXFx1MkZFRlxcXFx1MzAwMS1cXFxcdUQ3RkZcXFxcdUY5MDAtXFxcXHVGRENGXFxcXHVGREYwLVxcXFx1RkZGRCc7XG4gIGNvbnN0IG5hbWVDaGFyID0gbmFtZVN0YXJ0Q2hhciArICdcXC1cXDpcXC4wLTlcXFxcdTAwQjdcXFxcdTAzMDAtXFxcXHUwMzZGXFxcXHUyMDNGLVxcXFx1MjA0MCc7XG4gIGNvbnN0IHhtbFRhZ1N0YXJ0ID0gbmV3IFJlZ0V4cCgnPCgvPykoWycgKyBuYW1lU3RhcnRDaGFyICsgJ11bJyArIG5hbWVDaGFyICsgJ10qKScsICdnJyk7XG5cbiAgZnVuY3Rpb24gSXRlcihjbSwgbGluZSwgY2gsIHJhbmdlKSB7XG4gICAgdGhpcy5saW5lID0gbGluZTtcbiAgICB0aGlzLmNoID0gY2g7XG4gICAgdGhpcy5jbSA9IGNtO1xuICAgIHRoaXMudGV4dCA9IGNtLmdldExpbmUobGluZSk7XG4gICAgdGhpcy5taW4gPSByYW5nZSA/IE1hdGgubWF4KHJhbmdlLmZyb20sIGNtLmZpcnN0TGluZSgpKSA6IGNtLmZpcnN0TGluZSgpO1xuICAgIHRoaXMubWF4ID0gcmFuZ2UgPyBNYXRoLm1pbihyYW5nZS50byAtIDEsIGNtLmxhc3RMaW5lKCkpIDogY20ubGFzdExpbmUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRhZ0F0KGl0ZXIsIGNoKSB7XG4gICAgY29uc3QgdHlwZSA9IGl0ZXIuY20uZ2V0VG9rZW5UeXBlQXQoUG9zKGl0ZXIubGluZSwgY2gpKTtcbiAgICByZXR1cm4gdHlwZSAmJiAvXFxidGFnXFxiLy50ZXN0KHR5cGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gbmV4dExpbmUoaXRlcikge1xuICAgIGlmIChpdGVyLmxpbmUgPj0gaXRlci5tYXgpIHJldHVybjtcbiAgICBpdGVyLmNoID0gMDtcbiAgICBpdGVyLnRleHQgPSBpdGVyLmNtLmdldExpbmUoKytpdGVyLmxpbmUpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJldkxpbmUoaXRlcikge1xuICAgIGlmIChpdGVyLmxpbmUgPD0gaXRlci5taW4pIHJldHVybjtcbiAgICBpdGVyLnRleHQgPSBpdGVyLmNtLmdldExpbmUoLS1pdGVyLmxpbmUpO1xuICAgIGl0ZXIuY2ggPSBpdGVyLnRleHQubGVuZ3RoO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gdG9UYWdFbmQoaXRlcikge1xuICAgIGZvciAoOyA7KSB7XG4gICAgICBjb25zdCBndCA9IGl0ZXIudGV4dC5pbmRleE9mKCc+JywgaXRlci5jaCk7XG4gICAgICBpZiAoZ3QgPT0gLTEpIHtcbiAgICAgICAgaWYgKG5leHRMaW5lKGl0ZXIpKSBjb250aW51ZTtcbiAgICAgICAgZWxzZSByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIXRhZ0F0KGl0ZXIsIGd0ICsgMSkpIHtcbiAgICAgICAgaXRlci5jaCA9IGd0ICsgMTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBsYXN0U2xhc2ggPSBpdGVyLnRleHQubGFzdEluZGV4T2YoJy8nLCBndCk7XG4gICAgICBjb25zdCBzZWxmQ2xvc2UgPSBsYXN0U2xhc2ggPiAtMSAmJiAhL1xcUy8udGVzdChpdGVyLnRleHQuc2xpY2UobGFzdFNsYXNoICsgMSwgZ3QpKTtcbiAgICAgIGl0ZXIuY2ggPSBndCArIDE7XG4gICAgICByZXR1cm4gc2VsZkNsb3NlID8gJ3NlbGZDbG9zZScgOiAncmVndWxhcic7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdG9UYWdTdGFydChpdGVyKSB7XG4gICAgZm9yICg7IDspIHtcbiAgICAgIGNvbnN0IGx0ID0gaXRlci5jaCA/IGl0ZXIudGV4dC5sYXN0SW5kZXhPZignPCcsIGl0ZXIuY2ggLSAxKSA6IC0xO1xuICAgICAgaWYgKGx0ID09IC0xKSB7XG4gICAgICAgIGlmIChwcmV2TGluZShpdGVyKSkgY29udGludWU7XG4gICAgICAgIGVsc2UgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKCF0YWdBdChpdGVyLCBsdCArIDEpKSB7XG4gICAgICAgIGl0ZXIuY2ggPSBsdDtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB4bWxUYWdTdGFydC5sYXN0SW5kZXggPSBsdDtcbiAgICAgIGl0ZXIuY2ggPSBsdDtcbiAgICAgIGNvbnN0IG1hdGNoID0geG1sVGFnU3RhcnQuZXhlYyhpdGVyLnRleHQpO1xuICAgICAgaWYgKG1hdGNoICYmIG1hdGNoLmluZGV4ID09IGx0KSByZXR1cm4gbWF0Y2g7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdG9OZXh0VGFnKGl0ZXIpIHtcbiAgICBmb3IgKDsgOykge1xuICAgICAgeG1sVGFnU3RhcnQubGFzdEluZGV4ID0gaXRlci5jaDtcbiAgICAgIGNvbnN0IGZvdW5kID0geG1sVGFnU3RhcnQuZXhlYyhpdGVyLnRleHQpO1xuICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICBpZiAobmV4dExpbmUoaXRlcikpIGNvbnRpbnVlO1xuICAgICAgICBlbHNlIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICghdGFnQXQoaXRlciwgZm91bmQuaW5kZXggKyAxKSkge1xuICAgICAgICBpdGVyLmNoID0gZm91bmQuaW5kZXggKyAxO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGl0ZXIuY2ggPSBmb3VuZC5pbmRleCArIGZvdW5kWzBdLmxlbmd0aDtcbiAgICAgIHJldHVybiBmb3VuZDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB0b1ByZXZUYWcoaXRlcikge1xuICAgIGZvciAoOyA7KSB7XG4gICAgICBjb25zdCBndCA9IGl0ZXIuY2ggPyBpdGVyLnRleHQubGFzdEluZGV4T2YoJz4nLCBpdGVyLmNoIC0gMSkgOiAtMTtcbiAgICAgIGlmIChndCA9PSAtMSkge1xuICAgICAgICBpZiAocHJldkxpbmUoaXRlcikpIGNvbnRpbnVlO1xuICAgICAgICBlbHNlIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICghdGFnQXQoaXRlciwgZ3QgKyAxKSkge1xuICAgICAgICBpdGVyLmNoID0gZ3Q7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgbGFzdFNsYXNoID0gaXRlci50ZXh0Lmxhc3RJbmRleE9mKCcvJywgZ3QpO1xuICAgICAgY29uc3Qgc2VsZkNsb3NlID0gbGFzdFNsYXNoID4gLTEgJiYgIS9cXFMvLnRlc3QoaXRlci50ZXh0LnNsaWNlKGxhc3RTbGFzaCArIDEsIGd0KSk7XG4gICAgICBpdGVyLmNoID0gZ3QgKyAxO1xuICAgICAgcmV0dXJuIHNlbGZDbG9zZSA/ICdzZWxmQ2xvc2UnIDogJ3JlZ3VsYXInO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmRNYXRjaGluZ0Nsb3NlKGl0ZXIsIHRhZykge1xuICAgIGNvbnN0IHN0YWNrID0gW107XG4gICAgZm9yICg7IDspIHtcbiAgICAgIGNvbnN0IG5leHQgPSB0b05leHRUYWcoaXRlcik7XG4gICAgICB2YXIgZW5kO1xuICAgICAgY29uc3Qgc3RhcnRMaW5lID0gaXRlci5saW5lO1xuICAgICAgY29uc3Qgc3RhcnRDaCA9IGl0ZXIuY2ggLSAobmV4dCA/IG5leHRbMF0ubGVuZ3RoIDogMCk7XG4gICAgICBpZiAoIW5leHQgfHwgIShlbmQgPSB0b1RhZ0VuZChpdGVyKSkpIHJldHVybjtcbiAgICAgIGlmIChlbmQgPT0gJ3NlbGZDbG9zZScpIGNvbnRpbnVlO1xuICAgICAgaWYgKG5leHRbMV0pIHsgLy8gY2xvc2luZyB0YWdcbiAgICAgICAgZm9yICh2YXIgaSA9IHN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgaWYgKHN0YWNrW2ldID09IG5leHRbMl0pIHtcbiAgICAgICAgICAgIHN0YWNrLmxlbmd0aCA9IGk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPCAwICYmICghdGFnIHx8IHRhZyA9PSBuZXh0WzJdKSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0YWc6IG5leHRbMl0sXG4gICAgICAgICAgICBmcm9tOiBQb3Moc3RhcnRMaW5lLCBzdGFydENoKSxcbiAgICAgICAgICAgIHRvOiBQb3MoaXRlci5saW5lLCBpdGVyLmNoKSxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgeyAvLyBvcGVuaW5nIHRhZ1xuICAgICAgICBzdGFjay5wdXNoKG5leHRbMl0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmRNYXRjaGluZ09wZW4oaXRlciwgdGFnKSB7XG4gICAgY29uc3Qgc3RhY2sgPSBbXTtcbiAgICBmb3IgKDsgOykge1xuICAgICAgY29uc3QgcHJldiA9IHRvUHJldlRhZyhpdGVyKTtcbiAgICAgIGlmICghcHJldikgcmV0dXJuO1xuICAgICAgaWYgKHByZXYgPT0gJ3NlbGZDbG9zZScpIHtcbiAgICAgICAgdG9UYWdTdGFydChpdGVyKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBlbmRMaW5lID0gaXRlci5saW5lO1xuICAgICAgY29uc3QgZW5kQ2ggPSBpdGVyLmNoO1xuICAgICAgY29uc3Qgc3RhcnQgPSB0b1RhZ1N0YXJ0KGl0ZXIpO1xuICAgICAgaWYgKCFzdGFydCkgcmV0dXJuO1xuICAgICAgaWYgKHN0YXJ0WzFdKSB7IC8vIGNsb3NpbmcgdGFnXG4gICAgICAgIHN0YWNrLnB1c2goc3RhcnRbMl0pO1xuICAgICAgfSBlbHNlIHsgLy8gb3BlbmluZyB0YWdcbiAgICAgICAgZm9yICh2YXIgaSA9IHN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgaWYgKHN0YWNrW2ldID09IHN0YXJ0WzJdKSB7XG4gICAgICAgICAgICBzdGFjay5sZW5ndGggPSBpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpIDwgMCAmJiAoIXRhZyB8fCB0YWcgPT0gc3RhcnRbMl0pKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRhZzogc3RhcnRbMl0sXG4gICAgICAgICAgICBmcm9tOiBQb3MoaXRlci5saW5lLCBpdGVyLmNoKSxcbiAgICAgICAgICAgIHRvOiBQb3MoZW5kTGluZSwgZW5kQ2gpLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBDb2RlTWlycm9yLnJlZ2lzdGVySGVscGVyKCdmb2xkJywgJ3htbCcsIChjbSwgc3RhcnQpID0+IHtcbiAgICBjb25zdCBpdGVyID0gbmV3IEl0ZXIoY20sIHN0YXJ0LmxpbmUsIDApO1xuICAgIGZvciAoOyA7KSB7XG4gICAgICBjb25zdCBvcGVuVGFnID0gdG9OZXh0VGFnKGl0ZXIpO1xuICAgICAgaWYgKCFvcGVuVGFnIHx8IGl0ZXIubGluZSAhPSBzdGFydC5saW5lKSByZXR1cm47XG4gICAgICBjb25zdCBlbmQgPSB0b1RhZ0VuZChpdGVyKTtcbiAgICAgIGlmICghZW5kKSByZXR1cm47XG4gICAgICBpZiAoIW9wZW5UYWdbMV0gJiYgZW5kICE9ICdzZWxmQ2xvc2UnKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0UG9zID0gUG9zKGl0ZXIubGluZSwgaXRlci5jaCk7XG4gICAgICAgIGNvbnN0IGVuZFBvcyA9IGZpbmRNYXRjaGluZ0Nsb3NlKGl0ZXIsIG9wZW5UYWdbMl0pO1xuICAgICAgICByZXR1cm4gZW5kUG9zICYmIGNtcChlbmRQb3MuZnJvbSwgc3RhcnRQb3MpID4gMCA/IHtcbiAgICAgICAgICBmcm9tOiBzdGFydFBvcyxcbiAgICAgICAgICB0bzogZW5kUG9zLmZyb20sXG4gICAgICAgIH0gOiBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIENvZGVNaXJyb3IuZmluZE1hdGNoaW5nVGFnID0gZnVuY3Rpb24gKGNtLCBwb3MsIHJhbmdlKSB7XG4gICAgbGV0IGl0ZXIgPSBuZXcgSXRlcihjbSwgcG9zLmxpbmUsIHBvcy5jaCwgcmFuZ2UpO1xuICAgIGlmIChpdGVyLnRleHQuaW5kZXhPZignPicpID09IC0xICYmIGl0ZXIudGV4dC5pbmRleE9mKCc8JykgPT0gLTEpIHJldHVybjtcbiAgICBjb25zdCBlbmQgPSB0b1RhZ0VuZChpdGVyKTtcbiAgICBjb25zdCB0byA9IGVuZCAmJiBQb3MoaXRlci5saW5lLCBpdGVyLmNoKTtcbiAgICBjb25zdCBzdGFydCA9IGVuZCAmJiB0b1RhZ1N0YXJ0KGl0ZXIpO1xuICAgIGlmICghZW5kIHx8ICFzdGFydCB8fCBjbXAoaXRlciwgcG9zKSA+IDApIHJldHVybjtcbiAgICBjb25zdCBoZXJlID0ge1xuICAgICAgZnJvbTogUG9zKGl0ZXIubGluZSwgaXRlci5jaCksXG4gICAgICB0byxcbiAgICAgIHRhZzogc3RhcnRbMl0sXG4gICAgfTtcbiAgICBpZiAoZW5kID09ICdzZWxmQ2xvc2UnKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBvcGVuOiBoZXJlLFxuICAgICAgICBjbG9zZTogbnVsbCxcbiAgICAgICAgYXQ6ICdvcGVuJyxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHN0YXJ0WzFdKSB7IC8vIGNsb3NpbmcgdGFnXG4gICAgICByZXR1cm4ge1xuICAgICAgICBvcGVuOiBmaW5kTWF0Y2hpbmdPcGVuKGl0ZXIsIHN0YXJ0WzJdKSxcbiAgICAgICAgY2xvc2U6IGhlcmUsXG4gICAgICAgIGF0OiAnY2xvc2UnLFxuICAgICAgfTtcbiAgICB9IC8vIG9wZW5pbmcgdGFnXG4gICAgaXRlciA9IG5ldyBJdGVyKGNtLCB0by5saW5lLCB0by5jaCwgcmFuZ2UpO1xuICAgIHJldHVybiB7XG4gICAgICBvcGVuOiBoZXJlLFxuICAgICAgY2xvc2U6IGZpbmRNYXRjaGluZ0Nsb3NlKGl0ZXIsIHN0YXJ0WzJdKSxcbiAgICAgIGF0OiAnb3BlbicsXG4gICAgfTtcblxuICB9O1xuXG4gIENvZGVNaXJyb3IuZmluZEVuY2xvc2luZ1RhZyA9IGZ1bmN0aW9uIChjbSwgcG9zLCByYW5nZSwgdGFnKSB7XG4gICAgY29uc3QgaXRlciA9IG5ldyBJdGVyKGNtLCBwb3MubGluZSwgcG9zLmNoLCByYW5nZSk7XG4gICAgZm9yICg7IDspIHtcbiAgICAgIGNvbnN0IG9wZW4gPSBmaW5kTWF0Y2hpbmdPcGVuKGl0ZXIsIHRhZyk7XG4gICAgICBpZiAoIW9wZW4pIGJyZWFrO1xuICAgICAgY29uc3QgZm9yd2FyZCA9IG5ldyBJdGVyKGNtLCBwb3MubGluZSwgcG9zLmNoLCByYW5nZSk7XG4gICAgICBjb25zdCBjbG9zZSA9IGZpbmRNYXRjaGluZ0Nsb3NlKGZvcndhcmQsIG9wZW4udGFnKTtcbiAgICAgIGlmIChjbG9zZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG9wZW4sXG4gICAgICAgICAgY2xvc2UsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIFVzZWQgYnkgYWRkb24vZWRpdC9jbG9zZXRhZy5qc1xuICBDb2RlTWlycm9yLnNjYW5Gb3JDbG9zaW5nVGFnID0gZnVuY3Rpb24gKGNtLCBwb3MsIG5hbWUsIGVuZCkge1xuICAgIGNvbnN0IGl0ZXIgPSBuZXcgSXRlcihjbSwgcG9zLmxpbmUsIHBvcy5jaCwgZW5kID8ge1xuICAgICAgZnJvbTogMCxcbiAgICAgIHRvOiBlbmQsXG4gICAgfSA6IG51bGwpO1xuICAgIHJldHVybiBmaW5kTWF0Y2hpbmdDbG9zZShpdGVyLCBuYW1lKTtcbiAgfTtcblxufVxuIiwgIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRDbG9zZWJyYWNrZXRzKENvZGVNaXJyb3IpIHtcblxuICBjb25zdCBkZWZhdWx0cyA9IHtcbiAgICBwYWlyczogXCIoKVtde30nJ1xcXCJcXFwiXCIsXG4gICAgY2xvc2VCZWZvcmU6IFwiKV19J1xcXCI6Oz5cIixcbiAgICB0cmlwbGVzOiAnJyxcbiAgICBleHBsb2RlOiAnW117fScsXG4gIH07XG5cbiAgY29uc3QgUG9zID0gQ29kZU1pcnJvci5Qb3M7XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVPcHRpb24oJ2F1dG9DbG9zZUJyYWNrZXRzJywgZmFsc2UsIChjbSwgdmFsLCBvbGQpID0+IHtcbiAgICBpZiAob2xkICYmIG9sZCAhPSBDb2RlTWlycm9yLkluaXQpIHtcbiAgICAgIGNtLnJlbW92ZUtleU1hcChrZXlNYXApO1xuICAgICAgY20uc3RhdGUuY2xvc2VCcmFja2V0cyA9IG51bGw7XG4gICAgfVxuICAgIGlmICh2YWwpIHtcbiAgICAgIGVuc3VyZUJvdW5kKGdldE9wdGlvbih2YWwsICdwYWlycycpKTtcbiAgICAgIGNtLnN0YXRlLmNsb3NlQnJhY2tldHMgPSB2YWw7XG4gICAgICBjbS5hZGRLZXlNYXAoa2V5TWFwKTtcbiAgICB9XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGdldE9wdGlvbihjb25mLCBuYW1lKSB7XG4gICAgaWYgKG5hbWUgPT0gJ3BhaXJzJyAmJiB0eXBlb2YgY29uZiA9PT0gJ3N0cmluZycpIHJldHVybiBjb25mO1xuICAgIGlmICh0eXBlb2YgY29uZiA9PT0gJ29iamVjdCcgJiYgY29uZltuYW1lXSAhPSBudWxsKSByZXR1cm4gY29uZltuYW1lXTtcbiAgICByZXR1cm4gZGVmYXVsdHNbbmFtZV07XG4gIH1cblxuICB2YXIga2V5TWFwID0ge1xuICAgIEJhY2tzcGFjZTogaGFuZGxlQmFja3NwYWNlLFxuICAgIEVudGVyOiBoYW5kbGVFbnRlcixcbiAgfTtcblxuICBmdW5jdGlvbiBlbnN1cmVCb3VuZChjaGFycykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNoID0gY2hhcnMuY2hhckF0KGkpO1xuICAgICAgY29uc3Qga2V5ID0gXCInXCIgKyBjaCArIFwiJ1wiO1xuICAgICAgaWYgKCFrZXlNYXBba2V5XSkga2V5TWFwW2tleV0gPSBoYW5kbGVyKGNoKTtcbiAgICB9XG4gIH1cbiAgZW5zdXJlQm91bmQoZGVmYXVsdHMucGFpcnMgKyAnYCcpO1xuXG4gIGZ1bmN0aW9uIGhhbmRsZXIoY2gpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGNtKSB7XG4gICAgICByZXR1cm4gaGFuZGxlQ2hhcihjbSwgY2gpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBnZXRDb25maWcoY20pIHtcbiAgICBjb25zdCBkZWZsdCA9IGNtLnN0YXRlLmNsb3NlQnJhY2tldHM7XG4gICAgaWYgKCFkZWZsdCB8fCBkZWZsdC5vdmVycmlkZSkgcmV0dXJuIGRlZmx0O1xuICAgIGNvbnN0IG1vZGUgPSBjbS5nZXRNb2RlQXQoY20uZ2V0Q3Vyc29yKCkpO1xuICAgIHJldHVybiBtb2RlLmNsb3NlQnJhY2tldHMgfHwgZGVmbHQ7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVCYWNrc3BhY2UoY20pIHtcbiAgICBjb25zdCBjb25mID0gZ2V0Q29uZmlnKGNtKTtcbiAgICBpZiAoIWNvbmYgfHwgY20uZ2V0T3B0aW9uKCdkaXNhYmxlSW5wdXQnKSkgcmV0dXJuIENvZGVNaXJyb3IuUGFzcztcblxuICAgIGNvbnN0IHBhaXJzID0gZ2V0T3B0aW9uKGNvbmYsICdwYWlycycpO1xuICAgIGNvbnN0IHJhbmdlcyA9IGNtLmxpc3RTZWxlY3Rpb25zKCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghcmFuZ2VzW2ldLmVtcHR5KCkpIHJldHVybiBDb2RlTWlycm9yLlBhc3M7XG4gICAgICBjb25zdCBhcm91bmQgPSBjaGFyc0Fyb3VuZChjbSwgcmFuZ2VzW2ldLmhlYWQpO1xuICAgICAgaWYgKCFhcm91bmQgfHwgcGFpcnMuaW5kZXhPZihhcm91bmQpICUgMiAhPSAwKSByZXR1cm4gQ29kZU1pcnJvci5QYXNzO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gcmFuZ2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBjb25zdCBjdXIgPSByYW5nZXNbaV0uaGVhZDtcbiAgICAgIGNtLnJlcGxhY2VSYW5nZSgnJywgUG9zKGN1ci5saW5lLCBjdXIuY2ggLSAxKSwgUG9zKGN1ci5saW5lLCBjdXIuY2ggKyAxKSwgJytkZWxldGUnKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVFbnRlcihjbSkge1xuICAgIGNvbnN0IGNvbmYgPSBnZXRDb25maWcoY20pO1xuICAgIGNvbnN0IGV4cGxvZGUgPSBjb25mICYmIGdldE9wdGlvbihjb25mLCAnZXhwbG9kZScpO1xuICAgIGlmICghZXhwbG9kZSB8fCBjbS5nZXRPcHRpb24oJ2Rpc2FibGVJbnB1dCcpKSByZXR1cm4gQ29kZU1pcnJvci5QYXNzO1xuXG4gICAgbGV0IHJhbmdlcyA9IGNtLmxpc3RTZWxlY3Rpb25zKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghcmFuZ2VzW2ldLmVtcHR5KCkpIHJldHVybiBDb2RlTWlycm9yLlBhc3M7XG4gICAgICBjb25zdCBhcm91bmQgPSBjaGFyc0Fyb3VuZChjbSwgcmFuZ2VzW2ldLmhlYWQpO1xuICAgICAgaWYgKCFhcm91bmQgfHwgZXhwbG9kZS5pbmRleE9mKGFyb3VuZCkgJSAyICE9IDApIHJldHVybiBDb2RlTWlycm9yLlBhc3M7XG4gICAgfVxuICAgIGNtLm9wZXJhdGlvbigoKSA9PiB7XG4gICAgICBjb25zdCBsaW5lc2VwID0gY20ubGluZVNlcGFyYXRvcigpIHx8ICdcXG4nO1xuICAgICAgY20ucmVwbGFjZVNlbGVjdGlvbihsaW5lc2VwICsgbGluZXNlcCwgbnVsbCk7XG4gICAgICBjbS5leGVjQ29tbWFuZCgnZ29DaGFyTGVmdCcpO1xuICAgICAgcmFuZ2VzID0gY20ubGlzdFNlbGVjdGlvbnMoKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGxpbmUgPSByYW5nZXNbaV0uaGVhZC5saW5lO1xuICAgICAgICBjbS5pbmRlbnRMaW5lKGxpbmUsIG51bGwsIHRydWUpO1xuICAgICAgICBjbS5pbmRlbnRMaW5lKGxpbmUgKyAxLCBudWxsLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbnRyYWN0U2VsZWN0aW9uKHNlbCkge1xuICAgIGNvbnN0IGludmVydGVkID0gQ29kZU1pcnJvci5jbXBQb3Moc2VsLmFuY2hvciwgc2VsLmhlYWQpID4gMDtcbiAgICByZXR1cm4ge1xuICAgICAgYW5jaG9yOiBuZXcgUG9zKHNlbC5hbmNob3IubGluZSwgc2VsLmFuY2hvci5jaCArIChpbnZlcnRlZCA/IC0xIDogMSkpLFxuICAgICAgaGVhZDogbmV3IFBvcyhzZWwuaGVhZC5saW5lLCBzZWwuaGVhZC5jaCArIChpbnZlcnRlZCA/IDEgOiAtMSkpLFxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVDaGFyKGNtLCBjaCkge1xuICAgIGNvbnN0IGNvbmYgPSBnZXRDb25maWcoY20pO1xuICAgIGlmICghY29uZiB8fCBjbS5nZXRPcHRpb24oJ2Rpc2FibGVJbnB1dCcpKSByZXR1cm4gQ29kZU1pcnJvci5QYXNzO1xuXG4gICAgY29uc3QgcGFpcnMgPSBnZXRPcHRpb24oY29uZiwgJ3BhaXJzJyk7XG4gICAgY29uc3QgcG9zID0gcGFpcnMuaW5kZXhPZihjaCk7XG4gICAgaWYgKHBvcyA9PSAtMSkgcmV0dXJuIENvZGVNaXJyb3IuUGFzcztcblxuICAgIGNvbnN0IGNsb3NlQmVmb3JlID0gZ2V0T3B0aW9uKGNvbmYsICdjbG9zZUJlZm9yZScpO1xuXG4gICAgY29uc3QgdHJpcGxlcyA9IGdldE9wdGlvbihjb25mLCAndHJpcGxlcycpO1xuXG4gICAgY29uc3QgaWRlbnRpY2FsID0gcGFpcnMuY2hhckF0KHBvcyArIDEpID09IGNoO1xuICAgIGNvbnN0IHJhbmdlcyA9IGNtLmxpc3RTZWxlY3Rpb25zKCk7XG4gICAgY29uc3Qgb3BlbmluZyA9IHBvcyAlIDIgPT0gMDtcblxuICAgIGxldCB0eXBlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCByYW5nZSA9IHJhbmdlc1tpXTtcbiAgICAgIGNvbnN0IGN1ciA9IHJhbmdlLmhlYWQ7XG4gICAgICB2YXIgY3VyVHlwZTtcbiAgICAgIGNvbnN0IG5leHQgPSBjbS5nZXRSYW5nZShjdXIsIFBvcyhjdXIubGluZSwgY3VyLmNoICsgMSkpO1xuICAgICAgaWYgKG9wZW5pbmcgJiYgIXJhbmdlLmVtcHR5KCkpIHtcbiAgICAgICAgY3VyVHlwZSA9ICdzdXJyb3VuZCc7XG4gICAgICB9IGVsc2UgaWYgKChpZGVudGljYWwgfHwgIW9wZW5pbmcpICYmIG5leHQgPT0gY2gpIHtcbiAgICAgICAgaWYgKGlkZW50aWNhbCAmJiBzdHJpbmdTdGFydHNBZnRlcihjbSwgY3VyKSkge1xuICAgICAgICAgIGN1clR5cGUgPSAnYm90aCc7XG4gICAgICAgIH0gZWxzZSBpZiAodHJpcGxlcy5pbmRleE9mKGNoKSA+PSAwICYmIGNtLmdldFJhbmdlKGN1ciwgUG9zKGN1ci5saW5lLCBjdXIuY2ggKyAzKSkgPT0gY2ggKyBjaCArIGNoKSB7XG4gICAgICAgICAgY3VyVHlwZSA9ICdza2lwVGhyZWUnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1clR5cGUgPSAnc2tpcCc7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaWRlbnRpY2FsICYmIGN1ci5jaCA+IDEgJiYgdHJpcGxlcy5pbmRleE9mKGNoKSA+PSAwXG4gICAgICAgICYmIGNtLmdldFJhbmdlKFBvcyhjdXIubGluZSwgY3VyLmNoIC0gMiksIGN1cikgPT0gY2ggKyBjaCkge1xuICAgICAgICBpZiAoY3VyLmNoID4gMiAmJiAvXFxic3RyaW5nLy50ZXN0KGNtLmdldFRva2VuVHlwZUF0KFBvcyhjdXIubGluZSwgY3VyLmNoIC0gMikpKSkgcmV0dXJuIENvZGVNaXJyb3IuUGFzcztcbiAgICAgICAgY3VyVHlwZSA9ICdhZGRGb3VyJztcbiAgICAgIH0gZWxzZSBpZiAoaWRlbnRpY2FsKSB7XG4gICAgICAgIGNvbnN0IHByZXYgPSBjdXIuY2ggPT0gMCA/ICcgJyA6IGNtLmdldFJhbmdlKFBvcyhjdXIubGluZSwgY3VyLmNoIC0gMSksIGN1cik7XG4gICAgICAgIGlmICghQ29kZU1pcnJvci5pc1dvcmRDaGFyKG5leHQpICYmIHByZXYgIT0gY2ggJiYgIUNvZGVNaXJyb3IuaXNXb3JkQ2hhcihwcmV2KSkgY3VyVHlwZSA9ICdib3RoJztcbiAgICAgICAgZWxzZSByZXR1cm4gQ29kZU1pcnJvci5QYXNzO1xuICAgICAgfSBlbHNlIGlmIChvcGVuaW5nICYmIChuZXh0Lmxlbmd0aCA9PT0gMCB8fCAvXFxzLy50ZXN0KG5leHQpIHx8IGNsb3NlQmVmb3JlLmluZGV4T2YobmV4dCkgPiAtMSkpIHtcbiAgICAgICAgY3VyVHlwZSA9ICdib3RoJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBDb2RlTWlycm9yLlBhc3M7XG4gICAgICB9XG4gICAgICBpZiAoIXR5cGUpIHR5cGUgPSBjdXJUeXBlO1xuICAgICAgZWxzZSBpZiAodHlwZSAhPSBjdXJUeXBlKSByZXR1cm4gQ29kZU1pcnJvci5QYXNzO1xuICAgIH1cblxuICAgIGNvbnN0IGxlZnQgPSBwb3MgJSAyID8gcGFpcnMuY2hhckF0KHBvcyAtIDEpIDogY2g7XG4gICAgY29uc3QgcmlnaHQgPSBwb3MgJSAyID8gY2ggOiBwYWlycy5jaGFyQXQocG9zICsgMSk7XG4gICAgY20ub3BlcmF0aW9uKCgpID0+IHtcbiAgICAgIGlmICh0eXBlID09ICdza2lwJykge1xuICAgICAgICBjbS5leGVjQ29tbWFuZCgnZ29DaGFyUmlnaHQnKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnc2tpcFRocmVlJykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICAgIGNtLmV4ZWNDb21tYW5kKCdnb0NoYXJSaWdodCcpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ3N1cnJvdW5kJykge1xuICAgICAgICBsZXQgc2VscyA9IGNtLmdldFNlbGVjdGlvbnMoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgc2Vsc1tpXSA9IGxlZnQgKyBzZWxzW2ldICsgcmlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgY20ucmVwbGFjZVNlbGVjdGlvbnMoc2VscywgJ2Fyb3VuZCcpO1xuICAgICAgICBzZWxzID0gY20ubGlzdFNlbGVjdGlvbnMoKVxuICAgICAgICAgIC5zbGljZSgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBzZWxzW2ldID0gY29udHJhY3RTZWxlY3Rpb24oc2Vsc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgY20uc2V0U2VsZWN0aW9ucyhzZWxzKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnYm90aCcpIHtcbiAgICAgICAgY20ucmVwbGFjZVNlbGVjdGlvbihsZWZ0ICsgcmlnaHQsIG51bGwpO1xuICAgICAgICBjbS50cmlnZ2VyRWxlY3RyaWMobGVmdCArIHJpZ2h0KTtcbiAgICAgICAgY20uZXhlY0NvbW1hbmQoJ2dvQ2hhckxlZnQnKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnYWRkRm91cicpIHtcbiAgICAgICAgY20ucmVwbGFjZVNlbGVjdGlvbihsZWZ0ICsgbGVmdCArIGxlZnQgKyBsZWZ0LCAnYmVmb3JlJyk7XG4gICAgICAgIGNtLmV4ZWNDb21tYW5kKCdnb0NoYXJSaWdodCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY2hhcnNBcm91bmQoY20sIHBvcykge1xuICAgIGNvbnN0IHN0ciA9IGNtLmdldFJhbmdlKFBvcyhwb3MubGluZSwgcG9zLmNoIC0gMSksXG4gICAgICBQb3MocG9zLmxpbmUsIHBvcy5jaCArIDEpKTtcbiAgICByZXR1cm4gc3RyLmxlbmd0aCA9PSAyID8gc3RyIDogbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0cmluZ1N0YXJ0c0FmdGVyKGNtLCBwb3MpIHtcbiAgICBjb25zdCB0b2tlbiA9IGNtLmdldFRva2VuQXQoUG9zKHBvcy5saW5lLCBwb3MuY2ggKyAxKSk7XG4gICAgcmV0dXJuIC9cXGJzdHJpbmcvLnRlc3QodG9rZW4udHlwZSkgJiYgdG9rZW4uc3RhcnQgPT0gcG9zLmNoXG4gICAgICAmJiAocG9zLmNoID09IDAgfHwgIS9cXGJzdHJpbmcvLnRlc3QoY20uZ2V0VG9rZW5UeXBlQXQocG9zKSkpO1xuICB9XG59XG4iLCAiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwczovL2NvZGVtaXJyb3IubmV0L0xJQ0VOU0VcblxuLyoqXG4gKiBUYWctY2xvc2VyIGV4dGVuc2lvbiBmb3IgQ29kZU1pcnJvci5cbiAqXG4gKiBUaGlzIGV4dGVuc2lvbiBhZGRzIGFuIFwiYXV0b0Nsb3NlVGFnc1wiIG9wdGlvbiB0aGF0IGNhbiBiZSBzZXQgdG9cbiAqIGVpdGhlciB0cnVlIHRvIGdldCB0aGUgZGVmYXVsdCBiZWhhdmlvciwgb3IgYW4gb2JqZWN0IHRvIGZ1cnRoZXJcbiAqIGNvbmZpZ3VyZSBpdHMgYmVoYXZpb3IuXG4gKlxuICogVGhlc2UgYXJlIHN1cHBvcnRlZCBvcHRpb25zOlxuICpcbiAqIGB3aGVuQ2xvc2luZ2AgKGRlZmF1bHQgdHJ1ZSlcbiAqICAgV2hldGhlciB0byBhdXRvY2xvc2Ugd2hlbiB0aGUgJy8nIG9mIGEgY2xvc2luZyB0YWcgaXMgdHlwZWQuXG4gKiBgd2hlbk9wZW5pbmdgIChkZWZhdWx0IHRydWUpXG4gKiAgIFdoZXRoZXIgdG8gYXV0b2Nsb3NlIHRoZSB0YWcgd2hlbiB0aGUgZmluYWwgJz4nIG9mIGFuIG9wZW5pbmdcbiAqICAgdGFnIGlzIHR5cGVkLlxuICogYGRvbnRDbG9zZVRhZ3NgIChkZWZhdWx0IGlzIGVtcHR5IHRhZ3MgZm9yIEhUTUwsIG5vbmUgZm9yIFhNTClcbiAqICAgQW4gYXJyYXkgb2YgdGFnIG5hbWVzIHRoYXQgc2hvdWxkIG5vdCBiZSBhdXRvY2xvc2VkLlxuICogYGluZGVudFRhZ3NgIChkZWZhdWx0IGlzIGJsb2NrIHRhZ3MgZm9yIEhUTUwsIG5vbmUgZm9yIFhNTClcbiAqICAgQW4gYXJyYXkgb2YgdGFnIG5hbWVzIHRoYXQgc2hvdWxkLCB3aGVuIG9wZW5lZCwgY2F1c2UgYVxuICogICBibGFuayBsaW5lIHRvIGJlIGFkZGVkIGluc2lkZSB0aGUgdGFnLCBhbmQgdGhlIGJsYW5rIGxpbmUgYW5kXG4gKiAgIGNsb3NpbmcgbGluZSB0byBiZSBpbmRlbnRlZC5cbiAqIGBlbXB0eVRhZ3NgIChkZWZhdWx0IGlzIG5vbmUpXG4gKiAgIEFuIGFycmF5IG9mIFhNTCB0YWcgbmFtZXMgdGhhdCBzaG91bGQgYmUgYXV0b2Nsb3NlZCB3aXRoICcvPicuXG4gKlxuICogU2VlIGRlbW9zL2Nsb3NldGFnLmh0bWwgZm9yIGEgdXNhZ2UgZXhhbXBsZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2xvc2V0YWcoQ29kZU1pcnJvcikge1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lT3B0aW9uKCdhdXRvQ2xvc2VUYWdzJywgZmFsc2UsIChjbSwgdmFsLCBvbGQpID0+IHtcbiAgICBpZiAob2xkICE9IENvZGVNaXJyb3IuSW5pdCAmJiBvbGQpIHtcbiAgICAgIGNtLnJlbW92ZUtleU1hcCgnYXV0b0Nsb3NlVGFncycpO1xuICAgIH1cbiAgICBpZiAoIXZhbCkgcmV0dXJuO1xuICAgIGNvbnN0IG1hcCA9IHtcbiAgICAgIG5hbWU6ICdhdXRvQ2xvc2VUYWdzJyxcbiAgICB9O1xuICAgIGlmICh0eXBlb2YgdmFsICE9PSAnb2JqZWN0JyB8fCB2YWwud2hlbkNsb3NpbmcpIHtcbiAgICAgIG1hcFtcIicvJ1wiXSA9IGZ1bmN0aW9uIChjbSkge1xuICAgICAgICByZXR1cm4gYXV0b0Nsb3NlU2xhc2goY20pO1xuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWwgIT09ICdvYmplY3QnIHx8IHZhbC53aGVuT3BlbmluZykge1xuICAgICAgbWFwW1wiJz4nXCJdID0gZnVuY3Rpb24gKGNtKSB7XG4gICAgICAgIHJldHVybiBhdXRvQ2xvc2VHVChjbSk7XG4gICAgICB9O1xuICAgIH1cbiAgICBjbS5hZGRLZXlNYXAobWFwKTtcbiAgfSk7XG5cbiAgY29uc3QgaHRtbERvbnRDbG9zZSA9IFsnYXJlYScsICdiYXNlJywgJ2JyJywgJ2NvbCcsICdjb21tYW5kJywgJ2VtYmVkJywgJ2hyJywgJ2ltZycsICdpbnB1dCcsICdrZXlnZW4nLCAnbGluaycsXG4gICAgJ21ldGEnLCAncGFyYW0nLFxuICAgICdzb3VyY2UnLCAndHJhY2snLCAnd2JyJ107XG4gIGNvbnN0IGh0bWxJbmRlbnQgPSBbJ2FwcGxldCcsICdibG9ja3F1b3RlJywgJ2JvZHknLCAnYnV0dG9uJywgJ2RpdicsICdkbCcsICdmaWVsZHNldCcsICdmb3JtJywgJ2ZyYW1lc2V0JywgJ2gxJyxcbiAgICAnaDInLCAnaDMnLCAnaDQnLFxuICAgICdoNScsICdoNicsICdoZWFkJywgJ2h0bWwnLCAnaWZyYW1lJywgJ2xheWVyJywgJ2xlZ2VuZCcsICdvYmplY3QnLCAnb2wnLCAncCcsICdzZWxlY3QnLCAndGFibGUnLCAndWwnXTtcblxuICBmdW5jdGlvbiBhdXRvQ2xvc2VHVChjbSkge1xuICAgIGlmIChjbS5nZXRPcHRpb24oJ2Rpc2FibGVJbnB1dCcpKSByZXR1cm4gQ29kZU1pcnJvci5QYXNzO1xuICAgIGNvbnN0IHJhbmdlcyA9IGNtLmxpc3RTZWxlY3Rpb25zKCk7XG4gICAgY29uc3QgcmVwbGFjZW1lbnRzID0gW107XG4gICAgY29uc3Qgb3B0ID0gY20uZ2V0T3B0aW9uKCdhdXRvQ2xvc2VUYWdzJyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghcmFuZ2VzW2ldLmVtcHR5KCkpIHJldHVybiBDb2RlTWlycm9yLlBhc3M7XG4gICAgICBjb25zdCBwb3MgPSByYW5nZXNbaV0uaGVhZDtcbiAgICAgIGNvbnN0IHRvayA9IGNtLmdldFRva2VuQXQocG9zKTtcbiAgICAgIGNvbnN0IGlubmVyID0gQ29kZU1pcnJvci5pbm5lck1vZGUoY20uZ2V0TW9kZSgpLCB0b2suc3RhdGUpO1xuICAgICAgY29uc3Qgc3RhdGUgPSBpbm5lci5zdGF0ZTtcbiAgICAgIGlmIChpbm5lci5tb2RlLm5hbWUgIT0gJ3htbCcgfHwgIXN0YXRlLnRhZ05hbWUpIHJldHVybiBDb2RlTWlycm9yLlBhc3M7XG5cbiAgICAgIGNvbnN0IGh0bWwgPSBpbm5lci5tb2RlLmNvbmZpZ3VyYXRpb24gPT0gJ2h0bWwnO1xuICAgICAgY29uc3QgZG9udENsb3NlVGFncyA9ICh0eXBlb2Ygb3B0ID09PSAnb2JqZWN0JyAmJiBvcHQuZG9udENsb3NlVGFncykgfHwgKGh0bWwgJiYgaHRtbERvbnRDbG9zZSk7XG4gICAgICBjb25zdCBpbmRlbnRUYWdzID0gKHR5cGVvZiBvcHQgPT09ICdvYmplY3QnICYmIG9wdC5pbmRlbnRUYWdzKSB8fCAoaHRtbCAmJiBodG1sSW5kZW50KTtcblxuICAgICAgbGV0IHRhZ05hbWUgPSBzdGF0ZS50YWdOYW1lO1xuICAgICAgaWYgKHRvay5lbmQgPiBwb3MuY2gpIHRhZ05hbWUgPSB0YWdOYW1lLnNsaWNlKDAsIHRhZ05hbWUubGVuZ3RoIC0gdG9rLmVuZCArIHBvcy5jaCk7XG4gICAgICBjb25zdCBsb3dlclRhZ05hbWUgPSB0YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAvLyBEb24ndCBwcm9jZXNzIHRoZSAnPicgYXQgdGhlIGVuZCBvZiBhbiBlbmQtdGFnIG9yIHNlbGYtY2xvc2luZyB0YWdcbiAgICAgIGlmICghdGFnTmFtZSB8fFxuICAgICAgICB0b2sudHlwZSA9PSAnc3RyaW5nJyAmJiAodG9rLmVuZCAhPSBwb3MuY2ggfHwgIS9bXFxcIlxcJ10vLnRlc3QodG9rLnN0cmluZy5jaGFyQXQodG9rLnN0cmluZy5sZW5ndGggLSAxKSkgfHxcbiAgICAgICAgICB0b2suc3RyaW5nLmxlbmd0aCA9PSAxKSB8fFxuICAgICAgICB0b2sudHlwZSA9PSAndGFnJyAmJiBzdGF0ZS50eXBlID09ICdjbG9zZVRhZycgfHxcbiAgICAgICAgdG9rLnN0cmluZy5pbmRleE9mKCcvJykgPT0gKHRvay5zdHJpbmcubGVuZ3RoIC0gMSkgLy8gbWF0Y2ggc29tZXRoaW5nIGxpa2UgPHNvbWVUYWdOYW1lIC8+XG4gICAgICAgIHx8XG4gICAgICAgIGRvbnRDbG9zZVRhZ3MgJiYgaW5kZXhPZihkb250Q2xvc2VUYWdzLCBsb3dlclRhZ05hbWUpID4gLTEgfHxcbiAgICAgICAgY2xvc2luZ1RhZ0V4aXN0cyhjbSwgdGFnTmFtZSwgcG9zLCBzdGF0ZSwgdHJ1ZSkpIHtcbiAgICAgICAgcmV0dXJuIENvZGVNaXJyb3IuUGFzcztcbiAgICAgIH1cblxuICAgICAgY29uc3QgZW1wdHlUYWdzID0gdHlwZW9mIG9wdCA9PT0gJ29iamVjdCcgJiYgb3B0LmVtcHR5VGFncztcbiAgICAgIGlmIChlbXB0eVRhZ3MgJiYgaW5kZXhPZihlbXB0eVRhZ3MsIHRhZ05hbWUpID4gLTEpIHtcbiAgICAgICAgcmVwbGFjZW1lbnRzW2ldID0ge1xuICAgICAgICAgIHRleHQ6ICcvPicsXG4gICAgICAgICAgbmV3UG9zOiBDb2RlTWlycm9yLlBvcyhwb3MubGluZSwgcG9zLmNoICsgMiksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpbmRlbnQgPSBpbmRlbnRUYWdzICYmIGluZGV4T2YoaW5kZW50VGFncywgbG93ZXJUYWdOYW1lKSA+IC0xO1xuICAgICAgcmVwbGFjZW1lbnRzW2ldID0ge1xuICAgICAgICBpbmRlbnQsXG4gICAgICAgIHRleHQ6ICc+JyArIChpbmRlbnQgPyAnXFxuXFxuJyA6ICcnKSArICc8LycgKyB0YWdOYW1lICsgJz4nLFxuICAgICAgICBuZXdQb3M6IGluZGVudCA/IENvZGVNaXJyb3IuUG9zKHBvcy5saW5lICsgMSwgMCkgOiBDb2RlTWlycm9yLlBvcyhwb3MubGluZSwgcG9zLmNoICsgMSksXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IGRvbnRJbmRlbnRPbkF1dG9DbG9zZSA9ICh0eXBlb2Ygb3B0ID09PSAnb2JqZWN0JyAmJiBvcHQuZG9udEluZGVudE9uQXV0b0Nsb3NlKTtcbiAgICBmb3IgKHZhciBpID0gcmFuZ2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBjb25zdCBpbmZvID0gcmVwbGFjZW1lbnRzW2ldO1xuICAgICAgY20ucmVwbGFjZVJhbmdlKGluZm8udGV4dCwgcmFuZ2VzW2ldLmhlYWQsIHJhbmdlc1tpXS5hbmNob3IsICcraW5zZXJ0Jyk7XG4gICAgICBjb25zdCBzZWwgPSBjbS5saXN0U2VsZWN0aW9ucygpXG4gICAgICAgIC5zbGljZSgwKTtcbiAgICAgIHNlbFtpXSA9IHtcbiAgICAgICAgaGVhZDogaW5mby5uZXdQb3MsXG4gICAgICAgIGFuY2hvcjogaW5mby5uZXdQb3MsXG4gICAgICB9O1xuICAgICAgY20uc2V0U2VsZWN0aW9ucyhzZWwpO1xuICAgICAgaWYgKCFkb250SW5kZW50T25BdXRvQ2xvc2UgJiYgaW5mby5pbmRlbnQpIHtcbiAgICAgICAgY20uaW5kZW50TGluZShpbmZvLm5ld1Bvcy5saW5lLCBudWxsLCB0cnVlKTtcbiAgICAgICAgY20uaW5kZW50TGluZShpbmZvLm5ld1Bvcy5saW5lICsgMSwgbnVsbCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gYXV0b0Nsb3NlQ3VycmVudChjbSwgdHlwaW5nU2xhc2gpIHtcbiAgICBsZXQgcmFuZ2VzID0gY20ubGlzdFNlbGVjdGlvbnMoKTtcbiAgICBjb25zdCByZXBsYWNlbWVudHMgPSBbXTtcbiAgICBjb25zdCBoZWFkID0gdHlwaW5nU2xhc2ggPyAnLycgOiAnPC8nO1xuICAgIGNvbnN0IG9wdCA9IGNtLmdldE9wdGlvbignYXV0b0Nsb3NlVGFncycpO1xuICAgIGNvbnN0IGRvbnRJbmRlbnRPbkF1dG9DbG9zZSA9ICh0eXBlb2Ygb3B0ID09PSAnb2JqZWN0JyAmJiBvcHQuZG9udEluZGVudE9uU2xhc2gpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIXJhbmdlc1tpXS5lbXB0eSgpKSByZXR1cm4gQ29kZU1pcnJvci5QYXNzO1xuICAgICAgY29uc3QgcG9zID0gcmFuZ2VzW2ldLmhlYWQ7XG4gICAgICBjb25zdCB0b2sgPSBjbS5nZXRUb2tlbkF0KHBvcyk7XG4gICAgICBjb25zdCBpbm5lciA9IENvZGVNaXJyb3IuaW5uZXJNb2RlKGNtLmdldE1vZGUoKSwgdG9rLnN0YXRlKTtcbiAgICAgIGNvbnN0IHN0YXRlID0gaW5uZXIuc3RhdGU7XG4gICAgICBpZiAodHlwaW5nU2xhc2ggJiYgKHRvay50eXBlID09ICdzdHJpbmcnIHx8IHRvay5zdHJpbmcuY2hhckF0KDApICE9ICc8JyB8fFxuICAgICAgICB0b2suc3RhcnQgIT0gcG9zLmNoIC0gMSkpIHtcbiAgICAgICAgcmV0dXJuIENvZGVNaXJyb3IuUGFzcztcbiAgICAgIH1cbiAgICAgIC8vIEtsdWRnZSB0byBnZXQgYXJvdW5kIHRoZSBmYWN0IHRoYXQgd2UgYXJlIG5vdCBpbiBYTUwgbW9kZVxuICAgICAgLy8gd2hlbiBjb21wbGV0aW5nIGluIEpTL0NTUyBzbmlwcGV0IGluIGh0bWxtaXhlZCBtb2RlLiBEb2VzIG5vdFxuICAgICAgLy8gd29yayBmb3Igb3RoZXIgWE1MIGVtYmVkZGVkIGxhbmd1YWdlcyAodGhlcmUgaXMgbm8gZ2VuZXJhbFxuICAgICAgLy8gd2F5IHRvIGdvIGZyb20gYSBtaXhlZCBtb2RlIHRvIGl0cyBjdXJyZW50IFhNTCBzdGF0ZSkuXG4gICAgICB2YXIgcmVwbGFjZW1lbnQ7XG4gICAgICBpZiAoaW5uZXIubW9kZS5uYW1lICE9ICd4bWwnKSB7XG4gICAgICAgIGlmIChjbS5nZXRNb2RlKClcbiAgICAgICAgICAubmFtZSA9PSAnaHRtbG1peGVkJyAmJiBpbm5lci5tb2RlLm5hbWUgPT0gJ2phdmFzY3JpcHQnKSB7XG4gICAgICAgICAgcmVwbGFjZW1lbnQgPSBoZWFkICsgJ3NjcmlwdCc7XG4gICAgICAgIH0gZWxzZSBpZiAoY20uZ2V0TW9kZSgpXG4gICAgICAgICAgLm5hbWUgPT0gJ2h0bWxtaXhlZCcgJiYgaW5uZXIubW9kZS5uYW1lID09ICdjc3MnKSB7XG4gICAgICAgICAgcmVwbGFjZW1lbnQgPSBoZWFkICsgJ3N0eWxlJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gQ29kZU1pcnJvci5QYXNzO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXN0YXRlLmNvbnRleHQgfHwgIXN0YXRlLmNvbnRleHQudGFnTmFtZSB8fFxuICAgICAgICAgIGNsb3NpbmdUYWdFeGlzdHMoY20sIHN0YXRlLmNvbnRleHQudGFnTmFtZSwgcG9zLCBzdGF0ZSkpIHtcbiAgICAgICAgICByZXR1cm4gQ29kZU1pcnJvci5QYXNzO1xuICAgICAgICB9XG4gICAgICAgIHJlcGxhY2VtZW50ID0gaGVhZCArIHN0YXRlLmNvbnRleHQudGFnTmFtZTtcbiAgICAgIH1cbiAgICAgIGlmIChjbS5nZXRMaW5lKHBvcy5saW5lKVxuICAgICAgICAuY2hhckF0KHRvay5lbmQpICE9ICc+JykgcmVwbGFjZW1lbnQgKz0gJz4nO1xuICAgICAgcmVwbGFjZW1lbnRzW2ldID0gcmVwbGFjZW1lbnQ7XG4gICAgfVxuICAgIGNtLnJlcGxhY2VTZWxlY3Rpb25zKHJlcGxhY2VtZW50cyk7XG4gICAgcmFuZ2VzID0gY20ubGlzdFNlbGVjdGlvbnMoKTtcbiAgICBpZiAoIWRvbnRJbmRlbnRPbkF1dG9DbG9zZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGkgPT0gcmFuZ2VzLmxlbmd0aCAtIDEgfHwgcmFuZ2VzW2ldLmhlYWQubGluZSA8IHJhbmdlc1tpICsgMV0uaGVhZC5saW5lKSB7XG4gICAgICAgICAgY20uaW5kZW50TGluZShyYW5nZXNbaV0uaGVhZC5saW5lKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGF1dG9DbG9zZVNsYXNoKGNtKSB7XG4gICAgaWYgKGNtLmdldE9wdGlvbignZGlzYWJsZUlucHV0JykpIHJldHVybiBDb2RlTWlycm9yLlBhc3M7XG4gICAgcmV0dXJuIGF1dG9DbG9zZUN1cnJlbnQoY20sIHRydWUpO1xuICB9XG5cbiAgQ29kZU1pcnJvci5jb21tYW5kcy5jbG9zZVRhZyA9IGZ1bmN0aW9uIChjbSkge1xuICAgIHJldHVybiBhdXRvQ2xvc2VDdXJyZW50KGNtKTtcbiAgfTtcblxuICBmdW5jdGlvbiBpbmRleE9mKGNvbGxlY3Rpb24sIGVsdCkge1xuICAgIGlmIChjb2xsZWN0aW9uLmluZGV4T2YpIHJldHVybiBjb2xsZWN0aW9uLmluZGV4T2YoZWx0KTtcbiAgICBmb3IgKGxldCBpID0gMCwgZSA9IGNvbGxlY3Rpb24ubGVuZ3RoOyBpIDwgZTsgKytpKSB7XG4gICAgICBpZiAoY29sbGVjdGlvbltpXSA9PSBlbHQpIHJldHVybiBpO1xuICAgIH1cbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICAvLyBJZiB4bWwtZm9sZCBpcyBsb2FkZWQsIHdlIHVzZSBpdHMgZnVuY3Rpb25hbGl0eSB0byB0cnkgYW5kIHZlcmlmeVxuICAvLyB3aGV0aGVyIGEgZ2l2ZW4gdGFnIGlzIGFjdHVhbGx5IHVuY2xvc2VkLlxuICBmdW5jdGlvbiBjbG9zaW5nVGFnRXhpc3RzKGNtLCB0YWdOYW1lLCBwb3MsIHN0YXRlLCBuZXdUYWcpIHtcbiAgICBpZiAoIUNvZGVNaXJyb3Iuc2NhbkZvckNsb3NpbmdUYWcpIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCBlbmQgPSBNYXRoLm1pbihjbS5sYXN0TGluZSgpICsgMSwgcG9zLmxpbmUgKyA1MDApO1xuICAgIGNvbnN0IG5leHRDbG9zZSA9IENvZGVNaXJyb3Iuc2NhbkZvckNsb3NpbmdUYWcoY20sIHBvcywgbnVsbCwgZW5kKTtcbiAgICBpZiAoIW5leHRDbG9zZSB8fCBuZXh0Q2xvc2UudGFnICE9IHRhZ05hbWUpIHJldHVybiBmYWxzZTtcbiAgICBsZXQgY3ggPSBzdGF0ZS5jb250ZXh0O1xuICAgIC8vIElmIHRoZSBpbW1lZGlhdGUgd3JhcHBpbmcgY29udGV4dCBjb250YWlucyBvbkN4IGluc3RhbmNlcyBvZlxuICAgIC8vIHRoZSBzYW1lIHRhZywgYSBjbG9zaW5nIHRhZyBvbmx5IGV4aXN0cyBpZiB0aGVyZSBhcmUgYXQgbGVhc3RcbiAgICAvLyB0aGF0IG1hbnkgY2xvc2luZyB0YWdzIG9mIHRoYXQgdHlwZSBmb2xsb3dpbmcuXG4gICAgZm9yICh2YXIgb25DeCA9IG5ld1RhZyA/IDEgOiAwOyBjeCAmJiBjeC50YWdOYW1lID09IHRhZ05hbWU7IGN4ID0gY3gucHJldikgKytvbkN4O1xuICAgIHBvcyA9IG5leHRDbG9zZS50bztcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IG9uQ3g7IGkrKykge1xuICAgICAgY29uc3QgbmV4dCA9IENvZGVNaXJyb3Iuc2NhbkZvckNsb3NpbmdUYWcoY20sIHBvcywgbnVsbCwgZW5kKTtcbiAgICAgIGlmICghbmV4dCB8fCBuZXh0LnRhZyAhPSB0YWdOYW1lKSByZXR1cm4gZmFsc2U7XG4gICAgICBwb3MgPSBuZXh0LnRvO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuIiwgIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRTaG93aGludChDb2RlTWlycm9yKSB7XG5cbiAgY29uc3QgSElOVF9FTEVNRU5UX0NMQVNTID0gJ0NvZGVNaXJyb3ItaGludCc7XG4gIGNvbnN0IEFDVElWRV9ISU5UX0VMRU1FTlRfQ0xBU1MgPSAnQ29kZU1pcnJvci1oaW50LWFjdGl2ZSc7XG5cbiAgLy8gVGhpcyBpcyB0aGUgb2xkIGludGVyZmFjZSwga2VwdCBhcm91bmQgZm9yIG5vdyB0byBzdGF5XG4gIC8vIGJhY2t3YXJkcy1jb21wYXRpYmxlLlxuICBDb2RlTWlycm9yLnNob3dIaW50ID0gZnVuY3Rpb24gKGNtLCBnZXRIaW50cywgb3B0aW9ucykge1xuICAgIGlmICghZ2V0SGludHMpIHJldHVybiBjbS5zaG93SGludChvcHRpb25zKTtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmFzeW5jKSBnZXRIaW50cy5hc3luYyA9IHRydWU7XG4gICAgY29uc3QgbmV3T3B0cyA9IHtcbiAgICAgIGhpbnQ6IGdldEhpbnRzLFxuICAgIH07XG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgIGZvciAoY29uc3QgcHJvcCBpbiBvcHRpb25zKSBuZXdPcHRzW3Byb3BdID0gb3B0aW9uc1twcm9wXTtcbiAgICB9XG4gICAgcmV0dXJuIGNtLnNob3dIaW50KG5ld09wdHMpO1xuICB9O1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lRXh0ZW5zaW9uKCdzaG93SGludCcsIGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IHBhcnNlT3B0aW9ucyh0aGlzLCB0aGlzLmdldEN1cnNvcignc3RhcnQnKSwgb3B0aW9ucyk7XG4gICAgY29uc3Qgc2VsZWN0aW9ucyA9IHRoaXMubGlzdFNlbGVjdGlvbnMoKTtcbiAgICBpZiAoc2VsZWN0aW9ucy5sZW5ndGggPiAxKSByZXR1cm47XG4gICAgLy8gQnkgZGVmYXVsdCwgZG9uJ3QgYWxsb3cgY29tcGxldGlvbiB3aGVuIHNvbWV0aGluZyBpcyBzZWxlY3RlZC5cbiAgICAvLyBBIGhpbnQgZnVuY3Rpb24gY2FuIGhhdmUgYSBgc3VwcG9ydHNTZWxlY3Rpb25gIHByb3BlcnR5IHRvXG4gICAgLy8gaW5kaWNhdGUgdGhhdCBpdCBjYW4gaGFuZGxlIHNlbGVjdGlvbnMuXG4gICAgaWYgKHRoaXMuc29tZXRoaW5nU2VsZWN0ZWQoKSkge1xuICAgICAgaWYgKCFvcHRpb25zLmhpbnQuc3VwcG9ydHNTZWxlY3Rpb24pIHJldHVybjtcbiAgICAgIC8vIERvbid0IHRyeSB3aXRoIGNyb3NzLWxpbmUgc2VsZWN0aW9uc1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChzZWxlY3Rpb25zW2ldLmhlYWQubGluZSAhPSBzZWxlY3Rpb25zW2ldLmFuY2hvci5saW5lKSByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdGUuY29tcGxldGlvbkFjdGl2ZSkgdGhpcy5zdGF0ZS5jb21wbGV0aW9uQWN0aXZlLmNsb3NlKCk7XG4gICAgY29uc3QgY29tcGxldGlvbiA9IHRoaXMuc3RhdGUuY29tcGxldGlvbkFjdGl2ZSA9IG5ldyBDb21wbGV0aW9uKHRoaXMsIG9wdGlvbnMpO1xuICAgIGlmICghY29tcGxldGlvbi5vcHRpb25zLmhpbnQpIHJldHVybjtcblxuICAgIENvZGVNaXJyb3Iuc2lnbmFsKHRoaXMsICdzdGFydENvbXBsZXRpb24nLCB0aGlzKTtcbiAgICBjb21wbGV0aW9uLnVwZGF0ZSh0cnVlKTtcbiAgfSk7XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVFeHRlbnNpb24oJ2Nsb3NlSGludCcsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5jb21wbGV0aW9uQWN0aXZlKSB0aGlzLnN0YXRlLmNvbXBsZXRpb25BY3RpdmUuY2xvc2UoKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gQ29tcGxldGlvbihjbSwgb3B0aW9ucykge1xuICAgIHRoaXMuY20gPSBjbTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMud2lkZ2V0ID0gbnVsbDtcbiAgICB0aGlzLmRlYm91bmNlID0gMDtcbiAgICB0aGlzLnRpY2sgPSAwO1xuICAgIHRoaXMuc3RhcnRQb3MgPSB0aGlzLmNtLmdldEN1cnNvcignc3RhcnQnKTtcbiAgICB0aGlzLnN0YXJ0TGVuID0gdGhpcy5jbS5nZXRMaW5lKHRoaXMuc3RhcnRQb3MubGluZSlcbiAgICAgIC5sZW5ndGggLSB0aGlzLmNtLmdldFNlbGVjdGlvbigpXG4gICAgICAgIC5sZW5ndGg7XG5cbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICBjbS5vbignY3Vyc29yQWN0aXZpdHknLCB0aGlzLmFjdGl2aXR5RnVuYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHNlbGYuY3Vyc29yQWN0aXZpdHkoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IHJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgZnVuY3Rpb24gKGZuKSB7XG4gICAgcmV0dXJuIHNldFRpbWVvdXQoZm4sIDEwMDAgLyA2MCk7XG4gIH07XG4gIGNvbnN0IGNhbmNlbEFuaW1hdGlvbkZyYW1lID0gd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lIHx8IGNsZWFyVGltZW91dDtcblxuICBDb21wbGV0aW9uLnByb3RvdHlwZSA9IHtcbiAgICBjbG9zZSgpIHtcbiAgICAgIGlmICghdGhpcy5hY3RpdmUoKSkgcmV0dXJuO1xuICAgICAgdGhpcy5jbS5zdGF0ZS5jb21wbGV0aW9uQWN0aXZlID0gbnVsbDtcbiAgICAgIHRoaXMudGljayA9IG51bGw7XG4gICAgICB0aGlzLmNtLm9mZignY3Vyc29yQWN0aXZpdHknLCB0aGlzLmFjdGl2aXR5RnVuYyk7XG5cbiAgICAgIGlmICh0aGlzLndpZGdldCAmJiB0aGlzLmRhdGEpIENvZGVNaXJyb3Iuc2lnbmFsKHRoaXMuZGF0YSwgJ2Nsb3NlJyk7XG4gICAgICBpZiAodGhpcy53aWRnZXQpIHRoaXMud2lkZ2V0LmNsb3NlKCk7XG4gICAgICBDb2RlTWlycm9yLnNpZ25hbCh0aGlzLmNtLCAnZW5kQ29tcGxldGlvbicsIHRoaXMuY20pO1xuICAgIH0sXG5cbiAgICBhY3RpdmUoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jbS5zdGF0ZS5jb21wbGV0aW9uQWN0aXZlID09IHRoaXM7XG4gICAgfSxcblxuICAgIHBpY2soZGF0YSwgaSkge1xuICAgICAgY29uc3QgY29tcGxldGlvbiA9IGRhdGEubGlzdFtpXTtcbiAgICAgIGlmIChjb21wbGV0aW9uLmhpbnQpIGNvbXBsZXRpb24uaGludCh0aGlzLmNtLCBkYXRhLCBjb21wbGV0aW9uKTtcbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmNtLnJlcGxhY2VSYW5nZShnZXRUZXh0KGNvbXBsZXRpb24pLCBjb21wbGV0aW9uLmZyb20gfHwgZGF0YS5mcm9tLFxuICAgICAgICAgIGNvbXBsZXRpb24udG8gfHwgZGF0YS50bywgJ2NvbXBsZXRlJyk7XG4gICAgICB9XG4gICAgICBDb2RlTWlycm9yLnNpZ25hbChkYXRhLCAncGljaycsIGNvbXBsZXRpb24pO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0sXG5cbiAgICBjdXJzb3JBY3Rpdml0eSgpIHtcbiAgICAgIGlmICh0aGlzLmRlYm91bmNlKSB7XG4gICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuZGVib3VuY2UpO1xuICAgICAgICB0aGlzLmRlYm91bmNlID0gMDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcG9zID0gdGhpcy5jbS5nZXRDdXJzb3IoKTtcbiAgICAgIGNvbnN0IGxpbmUgPSB0aGlzLmNtLmdldExpbmUocG9zLmxpbmUpO1xuICAgICAgaWYgKHBvcy5saW5lICE9IHRoaXMuc3RhcnRQb3MubGluZSB8fCBsaW5lLmxlbmd0aCAtIHBvcy5jaCAhPSB0aGlzLnN0YXJ0TGVuIC0gdGhpcy5zdGFydFBvcy5jaFxuICAgICAgICB8fCBwb3MuY2ggPCB0aGlzLnN0YXJ0UG9zLmNoIHx8IHRoaXMuY20uc29tZXRoaW5nU2VsZWN0ZWQoKVxuICAgICAgICB8fCAoIXBvcy5jaCB8fCB0aGlzLm9wdGlvbnMuY2xvc2VDaGFyYWN0ZXJzLnRlc3QobGluZS5jaGFyQXQocG9zLmNoIC0gMSkpKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5kZWJvdW5jZSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgc2VsZi51cGRhdGUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0aGlzLndpZGdldCkgdGhpcy53aWRnZXQuZGlzYWJsZSgpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB1cGRhdGUoZmlyc3QpIHtcbiAgICAgIGlmICh0aGlzLnRpY2sgPT0gbnVsbCkgcmV0dXJuO1xuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICBjb25zdCBteVRpY2sgPSArK3RoaXMudGljaztcbiAgICAgIGZldGNoSGludHModGhpcy5vcHRpb25zLmhpbnQsIHRoaXMuY20sIHRoaXMub3B0aW9ucywgKGRhdGEpID0+IHtcbiAgICAgICAgaWYgKHNlbGYudGljayA9PSBteVRpY2spIHNlbGYuZmluaXNoVXBkYXRlKGRhdGEsIGZpcnN0KTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBmaW5pc2hVcGRhdGUoZGF0YSwgZmlyc3QpIHtcbiAgICAgIGlmICh0aGlzLmRhdGEpIENvZGVNaXJyb3Iuc2lnbmFsKHRoaXMuZGF0YSwgJ3VwZGF0ZScpO1xuXG4gICAgICBjb25zdCBwaWNrZWQgPSAodGhpcy53aWRnZXQgJiYgdGhpcy53aWRnZXQucGlja2VkKSB8fCAoZmlyc3QgJiYgdGhpcy5vcHRpb25zLmNvbXBsZXRlU2luZ2xlKTtcbiAgICAgIGlmICh0aGlzLndpZGdldCkgdGhpcy53aWRnZXQuY2xvc2UoKTtcblxuICAgICAgdGhpcy5kYXRhID0gZGF0YTtcblxuICAgICAgaWYgKGRhdGEgJiYgZGF0YS5saXN0Lmxlbmd0aCkge1xuICAgICAgICBpZiAocGlja2VkICYmIGRhdGEubGlzdC5sZW5ndGggPT0gMSkge1xuICAgICAgICAgIHRoaXMucGljayhkYXRhLCAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLndpZGdldCA9IG5ldyBXaWRnZXQodGhpcywgZGF0YSk7XG4gICAgICAgICAgQ29kZU1pcnJvci5zaWduYWwoZGF0YSwgJ3Nob3duJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICB9O1xuXG4gIGZ1bmN0aW9uIHBhcnNlT3B0aW9ucyhjbSwgcG9zLCBvcHRpb25zKSB7XG4gICAgY29uc3QgZWRpdG9yID0gY20ub3B0aW9ucy5oaW50T3B0aW9ucztcbiAgICBjb25zdCBvdXQgPSB7fTtcbiAgICBmb3IgKHZhciBwcm9wIGluIGRlZmF1bHRPcHRpb25zKSBvdXRbcHJvcF0gPSBkZWZhdWx0T3B0aW9uc1twcm9wXTtcbiAgICBpZiAoZWRpdG9yKSB7XG4gICAgICBmb3IgKHZhciBwcm9wIGluIGVkaXRvcikge1xuICAgICAgICBpZiAoZWRpdG9yW3Byb3BdICE9PSB1bmRlZmluZWQpIG91dFtwcm9wXSA9IGVkaXRvcltwcm9wXTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgIGZvciAodmFyIHByb3AgaW4gb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9uc1twcm9wXSAhPT0gdW5kZWZpbmVkKSBvdXRbcHJvcF0gPSBvcHRpb25zW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAob3V0LmhpbnQucmVzb2x2ZSkgb3V0LmhpbnQgPSBvdXQuaGludC5yZXNvbHZlKGNtLCBwb3MpO1xuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRUZXh0KGNvbXBsZXRpb24pIHtcbiAgICBpZiAodHlwZW9mIGNvbXBsZXRpb24gPT09ICdzdHJpbmcnKSByZXR1cm4gY29tcGxldGlvbjtcbiAgICByZXR1cm4gY29tcGxldGlvbi50ZXh0O1xuICB9XG5cbiAgZnVuY3Rpb24gYnVpbGRLZXlNYXAoY29tcGxldGlvbiwgaGFuZGxlKSB7XG4gICAgY29uc3QgYmFzZU1hcCA9IHtcbiAgICAgIFVwKCkge1xuICAgICAgICBoYW5kbGUubW92ZUZvY3VzKC0xKTtcbiAgICAgIH0sXG4gICAgICBEb3duKCkge1xuICAgICAgICBoYW5kbGUubW92ZUZvY3VzKDEpO1xuICAgICAgfSxcbiAgICAgIFBhZ2VVcCgpIHtcbiAgICAgICAgaGFuZGxlLm1vdmVGb2N1cygtaGFuZGxlLm1lbnVTaXplKCkgKyAxLCB0cnVlKTtcbiAgICAgIH0sXG4gICAgICBQYWdlRG93bigpIHtcbiAgICAgICAgaGFuZGxlLm1vdmVGb2N1cyhoYW5kbGUubWVudVNpemUoKSAtIDEsIHRydWUpO1xuICAgICAgfSxcbiAgICAgIEhvbWUoKSB7XG4gICAgICAgIGhhbmRsZS5zZXRGb2N1cygwKTtcbiAgICAgIH0sXG4gICAgICBFbmQoKSB7XG4gICAgICAgIGhhbmRsZS5zZXRGb2N1cyhoYW5kbGUubGVuZ3RoIC0gMSk7XG4gICAgICB9LFxuICAgICAgRW50ZXI6IGhhbmRsZS5waWNrLFxuICAgICAgVGFiOiBoYW5kbGUucGljayxcbiAgICAgIEVzYzogaGFuZGxlLmNsb3NlLFxuICAgIH07XG5cbiAgICBjb25zdCBtYWMgPSAvTWFjLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSk7XG5cbiAgICBpZiAobWFjKSB7XG4gICAgICBiYXNlTWFwWydDdHJsLVAnXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaGFuZGxlLm1vdmVGb2N1cygtMSk7XG4gICAgICB9O1xuICAgICAgYmFzZU1hcFsnQ3RybC1OJ10gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGhhbmRsZS5tb3ZlRm9jdXMoMSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IGN1c3RvbSA9IGNvbXBsZXRpb24ub3B0aW9ucy5jdXN0b21LZXlzO1xuICAgIGNvbnN0IG91ck1hcCA9IGN1c3RvbSA/IHt9IDogYmFzZU1hcDtcblxuICAgIGZ1bmN0aW9uIGFkZEJpbmRpbmcoa2V5LCB2YWwpIHtcbiAgICAgIGxldCBib3VuZDtcbiAgICAgIGlmICh0eXBlb2YgdmFsICE9PSAnc3RyaW5nJykge1xuICAgICAgICBib3VuZCA9IGZ1bmN0aW9uIChjbSkge1xuICAgICAgICAgIHJldHVybiB2YWwoY20sIGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICAvLyBUaGlzIG1lY2hhbmlzbSBpcyBkZXByZWNhdGVkXG4gICAgICBlbHNlIGlmIChiYXNlTWFwLmhhc093blByb3BlcnR5KHZhbCkpIHtcbiAgICAgICAgYm91bmQgPSBiYXNlTWFwW3ZhbF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBib3VuZCA9IHZhbDtcbiAgICAgIH1cbiAgICAgIG91ck1hcFtrZXldID0gYm91bmQ7XG4gICAgfVxuICAgIGlmIChjdXN0b20pIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBjdXN0b20pIHtcbiAgICAgICAgaWYgKGN1c3RvbS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgYWRkQmluZGluZyhrZXksIGN1c3RvbVtrZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBleHRyYSA9IGNvbXBsZXRpb24ub3B0aW9ucy5leHRyYUtleXM7XG4gICAgaWYgKGV4dHJhKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gZXh0cmEpIHtcbiAgICAgICAgaWYgKGV4dHJhLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBhZGRCaW5kaW5nKGtleSwgZXh0cmFba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91ck1hcDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEhpbnRFbGVtZW50KGhpbnRzRWxlbWVudCwgZWwpIHtcbiAgICB3aGlsZSAoZWwgJiYgZWwgIT0gaGludHNFbGVtZW50KSB7XG4gICAgICBpZiAoZWwubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gJ0xJJyAmJiBlbC5wYXJlbnROb2RlID09IGhpbnRzRWxlbWVudCkgcmV0dXJuIGVsO1xuICAgICAgZWwgPSBlbC5wYXJlbnROb2RlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIFdpZGdldChjb21wbGV0aW9uLCBkYXRhKSB7XG4gICAgdGhpcy5jb21wbGV0aW9uID0gY29tcGxldGlvbjtcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIHRoaXMucGlja2VkID0gZmFsc2U7XG4gICAgY29uc3Qgd2lkZ2V0ID0gdGhpcztcbiAgICBjb25zdCBjbSA9IGNvbXBsZXRpb24uY207XG4gICAgY29uc3Qgb3duZXJEb2N1bWVudCA9IGNtLmdldElucHV0RmllbGQoKVxuICAgICAgLm93bmVyRG9jdW1lbnQ7XG4gICAgY29uc3QgcGFyZW50V2luZG93ID0gb3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyB8fCBvd25lckRvY3VtZW50LnBhcmVudFdpbmRvdztcblxuICAgIGNvbnN0IGhpbnRzID0gdGhpcy5oaW50cyA9IG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICBjb25zdCB0aGVtZSA9IGNvbXBsZXRpb24uY20ub3B0aW9ucy50aGVtZTtcbiAgICBoaW50cy5jbGFzc05hbWUgPSAnQ29kZU1pcnJvci1oaW50cyAnICsgdGhlbWU7XG4gICAgdGhpcy5zZWxlY3RlZEhpbnQgPSBkYXRhLnNlbGVjdGVkSGludCB8fCAwO1xuXG4gICAgY29uc3QgY29tcGxldGlvbnMgPSBkYXRhLmxpc3Q7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21wbGV0aW9ucy5sZW5ndGg7ICsraSkge1xuICAgICAgY29uc3QgZWx0ID0gaGludHMuYXBwZW5kQ2hpbGQob3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpKTtcbiAgICAgIGNvbnN0IGN1ciA9IGNvbXBsZXRpb25zW2ldO1xuICAgICAgbGV0IGNsYXNzTmFtZSA9IEhJTlRfRUxFTUVOVF9DTEFTUyArIChpICE9IHRoaXMuc2VsZWN0ZWRIaW50ID8gJycgOiAnICcgKyBBQ1RJVkVfSElOVF9FTEVNRU5UX0NMQVNTKTtcbiAgICAgIGlmIChjdXIuY2xhc3NOYW1lICE9IG51bGwpIGNsYXNzTmFtZSA9IGN1ci5jbGFzc05hbWUgKyAnICcgKyBjbGFzc05hbWU7XG4gICAgICBlbHQuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICAgICAgaWYgKGN1ci5yZW5kZXIpIGN1ci5yZW5kZXIoZWx0LCBkYXRhLCBjdXIpO1xuICAgICAgZWxzZSBlbHQuYXBwZW5kQ2hpbGQob3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjdXIuZGlzcGxheVRleHQgfHwgZ2V0VGV4dChjdXIpKSk7XG4gICAgICBlbHQuaGludElkID0gaTtcbiAgICB9XG5cbiAgICBjb25zdCBjb250YWluZXIgPSBjb21wbGV0aW9uLm9wdGlvbnMuY29udGFpbmVyIHx8IG93bmVyRG9jdW1lbnQuYm9keTtcbiAgICBsZXQgcG9zID0gY20uY3Vyc29yQ29vcmRzKGNvbXBsZXRpb24ub3B0aW9ucy5hbGlnbldpdGhXb3JkID8gZGF0YS5mcm9tIDogbnVsbCk7XG4gICAgbGV0IGxlZnQgPSBwb3MubGVmdDtcbiAgICBsZXQgdG9wID0gcG9zLmJvdHRvbTtcbiAgICBsZXQgYmVsb3cgPSB0cnVlO1xuICAgIGxldCBvZmZzZXRMZWZ0ID0gMDtcbiAgICBsZXQgb2Zmc2V0VG9wID0gMDtcbiAgICBpZiAoY29udGFpbmVyICE9PSBvd25lckRvY3VtZW50LmJvZHkpIHtcbiAgICAgIC8vIFdlIG9mZnNldCB0aGUgY3Vyc29yIHBvc2l0aW9uIGJlY2F1c2UgbGVmdCBhbmQgdG9wIGFyZSByZWxhdGl2ZSB0byB0aGUgb2Zmc2V0UGFyZW50J3MgdG9wIGxlZnQgY29ybmVyLlxuICAgICAgY29uc3QgaXNDb250YWluZXJQb3NpdGlvbmVkID0gWydhYnNvbHV0ZScsICdyZWxhdGl2ZScsICdmaXhlZCddLmluZGV4T2YocGFyZW50V2luZG93LmdldENvbXB1dGVkU3R5bGUoXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgIClcbiAgICAgICAgLnBvc2l0aW9uKSAhPT0gLTE7XG4gICAgICBjb25zdCBvZmZzZXRQYXJlbnQgPSBpc0NvbnRhaW5lclBvc2l0aW9uZWQgPyBjb250YWluZXIgOiBjb250YWluZXIub2Zmc2V0UGFyZW50O1xuICAgICAgY29uc3Qgb2Zmc2V0UGFyZW50UG9zaXRpb24gPSBvZmZzZXRQYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCBib2R5UG9zaXRpb24gPSBvd25lckRvY3VtZW50LmJvZHkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBvZmZzZXRMZWZ0ID0gKG9mZnNldFBhcmVudFBvc2l0aW9uLmxlZnQgLSBib2R5UG9zaXRpb24ubGVmdCAtIG9mZnNldFBhcmVudC5zY3JvbGxMZWZ0KTtcbiAgICAgIG9mZnNldFRvcCA9IChvZmZzZXRQYXJlbnRQb3NpdGlvbi50b3AgLSBib2R5UG9zaXRpb24udG9wIC0gb2Zmc2V0UGFyZW50LnNjcm9sbFRvcCk7XG4gICAgfVxuICAgIGhpbnRzLnN0eWxlLmxlZnQgPSAobGVmdCAtIG9mZnNldExlZnQpICsgJ3B4JztcbiAgICBoaW50cy5zdHlsZS50b3AgPSAodG9wIC0gb2Zmc2V0VG9wKSArICdweCc7XG5cbiAgICAvLyBJZiB3ZSdyZSBhdCB0aGUgZWRnZSBvZiB0aGUgc2NyZWVuLCB0aGVuIHdlIHdhbnQgdGhlIG1lbnUgdG8gYXBwZWFyIG9uIHRoZSBsZWZ0IG9mIHRoZSBjdXJzb3IuXG4gICAgY29uc3Qgd2luVyA9IHBhcmVudFdpbmRvdy5pbm5lcldpZHRoIHx8IE1hdGgubWF4KG93bmVyRG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aCwgb3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcbiAgICAgIC5vZmZzZXRXaWR0aCk7XG4gICAgY29uc3Qgd2luSCA9IHBhcmVudFdpbmRvdy5pbm5lckhlaWdodCB8fCBNYXRoLm1heChvd25lckRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0LCBvd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudFxuICAgICAgLm9mZnNldEhlaWdodCk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGhpbnRzKTtcbiAgICBsZXQgYm94ID0gaGludHMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgY29uc3Qgb3ZlcmxhcFkgPSBib3guYm90dG9tIC0gd2luSDtcbiAgICBjb25zdCBzY3JvbGxzID0gaGludHMuc2Nyb2xsSGVpZ2h0ID4gaGludHMuY2xpZW50SGVpZ2h0ICsgMTtcbiAgICBjb25zdCBzdGFydFNjcm9sbCA9IGNtLmdldFNjcm9sbEluZm8oKTtcblxuICAgIGlmIChvdmVybGFwWSA+IDApIHtcbiAgICAgIGNvbnN0IGhlaWdodCA9IGJveC5ib3R0b20gLSBib3gudG9wO1xuICAgICAgY29uc3QgY3VyVG9wID0gcG9zLnRvcCAtIChwb3MuYm90dG9tIC0gYm94LnRvcCk7XG4gICAgICBpZiAoY3VyVG9wIC0gaGVpZ2h0ID4gMCkgeyAvLyBGaXRzIGFib3ZlIGN1cnNvclxuICAgICAgICBoaW50cy5zdHlsZS50b3AgPSAodG9wID0gcG9zLnRvcCAtIGhlaWdodCAtIG9mZnNldFRvcCkgKyAncHgnO1xuICAgICAgICBiZWxvdyA9IGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChoZWlnaHQgPiB3aW5IKSB7XG4gICAgICAgIGhpbnRzLnN0eWxlLmhlaWdodCA9ICh3aW5IIC0gNSkgKyAncHgnO1xuICAgICAgICBoaW50cy5zdHlsZS50b3AgPSAodG9wID0gcG9zLmJvdHRvbSAtIGJveC50b3AgLSBvZmZzZXRUb3ApICsgJ3B4JztcbiAgICAgICAgY29uc3QgY3Vyc29yID0gY20uZ2V0Q3Vyc29yKCk7XG4gICAgICAgIGlmIChkYXRhLmZyb20uY2ggIT0gY3Vyc29yLmNoKSB7XG4gICAgICAgICAgcG9zID0gY20uY3Vyc29yQ29vcmRzKGN1cnNvcik7XG4gICAgICAgICAgaGludHMuc3R5bGUubGVmdCA9IChsZWZ0ID0gcG9zLmxlZnQgLSBvZmZzZXRMZWZ0KSArICdweCc7XG4gICAgICAgICAgYm94ID0gaGludHMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IG92ZXJsYXBYID0gYm94LnJpZ2h0IC0gd2luVztcbiAgICBpZiAob3ZlcmxhcFggPiAwKSB7XG4gICAgICBpZiAoYm94LnJpZ2h0IC0gYm94LmxlZnQgPiB3aW5XKSB7XG4gICAgICAgIGhpbnRzLnN0eWxlLndpZHRoID0gKHdpblcgLSA1KSArICdweCc7XG4gICAgICAgIG92ZXJsYXBYIC09IChib3gucmlnaHQgLSBib3gubGVmdCkgLSB3aW5XO1xuICAgICAgfVxuICAgICAgaGludHMuc3R5bGUubGVmdCA9IChsZWZ0ID0gcG9zLmxlZnQgLSBvdmVybGFwWCAtIG9mZnNldExlZnQpICsgJ3B4JztcbiAgICB9XG4gICAgaWYgKHNjcm9sbHMpIHtcbiAgICAgIGZvciAobGV0IG5vZGUgPSBoaW50cy5maXJzdENoaWxkOyBub2RlOyBub2RlID0gbm9kZS5uZXh0U2libGluZykge1xuICAgICAgICBub2RlLnN0eWxlLnBhZGRpbmdSaWdodCA9IGNtLmRpc3BsYXkubmF0aXZlQmFyV2lkdGggKyAncHgnO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNtLmFkZEtleU1hcCh0aGlzLmtleU1hcCA9IGJ1aWxkS2V5TWFwKGNvbXBsZXRpb24sIHtcbiAgICAgIG1vdmVGb2N1cyhuLCBhdm9pZFdyYXApIHtcbiAgICAgICAgd2lkZ2V0LmNoYW5nZUFjdGl2ZSh3aWRnZXQuc2VsZWN0ZWRIaW50ICsgbiwgYXZvaWRXcmFwKTtcbiAgICAgIH0sXG4gICAgICBzZXRGb2N1cyhuKSB7XG4gICAgICAgIHdpZGdldC5jaGFuZ2VBY3RpdmUobik7XG4gICAgICB9LFxuICAgICAgbWVudVNpemUoKSB7XG4gICAgICAgIHJldHVybiB3aWRnZXQuc2NyZWVuQW1vdW50KCk7XG4gICAgICB9LFxuICAgICAgbGVuZ3RoOiBjb21wbGV0aW9ucy5sZW5ndGgsXG4gICAgICBjbG9zZSgpIHtcbiAgICAgICAgY29tcGxldGlvbi5jbG9zZSgpO1xuICAgICAgfSxcbiAgICAgIHBpY2soKSB7XG4gICAgICAgIHdpZGdldC5waWNrKCk7XG4gICAgICB9LFxuICAgICAgZGF0YSxcbiAgICB9KSk7XG5cbiAgICBpZiAoY29tcGxldGlvbi5vcHRpb25zLmNsb3NlT25VbmZvY3VzKSB7XG4gICAgICBsZXQgY2xvc2luZ09uQmx1cjtcbiAgICAgIGNtLm9uKCdibHVyJywgdGhpcy5vbkJsdXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNsb3NpbmdPbkJsdXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBjb21wbGV0aW9uLmNsb3NlKCk7XG4gICAgICAgIH0sIDEwMCk7XG4gICAgICB9KTtcbiAgICAgIGNtLm9uKCdmb2N1cycsIHRoaXMub25Gb2N1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGNsb3NpbmdPbkJsdXIpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY20ub24oJ3Njcm9sbCcsIHRoaXMub25TY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBjdXJTY3JvbGwgPSBjbS5nZXRTY3JvbGxJbmZvKCk7XG4gICAgICBjb25zdCBlZGl0b3IgPSBjbS5nZXRXcmFwcGVyRWxlbWVudCgpXG4gICAgICAgIC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGNvbnN0IG5ld1RvcCA9IHRvcCArIHN0YXJ0U2Nyb2xsLnRvcCAtIGN1clNjcm9sbC50b3A7XG4gICAgICBsZXQgcG9pbnQgPSBuZXdUb3AgLSAocGFyZW50V2luZG93LnBhZ2VZT2Zmc2V0IHx8IChvd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fCBvd25lckRvY3VtZW50LmJvZHkpXG4gICAgICAgIC5zY3JvbGxUb3ApO1xuICAgICAgaWYgKCFiZWxvdykgcG9pbnQgKz0gaGludHMub2Zmc2V0SGVpZ2h0O1xuICAgICAgaWYgKHBvaW50IDw9IGVkaXRvci50b3AgfHwgcG9pbnQgPj0gZWRpdG9yLmJvdHRvbSkgcmV0dXJuIGNvbXBsZXRpb24uY2xvc2UoKTtcbiAgICAgIGhpbnRzLnN0eWxlLnRvcCA9IG5ld1RvcCArICdweCc7XG4gICAgICBoaW50cy5zdHlsZS5sZWZ0ID0gKGxlZnQgKyBzdGFydFNjcm9sbC5sZWZ0IC0gY3VyU2Nyb2xsLmxlZnQpICsgJ3B4JztcbiAgICB9KTtcblxuICAgIENvZGVNaXJyb3Iub24oaGludHMsICdkYmxjbGljaycsIChlKSA9PiB7XG4gICAgICBjb25zdCB0ID0gZ2V0SGludEVsZW1lbnQoaGludHMsIGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudCk7XG4gICAgICBpZiAodCAmJiB0LmhpbnRJZCAhPSBudWxsKSB7XG4gICAgICAgIHdpZGdldC5jaGFuZ2VBY3RpdmUodC5oaW50SWQpO1xuICAgICAgICB3aWRnZXQucGljaygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgQ29kZU1pcnJvci5vbihoaW50cywgJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGNvbnN0IHQgPSBnZXRIaW50RWxlbWVudChoaW50cywgZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50KTtcbiAgICAgIGlmICh0ICYmIHQuaGludElkICE9IG51bGwpIHtcbiAgICAgICAgd2lkZ2V0LmNoYW5nZUFjdGl2ZSh0LmhpbnRJZCk7XG4gICAgICAgIGlmIChjb21wbGV0aW9uLm9wdGlvbnMuY29tcGxldGVPblNpbmdsZUNsaWNrKSB3aWRnZXQucGljaygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgQ29kZU1pcnJvci5vbihoaW50cywgJ21vdXNlZG93bicsICgpID0+IHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjbS5mb2N1cygpO1xuICAgICAgfSwgMjApO1xuICAgIH0pO1xuXG4gICAgQ29kZU1pcnJvci5zaWduYWwoZGF0YSwgJ3NlbGVjdCcsIGNvbXBsZXRpb25zW3RoaXMuc2VsZWN0ZWRIaW50XSwgaGludHMuY2hpbGROb2Rlc1t0aGlzLnNlbGVjdGVkSGludF0pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgV2lkZ2V0LnByb3RvdHlwZSA9IHtcbiAgICBjbG9zZSgpIHtcbiAgICAgIGlmICh0aGlzLmNvbXBsZXRpb24ud2lkZ2V0ICE9IHRoaXMpIHJldHVybjtcbiAgICAgIHRoaXMuY29tcGxldGlvbi53aWRnZXQgPSBudWxsO1xuICAgICAgdGhpcy5oaW50cy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuaGludHMpO1xuICAgICAgdGhpcy5jb21wbGV0aW9uLmNtLnJlbW92ZUtleU1hcCh0aGlzLmtleU1hcCk7XG5cbiAgICAgIGNvbnN0IGNtID0gdGhpcy5jb21wbGV0aW9uLmNtO1xuICAgICAgaWYgKHRoaXMuY29tcGxldGlvbi5vcHRpb25zLmNsb3NlT25VbmZvY3VzKSB7XG4gICAgICAgIGNtLm9mZignYmx1cicsIHRoaXMub25CbHVyKTtcbiAgICAgICAgY20ub2ZmKCdmb2N1cycsIHRoaXMub25Gb2N1cyk7XG4gICAgICB9XG4gICAgICBjbS5vZmYoJ3Njcm9sbCcsIHRoaXMub25TY3JvbGwpO1xuICAgIH0sXG5cbiAgICBkaXNhYmxlKCkge1xuICAgICAgdGhpcy5jb21wbGV0aW9uLmNtLnJlbW92ZUtleU1hcCh0aGlzLmtleU1hcCk7XG4gICAgICBjb25zdCB3aWRnZXQgPSB0aGlzO1xuICAgICAgdGhpcy5rZXlNYXAgPSB7XG4gICAgICAgIEVudGVyKCkge1xuICAgICAgICAgIHdpZGdldC5waWNrZWQgPSB0cnVlO1xuICAgICAgICB9LFxuICAgICAgfTtcbiAgICAgIHRoaXMuY29tcGxldGlvbi5jbS5hZGRLZXlNYXAodGhpcy5rZXlNYXApO1xuICAgIH0sXG5cbiAgICBwaWNrKCkge1xuICAgICAgdGhpcy5jb21wbGV0aW9uLnBpY2sodGhpcy5kYXRhLCB0aGlzLnNlbGVjdGVkSGludCk7XG4gICAgfSxcblxuICAgIGNoYW5nZUFjdGl2ZShpLCBhdm9pZFdyYXApIHtcbiAgICAgIGlmIChpID49IHRoaXMuZGF0YS5saXN0Lmxlbmd0aCkge1xuICAgICAgICBpID0gYXZvaWRXcmFwID8gdGhpcy5kYXRhLmxpc3QubGVuZ3RoIC0gMSA6IDA7XG4gICAgICB9IGVsc2UgaWYgKGkgPCAwKSB7XG4gICAgICAgIGkgPSBhdm9pZFdyYXAgPyAwIDogdGhpcy5kYXRhLmxpc3QubGVuZ3RoIC0gMTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkSGludCA9PSBpKSByZXR1cm47XG4gICAgICBsZXQgbm9kZSA9IHRoaXMuaGludHMuY2hpbGROb2Rlc1t0aGlzLnNlbGVjdGVkSGludF07XG4gICAgICBpZiAobm9kZSkgbm9kZS5jbGFzc05hbWUgPSBub2RlLmNsYXNzTmFtZS5yZXBsYWNlKCcgJyArIEFDVElWRV9ISU5UX0VMRU1FTlRfQ0xBU1MsICcnKTtcbiAgICAgIG5vZGUgPSB0aGlzLmhpbnRzLmNoaWxkTm9kZXNbdGhpcy5zZWxlY3RlZEhpbnQgPSBpXTtcbiAgICAgIG5vZGUuY2xhc3NOYW1lICs9ICcgJyArIEFDVElWRV9ISU5UX0VMRU1FTlRfQ0xBU1M7XG4gICAgICBpZiAobm9kZS5vZmZzZXRUb3AgPCB0aGlzLmhpbnRzLnNjcm9sbFRvcCkge1xuICAgICAgICB0aGlzLmhpbnRzLnNjcm9sbFRvcCA9IG5vZGUub2Zmc2V0VG9wIC0gMztcbiAgICAgIH0gZWxzZSBpZiAobm9kZS5vZmZzZXRUb3AgKyBub2RlLm9mZnNldEhlaWdodCA+IHRoaXMuaGludHMuc2Nyb2xsVG9wICsgdGhpcy5oaW50cy5jbGllbnRIZWlnaHQpIHtcbiAgICAgICAgdGhpcy5oaW50cy5zY3JvbGxUb3AgPSBub2RlLm9mZnNldFRvcCArIG5vZGUub2Zmc2V0SGVpZ2h0IC0gdGhpcy5oaW50cy5jbGllbnRIZWlnaHQgKyAzO1xuICAgICAgfVxuICAgICAgQ29kZU1pcnJvci5zaWduYWwodGhpcy5kYXRhLCAnc2VsZWN0JywgdGhpcy5kYXRhLmxpc3RbdGhpcy5zZWxlY3RlZEhpbnRdLCBub2RlKTtcbiAgICB9LFxuXG4gICAgc2NyZWVuQW1vdW50KCkge1xuICAgICAgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5oaW50cy5jbGllbnRIZWlnaHQgLyB0aGlzLmhpbnRzLmZpcnN0Q2hpbGQub2Zmc2V0SGVpZ2h0KSB8fCAxO1xuICAgIH0sXG4gIH07XG5cbiAgZnVuY3Rpb24gYXBwbGljYWJsZUhlbHBlcnMoY20sIGhlbHBlcnMpIHtcbiAgICBpZiAoIWNtLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHJldHVybiBoZWxwZXJzO1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGVscGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGhlbHBlcnNbaV0uc3VwcG9ydHNTZWxlY3Rpb24pIHJlc3VsdC5wdXNoKGhlbHBlcnNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2hIaW50cyhoaW50LCBjbSwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICBpZiAoaGludC5hc3luYykge1xuICAgICAgaGludChjbSwgY2FsbGJhY2ssIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBoaW50KGNtLCBvcHRpb25zKTtcbiAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LnRoZW4pIHJlc3VsdC50aGVuKGNhbGxiYWNrKTtcbiAgICAgIGVsc2UgY2FsbGJhY2socmVzdWx0KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZXNvbHZlQXV0b0hpbnRzKGNtLCBwb3MpIHtcbiAgICBjb25zdCBoZWxwZXJzID0gY20uZ2V0SGVscGVycyhwb3MsICdoaW50Jyk7XG4gICAgbGV0IHdvcmRzO1xuICAgIGlmIChoZWxwZXJzLmxlbmd0aCkge1xuICAgICAgY29uc3QgcmVzb2x2ZWQgPSBmdW5jdGlvbiAoY20sIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGFwcCA9IGFwcGxpY2FibGVIZWxwZXJzKGNtLCBoZWxwZXJzKTtcblxuICAgICAgICBmdW5jdGlvbiBydW4oaSkge1xuICAgICAgICAgIGlmIChpID09IGFwcC5sZW5ndGgpIHJldHVybiBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgICBmZXRjaEhpbnRzKGFwcFtpXSwgY20sIG9wdGlvbnMsIChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0Lmxpc3QubGVuZ3RoID4gMCkgY2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgICAgIGVsc2UgcnVuKGkgKyAxKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBydW4oMCk7XG4gICAgICB9O1xuICAgICAgcmVzb2x2ZWQuYXN5bmMgPSB0cnVlO1xuICAgICAgcmVzb2x2ZWQuc3VwcG9ydHNTZWxlY3Rpb24gPSB0cnVlO1xuICAgICAgcmV0dXJuIHJlc29sdmVkO1xuICAgIH1cbiAgICBpZiAod29yZHMgPSBjbS5nZXRIZWxwZXIoY20uZ2V0Q3Vyc29yKCksICdoaW50V29yZHMnKSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjbSkge1xuICAgICAgICByZXR1cm4gQ29kZU1pcnJvci5oaW50LmZyb21MaXN0KGNtLCB7XG4gICAgICAgICAgd29yZHMsXG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKENvZGVNaXJyb3IuaGludC5hbnl3b3JkKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGNtLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBDb2RlTWlycm9yLmhpbnQuYW55d29yZChjbSwgb3B0aW9ucyk7XG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyB9O1xuXG4gIH1cblxuICBDb2RlTWlycm9yLnJlZ2lzdGVySGVscGVyKCdoaW50JywgJ2F1dG8nLCB7XG4gICAgcmVzb2x2ZTogcmVzb2x2ZUF1dG9IaW50cyxcbiAgfSk7XG5cbiAgQ29kZU1pcnJvci5yZWdpc3RlckhlbHBlcignaGludCcsICdmcm9tTGlzdCcsIChjbSwgb3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IGN1ciA9IGNtLmdldEN1cnNvcigpO1xuICAgIGNvbnN0IHRva2VuID0gY20uZ2V0VG9rZW5BdChjdXIpO1xuICAgIGxldCB0ZXJtO1xuICAgIGxldCBmcm9tID0gQ29kZU1pcnJvci5Qb3MoY3VyLmxpbmUsIHRva2VuLnN0YXJ0KTtcbiAgICBjb25zdCB0byA9IGN1cjtcbiAgICBpZiAodG9rZW4uc3RhcnQgPCBjdXIuY2ggJiYgL1xcdy8udGVzdCh0b2tlbi5zdHJpbmcuY2hhckF0KGN1ci5jaCAtIHRva2VuLnN0YXJ0IC0gMSkpKSB7XG4gICAgICB0ZXJtID0gdG9rZW4uc3RyaW5nLnN1YnN0cigwLCBjdXIuY2ggLSB0b2tlbi5zdGFydCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRlcm0gPSAnJztcbiAgICAgIGZyb20gPSBjdXI7XG4gICAgfVxuICAgIGNvbnN0IGZvdW5kID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRpb25zLndvcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCB3b3JkID0gb3B0aW9ucy53b3Jkc1tpXTtcbiAgICAgIGlmICh3b3JkLnNsaWNlKDAsIHRlcm0ubGVuZ3RoKSA9PSB0ZXJtKSB7XG4gICAgICAgIGZvdW5kLnB1c2god29yZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGZvdW5kLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGlzdDogZm91bmQsXG4gICAgICAgIGZyb20sXG4gICAgICAgIHRvLFxuICAgICAgfTtcbiAgICB9XG4gIH0pO1xuXG4gIENvZGVNaXJyb3IuY29tbWFuZHMuYXV0b2NvbXBsZXRlID0gQ29kZU1pcnJvci5zaG93SGludDtcblxuICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgaGludDogQ29kZU1pcnJvci5oaW50LmF1dG8sXG4gICAgY29tcGxldGVTaW5nbGU6IHRydWUsXG4gICAgYWxpZ25XaXRoV29yZDogdHJ1ZSxcbiAgICBjbG9zZUNoYXJhY3RlcnM6IC9bXFxzKClcXFtcXF17fTs6PixdLyxcbiAgICBjbG9zZU9uVW5mb2N1czogdHJ1ZSxcbiAgICBjb21wbGV0ZU9uU2luZ2xlQ2xpY2s6IHRydWUsXG4gICAgY29udGFpbmVyOiBudWxsLFxuICAgIGN1c3RvbUtleXM6IG51bGwsXG4gICAgZXh0cmFLZXlzOiBudWxsLFxuICB9O1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lT3B0aW9uKCdoaW50T3B0aW9ucycsIG51bGwpO1xufVxuIiwgIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRBbnl3b3JkaGludChDb2RlTWlycm9yKSB7XG5cbiAgY29uc3QgV09SRCA9IC9bXFx3JF0rLztcbiAgY29uc3QgUkFOR0UgPSA1MDA7XG5cbiAgQ29kZU1pcnJvci5yZWdpc3RlckhlbHBlcignaGludCcsICdhbnl3b3JkJywgKGVkaXRvciwgb3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHdvcmQgPSBvcHRpb25zICYmIG9wdGlvbnMud29yZCB8fCBXT1JEO1xuICAgIGNvbnN0IHJhbmdlID0gb3B0aW9ucyAmJiBvcHRpb25zLnJhbmdlIHx8IFJBTkdFO1xuICAgIGNvbnN0IGN1ciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICBjb25zdCBjdXJMaW5lID0gZWRpdG9yLmdldExpbmUoY3VyLmxpbmUpO1xuICAgIGNvbnN0IGVuZCA9IGN1ci5jaDtcbiAgICBsZXQgc3RhcnQgPSBlbmQ7XG4gICAgd2hpbGUgKHN0YXJ0ICYmIHdvcmQudGVzdChjdXJMaW5lLmNoYXJBdChzdGFydCAtIDEpKSkgLS1zdGFydDtcbiAgICBjb25zdCBjdXJXb3JkID0gc3RhcnQgIT0gZW5kICYmIGN1ckxpbmUuc2xpY2Uoc3RhcnQsIGVuZCk7XG5cbiAgICBjb25zdCBsaXN0ID0gb3B0aW9ucyAmJiBvcHRpb25zLmxpc3QgfHwgW107XG4gICAgY29uc3Qgc2VlbiA9IHt9O1xuICAgIGNvbnN0IHJlID0gbmV3IFJlZ0V4cCh3b3JkLnNvdXJjZSwgJ2cnKTtcbiAgICBmb3IgKGxldCBkaXIgPSAtMTsgZGlyIDw9IDE7IGRpciArPSAyKSB7XG4gICAgICBsZXQgbGluZSA9IGN1ci5saW5lO1xuICAgICAgY29uc3QgZW5kTGluZSA9IE1hdGgubWluKE1hdGgubWF4KGxpbmUgKyBkaXIgKiByYW5nZSwgZWRpdG9yLmZpcnN0TGluZSgpKSwgZWRpdG9yLmxhc3RMaW5lKCkpICsgZGlyO1xuICAgICAgZm9yICg7IGxpbmUgIT0gZW5kTGluZTsgbGluZSArPSBkaXIpIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGVkaXRvci5nZXRMaW5lKGxpbmUpO1xuICAgICAgICB2YXIgbTtcbiAgICAgICAgd2hpbGUgKG0gPSByZS5leGVjKHRleHQpKSB7XG4gICAgICAgICAgaWYgKGxpbmUgPT0gY3VyLmxpbmUgJiYgbVswXSA9PT0gY3VyV29yZCkgY29udGludWU7XG4gICAgICAgICAgaWYgKCghY3VyV29yZCB8fCBtWzBdLmxhc3RJbmRleE9mKGN1cldvcmQsIDApID09IDApICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2VlbixcbiAgICAgICAgICAgIG1bMF0pKSB7XG4gICAgICAgICAgICBzZWVuW21bMF1dID0gdHJ1ZTtcbiAgICAgICAgICAgIGxpc3QucHVzaChtWzBdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGxpc3QsXG4gICAgICBmcm9tOiBDb2RlTWlycm9yLlBvcyhjdXIubGluZSwgc3RhcnQpLFxuICAgICAgdG86IENvZGVNaXJyb3IuUG9zKGN1ci5saW5lLCBlbmQpLFxuICAgIH07XG4gIH0pO1xufVxuIiwgIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRYTUxoaW50KENvZGVNaXJyb3IpIHtcblxuICBjb25zdCBQb3MgPSBDb2RlTWlycm9yLlBvcztcblxuICBmdW5jdGlvbiBtYXRjaGVzKGhpbnQsIHR5cGVkLCBtYXRjaEluTWlkZGxlKSB7XG4gICAgaWYgKG1hdGNoSW5NaWRkbGUpIHJldHVybiBoaW50LmluZGV4T2YodHlwZWQpID49IDA7XG4gICAgcmV0dXJuIGhpbnQubGFzdEluZGV4T2YodHlwZWQsIDApID09IDA7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRIaW50cyhjbSwgb3B0aW9ucykge1xuICAgIGNvbnN0IHRhZ3MgPSBvcHRpb25zICYmIG9wdGlvbnMuc2NoZW1hSW5mbztcbiAgICBsZXQgcXVvdGUgPSAob3B0aW9ucyAmJiBvcHRpb25zLnF1b3RlQ2hhcikgfHwgJ1wiJztcbiAgICBjb25zdCBtYXRjaEluTWlkZGxlID0gb3B0aW9ucyAmJiBvcHRpb25zLm1hdGNoSW5NaWRkbGU7XG4gICAgaWYgKCF0YWdzKSByZXR1cm47XG4gICAgY29uc3QgY3VyID0gY20uZ2V0Q3Vyc29yKCk7XG4gICAgY29uc3QgdG9rZW4gPSBjbS5nZXRUb2tlbkF0KGN1cik7XG4gICAgaWYgKHRva2VuLmVuZCA+IGN1ci5jaCkge1xuICAgICAgdG9rZW4uZW5kID0gY3VyLmNoO1xuICAgICAgdG9rZW4uc3RyaW5nID0gdG9rZW4uc3RyaW5nLnNsaWNlKDAsIGN1ci5jaCAtIHRva2VuLnN0YXJ0KTtcbiAgICB9XG4gICAgY29uc3QgaW5uZXIgPSBDb2RlTWlycm9yLmlubmVyTW9kZShjbS5nZXRNb2RlKCksIHRva2VuLnN0YXRlKTtcbiAgICBpZiAoaW5uZXIubW9kZS5uYW1lICE9ICd4bWwnKSByZXR1cm47XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgbGV0IHJlcGxhY2VUb2tlbiA9IGZhbHNlO1xuICAgIGxldCBwcmVmaXg7XG4gICAgY29uc3QgdGFnID0gL1xcYnRhZ1xcYi8udGVzdCh0b2tlbi50eXBlKSAmJiAhLz4kLy50ZXN0KHRva2VuLnN0cmluZyk7XG4gICAgY29uc3QgdGFnTmFtZSA9IHRhZyAmJiAvXlxcdy8udGVzdCh0b2tlbi5zdHJpbmcpO1xuICAgIGxldCB0YWdTdGFydDtcblxuICAgIGlmICh0YWdOYW1lKSB7XG4gICAgICB2YXIgYmVmb3JlID0gY20uZ2V0TGluZShjdXIubGluZSlcbiAgICAgICAgLnNsaWNlKE1hdGgubWF4KDAsIHRva2VuLnN0YXJ0IC0gMiksIHRva2VuLnN0YXJ0KTtcbiAgICAgIHZhciB0YWdUeXBlID0gLzxcXC8kLy50ZXN0KGJlZm9yZSkgPyAnY2xvc2UnIDogLzwkLy50ZXN0KGJlZm9yZSkgPyAnb3BlbicgOiBudWxsO1xuICAgICAgaWYgKHRhZ1R5cGUpIHRhZ1N0YXJ0ID0gdG9rZW4uc3RhcnQgLSAodGFnVHlwZSA9PSAnY2xvc2UnID8gMiA6IDEpO1xuICAgIH0gZWxzZSBpZiAodGFnICYmIHRva2VuLnN0cmluZyA9PSAnPCcpIHtcbiAgICAgIHRhZ1R5cGUgPSAnb3Blbic7XG4gICAgfSBlbHNlIGlmICh0YWcgJiYgdG9rZW4uc3RyaW5nID09ICc8LycpIHtcbiAgICAgIHRhZ1R5cGUgPSAnY2xvc2UnO1xuICAgIH1cblxuICAgIGlmICghdGFnICYmICFpbm5lci5zdGF0ZS50YWdOYW1lIHx8IHRhZ1R5cGUpIHtcbiAgICAgIGlmICh0YWdOYW1lKSB7IHByZWZpeCA9IHRva2VuLnN0cmluZzsgfVxuICAgICAgcmVwbGFjZVRva2VuID0gdGFnVHlwZTtcbiAgICAgIGNvbnN0IGN4ID0gaW5uZXIuc3RhdGUuY29udGV4dDtcbiAgICAgIHZhciBjdXJUYWcgPSBjeCAmJiB0YWdzW2N4LnRhZ05hbWVdO1xuICAgICAgY29uc3QgY2hpbGRMaXN0ID0gY3ggPyBjdXJUYWcgJiYgY3VyVGFnLmNoaWxkcmVuIDogdGFnc1snIXRvcCddO1xuICAgICAgaWYgKGNoaWxkTGlzdCAmJiB0YWdUeXBlICE9ICdjbG9zZScpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZExpc3QubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICBpZiAoIXByZWZpeCB8fCBtYXRjaGVzKGNoaWxkTGlzdFtpXSwgcHJlZml4LCBtYXRjaEluTWlkZGxlKSkgeyByZXN1bHQucHVzaCgnPCcgKyBjaGlsZExpc3RbaV0pOyB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGFnVHlwZSAhPSAnY2xvc2UnKSB7XG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiB0YWdzKSB7XG4gICAgICAgICAgaWYgKHRhZ3MuaGFzT3duUHJvcGVydHkobmFtZSkgJiYgbmFtZSAhPSAnIXRvcCcgJiYgbmFtZSAhPSAnIWF0dHJzJyAmJiAoIXByZWZpeCB8fCBtYXRjaGVzKG5hbWUsIHByZWZpeCxcbiAgICAgICAgICAgIG1hdGNoSW5NaWRkbGUpKSkgeyByZXN1bHQucHVzaCgnPCcgKyBuYW1lKTsgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY3ggJiYgKCFwcmVmaXggfHwgdGFnVHlwZSA9PSAnY2xvc2UnICYmIG1hdGNoZXMoY3gudGFnTmFtZSwgcHJlZml4LCBtYXRjaEluTWlkZGxlKSkpIHsgcmVzdWx0LnB1c2goJzwvJyArIGN4LnRhZ05hbWUgKyAnPicpOyB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEF0dHJpYnV0ZSBjb21wbGV0aW9uXG4gICAgICB2YXIgY3VyVGFnID0gdGFnc1tpbm5lci5zdGF0ZS50YWdOYW1lXTtcbiAgICAgIGxldCBhdHRycyA9IGN1clRhZyAmJiBjdXJUYWcuYXR0cnM7XG4gICAgICBjb25zdCBnbG9iYWxBdHRycyA9IHRhZ3NbJyFhdHRycyddO1xuICAgICAgaWYgKCFhdHRycyAmJiAhZ2xvYmFsQXR0cnMpIHJldHVybjtcbiAgICAgIGlmICghYXR0cnMpIHtcbiAgICAgICAgYXR0cnMgPSBnbG9iYWxBdHRycztcbiAgICAgIH0gZWxzZSBpZiAoZ2xvYmFsQXR0cnMpIHsgLy8gQ29tYmluZSB0YWctbG9jYWwgYW5kIGdsb2JhbCBhdHRyaWJ1dGVzXG4gICAgICAgIGNvbnN0IHNldCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBubSBpbiBnbG9iYWxBdHRycykgeyBpZiAoZ2xvYmFsQXR0cnMuaGFzT3duUHJvcGVydHkobm0pKSBzZXRbbm1dID0gZ2xvYmFsQXR0cnNbbm1dOyB9XG4gICAgICAgIGZvciAodmFyIG5tIGluIGF0dHJzKSB7IGlmIChhdHRycy5oYXNPd25Qcm9wZXJ0eShubSkpIHNldFtubV0gPSBhdHRyc1tubV07IH1cbiAgICAgICAgYXR0cnMgPSBzZXQ7XG4gICAgICB9XG4gICAgICBpZiAodG9rZW4udHlwZSA9PSAnc3RyaW5nJyB8fCB0b2tlbi5zdHJpbmcgPT0gJz0nKSB7IC8vIEEgdmFsdWVcbiAgICAgICAgdmFyIGJlZm9yZSA9IGNtLmdldFJhbmdlKFBvcyhjdXIubGluZSwgTWF0aC5tYXgoMCwgY3VyLmNoIC0gNjApKSxcbiAgICAgICAgICBQb3MoY3VyLmxpbmUsIHRva2VuLnR5cGUgPT0gJ3N0cmluZycgPyB0b2tlbi5zdGFydCA6IHRva2VuLmVuZCkpO1xuICAgICAgICBjb25zdCBhdE5hbWUgPSBiZWZvcmUubWF0Y2goLyhbXlxcc1xcdTAwYTA9PD5cXFwiXFwnXSspPSQvKTtcbiAgICAgICAgbGV0IGF0VmFsdWVzO1xuICAgICAgICBpZiAoIWF0TmFtZSB8fCAhYXR0cnMuaGFzT3duUHJvcGVydHkoYXROYW1lWzFdKSB8fCAhKGF0VmFsdWVzID0gYXR0cnNbYXROYW1lWzFdXSkpIHJldHVybjtcbiAgICAgICAgaWYgKHR5cGVvZiBhdFZhbHVlcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGF0VmFsdWVzID0gYXRWYWx1ZXMuY2FsbCh0aGlzLFxuICAgICAgICAgICAgY20pO1xuICAgICAgICB9IC8vIEZ1bmN0aW9ucyBjYW4gYmUgdXNlZCB0byBzdXBwbHkgdmFsdWVzIGZvciBhdXRvY29tcGxldGUgd2lkZ2V0XG4gICAgICAgIGlmICh0b2tlbi50eXBlID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcHJlZml4ID0gdG9rZW4uc3RyaW5nO1xuICAgICAgICAgIGxldCBuID0gMDtcbiAgICAgICAgICBpZiAoL1snXCJdLy50ZXN0KHRva2VuLnN0cmluZy5jaGFyQXQoMCkpKSB7XG4gICAgICAgICAgICBxdW90ZSA9IHRva2VuLnN0cmluZy5jaGFyQXQoMCk7XG4gICAgICAgICAgICBwcmVmaXggPSB0b2tlbi5zdHJpbmcuc2xpY2UoMSk7XG4gICAgICAgICAgICBuKys7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGxlbiA9IHRva2VuLnN0cmluZy5sZW5ndGg7XG4gICAgICAgICAgaWYgKC9bJ1wiXS8udGVzdCh0b2tlbi5zdHJpbmcuY2hhckF0KGxlbiAtIDEpKSkge1xuICAgICAgICAgICAgcXVvdGUgPSB0b2tlbi5zdHJpbmcuY2hhckF0KGxlbiAtIDEpO1xuICAgICAgICAgICAgcHJlZml4ID0gdG9rZW4uc3RyaW5nLnN1YnN0cihuLCBsZW4gLSAyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG4pIHsgLy8gYW4gb3BlbmluZyBxdW90ZVxuICAgICAgICAgICAgY29uc3QgbGluZSA9IGNtLmdldExpbmUoY3VyLmxpbmUpO1xuICAgICAgICAgICAgaWYgKGxpbmUubGVuZ3RoID4gdG9rZW4uZW5kICYmIGxpbmUuY2hhckF0KHRva2VuLmVuZCkgPT0gcXVvdGUpIHRva2VuLmVuZCsrOyAvLyBpbmNsdWRlIGEgY2xvc2luZyBxdW90ZVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXBsYWNlVG9rZW4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXRWYWx1ZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICBpZiAoIXByZWZpeCB8fCBtYXRjaGVzKGF0VmFsdWVzW2ldLCBwcmVmaXgsIG1hdGNoSW5NaWRkbGUpKSB7IHJlc3VsdC5wdXNoKHF1b3RlICsgYXRWYWx1ZXNbaV0gKyBxdW90ZSk7IH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHsgLy8gQW4gYXR0cmlidXRlIG5hbWVcbiAgICAgICAgaWYgKHRva2VuLnR5cGUgPT0gJ2F0dHJpYnV0ZScpIHtcbiAgICAgICAgICBwcmVmaXggPSB0b2tlbi5zdHJpbmc7XG4gICAgICAgICAgcmVwbGFjZVRva2VuID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGF0dHIgaW4gYXR0cnMpIHtcbiAgICAgICAgICBpZiAoYXR0cnMuaGFzT3duUHJvcGVydHkoYXR0cikgJiYgKCFwcmVmaXggfHwgbWF0Y2hlcyhhdHRyLCBwcmVmaXgsIG1hdGNoSW5NaWRkbGUpKSkgeyByZXN1bHQucHVzaChhdHRyKTsgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBsaXN0OiByZXN1bHQsXG4gICAgICBmcm9tOiByZXBsYWNlVG9rZW4gPyBQb3MoY3VyLmxpbmUsIHRhZ1N0YXJ0ID09IG51bGwgPyB0b2tlbi5zdGFydCA6IHRhZ1N0YXJ0KSA6IGN1cixcbiAgICAgIHRvOiByZXBsYWNlVG9rZW4gPyBQb3MoY3VyLmxpbmUsIHRva2VuLmVuZCkgOiBjdXIsXG4gICAgfTtcbiAgfVxuXG4gIENvZGVNaXJyb3IucmVnaXN0ZXJIZWxwZXIoJ2hpbnQnLCAneG1sJywgZ2V0SGludHMpO1xufVxuIiwgIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRDU1NIaW50KENvZGVNaXJyb3IpIHtcblxuICBjb25zdCBwc2V1ZG9DbGFzc2VzID0ge1xuICAgIGxpbms6IDEsXG4gICAgdmlzaXRlZDogMSxcbiAgICBhY3RpdmU6IDEsXG4gICAgaG92ZXI6IDEsXG4gICAgZm9jdXM6IDEsXG4gICAgJ2ZpcnN0LWxldHRlcic6IDEsXG4gICAgJ2ZpcnN0LWxpbmUnOiAxLFxuICAgICdmaXJzdC1jaGlsZCc6IDEsXG4gICAgYmVmb3JlOiAxLFxuICAgIGFmdGVyOiAxLFxuICAgIGxhbmc6IDEsXG4gIH07XG5cbiAgQ29kZU1pcnJvci5yZWdpc3RlckhlbHBlcignaGludCcsICdjc3MnLCAoY20pID0+IHtcbiAgICBjb25zdCBjdXIgPSBjbS5nZXRDdXJzb3IoKTtcbiAgICBjb25zdCB0b2tlbiA9IGNtLmdldFRva2VuQXQoY3VyKTtcbiAgICBjb25zdCBpbm5lciA9IENvZGVNaXJyb3IuaW5uZXJNb2RlKGNtLmdldE1vZGUoKSwgdG9rZW4uc3RhdGUpO1xuICAgIGlmIChpbm5lci5tb2RlLm5hbWUgIT0gJ2NzcycpIHJldHVybjtcblxuICAgIGlmICh0b2tlbi50eXBlID09ICdrZXl3b3JkJyAmJiAnIWltcG9ydGFudCcuaW5kZXhPZih0b2tlbi5zdHJpbmcpID09IDApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxpc3Q6IFsnIWltcG9ydGFudCddLFxuICAgICAgICBmcm9tOiBDb2RlTWlycm9yLlBvcyhjdXIubGluZSwgdG9rZW4uc3RhcnQpLFxuICAgICAgICB0bzogQ29kZU1pcnJvci5Qb3MoY3VyLmxpbmUsIHRva2VuLmVuZCksXG4gICAgICB9O1xuICAgIH1cblxuICAgIGxldCBzdGFydCA9IHRva2VuLnN0YXJ0O1xuICAgIGxldCBlbmQgPSBjdXIuY2g7XG4gICAgbGV0IHdvcmQgPSB0b2tlbi5zdHJpbmcuc2xpY2UoMCwgZW5kIC0gc3RhcnQpO1xuICAgIGlmICgvW15cXHckXy1dLy50ZXN0KHdvcmQpKSB7XG4gICAgICB3b3JkID0gJyc7XG4gICAgICBzdGFydCA9IGVuZCA9IGN1ci5jaDtcbiAgICB9XG5cbiAgICBjb25zdCBzcGVjID0gQ29kZU1pcnJvci5yZXNvbHZlTW9kZSgndGV4dC9jc3MnKTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuXG4gICAgZnVuY3Rpb24gYWRkKGtleXdvcmRzKSB7XG4gICAgICBmb3IgKGNvbnN0IG5hbWUgaW4ga2V5d29yZHMpIHtcbiAgICAgICAgaWYgKCF3b3JkIHx8IG5hbWUubGFzdEluZGV4T2Yod29yZCwgMCkgPT0gMCkgeyByZXN1bHQucHVzaChuYW1lKTsgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHN0ID0gaW5uZXIuc3RhdGUuc3RhdGU7XG4gICAgaWYgKHN0ID09ICdwc2V1ZG8nIHx8IHRva2VuLnR5cGUgPT0gJ3ZhcmlhYmxlLTMnKSB7XG4gICAgICBhZGQocHNldWRvQ2xhc3Nlcyk7XG4gICAgfSBlbHNlIGlmIChzdCA9PSAnYmxvY2snIHx8IHN0ID09ICdtYXliZXByb3AnKSB7XG4gICAgICBhZGQoc3BlYy5wcm9wZXJ0eUtleXdvcmRzKTtcbiAgICB9IGVsc2UgaWYgKHN0ID09ICdwcm9wJyB8fCBzdCA9PSAncGFyZW5zJyB8fCBzdCA9PSAnYXQnIHx8IHN0ID09ICdwYXJhbXMnKSB7XG4gICAgICBhZGQoc3BlYy52YWx1ZUtleXdvcmRzKTtcbiAgICAgIGFkZChzcGVjLmNvbG9yS2V5d29yZHMpO1xuICAgIH0gZWxzZSBpZiAoc3QgPT0gJ21lZGlhJyB8fCBzdCA9PSAnbWVkaWFfcGFyZW5zJykge1xuICAgICAgYWRkKHNwZWMubWVkaWFUeXBlcyk7XG4gICAgICBhZGQoc3BlYy5tZWRpYUZlYXR1cmVzKTtcbiAgICB9XG5cbiAgICBpZiAocmVzdWx0Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGlzdDogcmVzdWx0LFxuICAgICAgICBmcm9tOiBDb2RlTWlycm9yLlBvcyhjdXIubGluZSwgc3RhcnQpLFxuICAgICAgICB0bzogQ29kZU1pcnJvci5Qb3MoY3VyLmxpbmUsIGVuZCksXG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG5cbn1cbiIsICIvLyBDb2RlTWlycm9yLCBjb3B5cmlnaHQgKGMpIGJ5IE1hcmlqbiBIYXZlcmJla2UgYW5kIG90aGVyc1xuLy8gRGlzdHJpYnV0ZWQgdW5kZXIgYW4gTUlUIGxpY2Vuc2U6IGh0dHBzOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkSFRNTGhpbnQoQ29kZU1pcnJvcikge1xuXG4gIGNvbnN0IGxhbmdzID0gJ2FiIGFhIGFmIGFrIHNxIGFtIGFyIGFuIGh5IGFzIGF2IGFlIGF5IGF6IGJtIGJhIGV1IGJlIGJuIGJoIGJpIGJzIGJyIGJnIG15IGNhIGNoIGNlIG55IHpoIGN2IGt3IGNvIGNyIGhyIGNzIGRhIGR2IG5sIGR6IGVuIGVvIGV0IGVlIGZvIGZqIGZpIGZyIGZmIGdsIGthIGRlIGVsIGduIGd1IGh0IGhhIGhlIGh6IGhpIGhvIGh1IGlhIGlkIGllIGdhIGlnIGlrIGlvIGlzIGl0IGl1IGphIGp2IGtsIGtuIGtyIGtzIGtrIGttIGtpIHJ3IGt5IGt2IGtnIGtvIGt1IGtqIGxhIGxiIGxnIGxpIGxuIGxvIGx0IGx1IGx2IGd2IG1rIG1nIG1zIG1sIG10IG1pIG1yIG1oIG1uIG5hIG52IG5iIG5kIG5lIG5nIG5uIG5vIGlpIG5yIG9jIG9qIGN1IG9tIG9yIG9zIHBhIHBpIGZhIHBsIHBzIHB0IHF1IHJtIHJuIHJvIHJ1IHNhIHNjIHNkIHNlIHNtIHNnIHNyIGdkIHNuIHNpIHNrIHNsIHNvIHN0IGVzIHN1IHN3IHNzIHN2IHRhIHRlIHRnIHRoIHRpIGJvIHRrIHRsIHRuIHRvIHRyIHRzIHR0IHR3IHR5IHVnIHVrIHVyIHV6IHZlIHZpIHZvIHdhIGN5IHdvIGZ5IHhoIHlpIHlvIHphIHp1J1xuICAgIC5zcGxpdCgnICcpO1xuICBjb25zdCB0YXJnZXRzID0gWydfYmxhbmsnLCAnX3NlbGYnLCAnX3RvcCcsICdfcGFyZW50J107XG4gIGNvbnN0IGNoYXJzZXRzID0gWydhc2NpaScsICd1dGYtOCcsICd1dGYtMTYnLCAnbGF0aW4xJywgJ2xhdGluMSddO1xuICBjb25zdCBtZXRob2RzID0gWydnZXQnLCAncG9zdCcsICdwdXQnLCAnZGVsZXRlJ107XG4gIGNvbnN0IGVuY3MgPSBbJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsICdtdWx0aXBhcnQvZm9ybS1kYXRhJywgJ3RleHQvcGxhaW4nXTtcbiAgY29uc3QgbWVkaWEgPSBbJ2FsbCcsICdzY3JlZW4nLCAncHJpbnQnLCAnZW1ib3NzZWQnLCAnYnJhaWxsZScsICdoYW5kaGVsZCcsICdwcmludCcsICdwcm9qZWN0aW9uJywgJ3NjcmVlbicsICd0dHknLFxuICAgICd0dicsICdzcGVlY2gnLFxuICAgICczZC1nbGFzc2VzJywgJ3Jlc29sdXRpb24gWz5dWzxdWz1dIFtYXScsICdkZXZpY2UtYXNwZWN0LXJhdGlvOiBYL1knLCAnb3JpZW50YXRpb246cG9ydHJhaXQnLFxuICAgICdvcmllbnRhdGlvbjpsYW5kc2NhcGUnLCAnZGV2aWNlLWhlaWdodDogW1hdJywgJ2RldmljZS13aWR0aDogW1hdJ107XG4gIGNvbnN0IHMgPSB7XG4gICAgYXR0cnM6IHt9LFxuICB9OyAvLyBTaW1wbGUgdGFnLCByZXVzZWQgZm9yIGEgd2hvbGUgbG90IG9mIHRhZ3NcblxuICBjb25zdCBkYXRhID0ge1xuICAgIGE6IHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIGhyZWY6IG51bGwsXG4gICAgICAgIHBpbmc6IG51bGwsXG4gICAgICAgIHR5cGU6IG51bGwsXG4gICAgICAgIG1lZGlhLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldHMsXG4gICAgICAgIGhyZWZsYW5nOiBsYW5ncyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBhYmJyOiBzLFxuICAgIGFjcm9ueW06IHMsXG4gICAgYWRkcmVzczogcyxcbiAgICBhcHBsZXQ6IHMsXG4gICAgYXJlYToge1xuICAgICAgYXR0cnM6IHtcbiAgICAgICAgYWx0OiBudWxsLFxuICAgICAgICBjb29yZHM6IG51bGwsXG4gICAgICAgIGhyZWY6IG51bGwsXG4gICAgICAgIHRhcmdldDogbnVsbCxcbiAgICAgICAgcGluZzogbnVsbCxcbiAgICAgICAgbWVkaWEsXG4gICAgICAgIGhyZWZsYW5nOiBsYW5ncyxcbiAgICAgICAgdHlwZTogbnVsbCxcbiAgICAgICAgc2hhcGU6IFsnZGVmYXVsdCcsICdyZWN0JywgJ2NpcmNsZScsICdwb2x5J10sXG4gICAgICB9LFxuICAgIH0sXG4gICAgYXJ0aWNsZTogcyxcbiAgICBhc2lkZTogcyxcbiAgICBhdWRpbzoge1xuICAgICAgYXR0cnM6IHtcbiAgICAgICAgc3JjOiBudWxsLFxuICAgICAgICBtZWRpYWdyb3VwOiBudWxsLFxuICAgICAgICBjcm9zc29yaWdpbjogWydhbm9ueW1vdXMnLCAndXNlLWNyZWRlbnRpYWxzJ10sXG4gICAgICAgIHByZWxvYWQ6IFsnbm9uZScsICdtZXRhZGF0YScsICdhdXRvJ10sXG4gICAgICAgIGF1dG9wbGF5OiBbJycsICdhdXRvcGxheSddLFxuICAgICAgICBsb29wOiBbJycsICdsb29wJ10sXG4gICAgICAgIGNvbnRyb2xzOiBbJycsICdjb250cm9scyddLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGI6IHMsXG4gICAgYmFzZToge1xuICAgICAgYXR0cnM6IHtcbiAgICAgICAgaHJlZjogbnVsbCxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXRzLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGJhc2Vmb250OiBzLFxuICAgIGJkaTogcyxcbiAgICBiZG86IHMsXG4gICAgYmlnOiBzLFxuICAgIGJsb2NrcXVvdGU6IHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIGNpdGU6IG51bGwsXG4gICAgICB9LFxuICAgIH0sXG4gICAgYm9keTogcyxcbiAgICBicjogcyxcbiAgICBidXR0b246IHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIGZvcm06IG51bGwsXG4gICAgICAgIGZvcm1hY3Rpb246IG51bGwsXG4gICAgICAgIG5hbWU6IG51bGwsXG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBhdXRvZm9jdXM6IFsnJywgJ2F1dG9mb2N1cyddLFxuICAgICAgICBkaXNhYmxlZDogWycnLCAnYXV0b2ZvY3VzJ10sXG4gICAgICAgIGZvcm1lbmN0eXBlOiBlbmNzLFxuICAgICAgICBmb3JtbWV0aG9kOiBtZXRob2RzLFxuICAgICAgICBmb3Jtbm92YWxpZGF0ZTogWycnLCAnbm92YWxpZGF0ZSddLFxuICAgICAgICBmb3JtdGFyZ2V0OiB0YXJnZXRzLFxuICAgICAgICB0eXBlOiBbJ3N1Ym1pdCcsICdyZXNldCcsICdidXR0b24nXSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBjYW52YXM6IHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIHdpZHRoOiBudWxsLFxuICAgICAgICBoZWlnaHQ6IG51bGwsXG4gICAgICB9LFxuICAgIH0sXG4gICAgY2FwdGlvbjogcyxcbiAgICBjZW50ZXI6IHMsXG4gICAgY2l0ZTogcyxcbiAgICBjb2RlOiBzLFxuICAgIGNvbDoge1xuICAgICAgYXR0cnM6IHtcbiAgICAgICAgc3BhbjogbnVsbCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBjb2xncm91cDoge1xuICAgICAgYXR0cnM6IHtcbiAgICAgICAgc3BhbjogbnVsbCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBjb21tYW5kOiB7XG4gICAgICBhdHRyczoge1xuICAgICAgICB0eXBlOiBbJ2NvbW1hbmQnLCAnY2hlY2tib3gnLCAncmFkaW8nXSxcbiAgICAgICAgbGFiZWw6IG51bGwsXG4gICAgICAgIGljb246IG51bGwsXG4gICAgICAgIHJhZGlvZ3JvdXA6IG51bGwsXG4gICAgICAgIGNvbW1hbmQ6IG51bGwsXG4gICAgICAgIHRpdGxlOiBudWxsLFxuICAgICAgICBkaXNhYmxlZDogWycnLCAnZGlzYWJsZWQnXSxcbiAgICAgICAgY2hlY2tlZDogWycnLCAnY2hlY2tlZCddLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGRhdGE6IHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGRhdGFncmlkOiB7XG4gICAgICBhdHRyczoge1xuICAgICAgICBkaXNhYmxlZDogWycnLCAnZGlzYWJsZWQnXSxcbiAgICAgICAgbXVsdGlwbGU6IFsnJywgJ211bHRpcGxlJ10sXG4gICAgICB9LFxuICAgIH0sXG4gICAgZGF0YWxpc3Q6IHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICB9LFxuICAgIH0sXG4gICAgZGQ6IHMsXG4gICAgZGVsOiB7XG4gICAgICBhdHRyczoge1xuICAgICAgICBjaXRlOiBudWxsLFxuICAgICAgICBkYXRldGltZTogbnVsbCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBkZXRhaWxzOiB7XG4gICAgICBhdHRyczoge1xuICAgICAgICBvcGVuOiBbJycsICdvcGVuJ10sXG4gICAgICB9LFxuICAgIH0sXG4gICAgZGZuOiBzLFxuICAgIGRpcjogcyxcbiAgICBkaXY6IHMsXG4gICAgZGw6IHMsXG4gICAgZHQ6IHMsXG4gICAgZW06IHMsXG4gICAgZW1iZWQ6IHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIHNyYzogbnVsbCxcbiAgICAgICAgdHlwZTogbnVsbCxcbiAgICAgICAgd2lkdGg6IG51bGwsXG4gICAgICAgIGhlaWdodDogbnVsbCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBldmVudHNvdXJjZToge1xuICAgICAgYXR0cnM6IHtcbiAgICAgICAgc3JjOiBudWxsLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGZpZWxkc2V0OiB7XG4gICAgICBhdHRyczoge1xuICAgICAgICBkaXNhYmxlZDogWycnLCAnZGlzYWJsZWQnXSxcbiAgICAgICAgZm9ybTogbnVsbCxcbiAgICAgICAgbmFtZTogbnVsbCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBmaWdjYXB0aW9uOiBzLFxuICAgIGZpZ3VyZTogcyxcbiAgICBmb250OiBzLFxuICAgIGZvb3RlcjogcyxcbiAgICBmb3JtOiB7XG4gICAgICBhdHRyczoge1xuICAgICAgICBhY3Rpb246IG51bGwsXG4gICAgICAgIG5hbWU6IG51bGwsXG4gICAgICAgICdhY2NlcHQtY2hhcnNldCc6IGNoYXJzZXRzLFxuICAgICAgICBhdXRvY29tcGxldGU6IFsnb24nLCAnb2ZmJ10sXG4gICAgICAgIGVuY3R5cGU6IGVuY3MsXG4gICAgICAgIG1ldGhvZDogbWV0aG9kcyxcbiAgICAgICAgbm92YWxpZGF0ZTogWycnLCAnbm92YWxpZGF0ZSddLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldHMsXG4gICAgICB9LFxuICAgIH0sXG4gICAgZnJhbWU6IHMsXG4gICAgZnJhbWVzZXQ6IHMsXG4gICAgaDE6IHMsXG4gICAgaDI6IHMsXG4gICAgaDM6IHMsXG4gICAgaDQ6IHMsXG4gICAgaDU6IHMsXG4gICAgaDY6IHMsXG4gICAgaGVhZDoge1xuICAgICAgYXR0cnM6IHt9LFxuICAgICAgY2hpbGRyZW46IFsndGl0bGUnLCAnYmFzZScsICdsaW5rJywgJ3N0eWxlJywgJ21ldGEnLCAnc2NyaXB0JywgJ25vc2NyaXB0JywgJ2NvbW1hbmQnXSxcbiAgICB9LFxuICAgIGhlYWRlcjogcyxcbiAgICBoZ3JvdXA6IHMsXG4gICAgaHI6IHMsXG4gICAgaHRtbDoge1xuICAgICAgYXR0cnM6IHtcbiAgICAgICAgbWFuaWZlc3Q6IG51bGwsXG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IFsnaGVhZCcsICdib2R5J10sXG4gICAgfSxcbiAgICBpOiBzLFxuICAgIGlmcmFtZToge1xuICAgICAgYXR0cnM6IHtcbiAgICAgICAgc3JjOiBudWxsLFxuICAgICAgICBzcmNkb2M6IG51bGwsXG4gICAgICAgIG5hbWU6IG51bGwsXG4gICAgICAgIHdpZHRoOiBudWxsLFxuICAgICAgICBoZWlnaHQ6IG51bGwsXG4gICAgICAgIHNhbmRib3g6IFsnYWxsb3ctdG9wLW5hdmlnYXRpb24nLCAnYWxsb3ctc2FtZS1vcmlnaW4nLCAnYWxsb3ctZm9ybXMnLCAnYWxsb3ctc2NyaXB0cyddLFxuICAgICAgICBzZWFtbGVzczogWycnLCAnc2VhbWxlc3MnXSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBpbWc6IHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIGFsdDogbnVsbCxcbiAgICAgICAgc3JjOiBudWxsLFxuICAgICAgICBpc21hcDogbnVsbCxcbiAgICAgICAgdXNlbWFwOiBudWxsLFxuICAgICAgICB3aWR0aDogbnVsbCxcbiAgICAgICAgaGVpZ2h0OiBudWxsLFxuICAgICAgICBjcm9zc29yaWdpbjogWydhbm9ueW1vdXMnLCAndXNlLWNyZWRlbnRpYWxzJ10sXG4gICAgICB9LFxuICAgIH0sXG4gICAgaW5wdXQ6IHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIGFsdDogbnVsbCxcbiAgICAgICAgZGlybmFtZTogbnVsbCxcbiAgICAgICAgZm9ybTogbnVsbCxcbiAgICAgICAgZm9ybWFjdGlvbjogbnVsbCxcbiAgICAgICAgaGVpZ2h0OiBudWxsLFxuICAgICAgICBsaXN0OiBudWxsLFxuICAgICAgICBtYXg6IG51bGwsXG4gICAgICAgIG1heGxlbmd0aDogbnVsbCxcbiAgICAgICAgbWluOiBudWxsLFxuICAgICAgICBuYW1lOiBudWxsLFxuICAgICAgICBwYXR0ZXJuOiBudWxsLFxuICAgICAgICBwbGFjZWhvbGRlcjogbnVsbCxcbiAgICAgICAgc2l6ZTogbnVsbCxcbiAgICAgICAgc3JjOiBudWxsLFxuICAgICAgICBzdGVwOiBudWxsLFxuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgd2lkdGg6IG51bGwsXG4gICAgICAgIGFjY2VwdDogWydhdWRpby8qJywgJ3ZpZGVvLyonLCAnaW1hZ2UvKiddLFxuICAgICAgICBhdXRvY29tcGxldGU6IFsnb24nLCAnb2ZmJ10sXG4gICAgICAgIGF1dG9mb2N1czogWycnLCAnYXV0b2ZvY3VzJ10sXG4gICAgICAgIGNoZWNrZWQ6IFsnJywgJ2NoZWNrZWQnXSxcbiAgICAgICAgZGlzYWJsZWQ6IFsnJywgJ2Rpc2FibGVkJ10sXG4gICAgICAgIGZvcm1lbmN0eXBlOiBlbmNzLFxuICAgICAgICBmb3JtbWV0aG9kOiBtZXRob2RzLFxuICAgICAgICBmb3Jtbm92YWxpZGF0ZTogWycnLCAnbm92YWxpZGF0ZSddLFxuICAgICAgICBmb3JtdGFyZ2V0OiB0YXJnZXRzLFxuICAgICAgICBtdWx0aXBsZTogWycnLCAnbXVsdGlwbGUnXSxcbiAgICAgICAgcmVhZG9ubHk6IFsnJywgJ3JlYWRvbmx5J10sXG4gICAgICAgIHJlcXVpcmVkOiBbJycsICdyZXF1aXJlZCddLFxuICAgICAgICB0eXBlOiBbJ2hpZGRlbicsICd0ZXh0JywgJ3NlYXJjaCcsICd0ZWwnLCAndXJsJywgJ2VtYWlsJywgJ3Bhc3N3b3JkJywgJ2RhdGV0aW1lJywgJ2RhdGUnLCAnbW9udGgnLFxuICAgICAgICAgICd3ZWVrJywgJ3RpbWUnLCAnZGF0ZXRpbWUtbG9jYWwnLCAnbnVtYmVyJywgJ3JhbmdlJywgJ2NvbG9yJywgJ2NoZWNrYm94JywgJ3JhZGlvJyxcbiAgICAgICAgICAnZmlsZScsICdzdWJtaXQnLCAnaW1hZ2UnLCAncmVzZXQnLCAnYnV0dG9uJ10sXG4gICAgICB9LFxuICAgIH0sXG4gICAgaW5zOiB7XG4gICAgICBhdHRyczoge1xuICAgICAgICBjaXRlOiBudWxsLFxuICAgICAgICBkYXRldGltZTogbnVsbCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBrYmQ6IHMsXG4gICAga2V5Z2VuOiB7XG4gICAgICBhdHRyczoge1xuICAgICAgICBjaGFsbGVuZ2U6IG51bGwsXG4gICAgICAgIGZvcm06IG51bGwsXG4gICAgICAgIG5hbWU6IG51bGwsXG4gICAgICAgIGF1dG9mb2N1czogWycnLCAnYXV0b2ZvY3VzJ10sXG4gICAgICAgIGRpc2FibGVkOiBbJycsICdkaXNhYmxlZCddLFxuICAgICAgICBrZXl0eXBlOiBbJ1JTQSddLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGxhYmVsOiB7XG4gICAgICBhdHRyczoge1xuICAgICAgICBmb3I6IG51bGwsXG4gICAgICAgIGZvcm06IG51bGwsXG4gICAgICB9LFxuICAgIH0sXG4gICAgbGVnZW5kOiBzLFxuICAgIGxpOiB7XG4gICAgICBhdHRyczoge1xuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBsaW5rOiB7XG4gICAgICBhdHRyczoge1xuICAgICAgICBocmVmOiBudWxsLFxuICAgICAgICB0eXBlOiBudWxsLFxuICAgICAgICBocmVmbGFuZzogbGFuZ3MsXG4gICAgICAgIG1lZGlhLFxuICAgICAgICBzaXplczogWydhbGwnLCAnMTZ4MTYnLCAnMTZ4MTYgMzJ4MzInLCAnMTZ4MTYgMzJ4MzIgNjR4NjQnXSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBtYXA6IHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIG5hbWU6IG51bGwsXG4gICAgICB9LFxuICAgIH0sXG4gICAgbWFyazogcyxcbiAgICBtZW51OiB7XG4gICAgICBhdHRyczoge1xuICAgICAgICBsYWJlbDogbnVsbCxcbiAgICAgICAgdHlwZTogWydsaXN0JywgJ2NvbnRleHQnLCAndG9vbGJhciddLFxuICAgICAgfSxcbiAgICB9LFxuICAgIG1ldGE6IHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIGNvbnRlbnQ6IG51bGwsXG4gICAgICAgIGNoYXJzZXQ6IGNoYXJzZXRzLFxuICAgICAgICBuYW1lOiBbJ3ZpZXdwb3J0JywgJ2FwcGxpY2F0aW9uLW5hbWUnLCAnYXV0aG9yJywgJ2Rlc2NyaXB0aW9uJywgJ2dlbmVyYXRvcicsICdrZXl3b3JkcyddLFxuICAgICAgICAnaHR0cC1lcXVpdic6IFsnY29udGVudC1sYW5ndWFnZScsICdjb250ZW50LXR5cGUnLCAnZGVmYXVsdC1zdHlsZScsICdyZWZyZXNoJ10sXG4gICAgICB9LFxuICAgIH0sXG4gICAgbWV0ZXI6IHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBtaW46IG51bGwsXG4gICAgICAgIGxvdzogbnVsbCxcbiAgICAgICAgaGlnaDogbnVsbCxcbiAgICAgICAgbWF4OiBudWxsLFxuICAgICAgICBvcHRpbXVtOiBudWxsLFxuICAgICAgfSxcbiAgICB9LFxuICAgIG5hdjogcyxcbiAgICBub2ZyYW1lczogcyxcbiAgICBub3NjcmlwdDogcyxcbiAgICBvYmplY3Q6IHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIHR5cGU6IG51bGwsXG4gICAgICAgIG5hbWU6IG51bGwsXG4gICAgICAgIHVzZW1hcDogbnVsbCxcbiAgICAgICAgZm9ybTogbnVsbCxcbiAgICAgICAgd2lkdGg6IG51bGwsXG4gICAgICAgIGhlaWdodDogbnVsbCxcbiAgICAgICAgdHlwZW11c3RtYXRjaDogWycnLCAndHlwZW11c3RtYXRjaCddLFxuICAgICAgfSxcbiAgICB9LFxuICAgIG9sOiB7XG4gICAgICBhdHRyczoge1xuICAgICAgICByZXZlcnNlZDogWycnLCAncmV2ZXJzZWQnXSxcbiAgICAgICAgc3RhcnQ6IG51bGwsXG4gICAgICAgIHR5cGU6IFsnMScsICdhJywgJ0EnLCAnaScsICdJJ10sXG4gICAgICB9LFxuICAgIH0sXG4gICAgb3B0Z3JvdXA6IHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIGRpc2FibGVkOiBbJycsICdkaXNhYmxlZCddLFxuICAgICAgICBsYWJlbDogbnVsbCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBvcHRpb246IHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIGRpc2FibGVkOiBbJycsICdkaXNhYmxlZCddLFxuICAgICAgICBsYWJlbDogbnVsbCxcbiAgICAgICAgc2VsZWN0ZWQ6IFsnJywgJ3NlbGVjdGVkJ10sXG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgfSxcbiAgICB9LFxuICAgIG91dHB1dDoge1xuICAgICAgYXR0cnM6IHtcbiAgICAgICAgZm9yOiBudWxsLFxuICAgICAgICBmb3JtOiBudWxsLFxuICAgICAgICBuYW1lOiBudWxsLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHA6IHMsXG4gICAgcGFyYW06IHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIG5hbWU6IG51bGwsXG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHByZTogcyxcbiAgICBwcm9ncmVzczoge1xuICAgICAgYXR0cnM6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIG1heDogbnVsbCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBxOiB7XG4gICAgICBhdHRyczoge1xuICAgICAgICBjaXRlOiBudWxsLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHJwOiBzLFxuICAgIHJ0OiBzLFxuICAgIHJ1Ynk6IHMsXG4gICAgcyxcbiAgICBzYW1wOiBzLFxuICAgIHNjcmlwdDoge1xuICAgICAgYXR0cnM6IHtcbiAgICAgICAgdHlwZTogWyd0ZXh0L2phdmFzY3JpcHQnXSxcbiAgICAgICAgc3JjOiBudWxsLFxuICAgICAgICBhc3luYzogWycnLCAnYXN5bmMnXSxcbiAgICAgICAgZGVmZXI6IFsnJywgJ2RlZmVyJ10sXG4gICAgICAgIGNoYXJzZXQ6IGNoYXJzZXRzLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHNlY3Rpb246IHMsXG4gICAgc2VsZWN0OiB7XG4gICAgICBhdHRyczoge1xuICAgICAgICBmb3JtOiBudWxsLFxuICAgICAgICBuYW1lOiBudWxsLFxuICAgICAgICBzaXplOiBudWxsLFxuICAgICAgICBhdXRvZm9jdXM6IFsnJywgJ2F1dG9mb2N1cyddLFxuICAgICAgICBkaXNhYmxlZDogWycnLCAnZGlzYWJsZWQnXSxcbiAgICAgICAgbXVsdGlwbGU6IFsnJywgJ211bHRpcGxlJ10sXG4gICAgICB9LFxuICAgIH0sXG4gICAgc21hbGw6IHMsXG4gICAgc291cmNlOiB7XG4gICAgICBhdHRyczoge1xuICAgICAgICBzcmM6IG51bGwsXG4gICAgICAgIHR5cGU6IG51bGwsXG4gICAgICAgIG1lZGlhOiBudWxsLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHNwYW46IHMsXG4gICAgc3RyaWtlOiBzLFxuICAgIHN0cm9uZzogcyxcbiAgICBzdHlsZToge1xuICAgICAgYXR0cnM6IHtcbiAgICAgICAgdHlwZTogWyd0ZXh0L2NzcyddLFxuICAgICAgICBtZWRpYSxcbiAgICAgICAgc2NvcGVkOiBudWxsLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHN1YjogcyxcbiAgICBzdW1tYXJ5OiBzLFxuICAgIHN1cDogcyxcbiAgICB0YWJsZTogcyxcbiAgICB0Ym9keTogcyxcbiAgICB0ZDoge1xuICAgICAgYXR0cnM6IHtcbiAgICAgICAgY29sc3BhbjogbnVsbCxcbiAgICAgICAgcm93c3BhbjogbnVsbCxcbiAgICAgICAgaGVhZGVyczogbnVsbCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB0ZXh0YXJlYToge1xuICAgICAgYXR0cnM6IHtcbiAgICAgICAgZGlybmFtZTogbnVsbCxcbiAgICAgICAgZm9ybTogbnVsbCxcbiAgICAgICAgbWF4bGVuZ3RoOiBudWxsLFxuICAgICAgICBuYW1lOiBudWxsLFxuICAgICAgICBwbGFjZWhvbGRlcjogbnVsbCxcbiAgICAgICAgcm93czogbnVsbCxcbiAgICAgICAgY29sczogbnVsbCxcbiAgICAgICAgYXV0b2ZvY3VzOiBbJycsICdhdXRvZm9jdXMnXSxcbiAgICAgICAgZGlzYWJsZWQ6IFsnJywgJ2Rpc2FibGVkJ10sXG4gICAgICAgIHJlYWRvbmx5OiBbJycsICdyZWFkb25seSddLFxuICAgICAgICByZXF1aXJlZDogWycnLCAncmVxdWlyZWQnXSxcbiAgICAgICAgd3JhcDogWydzb2Z0JywgJ2hhcmQnXSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB0Zm9vdDogcyxcbiAgICB0aDoge1xuICAgICAgYXR0cnM6IHtcbiAgICAgICAgY29sc3BhbjogbnVsbCxcbiAgICAgICAgcm93c3BhbjogbnVsbCxcbiAgICAgICAgaGVhZGVyczogbnVsbCxcbiAgICAgICAgc2NvcGU6IFsncm93JywgJ2NvbCcsICdyb3dncm91cCcsICdjb2xncm91cCddLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHRoZWFkOiBzLFxuICAgIHRpbWU6IHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIGRhdGV0aW1lOiBudWxsLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHRpdGxlOiBzLFxuICAgIHRyOiBzLFxuICAgIHRyYWNrOiB7XG4gICAgICBhdHRyczoge1xuICAgICAgICBzcmM6IG51bGwsXG4gICAgICAgIGxhYmVsOiBudWxsLFxuICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICBraW5kOiBbJ3N1YnRpdGxlcycsICdjYXB0aW9ucycsICdkZXNjcmlwdGlvbnMnLCAnY2hhcHRlcnMnLCAnbWV0YWRhdGEnXSxcbiAgICAgICAgc3JjbGFuZzogbGFuZ3MsXG4gICAgICB9LFxuICAgIH0sXG4gICAgdHQ6IHMsXG4gICAgdTogcyxcbiAgICB1bDogcyxcbiAgICB2YXI6IHMsXG4gICAgdmlkZW86IHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIHNyYzogbnVsbCxcbiAgICAgICAgcG9zdGVyOiBudWxsLFxuICAgICAgICB3aWR0aDogbnVsbCxcbiAgICAgICAgaGVpZ2h0OiBudWxsLFxuICAgICAgICBjcm9zc29yaWdpbjogWydhbm9ueW1vdXMnLCAndXNlLWNyZWRlbnRpYWxzJ10sXG4gICAgICAgIHByZWxvYWQ6IFsnYXV0bycsICdtZXRhZGF0YScsICdub25lJ10sXG4gICAgICAgIGF1dG9wbGF5OiBbJycsICdhdXRvcGxheSddLFxuICAgICAgICBtZWRpYWdyb3VwOiBbJ21vdmllJ10sXG4gICAgICAgIG11dGVkOiBbJycsICdtdXRlZCddLFxuICAgICAgICBjb250cm9sczogWycnLCAnY29udHJvbHMnXSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB3YnI6IHMsXG4gIH07XG5cbiAgY29uc3QgZ2xvYmFsQXR0cnMgPSB7XG4gICAgYWNjZXNza2V5OiBbJ2EnLCAnYicsICdjJywgJ2QnLCAnZScsICdmJywgJ2cnLCAnaCcsICdpJywgJ2onLCAnaycsICdsJywgJ20nLCAnbicsICdvJywgJ3AnLCAncScsICdyJywgJ3MnLCAndCcsXG4gICAgICAndScsICd2JywgJ3cnLCAneCcsICd5JywgJ3onLCAnMCcsICcxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOSddLFxuICAgIGNsYXNzOiBudWxsLFxuICAgIGNvbnRlbnRlZGl0YWJsZTogWyd0cnVlJywgJ2ZhbHNlJ10sXG4gICAgY29udGV4dG1lbnU6IG51bGwsXG4gICAgZGlyOiBbJ2x0cicsICdydGwnLCAnYXV0byddLFxuICAgIGRyYWdnYWJsZTogWyd0cnVlJywgJ2ZhbHNlJywgJ2F1dG8nXSxcbiAgICBkcm9wem9uZTogWydjb3B5JywgJ21vdmUnLCAnbGluaycsICdzdHJpbmc6JywgJ2ZpbGU6J10sXG4gICAgaGlkZGVuOiBbJ2hpZGRlbiddLFxuICAgIGlkOiBudWxsLFxuICAgIGluZXJ0OiBbJ2luZXJ0J10sXG4gICAgaXRlbWlkOiBudWxsLFxuICAgIGl0ZW1wcm9wOiBudWxsLFxuICAgIGl0ZW1yZWY6IG51bGwsXG4gICAgaXRlbXNjb3BlOiBbJ2l0ZW1zY29wZSddLFxuICAgIGl0ZW10eXBlOiBudWxsLFxuICAgIGxhbmc6IFsnZW4nLCAnZXMnXSxcbiAgICBzcGVsbGNoZWNrOiBbJ3RydWUnLCAnZmFsc2UnXSxcbiAgICBhdXRvY29ycmVjdDogWyd0cnVlJywgJ2ZhbHNlJ10sXG4gICAgYXV0b2NhcGl0YWxpemU6IFsndHJ1ZScsICdmYWxzZSddLFxuICAgIHN0eWxlOiBudWxsLFxuICAgIHRhYmluZGV4OiBbJzEnLCAnMicsICczJywgJzQnLCAnNScsICc2JywgJzcnLCAnOCcsICc5J10sXG4gICAgdGl0bGU6IG51bGwsXG4gICAgdHJhbnNsYXRlOiBbJ3llcycsICdubyddLFxuICAgIG9uY2xpY2s6IG51bGwsXG4gICAgcmVsOiBbJ3N0eWxlc2hlZXQnLCAnYWx0ZXJuYXRlJywgJ2F1dGhvcicsICdib29rbWFyaycsICdoZWxwJywgJ2xpY2Vuc2UnLCAnbmV4dCcsICdub2ZvbGxvdycsICdub3JlZmVycmVyJyxcbiAgICAgICdwcmVmZXRjaCcsICdwcmV2JywgJ3NlYXJjaCcsICd0YWcnXSxcbiAgfTtcblxuICBmdW5jdGlvbiBwb3B1bGF0ZShvYmopIHtcbiAgICBmb3IgKGNvbnN0IGF0dHIgaW4gZ2xvYmFsQXR0cnMpIHtcbiAgICAgIGlmIChnbG9iYWxBdHRycy5oYXNPd25Qcm9wZXJ0eShhdHRyKSkgeyBvYmouYXR0cnNbYXR0cl0gPSBnbG9iYWxBdHRyc1thdHRyXTsgfVxuICAgIH1cbiAgfVxuXG4gIHBvcHVsYXRlKHMpO1xuICBmb3IgKGNvbnN0IHRhZyBpbiBkYXRhKSB7XG4gICAgaWYgKGRhdGEuaGFzT3duUHJvcGVydHkodGFnKSAmJiBkYXRhW3RhZ10gIT0gcykgeyBwb3B1bGF0ZShkYXRhW3RhZ10pOyB9XG4gIH1cblxuICBDb2RlTWlycm9yLmh0bWxTY2hlbWEgPSBkYXRhO1xuXG4gIGZ1bmN0aW9uIGh0bWxIaW50KGNtLCBvcHRpb25zKSB7XG4gICAgY29uc3QgbG9jYWwgPSB7XG4gICAgICBzY2hlbWFJbmZvOiBkYXRhLFxuICAgIH07XG4gICAgaWYgKG9wdGlvbnMpIHsgZm9yIChjb25zdCBvcHQgaW4gb3B0aW9ucykgbG9jYWxbb3B0XSA9IG9wdGlvbnNbb3B0XTsgfVxuICAgIHJldHVybiBDb2RlTWlycm9yLmhpbnQueG1sKGNtLCBsb2NhbCk7XG4gIH1cbiAgQ29kZU1pcnJvci5yZWdpc3RlckhlbHBlcignaGludCcsICdodG1sJywgaHRtbEhpbnQpO1xuXG4gIENvZGVNaXJyb3IuaHRtbEhpbnQgPSBodG1sSGludDtcbn1cbiIsICIvLyBDb2RlTWlycm9yLCBjb3B5cmlnaHQgKGMpIGJ5IE1hcmlqbiBIYXZlcmJla2UgYW5kIG90aGVyc1xuLy8gRGlzdHJpYnV0ZWQgdW5kZXIgYW4gTUlUIGxpY2Vuc2U6IGh0dHBzOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkSlNoaW50KENvZGVNaXJyb3IpIHtcblxuICBjb25zdCBQb3MgPSBDb2RlTWlycm9yLlBvcztcblxuICBmdW5jdGlvbiBmb3JFYWNoKGFyciwgZikge1xuICAgIGZvciAobGV0IGkgPSAwLCBlID0gYXJyLmxlbmd0aDsgaSA8IGU7ICsraSkgZihhcnJbaV0pO1xuICB9XG5cbiAgZnVuY3Rpb24gYXJyYXlDb250YWlucyhhcnIsIGl0ZW0pIHtcbiAgICBpZiAoIUFycmF5LnByb3RvdHlwZS5pbmRleE9mKSB7XG4gICAgICBsZXQgaSA9IGFyci5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGlmIChhcnJbaV0gPT09IGl0ZW0pIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gYXJyLmluZGV4T2YoaXRlbSkgIT0gLTE7XG4gIH1cblxuICBmdW5jdGlvbiBzY3JpcHRIaW50KGVkaXRvciwga2V5d29yZHMsIGdldFRva2VuLCBvcHRpb25zKSB7XG4gICAgLy8gRmluZCB0aGUgdG9rZW4gYXQgdGhlIGN1cnNvclxuICAgIGNvbnN0IGN1ciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICBsZXQgdG9rZW4gPSBnZXRUb2tlbihlZGl0b3IsIGN1cik7XG4gICAgaWYgKC9cXGIoPzpzdHJpbmd8Y29tbWVudClcXGIvLnRlc3QodG9rZW4udHlwZSkpIHJldHVybjtcbiAgICBjb25zdCBpbm5lck1vZGUgPSBDb2RlTWlycm9yLmlubmVyTW9kZShlZGl0b3IuZ2V0TW9kZSgpLCB0b2tlbi5zdGF0ZSk7XG4gICAgaWYgKGlubmVyTW9kZS5tb2RlLmhlbHBlclR5cGUgPT09ICdqc29uJykgcmV0dXJuO1xuICAgIHRva2VuLnN0YXRlID0gaW5uZXJNb2RlLnN0YXRlO1xuXG4gICAgLy8gSWYgaXQncyBub3QgYSAnd29yZC1zdHlsZScgdG9rZW4sIGlnbm9yZSB0aGUgdG9rZW4uXG4gICAgaWYgKCEvXltcXHckX10qJC8udGVzdCh0b2tlbi5zdHJpbmcpKSB7XG4gICAgICB0b2tlbiA9IHtcbiAgICAgICAgc3RhcnQ6IGN1ci5jaCxcbiAgICAgICAgZW5kOiBjdXIuY2gsXG4gICAgICAgIHN0cmluZzogJycsXG4gICAgICAgIHN0YXRlOiB0b2tlbi5zdGF0ZSxcbiAgICAgICAgdHlwZTogdG9rZW4uc3RyaW5nID09ICcuJyA/ICdwcm9wZXJ0eScgOiBudWxsLFxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHRva2VuLmVuZCA+IGN1ci5jaCkge1xuICAgICAgdG9rZW4uZW5kID0gY3VyLmNoO1xuICAgICAgdG9rZW4uc3RyaW5nID0gdG9rZW4uc3RyaW5nLnNsaWNlKDAsIGN1ci5jaCAtIHRva2VuLnN0YXJ0KTtcbiAgICB9XG5cbiAgICBsZXQgdHByb3AgPSB0b2tlbjtcbiAgICAvLyBJZiBpdCBpcyBhIHByb3BlcnR5LCBmaW5kIG91dCB3aGF0IGl0IGlzIGEgcHJvcGVydHkgb2YuXG4gICAgd2hpbGUgKHRwcm9wLnR5cGUgPT0gJ3Byb3BlcnR5Jykge1xuICAgICAgdHByb3AgPSBnZXRUb2tlbihlZGl0b3IsIFBvcyhjdXIubGluZSwgdHByb3Auc3RhcnQpKTtcbiAgICAgIGlmICh0cHJvcC5zdHJpbmcgIT0gJy4nKSByZXR1cm47XG4gICAgICB0cHJvcCA9IGdldFRva2VuKGVkaXRvciwgUG9zKGN1ci5saW5lLCB0cHJvcC5zdGFydCkpO1xuICAgICAgaWYgKCFjb250ZXh0KSB2YXIgY29udGV4dCA9IFtdO1xuICAgICAgY29udGV4dC5wdXNoKHRwcm9wKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGxpc3Q6IGdldENvbXBsZXRpb25zKHRva2VuLCBjb250ZXh0LCBrZXl3b3Jkcywgb3B0aW9ucyksXG4gICAgICBmcm9tOiBQb3MoY3VyLmxpbmUsIHRva2VuLnN0YXJ0KSxcbiAgICAgIHRvOiBQb3MoY3VyLmxpbmUsIHRva2VuLmVuZCksXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGphdmFzY3JpcHRIaW50KGVkaXRvciwgb3B0aW9ucykge1xuICAgIHJldHVybiBzY3JpcHRIaW50KGVkaXRvciwgamF2YXNjcmlwdEtleXdvcmRzLFxuICAgICAgKGUsIGN1cikgPT4ge1xuICAgICAgICByZXR1cm4gZS5nZXRUb2tlbkF0KGN1cik7XG4gICAgICB9LFxuICAgICAgb3B0aW9ucyk7XG4gIH1cbiAgQ29kZU1pcnJvci5yZWdpc3RlckhlbHBlcignaGludCcsICdqYXZhc2NyaXB0JywgamF2YXNjcmlwdEhpbnQpO1xuXG4gIGZ1bmN0aW9uIGdldENvZmZlZVNjcmlwdFRva2VuKGVkaXRvciwgY3VyKSB7XG4gICAgLy8gVGhpcyBnZXRUb2tlbiwgaXQgaXMgZm9yIGNvZmZlZXNjcmlwdCwgaW1pdGF0ZXMgdGhlIGJlaGF2aW9yIG9mXG4gICAgLy8gZ2V0VG9rZW5BdCBtZXRob2QgaW4gamF2YXNjcmlwdC5qcywgdGhhdCBpcywgcmV0dXJuaW5nIFwicHJvcGVydHlcIlxuICAgIC8vIHR5cGUgYW5kIHRyZWF0IFwiLlwiIGFzIGluZGVwZW5lbnQgdG9rZW4uXG4gICAgY29uc3QgdG9rZW4gPSBlZGl0b3IuZ2V0VG9rZW5BdChjdXIpO1xuICAgIGlmIChjdXIuY2ggPT0gdG9rZW4uc3RhcnQgKyAxICYmIHRva2VuLnN0cmluZy5jaGFyQXQoMCkgPT0gJy4nKSB7XG4gICAgICB0b2tlbi5lbmQgPSB0b2tlbi5zdGFydDtcbiAgICAgIHRva2VuLnN0cmluZyA9ICcuJztcbiAgICAgIHRva2VuLnR5cGUgPSAncHJvcGVydHknO1xuICAgIH0gZWxzZSBpZiAoL15cXC5bXFx3JF9dKiQvLnRlc3QodG9rZW4uc3RyaW5nKSkge1xuICAgICAgdG9rZW4udHlwZSA9ICdwcm9wZXJ0eSc7XG4gICAgICB0b2tlbi5zdGFydCsrO1xuICAgICAgdG9rZW4uc3RyaW5nID0gdG9rZW4uc3RyaW5nLnJlcGxhY2UoL1xcLi8sICcnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRva2VuO1xuICB9XG5cbiAgZnVuY3Rpb24gY29mZmVlc2NyaXB0SGludChlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gc2NyaXB0SGludChlZGl0b3IsIGNvZmZlZXNjcmlwdEtleXdvcmRzLCBnZXRDb2ZmZWVTY3JpcHRUb2tlbiwgb3B0aW9ucyk7XG4gIH1cbiAgQ29kZU1pcnJvci5yZWdpc3RlckhlbHBlcignaGludCcsICdjb2ZmZWVzY3JpcHQnLCBjb2ZmZWVzY3JpcHRIaW50KTtcblxuICBjb25zdCBzdHJpbmdQcm9wcyA9ICgnY2hhckF0IGNoYXJDb2RlQXQgaW5kZXhPZiBsYXN0SW5kZXhPZiBzdWJzdHJpbmcgc3Vic3RyIHNsaWNlIHRyaW0gdHJpbUxlZnQgdHJpbVJpZ2h0ICdcbiAgICArICd0b1VwcGVyQ2FzZSB0b0xvd2VyQ2FzZSBzcGxpdCBjb25jYXQgbWF0Y2ggcmVwbGFjZSBzZWFyY2gnKVxuICAgIC5zcGxpdCgnICcpO1xuICBjb25zdCBhcnJheVByb3BzID0gKCdsZW5ndGggY29uY2F0IGpvaW4gc3BsaWNlIHB1c2ggcG9wIHNoaWZ0IHVuc2hpZnQgc2xpY2UgcmV2ZXJzZSBzb3J0IGluZGV4T2YgJ1xuICAgICsgJ2xhc3RJbmRleE9mIGV2ZXJ5IHNvbWUgZmlsdGVyIGZvckVhY2ggbWFwIHJlZHVjZSByZWR1Y2VSaWdodCAnKVxuICAgIC5zcGxpdCgnICcpO1xuICBjb25zdCBmdW5jUHJvcHMgPSAncHJvdG90eXBlIGFwcGx5IGNhbGwgYmluZCcuc3BsaXQoJyAnKTtcbiAgdmFyIGphdmFzY3JpcHRLZXl3b3JkcyA9IChcbiAgICAnYnJlYWsgY2FzZSBjYXRjaCBjbGFzcyBjb25zdCBjb250aW51ZSBkZWJ1Z2dlciBkZWZhdWx0IGRlbGV0ZSBkbyBlbHNlIGV4cG9ydCBleHRlbmRzIGZhbHNlIGZpbmFsbHkgZm9yIGZ1bmN0aW9uICdcbiAgICArICdpZiBpbiBpbXBvcnQgaW5zdGFuY2VvZiBuZXcgbnVsbCByZXR1cm4gc3VwZXIgc3dpdGNoIHRoaXMgdGhyb3cgdHJ1ZSB0cnkgdHlwZW9mIHZhciB2b2lkIHdoaWxlIHdpdGggeWllbGQnKVxuICAgIC5zcGxpdCgnICcpO1xuICB2YXIgY29mZmVlc2NyaXB0S2V5d29yZHMgPSAoJ2FuZCBicmVhayBjYXRjaCBjbGFzcyBjb250aW51ZSBkZWxldGUgZG8gZWxzZSBleHRlbmRzIGZhbHNlIGZpbmFsbHkgZm9yICdcbiAgICArICdpZiBpbiBpbnN0YW5jZW9mIGlzbnQgbmV3IG5vIG5vdCBudWxsIG9mIG9mZiBvbiBvciByZXR1cm4gc3dpdGNoIHRoZW4gdGhyb3cgdHJ1ZSB0cnkgdHlwZW9mIHVudGlsIHZvaWQgd2hpbGUgd2l0aCB5ZXMnXG4gIClcbiAgICAuc3BsaXQoJyAnKTtcblxuICBmdW5jdGlvbiBmb3JBbGxQcm9wcyhvYmosIGNhbGxiYWNrKSB7XG4gICAgaWYgKCFPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCAhT2JqZWN0LmdldFByb3RvdHlwZU9mKSB7XG4gICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gb2JqKSBjYWxsYmFjayhuYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgbyA9IG9iajsgbzsgbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKSkge1xuICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvKVxuICAgICAgICAgIC5mb3JFYWNoKGNhbGxiYWNrKTtcblxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldENvbXBsZXRpb25zKHRva2VuLCBjb250ZXh0LCBrZXl3b3Jkcywgb3B0aW9ucykge1xuICAgIGNvbnN0IGZvdW5kID0gW107XG4gICAgY29uc3Qgc3RhcnQgPSB0b2tlbi5zdHJpbmc7XG4gICAgY29uc3QgZ2xvYmFsID0gb3B0aW9ucyAmJiBvcHRpb25zLmdsb2JhbFNjb3BlIHx8IHdpbmRvdztcblxuICAgIGZ1bmN0aW9uIG1heWJlQWRkKHN0cikge1xuICAgICAgaWYgKHN0ci5sYXN0SW5kZXhPZihzdGFydCwgMCkgPT0gMCAmJiAhYXJyYXlDb250YWlucyhmb3VuZCwgc3RyKSkgZm91bmQucHVzaChzdHIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdhdGhlckNvbXBsZXRpb25zKG9iaikge1xuICAgICAgaWYgKHR5cGVvZiBvYmogPT09ICdzdHJpbmcnKSBmb3JFYWNoKHN0cmluZ1Byb3BzLCBtYXliZUFkZCk7XG4gICAgICBlbHNlIGlmIChvYmogaW5zdGFuY2VvZiBBcnJheSkgZm9yRWFjaChhcnJheVByb3BzLCBtYXliZUFkZCk7XG4gICAgICBlbHNlIGlmIChvYmogaW5zdGFuY2VvZiBGdW5jdGlvbikgZm9yRWFjaChmdW5jUHJvcHMsIG1heWJlQWRkKTtcbiAgICAgIGZvckFsbFByb3BzKG9iaiwgbWF5YmVBZGQpO1xuICAgIH1cblxuICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHQubGVuZ3RoKSB7XG4gICAgICAvLyBJZiB0aGlzIGlzIGEgcHJvcGVydHksIHNlZSBpZiBpdCBiZWxvbmdzIHRvIHNvbWUgb2JqZWN0IHdlIGNhblxuICAgICAgLy8gZmluZCBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC5cbiAgICAgIGNvbnN0IG9iaiA9IGNvbnRleHQucG9wKCk7XG4gICAgICBsZXQgYmFzZTtcbiAgICAgIGlmIChvYmoudHlwZSAmJiBvYmoudHlwZS5pbmRleE9mKCd2YXJpYWJsZScpID09PSAwKSB7XG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuYWRkaXRpb25hbENvbnRleHQpIHsgYmFzZSA9IG9wdGlvbnMuYWRkaXRpb25hbENvbnRleHRbb2JqLnN0cmluZ107IH1cbiAgICAgICAgaWYgKCFvcHRpb25zIHx8IG9wdGlvbnMudXNlR2xvYmFsU2NvcGUgIT09IGZhbHNlKSB7IGJhc2UgPSBiYXNlIHx8IGdsb2JhbFtvYmouc3RyaW5nXTsgfVxuICAgICAgfSBlbHNlIGlmIChvYmoudHlwZSA9PSAnc3RyaW5nJykge1xuICAgICAgICBiYXNlID0gJyc7XG4gICAgICB9IGVsc2UgaWYgKG9iai50eXBlID09ICdhdG9tJykge1xuICAgICAgICBiYXNlID0gMTtcbiAgICAgIH0gZWxzZSBpZiAob2JqLnR5cGUgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBpZiAoZ2xvYmFsLmpRdWVyeSAhPSBudWxsICYmIChvYmouc3RyaW5nID09ICckJyB8fCBvYmouc3RyaW5nID09ICdqUXVlcnknKVxuICAgICAgICAgICYmICh0eXBlb2YgZ2xvYmFsLmpRdWVyeSA9PT0gJ2Z1bmN0aW9uJykpIHsgYmFzZSA9IGdsb2JhbC5qUXVlcnkoKTsgfSBlbHNlIGlmIChnbG9iYWwuXyAhPSBudWxsICYmIChvYmouc3RyaW5nID09ICdfJykgJiYgKHR5cGVvZiBnbG9iYWwuXyA9PT0gJ2Z1bmN0aW9uJykpIHsgYmFzZSA9IGdsb2JhbC5fKCk7IH1cbiAgICAgIH1cbiAgICAgIHdoaWxlIChiYXNlICE9IG51bGwgJiYgY29udGV4dC5sZW5ndGgpIHtcbiAgICAgICAgYmFzZSA9IGJhc2VbY29udGV4dC5wb3AoKVxuICAgICAgICAgIC5zdHJpbmddO1xuICAgICAgfVxuICAgICAgaWYgKGJhc2UgIT0gbnVsbCkgZ2F0aGVyQ29tcGxldGlvbnMoYmFzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIG5vdCwganVzdCBsb29rIGluIHRoZSBnbG9iYWwgb2JqZWN0IGFuZCBhbnkgbG9jYWwgc2NvcGVcbiAgICAgIC8vIChyZWFkaW5nIGludG8gSlMgbW9kZSBpbnRlcm5hbHMgdG8gZ2V0IGF0IHRoZSBsb2NhbCBhbmQgZ2xvYmFsIHZhcmlhYmxlcylcbiAgICAgIGZvciAodmFyIHYgPSB0b2tlbi5zdGF0ZS5sb2NhbFZhcnM7IHY7IHYgPSB2Lm5leHQpIG1heWJlQWRkKHYubmFtZSk7XG4gICAgICBmb3IgKHZhciB2ID0gdG9rZW4uc3RhdGUuZ2xvYmFsVmFyczsgdjsgdiA9IHYubmV4dCkgbWF5YmVBZGQodi5uYW1lKTtcbiAgICAgIGlmICghb3B0aW9ucyB8fCBvcHRpb25zLnVzZUdsb2JhbFNjb3BlICE9PSBmYWxzZSkgeyBnYXRoZXJDb21wbGV0aW9ucyhnbG9iYWwpOyB9XG4gICAgICBmb3JFYWNoKGtleXdvcmRzLCBtYXliZUFkZCk7XG4gICAgfVxuICAgIHJldHVybiBmb3VuZDtcbiAgfVxufVxuIiwgImNsYXNzIEhUTUxCdWlsZGVyIHtcclxuICBzdGF0aWMgYnVpbGRFZGl0b3IoKSB7XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZWRpdG9yJyk7XHJcblxyXG4gICAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xyXG4gICAgdGV4dEFyZWEubmFtZSA9ICdlZGl0b3ItdGV4dGFyZWEnO1xyXG4gICAgdGV4dEFyZWEuY2xhc3NMaXN0LmFkZCgnZWRpdG9yLXRleHRhcmVhJyk7XHJcblxyXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRleHRBcmVhKTtcclxuXHJcbiAgICByZXR1cm4gdGV4dEFyZWE7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYnVpbGRQcmV2aWV3RnJhbWUoKSB7XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJldmlldycpO1xyXG5cclxuICAgIGNvbnN0IGZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XHJcbiAgICBmcmFtZS50aXRsZSA9ICdQcmV2aWV3IFdpbmRvdyc7XHJcbiAgICBmcmFtZS5uYW1lID0gJ3ByZXZpZXctZnJhbWUnO1xyXG4gICAgZnJhbWUuY2xhc3NMaXN0LmFkZCgncHJldmlldy1mcmFtZScpO1xyXG5cclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFtZSk7XHJcblxyXG4gICAgcmV0dXJuIGZyYW1lO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgSFRNTEJ1aWxkZXIgfTtcclxuIiwgImltcG9ydCB7IHNldHVwQ29kZU1pcnJvciB9IGZyb20gJy4vc2V0dXBDb2RlTWlycm9yLmpzJztcclxuXHJcbi8vIGltcG9ydCB7IGdldE1pbWV0eXBlIH0gZnJvbSAnLi4vRmlsZS91dGlscy9nZXRNaW1ldHlwZSc7XHJcbmltcG9ydCB7IEhUTUxCdWlsZGVyIH0gZnJvbSAnLi4vSFRNTC9IVE1MQnVpbGRlci5qcyc7XHJcblxyXG5jbGFzcyBFZGl0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGZpbGVzKSB7XHJcbiAgICB0aGlzLmZpbGVzID0gZmlsZXM7XHJcbiAgICB0aGlzLmFjdGl2ZUZpbGUgPSBudWxsO1xyXG4gICAgdGhpcy5maWxlRGlydHkgPSBmYWxzZTtcclxuXHJcbiAgICBjb25zdCB0ZXh0QXJlYSA9IEhUTUxCdWlsZGVyLmJ1aWxkRWRpdG9yKCk7XHJcblxyXG4gICAgdGhpcy5jbSA9IHNldHVwQ29kZU1pcnJvcih0ZXh0QXJlYSk7XHJcbiAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5Db2RlTWlycm9yJyk7XHJcbiAgfVxyXG5cclxuICBnZXQgaXNEaXJ0eSgpIHtcclxuICAgIHJldHVybiBPYmplY3QudmFsdWVzKHRoaXMuZmlsZXMpLnNvbWUoKGZpbGUpID0+IHtcclxuICAgICAgcmV0dXJuIGZpbGUuaXNEaXJ0eTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0QWN0aXZlRG9jdW1lbnQoZmlsZSkge1xyXG4gICAgdGhpcy5hY3RpdmVGaWxlID0gZmlsZTtcclxuXHJcbiAgICBpZiAoZmlsZSA9PT0gbnVsbCkge1xyXG4gICAgICAvLyBOT1RFOiB0aGVyZSBkb2Vzbid0IHNlZW0gdG8gYmUgYW55IENvZGVNaXJyb3IgY29tbWFuZHMgdG8gZGVsZXRlIGEgZG9jXHJcbiAgICAgIC8vIHRoaXMgaXMgdGhlIG9ubHkgYXBwcm9hY2ggcG9zc2libGUuIEhvcGVmdWxseSBubyBtZW1vcnkgbGVha3MhXHJcbiAgICAgIHRoaXMuY20uc2V0VmFsdWUoJycpO1xyXG4gICAgICB0aGlzLmNtLmNsZWFySGlzdG9yeSgpO1xyXG4gICAgICB0aGlzLnNldFJlYWRPbmx5KHRydWUpO1xyXG4gICAgICB0aGlzLmNtLmRpc3BsYXkuaW5wdXQuYmx1cigpO1xyXG4gICAgfSBlbHNlIGlmIChmaWxlLmRvY3VtZW50KSB7XHJcbiAgICAgIHRoaXMuY20uc3dhcERvYyhmaWxlLmRvY3VtZW50KTtcclxuICAgICAgdGhpcy5jbS5yZWZyZXNoKCk7XHJcbiAgICAgIHRoaXMuc2V0UmVhZE9ubHkoZmlsZS5yZWFkT25seSk7XHJcbiAgICAgIHRoaXMuZm9jdXMoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihgRWRpdG9yIGNvdWxkIG5vdCBvcGVuIGZpbGU6ICR7ZmlsZX1gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50Q2FsbGJhY2soZXZlbnRUeXBlLCBjYWxsYmFjaykge1xyXG4gICAgdGhpcy5jbS5vbihldmVudFR5cGUsIGNhbGxiYWNrKTtcclxuICB9XHJcblxyXG4gIHJlc2V0QWN0aXZlRmlsZSgpIHtcclxuICAgIGlmICh0aGlzLmFjdGl2ZUZpbGUpIHtcclxuICAgICAgdGhpcy5hY3RpdmVGaWxlLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXNldEFsbEZpbGVzKCkge1xyXG4gICAgT2JqZWN0LnZhbHVlcyh0aGlzLmZpbGVzKS5mb3JFYWNoKChmaWxlKSA9PiB7XHJcbiAgICAgIGZpbGUucmVzZXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVmcmVzaCgpIHtcclxuICAgIGlmICh0aGlzLmNtKSB7XHJcbiAgICAgIHRoaXMuY20ucmVmcmVzaCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZm9jdXMoKSB7XHJcbiAgICBpZiAodGhpcy5jbSkgdGhpcy5jbS5mb2N1cygpO1xyXG4gIH1cclxuXHJcbiAgc2V0UmVhZE9ubHkoYm9vbCkge1xyXG4gICAgdGhpcy5jbS5zZXRPcHRpb24oJ3JlYWRPbmx5JywgYm9vbCk7XHJcbiAgICBpZiAoYm9vbCkge1xyXG4gICAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdyZWFkLW9ubHknKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ3JlYWQtb25seScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0Q29tcGFyaXNvblN0YXRlKHN0YXRlKSB7XHJcbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgT2JqZWN0LnZhbHVlcyh0aGlzLmZpbGVzKSkge1xyXG4gICAgICBpZiAoZmlsZS5jb21wYXJpc29uRW5hYmxlZCkge1xyXG4gICAgICAgIGZpbGUuc2V0U3RhdGUoc3RhdGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldEFjdGl2ZURvY3VtZW50KHRoaXMuYWN0aXZlRmlsZSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBFZGl0b3IgfTtcclxuIiwgImNvbnN0IHRleHRVUkxTID0gWydjc3MnLCAnaHRtbCcsICdqcycsICdqc29uJ107XHJcbmNvbnN0IGltYWdlVVJMUyA9IFsnanBnJywgJ3BuZyddO1xyXG5jb25zdCBtb2RlbHNVUkxTID0gWydnbGInXTtcclxuXHJcbmZ1bmN0aW9uIGNsYXNzaWZ5VVJMKHVybCkge1xyXG4gIGNvbnN0IGV4dCA9IHVybC5zcGxpdCgnLicpLnBvcCgpO1xyXG5cclxuICBpZiAodGV4dFVSTFMuaW5jbHVkZXMoZXh0KSkge1xyXG4gICAgcmV0dXJuICd0ZXh0JztcclxuICB9IGVsc2UgaWYgKGltYWdlVVJMUy5pbmNsdWRlcyhleHQpKSB7XHJcbiAgICByZXR1cm4gJ2ltYWdlJztcclxuICB9IGVsc2UgaWYgKG1vZGVsc1VSTFMuaW5jbHVkZXMoZXh0KSkge1xyXG4gICAgcmV0dXJuICdtb2RlbCc7XHJcbiAgfVxyXG4gIHJldHVybiAndGV4dCc7XHJcbn1cclxuXHJcbmV4cG9ydCB7IGNsYXNzaWZ5VVJMIH07XHJcbiIsICJhc3luYyBmdW5jdGlvbiBmZXRjaEZpbGVzKHVybHMsIGFzID0gJ3RleHQnLCBzZXJ2ZXJEaXJlY3RvcnkpIHtcclxuICBjb25zdCBmaWxlUHJvbWlzZXMgPSBbXTtcclxuXHJcbiAgZm9yIChjb25zdCB1cmwgb2YgdXJscykge1xyXG4gICAgY29uc3Qgc2VydmVyVVJMID0gdXJsLnJlcGxhY2UoL2Fzc2V0c1xcLy9nLCBzZXJ2ZXJEaXJlY3RvcnkpO1xyXG5cclxuICAgIGZpbGVQcm9taXNlcy5wdXNoKGZldGNoKHNlcnZlclVSTCkpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgcmVzcG9uc2VzID0gYXdhaXQgUHJvbWlzZS5hbGwoZmlsZVByb21pc2VzKTtcclxuICByZXR1cm4gYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICByZXNwb25zZXMubWFwKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICBzd2l0Y2ggKGFzKSB7XHJcbiAgICAgICAgY2FzZSAndGV4dCc6XHJcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpO1xyXG4gICAgICAgIGNhc2UgJ2Jsb2InOlxyXG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmJsb2IoKTtcclxuICAgICAgfVxyXG4gICAgfSksXHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IHsgZmV0Y2hGaWxlcyB9O1xyXG4iLCAiaW1wb3J0IENvZGVNaXJyb3IgZnJvbSAnY29kZW1pcnJvcic7XHJcbmltcG9ydCB7IGdldE1pbWV0eXBlIH0gZnJvbSAnLi91dGlscy9nZXRNaW1ldHlwZS5qcyc7XHJcbmltcG9ydCB7IGNsYXNzaWZ5VVJMIH0gZnJvbSAnLi4vdXRpbHMvY2xhc3NpZnlVUkwuanMnO1xyXG5pbXBvcnQgeyBjb252ZXJ0SW1wb3J0c0luVGV4dCB9IGZyb20gJy4vdXRpbHMvY29udmVydEltcG9ydHNJblRleHQuanMnO1xyXG5pbXBvcnQgeyBnZXROYW1lRnJvbVVSTCB9IGZyb20gJy4vdXRpbHMvZ2V0TmFtZUZyb21VUkwuanMnO1xyXG5cclxuY2xhc3MgRmlsZSB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSkge1xyXG4gICAgdGhpcy5jb21wYXJpc29uRW5hYmxlZCA9IGRhdGEuY29tcGFyaXNvbnNFbmFibGVkO1xyXG4gICAgdGhpcy5kZWxldGFibGUgPSBkYXRhLmRlbGV0YWJsZSB8fCBmYWxzZTtcclxuICAgIHRoaXMubmFtZSA9IGdldE5hbWVGcm9tVVJMKGRhdGEudXJsKTtcclxuXHJcbiAgICB0aGlzLnVybCA9IGRhdGEudXJsO1xyXG4gICAgdGhpcy50eXBlID0gZGF0YS51cmwuc3BsaXQoJy4nKS5wb3AoKTtcclxuICAgIHRoaXMuZGF0YVR5cGUgPSBjbGFzc2lmeVVSTCh0aGlzLnVybCk7XHJcbiAgICB0aGlzLm1pbWVUeXBlID0gZ2V0TWltZXR5cGUodGhpcy50eXBlKTtcclxuXHJcbiAgICBpZiAodGhpcy5kYXRhVHlwZSA9PT0gJ3RleHQnKSB7XHJcbiAgICAgIHRoaXMuc2V0dXBUZXh0KGRhdGEudGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXJ2ZXJVUkwgPSB0aGlzLnNldFNlcnZlclVSTChkYXRhLnNlcnZlckRpcmVjdG9yeSk7XHJcblxyXG4gICAgdGhpcy5pbXBvcnRTdHlsZSA9IHRoaXMudHlwZSA9PT0gJ2pzJyA/ICducG0nIDogbnVsbDtcclxuXHJcbiAgICB0aGlzLnJlYWRPbmx5ID0gISF0aGlzLnVybC5pbmNsdWRlcygndmVuZG9yJyk7XHJcblxyXG4gICAgdGhpcy5jbURvYyA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5zZXRTdGF0ZSgnc3RhcnQnKTtcclxuICAgIHRoaXMuaW5hY3RpdmVTdGF0ZUhpc3RvcnkgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgc2V0dXBUZXh0KHRleHQpIHtcclxuICAgIGlmICh0aGlzLnJlYWRPbmx5IHx8ICF0aGlzLmNvbXBhcmlzb25FbmFibGVkKSB7XHJcbiAgICAgIC8vIGNhc2Ugb25lOiBjb21wYXJpc29uIGRpc2FibGVkLCBzaW5nbGUgdGV4dCBmaWVsZCBPUiByZWFkb25seVxyXG4gICAgICB0aGlzLm9yaWdpbmFsVGV4dCA9IHRleHQgfHwgJyc7XHJcbiAgICAgIHRoaXMud29ya2luZ1RleHQgPSB0aGlzLm9yaWdpbmFsVGV4dDtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5jb21wYXJpc29uRW5hYmxlZCAmJiAhdGV4dC5zdGFydCkge1xyXG4gICAgICAvLyBjYXNlIHR3bzogY29tcGFyaXNvbiBlbmFibGVkLCBzdGFydCBhbmQgZmluYWwgdGV4dHMgYXJlIGlkZW50aWNhbFxyXG4gICAgICB0aGlzLm9yaWdpbmFsU3RhcnRUZXh0ID0gdGV4dCB8fCAnJztcclxuICAgICAgdGhpcy53b3JraW5nU3RhcnRUZXh0ID0gdGhpcy5vcmlnaW5hbFN0YXJ0VGV4dDtcclxuICAgICAgdGhpcy5vcmlnaW5hbEZpbmFsVGV4dCA9IHRleHQgfHwgJyc7XHJcbiAgICAgIHRoaXMud29ya2luZ0ZpbmFsVGV4dCA9IHRoaXMub3JpZ2luYWxGaW5hbFRleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBjYXNlIHRocmVlOiBjb21wYXJpc29uIGVuYWJsZWQsIHN0YXJ0IGFuZCBmaW5hbCB0ZXh0cyBhcmUgZGlmZmVyZW50XHJcbiAgICAgIHRoaXMub3JpZ2luYWxTdGFydFRleHQgPSB0ZXh0LnN0YXJ0IHx8ICcnO1xyXG4gICAgICB0aGlzLndvcmtpbmdTdGFydFRleHQgPSB0aGlzLm9yaWdpbmFsU3RhcnRUZXh0O1xyXG4gICAgICB0aGlzLm9yaWdpbmFsRmluYWxUZXh0ID0gdGV4dC5maW5hbCB8fCAnJztcclxuICAgICAgdGhpcy53b3JraW5nRmluYWxUZXh0ID0gdGhpcy5vcmlnaW5hbEZpbmFsVGV4dDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIHN0YXRlID0gJ3N0YXJ0JyAvICdmaW5hbCdcclxuICBzZXRTdGF0ZShzdGF0ZSkge1xyXG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG5cclxuICAgIGlmICghdGhpcy5jbURvYykgcmV0dXJuO1xyXG5cclxuICAgIGlmICh0aGlzLmlzRGlydHkpIHtcclxuICAgICAgaWYgKHN0YXRlID09PSAnc3RhcnQnKSB7XHJcbiAgICAgICAgdGhpcy53b3JraW5nRmluYWxUZXh0ID0gdGhpcy5jb250ZW50cztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLndvcmtpbmdTdGFydFRleHQgPSB0aGlzLmNvbnRlbnRzO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaGlzdG9yeSA9IHRoaXMuY21Eb2MuZ2V0SGlzdG9yeSgpO1xyXG4gICAgY29uc3QgY3Vyc29yUG9zID0gdGhpcy5jbURvYy5nZXRDdXJzb3IoKTtcclxuXHJcbiAgICB0aGlzLmNtRG9jLnNldFZhbHVlKHRoaXMuYWN0aXZlVGV4dCk7XHJcbiAgICB0aGlzLmNtRG9jLmNsZWFySGlzdG9yeSgpO1xyXG5cclxuICAgIHRoaXMuY21Eb2Muc2V0Q3Vyc29yKGN1cnNvclBvcyk7XHJcbiAgICBpZiAodGhpcy5pbmFjdGl2ZVN0YXRlSGlzdG9yeSkge1xyXG4gICAgICB0aGlzLmNtRG9jLnNldEhpc3RvcnkodGhpcy5pbmFjdGl2ZVN0YXRlSGlzdG9yeSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pbmFjdGl2ZVN0YXRlSGlzdG9yeSA9IGhpc3Rvcnk7XHJcblxyXG4gICAgaWYgKHN0YXRlID09PSAnc3RhcnQnKSB7XHJcbiAgICAgIGlmICh0aGlzLndvcmtpbmdTdGFydFRleHQgPT09IHRoaXMub3JpZ2luYWxTdGFydFRleHQpIHtcclxuICAgICAgICB0aGlzLmNtRG9jLm1hcmtDbGVhbigpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHN0YXRlID09PSAnZmluYWwnKSB7XHJcbiAgICAgIGlmICh0aGlzLndvcmtpbmdGaW5hbFRleHQgPT09IHRoaXMub3JpZ2luYWxGaW5hbFRleHQpIHtcclxuICAgICAgICB0aGlzLmNtRG9jLm1hcmtDbGVhbigpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRTZXJ2ZXJVUkwoc2VydmVyRGlyZWN0b3J5KSB7XHJcbiAgICByZXR1cm4gYC8ke3NlcnZlckRpcmVjdG9yeX0vJHt0aGlzLnVybH1gLnJlcGxhY2UoL1xcL1xcLy9nLCAnLycpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGFjdGl2ZVRleHQoKSB7XHJcbiAgICBpZiAoIXRoaXMuY29tcGFyaXNvbkVuYWJsZWQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMud29ya2luZ1RleHQ7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUgPT09ICdzdGFydCcpIHtcclxuICAgICAgcmV0dXJuIHRoaXMud29ya2luZ1N0YXJ0VGV4dDtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLndvcmtpbmdGaW5hbFRleHQ7XHJcbiAgfVxyXG5cclxuICBnZXQgZm9sZGVyKCkge1xyXG4gICAgY29uc3QgcmVzID0gdGhpcy51cmwuc3BsaXQoJy8nKTtcclxuICAgIHJlcy5wb3AoKTtcclxuICAgIHJldHVybiByZXMuam9pbignLycpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGRvY3VtZW50KCkge1xyXG4gICAgaWYgKCF0aGlzLmNtRG9jKSB7XHJcbiAgICAgIHRoaXMuY21Eb2MgPSBDb2RlTWlycm9yLkRvYyh0aGlzLmFjdGl2ZVRleHQsIHRoaXMubWltZVR5cGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuY21Eb2M7XHJcbiAgfVxyXG5cclxuICBnZXQgY29udGVudHMoKSB7XHJcbiAgICBpZiAoIXRoaXMuY21Eb2MpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlVGV4dDtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmRvY3VtZW50LmdldFZhbHVlKCk7XHJcbiAgfVxyXG5cclxuICBzZXQgY29udGVudHModGV4dCkge1xyXG4gICAgdGhpcy5kb2N1bWVudC5zZXRWYWx1ZSh0ZXh0KTtcclxuICB9XHJcblxyXG4gIGdldCBpc0RpcnR5KCkge1xyXG4gICAgaWYgKCF0aGlzLmNtRG9jKSByZXR1cm4gZmFsc2U7XHJcbiAgICBlbHNlIHJldHVybiAhdGhpcy5jbURvYy5pc0NsZWFuKCk7XHJcbiAgfVxyXG5cclxuICByZXNldCgpIHtcclxuICAgIGlmICghdGhpcy5jb21wYXJpc29uRW5hYmxlZCkge1xyXG4gICAgICB0aGlzLndvcmtpbmdUZXh0ID0gdGhpcy5vcmlnaW5hbFRleHQ7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUgPT09ICdzdGFydCcpIHtcclxuICAgICAgdGhpcy53b3JraW5nU3RhcnRUZXh0ID0gdGhpcy5vcmlnaW5hbFN0YXJ0VGV4dDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMud29ya2luZ0ZpbmFsVGV4dCA9IHRoaXMub3JpZ2luYWxGaW5hbFRleHQ7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5jbURvYykge1xyXG4gICAgICB0aGlzLmNvbnRlbnRzID0gdGhpcy5hY3RpdmVUZXh0O1xyXG4gICAgICB0aGlzLmNtRG9jLm1hcmtDbGVhbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0Q29udGVudHNXaXRoSW1wb3J0U3R5bGUoc3R5bGUpIHtcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5pbXBvcnRTdHlsZSA9PT0gc3R5bGUgfHxcclxuICAgICAgdGhpcy50eXBlICE9PSAnanMnIHx8XHJcbiAgICAgIHRoaXMudXJsLmluZGV4T2YoJ3NyYycpICE9PSAwXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY29udGVudHM7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNvbnZlcnRJbXBvcnRzSW5UZXh0KFxyXG4gICAgICB0aGlzLmNvbnRlbnRzLFxyXG4gICAgICB0aGlzLmltcG9ydFN0eWxlLFxyXG4gICAgICBzdHlsZSxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBzZXRJbXBvcnRTdHlsZShzdHlsZSkge1xyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLnR5cGUgIT09ICdqcycgfHxcclxuICAgICAgdGhpcy51cmwuaW5jbHVkZXMoJ3ZlbmRvcicpIHx8XHJcbiAgICAgIHRoaXMuaW1wb3J0U3R5bGUgPT09IHN0eWxlXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMud29ya2luZ1RleHQgPSBjb252ZXJ0SW1wb3J0c0luVGV4dChcclxuICAgICAgdGhpcy53b3JraW5nVGV4dCxcclxuICAgICAgdGhpcy5pbXBvcnRTdHlsZSxcclxuICAgICAgc3R5bGUsXHJcbiAgICApO1xyXG4gICAgdGhpcy53b3JraW5nU3RhcnRUZXh0ID0gY29udmVydEltcG9ydHNJblRleHQoXHJcbiAgICAgIHRoaXMud29ya2luZ1N0YXJ0VGV4dCxcclxuICAgICAgdGhpcy5pbXBvcnRTdHlsZSxcclxuICAgICAgc3R5bGUsXHJcbiAgICApO1xyXG4gICAgdGhpcy53b3JraW5nRmluYWxUZXh0ID0gY29udmVydEltcG9ydHNJblRleHQoXHJcbiAgICAgIHRoaXMud29ya2luZ0ZpbmFsVGV4dCxcclxuICAgICAgdGhpcy5pbXBvcnRTdHlsZSxcclxuICAgICAgc3R5bGUsXHJcbiAgICApO1xyXG5cclxuICAgIGlmICh0aGlzLmNtRG9jKSB7XHJcbiAgICAgIHRoaXMuY29udGVudHMgPSBjb252ZXJ0SW1wb3J0c0luVGV4dChcclxuICAgICAgICB0aGlzLmNvbnRlbnRzLFxyXG4gICAgICAgIHRoaXMuaW1wb3J0U3R5bGUsXHJcbiAgICAgICAgc3R5bGUsXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pbXBvcnRTdHlsZSA9IHN0eWxlO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgRmlsZSB9O1xyXG4iLCAiZnVuY3Rpb24gZ2V0TWltZXR5cGUodHlwZSkge1xyXG4gIHN3aXRjaCAodHlwZSkge1xyXG4gICAgY2FzZSAnaHRtbCc6XHJcbiAgICAgIHJldHVybiAndGV4dC9odG1sJztcclxuICAgIGNhc2UgJ2Nzcyc6XHJcbiAgICAgIHJldHVybiAndGV4dC9jc3MnO1xyXG4gICAgY2FzZSAnanMnOlxyXG4gICAgICByZXR1cm4gJ3RleHQvamF2YXNjcmlwdCc7XHJcbiAgICBjYXNlICdqcGcnOlxyXG4gICAgY2FzZSAnanBlZyc6XHJcbiAgICAgIHJldHVybiAnaW1hZ2UvanBlZyc7XHJcbiAgICBjYXNlICdwbmcnOlxyXG4gICAgICByZXR1cm4gJ2ltYWdlL3BuZyc7XHJcbiAgICBjYXNlICdnbGInOlxyXG4gICAgICByZXR1cm4gJ21vZGVsL2dsdGYtYmluYXJ5JztcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJldHVybiAndGV4dC9wbGFpbic7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBnZXRNaW1ldHlwZSB9O1xyXG4iLCAiZXhwb3J0IGNvbnN0IFJFVklTSU9OID0gJzEyNyc7XG5leHBvcnQgY29uc3QgTU9VU0UgPSB7IExFRlQ6IDAsIE1JRERMRTogMSwgUklHSFQ6IDIsIFJPVEFURTogMCwgRE9MTFk6IDEsIFBBTjogMiB9O1xuZXhwb3J0IGNvbnN0IFRPVUNIID0geyBST1RBVEU6IDAsIFBBTjogMSwgRE9MTFlfUEFOOiAyLCBET0xMWV9ST1RBVEU6IDMgfTtcbmV4cG9ydCBjb25zdCBDdWxsRmFjZU5vbmUgPSAwO1xuZXhwb3J0IGNvbnN0IEN1bGxGYWNlQmFjayA9IDE7XG5leHBvcnQgY29uc3QgQ3VsbEZhY2VGcm9udCA9IDI7XG5leHBvcnQgY29uc3QgQ3VsbEZhY2VGcm9udEJhY2sgPSAzO1xuZXhwb3J0IGNvbnN0IEJhc2ljU2hhZG93TWFwID0gMDtcbmV4cG9ydCBjb25zdCBQQ0ZTaGFkb3dNYXAgPSAxO1xuZXhwb3J0IGNvbnN0IFBDRlNvZnRTaGFkb3dNYXAgPSAyO1xuZXhwb3J0IGNvbnN0IFZTTVNoYWRvd01hcCA9IDM7XG5leHBvcnQgY29uc3QgRnJvbnRTaWRlID0gMDtcbmV4cG9ydCBjb25zdCBCYWNrU2lkZSA9IDE7XG5leHBvcnQgY29uc3QgRG91YmxlU2lkZSA9IDI7XG5leHBvcnQgY29uc3QgRmxhdFNoYWRpbmcgPSAxO1xuZXhwb3J0IGNvbnN0IFNtb290aFNoYWRpbmcgPSAyO1xuZXhwb3J0IGNvbnN0IE5vQmxlbmRpbmcgPSAwO1xuZXhwb3J0IGNvbnN0IE5vcm1hbEJsZW5kaW5nID0gMTtcbmV4cG9ydCBjb25zdCBBZGRpdGl2ZUJsZW5kaW5nID0gMjtcbmV4cG9ydCBjb25zdCBTdWJ0cmFjdGl2ZUJsZW5kaW5nID0gMztcbmV4cG9ydCBjb25zdCBNdWx0aXBseUJsZW5kaW5nID0gNDtcbmV4cG9ydCBjb25zdCBDdXN0b21CbGVuZGluZyA9IDU7XG5leHBvcnQgY29uc3QgQWRkRXF1YXRpb24gPSAxMDA7XG5leHBvcnQgY29uc3QgU3VidHJhY3RFcXVhdGlvbiA9IDEwMTtcbmV4cG9ydCBjb25zdCBSZXZlcnNlU3VidHJhY3RFcXVhdGlvbiA9IDEwMjtcbmV4cG9ydCBjb25zdCBNaW5FcXVhdGlvbiA9IDEwMztcbmV4cG9ydCBjb25zdCBNYXhFcXVhdGlvbiA9IDEwNDtcbmV4cG9ydCBjb25zdCBaZXJvRmFjdG9yID0gMjAwO1xuZXhwb3J0IGNvbnN0IE9uZUZhY3RvciA9IDIwMTtcbmV4cG9ydCBjb25zdCBTcmNDb2xvckZhY3RvciA9IDIwMjtcbmV4cG9ydCBjb25zdCBPbmVNaW51c1NyY0NvbG9yRmFjdG9yID0gMjAzO1xuZXhwb3J0IGNvbnN0IFNyY0FscGhhRmFjdG9yID0gMjA0O1xuZXhwb3J0IGNvbnN0IE9uZU1pbnVzU3JjQWxwaGFGYWN0b3IgPSAyMDU7XG5leHBvcnQgY29uc3QgRHN0QWxwaGFGYWN0b3IgPSAyMDY7XG5leHBvcnQgY29uc3QgT25lTWludXNEc3RBbHBoYUZhY3RvciA9IDIwNztcbmV4cG9ydCBjb25zdCBEc3RDb2xvckZhY3RvciA9IDIwODtcbmV4cG9ydCBjb25zdCBPbmVNaW51c0RzdENvbG9yRmFjdG9yID0gMjA5O1xuZXhwb3J0IGNvbnN0IFNyY0FscGhhU2F0dXJhdGVGYWN0b3IgPSAyMTA7XG5leHBvcnQgY29uc3QgTmV2ZXJEZXB0aCA9IDA7XG5leHBvcnQgY29uc3QgQWx3YXlzRGVwdGggPSAxO1xuZXhwb3J0IGNvbnN0IExlc3NEZXB0aCA9IDI7XG5leHBvcnQgY29uc3QgTGVzc0VxdWFsRGVwdGggPSAzO1xuZXhwb3J0IGNvbnN0IEVxdWFsRGVwdGggPSA0O1xuZXhwb3J0IGNvbnN0IEdyZWF0ZXJFcXVhbERlcHRoID0gNTtcbmV4cG9ydCBjb25zdCBHcmVhdGVyRGVwdGggPSA2O1xuZXhwb3J0IGNvbnN0IE5vdEVxdWFsRGVwdGggPSA3O1xuZXhwb3J0IGNvbnN0IE11bHRpcGx5T3BlcmF0aW9uID0gMDtcbmV4cG9ydCBjb25zdCBNaXhPcGVyYXRpb24gPSAxO1xuZXhwb3J0IGNvbnN0IEFkZE9wZXJhdGlvbiA9IDI7XG5leHBvcnQgY29uc3QgTm9Ub25lTWFwcGluZyA9IDA7XG5leHBvcnQgY29uc3QgTGluZWFyVG9uZU1hcHBpbmcgPSAxO1xuZXhwb3J0IGNvbnN0IFJlaW5oYXJkVG9uZU1hcHBpbmcgPSAyO1xuZXhwb3J0IGNvbnN0IENpbmVvblRvbmVNYXBwaW5nID0gMztcbmV4cG9ydCBjb25zdCBBQ0VTRmlsbWljVG9uZU1hcHBpbmcgPSA0O1xuZXhwb3J0IGNvbnN0IEN1c3RvbVRvbmVNYXBwaW5nID0gNTtcblxuZXhwb3J0IGNvbnN0IFVWTWFwcGluZyA9IDMwMDtcbmV4cG9ydCBjb25zdCBDdWJlUmVmbGVjdGlvbk1hcHBpbmcgPSAzMDE7XG5leHBvcnQgY29uc3QgQ3ViZVJlZnJhY3Rpb25NYXBwaW5nID0gMzAyO1xuZXhwb3J0IGNvbnN0IEVxdWlyZWN0YW5ndWxhclJlZmxlY3Rpb25NYXBwaW5nID0gMzAzO1xuZXhwb3J0IGNvbnN0IEVxdWlyZWN0YW5ndWxhclJlZnJhY3Rpb25NYXBwaW5nID0gMzA0O1xuZXhwb3J0IGNvbnN0IEN1YmVVVlJlZmxlY3Rpb25NYXBwaW5nID0gMzA2O1xuZXhwb3J0IGNvbnN0IEN1YmVVVlJlZnJhY3Rpb25NYXBwaW5nID0gMzA3O1xuZXhwb3J0IGNvbnN0IFJlcGVhdFdyYXBwaW5nID0gMTAwMDtcbmV4cG9ydCBjb25zdCBDbGFtcFRvRWRnZVdyYXBwaW5nID0gMTAwMTtcbmV4cG9ydCBjb25zdCBNaXJyb3JlZFJlcGVhdFdyYXBwaW5nID0gMTAwMjtcbmV4cG9ydCBjb25zdCBOZWFyZXN0RmlsdGVyID0gMTAwMztcbmV4cG9ydCBjb25zdCBOZWFyZXN0TWlwbWFwTmVhcmVzdEZpbHRlciA9IDEwMDQ7XG5leHBvcnQgY29uc3QgTmVhcmVzdE1pcE1hcE5lYXJlc3RGaWx0ZXIgPSAxMDA0O1xuZXhwb3J0IGNvbnN0IE5lYXJlc3RNaXBtYXBMaW5lYXJGaWx0ZXIgPSAxMDA1O1xuZXhwb3J0IGNvbnN0IE5lYXJlc3RNaXBNYXBMaW5lYXJGaWx0ZXIgPSAxMDA1O1xuZXhwb3J0IGNvbnN0IExpbmVhckZpbHRlciA9IDEwMDY7XG5leHBvcnQgY29uc3QgTGluZWFyTWlwbWFwTmVhcmVzdEZpbHRlciA9IDEwMDc7XG5leHBvcnQgY29uc3QgTGluZWFyTWlwTWFwTmVhcmVzdEZpbHRlciA9IDEwMDc7XG5leHBvcnQgY29uc3QgTGluZWFyTWlwbWFwTGluZWFyRmlsdGVyID0gMTAwODtcbmV4cG9ydCBjb25zdCBMaW5lYXJNaXBNYXBMaW5lYXJGaWx0ZXIgPSAxMDA4O1xuZXhwb3J0IGNvbnN0IFVuc2lnbmVkQnl0ZVR5cGUgPSAxMDA5O1xuZXhwb3J0IGNvbnN0IEJ5dGVUeXBlID0gMTAxMDtcbmV4cG9ydCBjb25zdCBTaG9ydFR5cGUgPSAxMDExO1xuZXhwb3J0IGNvbnN0IFVuc2lnbmVkU2hvcnRUeXBlID0gMTAxMjtcbmV4cG9ydCBjb25zdCBJbnRUeXBlID0gMTAxMztcbmV4cG9ydCBjb25zdCBVbnNpZ25lZEludFR5cGUgPSAxMDE0O1xuZXhwb3J0IGNvbnN0IEZsb2F0VHlwZSA9IDEwMTU7XG5leHBvcnQgY29uc3QgSGFsZkZsb2F0VHlwZSA9IDEwMTY7XG5leHBvcnQgY29uc3QgVW5zaWduZWRTaG9ydDQ0NDRUeXBlID0gMTAxNztcbmV4cG9ydCBjb25zdCBVbnNpZ25lZFNob3J0NTU1MVR5cGUgPSAxMDE4O1xuZXhwb3J0IGNvbnN0IFVuc2lnbmVkU2hvcnQ1NjVUeXBlID0gMTAxOTtcbmV4cG9ydCBjb25zdCBVbnNpZ25lZEludDI0OFR5cGUgPSAxMDIwO1xuZXhwb3J0IGNvbnN0IEFscGhhRm9ybWF0ID0gMTAyMTtcbmV4cG9ydCBjb25zdCBSR0JGb3JtYXQgPSAxMDIyO1xuZXhwb3J0IGNvbnN0IFJHQkFGb3JtYXQgPSAxMDIzO1xuZXhwb3J0IGNvbnN0IEx1bWluYW5jZUZvcm1hdCA9IDEwMjQ7XG5leHBvcnQgY29uc3QgTHVtaW5hbmNlQWxwaGFGb3JtYXQgPSAxMDI1O1xuZXhwb3J0IGNvbnN0IFJHQkVGb3JtYXQgPSBSR0JBRm9ybWF0O1xuZXhwb3J0IGNvbnN0IERlcHRoRm9ybWF0ID0gMTAyNjtcbmV4cG9ydCBjb25zdCBEZXB0aFN0ZW5jaWxGb3JtYXQgPSAxMDI3O1xuZXhwb3J0IGNvbnN0IFJlZEZvcm1hdCA9IDEwMjg7XG5leHBvcnQgY29uc3QgUmVkSW50ZWdlckZvcm1hdCA9IDEwMjk7XG5leHBvcnQgY29uc3QgUkdGb3JtYXQgPSAxMDMwO1xuZXhwb3J0IGNvbnN0IFJHSW50ZWdlckZvcm1hdCA9IDEwMzE7XG5leHBvcnQgY29uc3QgUkdCSW50ZWdlckZvcm1hdCA9IDEwMzI7XG5leHBvcnQgY29uc3QgUkdCQUludGVnZXJGb3JtYXQgPSAxMDMzO1xuXG5leHBvcnQgY29uc3QgUkdCX1MzVENfRFhUMV9Gb3JtYXQgPSAzMzc3NjtcbmV4cG9ydCBjb25zdCBSR0JBX1MzVENfRFhUMV9Gb3JtYXQgPSAzMzc3NztcbmV4cG9ydCBjb25zdCBSR0JBX1MzVENfRFhUM19Gb3JtYXQgPSAzMzc3ODtcbmV4cG9ydCBjb25zdCBSR0JBX1MzVENfRFhUNV9Gb3JtYXQgPSAzMzc3OTtcbmV4cG9ydCBjb25zdCBSR0JfUFZSVENfNEJQUFYxX0Zvcm1hdCA9IDM1ODQwO1xuZXhwb3J0IGNvbnN0IFJHQl9QVlJUQ18yQlBQVjFfRm9ybWF0ID0gMzU4NDE7XG5leHBvcnQgY29uc3QgUkdCQV9QVlJUQ180QlBQVjFfRm9ybWF0ID0gMzU4NDI7XG5leHBvcnQgY29uc3QgUkdCQV9QVlJUQ18yQlBQVjFfRm9ybWF0ID0gMzU4NDM7XG5leHBvcnQgY29uc3QgUkdCX0VUQzFfRm9ybWF0ID0gMzYxOTY7XG5leHBvcnQgY29uc3QgUkdCX0VUQzJfRm9ybWF0ID0gMzc0OTI7XG5leHBvcnQgY29uc3QgUkdCQV9FVEMyX0VBQ19Gb3JtYXQgPSAzNzQ5NjtcbmV4cG9ydCBjb25zdCBSR0JBX0FTVENfNHg0X0Zvcm1hdCA9IDM3ODA4O1xuZXhwb3J0IGNvbnN0IFJHQkFfQVNUQ181eDRfRm9ybWF0ID0gMzc4MDk7XG5leHBvcnQgY29uc3QgUkdCQV9BU1RDXzV4NV9Gb3JtYXQgPSAzNzgxMDtcbmV4cG9ydCBjb25zdCBSR0JBX0FTVENfNng1X0Zvcm1hdCA9IDM3ODExO1xuZXhwb3J0IGNvbnN0IFJHQkFfQVNUQ182eDZfRm9ybWF0ID0gMzc4MTI7XG5leHBvcnQgY29uc3QgUkdCQV9BU1RDXzh4NV9Gb3JtYXQgPSAzNzgxMztcbmV4cG9ydCBjb25zdCBSR0JBX0FTVENfOHg2X0Zvcm1hdCA9IDM3ODE0O1xuZXhwb3J0IGNvbnN0IFJHQkFfQVNUQ184eDhfRm9ybWF0ID0gMzc4MTU7XG5leHBvcnQgY29uc3QgUkdCQV9BU1RDXzEweDVfRm9ybWF0ID0gMzc4MTY7XG5leHBvcnQgY29uc3QgUkdCQV9BU1RDXzEweDZfRm9ybWF0ID0gMzc4MTc7XG5leHBvcnQgY29uc3QgUkdCQV9BU1RDXzEweDhfRm9ybWF0ID0gMzc4MTg7XG5leHBvcnQgY29uc3QgUkdCQV9BU1RDXzEweDEwX0Zvcm1hdCA9IDM3ODE5O1xuZXhwb3J0IGNvbnN0IFJHQkFfQVNUQ18xMngxMF9Gb3JtYXQgPSAzNzgyMDtcbmV4cG9ydCBjb25zdCBSR0JBX0FTVENfMTJ4MTJfRm9ybWF0ID0gMzc4MjE7XG5leHBvcnQgY29uc3QgUkdCQV9CUFRDX0Zvcm1hdCA9IDM2NDkyO1xuZXhwb3J0IGNvbnN0IFNSR0I4X0FMUEhBOF9BU1RDXzR4NF9Gb3JtYXQgPSAzNzg0MDtcbmV4cG9ydCBjb25zdCBTUkdCOF9BTFBIQThfQVNUQ181eDRfRm9ybWF0ID0gMzc4NDE7XG5leHBvcnQgY29uc3QgU1JHQjhfQUxQSEE4X0FTVENfNXg1X0Zvcm1hdCA9IDM3ODQyO1xuZXhwb3J0IGNvbnN0IFNSR0I4X0FMUEhBOF9BU1RDXzZ4NV9Gb3JtYXQgPSAzNzg0MztcbmV4cG9ydCBjb25zdCBTUkdCOF9BTFBIQThfQVNUQ182eDZfRm9ybWF0ID0gMzc4NDQ7XG5leHBvcnQgY29uc3QgU1JHQjhfQUxQSEE4X0FTVENfOHg1X0Zvcm1hdCA9IDM3ODQ1O1xuZXhwb3J0IGNvbnN0IFNSR0I4X0FMUEhBOF9BU1RDXzh4Nl9Gb3JtYXQgPSAzNzg0NjtcbmV4cG9ydCBjb25zdCBTUkdCOF9BTFBIQThfQVNUQ184eDhfRm9ybWF0ID0gMzc4NDc7XG5leHBvcnQgY29uc3QgU1JHQjhfQUxQSEE4X0FTVENfMTB4NV9Gb3JtYXQgPSAzNzg0ODtcbmV4cG9ydCBjb25zdCBTUkdCOF9BTFBIQThfQVNUQ18xMHg2X0Zvcm1hdCA9IDM3ODQ5O1xuZXhwb3J0IGNvbnN0IFNSR0I4X0FMUEhBOF9BU1RDXzEweDhfRm9ybWF0ID0gMzc4NTA7XG5leHBvcnQgY29uc3QgU1JHQjhfQUxQSEE4X0FTVENfMTB4MTBfRm9ybWF0ID0gMzc4NTE7XG5leHBvcnQgY29uc3QgU1JHQjhfQUxQSEE4X0FTVENfMTJ4MTBfRm9ybWF0ID0gMzc4NTI7XG5leHBvcnQgY29uc3QgU1JHQjhfQUxQSEE4X0FTVENfMTJ4MTJfRm9ybWF0ID0gMzc4NTM7XG5leHBvcnQgY29uc3QgTG9vcE9uY2UgPSAyMjAwO1xuZXhwb3J0IGNvbnN0IExvb3BSZXBlYXQgPSAyMjAxO1xuZXhwb3J0IGNvbnN0IExvb3BQaW5nUG9uZyA9IDIyMDI7XG5leHBvcnQgY29uc3QgSW50ZXJwb2xhdGVEaXNjcmV0ZSA9IDIzMDA7XG5leHBvcnQgY29uc3QgSW50ZXJwb2xhdGVMaW5lYXIgPSAyMzAxO1xuZXhwb3J0IGNvbnN0IEludGVycG9sYXRlU21vb3RoID0gMjMwMjtcbmV4cG9ydCBjb25zdCBaZXJvQ3VydmF0dXJlRW5kaW5nID0gMjQwMDtcbmV4cG9ydCBjb25zdCBaZXJvU2xvcGVFbmRpbmcgPSAyNDAxO1xuZXhwb3J0IGNvbnN0IFdyYXBBcm91bmRFbmRpbmcgPSAyNDAyO1xuZXhwb3J0IGNvbnN0IE5vcm1hbEFuaW1hdGlvbkJsZW5kTW9kZSA9IDI1MDA7XG5leHBvcnQgY29uc3QgQWRkaXRpdmVBbmltYXRpb25CbGVuZE1vZGUgPSAyNTAxO1xuZXhwb3J0IGNvbnN0IFRyaWFuZ2xlc0RyYXdNb2RlID0gMDtcbmV4cG9ydCBjb25zdCBUcmlhbmdsZVN0cmlwRHJhd01vZGUgPSAxO1xuZXhwb3J0IGNvbnN0IFRyaWFuZ2xlRmFuRHJhd01vZGUgPSAyO1xuZXhwb3J0IGNvbnN0IExpbmVhckVuY29kaW5nID0gMzAwMDtcbmV4cG9ydCBjb25zdCBzUkdCRW5jb2RpbmcgPSAzMDAxO1xuZXhwb3J0IGNvbnN0IEdhbW1hRW5jb2RpbmcgPSAzMDA3O1xuZXhwb3J0IGNvbnN0IFJHQkVFbmNvZGluZyA9IDMwMDI7XG5leHBvcnQgY29uc3QgTG9nTHV2RW5jb2RpbmcgPSAzMDAzO1xuZXhwb3J0IGNvbnN0IFJHQk03RW5jb2RpbmcgPSAzMDA0O1xuZXhwb3J0IGNvbnN0IFJHQk0xNkVuY29kaW5nID0gMzAwNTtcbmV4cG9ydCBjb25zdCBSR0JERW5jb2RpbmcgPSAzMDA2O1xuZXhwb3J0IGNvbnN0IEJhc2ljRGVwdGhQYWNraW5nID0gMzIwMDtcbmV4cG9ydCBjb25zdCBSR0JBRGVwdGhQYWNraW5nID0gMzIwMTtcbmV4cG9ydCBjb25zdCBUYW5nZW50U3BhY2VOb3JtYWxNYXAgPSAwO1xuZXhwb3J0IGNvbnN0IE9iamVjdFNwYWNlTm9ybWFsTWFwID0gMTtcblxuZXhwb3J0IGNvbnN0IFplcm9TdGVuY2lsT3AgPSAwO1xuZXhwb3J0IGNvbnN0IEtlZXBTdGVuY2lsT3AgPSA3NjgwO1xuZXhwb3J0IGNvbnN0IFJlcGxhY2VTdGVuY2lsT3AgPSA3NjgxO1xuZXhwb3J0IGNvbnN0IEluY3JlbWVudFN0ZW5jaWxPcCA9IDc2ODI7XG5leHBvcnQgY29uc3QgRGVjcmVtZW50U3RlbmNpbE9wID0gNzY4MztcbmV4cG9ydCBjb25zdCBJbmNyZW1lbnRXcmFwU3RlbmNpbE9wID0gMzQwNTU7XG5leHBvcnQgY29uc3QgRGVjcmVtZW50V3JhcFN0ZW5jaWxPcCA9IDM0MDU2O1xuZXhwb3J0IGNvbnN0IEludmVydFN0ZW5jaWxPcCA9IDUzODY7XG5cbmV4cG9ydCBjb25zdCBOZXZlclN0ZW5jaWxGdW5jID0gNTEyO1xuZXhwb3J0IGNvbnN0IExlc3NTdGVuY2lsRnVuYyA9IDUxMztcbmV4cG9ydCBjb25zdCBFcXVhbFN0ZW5jaWxGdW5jID0gNTE0O1xuZXhwb3J0IGNvbnN0IExlc3NFcXVhbFN0ZW5jaWxGdW5jID0gNTE1O1xuZXhwb3J0IGNvbnN0IEdyZWF0ZXJTdGVuY2lsRnVuYyA9IDUxNjtcbmV4cG9ydCBjb25zdCBOb3RFcXVhbFN0ZW5jaWxGdW5jID0gNTE3O1xuZXhwb3J0IGNvbnN0IEdyZWF0ZXJFcXVhbFN0ZW5jaWxGdW5jID0gNTE4O1xuZXhwb3J0IGNvbnN0IEFsd2F5c1N0ZW5jaWxGdW5jID0gNTE5O1xuXG5leHBvcnQgY29uc3QgU3RhdGljRHJhd1VzYWdlID0gMzUwNDQ7XG5leHBvcnQgY29uc3QgRHluYW1pY0RyYXdVc2FnZSA9IDM1MDQ4O1xuZXhwb3J0IGNvbnN0IFN0cmVhbURyYXdVc2FnZSA9IDM1MDQwO1xuZXhwb3J0IGNvbnN0IFN0YXRpY1JlYWRVc2FnZSA9IDM1MDQ1O1xuZXhwb3J0IGNvbnN0IER5bmFtaWNSZWFkVXNhZ2UgPSAzNTA0OTtcbmV4cG9ydCBjb25zdCBTdHJlYW1SZWFkVXNhZ2UgPSAzNTA0MTtcbmV4cG9ydCBjb25zdCBTdGF0aWNDb3B5VXNhZ2UgPSAzNTA0NjtcbmV4cG9ydCBjb25zdCBEeW5hbWljQ29weVVzYWdlID0gMzUwNTA7XG5leHBvcnQgY29uc3QgU3RyZWFtQ29weVVzYWdlID0gMzUwNDI7XG5cbmV4cG9ydCBjb25zdCBHTFNMMSA9ICcxMDAnO1xuZXhwb3J0IGNvbnN0IEdMU0wzID0gJzMwMCBlcyc7XG4iLCAiLy8gUG9zc2libGUgaW1wb3J0czpcclxuXHJcbi8vIGltcG9ydCB7IENhbWVyYSB9IGZyb20gJ3RocmVlJztcclxuLy8gaW1wb3J0IHsgQ2FtZXJhIH0gZnJvbSAnLi4vLi4vLi4vdmVuZG9yL3RocmVlL2J1aWxkL3RocmVlLm1vZHVsZS5qcyc7IC8vIEhhcmQhIEhvdyBtYW55ICAuLi8uLi8/XHJcbi8vIGltcG9ydCB7IENhbWVyYSB9IGZyb20gJ2h0dHBzOi8vdW5wa2cuY29tL3RocmVlQDAuMTE2LjAvYnVpbGQvdGhyZWUubW9kdWxlLmpzJztcclxuXHJcbi8vIGltcG9ydCB7IE9yYml0Q29udHJvbHMgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vY29udHJvbHMvT3JiaXRDb250cm9scy5qcyc7XHJcbi8vIGltcG9ydCB7IE9yYml0Q29udHJvbHMgfSBmcm9tICcuLi8uLi8uLi92ZW5kb3IvdGhyZWUvZXhhbXBsZXMvanNtL2NvbnRyb2xzL09yYml0Q29udHJvbHMuanMnO1xyXG4vLyBpbXBvcnQgeyBPcmJpdENvbnRyb2xzIH0gZnJvbSAnaHR0cHM6Ly91bnBrZy5jb20vdGhyZWVAMC4xMTYuMC9leGFtcGxlcy9qc20vY29udHJvbHMvT3JiaXRDb250cm9scy5qcyc7XHJcblxyXG5pbXBvcnQgeyBSRVZJU0lPTiB9IGZyb20gJ3RocmVlL3NyYy9jb25zdGFudHMuanMnO1xyXG5cclxuZnVuY3Rpb24gY29udmVydEltcG9ydHNJblRleHQodGV4dCwgb2xkU3R5bGUsIG5ld1N0eWxlKSB7XHJcbiAgaWYgKCF0ZXh0KSByZXR1cm47XHJcbiAgbGV0IGNvbnZlcnRlZFRleHQgPSB0ZXh0O1xyXG5cclxuICBjb25zdCBucG1CdWlsZEltcG9ydCA9IFwiZnJvbSAndGhyZWUnXCI7XHJcbiAgY29uc3QgbnBtRXhhbXBsZUltcG9ydCA9IFwiZnJvbSAndGhyZWUvZXhhbXBsZXNcIjtcclxuXHJcbiAgLy8gY29uc3QgcmVsYXRpdmVCdWlsZEltcG9ydCA9XHJcbiAgLy8gICBcImZyb20gJy4uLy4uLy4uL3ZlbmRvci90aHJlZS9idWlsZC90aHJlZS5tb2R1bGUuanMnXCI7XHJcbiAgLy8gY29uc3QgcmVsYXRpdmVFeGFtcGxlSW1wb3J0ID1cclxuICAvLyAgIFwiZnJvbSAnLi4vLi4vLi4vdmVuZG9yL3RocmVlL2V4YW1wbGVzXCI7XHJcblxyXG4gIGNvbnN0IGNkbkJ1aWxkSW1wb3J0ID0gYGZyb20gJ2h0dHBzOi8vdW5wa2cuY29tL3RocmVlQDAuJHtSRVZJU0lPTn0uMC9idWlsZC90aHJlZS5tb2R1bGUuanMnYDtcclxuICBjb25zdCBjZG5FeGFtcGxlSW1wb3J0ID0gYGZyb20gJ2h0dHBzOi8vdW5wa2cuY29tL3RocmVlQDAuJHtSRVZJU0lPTn0uMC9leGFtcGxlc2A7XHJcblxyXG4gIGxldCBuZXdCdWlsZFVSbCA9IG5wbUJ1aWxkSW1wb3J0O1xyXG4gIGxldCBuZXdFeGFtcGxlVVJsID0gbnBtRXhhbXBsZUltcG9ydDtcclxuXHJcbiAgaWYgKG5ld1N0eWxlID09PSAnY2RuJykge1xyXG4gICAgbmV3QnVpbGRVUmwgPSBjZG5CdWlsZEltcG9ydDtcclxuICAgIG5ld0V4YW1wbGVVUmwgPSBjZG5FeGFtcGxlSW1wb3J0O1xyXG4gIH1cclxuICAvLyBlbHNlIGlmIChuZXdTdHlsZSA9PT0gJ3JlbGF0aXZlJykge1xyXG4gIC8vICAgbmV3QnVpbGRVUmwgPSByZWxhdGl2ZUJ1aWxkSW1wb3J0O1xyXG4gIC8vICAgbmV3RXhhbXBsZVVSbCA9IHJlbGF0aXZlRXhhbXBsZUltcG9ydDsgLy8gVE9ETyBwcm9wZXIgbnVtYmVyIG9mIC4uLy4uL1xyXG4gIC8vIH1cclxuXHJcbiAgc3dpdGNoIChvbGRTdHlsZSkge1xyXG4gICAgY2FzZSAnbnBtJzpcclxuICAgICAgY29udmVydGVkVGV4dCA9IGNvbnZlcnRlZFRleHQucmVwbGFjZShcclxuICAgICAgICBuZXcgUmVnRXhwKG5wbUJ1aWxkSW1wb3J0LCAnZycpLFxyXG4gICAgICAgIG5ld0J1aWxkVVJsLFxyXG4gICAgICApO1xyXG4gICAgICBjb252ZXJ0ZWRUZXh0ID0gY29udmVydGVkVGV4dC5yZXBsYWNlKFxyXG4gICAgICAgIG5ldyBSZWdFeHAobnBtRXhhbXBsZUltcG9ydCwgJ2cnKSxcclxuICAgICAgICBuZXdFeGFtcGxlVVJsLFxyXG4gICAgICApO1xyXG4gICAgICBicmVhaztcclxuICAgIC8vIGNhc2UgJ3JlbGF0aXZlJzpcclxuICAgIC8vICAgY29udmVydGVkVGV4dCA9IGNvbnZlcnRlZFRleHQucmVwbGFjZShcclxuICAgIC8vICAgICBuZXcgUmVnRXhwKHJlbGF0aXZlQnVpbGRJbXBvcnQsICdnJyksXHJcbiAgICAvLyAgICAgbmV3QnVpbGRVUmwsXHJcbiAgICAvLyAgICk7XHJcbiAgICAvLyAgIGNvbnZlcnRlZFRleHQgPSBjb252ZXJ0ZWRUZXh0LnJlcGxhY2UoXHJcbiAgICAvLyAgICAgbmV3IFJlZ0V4cChyZWxhdGl2ZUV4YW1wbGVJbXBvcnQsICdnJyksXHJcbiAgICAvLyAgICAgbmV3RXhhbXBsZVVSbCxcclxuICAgIC8vICAgKTtcclxuICAgIC8vICAgYnJlYWs7XHJcbiAgICBjYXNlICdjZG4nOlxyXG4gICAgICBjb252ZXJ0ZWRUZXh0ID0gY29udmVydGVkVGV4dC5yZXBsYWNlKFxyXG4gICAgICAgIG5ldyBSZWdFeHAoY2RuQnVpbGRJbXBvcnQsICdnJyksXHJcbiAgICAgICAgbmV3QnVpbGRVUmwsXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnZlcnRlZFRleHQgPSBjb252ZXJ0ZWRUZXh0LnJlcGxhY2UoXHJcbiAgICAgICAgbmV3IFJlZ0V4cChjZG5FeGFtcGxlSW1wb3J0LCAnZycpLFxyXG4gICAgICAgIG5ld0V4YW1wbGVVUmwsXHJcbiAgICAgICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gY29udmVydGVkVGV4dDtcclxufVxyXG5cclxuZXhwb3J0IHsgY29udmVydEltcG9ydHNJblRleHQgfTtcclxuIiwgImZ1bmN0aW9uIGdldE5hbWVGcm9tVVJMKHVybCkge1xyXG4gIGNvbnN0IGxpc3QgPSB1cmwuc3BsaXQoJy8nKTtcclxuXHJcbiAgcmV0dXJuIGxpc3RbbGlzdC5sZW5ndGggLSAxXTtcclxufVxyXG5cclxuZXhwb3J0IHsgZ2V0TmFtZUZyb21VUkwgfTtcclxuIiwgIi8vIFByb2Nlc3MgYXJyYXkgb2YgVVJMUyBhbmQgcmV0dXJuIEZpbGUgb2JqZWN0c1xyXG5cclxuaW1wb3J0IHsgY2xhc3NpZnlVUkwgfSBmcm9tIFwiLi4vdXRpbHMvY2xhc3NpZnlVUkwuanNcIjtcclxuaW1wb3J0IHsgZmV0Y2hGaWxlcyB9IGZyb20gXCIuL3V0aWxzL2ZldGNoRmlsZXMuanNcIjtcclxuaW1wb3J0IHsgRmlsZSB9IGZyb20gXCIuLi9GaWxlL0ZpbGUuanNcIjtcclxuXHJcbmNsYXNzIEZldGNoZXIge1xyXG4gIHN0YXRpYyBhc3luYyBmZXRjaEZpbGVzKFxyXG4gICAgdXJscyxcclxuICAgIHN0YXJ0VVJMUyxcclxuICAgIGZpbmFsVVJMUyxcclxuICAgIHNlcnZlckRpcmVjdG9yeSxcclxuICAgIHN0cmlwRGlyZWN0b3J5LFxyXG4gICAgY29tcGFyaXNvbnNFbmFibGVkXHJcbiAgKSB7XHJcbiAgICB0aGlzLnVybHMgPSB1cmxzO1xyXG5cclxuICAgIHRoaXMuc2VydmVyRGlyZWN0b3J5ID0gc2VydmVyRGlyZWN0b3J5O1xyXG4gICAgdGhpcy5zdHJpcERpcmVjdG9yeSA9IHN0cmlwRGlyZWN0b3J5O1xyXG5cclxuICAgIC8vIGZldGNoIHRoZXNlXHJcbiAgICBjb25zdCB0ZXh0VVJMcyA9IFtdO1xyXG5cclxuICAgIC8vIGRvbid0IGZldGNoIHRoZXNlXHJcbiAgICBjb25zdCBhc3NldFVSTHMgPSBbXTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IHVybCBvZiB0aGlzLnVybHMpIHtcclxuICAgICAgaWYgKGNsYXNzaWZ5VVJMKHVybCkgPT09IFwidGV4dFwiKSB7XHJcbiAgICAgICAgdGV4dFVSTHMucHVzaCh1cmwpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFzc2V0VVJMcy5wdXNoKHVybCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0ZXh0RmlsZXMgPSBhd2FpdCB0aGlzLmZldGNoVGV4dFVSTHModGV4dFVSTHMsIGNvbXBhcmlzb25zRW5hYmxlZCk7XHJcbiAgICBjb25zdCBhc3NldEZpbGVzID0gdGhpcy5wcm9jZXNzQXNzZXRzVVJMcyhhc3NldFVSTHMpO1xyXG5cclxuICAgIHJldHVybiB7IC4uLnRleHRGaWxlcywgLi4uYXNzZXRGaWxlcyB9O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGZldGNoVGV4dFVSTHModXJscywgY29tcGFyaXNvbnNFbmFibGVkKSB7XHJcbiAgICBjb25zdCBzZXJ2ZXJVUkxzID0gdXJscy5tYXAoKHVybCkgPT5cclxuICAgICAgYC8ke3RoaXMuc2VydmVyRGlyZWN0b3J5fS8ke3VybH1gLnJlcGxhY2UoL1xcL1xcLy9nLCBcIi9cIilcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgdGV4dERhdGEgPSBhd2FpdCBmZXRjaEZpbGVzKHNlcnZlclVSTHMsIFwidGV4dFwiLCB0aGlzLnNlcnZlckRpcmVjdG9yeSk7XHJcblxyXG4gICAgY29uc3QgZmlsZURhdGEgPSB7fTtcclxuICAgIGZvciAoY29uc3QgW2luZGV4LCB0ZXh0XSBvZiB0ZXh0RGF0YS5lbnRyaWVzKCkpIHtcclxuICAgICAgZmlsZURhdGFbdXJsc1tpbmRleF0ucmVwbGFjZSh0aGlzLnN0cmlwRGlyZWN0b3J5LCBcIlwiKV0gPSB0ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZpbGVEYXRhUGFpcmVkID0ge307XHJcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhmaWxlRGF0YSkpIHtcclxuICAgICAgaWYgKGtleS5pbmNsdWRlcyhcIi5zdGFydC5qc1wiKSkge1xyXG4gICAgICAgIGZpbGVEYXRhUGFpcmVkW2tleS5yZXBsYWNlKFwiLnN0YXJ0LmpzXCIsIFwiLmpzXCIpXSA9IHtcclxuICAgICAgICAgIHN0YXJ0OiB2YWx1ZSxcclxuICAgICAgICAgIGZpbmFsOiBmaWxlRGF0YVtrZXkucmVwbGFjZShcIi5zdGFydC5qc1wiLCBcIi5maW5hbC5qc1wiKV0sXHJcbiAgICAgICAgfTtcclxuICAgICAgfSBlbHNlIGlmICgha2V5LmluY2x1ZGVzKFwiLmZpbmFsLmpzXCIpKSB7XHJcbiAgICAgICAgZmlsZURhdGFQYWlyZWRba2V5XSA9IHZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzdWx0cyA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBba2V5LCB0ZXh0XSBvZiBPYmplY3QuZW50cmllcyhmaWxlRGF0YVBhaXJlZCkpIHtcclxuICAgICAgY29uc3QgdXJsID0ga2V5LnJlcGxhY2UodGhpcy5zdHJpcERpcmVjdG9yeSwgXCJcIik7IC8vIG1heWJlIG5vdCByZXF1aXJlZD9cclxuICAgICAgcmVzdWx0c1t1cmxdID0gbmV3IEZpbGUoe1xyXG4gICAgICAgIHVybCxcclxuICAgICAgICB0ZXh0LFxyXG4gICAgICAgIHNlcnZlckRpcmVjdG9yeTogdGhpcy5zZXJ2ZXJEaXJlY3RvcnksXHJcbiAgICAgICAgY29tcGFyaXNvbnNFbmFibGVkLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHRzO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHByb2Nlc3NBc3NldHNVUkxzKHVybHMpIHtcclxuICAgIGNvbnN0IHJlc3VsdHMgPSB7fTtcclxuICAgIGZvciAoY29uc3QgdXJsIG9mIHVybHMpIHtcclxuICAgICAgcmVzdWx0c1t1cmwucmVwbGFjZSh0aGlzLnN0cmlwRGlyZWN0b3J5LCBcIlwiKV0gPSBuZXcgRmlsZSh7XHJcbiAgICAgICAgdXJsLFxyXG4gICAgICAgIHNlcnZlckRpcmVjdG9yeTogdGhpcy5zZXJ2ZXJEaXJlY3RvcnksXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBGZXRjaGVyIH07XHJcbiIsICIvLyBwYXRoIGRhdGE6IGh0dHBzOi8vd3d3Lm1hdGVyaWFsdWkuY28vaWNvbi9mbGFnXHJcblxyXG4vLyBmb2xkZXJPcGVuOiAnaWNvbiBmYXIgZmEtZm9sZGVyLW9wZW4gb3Blbi1pY29uJyxcclxuLy8gZm9sZGVyQ2xvc2VkOiAnaWNvbiBmYXIgZmEtZm9sZGVyIGNsb3NlZC1pY29uJywsXHJcbi8vIGdsYjogJ2ljb24gZmFzIGZhLWN1YmUnLFxyXG5cclxuY29uc3QgcGF0aHMgPSB7XHJcbiAgZm9sZGVyT3BlbjpcclxuICAgICdNNTI3LjkgMjI0SDQ4MHYtNDhjMC0yNi41LTIxLjUtNDgtNDgtNDhIMjcybC02NC02NEg0OEMyMS41IDY0IDAgODUuNSAwIDExMnYyODhjMCAyNi41IDIxLjUgNDggNDggNDhoNDAwYzE2LjUgMCAzMS45LTguNSA0MC43LTIyLjZsNzkuOS0xMjhjMjAtMzEuOS0zLTczLjQtNDAuNy03My40ek00OCAxMThjMC0zLjMgMi43LTYgNi02aDEzNC4xbDY0IDY0SDQyNmMzLjMgMCA2IDIuNyA2IDZ2NDJIMTUyYy0xNi44IDAtMzIuNCA4LjgtNDEuMSAyMy4yTDQ4IDM1MS40em00MDAgMjgySDcybDc3LjItMTI4SDUyOHonLFxyXG4gIGZvbGRlckNsb3NlZDpcclxuICAgICdNNDY0IDEyOEgyNzJsLTU0LjYzLTU0LjYzYy02LTYtMTQuMTQtOS4zNy0yMi42My05LjM3SDQ4QzIxLjQ5IDY0IDAgODUuNDkgMCAxMTJ2Mjg4YzAgMjYuNTEgMjEuNDkgNDggNDggNDhoNDE2YzI2LjUxIDAgNDgtMjEuNDkgNDgtNDhWMTc2YzAtMjYuNTEtMjEuNDktNDgtNDgtNDh6bTAgMjcySDQ4VjExMmgxNDAuMTJsNTQuNjMgNTQuNjNjNiA2IDE0LjE0IDkuMzcgMjIuNjMgOS4zN0g0NjR2MjI0eicsXHJcbiAgaHRtbDpcclxuICAgICdNMCAzMmwzNC45IDM5NS44TDE5MS41IDQ4MGwxNTcuNi01Mi4yTDM4NCAzMkgwem0zMDguMiAxMjcuOUgxMjQuNGw0LjEgNDkuNGgxNzUuNmwtMTMuNiAxNDguNC05Ny45IDI3di4zaC0xLjFsLTk4LjctMjcuMy02LTc1LjhoNDcuN0wxMzggMzIwbDUzLjUgMTQuNSA1My43LTE0LjUgNi02Mi4ySDg0LjNMNzEuNSAxMTIuMmgyNDEuMWwtNC40IDQ3Ljd6JyxcclxuICBjc3M6XHJcbiAgICAnTTQ4MCAzMmwtNjQgMzY4LTIyMy4zIDgwTDAgNDAwbDE5LjYtOTQuOGg4MmwtOCA0MC42TDIxMCAzOTAuMmwxMzQuMS00NC40IDE4LjgtOTcuMUgyOS41bDE2LTgyaDMzMy43bDEwLjUtNTIuN0g1Ni4zbDE2LjMtODJINDgweicsXHJcbiAganM6XHJcbiAgICAnTTQwMCAzMkg0OEMyMS41IDMyIDAgNTMuNSAwIDgwdjM1MmMwIDI2LjUgMjEuNSA0OCA0OCA0OGgzNTJjMjYuNSAwIDQ4LTIxLjUgNDgtNDhWODBjMC0yNi41LTIxLjUtNDgtNDgtNDh6TTI0My44IDM4MS40YzAgNDMuNi0yNS42IDYzLjUtNjIuOSA2My41LTMzLjcgMC01My4yLTE3LjQtNjMuMi0zOC41bDM0LjMtMjAuN2M2LjYgMTEuNyAxMi42IDIxLjYgMjcuMSAyMS42IDEzLjggMCAyMi42LTUuNCAyMi42LTI2LjVWMjM3LjdoNDIuMXYxNDMuN3ptOTkuNiA2My41Yy0zOS4xIDAtNjQuNC0xOC42LTc2LjctNDNsMzQuMy0xOS44YzkgMTQuNyAyMC44IDI1LjYgNDEuNSAyNS42IDE3LjQgMCAyOC42LTguNyAyOC42LTIwLjggMC0xNC40LTExLjQtMTkuNS0zMC43LTI4bC0xMC41LTQuNWMtMzAuNC0xMi45LTUwLjUtMjkuMi01MC41LTYzLjUgMC0zMS42IDI0LjEtNTUuNiA2MS42LTU1LjYgMjYuOCAwIDQ2IDkuMyA1OS44IDMzLjdMMzY4IDI5MGMtNy4yLTEyLjktMTUtMTgtMjcuMS0xOC0xMi4zIDAtMjAuMSA3LjgtMjAuMSAxOCAwIDEyLjYgNy44IDE3LjcgMjUuOSAyNS42bDEwLjUgNC41YzM1LjggMTUuMyA1NS45IDMxIDU1LjkgNjYuMiAwIDM3LjgtMjkuOCA1OC42LTY5LjcgNTguNnonLFxyXG4gIGltYWdlOlxyXG4gICAgJ00zNjkuOSA5Ny45TDI4NiAxNEMyNzcgNSAyNjQuOC0uMSAyNTIuMS0uMUg0OEMyMS41IDAgMCAyMS41IDAgNDh2NDE2YzAgMjYuNSAyMS41IDQ4IDQ4IDQ4aDI4OGMyNi41IDAgNDgtMjEuNSA0OC00OFYxMzEuOWMwLTEyLjctNS4xLTI1LTE0LjEtMzR6TTMzMi4xIDEyOEgyNTZWNTEuOWw3Ni4xIDc2LjF6TTQ4IDQ2NFY0OGgxNjB2MTA0YzAgMTMuMyAxMC43IDI0IDI0IDI0aDEwNHYyODhINDh6bTMyLTQ4aDIyNFYyODhsLTIzLjUtMjMuNWMtNC43LTQuNy0xMi4zLTQuNy0xNyAwTDE3NiAzNTJsLTM5LjUtMzkuNWMtNC43LTQuNy0xMi4zLTQuNy0xNyAwTDgwIDM1MnY2NHptNDgtMjQwYy0yNi41IDAtNDggMjEuNS00OCA0OHMyMS41IDQ4IDQ4IDQ4IDQ4LTIxLjUgNDgtNDgtMjEuNS00OC00OC00OHonLFxyXG4gIGN1YmU6XHJcbiAgICAnTTIzOS4xIDYuM2wtMjA4IDc4Yy0xOC43IDctMzEuMSAyNS0zMS4xIDQ1djIyNS4xYzAgMTguMiAxMC4zIDM0LjggMjYuNSA0Mi45bDIwOCAxMDRjMTMuNSA2LjggMjkuNCA2LjggNDIuOSAwbDIwOC0xMDRjMTYuMy04LjEgMjYuNS0yNC44IDI2LjUtNDIuOVYxMjkuM2MwLTIwLTEyLjQtMzcuOS0zMS4xLTQ0LjlsLTIwOC03OEMyNjIgMi4yIDI1MCAyLjIgMjM5LjEgNi4zek0yNTYgNjguNGwxOTIgNzJ2MS4xbC0xOTIgNzgtMTkyLTc4di0xLjFsMTkyLTcyem0zMiAzNTZWMjc1LjVsMTYwLTY1djEzMy45bC0xNjAgODB6JyxcclxufTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUljb24obmFtZSwgY2xhc3Nlcykge1xyXG4gIGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcclxuICAgICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsXHJcbiAgICAnc3ZnJyxcclxuICApO1xyXG5cclxuICBzdmcuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xyXG5cclxuICBpZiAoY2xhc3Nlcykgc3ZnLmNsYXNzTGlzdC5hZGQoLi4uY2xhc3Nlcy5zcGxpdCgnICcpKTtcclxuXHJcbiAgc3ZnLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xyXG4gIHN2Zy5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCAnMCAwIDUxMiA1MTInKTtcclxuICBzdmcuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2ltZycpO1xyXG4gIHN2Zy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgJzFlbScpO1xyXG4gIHN2Zy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsICcxZW0nKTtcclxuXHJcbiAgY29uc3QgcGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcclxuICAgICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsXHJcbiAgICAncGF0aCcsXHJcbiAgKTtcclxuICBwYXRoLnNldEF0dHJpYnV0ZSgnZmlsbCcsICdjdXJyZW50Q29sb3InKTtcclxuICBwYXRoLnNldEF0dHJpYnV0ZSgnZCcsIHBhdGhzW25hbWVdKTtcclxuXHJcbiAgc3ZnLmFwcGVuZChwYXRoKTtcclxuXHJcbiAgcmV0dXJuIHN2ZztcclxufVxyXG5cclxuZXhwb3J0IHsgY3JlYXRlSWNvbiB9O1xyXG4iLCAiLy8gaHR0cHM6Ly9naXRodWIuY29tL2F0bGVtYWdudXNzZW4vZXM2LXRyZWUjcmVhZG1lXG5cbmltcG9ydCB7IGNyZWF0ZUljb24gfSBmcm9tICcuLi8uLi91dGlscy9jcmVhdGVJY29uLmpzJztcblxuLy8gbm90ZTogXCJub2RlXCIgcmVmZXJzIHRvIGN1c3RvbSBkYXRhIG9iamVjdCwgXCJlbGVtXCIgcmVmZXJzIHRvIEhUTUwgZWxlbWVudFxuY2xhc3MgRXpUcmVlIHtcbiAgY29uc3RydWN0b3IocGFyZW50SWQsIGNvbmZpZywgZGF0YSkge1xuICAgIHRoaXMuc2VsZWN0ZWRJZCA9IG51bGw7XG4gICAgdGhpcy5wYXJlbnRJZCA9IHBhcmVudElkO1xuICAgIHRoaXMucGFyZW50RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYXJlbnRJZCk7XG4gICAgaWYgKCF0aGlzLnBhcmVudEVsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IGZpbmQgZWxlbWVudCB3aXRoIGlkICR7cGFyZW50SWR9YCk7XG4gICAgfVxuICAgIHRoaXMucGFyZW50RWwuY2xhc3NMaXN0LmFkZCgnZXM2LXRyZWUnKTtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIHRoaXMuaGFuZGxlSW50ZXJuYWxTZWxlY3QoKTtcbiAgICB0aGlzLmFwcGVuZCh0aGlzLnBhcmVudEVsLCB0aGlzLmRhdGEpO1xuICB9XG5cbiAgYXBwZW5kKGVsZW0sIGRhdGEpIHtcbiAgICBkYXRhLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgIGNvbnN0IGRldGFpbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkZXRhaWxzJyk7XG4gICAgICBpZiAobm9kZS5leHBhbmRlZCkge1xuICAgICAgICBkZXRhaWxzLm9wZW4gPSB0cnVlO1xuICAgICAgfVxuICAgICAgZWxlbS5hcHBlbmRDaGlsZChkZXRhaWxzKTtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdW1tYXJ5Jyk7XG4gICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgaWYgKG5vZGUuaWQpIHtcbiAgICAgICAgc3VtbWFyeS5kYXRhc2V0LmlkID0gbm9kZS5pZDtcbiAgICAgICAgc3Bhbi5kYXRhc2V0LmlkID0gbm9kZS5pZDtcbiAgICAgIH1cbiAgICAgIGlmIChub2RlLmhyZWYpIHtcbiAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgYS5pbm5lclRleHQgPSBub2RlLm5hbWU7XG4gICAgICAgIGEuZGF0YXNldC5pZCA9IG5vZGUuaWQ7XG4gICAgICAgIGEuc2V0QXR0cmlidXRlKCdocmVmJywgbm9kZS5ocmVmKTtcbiAgICAgICAgc3Bhbi5hcHBlbmRDaGlsZChhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNwYW4uaW5uZXJUZXh0ID0gbm9kZS5uYW1lO1xuICAgICAgfVxuICAgICAgc3Bhbi5jbGFzc0xpc3QuYWRkKCdub2RlLXRleHQnKTtcbiAgICAgIHN1bW1hcnkuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgICB0aGlzLmhhbmRsZVR5cGUobm9kZSwgc3Bhbik7XG4gICAgICBkZXRhaWxzLmFwcGVuZENoaWxkKHN1bW1hcnkpO1xuXG4gICAgICBpZiAoXG4gICAgICAgIG5vZGUuY2hpbGRyZW4gJiZcbiAgICAgICAgQXJyYXkuaXNBcnJheShub2RlLmNoaWxkcmVuKSAmJlxuICAgICAgICBub2RlLmNoaWxkcmVuLmxlbmd0aCA+IDBcbiAgICAgICkge1xuICAgICAgICB0aGlzLmFwcGVuZChkZXRhaWxzLCBub2RlLmZvbGRlcnMpO1xuICAgICAgICB0aGlzLmFwcGVuZChkZXRhaWxzLCBub2RlLmZpbGVzKTtcbiAgICAgICAgZGV0YWlscy5jbGFzc0xpc3QuYWRkKCdmb2xkZXInKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRldGFpbHMuY2xhc3NMaXN0LmFkZCgnZmlsZScpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaGFuZGxlVHlwZShub2RlLCBlbGVtKSB7XG4gICAgaWYgKG5vZGUudHlwZSA9PT0gJ2ZvbGRlcicpIGVsZW0uY2xhc3NMaXN0LmFkZCgnZm9sZGVyJyk7XG4gICAgZWxzZSBlbGVtLmNsYXNzTGlzdC5hZGQoJ2ZpbGUnKTtcblxuICAgIGlmIChub2RlLnR5cGUgJiYgdGhpcy5jb25maWcuY2xhc3Nlcykge1xuICAgICAgaWYgKHRoaXMuY29uZmlnLmNsYXNzZXNbbm9kZS50eXBlXSkge1xuICAgICAgICBjb25zdCBjbGFzc2VzID0gdGhpcy5jb25maWcuY2xhc3Nlc1tub2RlLnR5cGVdLnNwbGl0KCcgJyk7XG4gICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZCguLi5jbGFzc2VzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobm9kZS50eXBlICYmIHRoaXMuY29uZmlnLmljb25zKSB7XG4gICAgICBpZiAobm9kZS50eXBlID09PSAnZm9sZGVyJykge1xuICAgICAgICBjb25zdCBvcGVuSWNvbiA9IGNyZWF0ZUljb24oJ2ZvbGRlck9wZW4nLCAnb3Blbi1pY29uJyk7XG4gICAgICAgIGVsZW0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUob3Blbkljb24sIGVsZW0pO1xuXG4gICAgICAgIGNvbnN0IGNsb3NlZEljb24gPSBjcmVhdGVJY29uKCdmb2xkZXJDbG9zZWQnLCAnY2xvc2VkLWljb24nKTtcbiAgICAgICAgZWxlbS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjbG9zZWRJY29uLCBlbGVtKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5jb25maWcuaWNvbnNbbm9kZS50eXBlXSkge1xuICAgICAgICBjb25zdCBpY29uID0gY3JlYXRlSWNvbih0aGlzLmNvbmZpZy5pY29uc1tub2RlLnR5cGVdLmljb24pO1xuICAgICAgICBlbGVtLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGljb24sIGVsZW0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG9uU2VsZWN0KGNhbGxiYWNrLCBkb250UHJldmVudERlZmF1bHQgPSBmYWxzZSkge1xuICAgIHRoaXMub25TZWxlY3RDYWxsYmFjayA9IChjZXYpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgWydTUEFOJywgJ0EnLCAnU1VNTUFSWSddLmluY2x1ZGVzKGNldi50YXJnZXQubm9kZU5hbWUpICYmXG4gICAgICAgIGNldi50YXJnZXQuZGF0YXNldC5pZFxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IGlkID0gY2V2LnRhcmdldC5kYXRhc2V0LmlkO1xuICAgICAgICBjb25zdCBub2RlID0gdGhpcy5maW5kTm9kZShpZCk7XG4gICAgICAgIHRoaXMuaGFuZGxlT3Blbihub2RlKTtcbiAgICAgICAgaWYgKCFkb250UHJldmVudERlZmF1bHQpIHtcbiAgICAgICAgICBjZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUgJiYgbm9kZS5pZCkge1xuICAgICAgICAgIGNhbGxiYWNrKG5vZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhbGxiYWNrKHsgaWQgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjZXYudGFyZ2V0Lm5vZGVOYW1lID09PSAnREVUQUlMUycpIHtcbiAgICAgICAgY2V2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMucGFyZW50RWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uU2VsZWN0Q2FsbGJhY2spO1xuICB9XG5cbiAgZGlzcG9zZSgpIHtcbiAgICB0aGlzLnBhcmVudEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vblNlbGVjdENhbGxiYWNrKTtcbiAgICB0aGlzLnBhcmVudEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAnY2xpY2snLFxuICAgICAgdGhpcy5vbkludGVybmFsU2VsZWN0Q2FsbGJhY2ssXG4gICAgKTtcblxuICAgIHRoaXMucGFyZW50RWwudGV4dENvbnRlbnQgPSAnJztcbiAgfVxuXG4gIHNlbGVjdChpZCkge1xuICAgIHRoaXMuaGFuZGxlU2VsZWN0KGlkKTtcbiAgICB0aGlzLm9wZW5Db250YWluaW5nRm9sZGVyKGlkKTtcbiAgfVxuXG4gIGdldEVsZW1CeURhdGFJRChpZCkge1xuICAgIHJldHVybiBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaWRdJyldLmZpbHRlcihcbiAgICAgIChlbGVtKSA9PiB7XG4gICAgICAgIHJldHVybiBlbGVtLmRhdGFzZXQuaWQgPT09IGlkICYmIGVsZW0ubm9kZU5hbWUgPT09ICdTVU1NQVJZJztcbiAgICAgIH0sXG4gICAgKVswXTtcbiAgfVxuXG4gIGdldENvbnRhaW5pbmdGb2xkZXIoaWQpIHtcbiAgICBsZXQgbm9kZSA9IHRoaXMuZ2V0RWxlbUJ5RGF0YUlEKGlkKTtcbiAgICB3aGlsZSAobm9kZS5wYXJlbnROb2RlLm5vZGVOYW1lID09PSAnREVUQUlMUycpIHtcbiAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICBvcGVuQ29udGFpbmluZ0ZvbGRlcihpZCkge1xuICAgIHRoaXMuZ2V0Q29udGFpbmluZ0ZvbGRlcihpZCkuc2V0QXR0cmlidXRlKCdvcGVuJywgJycpO1xuICB9XG5cbiAgaGFuZGxlT3Blbihub2RlKSB7XG4gICAgaWYgKG5vZGUuaWQgJiYgbm9kZS5jaGlsZHJlbiAmJiBBcnJheS5pc0FycmF5KG5vZGUuY2hpbGRyZW4pKSB7XG4gICAgICB0aGlzLnRvZ2dsZU9wZW4obm9kZS5pZCk7XG4gICAgfVxuICB9XG5cbiAgdG9nZ2xlT3BlbihpZCkge1xuICAgIGNvbnN0IGRldGFpbHMgPSB0aGlzLmdldEVsZW1CeURhdGFJRChpZCkucGFyZW50RWxlbWVudDtcbiAgICBpZiAoZGV0YWlscykgZGV0YWlscy5vcGVuID0gIWRldGFpbHMub3BlbjtcbiAgfVxuXG4gIGhhbmRsZUludGVybmFsU2VsZWN0KCkge1xuICAgIHRoaXMub25JbnRlcm5hbFNlbGVjdENhbGxiYWNrID0gKGNldikgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBbJ1NQQU4nLCAnQScsICdTVU1NQVJZJ10uaW5jbHVkZXMoY2V2LnRhcmdldC5ub2RlTmFtZSkgJiZcbiAgICAgICAgY2V2LnRhcmdldC5pZFxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IGlkID0gY2V2LnRhcmdldC5pZDtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMuZmluZE5vZGUoaWQpO1xuICAgICAgICBpZiAobm9kZSAmJiBub2RlLmlkKSB7XG4gICAgICAgICAgdGhpcy5oYW5kbGVTZWxlY3Qobm9kZS5pZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5oYW5kbGVTZWxlY3Qoe1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMucGFyZW50RWwuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICdjbGljaycsXG4gICAgICB0aGlzLm9uSW50ZXJuYWxTZWxlY3RDYWxsYmFjayxcbiAgICApO1xuICB9XG5cbiAgaGFuZGxlU2VsZWN0KGlkKSB7XG4gICAgaWYgKCFpZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5vZGUgPSB0aGlzLmZpbmROb2RlKGlkKTtcbiAgICBpZiAobm9kZS5jaGlsZHJlbikge1xuICAgICAgdGhpcy50b2dnbGVPcGVuKGlkKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zZWxlY3RlZElkKSB7XG4gICAgICBpZiAodGhpcy5zZWxlY3RlZElkID09PSBpZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRFbCA9IHRoaXMucGFyZW50RWwucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYHNwYW4jJHt0aGlzLnNlbGVjdGVkSWR9YCxcbiAgICAgICk7XG4gICAgICBpZiAoY3VycmVudFNlbGVjdGVkRWwpIHtcbiAgICAgICAgdGhpcy51bnNldFNlbGVjdGVkKGN1cnJlbnRTZWxlY3RlZEVsKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5zZWxlY3RlZElkID0gaWQ7XG4gICAgY29uc3Qgc2VsZWN0ZWRFbCA9IHRoaXMucGFyZW50RWwucXVlcnlTZWxlY3Rvcihgc3BhbiMke2lkfWApO1xuICAgIHRoaXMuc2V0U2VsZWN0ZWQoc2VsZWN0ZWRFbCk7XG4gIH1cblxuICBzZXRTZWxlY3RlZChlbGVtKSB7XG4gICAgaWYgKGVsZW0pIHtcbiAgICAgIGVsZW0ucGFyZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3NlbGVjdGVkJywgJ3RydWUnKTtcbiAgICB9XG4gIH1cblxuICB1bnNldFNlbGVjdGVkKGVsZW0pIHtcbiAgICBlbGVtLnBhcmVudEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdzZWxlY3RlZCcpO1xuICB9XG5cbiAgZmluZE5vZGUoaWQpIHtcbiAgICBjb25zdCBpdGVtUGF0aCA9IHRoaXMuZmluZFBhdGgoaWQsIHtcbiAgICAgIGNoaWxkcmVuOiB0aGlzLmRhdGEsXG4gICAgfSk7XG5cbiAgICBpZiAoIWl0ZW1QYXRoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICghQXJyYXkuaXNBcnJheShpdGVtUGF0aCkgfHwgaXRlbVBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgbGFzdCA9IGl0ZW1QYXRoLnBvcCgpO1xuICAgIHJldHVybiBsYXN0O1xuICB9XG5cbiAgc2VsZWN0Tm9kZUJ5UGF0aChwYXRoKSB7XG4gICAgLy8gTm90ZTogdGhpcyBpcyBhIHNsaWdodCBoYWNrIHNpbmNlIHRoZSBub2RlLnNyYyBhbmQgbm9kZS5mb2xkZXIgYXR0cmlidXRlc1xuICAgIC8vIGFyZSBhIGJpdCBtZXNzZWQgdXAuIFNob3VsZCBub3QgYmUgbmVjZXNzYXJ5IHRvIGNoZWNrIHRoZSB0eXBlXG4gICAgbGV0IHR5cGUgPSBwYXRoLnNwbGl0KCcuJykucG9wKCk7XG4gICAgaWYgKHR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdHlwZSA9ICdmb2xkZXInO1xuICAgIH1cbiAgICBsZXQgcmVzdWx0ID0gbnVsbDtcblxuICAgIGZ1bmN0aW9uIHRyYXZlcnNlKHBhcmVudCkge1xuICAgICAgaWYgKHBhcmVudC5zcmMgPT09IHBhdGggJiYgcGFyZW50LnR5cGUgPT09IHR5cGUpIHtcbiAgICAgICAgcmVzdWx0ID0gcGFyZW50LmlkO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgcGFyZW50LmNoaWxkcmVuICYmXG4gICAgICAgIEFycmF5LmlzQXJyYXkocGFyZW50LmNoaWxkcmVuKSAmJlxuICAgICAgICBwYXJlbnQuY2hpbGRyZW4ubGVuZ3RoID4gMFxuICAgICAgKSB7XG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBwYXJlbnQuY2hpbGRyZW4ubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgY29uc3QgY2hpbGQgPSBwYXJlbnQuY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICAgIHRyYXZlcnNlKGNoaWxkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRyYXZlcnNlKHRoaXMuZGF0YVswXSk7XG5cbiAgICBpZiAocmVzdWx0KSB0aGlzLnNlbGVjdChyZXN1bHQpO1xuICB9XG5cbiAgZmluZFBhdGgoaWQsIHJvb3QpIHtcbiAgICByb290ID0gcm9vdCB8fCB7XG4gICAgICBjaGlsZHJlbjogdGhpcy5kYXRhLFxuICAgIH07XG4gICAgY29uc3QgZm91bmQgPSBbXTtcblxuICAgIGlmIChcbiAgICAgIHJvb3QuY2hpbGRyZW4gJiZcbiAgICAgIEFycmF5LmlzQXJyYXkocm9vdC5jaGlsZHJlbikgJiZcbiAgICAgIHJvb3QuY2hpbGRyZW4ubGVuZ3RoID4gMFxuICAgICkge1xuICAgICAgY29uc3QgY2hpbGRyZW4gPSByb290LmNoaWxkcmVuO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07XG5cbiAgICAgICAgaWYgKGNoaWxkLmlkID09PSBpZCkge1xuICAgICAgICAgIGZvdW5kLnB1c2goY2hpbGQpO1xuICAgICAgICAgIHJldHVybiBmb3VuZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgICBjb25zdCBncmFuZENoaWxkID0gdGhpcy5maW5kUGF0aChpZCwgY2hpbGQpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBncmFuZENoaWxkICYmXG4gICAgICAgICAgQXJyYXkuaXNBcnJheShncmFuZENoaWxkKSAmJlxuICAgICAgICAgIGdyYW5kQ2hpbGQubGVuZ3RoID4gMFxuICAgICAgICApIHtcbiAgICAgICAgICBmb3VuZC5wdXNoKGNoaWxkKTtcbiAgICAgICAgICBmb3VuZC5wdXNoKC4uLmdyYW5kQ2hpbGQpO1xuICAgICAgICAgIHJldHVybiBmb3VuZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgeyBFelRyZWUgfTtcbiIsICJmdW5jdGlvbiBidWlsZERpcmVjdG9yaWVzKGZpbGVzLCBmaWxlVHlwZXMsIGNsb3NlZEZvbGRlcnMpIHtcclxuICBjb25zdCBwYXRocyA9IE9iamVjdC5rZXlzKGZpbGVzKS5zb3J0KCk7XHJcblxyXG4gIGNvbnN0IGRhdGEgPSB7XHJcbiAgICBpZDogJ3Jvb3QnLFxyXG4gICAgbmFtZTogJ0ZpbGVzJyxcclxuICAgIGZvbGRlcjogJycsXHJcbiAgICB0eXBlOiAnZm9sZGVyJyxcclxuICAgIGV4cGFuZGVkOiB0cnVlLFxyXG4gICAgY2hpbGRyZW46IFtdLFxyXG4gICAgZmlsZXM6IFtdLFxyXG4gICAgZm9sZGVyczogW10sXHJcbiAgfTtcclxuXHJcbiAgbGV0IGN1cnJlbnRJRCA9IDA7XHJcblxyXG4gIHBhdGhzLmZvckVhY2goKHBhdGgpID0+IHtcclxuICAgIHBhdGguc3BsaXQoJy8nKS5yZWR1Y2UoKGRpciwgc3ViKSA9PiB7XHJcbiAgICAgIGxldCBjaGlsZCA9IGRpci5jaGlsZHJlbi5maW5kKChlbCkgPT4gZWwubmFtZSA9PT0gc3ViKTtcclxuXHJcbiAgICAgIGlmIChjaGlsZCkge1xyXG4gICAgICAgIHJldHVybiBjaGlsZDtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZXhwYW5kZWQgPSAhY2xvc2VkRm9sZGVycy5pbmNsdWRlcyhzdWIpO1xyXG5cclxuICAgICAgY2hpbGQgPSB7XHJcbiAgICAgICAgaWQ6IGBpdGVtXyR7Y3VycmVudElEKyt9YCxcclxuICAgICAgICBuYW1lOiBzdWIsXHJcbiAgICAgICAgZXhwYW5kZWQsXHJcbiAgICAgICAgY2hpbGRyZW46IFtdLFxyXG4gICAgICAgIGZpbGVzOiBbXSxcclxuICAgICAgICBmb2xkZXJzOiBbXSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHR5cGUgPSBmaWxlVHlwZXMuZmlsdGVyKChleHQpID0+IHN1Yi5pbmNsdWRlcyhleHQpKVswXTtcclxuXHJcbiAgICAgIGlmICh0eXBlKSB7XHJcbiAgICAgICAgY2hpbGQudHlwZSA9IHR5cGUucmVwbGFjZSgnLicsICcnKTtcclxuICAgICAgICBsZXQgZm9sZGVyID0gcGF0aC5zcGxpdCgnLycpO1xyXG4gICAgICAgIGZvbGRlci5wb3AoKTtcclxuICAgICAgICBjaGlsZC5mb2xkZXIgPSBgJHtmb2xkZXIuam9pbignLycpfWA7XHJcbiAgICAgICAgZGlyLmZpbGVzLnB1c2goY2hpbGQpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNoaWxkLnR5cGUgPSAnZm9sZGVyJztcclxuICAgICAgICBjaGlsZC5mb2xkZXIgPSBgJHtwYXRoLnNwbGl0KHN1YilbMF19JHtzdWJ9YDtcclxuICAgICAgICBkaXIuZm9sZGVycy5wdXNoKGNoaWxkKTtcclxuICAgICAgfVxyXG4gICAgICBjaGlsZC5maWxlID0gZmlsZXNbcGF0aF07XHJcbiAgICAgIGNoaWxkLnNyYyA9IHBhdGg7XHJcbiAgICAgIGRpci5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcclxuXHJcbiAgICAgIHJldHVybiBjaGlsZDtcclxuICAgIH0sIGRhdGEpO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gZGF0YTtcclxufVxyXG5cclxuZXhwb3J0IHsgYnVpbGREaXJlY3RvcmllcyB9O1xyXG4iLCAiaW1wb3J0IHsgRXpUcmVlIH0gZnJvbSAnLi92ZW5kb3IvY3VzdG9tL2VzNnRyZWUuanMnO1xyXG5cclxuaW1wb3J0IHsgYnVpbGREaXJlY3RvcmllcyB9IGZyb20gJy4vdXRpbHMvYnVpbGREaXJlY3Rvcmllcy5qcyc7XHJcblxyXG5jb25zdCBjb25maWcgPSB7XHJcbiAgaWNvbnM6IHtcclxuICAgIGZvbGRlck9wZW46IHtcclxuICAgICAgaWNvbjogJ2ZvbGRlck9wZW4nLFxyXG4gICAgICBjbGFzc2VzOiAnb3Blbi1pY29uJyxcclxuICAgIH0sXHJcbiAgICBmb2xkZXJDbG9zZWQ6IHtcclxuICAgICAgaWNvbjogJ2ZvbGRlckNsb3NlZCcsXHJcbiAgICAgIGNsYXNzZXM6ICdjbG9zZWQtaWNvbicsXHJcbiAgICB9LFxyXG4gICAgaHRtbDoge1xyXG4gICAgICBpY29uOiAnaHRtbCcsXHJcbiAgICB9LFxyXG4gICAgY3NzOiB7XHJcbiAgICAgIGljb246ICdjc3MnLFxyXG4gICAgfSxcclxuICAgIGpzOiB7XHJcbiAgICAgIGljb246ICdqcycsXHJcbiAgICB9LFxyXG4gICAganBnOiB7XHJcbiAgICAgIGljb246ICdpbWFnZScsXHJcbiAgICB9LFxyXG4gICAgcG5nOiB7XHJcbiAgICAgIGljb246ICdpbWFnZScsXHJcbiAgICB9LFxyXG4gICAgZ2xiOiB7XHJcbiAgICAgIGljb246ICdjdWJlJyxcclxuICAgIH0sXHJcbiAgfSxcclxufTtcclxuXHJcbmZ1bmN0aW9uIGJ1aWxkRmlsZVRyZWUoZmlsZXMsIGZpbGVUeXBlcywgY2xvc2VkRm9sZGVycykge1xyXG4gIGNvbnN0IGRpcmVjdG9yaWVzID0gYnVpbGREaXJlY3RvcmllcyhcclxuICAgIGZpbGVzLFxyXG4gICAgZmlsZVR5cGVzLFxyXG4gICAgY2xvc2VkRm9sZGVycyxcclxuICApO1xyXG5cclxuICByZXR1cm4gbmV3IEV6VHJlZSgnZmlsZXRyZWUnLCBjb25maWcsIFtkaXJlY3Rvcmllc10pO1xyXG59XHJcblxyXG5leHBvcnQgeyBidWlsZEZpbGVUcmVlIH07XHJcbiIsICJmdW5jdGlvbiB2YWxpZGF0ZUZpbGVOYW1lKG5hbWUpIHtcclxuICBjb25zdCB2YWxpZEV4dGVuc2lvbnMgPSBbJ2pzJywgJ2NzcycsICdodG1sJ107XHJcblxyXG4gIGlmICghbmFtZS5pbmNsdWRlcygnLicpKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAvLyByZXR1cm4gdHJ1ZTsgLy8gcmV0dXJuIHRydWUgdG8gZW5hYmxlIGVtcHR5IGZvbGRlcnMgKGJ1Z2d5KVxyXG4gIH0gZWxzZSBpZiAodmFsaWRFeHRlbnNpb25zLmluY2x1ZGVzKG5hbWUuc3BsaXQoJy4nKS5wb3AoKSkpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmV4cG9ydCB7IHZhbGlkYXRlRmlsZU5hbWUgfTtcclxuIiwgImltcG9ydCB7IHZhbGlkYXRlRmlsZU5hbWUgfSBmcm9tICcuL3ZhbGlkYXRlRmlsZU5hbWUuanMnO1xyXG5cclxuZnVuY3Rpb24gc2FuaXRpc2VGaWxlTmFtZShuYW1lKSB7XHJcbiAgY29uc3Qgc2FuaXRpc2VkTmFtZSA9IG5hbWVcclxuICAgIC5yZXBsYWNlKC9bXmEtejAtOV8uXFwvXS9naSwgJycpXHJcbiAgICAucmVwbGFjZSgvXFwvJC8sICcnKTtcclxuXHJcbiAgaWYgKCF2YWxpZGF0ZUZpbGVOYW1lKHNhbml0aXNlZE5hbWUpKSB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbiAgcmV0dXJuIHNhbml0aXNlZE5hbWU7XHJcbn1cclxuXHJcbmV4cG9ydCB7IHNhbml0aXNlRmlsZU5hbWUgfTtcclxuIiwgImltcG9ydCB7IGJ1aWxkRmlsZVRyZWUgfSBmcm9tICcuL2J1aWxkRmlsZVRyZWUuanMnO1xyXG5pbXBvcnQgeyBGaWxlIH0gZnJvbSAnLi4vRmlsZS9GaWxlLmpzJztcclxuaW1wb3J0IHsgc2FuaXRpc2VGaWxlTmFtZSB9IGZyb20gJy4vdXRpbHMvc2FuaXRpc2VGaWxlTmFtZS5qcyc7XHJcblxyXG5jbGFzcyBGaWxlVHJlZSB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBmaWxlcyxcclxuICAgIGZpbGVUeXBlcyxcclxuICAgIGNsb3NlZEZvbGRlcnMgPSBbXSxcclxuICAgIGVkaXRvcixcclxuICAgIGltYWdlUHJldmlldyxcclxuICAgIGNvbXBhcmlzb25zRW5hYmxlZCxcclxuICApIHtcclxuICAgIHRoaXMuZmlsZXMgPSBmaWxlcztcclxuICAgIHRoaXMuZmlsZVR5cGVzID0gZmlsZVR5cGVzO1xyXG4gICAgdGhpcy5jbG9zZWRGb2xkZXJzID0gY2xvc2VkRm9sZGVycztcclxuICAgIHRoaXMuZWRpdG9yID0gZWRpdG9yO1xyXG4gICAgdGhpcy5pbWFnZVByZXZpZXcgPSBpbWFnZVByZXZpZXc7XHJcbiAgICB0aGlzLmN1cnJlbnRGb2xkZXIgPSAnJztcclxuICAgIHRoaXMuY3VycmVudEZpbGUgPSBudWxsO1xyXG4gICAgdGhpcy5jb21wYXJpc29uc0VuYWJsZWQgPSBjb21wYXJpc29uc0VuYWJsZWQ7XHJcblxyXG4gICAgdGhpcy5pbml0KCk7XHJcblxyXG4gICAgdGhpcy5zZXR1cENyZWF0ZUZpbGVCdXR0b24oKTtcclxuICAgIHRoaXMuc2V0dXBEZWxldGVGaWxlQnV0dG9uKCk7XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG4gICAgdGhpcy50cmVlLmRpc3Bvc2UoKTtcclxuICB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnRyZWUgPSB0aGlzLmJ1aWxkVHJlZSgpO1xyXG4gICAgdGhpcy5zZXR1cE9uU2VsZWN0KCk7XHJcbiAgfVxyXG5cclxuICBidWlsZFRyZWUoKSB7XHJcbiAgICByZXR1cm4gYnVpbGRGaWxlVHJlZShcclxuICAgICAgdGhpcy5maWxlcyxcclxuICAgICAgdGhpcy5maWxlVHlwZXMsXHJcbiAgICAgIHRoaXMuY2xvc2VkRm9sZGVycyxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudENhbGxiYWNrKGV2ZW50VHlwZSwgY2FsbGJhY2spIHtcclxuICAgIHRoaXMudHJlZS5vbihldmVudFR5cGUsIGNhbGxiYWNrKTtcclxuICB9XHJcblxyXG4gIHNldFNlbGVjdGVkRmlsZShmaWxlKSB7XHJcbiAgICB0aGlzLm9uU2VsZWN0RmlsZShmaWxlKTtcclxuICAgIHRoaXMuY3VycmVudEZvbGRlciA9IGZpbGUuZm9sZGVyO1xyXG5cclxuICAgIHRoaXMudHJlZS5zZWxlY3ROb2RlQnlQYXRoKGZpbGUudXJsKTtcclxuICB9XHJcblxyXG4gIHNlbGVjdEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5jdXJyZW50Rm9sZGVyID0gaXRlbS5mb2xkZXI7XHJcbiAgICBpZiAoaXRlbS5maWxlKSB7XHJcbiAgICAgIHRoaXMub25TZWxlY3RGaWxlKGl0ZW0uZmlsZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmN1cnJlbnRGaWxlID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uU2VsZWN0RmlsZShmaWxlKSB7XHJcbiAgICBzd2l0Y2ggKGZpbGUudHlwZSkge1xyXG4gICAgICBjYXNlICdqcyc6XHJcbiAgICAgIGNhc2UgJ2h0bWwnOlxyXG4gICAgICBjYXNlICdjc3MnOlxyXG4gICAgICAgIHRoaXMub25TZWxlY3RUZXh0RmlsZShmaWxlKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAncG5nJzpcclxuICAgICAgY2FzZSAnanBnJzpcclxuICAgICAgICB0aGlzLm9uU2VsZWN0SW1hZ2UoZmlsZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2dsYic6XHJcbiAgICAgICAgdGhpcy5vblNlbGVjdE1vZGVsKGZpbGUpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIC8vIG90aGVyIGZpbGUgdHlwZXM6IGRvIG5vdGhpbmcgZm9yIG5vd1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jdXJyZW50RmlsZSA9IGZpbGU7XHJcbiAgICB0aGlzLnNldENvbnRyb2xzU3RhdGUoZmlsZSk7XHJcbiAgfVxyXG5cclxuICBvblNlbGVjdE1vZGVsKGZpbGUpIHtcclxuICAgIC8vIFRPRE9cclxuICB9XHJcblxyXG4gIG9uU2VsZWN0SW1hZ2UoZmlsZSkge1xyXG4gICAgdGhpcy5lZGl0b3IuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3Nob3ctaW1hZ2UnKTtcclxuICAgIHRoaXMuaW1hZ2VQcmV2aWV3LnNyYyA9IGZpbGUuc2VydmVyVVJMO1xyXG4gIH1cclxuXHJcbiAgb25TZWxlY3RUZXh0RmlsZShmaWxlKSB7XHJcbiAgICAvLyBpZiAoZmlsZS5kZWxldGFibGUpIHt9XHJcbiAgICB0aGlzLmVkaXRvci5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdy1pbWFnZScpO1xyXG4gICAgdGhpcy5lZGl0b3Iuc2V0QWN0aXZlRG9jdW1lbnQoZmlsZSk7XHJcbiAgfVxyXG5cclxuICBzZXR1cE9uU2VsZWN0KCkge1xyXG4gICAgdGhpcy50cmVlLm9uU2VsZWN0KHRoaXMuc2VsZWN0SXRlbS5iaW5kKHRoaXMpKTtcclxuICB9XHJcblxyXG4gIHNldENvbnRyb2xzU3RhdGUoZmlsZSkge1xyXG4gICAgaWYgKGZpbGUgJiYgZmlsZS5kZWxldGFibGUgJiYgIShmaWxlLnR5cGUgPT09ICdmb2xkZXInKSkge1xyXG4gICAgICB0aGlzLmRlbGV0ZUZpbGVCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZGVsZXRlRmlsZUJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjcmVhdGVGaWxlKCkge1xyXG4gICAgY29uc3QgZGVmYXVsdFRleHQgPVxyXG4gICAgICB0aGlzLmN1cnJlbnRGb2xkZXIgPT09ICdzdHlsZXMnID8gJ2ZpbGUuY3NzJyA6ICdmaWxlLmpzJztcclxuXHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vamFubWFya3VzbGFuZ2VyL2F0dGVudGlvbi5qcy9cclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tYWtldXNhYnJldy9ib290Ym94XHJcbiAgICBjb25zdCBuYW1lID0gcHJvbXB0KFxyXG4gICAgICAnRW50ZXIgYSBmaWxlIG5hbWUgd2l0aCBleHRlbnNpb24gLmpzLCAuaHRtbCwgb3IgLmNzcy4gXFxuSW5jbHVkZSBzbGFzaGVzIChmb2xkZXIvZmlsZS5qcykgdG8gY3JlYXRlIGZvbGRlcnMuJyxcclxuICAgICAgZGVmYXVsdFRleHQsXHJcbiAgICApO1xyXG4gICAgaWYgKCFuYW1lKSByZXR1cm47XHJcblxyXG4gICAgY29uc3Qgc2FuaXRpc2VkTmFtZSA9IHNhbml0aXNlRmlsZU5hbWUobmFtZSk7XHJcblxyXG4gICAgaWYgKCFzYW5pdGlzZWROYW1lKSB7XHJcbiAgICAgIGFsZXJ0KCdJbnZhbGlkIGZpbGUgbmFtZSEnKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVybCA9IHRoaXMuY3VycmVudEZvbGRlclxyXG4gICAgICA/IGAke3RoaXMuY3VycmVudEZvbGRlcn0vJHtzYW5pdGlzZWROYW1lfWBcclxuICAgICAgOiBuYW1lO1xyXG5cclxuICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgIHVybCxcclxuICAgICAgdGV4dDogJycsXHJcbiAgICAgIGRlbGV0YWJsZTogdHJ1ZSxcclxuICAgIH07XHJcblxyXG4gICAgZGF0YS50eXBlID0gbmFtZS5pbmNsdWRlcygnLicpID8gbmFtZS5zcGxpdCgnLicpLnBvcCgpIDogJ2ZvbGRlcic7XHJcbiAgICBkYXRhLmNvbXBhcmlzb25zRW5hYmxlZCA9IHRoaXMuY29tcGFyaXNvbnNFbmFibGVkO1xyXG5cclxuICAgIGNvbnN0IGZpbGUgPSBuZXcgRmlsZShkYXRhKTtcclxuXHJcbiAgICB0aGlzLmZpbGVzW2RhdGEudXJsXSA9IGZpbGU7XHJcbiAgICByZXR1cm4gZmlsZTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUZpbGUoZmlsZSkge1xyXG4gICAgZGVsZXRlIHRoaXMuZmlsZXNbZmlsZS51cmxdO1xyXG4gIH1cclxuXHJcbiAgc2V0dXBDcmVhdGVGaWxlQnV0dG9uKCkge1xyXG4gICAgLy8gVE9ETy1ISUdIOiBvbmxvYWQgZmlsZSBpcyBjcmVhdGVkIGF0IHJvb3QgZXZlbiB3aGVuIG90aGVyIGRpcmVjdG9yeSBpcyBzZWxlY3RlZFxyXG4gICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NyZWF0ZS1maWxlLWJ1dHRvbicpO1xyXG5cclxuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29uc3QgZmlsZSA9IHRoaXMuY3JlYXRlRmlsZSgpO1xyXG4gICAgICBidXR0b24uYmx1cigpO1xyXG4gICAgICBpZiAoIWZpbGUpIHJldHVybjtcclxuICAgICAgdGhpcy5kaXNwb3NlKCk7XHJcbiAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgICB0aGlzLnNldFNlbGVjdGVkRmlsZShmaWxlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0dXBEZWxldGVGaWxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5kZWxldGVGaWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgJyNkZWxldGUtZmlsZS1idXR0b24nLFxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmRlbGV0ZUZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGlmICghdGhpcy5jdXJyZW50RmlsZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmRlbGV0ZUZpbGUodGhpcy5jdXJyZW50RmlsZSk7XHJcbiAgICAgIHRoaXMuZGlzcG9zZSgpO1xyXG4gICAgICB0aGlzLmluaXQoKTtcclxuICAgICAgdGhpcy5zZXRDb250cm9sc1N0YXRlKCk7XHJcbiAgICAgIHRoaXMuY3VycmVudEZvbGRlciA9ICcnO1xyXG4gICAgICB0aGlzLmVkaXRvci5zZXRBY3RpdmVEb2N1bWVudChudWxsKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgRmlsZVRyZWUgfTtcclxuIiwgImZ1bmN0aW9uIHV1aWQoKSB7XHJcbiAgcmV0dXJuIChbMWU3XSArIC0xZTMgKyAtNGUzICsgLThlMyArIC0xZTExKS5yZXBsYWNlKC9bMDE4XS9nLCAoYykgPT5cclxuICAgIChcclxuICAgICAgYyBeXHJcbiAgICAgIChjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEpKVswXSAmICgxNSA+PiAoYyAvIDQpKSlcclxuICAgICkudG9TdHJpbmcoMTYpLFxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCB7IHV1aWQgfTtcclxuIiwgImltcG9ydCB7IEhUTUxCdWlsZGVyIH0gZnJvbSAnLi4vSFRNTC9IVE1MQnVpbGRlci5qcyc7XHJcbmltcG9ydCB7IHV1aWQgfSBmcm9tICcuL3V0aWxzL3V1aWQuanMnO1xyXG5cclxuY2xhc3MgUHJldmlldyB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmZyYW1lID0gSFRNTEJ1aWxkZXIuYnVpbGRQcmV2aWV3RnJhbWUoKTtcclxuICAgIHRoaXMuZXh0ZXJuYWxQcmV2aWV3cyA9IHt9O1xyXG4gICAgdGhpcy5zZXR1cExvZ2dpbmcoKTtcclxuXHJcbiAgICB0aGlzLnByZXZpZXdIaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmV2aWV3LW92ZXJsYXknKTtcclxuXHJcbiAgICB0aGlzLmZyYW1lLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgdGhpcy5vbkxvYWQoKTtcclxuXHJcbiAgICAgIC8vIGhpZGluZyB0aGUgcHJldmlldyBkdXJpbmcgcmVmcmVzaCByZWR1Y2VzIGZsaWNrZXJpbmdcclxuICAgICAgdGhpcy5wcmV2aWV3SGlkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXR1cExvZ2dpbmcoKSB7XHJcbiAgICAvLyBUT0RPXHJcbiAgICAvLyB0aGlzLmNvbnNvbGVQYW5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmV2aWV3LWNvbnNvbGUnKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZShzcmMpIHtcclxuICAgIHRoaXMucHJldmlld0hpZGVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgdGhpcy5mcmFtZS5zcmMgPSBzcmM7XHJcbiAgICBmb3IgKGNvbnN0IG5hbWUgb2YgT2JqZWN0LmtleXModGhpcy5leHRlcm5hbFByZXZpZXdzKSkge1xyXG4gICAgICBpZiAodGhpcy5leHRlcm5hbFByZXZpZXdzW25hbWVdLmNsb3NlZCkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmV4dGVybmFsUHJldmlld3NbbmFtZV07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5leHRlcm5hbFByZXZpZXdzW25hbWVdLmxvY2F0aW9uLmhyZWYgPSB0aGlzLmZyYW1lLnNyYztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlV2luZG93KG5hbWUpIHtcclxuICAgIGNvbnN0IGNoaWxkV2luZG93ID0gd2luZG93Lm9wZW4odGhpcy5mcmFtZS5zcmMsICdfYmxhbmsnKTtcclxuICAgIGlmIChjaGlsZFdpbmRvdykge1xyXG4gICAgICB0aGlzLmV4dGVybmFsUHJldmlld3NbbmFtZV0gPSBjaGlsZFdpbmRvdztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFsZXJ0KCdFcnJvcjogd2luZG93IHdhcyBwcmV2ZW50ZWQgZnJvbSBvcGVuaW5nLicpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlRXh0ZXJuYWxQcmV2aWV3KCkge1xyXG4gICAgaWYgKHRoaXMuZnJhbWUgJiYgdGhpcy5mcmFtZS5zcmMpIHtcclxuICAgICAgY29uc3QgbmFtZSA9IGAke2RvY3VtZW50LnRpdGxlfSBQcmV2aWV3ICR7dXVpZCgpfWA7XHJcbiAgICAgIHRoaXMuY3JlYXRlV2luZG93KG5hbWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Mb2FkKCkge31cclxufVxyXG5cclxuZXhwb3J0IHsgUHJldmlldyB9O1xyXG4iLCAiY2xhc3MgUmVzZXQge1xyXG4gIGNvbnN0cnVjdG9yKGVkaXRvcikge1xyXG4gICAgdGhpcy5lZGl0b3IgPSBlZGl0b3I7XHJcbiAgICB0aGlzLnJlc2V0QWN0aXZlRmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcjcmVzZXQtYWN0aXZlLWZpbGUnLFxyXG4gICAgKTtcclxuICAgIHRoaXMucmVzZXRBbGxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmVzZXQtYWxsLWZpbGVzJyk7XHJcblxyXG4gICAgdGhpcy5zZXR1cFJlc2V0QWN0aXZlQnV0dG9uKCk7XHJcbiAgICB0aGlzLnNldHVwUmVzZXRBbGxCdXR0b24oKTtcclxuICB9XHJcblxyXG4gIHNldEJ1dHRvblN0YXRlcygpIHtcclxuICAgIHRoaXMucmVzZXRBY3RpdmVGaWxlQnV0dG9uLmRpc2FibGVkID1cclxuICAgICAgISF0aGlzLmVkaXRvci5hY3RpdmVGaWxlICYmICF0aGlzLmVkaXRvci5hY3RpdmVGaWxlLmlzRGlydHk7XHJcbiAgICB0aGlzLnJlc2V0QWxsQnV0dG9uLmRpc2FibGVkID0gIXRoaXMuZWRpdG9yLmlzRGlydHk7XHJcbiAgfVxyXG5cclxuICBzZXR1cFJlc2V0QWN0aXZlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5yZXNldEFjdGl2ZUZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuZWRpdG9yLnJlc2V0QWN0aXZlRmlsZSgpO1xyXG4gICAgICB0aGlzLnNldEJ1dHRvblN0YXRlcygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXR1cFJlc2V0QWxsQnV0dG9uKCkge1xyXG4gICAgdGhpcy5yZXNldEFsbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5lZGl0b3IucmVzZXRBbGxGaWxlcygpO1xyXG4gICAgICB0aGlzLnNldEJ1dHRvblN0YXRlcygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBSZXNldCB9O1xyXG4iLCAiaW1wb3J0IHsgUmVzZXQgfSBmcm9tICcuL1Jlc2V0LmpzJztcclxuXHJcbmNsYXNzIENvbnRyb2xzIHtcclxuICBzdGF0aWMgc2V0dXBSZXNldEJ1dHRvbnMoZWRpdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IFJlc2V0KGVkaXRvcik7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0dXBEb3dubG9hZFBhY2thZ2VCdXR0b24oZG93bmxvYWRlcikge1xyXG4gICAgY29uc3QgZG93bmxvYWRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZG93bmxvYWQtYnV0dG9uJyk7XHJcblxyXG4gICAgZG93bmxvYWRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIGRvd25sb2FkZXIuZG93bmxvYWRQYWNrYWdlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXR1cEltcG9ydFN0eWxlU2VsZWN0KGZpbGVzLCBlbmFibGVkKSB7XHJcbiAgICBpZiAoZW5hYmxlZCAhPT0gJ3RydWUnKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHNlbGVjdE1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2VsZWN0LWltcG9ydC1zdHlsZScpO1xyXG4gICAgc2VsZWN0TWVudS5kaXNhYmxlZCA9IGZhbHNlO1xyXG5cclxuICAgIHNlbGVjdE1lbnUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcclxuICAgICAgY29uc3QgdmFsdWUgPSBlLnRhcmdldC5vcHRpb25zW2UudGFyZ2V0LnNlbGVjdGVkSW5kZXhdLnZhbHVlO1xyXG5cclxuICAgICAgZm9yIChjb25zdCBmaWxlIG9mIE9iamVjdC52YWx1ZXMoZmlsZXMpKSB7XHJcbiAgICAgICAgZmlsZS5zZXRJbXBvcnRTdHlsZSh2YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIG9wZW5QcmV2aWV3SW5OZXdXaW5kb3cocHJldmlldykge1xyXG4gICAgY29uc3QgbmV3V2luZG93UHJldmlld0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcjbmV3LXdpbmRvdy1wcmV2aWV3JyxcclxuICAgICk7XHJcblxyXG4gICAgbmV3V2luZG93UHJldmlld0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgcHJldmlldy5jcmVhdGVFeHRlcm5hbFByZXZpZXcoKTtcclxuICAgICAgbmV3V2luZG93UHJldmlld0J1dHRvbi5ibHVyKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXR1cFN0YXJ0RmluYWxDb2RlVG9nZ2xlKGVkaXRvcikge1xyXG4gICAgY29uc3QgdG9nZ2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvZ2dsZS1jb21wbGV0ZScpO1xyXG4gICAgdG9nZ2xlLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB0b2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCkge1xyXG4gICAgICAgIGVkaXRvci5zZXRDb21wYXJpc29uU3RhdGUoJ2ZpbmFsJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZWRpdG9yLnNldENvbXBhcmlzb25TdGF0ZSgnc3RhcnQnKTtcclxuICAgICAgfVxyXG4gICAgICBlZGl0b3IuZm9jdXMoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgQ29udHJvbHMgfTtcclxuIiwgIi8vIFRoZSBwcm9ncmFtbWluZyBnb2FscyBvZiBTcGxpdC5qcyBhcmUgdG8gZGVsaXZlciByZWFkYWJsZSwgdW5kZXJzdGFuZGFibGUgYW5kXHJcbi8vIG1haW50YWluYWJsZSBjb2RlLCB3aGlsZSBhdCB0aGUgc2FtZSB0aW1lIG1hbnVhbGx5IG9wdGltaXppbmcgZm9yIHRpbnkgbWluaWZpZWQgZmlsZSBzaXplLFxyXG4vLyBicm93c2VyIGNvbXBhdGliaWxpdHkgd2l0aG91dCBhZGRpdGlvbmFsIHJlcXVpcmVtZW50c1xyXG4vLyBhbmQgdmVyeSBmZXcgYXNzdW1wdGlvbnMgYWJvdXQgdGhlIHVzZXIncyBwYWdlIGxheW91dC5cclxudmFyIGdsb2JhbCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogbnVsbDtcclxudmFyIHNzciA9IGdsb2JhbCA9PT0gbnVsbDtcclxudmFyIGRvY3VtZW50ID0gIXNzciA/IGdsb2JhbC5kb2N1bWVudCA6IHVuZGVmaW5lZDtcclxuXHJcbi8vIFNhdmUgYSBjb3VwbGUgbG9uZyBmdW5jdGlvbiBuYW1lcyB0aGF0IGFyZSB1c2VkIGZyZXF1ZW50bHkuXHJcbi8vIFRoaXMgb3B0aW1pemF0aW9uIHNhdmVzIGFyb3VuZCA0MDAgYnl0ZXMuXHJcbnZhciBhZGRFdmVudExpc3RlbmVyID0gJ2FkZEV2ZW50TGlzdGVuZXInO1xyXG52YXIgcmVtb3ZlRXZlbnRMaXN0ZW5lciA9ICdyZW1vdmVFdmVudExpc3RlbmVyJztcclxudmFyIGdldEJvdW5kaW5nQ2xpZW50UmVjdCA9ICdnZXRCb3VuZGluZ0NsaWVudFJlY3QnO1xyXG52YXIgZ3V0dGVyU3RhcnREcmFnZ2luZyA9ICdfYSc7XHJcbnZhciBhR3V0dGVyU2l6ZSA9ICdfYic7XHJcbnZhciBiR3V0dGVyU2l6ZSA9ICdfYyc7XHJcbnZhciBIT1JJWk9OVEFMID0gJ2hvcml6b250YWwnO1xyXG52YXIgTk9PUCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZhbHNlOyB9O1xyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIGRldGVybWluZXMgd2hpY2ggcHJlZml4ZXMgb2YgQ1NTIGNhbGMgd2UgbmVlZC5cclxuLy8gV2Ugb25seSBuZWVkIHRvIGRvIHRoaXMgb25jZSBvbiBzdGFydHVwLCB3aGVuIHRoaXMgYW5vbnltb3VzIGZ1bmN0aW9uIGlzIGNhbGxlZC5cclxuLy9cclxuLy8gVGVzdHMgLXdlYmtpdCwgLW1veiBhbmQgLW8gcHJlZml4ZXMuIE1vZGlmaWVkIGZyb20gU3RhY2tPdmVyZmxvdzpcclxuLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNjYyNTE0MC9qcy1mZWF0dXJlLWRldGVjdGlvbi10by1kZXRlY3QtdGhlLXVzYWdlLW9mLXdlYmtpdC1jYWxjLW92ZXItY2FsYy8xNjYyNTE2NyMxNjYyNTE2N1xyXG52YXIgY2FsYyA9IHNzclxyXG4gICAgPyAnY2FsYydcclxuICAgIDogKChbJycsICctd2Via2l0LScsICctbW96LScsICctby0nXVxyXG4gICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAocHJlZml4KSB7XHJcbiAgICAgICAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgZWwuc3R5bGUuY3NzVGV4dCA9IFwid2lkdGg6XCIgKyBwcmVmaXggKyBcImNhbGMoOXB4KVwiO1xyXG5cclxuICAgICAgICAgICAgICByZXR1cm4gISFlbC5zdHlsZS5sZW5ndGhcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuc2hpZnQoKSkgKyBcImNhbGNcIik7XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gY2hlY2tzIGlmIGl0cyBhcmd1bWVudCBpcyBhIHN0cmluZy1saWtlIHR5cGVcclxudmFyIGlzU3RyaW5nID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHR5cGVvZiB2ID09PSAnc3RyaW5nJyB8fCB2IGluc3RhbmNlb2YgU3RyaW5nOyB9O1xyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIGFsbG93cyBlbGVtZW50cyBhbmQgc3RyaW5nIHNlbGVjdG9ycyB0byBiZSB1c2VkXHJcbi8vIGludGVyY2hhbmdlYWJseS4gSW4gZWl0aGVyIGNhc2UgYW4gZWxlbWVudCBpcyByZXR1cm5lZC4gVGhpcyBhbGxvd3MgdXMgdG9cclxuLy8gZG8gYFNwbGl0KFtlbGVtMSwgZWxlbTJdKWAgYXMgd2VsbCBhcyBgU3BsaXQoWycjaWQxJywgJyNpZDInXSlgLlxyXG52YXIgZWxlbWVudE9yU2VsZWN0b3IgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgIGlmIChpc1N0cmluZyhlbCkpIHtcclxuICAgICAgICB2YXIgZWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCk7XHJcbiAgICAgICAgaWYgKCFlbGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKChcIlNlbGVjdG9yIFwiICsgZWwgKyBcIiBkaWQgbm90IG1hdGNoIGEgRE9NIGVsZW1lbnRcIikpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlbGVcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZWxcclxufTtcclxuXHJcbi8vIEhlbHBlciBmdW5jdGlvbiBnZXRzIGEgcHJvcGVydHkgZnJvbSB0aGUgcHJvcGVydGllcyBvYmplY3QsIHdpdGggYSBkZWZhdWx0IGZhbGxiYWNrXHJcbnZhciBnZXRPcHRpb24gPSBmdW5jdGlvbiAob3B0aW9ucywgcHJvcE5hbWUsIGRlZikge1xyXG4gICAgdmFyIHZhbHVlID0gb3B0aW9uc1twcm9wTmFtZV07XHJcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRlZlxyXG59O1xyXG5cclxudmFyIGdldEd1dHRlclNpemUgPSBmdW5jdGlvbiAoZ3V0dGVyU2l6ZSwgaXNGaXJzdCwgaXNMYXN0LCBndXR0ZXJBbGlnbikge1xyXG4gICAgaWYgKGlzRmlyc3QpIHtcclxuICAgICAgICBpZiAoZ3V0dGVyQWxpZ24gPT09ICdlbmQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChndXR0ZXJBbGlnbiA9PT0gJ2NlbnRlcicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGd1dHRlclNpemUgLyAyXHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChpc0xhc3QpIHtcclxuICAgICAgICBpZiAoZ3V0dGVyQWxpZ24gPT09ICdzdGFydCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDBcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGd1dHRlckFsaWduID09PSAnY2VudGVyJykge1xyXG4gICAgICAgICAgICByZXR1cm4gZ3V0dGVyU2l6ZSAvIDJcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGd1dHRlclNpemVcclxufTtcclxuXHJcbi8vIERlZmF1bHQgb3B0aW9uc1xyXG52YXIgZGVmYXVsdEd1dHRlckZuID0gZnVuY3Rpb24gKGksIGd1dHRlckRpcmVjdGlvbikge1xyXG4gICAgdmFyIGd1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgZ3V0LmNsYXNzTmFtZSA9IFwiZ3V0dGVyIGd1dHRlci1cIiArIGd1dHRlckRpcmVjdGlvbjtcclxuICAgIHJldHVybiBndXRcclxufTtcclxuXHJcbnZhciBkZWZhdWx0RWxlbWVudFN0eWxlRm4gPSBmdW5jdGlvbiAoZGltLCBzaXplLCBndXRTaXplKSB7XHJcbiAgICB2YXIgc3R5bGUgPSB7fTtcclxuXHJcbiAgICBpZiAoIWlzU3RyaW5nKHNpemUpKSB7XHJcbiAgICAgICAgc3R5bGVbZGltXSA9IGNhbGMgKyBcIihcIiArIHNpemUgKyBcIiUgLSBcIiArIGd1dFNpemUgKyBcInB4KVwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBzdHlsZVtkaW1dID0gc2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc3R5bGVcclxufTtcclxuXHJcbnZhciBkZWZhdWx0R3V0dGVyU3R5bGVGbiA9IGZ1bmN0aW9uIChkaW0sIGd1dFNpemUpIHtcclxuICAgIHZhciBvYmo7XHJcblxyXG4gICAgcmV0dXJuICgoIG9iaiA9IHt9LCBvYmpbZGltXSA9IChndXRTaXplICsgXCJweFwiKSwgb2JqICkpO1xyXG59O1xyXG5cclxuLy8gVGhlIG1haW4gZnVuY3Rpb24gdG8gaW5pdGlhbGl6ZSBhIHNwbGl0LiBTcGxpdC5qcyB0aGlua3MgYWJvdXQgZWFjaCBwYWlyXHJcbi8vIG9mIGVsZW1lbnRzIGFzIGFuIGluZGVwZW5kYW50IHBhaXIuIERyYWdnaW5nIHRoZSBndXR0ZXIgYmV0d2VlbiB0d28gZWxlbWVudHNcclxuLy8gb25seSBjaGFuZ2VzIHRoZSBkaW1lbnNpb25zIG9mIGVsZW1lbnRzIGluIHRoYXQgcGFpci4gVGhpcyBpcyBrZXkgdG8gdW5kZXJzdGFuZGluZ1xyXG4vLyBob3cgdGhlIGZvbGxvd2luZyBmdW5jdGlvbnMgb3BlcmF0ZSwgc2luY2UgZWFjaCBmdW5jdGlvbiBpcyBib3VuZCB0byBhIHBhaXIuXHJcbi8vXHJcbi8vIEEgcGFpciBvYmplY3QgaXMgc2hhcGVkIGxpa2UgdGhpczpcclxuLy9cclxuLy8ge1xyXG4vLyAgICAgYTogRE9NIGVsZW1lbnQsXHJcbi8vICAgICBiOiBET00gZWxlbWVudCxcclxuLy8gICAgIGFNaW46IE51bWJlcixcclxuLy8gICAgIGJNaW46IE51bWJlcixcclxuLy8gICAgIGRyYWdnaW5nOiBCb29sZWFuLFxyXG4vLyAgICAgcGFyZW50OiBET00gZWxlbWVudCxcclxuLy8gICAgIGRpcmVjdGlvbjogJ2hvcml6b250YWwnIHwgJ3ZlcnRpY2FsJ1xyXG4vLyB9XHJcbi8vXHJcbi8vIFRoZSBiYXNpYyBzZXF1ZW5jZTpcclxuLy9cclxuLy8gMS4gU2V0IGRlZmF1bHRzIHRvIHNvbWV0aGluZyBzYW5lLiBgb3B0aW9uc2AgZG9lc24ndCBoYXZlIHRvIGJlIHBhc3NlZCBhdCBhbGwuXHJcbi8vIDIuIEluaXRpYWxpemUgYSBidW5jaCBvZiBzdHJpbmdzIGJhc2VkIG9uIHRoZSBkaXJlY3Rpb24gd2UncmUgc3BsaXR0aW5nLlxyXG4vLyAgICBBIGxvdCBvZiB0aGUgYmVoYXZpb3IgaW4gdGhlIHJlc3Qgb2YgdGhlIGxpYnJhcnkgaXMgcGFyYW1hdGl6ZWQgZG93biB0b1xyXG4vLyAgICByZWx5IG9uIENTUyBzdHJpbmdzIGFuZCBjbGFzc2VzLlxyXG4vLyAzLiBEZWZpbmUgdGhlIGRyYWdnaW5nIGhlbHBlciBmdW5jdGlvbnMsIGFuZCBhIGZldyBoZWxwZXJzIHRvIGdvIHdpdGggdGhlbS5cclxuLy8gNC4gTG9vcCB0aHJvdWdoIHRoZSBlbGVtZW50cyB3aGlsZSBwYWlyaW5nIHRoZW0gb2ZmLiBFdmVyeSBwYWlyIGdldHMgYW5cclxuLy8gICAgYHBhaXJgIG9iamVjdCBhbmQgYSBndXR0ZXIuXHJcbi8vIDUuIEFjdHVhbGx5IHNpemUgdGhlIHBhaXIgZWxlbWVudHMsIGluc2VydCBndXR0ZXJzIGFuZCBhdHRhY2ggZXZlbnQgbGlzdGVuZXJzLlxyXG52YXIgU3BsaXQgPSBmdW5jdGlvbiAoaWRzT3B0aW9uLCBvcHRpb25zKSB7XHJcbiAgICBpZiAoIG9wdGlvbnMgPT09IHZvaWQgMCApIG9wdGlvbnMgPSB7fTtcclxuXHJcbiAgICBpZiAoc3NyKSB7IHJldHVybiB7fSB9XHJcblxyXG4gICAgdmFyIGlkcyA9IGlkc09wdGlvbjtcclxuICAgIHZhciBkaW1lbnNpb247XHJcbiAgICB2YXIgY2xpZW50QXhpcztcclxuICAgIHZhciBwb3NpdGlvbjtcclxuICAgIHZhciBwb3NpdGlvbkVuZDtcclxuICAgIHZhciBjbGllbnRTaXplO1xyXG4gICAgdmFyIGVsZW1lbnRzO1xyXG5cclxuICAgIC8vIEFsbG93IEhUTUxDb2xsZWN0aW9uIHRvIGJlIHVzZWQgYXMgYW4gYXJndW1lbnQgd2hlbiBzdXBwb3J0ZWRcclxuICAgIGlmIChBcnJheS5mcm9tKSB7XHJcbiAgICAgICAgaWRzID0gQXJyYXkuZnJvbShpZHMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFsbCBET00gZWxlbWVudHMgaW4gdGhlIHNwbGl0IHNob3VsZCBoYXZlIGEgY29tbW9uIHBhcmVudC4gV2UgY2FuIGdyYWJcclxuICAgIC8vIHRoZSBmaXJzdCBlbGVtZW50cyBwYXJlbnQgYW5kIGhvcGUgdXNlcnMgcmVhZCB0aGUgZG9jcyBiZWNhdXNlIHRoZVxyXG4gICAgLy8gYmVoYXZpb3Igd2lsbCBiZSB3aGFja3kgb3RoZXJ3aXNlLlxyXG4gICAgdmFyIGZpcnN0RWxlbWVudCA9IGVsZW1lbnRPclNlbGVjdG9yKGlkc1swXSk7XHJcbiAgICB2YXIgcGFyZW50ID0gZmlyc3RFbGVtZW50LnBhcmVudE5vZGU7XHJcbiAgICB2YXIgcGFyZW50U3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlID8gZ2V0Q29tcHV0ZWRTdHlsZShwYXJlbnQpIDogbnVsbDtcclxuICAgIHZhciBwYXJlbnRGbGV4RGlyZWN0aW9uID0gcGFyZW50U3R5bGUgPyBwYXJlbnRTdHlsZS5mbGV4RGlyZWN0aW9uIDogbnVsbDtcclxuXHJcbiAgICAvLyBTZXQgZGVmYXVsdCBvcHRpb25zLnNpemVzIHRvIGVxdWFsIHBlcmNlbnRhZ2VzIG9mIHRoZSBwYXJlbnQgZWxlbWVudC5cclxuICAgIHZhciBzaXplcyA9IGdldE9wdGlvbihvcHRpb25zLCAnc2l6ZXMnKSB8fCBpZHMubWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIDEwMCAvIGlkcy5sZW5ndGg7IH0pO1xyXG5cclxuICAgIC8vIFN0YW5kYXJkaXplIG1pblNpemUgdG8gYW4gYXJyYXkgaWYgaXQgaXNuJ3QgYWxyZWFkeS4gVGhpcyBhbGxvd3MgbWluU2l6ZVxyXG4gICAgLy8gdG8gYmUgcGFzc2VkIGFzIGEgbnVtYmVyLlxyXG4gICAgdmFyIG1pblNpemUgPSBnZXRPcHRpb24ob3B0aW9ucywgJ21pblNpemUnLCAxMDApO1xyXG4gICAgdmFyIG1pblNpemVzID0gQXJyYXkuaXNBcnJheShtaW5TaXplKSA/IG1pblNpemUgOiBpZHMubWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1pblNpemU7IH0pO1xyXG5cclxuICAgIC8vIEdldCBvdGhlciBvcHRpb25zXHJcbiAgICB2YXIgZXhwYW5kVG9NaW4gPSBnZXRPcHRpb24ob3B0aW9ucywgJ2V4cGFuZFRvTWluJywgZmFsc2UpO1xyXG4gICAgdmFyIGd1dHRlclNpemUgPSBnZXRPcHRpb24ob3B0aW9ucywgJ2d1dHRlclNpemUnLCAxMCk7XHJcbiAgICB2YXIgZ3V0dGVyQWxpZ24gPSBnZXRPcHRpb24ob3B0aW9ucywgJ2d1dHRlckFsaWduJywgJ2NlbnRlcicpO1xyXG4gICAgdmFyIHNuYXBPZmZzZXQgPSBnZXRPcHRpb24ob3B0aW9ucywgJ3NuYXBPZmZzZXQnLCAzMCk7XHJcbiAgICB2YXIgZHJhZ0ludGVydmFsID0gZ2V0T3B0aW9uKG9wdGlvbnMsICdkcmFnSW50ZXJ2YWwnLCAxKTtcclxuICAgIHZhciBkaXJlY3Rpb24gPSBnZXRPcHRpb24ob3B0aW9ucywgJ2RpcmVjdGlvbicsIEhPUklaT05UQUwpO1xyXG4gICAgdmFyIGN1cnNvciA9IGdldE9wdGlvbihcclxuICAgICAgICBvcHRpb25zLFxyXG4gICAgICAgICdjdXJzb3InLFxyXG4gICAgICAgIGRpcmVjdGlvbiA9PT0gSE9SSVpPTlRBTCA/ICdjb2wtcmVzaXplJyA6ICdyb3ctcmVzaXplJ1xyXG4gICAgKTtcclxuICAgIHZhciBndXR0ZXIgPSBnZXRPcHRpb24ob3B0aW9ucywgJ2d1dHRlcicsIGRlZmF1bHRHdXR0ZXJGbik7XHJcbiAgICB2YXIgZWxlbWVudFN0eWxlID0gZ2V0T3B0aW9uKFxyXG4gICAgICAgIG9wdGlvbnMsXHJcbiAgICAgICAgJ2VsZW1lbnRTdHlsZScsXHJcbiAgICAgICAgZGVmYXVsdEVsZW1lbnRTdHlsZUZuXHJcbiAgICApO1xyXG4gICAgdmFyIGd1dHRlclN0eWxlID0gZ2V0T3B0aW9uKG9wdGlvbnMsICdndXR0ZXJTdHlsZScsIGRlZmF1bHRHdXR0ZXJTdHlsZUZuKTtcclxuXHJcbiAgICAvLyAyLiBJbml0aWFsaXplIGEgYnVuY2ggb2Ygc3RyaW5ncyBiYXNlZCBvbiB0aGUgZGlyZWN0aW9uIHdlJ3JlIHNwbGl0dGluZy5cclxuICAgIC8vIEEgbG90IG9mIHRoZSBiZWhhdmlvciBpbiB0aGUgcmVzdCBvZiB0aGUgbGlicmFyeSBpcyBwYXJhbWF0aXplZCBkb3duIHRvXHJcbiAgICAvLyByZWx5IG9uIENTUyBzdHJpbmdzIGFuZCBjbGFzc2VzLlxyXG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gSE9SSVpPTlRBTCkge1xyXG4gICAgICAgIGRpbWVuc2lvbiA9ICd3aWR0aCc7XHJcbiAgICAgICAgY2xpZW50QXhpcyA9ICdjbGllbnRYJztcclxuICAgICAgICBwb3NpdGlvbiA9ICdsZWZ0JztcclxuICAgICAgICBwb3NpdGlvbkVuZCA9ICdyaWdodCc7XHJcbiAgICAgICAgY2xpZW50U2l6ZSA9ICdjbGllbnRXaWR0aCc7XHJcbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJykge1xyXG4gICAgICAgIGRpbWVuc2lvbiA9ICdoZWlnaHQnO1xyXG4gICAgICAgIGNsaWVudEF4aXMgPSAnY2xpZW50WSc7XHJcbiAgICAgICAgcG9zaXRpb24gPSAndG9wJztcclxuICAgICAgICBwb3NpdGlvbkVuZCA9ICdib3R0b20nO1xyXG4gICAgICAgIGNsaWVudFNpemUgPSAnY2xpZW50SGVpZ2h0JztcclxuICAgIH1cclxuXHJcbiAgICAvLyAzLiBEZWZpbmUgdGhlIGRyYWdnaW5nIGhlbHBlciBmdW5jdGlvbnMsIGFuZCBhIGZldyBoZWxwZXJzIHRvIGdvIHdpdGggdGhlbS5cclxuICAgIC8vIEVhY2ggaGVscGVyIGlzIGJvdW5kIHRvIGEgcGFpciBvYmplY3QgdGhhdCBjb250YWlucyBpdHMgbWV0YWRhdGEuIFRoaXNcclxuICAgIC8vIGFsc28gbWFrZXMgaXQgZWFzeSB0byBzdG9yZSByZWZlcmVuY2VzIHRvIGxpc3RlbmVycyB0aGF0IHRoYXQgd2lsbCBiZVxyXG4gICAgLy8gYWRkZWQgYW5kIHJlbW92ZWQuXHJcbiAgICAvL1xyXG4gICAgLy8gRXZlbiB0aG91Z2ggdGhlcmUgYXJlIG5vIG90aGVyIGZ1bmN0aW9ucyBjb250YWluZWQgaW4gdGhlbSwgYWxpYXNpbmdcclxuICAgIC8vIHRoaXMgdG8gc2VsZiBzYXZlcyA1MCBieXRlcyBvciBzbyBzaW5jZSBpdCdzIHVzZWQgc28gZnJlcXVlbnRseS5cclxuICAgIC8vXHJcbiAgICAvLyBUaGUgcGFpciBvYmplY3Qgc2F2ZXMgbWV0YWRhdGEgbGlrZSBkcmFnZ2luZyBzdGF0ZSwgcG9zaXRpb24gYW5kXHJcbiAgICAvLyBldmVudCBsaXN0ZW5lciByZWZlcmVuY2VzLlxyXG5cclxuICAgIGZ1bmN0aW9uIHNldEVsZW1lbnRTaXplKGVsLCBzaXplLCBndXRTaXplLCBpKSB7XHJcbiAgICAgICAgLy8gU3BsaXQuanMgYWxsb3dzIHNldHRpbmcgc2l6ZXMgdmlhIG51bWJlcnMgKGlkZWFsbHkpLCBvciBpZiB5b3UgbXVzdCxcclxuICAgICAgICAvLyBieSBzdHJpbmcsIGxpa2UgJzMwMHB4Jy4gVGhpcyBpcyBsZXNzIHRoYW4gaWRlYWwsIGJlY2F1c2UgaXQgYnJlYWtzXHJcbiAgICAgICAgLy8gdGhlIGZsdWlkIGxheW91dCB0aGF0IGBjYWxjKCUgLSBweClgIHByb3ZpZGVzLiBZb3UncmUgb24geW91ciBvd24gaWYgeW91IGRvIHRoYXQsXHJcbiAgICAgICAgLy8gbWFrZSBzdXJlIHlvdSBjYWxjdWxhdGUgdGhlIGd1dHRlciBzaXplIGJ5IGhhbmQuXHJcbiAgICAgICAgdmFyIHN0eWxlID0gZWxlbWVudFN0eWxlKGRpbWVuc2lvbiwgc2l6ZSwgZ3V0U2l6ZSwgaSk7XHJcblxyXG4gICAgICAgIE9iamVjdC5rZXlzKHN0eWxlKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxyXG4gICAgICAgICAgICBlbC5zdHlsZVtwcm9wXSA9IHN0eWxlW3Byb3BdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNldEd1dHRlclNpemUoZ3V0dGVyRWxlbWVudCwgZ3V0U2l6ZSwgaSkge1xyXG4gICAgICAgIHZhciBzdHlsZSA9IGd1dHRlclN0eWxlKGRpbWVuc2lvbiwgZ3V0U2l6ZSwgaSk7XHJcblxyXG4gICAgICAgIE9iamVjdC5rZXlzKHN0eWxlKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxyXG4gICAgICAgICAgICBndXR0ZXJFbGVtZW50LnN0eWxlW3Byb3BdID0gc3R5bGVbcHJvcF07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0U2l6ZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRzLm1hcChmdW5jdGlvbiAoZWxlbWVudCkgeyByZXR1cm4gZWxlbWVudC5zaXplOyB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFN1cHBvcnRzIHRvdWNoIGV2ZW50cywgYnV0IG5vdCBtdWx0aXRvdWNoLCBzbyBvbmx5IHRoZSBmaXJzdFxyXG4gICAgLy8gZmluZ2VyIGB0b3VjaGVzWzBdYCBpcyBjb3VudGVkLlxyXG4gICAgZnVuY3Rpb24gZ2V0TW91c2VQb3NpdGlvbihlKSB7XHJcbiAgICAgICAgaWYgKCd0b3VjaGVzJyBpbiBlKSB7IHJldHVybiBlLnRvdWNoZXNbMF1bY2xpZW50QXhpc10gfVxyXG4gICAgICAgIHJldHVybiBlW2NsaWVudEF4aXNdXHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWN0dWFsbHkgYWRqdXN0IHRoZSBzaXplIG9mIGVsZW1lbnRzIGBhYCBhbmQgYGJgIHRvIGBvZmZzZXRgIHdoaWxlIGRyYWdnaW5nLlxyXG4gICAgLy8gY2FsYyBpcyB1c2VkIHRvIGFsbG93IGNhbGMocGVyY2VudGFnZSArIGd1dHRlcnB4KSBvbiB0aGUgd2hvbGUgc3BsaXQgaW5zdGFuY2UsXHJcbiAgICAvLyB3aGljaCBhbGxvd3MgdGhlIHZpZXdwb3J0IHRvIGJlIHJlc2l6ZWQgd2l0aG91dCBhZGRpdGlvbmFsIGxvZ2ljLlxyXG4gICAgLy8gRWxlbWVudCBhJ3Mgc2l6ZSBpcyB0aGUgc2FtZSBhcyBvZmZzZXQuIGIncyBzaXplIGlzIHRvdGFsIHNpemUgLSBhIHNpemUuXHJcbiAgICAvLyBCb3RoIHNpemVzIGFyZSBjYWxjdWxhdGVkIGZyb20gdGhlIGluaXRpYWwgcGFyZW50IHBlcmNlbnRhZ2UsXHJcbiAgICAvLyB0aGVuIHRoZSBndXR0ZXIgc2l6ZSBpcyBzdWJ0cmFjdGVkLlxyXG4gICAgZnVuY3Rpb24gYWRqdXN0KG9mZnNldCkge1xyXG4gICAgICAgIHZhciBhID0gZWxlbWVudHNbdGhpcy5hXTtcclxuICAgICAgICB2YXIgYiA9IGVsZW1lbnRzW3RoaXMuYl07XHJcbiAgICAgICAgdmFyIHBlcmNlbnRhZ2UgPSBhLnNpemUgKyBiLnNpemU7XHJcblxyXG4gICAgICAgIGEuc2l6ZSA9IChvZmZzZXQgLyB0aGlzLnNpemUpICogcGVyY2VudGFnZTtcclxuICAgICAgICBiLnNpemUgPSBwZXJjZW50YWdlIC0gKG9mZnNldCAvIHRoaXMuc2l6ZSkgKiBwZXJjZW50YWdlO1xyXG5cclxuICAgICAgICBzZXRFbGVtZW50U2l6ZShhLmVsZW1lbnQsIGEuc2l6ZSwgdGhpc1thR3V0dGVyU2l6ZV0sIGEuaSk7XHJcbiAgICAgICAgc2V0RWxlbWVudFNpemUoYi5lbGVtZW50LCBiLnNpemUsIHRoaXNbYkd1dHRlclNpemVdLCBiLmkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGRyYWcsIHdoZXJlIGFsbCB0aGUgbWFnaWMgaGFwcGVucy4gVGhlIGxvZ2ljIGlzIHJlYWxseSBxdWl0ZSBzaW1wbGU6XHJcbiAgICAvL1xyXG4gICAgLy8gMS4gSWdub3JlIGlmIHRoZSBwYWlyIGlzIG5vdCBkcmFnZ2luZy5cclxuICAgIC8vIDIuIEdldCB0aGUgb2Zmc2V0IG9mIHRoZSBldmVudC5cclxuICAgIC8vIDMuIFNuYXAgb2Zmc2V0IHRvIG1pbiBpZiB3aXRoaW4gc25hcHBhYmxlIHJhbmdlICh3aXRoaW4gbWluICsgc25hcE9mZnNldCkuXHJcbiAgICAvLyA0LiBBY3R1YWxseSBhZGp1c3QgZWFjaCBlbGVtZW50IGluIHRoZSBwYWlyIHRvIG9mZnNldC5cclxuICAgIC8vXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIHwgICAgfCA8LSBhLm1pblNpemUgICAgICAgICAgICAgICB8fCAgICAgICAgICAgICAgYi5taW5TaXplIC0+IHwgICAgfFxyXG4gICAgLy8gfCAgICB8ICB8IDwtIHRoaXMuc25hcE9mZnNldCAgICAgIHx8ICAgICB0aGlzLnNuYXBPZmZzZXQgLT4gfCAgfCAgICB8XHJcbiAgICAvLyB8ICAgIHwgIHwgICAgICAgICAgICAgICAgICAgICAgICAgfHwgICAgICAgICAgICAgICAgICAgICAgICB8ICB8ICAgIHxcclxuICAgIC8vIHwgICAgfCAgfCAgICAgICAgICAgICAgICAgICAgICAgICB8fCAgICAgICAgICAgICAgICAgICAgICAgIHwgIHwgICAgfFxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyB8IDwtIHRoaXMuc3RhcnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaXplIC0+IHxcclxuICAgIGZ1bmN0aW9uIGRyYWcoZSkge1xyXG4gICAgICAgIHZhciBvZmZzZXQ7XHJcbiAgICAgICAgdmFyIGEgPSBlbGVtZW50c1t0aGlzLmFdO1xyXG4gICAgICAgIHZhciBiID0gZWxlbWVudHNbdGhpcy5iXTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmRyYWdnaW5nKSB7IHJldHVybiB9XHJcblxyXG4gICAgICAgIC8vIEdldCB0aGUgb2Zmc2V0IG9mIHRoZSBldmVudCBmcm9tIHRoZSBmaXJzdCBzaWRlIG9mIHRoZVxyXG4gICAgICAgIC8vIHBhaXIgYHRoaXMuc3RhcnRgLiBUaGVuIG9mZnNldCBieSB0aGUgaW5pdGlhbCBwb3NpdGlvbiBvZiB0aGVcclxuICAgICAgICAvLyBtb3VzZSBjb21wYXJlZCB0byB0aGUgZ3V0dGVyIHNpemUuXHJcbiAgICAgICAgb2Zmc2V0ID1cclxuICAgICAgICAgICAgZ2V0TW91c2VQb3NpdGlvbihlKSAtXHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnQgK1xyXG4gICAgICAgICAgICAodGhpc1thR3V0dGVyU2l6ZV0gLSB0aGlzLmRyYWdPZmZzZXQpO1xyXG5cclxuICAgICAgICBpZiAoZHJhZ0ludGVydmFsID4gMSkge1xyXG4gICAgICAgICAgICBvZmZzZXQgPSBNYXRoLnJvdW5kKG9mZnNldCAvIGRyYWdJbnRlcnZhbCkgKiBkcmFnSW50ZXJ2YWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJZiB3aXRoaW4gc25hcE9mZnNldCBvZiBtaW4gb3IgbWF4LCBzZXQgb2Zmc2V0IHRvIG1pbiBvciBtYXguXHJcbiAgICAgICAgLy8gc25hcE9mZnNldCBidWZmZXJzIGEubWluU2l6ZSBhbmQgYi5taW5TaXplLCBzbyBsb2dpYyBpcyBvcHBvc2l0ZSBmb3IgYm90aC5cclxuICAgICAgICAvLyBJbmNsdWRlIHRoZSBhcHByb3ByaWF0ZSBndXR0ZXIgc2l6ZXMgdG8gcHJldmVudCBvdmVyZmxvd3MuXHJcbiAgICAgICAgaWYgKG9mZnNldCA8PSBhLm1pblNpemUgKyBzbmFwT2Zmc2V0ICsgdGhpc1thR3V0dGVyU2l6ZV0pIHtcclxuICAgICAgICAgICAgb2Zmc2V0ID0gYS5taW5TaXplICsgdGhpc1thR3V0dGVyU2l6ZV07XHJcbiAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgb2Zmc2V0ID49XHJcbiAgICAgICAgICAgIHRoaXMuc2l6ZSAtIChiLm1pblNpemUgKyBzbmFwT2Zmc2V0ICsgdGhpc1tiR3V0dGVyU2l6ZV0pXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IHRoaXMuc2l6ZSAtIChiLm1pblNpemUgKyB0aGlzW2JHdXR0ZXJTaXplXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBY3R1YWxseSBhZGp1c3QgdGhlIHNpemUuXHJcbiAgICAgICAgYWRqdXN0LmNhbGwodGhpcywgb2Zmc2V0KTtcclxuXHJcbiAgICAgICAgLy8gQ2FsbCB0aGUgZHJhZyBjYWxsYmFjayBjb250aW5vdXNseS4gRG9uJ3QgZG8gYW55dGhpbmcgdG9vIGludGVuc2l2ZVxyXG4gICAgICAgIC8vIGluIHRoaXMgY2FsbGJhY2suXHJcbiAgICAgICAgZ2V0T3B0aW9uKG9wdGlvbnMsICdvbkRyYWcnLCBOT09QKSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENhY2hlIHNvbWUgaW1wb3J0YW50IHNpemVzIHdoZW4gZHJhZyBzdGFydHMsIHNvIHdlIGRvbid0IGhhdmUgdG8gZG8gdGhhdFxyXG4gICAgLy8gY29udGlub3VzbHk6XHJcbiAgICAvL1xyXG4gICAgLy8gYHNpemVgOiBUaGUgdG90YWwgc2l6ZSBvZiB0aGUgcGFpci4gRmlyc3QgKyBzZWNvbmQgKyBmaXJzdCBndXR0ZXIgKyBzZWNvbmQgZ3V0dGVyLlxyXG4gICAgLy8gYHN0YXJ0YDogVGhlIGxlYWRpbmcgc2lkZSBvZiB0aGUgZmlyc3QgZWxlbWVudC5cclxuICAgIC8vXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIHwgICAgICBhR3V0dGVyU2l6ZSAtPiB8fHwgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgLy8gfCAgICAgICAgICAgICAgICAgICAgIHx8fCAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAvLyB8ICAgICAgICAgICAgICAgICAgICAgfHx8ICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgIC8vIHwgICAgICAgICAgICAgICAgICAgICB8fHwgPC0gYkd1dHRlclNpemUgICAgICAgfFxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyB8IDwtIHN0YXJ0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplIC0+IHxcclxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVNpemVzKCkge1xyXG4gICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIHBhcmVudCBzaXplIG1pbnVzIHBhZGRpbmcuXHJcbiAgICAgICAgdmFyIGEgPSBlbGVtZW50c1t0aGlzLmFdLmVsZW1lbnQ7XHJcbiAgICAgICAgdmFyIGIgPSBlbGVtZW50c1t0aGlzLmJdLmVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHZhciBhQm91bmRzID0gYVtnZXRCb3VuZGluZ0NsaWVudFJlY3RdKCk7XHJcbiAgICAgICAgdmFyIGJCb3VuZHMgPSBiW2dldEJvdW5kaW5nQ2xpZW50UmVjdF0oKTtcclxuXHJcbiAgICAgICAgdGhpcy5zaXplID1cclxuICAgICAgICAgICAgYUJvdW5kc1tkaW1lbnNpb25dICtcclxuICAgICAgICAgICAgYkJvdW5kc1tkaW1lbnNpb25dICtcclxuICAgICAgICAgICAgdGhpc1thR3V0dGVyU2l6ZV0gK1xyXG4gICAgICAgICAgICB0aGlzW2JHdXR0ZXJTaXplXTtcclxuICAgICAgICB0aGlzLnN0YXJ0ID0gYUJvdW5kc1twb3NpdGlvbl07XHJcbiAgICAgICAgdGhpcy5lbmQgPSBhQm91bmRzW3Bvc2l0aW9uRW5kXTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpbm5lclNpemUoZWxlbWVudCkge1xyXG4gICAgICAgIC8vIFJldHVybiBub3RoaW5nIGlmIGdldENvbXB1dGVkU3R5bGUgaXMgbm90IHN1cHBvcnRlZCAoPCBJRTkpXHJcbiAgICAgICAgLy8gT3IgaWYgcGFyZW50IGVsZW1lbnQgaGFzIG5vIGxheW91dCB5ZXRcclxuICAgICAgICBpZiAoIWdldENvbXB1dGVkU3R5bGUpIHsgcmV0dXJuIG51bGwgfVxyXG5cclxuICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XHJcblxyXG4gICAgICAgIGlmICghY29tcHV0ZWRTdHlsZSkgeyByZXR1cm4gbnVsbCB9XHJcblxyXG4gICAgICAgIHZhciBzaXplID0gZWxlbWVudFtjbGllbnRTaXplXTtcclxuXHJcbiAgICAgICAgaWYgKHNpemUgPT09IDApIHsgcmV0dXJuIG51bGwgfVxyXG5cclxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSBIT1JJWk9OVEFMKSB7XHJcbiAgICAgICAgICAgIHNpemUgLT1cclxuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZS5wYWRkaW5nTGVmdCkgK1xyXG4gICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlLnBhZGRpbmdSaWdodCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2l6ZSAtPVxyXG4gICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlLnBhZGRpbmdUb3ApICtcclxuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZS5wYWRkaW5nQm90dG9tKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzaXplXHJcbiAgICB9XHJcblxyXG4gICAgLy8gV2hlbiBzcGVjaWZ5aW5nIHBlcmNlbnRhZ2Ugc2l6ZXMgdGhhdCBhcmUgbGVzcyB0aGFuIHRoZSBjb21wdXRlZFxyXG4gICAgLy8gc2l6ZSBvZiB0aGUgZWxlbWVudCBtaW51cyB0aGUgZ3V0dGVyLCB0aGUgbGVzc2VyIHBlcmNlbnRhZ2VzIG11c3QgYmUgaW5jcmVhc2VkXHJcbiAgICAvLyAoYW5kIGRlY3JlYXNlZCBmcm9tIHRoZSBvdGhlciBlbGVtZW50cykgdG8gbWFrZSBzcGFjZSBmb3IgdGhlIHBpeGVsc1xyXG4gICAgLy8gc3VidHJhY3RlZCBieSB0aGUgZ3V0dGVycy5cclxuICAgIGZ1bmN0aW9uIHRyaW1Ub01pbihzaXplc1RvVHJpbSkge1xyXG4gICAgICAgIC8vIFRyeSB0byBnZXQgaW5uZXIgc2l6ZSBvZiBwYXJlbnQgZWxlbWVudC5cclxuICAgICAgICAvLyBJZiBpdCdzIG5vIHN1cHBvcnRlZCwgcmV0dXJuIG9yaWdpbmFsIHNpemVzLlxyXG4gICAgICAgIHZhciBwYXJlbnRTaXplID0gaW5uZXJTaXplKHBhcmVudCk7XHJcbiAgICAgICAgaWYgKHBhcmVudFNpemUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNpemVzVG9UcmltXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobWluU2l6ZXMucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhICsgYjsgfSwgMCkgPiBwYXJlbnRTaXplKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzaXplc1RvVHJpbVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gS2VlcCB0cmFjayBvZiB0aGUgZXhjZXNzIHBpeGVscywgdGhlIGFtb3VudCBvZiBwaXhlbHMgb3ZlciB0aGUgZGVzaXJlZCBwZXJjZW50YWdlXHJcbiAgICAgICAgLy8gQWxzbyBrZWVwIHRyYWNrIG9mIHRoZSBlbGVtZW50cyB3aXRoIHBpeGVscyB0byBzcGFyZSwgdG8gZGVjcmVhc2UgYWZ0ZXIgaWYgbmVlZGVkXHJcbiAgICAgICAgdmFyIGV4Y2Vzc1BpeGVscyA9IDA7XHJcbiAgICAgICAgdmFyIHRvU3BhcmUgPSBbXTtcclxuXHJcbiAgICAgICAgdmFyIHBpeGVsU2l6ZXMgPSBzaXplc1RvVHJpbS5tYXAoZnVuY3Rpb24gKHNpemUsIGkpIHtcclxuICAgICAgICAgICAgLy8gQ29udmVydCByZXF1ZXN0ZWQgcGVyY2VudGFnZXMgdG8gcGl4ZWwgc2l6ZXNcclxuICAgICAgICAgICAgdmFyIHBpeGVsU2l6ZSA9IChwYXJlbnRTaXplICogc2l6ZSkgLyAxMDA7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50R3V0dGVyU2l6ZSA9IGdldEd1dHRlclNpemUoXHJcbiAgICAgICAgICAgICAgICBndXR0ZXJTaXplLFxyXG4gICAgICAgICAgICAgICAgaSA9PT0gMCxcclxuICAgICAgICAgICAgICAgIGkgPT09IHNpemVzVG9UcmltLmxlbmd0aCAtIDEsXHJcbiAgICAgICAgICAgICAgICBndXR0ZXJBbGlnblxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudE1pblNpemUgPSBtaW5TaXplc1tpXSArIGVsZW1lbnRHdXR0ZXJTaXplO1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgZWxlbWVudCBpcyB0b28gc21hbCwgaW5jcmVhc2UgZXhjZXNzIHBpeGVscyBieSB0aGUgZGlmZmVyZW5jZVxyXG4gICAgICAgICAgICAvLyBhbmQgbWFyayB0aGF0IGl0IGhhcyBubyBwaXhlbHMgdG8gc3BhcmVcclxuICAgICAgICAgICAgaWYgKHBpeGVsU2l6ZSA8IGVsZW1lbnRNaW5TaXplKSB7XHJcbiAgICAgICAgICAgICAgICBleGNlc3NQaXhlbHMgKz0gZWxlbWVudE1pblNpemUgLSBwaXhlbFNpemU7XHJcbiAgICAgICAgICAgICAgICB0b1NwYXJlLnB1c2goMCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudE1pblNpemVcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCBtYXJrIHRoZSBwaXhlbHMgaXQgaGFzIHRvIHNwYXJlIGFuZCByZXR1cm4gaXQncyBvcmlnaW5hbCBzaXplXHJcbiAgICAgICAgICAgIHRvU3BhcmUucHVzaChwaXhlbFNpemUgLSBlbGVtZW50TWluU2l6ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBwaXhlbFNpemVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gSWYgbm90aGluZyB3YXMgYWRqdXN0ZWQsIHJldHVybiB0aGUgb3JpZ2luYWwgc2l6ZXNcclxuICAgICAgICBpZiAoZXhjZXNzUGl4ZWxzID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzaXplc1RvVHJpbVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHBpeGVsU2l6ZXMubWFwKGZ1bmN0aW9uIChwaXhlbFNpemUsIGkpIHtcclxuICAgICAgICAgICAgdmFyIG5ld1BpeGVsU2l6ZSA9IHBpeGVsU2l6ZTtcclxuXHJcbiAgICAgICAgICAgIC8vIFdoaWxlIHRoZXJlJ3Mgc3RpbGwgcGl4ZWxzIHRvIHRha2UsIGFuZCB0aGVyZSdzIGVub3VnaCBwaXhlbHMgdG8gc3BhcmUsXHJcbiAgICAgICAgICAgIC8vIHRha2UgYXMgbWFueSBhcyBwb3NzaWJsZSB1cCB0byB0aGUgdG90YWwgZXhjZXNzIHBpeGVsc1xyXG4gICAgICAgICAgICBpZiAoZXhjZXNzUGl4ZWxzID4gMCAmJiB0b1NwYXJlW2ldIC0gZXhjZXNzUGl4ZWxzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRha2VuUGl4ZWxzID0gTWF0aC5taW4oXHJcbiAgICAgICAgICAgICAgICAgICAgZXhjZXNzUGl4ZWxzLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvU3BhcmVbaV0gLSBleGNlc3NQaXhlbHNcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgdGhlIGFtb3VudCB0YWtlbiBmb3IgdGhlIG5leHQgaXRlcmF0aW9uXHJcbiAgICAgICAgICAgICAgICBleGNlc3NQaXhlbHMgLT0gdGFrZW5QaXhlbHM7XHJcbiAgICAgICAgICAgICAgICBuZXdQaXhlbFNpemUgPSBwaXhlbFNpemUgLSB0YWtlblBpeGVscztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBwaXhlbCBzaXplIGFkanVzdGVkIGFzIGEgcGVyY2VudGFnZVxyXG4gICAgICAgICAgICByZXR1cm4gKG5ld1BpeGVsU2l6ZSAvIHBhcmVudFNpemUpICogMTAwXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvLyBzdG9wRHJhZ2dpbmcgaXMgdmVyeSBzaW1pbGFyIHRvIHN0YXJ0RHJhZ2dpbmcgaW4gcmV2ZXJzZS5cclxuICAgIGZ1bmN0aW9uIHN0b3BEcmFnZ2luZygpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGEgPSBlbGVtZW50c1tzZWxmLmFdLmVsZW1lbnQ7XHJcbiAgICAgICAgdmFyIGIgPSBlbGVtZW50c1tzZWxmLmJdLmVsZW1lbnQ7XHJcblxyXG4gICAgICAgIGlmIChzZWxmLmRyYWdnaW5nKSB7XHJcbiAgICAgICAgICAgIGdldE9wdGlvbihvcHRpb25zLCAnb25EcmFnRW5kJywgTk9PUCkoZ2V0U2l6ZXMoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWxmLmRyYWdnaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgc3RvcmVkIGV2ZW50IGxpc3RlbmVycy4gVGhpcyBpcyB3aHkgd2Ugc3RvcmUgdGhlbS5cclxuICAgICAgICBnbG9iYWxbcmVtb3ZlRXZlbnRMaXN0ZW5lcl0oJ21vdXNldXAnLCBzZWxmLnN0b3ApO1xyXG4gICAgICAgIGdsb2JhbFtyZW1vdmVFdmVudExpc3RlbmVyXSgndG91Y2hlbmQnLCBzZWxmLnN0b3ApO1xyXG4gICAgICAgIGdsb2JhbFtyZW1vdmVFdmVudExpc3RlbmVyXSgndG91Y2hjYW5jZWwnLCBzZWxmLnN0b3ApO1xyXG4gICAgICAgIGdsb2JhbFtyZW1vdmVFdmVudExpc3RlbmVyXSgnbW91c2Vtb3ZlJywgc2VsZi5tb3ZlKTtcclxuICAgICAgICBnbG9iYWxbcmVtb3ZlRXZlbnRMaXN0ZW5lcl0oJ3RvdWNobW92ZScsIHNlbGYubW92ZSk7XHJcblxyXG4gICAgICAgIC8vIENsZWFyIGJvdW5kIGZ1bmN0aW9uIHJlZmVyZW5jZXNcclxuICAgICAgICBzZWxmLnN0b3AgPSBudWxsO1xyXG4gICAgICAgIHNlbGYubW92ZSA9IG51bGw7XHJcblxyXG4gICAgICAgIGFbcmVtb3ZlRXZlbnRMaXN0ZW5lcl0oJ3NlbGVjdHN0YXJ0JywgTk9PUCk7XHJcbiAgICAgICAgYVtyZW1vdmVFdmVudExpc3RlbmVyXSgnZHJhZ3N0YXJ0JywgTk9PUCk7XHJcbiAgICAgICAgYltyZW1vdmVFdmVudExpc3RlbmVyXSgnc2VsZWN0c3RhcnQnLCBOT09QKTtcclxuICAgICAgICBiW3JlbW92ZUV2ZW50TGlzdGVuZXJdKCdkcmFnc3RhcnQnLCBOT09QKTtcclxuXHJcbiAgICAgICAgYS5zdHlsZS51c2VyU2VsZWN0ID0gJyc7XHJcbiAgICAgICAgYS5zdHlsZS53ZWJraXRVc2VyU2VsZWN0ID0gJyc7XHJcbiAgICAgICAgYS5zdHlsZS5Nb3pVc2VyU2VsZWN0ID0gJyc7XHJcbiAgICAgICAgYS5zdHlsZS5wb2ludGVyRXZlbnRzID0gJyc7XHJcblxyXG4gICAgICAgIGIuc3R5bGUudXNlclNlbGVjdCA9ICcnO1xyXG4gICAgICAgIGIuc3R5bGUud2Via2l0VXNlclNlbGVjdCA9ICcnO1xyXG4gICAgICAgIGIuc3R5bGUuTW96VXNlclNlbGVjdCA9ICcnO1xyXG4gICAgICAgIGIuc3R5bGUucG9pbnRlckV2ZW50cyA9ICcnO1xyXG5cclxuICAgICAgICBzZWxmLmd1dHRlci5zdHlsZS5jdXJzb3IgPSAnJztcclxuICAgICAgICBzZWxmLnBhcmVudC5zdHlsZS5jdXJzb3IgPSAnJztcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHN0YXJ0RHJhZ2dpbmcgY2FsbHMgYGNhbGN1bGF0ZVNpemVzYCB0byBzdG9yZSB0aGUgaW5pdGFsIHNpemUgaW4gdGhlIHBhaXIgb2JqZWN0LlxyXG4gICAgLy8gSXQgYWxzbyBhZGRzIGV2ZW50IGxpc3RlbmVycyBmb3IgbW91c2UvdG91Y2ggZXZlbnRzLFxyXG4gICAgLy8gYW5kIHByZXZlbnRzIHNlbGVjdGlvbiB3aGlsZSBkcmFnZ2luZyBzbyBhdm9pZCB0aGUgc2VsZWN0aW5nIHRleHQuXHJcbiAgICBmdW5jdGlvbiBzdGFydERyYWdnaW5nKGUpIHtcclxuICAgICAgICAvLyBSaWdodC1jbGlja2luZyBjYW4ndCBzdGFydCBkcmFnZ2luZy5cclxuICAgICAgICBpZiAoJ2J1dHRvbicgaW4gZSAmJiBlLmJ1dHRvbiAhPT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFsaWFzIGZyZXF1ZW50bHkgdXNlZCB2YXJpYWJsZXMgdG8gc2F2ZSBzcGFjZS4gMjAwIGJ5dGVzLlxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB2YXIgYSA9IGVsZW1lbnRzW3NlbGYuYV0uZWxlbWVudDtcclxuICAgICAgICB2YXIgYiA9IGVsZW1lbnRzW3NlbGYuYl0uZWxlbWVudDtcclxuXHJcbiAgICAgICAgLy8gQ2FsbCB0aGUgb25EcmFnU3RhcnQgY2FsbGJhY2suXHJcbiAgICAgICAgaWYgKCFzZWxmLmRyYWdnaW5nKSB7XHJcbiAgICAgICAgICAgIGdldE9wdGlvbihvcHRpb25zLCAnb25EcmFnU3RhcnQnLCBOT09QKShnZXRTaXplcygpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIERvbid0IGFjdHVhbGx5IGRyYWcgdGhlIGVsZW1lbnQuIFdlIGVtdWxhdGUgdGhhdCBpbiB0aGUgZHJhZyBmdW5jdGlvbi5cclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIC8vIFNldCB0aGUgZHJhZ2dpbmcgcHJvcGVydHkgb2YgdGhlIHBhaXIgb2JqZWN0LlxyXG4gICAgICAgIHNlbGYuZHJhZ2dpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgdHdvIGV2ZW50IGxpc3RlbmVycyBib3VuZCB0byB0aGUgc2FtZSBwYWlyIG9iamVjdCBhbmQgc3RvcmVcclxuICAgICAgICAvLyB0aGVtIGluIHRoZSBwYWlyIG9iamVjdC5cclxuICAgICAgICBzZWxmLm1vdmUgPSBkcmFnLmJpbmQoc2VsZik7XHJcbiAgICAgICAgc2VsZi5zdG9wID0gc3RvcERyYWdnaW5nLmJpbmQoc2VsZik7XHJcblxyXG4gICAgICAgIC8vIEFsbCB0aGUgYmluZGluZy4gYHdpbmRvd2AgZ2V0cyB0aGUgc3RvcCBldmVudHMgaW4gY2FzZSB3ZSBkcmFnIG91dCBvZiB0aGUgZWxlbWVudHMuXHJcbiAgICAgICAgZ2xvYmFsW2FkZEV2ZW50TGlzdGVuZXJdKCdtb3VzZXVwJywgc2VsZi5zdG9wKTtcclxuICAgICAgICBnbG9iYWxbYWRkRXZlbnRMaXN0ZW5lcl0oJ3RvdWNoZW5kJywgc2VsZi5zdG9wKTtcclxuICAgICAgICBnbG9iYWxbYWRkRXZlbnRMaXN0ZW5lcl0oJ3RvdWNoY2FuY2VsJywgc2VsZi5zdG9wKTtcclxuICAgICAgICBnbG9iYWxbYWRkRXZlbnRMaXN0ZW5lcl0oJ21vdXNlbW92ZScsIHNlbGYubW92ZSk7XHJcbiAgICAgICAgZ2xvYmFsW2FkZEV2ZW50TGlzdGVuZXJdKCd0b3VjaG1vdmUnLCBzZWxmLm1vdmUpO1xyXG5cclxuICAgICAgICAvLyBEaXNhYmxlIHNlbGVjdGlvbi4gRGlzYWJsZSFcclxuICAgICAgICBhW2FkZEV2ZW50TGlzdGVuZXJdKCdzZWxlY3RzdGFydCcsIE5PT1ApO1xyXG4gICAgICAgIGFbYWRkRXZlbnRMaXN0ZW5lcl0oJ2RyYWdzdGFydCcsIE5PT1ApO1xyXG4gICAgICAgIGJbYWRkRXZlbnRMaXN0ZW5lcl0oJ3NlbGVjdHN0YXJ0JywgTk9PUCk7XHJcbiAgICAgICAgYlthZGRFdmVudExpc3RlbmVyXSgnZHJhZ3N0YXJ0JywgTk9PUCk7XHJcblxyXG4gICAgICAgIGEuc3R5bGUudXNlclNlbGVjdCA9ICdub25lJztcclxuICAgICAgICBhLnN0eWxlLndlYmtpdFVzZXJTZWxlY3QgPSAnbm9uZSc7XHJcbiAgICAgICAgYS5zdHlsZS5Nb3pVc2VyU2VsZWN0ID0gJ25vbmUnO1xyXG4gICAgICAgIGEuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcclxuXHJcbiAgICAgICAgYi5zdHlsZS51c2VyU2VsZWN0ID0gJ25vbmUnO1xyXG4gICAgICAgIGIuc3R5bGUud2Via2l0VXNlclNlbGVjdCA9ICdub25lJztcclxuICAgICAgICBiLnN0eWxlLk1velVzZXJTZWxlY3QgPSAnbm9uZSc7XHJcbiAgICAgICAgYi5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xyXG5cclxuICAgICAgICAvLyBTZXQgdGhlIGN1cnNvciBhdCBtdWx0aXBsZSBsZXZlbHNcclxuICAgICAgICBzZWxmLmd1dHRlci5zdHlsZS5jdXJzb3IgPSBjdXJzb3I7XHJcbiAgICAgICAgc2VsZi5wYXJlbnQuc3R5bGUuY3Vyc29yID0gY3Vyc29yO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gY3Vyc29yO1xyXG5cclxuICAgICAgICAvLyBDYWNoZSB0aGUgaW5pdGlhbCBzaXplcyBvZiB0aGUgcGFpci5cclxuICAgICAgICBjYWxjdWxhdGVTaXplcy5jYWxsKHNlbGYpO1xyXG5cclxuICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIHBvc2l0aW9uIG9mIHRoZSBtb3VzZSBjb21wYXJlZCB0byB0aGUgZ3V0dGVyXHJcbiAgICAgICAgc2VsZi5kcmFnT2Zmc2V0ID0gZ2V0TW91c2VQb3NpdGlvbihlKSAtIHNlbGYuZW5kO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGFkanVzdCBzaXplcyB0byBlbnN1cmUgcGVyY2VudGFnZSBpcyB3aXRoaW4gbWluIHNpemUgYW5kIGd1dHRlci5cclxuICAgIHNpemVzID0gdHJpbVRvTWluKHNpemVzKTtcclxuXHJcbiAgICAvLyA1LiBDcmVhdGUgcGFpciBhbmQgZWxlbWVudCBvYmplY3RzLiBFYWNoIHBhaXIgaGFzIGFuIGluZGV4IHJlZmVyZW5jZSB0b1xyXG4gICAgLy8gZWxlbWVudHMgYGFgIGFuZCBgYmAgb2YgdGhlIHBhaXIgKGZpcnN0IGFuZCBzZWNvbmQgZWxlbWVudHMpLlxyXG4gICAgLy8gTG9vcCB0aHJvdWdoIHRoZSBlbGVtZW50cyB3aGlsZSBwYWlyaW5nIHRoZW0gb2ZmLiBFdmVyeSBwYWlyIGdldHMgYVxyXG4gICAgLy8gYHBhaXJgIG9iamVjdCBhbmQgYSBndXR0ZXIuXHJcbiAgICAvL1xyXG4gICAgLy8gQmFzaWMgbG9naWM6XHJcbiAgICAvL1xyXG4gICAgLy8gLSBTdGFydGluZyB3aXRoIHRoZSBzZWNvbmQgZWxlbWVudCBgaSA+IDBgLCBjcmVhdGUgYHBhaXJgIG9iamVjdHMgd2l0aFxyXG4gICAgLy8gICBgYSA9IGkgLSAxYCBhbmQgYGIgPSBpYFxyXG4gICAgLy8gLSBTZXQgZ3V0dGVyIHNpemVzIGJhc2VkIG9uIHRoZSBfcGFpcl8gYmVpbmcgZmlyc3QvbGFzdC4gVGhlIGZpcnN0IGFuZCBsYXN0XHJcbiAgICAvLyAgIHBhaXIgaGF2ZSBndXR0ZXJTaXplIC8gMiwgc2luY2UgdGhleSBvbmx5IGhhdmUgb25lIGhhbGYgZ3V0dGVyLCBhbmQgbm90IHR3by5cclxuICAgIC8vIC0gQ3JlYXRlIGd1dHRlciBlbGVtZW50cyBhbmQgYWRkIGV2ZW50IGxpc3RlbmVycy5cclxuICAgIC8vIC0gU2V0IHRoZSBzaXplIG9mIHRoZSBlbGVtZW50cywgbWludXMgdGhlIGd1dHRlciBzaXplcy5cclxuICAgIC8vXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gfCAgICAgaT0wICAgICB8ICAgICAgICAgaT0xICAgICAgICAgfCAgICAgICAgaT0yICAgICAgIHwgICAgICBpPTMgICAgIHxcclxuICAgIC8vIHwgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICB8XHJcbiAgICAvLyB8ICAgICAgICAgICBwYWlyIDAgICAgICAgICAgICAgICAgcGFpciAxICAgICAgICAgICAgIHBhaXIgMiAgICAgICAgICAgfFxyXG4gICAgLy8gfCAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgIHxcclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICB2YXIgcGFpcnMgPSBbXTtcclxuICAgIGVsZW1lbnRzID0gaWRzLm1hcChmdW5jdGlvbiAoaWQsIGkpIHtcclxuICAgICAgICAvLyBDcmVhdGUgdGhlIGVsZW1lbnQgb2JqZWN0LlxyXG4gICAgICAgIHZhciBlbGVtZW50ID0ge1xyXG4gICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50T3JTZWxlY3RvcihpZCksXHJcbiAgICAgICAgICAgIHNpemU6IHNpemVzW2ldLFxyXG4gICAgICAgICAgICBtaW5TaXplOiBtaW5TaXplc1tpXSxcclxuICAgICAgICAgICAgaTogaSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgcGFpcjtcclxuXHJcbiAgICAgICAgaWYgKGkgPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgcGFpciBvYmplY3Qgd2l0aCBpdHMgbWV0YWRhdGEuXHJcbiAgICAgICAgICAgIHBhaXIgPSB7XHJcbiAgICAgICAgICAgICAgICBhOiBpIC0gMSxcclxuICAgICAgICAgICAgICAgIGI6IGksXHJcbiAgICAgICAgICAgICAgICBkcmFnZ2luZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246IGRpcmVjdGlvbixcclxuICAgICAgICAgICAgICAgIHBhcmVudDogcGFyZW50LFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcGFpclthR3V0dGVyU2l6ZV0gPSBnZXRHdXR0ZXJTaXplKFxyXG4gICAgICAgICAgICAgICAgZ3V0dGVyU2l6ZSxcclxuICAgICAgICAgICAgICAgIGkgLSAxID09PSAwLFxyXG4gICAgICAgICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBndXR0ZXJBbGlnblxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBwYWlyW2JHdXR0ZXJTaXplXSA9IGdldEd1dHRlclNpemUoXHJcbiAgICAgICAgICAgICAgICBndXR0ZXJTaXplLFxyXG4gICAgICAgICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBpID09PSBpZHMubGVuZ3RoIC0gMSxcclxuICAgICAgICAgICAgICAgIGd1dHRlckFsaWduXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAvLyBpZiB0aGUgcGFyZW50IGhhcyBhIHJldmVyc2UgZmxleC1kaXJlY3Rpb24sIHN3aXRjaCB0aGUgcGFpciBlbGVtZW50cy5cclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgcGFyZW50RmxleERpcmVjdGlvbiA9PT0gJ3Jvdy1yZXZlcnNlJyB8fFxyXG4gICAgICAgICAgICAgICAgcGFyZW50RmxleERpcmVjdGlvbiA9PT0gJ2NvbHVtbi1yZXZlcnNlJ1xyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcGFpci5hO1xyXG4gICAgICAgICAgICAgICAgcGFpci5hID0gcGFpci5iO1xyXG4gICAgICAgICAgICAgICAgcGFpci5iID0gdGVtcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBzaXplIG9mIHRoZSBjdXJyZW50IGVsZW1lbnQuIElFOCBpcyBzdXBwb3J0ZWQgYnlcclxuICAgICAgICAvLyBzdGF0aWNseSBhc3NpZ25pbmcgc2l6ZXMgd2l0aG91dCBkcmFnZ2FibGUgZ3V0dGVycy4gQXNzaWducyBhIHN0cmluZ1xyXG4gICAgICAgIC8vIHRvIGBzaXplYC5cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIENyZWF0ZSBndXR0ZXIgZWxlbWVudHMgZm9yIGVhY2ggcGFpci5cclxuICAgICAgICBpZiAoaSA+IDApIHtcclxuICAgICAgICAgICAgdmFyIGd1dHRlckVsZW1lbnQgPSBndXR0ZXIoaSwgZGlyZWN0aW9uLCBlbGVtZW50LmVsZW1lbnQpO1xyXG4gICAgICAgICAgICBzZXRHdXR0ZXJTaXplKGd1dHRlckVsZW1lbnQsIGd1dHRlclNpemUsIGkpO1xyXG5cclxuICAgICAgICAgICAgLy8gU2F2ZSBib3VuZCBldmVudCBsaXN0ZW5lciBmb3IgcmVtb3ZhbCBsYXRlclxyXG4gICAgICAgICAgICBwYWlyW2d1dHRlclN0YXJ0RHJhZ2dpbmddID0gc3RhcnREcmFnZ2luZy5iaW5kKHBhaXIpO1xyXG5cclxuICAgICAgICAgICAgLy8gQXR0YWNoIGJvdW5kIGV2ZW50IGxpc3RlbmVyXHJcbiAgICAgICAgICAgIGd1dHRlckVsZW1lbnRbYWRkRXZlbnRMaXN0ZW5lcl0oXHJcbiAgICAgICAgICAgICAgICAnbW91c2Vkb3duJyxcclxuICAgICAgICAgICAgICAgIHBhaXJbZ3V0dGVyU3RhcnREcmFnZ2luZ11cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgZ3V0dGVyRWxlbWVudFthZGRFdmVudExpc3RlbmVyXShcclxuICAgICAgICAgICAgICAgICd0b3VjaHN0YXJ0JyxcclxuICAgICAgICAgICAgICAgIHBhaXJbZ3V0dGVyU3RhcnREcmFnZ2luZ11cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoZ3V0dGVyRWxlbWVudCwgZWxlbWVudC5lbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgIHBhaXIuZ3V0dGVyID0gZ3V0dGVyRWxlbWVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNldEVsZW1lbnRTaXplKFxyXG4gICAgICAgICAgICBlbGVtZW50LmVsZW1lbnQsXHJcbiAgICAgICAgICAgIGVsZW1lbnQuc2l6ZSxcclxuICAgICAgICAgICAgZ2V0R3V0dGVyU2l6ZShcclxuICAgICAgICAgICAgICAgIGd1dHRlclNpemUsXHJcbiAgICAgICAgICAgICAgICBpID09PSAwLFxyXG4gICAgICAgICAgICAgICAgaSA9PT0gaWRzLmxlbmd0aCAtIDEsXHJcbiAgICAgICAgICAgICAgICBndXR0ZXJBbGlnblxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gQWZ0ZXIgdGhlIGZpcnN0IGl0ZXJhdGlvbiwgYW5kIHdlIGhhdmUgYSBwYWlyIG9iamVjdCwgYXBwZW5kIGl0IHRvIHRoZVxyXG4gICAgICAgIC8vIGxpc3Qgb2YgcGFpcnMuXHJcbiAgICAgICAgaWYgKGkgPiAwKSB7XHJcbiAgICAgICAgICAgIHBhaXJzLnB1c2gocGFpcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZWxlbWVudFxyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gYWRqdXN0VG9NaW4oZWxlbWVudCkge1xyXG4gICAgICAgIHZhciBpc0xhc3QgPSBlbGVtZW50LmkgPT09IHBhaXJzLmxlbmd0aDtcclxuICAgICAgICB2YXIgcGFpciA9IGlzTGFzdCA/IHBhaXJzW2VsZW1lbnQuaSAtIDFdIDogcGFpcnNbZWxlbWVudC5pXTtcclxuXHJcbiAgICAgICAgY2FsY3VsYXRlU2l6ZXMuY2FsbChwYWlyKTtcclxuXHJcbiAgICAgICAgdmFyIHNpemUgPSBpc0xhc3RcclxuICAgICAgICAgICAgPyBwYWlyLnNpemUgLSBlbGVtZW50Lm1pblNpemUgLSBwYWlyW2JHdXR0ZXJTaXplXVxyXG4gICAgICAgICAgICA6IGVsZW1lbnQubWluU2l6ZSArIHBhaXJbYUd1dHRlclNpemVdO1xyXG5cclxuICAgICAgICBhZGp1c3QuY2FsbChwYWlyLCBzaXplKTtcclxuICAgIH1cclxuXHJcbiAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIGNvbXB1dGVkU2l6ZSA9IGVsZW1lbnQuZWxlbWVudFtnZXRCb3VuZGluZ0NsaWVudFJlY3RdKClbZGltZW5zaW9uXTtcclxuXHJcbiAgICAgICAgaWYgKGNvbXB1dGVkU2l6ZSA8IGVsZW1lbnQubWluU2l6ZSkge1xyXG4gICAgICAgICAgICBpZiAoZXhwYW5kVG9NaW4pIHtcclxuICAgICAgICAgICAgICAgIGFkanVzdFRvTWluKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50Lm1pblNpemUgPSBjb21wdXRlZFNpemU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBzZXRTaXplcyhuZXdTaXplcykge1xyXG4gICAgICAgIHZhciB0cmltbWVkID0gdHJpbVRvTWluKG5ld1NpemVzKTtcclxuICAgICAgICB0cmltbWVkLmZvckVhY2goZnVuY3Rpb24gKG5ld1NpemUsIGkpIHtcclxuICAgICAgICAgICAgaWYgKGkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFpciA9IHBhaXJzW2kgLSAxXTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYSA9IGVsZW1lbnRzW3BhaXIuYV07XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IGVsZW1lbnRzW3BhaXIuYl07XHJcblxyXG4gICAgICAgICAgICAgICAgYS5zaXplID0gdHJpbW1lZFtpIC0gMV07XHJcbiAgICAgICAgICAgICAgICBiLnNpemUgPSBuZXdTaXplO1xyXG5cclxuICAgICAgICAgICAgICAgIHNldEVsZW1lbnRTaXplKGEuZWxlbWVudCwgYS5zaXplLCBwYWlyW2FHdXR0ZXJTaXplXSwgYS5pKTtcclxuICAgICAgICAgICAgICAgIHNldEVsZW1lbnRTaXplKGIuZWxlbWVudCwgYi5zaXplLCBwYWlyW2JHdXR0ZXJTaXplXSwgYi5pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGRlc3Ryb3kocHJlc2VydmVTdHlsZXMsIHByZXNlcnZlR3V0dGVyKSB7XHJcbiAgICAgICAgcGFpcnMuZm9yRWFjaChmdW5jdGlvbiAocGFpcikge1xyXG4gICAgICAgICAgICBpZiAocHJlc2VydmVHdXR0ZXIgIT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIHBhaXIucGFyZW50LnJlbW92ZUNoaWxkKHBhaXIuZ3V0dGVyKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBhaXIuZ3V0dGVyW3JlbW92ZUV2ZW50TGlzdGVuZXJdKFxyXG4gICAgICAgICAgICAgICAgICAgICdtb3VzZWRvd24nLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhaXJbZ3V0dGVyU3RhcnREcmFnZ2luZ11cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBwYWlyLmd1dHRlcltyZW1vdmVFdmVudExpc3RlbmVyXShcclxuICAgICAgICAgICAgICAgICAgICAndG91Y2hzdGFydCcsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFpcltndXR0ZXJTdGFydERyYWdnaW5nXVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHByZXNlcnZlU3R5bGVzICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3R5bGUgPSBlbGVtZW50U3R5bGUoXHJcbiAgICAgICAgICAgICAgICAgICAgZGltZW5zaW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhaXIuYS5zaXplLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhaXJbYUd1dHRlclNpemVdXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHN0eWxlKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNbcGFpci5hXS5lbGVtZW50LnN0eWxlW3Byb3BdID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNbcGFpci5iXS5lbGVtZW50LnN0eWxlW3Byb3BdID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgc2V0U2l6ZXM6IHNldFNpemVzLFxyXG4gICAgICAgIGdldFNpemVzOiBnZXRTaXplcyxcclxuICAgICAgICBjb2xsYXBzZTogZnVuY3Rpb24gY29sbGFwc2UoaSkge1xyXG4gICAgICAgICAgICBhZGp1c3RUb01pbihlbGVtZW50c1tpXSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZXN0cm95OiBkZXN0cm95LFxyXG4gICAgICAgIHBhcmVudDogcGFyZW50LFxyXG4gICAgICAgIHBhaXJzOiBwYWlycyxcclxuICAgIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNwbGl0O1xyXG4iLCAiaW1wb3J0IFNwbGl0IGZyb20gXCIuL3ZlbmRvci9jdXN0b20vc3BsaXQuanNcIjtcclxuXHJcbi8vIHBhbmVscyBhcmUgaW4gcGFpcnMgWyNwYW5lbEEsICNwYW5lbEJdXHJcbi8vIG9uZSBwYW5lbCAoZWl0aGVyKSBpcyB0aGUgbWFpbiBwYW5lbCwgb25lIHRoZSBtaW5vclxyXG4vLyB0b2dnbGUgY2FuIGJlIGRlZmluZWQsIHdoaWNoIHdpbGwgdG9nZ2xlIHRoZSBtaW5vciBwYW5lbFxyXG5cclxuY2xhc3MgUGFuZWxzIHtcclxuICBjb25zdHJ1Y3RvcihpZGUsIHByZXZpZXcpIHtcclxuICAgIC8vIHVzZWQgdG8gcmVmcmVzaCBhbmQgZm9jdXMgdGhlIGVkaXRvciBvbiBwYW5lbCBjaGFuZ2VcclxuICAgIHRoaXMuaWRlID0gaWRlO1xyXG4gIH1cclxuXHJcbiAgaW5pdChjb25maWcpIHtcclxuICAgIHRoaXMucGFuZWxFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucGFuZWxcIik7XHJcblxyXG4gICAgdGhpcy5jb25maWcgPSBjb25maWcgfHwge307XHJcblxyXG4gICAgdGhpcy5wYW5lbHMgPSB0aGlzLmNyZWF0ZVBhbmVscyhjb25maWcpO1xyXG5cclxuICAgIHRoaXMucmVzdG9yZVN0YXRlKCk7XHJcbiAgfVxyXG5cclxuICBzYXZlU3RhdGUoKSB7XHJcbiAgICBjb25zdCBzdGF0ZSA9IHt9O1xyXG5cclxuICAgIE9iamVjdC5rZXlzKHRoaXMucGFuZWxzKS5mb3JFYWNoKChuYW1lKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBhbmVsID0gdGhpcy5wYW5lbHNbbmFtZV07XHJcbiAgICAgIGlmIChwYW5lbC5zcGxpdCkge1xyXG4gICAgICAgIHN0YXRlW25hbWVdID0ge1xyXG4gICAgICAgICAgc2l6ZXM6IHBhbmVsLnNwbGl0LmdldFNpemVzKCksXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAocGFuZWwudG9nZ2xlKSB7XHJcbiAgICAgICAgICBzdGF0ZVtuYW1lXS50b2dnbGVDaGVja2VkID0gcGFuZWwudG9nZ2xlLmVsZW0uY2hlY2tlZDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwic3BsaXQtc3RhdGVcIiwgSlNPTi5zdHJpbmdpZnkoc3RhdGUpKTtcclxuICB9XHJcblxyXG4gIHJlc3RvcmVTdGF0ZSgpIHtcclxuICAgIGNvbnN0IHN0YXRlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNwbGl0LXN0YXRlXCIpKTtcclxuXHJcbiAgICBpZiAoIXN0YXRlKSByZXR1cm47XHJcblxyXG4gICAgT2JqZWN0LmtleXModGhpcy5wYW5lbHMpLmZvckVhY2goKG5hbWUpID0+IHtcclxuICAgICAgY29uc3QgcGFuZWwgPSB0aGlzLnBhbmVsc1tuYW1lXTtcclxuICAgICAgaWYgKHN0YXRlW25hbWVdKSB7XHJcbiAgICAgICAgaWYgKHN0YXRlW25hbWVdLnNpemVzKSBwYW5lbC5zcGxpdC5zZXRTaXplcyhzdGF0ZVtuYW1lXS5zaXplcyk7XHJcbiAgICAgICAgaWYgKHN0YXRlW25hbWVdLnRvZ2dsZUNoZWNrZWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgcGFuZWwuZW5hYmxlKHN0YXRlW25hbWVdLnRvZ2dsZUNoZWNrZWQpO1xyXG4gICAgICAgICAgcGFuZWwudG9nZ2xlLmVsZW0uY2hlY2tlZCA9IHN0YXRlW25hbWVdLnRvZ2dsZUNoZWNrZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZVBhbmVscyhjb25maWcpIHtcclxuICAgIGNvbnN0IHBhbmVscyA9IHt9O1xyXG5cclxuICAgIGZvciAoY29uc3QgbmFtZSBvZiBPYmplY3Qua2V5cyhjb25maWcuc3BsaXRzKSkge1xyXG4gICAgICBjb25zdCBkZXRhaWxzID0gY29uZmlnLnNwbGl0c1tuYW1lXTtcclxuXHJcbiAgICAgIGNvbnN0IHBhbmVsID0ge1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgY29uZmlnOiBkZXRhaWxzLFxyXG4gICAgICAgIGJyZWFrcG9pbnQ6IGRldGFpbHMuYnJlYWtwb2ludCB8fCAwLFxyXG4gICAgICAgIGlzT3BlbjogbnVsbCxcclxuICAgICAgICBtYWluUGFuZWxJbmRleDogZGV0YWlscy5tYWluUGFuZWwgfHwgMCxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHBhbmVsLm1pbm9yUGFuZWxJbmRleCA9IChwYW5lbC5tYWluUGFuZWxJbmRleCArIDEpICUgMjtcclxuXHJcbiAgICAgIHBhbmVsLnRvZ2dsZSA9IHRoaXMuY3JlYXRlVG9nZ2xlKHBhbmVsKTtcclxuXHJcbiAgICAgIHBhbmVsLmVsZW1lbnRzID0gZGV0YWlscy5zZWxlY3RvcnMubWFwKChzZWxlY3RvcikgPT5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgcGFuZWwuc3BsaXQgPSB0aGlzLmNyZWF0ZVNwbGl0KHBhbmVsKTtcclxuXHJcbiAgICAgIHBhbmVsLmVuYWJsZSA9IChib29sKSA9PiB7XHJcbiAgICAgICAgaWYgKGJvb2wgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICBwYW5lbC5pc09wZW4gPSBmYWxzZTtcclxuICAgICAgICAgIHBhbmVsLmVsZW1lbnRzW3BhbmVsLm1pbm9yUGFuZWxJbmRleF0uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgcGFuZWwuZWxlbWVudHNbcGFuZWwubWFpblBhbmVsSW5kZXhdLmNsYXNzTGlzdC5hZGQoXCJtYXhpbWlzZVwiKTtcclxuICAgICAgICAgIHBhbmVsLnNwbGl0LnBhaXJzWzBdLmd1dHRlci5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHBhbmVsLmlzT3BlbiA9IHRydWU7XHJcbiAgICAgICAgICBwYW5lbC5lbGVtZW50c1twYW5lbC5taW5vclBhbmVsSW5kZXhdLmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgIHBhbmVsLmVsZW1lbnRzW3BhbmVsLm1haW5QYW5lbEluZGV4XS5jbGFzc0xpc3QucmVtb3ZlKFwibWF4aW1pc2VcIik7XHJcbiAgICAgICAgICBwYW5lbC5zcGxpdC5wYWlyc1swXS5ndXR0ZXIuY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGVkXCIpO1xyXG5cclxuICAgICAgICAgIC8vIFRPRE86IGRlY291cGxlIGVkaXRvci9wYW5lbHMuXHJcbiAgICAgICAgICAvLyBUT0RPOiB0aGlzIGlzIGJlaW5nIGNhbGxlZCB0d2ljZSBvbiBsb2FkXHJcbiAgICAgICAgICAvLyBUaGUgaXNzdWUgdXMgdGhhdCBDb2RlbWlycm9yIGF1dG9yZWZyZXNoIGRvZXNuJ3Qgd29ya1xyXG4gICAgICAgICAgLy8gc28gaXQgbXVzdCBiZSBkb25lIG1hbnVhbGx5XHJcbiAgICAgICAgICAvLyBBbHNvLCB0aGUgaWZyYW1lIHdpbGwgbm90IHVwZGF0ZSB1bnRpbCBpdCdzIHZpc2libGVcclxuICAgICAgICAgIC8vIHBvc3NpYmxlIHNvbHV0aW9uOiBhZGQgb25WaXNpYmxlIGV2ZW50IHRvIHBhbmVsXHJcbiAgICAgICAgICBpZiAocGFuZWwubmFtZSA9PT0gXCJtYWluXCIpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5pZGUuZWRpdG9yLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICB0aGlzLmlkZS5lZGl0b3IuZm9jdXMoKTtcclxuICAgICAgICAgICAgICB0aGlzLmlkZS51cGRhdGVQcmV2aWV3KCk7XHJcbiAgICAgICAgICAgIH0sIDEpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIHBhbmVsc1tuYW1lXSA9IHBhbmVsO1xyXG5cclxuICAgICAgaWYgKHBhbmVsLnRvZ2dsZSkgdGhpcy5zZXR1cE9uVG9nZ2xlKHBhbmVsKTtcclxuXHJcbiAgICAgIC8vIFRPRE86IG9uIGxvYWQgdGhpcyBnZXRzIGNhbGxlZCBhbmQgbG9jYWwgc3RvcmFnZSBnZXRzIGNhbGxlZFxyXG4gICAgICAvLyByZXN1bHRpbmcgaW4gbWFpbiBwYW5lbCBiZWluZyBlbmFibGVkIHR3aWNlXHJcbiAgICAgIHRoaXMuY29sbGFwc2VCZWxvd0JyZWFrcG9pbnQocGFuZWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBwYW5lbHM7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVTcGxpdChwYW5lbCkge1xyXG4gICAgcmV0dXJuIG5ldyBTcGxpdChwYW5lbC5jb25maWcuc2VsZWN0b3JzLCB7XHJcbiAgICAgIGRpcmVjdGlvbjogcGFuZWwuY29uZmlnLmRpcmVjdGlvbiB8fCBcImhvcml6b250YWxcIixcclxuICAgICAgZHJhZ0ludGVydmFsOiBwYW5lbC5jb25maWcuZHJhZ0ludGVydmFsIHx8IHRoaXMuY29uZmlnLmRyYWdJbnRlcnZhbCB8fCAxLFxyXG4gICAgICBlbGVtZW50U3R5bGU6XHJcbiAgICAgICAgcGFuZWwuY29uZmlnLmVsZW1lbnRTdHlsZSB8fCB0aGlzLmNvbmZpZy5lbGVtZW50U3R5bGUgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBndXR0ZXJTaXplOiBwYW5lbC5jb25maWcuZ3V0dGVyU2l6ZSB8fCB0aGlzLmNvbmZpZy5ndXR0ZXJTaXplIHx8IDEsXHJcbiAgICAgIGd1dHRlclN0eWxlOlxyXG4gICAgICAgIHBhbmVsLmNvbmZpZy5ndXR0ZXJTdHlsZSB8fCB0aGlzLmNvbmZpZy5ndXR0ZXJTdHlsZSB8fCB1bmRlZmluZWQsXHJcbiAgICAgIG1pblNpemU6IHBhbmVsLmNvbmZpZy5taW5TaXplLFxyXG4gICAgICBzaXplczogcGFuZWwuY29uZmlnLnNpemUsXHJcbiAgICAgIHNuYXBPZmZzZXQ6IHBhbmVsLmNvbmZpZy5zbmFwT2Zmc2V0IHx8IDAsXHJcbiAgICAgIG9uRHJhZ1N0YXJ0OiAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5lbmFibGVQYW5lbEFuaW1hdGlvbihmYWxzZSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIG9uRHJhZ0VuZDogKHNpemVzKSA9PiB7XHJcbiAgICAgICAgaWYgKCFwYW5lbC50b2dnbGUpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgbWlub3JQYW5lbFNpemUgPSBzaXplc1twYW5lbC5taW5vclBhbmVsSW5kZXhdO1xyXG5cclxuICAgICAgICBpZiAobWlub3JQYW5lbFNpemUgPiAxKSB7XHJcbiAgICAgICAgICBwYW5lbC50b2dnbGUuZWxlbS5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgIHBhbmVsLmVuYWJsZSh0cnVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcGFuZWwudG9nZ2xlLmVsZW0uY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgcGFuZWwuZW5hYmxlKGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXRlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZW5hYmxlUGFuZWxBbmltYXRpb24odHJ1ZSk7XHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNvbGxhcHNlQmVsb3dCcmVha3BvaW50KHBhbmVsKSB7XHJcbiAgICBpZiAocGFuZWwuYnJlYWtwb2ludCA+IDApIHtcclxuICAgICAgY29uc3QgZGlyZWN0aW9uID0gcGFuZWwuc3BsaXQucGFpcnNbMF0uZGlyZWN0aW9uO1xyXG5cclxuICAgICAgbGV0IHBhcmVudFNpemU7XHJcbiAgICAgIGlmIChkaXJlY3Rpb24gPT09IFwiaG9yaXpvbnRhbFwiKVxyXG4gICAgICAgIHBhcmVudFNpemUgPSBwYW5lbC5zcGxpdC5wYXJlbnQuY2xpZW50V2lkdGg7XHJcbiAgICAgIGVsc2UgcGFyZW50U2l6ZSA9IHBhbmVsLnNwbGl0LnBhcmVudC5jbGllbnRIZWlnaHQ7XHJcblxyXG4gICAgICBpZiAocGFyZW50U2l6ZSA+IHBhbmVsLmJyZWFrcG9pbnQpIHtcclxuICAgICAgICBwYW5lbC5lbmFibGUodHJ1ZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGFuZWwuZW5hYmxlKGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlVG9nZ2xlKHBhbmVsKSB7XHJcbiAgICBpZiAoIXBhbmVsLmNvbmZpZy50b2dnbGUpIHJldHVybiBudWxsO1xyXG5cclxuICAgIGNvbnN0IHRvZ2dsZUVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBhbmVsLmNvbmZpZy50b2dnbGUpO1xyXG4gICAgY29uc3QgdG9nZ2xlID0ge1xyXG4gICAgICBlbGVtOiB0b2dnbGVFbGVtLFxyXG4gICAgICBvbkljb246IHRvZ2dsZUVsZW0ubGFiZWxzWzBdLnF1ZXJ5U2VsZWN0b3IoXCIub24taWNvblwiKSxcclxuICAgICAgb2ZmSWNvbjogdG9nZ2xlRWxlbS5sYWJlbHNbMF0ucXVlcnlTZWxlY3RvcihcIi5vZmYtaWNvblwiKSxcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHRvZ2dsZTtcclxuICB9XHJcblxyXG4gIHNldHVwT25Ub2dnbGUocGFuZWwpIHtcclxuICAgIGNvbnN0IG9uVG9nZ2xlID0gKCkgPT4ge1xyXG4gICAgICBpZiAocGFuZWwudG9nZ2xlLmVsZW0uY2hlY2tlZCkge1xyXG4gICAgICAgIHBhbmVsLmVuYWJsZSh0cnVlKTtcclxuICAgICAgICBpZiAocGFuZWwuY29uZmlnLnRvZ2dsZVNpemUpXHJcbiAgICAgICAgICBwYW5lbC5zcGxpdC5zZXRTaXplcyhwYW5lbC5jb25maWcudG9nZ2xlU2l6ZSk7XHJcbiAgICAgICAgZWxzZSBwYW5lbC5zcGxpdC5zZXRTaXplcyhwYW5lbC5jb25maWcuc2l6ZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGFuZWwuZW5hYmxlKGZhbHNlKTtcclxuICAgICAgICBwYW5lbC5zcGxpdC5jb2xsYXBzZShwYW5lbC5taW5vclBhbmVsSW5kZXgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnNhdmVTdGF0ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBwYW5lbC50b2dnbGUuZWxlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb25Ub2dnbGUpO1xyXG5cclxuICAgIHBhbmVsLnRvZ2dsZS5kaXNwb3NlID0gKCkgPT4ge1xyXG4gICAgICBwYW5lbC50b2dnbGUuZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb25Ub2dnbGUpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVBhbmVsQW5pbWF0aW9uKGJvb2wpIHtcclxuICAgIHRoaXMucGFuZWxFbGVtZW50cy5mb3JFYWNoKChwYW5lbCkgPT4ge1xyXG4gICAgICBpZiAoYm9vbCkgcGFuZWwuY2xhc3NMaXN0LmFkZChcImFuaW1hdGVcIik7XHJcbiAgICAgIGVsc2UgcGFuZWwuY2xhc3NMaXN0LnJlbW92ZShcImFuaW1hdGVcIik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICBpZiAoIXRoaXMucGFuZWxzKSByZXR1cm47XHJcblxyXG4gICAgT2JqZWN0LnZhbHVlcyh0aGlzLnBhbmVscykuZm9yRWFjaCgocGFuZWwpID0+IHtcclxuICAgICAgcGFuZWwuc3BsaXQuZGVzdHJveSgpO1xyXG4gICAgICBpZiAocGFuZWwudG9nZ2xlKSBwYW5lbC50b2dnbGUuZGlzcG9zZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5wYW5lbHMgPSBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgUGFuZWxzIH07XHJcbiIsICIvLyBOT1RFOiBtdXN0IG1hdGNoIENTUyBicmVha3BvaW50IGZvciBzd2l0Y2hpbmdcclxuLy8gYmV0d2VlbiBmbGV4IGNvbHVtbiBhbmQgcm93XHJcbmNvbnN0IHBhbmVsQnJlYWtwb2ludCA9IDEwMjQ7XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVQYW5lbENvbmZpZyhkaXJlY3Rpb24sIGZ1bGxzY3JlZW4pIHtcclxuICBsZXQgZ3V0dGVyU2l6ZSA9IDU7XHJcbiAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgNzY4KSBndXR0ZXJTaXplID0gMTA7XHJcblxyXG4gIGNvbnN0IGNvbmZpZyA9IHtcclxuICAgIGVsZW1lbnRTdHlsZTogKGRpbWVuc2lvbiwgc2l6ZSwgZ3V0dGVyU2l6ZSkgPT4ge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIFwiZmxleC1iYXNpc1wiOiBgY2FsYygke3NpemV9JSAtICR7Z3V0dGVyU2l6ZX1weClgLFxyXG4gICAgICB9O1xyXG4gICAgfSxcclxuICAgIGd1dHRlclN0eWxlOiAoZGltZW5zaW9uLCBndXR0ZXJTaXplKSA9PiB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgXCJmbGV4LWJhc2lzXCI6IGAke2d1dHRlclNpemV9cHhgLFxyXG4gICAgICB9O1xyXG4gICAgfSxcclxuXHJcbiAgICBzcGxpdHM6IHtcclxuICAgICAgaWRlOiB7XHJcbiAgICAgICAgaXNUb3BQYW5lbDogZnVsbHNjcmVlbixcclxuICAgICAgICBkaXJlY3Rpb246IFwidmVydGljYWxcIixcclxuICAgICAgICBndXR0ZXJTaXplLFxyXG4gICAgICAgIHNuYXBPZmZzZXQ6IDUwLFxyXG4gICAgICAgIHNlbGVjdG9yczogW1wiI2VkaXRvci1wYW5lbFwiLCBcIiNwcmV2aWV3XCJdLFxyXG4gICAgICAgIG1haW5QYW5lbDogMCxcclxuICAgICAgICBzaXplOiBbNjAsIDQwXSxcclxuICAgICAgICBtaW5TaXplOiBbMCwgMF0sXHJcbiAgICAgICAgdG9nZ2xlOiBcIiN0b2dnbGUtcHJldmlld1wiLFxyXG4gICAgICB9LFxyXG4gICAgICBlZGl0b3I6IHtcclxuICAgICAgICBkaXJlY3Rpb246IFwiaG9yaXpvbnRhbFwiLFxyXG4gICAgICAgIGd1dHRlclNpemUsXHJcbiAgICAgICAgc25hcE9mZnNldDogNTAsXHJcbiAgICAgICAgc2VsZWN0b3JzOiBbXCIjZmlsZXRyZWUtcGFuZWxcIiwgXCIjZWRpdG9yXCJdLFxyXG4gICAgICAgIG1haW5QYW5lbDogMSxcclxuICAgICAgICBzaXplOiBbMCwgMTAwXSxcclxuICAgICAgICBtaW5TaXplOiBbMCwgMF0sXHJcbiAgICAgICAgdG9nZ2xlU2l6ZTogWzUwLCA1MF0sXHJcbiAgICAgICAgdG9nZ2xlOiBcIiN0b2dnbGUtZmlsZXRyZWVcIixcclxuICAgICAgfSxcclxuICAgICAgLy8gVE9ETyBsYXRlcjogYWRkIGNvbnNvbGUgcGFuZWwgZm9yIHByZXZpZXdcclxuICAgICAgLy8gcHJldmlldzoge1xyXG4gICAgICAvLyAgIGRpcmVjdGlvbjogJ3ZlcnRpY2FsJyxcclxuICAgICAgLy8gICBndXR0ZXJTaXplLFxyXG4gICAgICAvLyAgc25hcE9mZnNldDogNTAsXHJcbiAgICAgIC8vICAgc2VsZWN0b3JzOiBbXHJcbiAgICAgIC8vICAgICAnI3ByZXZpZXcnLFxyXG4gICAgICAvLyAgICAgJyNwcmV2aWV3LWNvbnNvbGUnLFxyXG4gICAgICAvLyAgIF0sXHJcbiAgICAgIC8vICAgbWFpblBhbmVsOiAwLFxyXG4gICAgICAvLyAgIHNpemU6IFsgMTAwLCAwIF0sXHJcbiAgICAgIC8vICAgbWluU2l6ZTogWyAwLCAwIF0sXHJcbiAgICAgIC8vICAgdG9nZ2xlU2l6ZTogWyA3MCwgMzAgXSxcclxuICAgICAgLy8gICB0b2dnbGU6ICcjdG9nZ2xlLWNvbnNvbGUnLFxyXG4gICAgICAvLyB9LFxyXG4gICAgfSxcclxuICB9O1xyXG5cclxuICBpZiAoIWZ1bGxzY3JlZW4pIHtcclxuICAgIGNvbmZpZy5zcGxpdHMubWFpbiA9IHtcclxuICAgICAgaXNUb3BQYW5lbDogdHJ1ZSxcclxuICAgICAgZGlyZWN0aW9uLFxyXG4gICAgICAvLyBwYW5lbCB3aWxsIGJlIGNsb3NlZCBiZWxvdyB0aGlzIHdpZHRoL2hlaWdodFxyXG4gICAgICBicmVha3BvaW50OiBwYW5lbEJyZWFrcG9pbnQsXHJcbiAgICAgIGd1dHRlclNpemUsXHJcbiAgICAgIHNuYXBPZmZzZXQ6IDAsXHJcbiAgICAgIHNlbGVjdG9yczogW1wibWFpblwiLCBcIiNpZGUtd3JhcHBlclwiXSxcclxuICAgICAgbWFpblBhbmVsOiAwLFxyXG4gICAgICBzaXplOiBbMCwgMF0sXHJcbiAgICAgIG1pblNpemU6IFswLCAwXSxcclxuICAgICAgdG9nZ2xlOiBcIiN0b2dnbGUtaWRlXCIsXHJcbiAgICB9O1xyXG4gIH1cclxuICByZXR1cm4gY29uZmlnO1xyXG59XHJcblxyXG5leHBvcnQgeyBjcmVhdGVQYW5lbENvbmZpZyB9O1xyXG4iLCAiZnVuY3Rpb24gc2F2ZVN0YXRlKHN0cmluZykge1xyXG4gIGNvbnN0IHN0YXRlID0ge1xyXG4gICAgb3JpZW50YXRpb246IHN0cmluZyxcclxuICB9O1xyXG5cclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcclxuICAgICdvcmllbnRhdGlvbi1sb2NrLXN0YXRlJyxcclxuICAgIEpTT04uc3RyaW5naWZ5KHN0YXRlKSxcclxuICApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTdGF0ZSgpIHtcclxuICBjb25zdCBzdGF0ZSA9IEpTT04ucGFyc2UoXHJcbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnb3JpZW50YXRpb24tbG9jay1zdGF0ZScpLFxyXG4gICk7XHJcblxyXG4gIGlmIChzdGF0ZSAmJiBzdGF0ZS5vcmllbnRhdGlvbikgcmV0dXJuIHN0YXRlLm9yaWVudGF0aW9uO1xyXG4gIHJldHVybiAnYXV0byc7XHJcbn1cclxuXHJcbmNsYXNzIE9yaWVudGF0aW9uQ29udHJvbCB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLndyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud3JhcHBlcicpO1xyXG4gICAgY29uc3QgdG9nZ2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI29yaWVudGF0aW9uLXRvZ2dsZScpO1xyXG4gICAgaWYgKCF0b2dnbGUpIHJldHVybjtcclxuICAgIHRoaXMubGFiZWwgPSB0b2dnbGUubGFiZWxzWzBdO1xyXG5cclxuICAgIC8vIGNvbnN0IGF1dG9JY29uID0gdGhpcy5sYWJlbC5xdWVyeVNlbGVjdG9yKCcuYXV0by1pY29uJyk7XHJcbiAgICAvLyBjb25zdCBwb3J0cmFpdEljb24gPSB0aGlzLmxhYmVsLnF1ZXJ5U2VsZWN0b3IoJy5wb3J0cmFpdC1pY29uJyk7XHJcbiAgICAvLyBjb25zdCBsYW5kc2NhcGVJY29uID0gdGhpcy5sYWJlbC5xdWVyeVNlbGVjdG9yKCcubGFuZHNjYXBlLWljb24nKTtcclxuXHJcbiAgICB0aGlzLm9uQ2hhbmdlID0gKCkgPT4ge307XHJcblxyXG4gICAgdGhpcy5sYWJlbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XHJcblxyXG4gICAgY29uc3Qgc3RhdGVWYWx1ZXMgPSBbJ2F1dG8nLCAncG9ydHJhaXQnLCAnbGFuZHNjYXBlJ107XHJcblxyXG4gICAgdGhpcy5zdGF0ZSA9IGdldFN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5zZXRPcmllbnRhdGlvbkxvY2sodGhpcy5zdGF0ZSwgdGhpcy5vbkNoYW5nZSk7XHJcblxyXG4gICAgdG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgY29uc3QgbmV4dFN0YXRlID1cclxuICAgICAgICBzdGF0ZVZhbHVlc1tcclxuICAgICAgICAgIChzdGF0ZVZhbHVlcy5pbmRleE9mKHRoaXMuc3RhdGUpICsgMSkgJSBzdGF0ZVZhbHVlcy5sZW5ndGhcclxuICAgICAgICBdO1xyXG4gICAgICB0aGlzLnN0YXRlID0gbmV4dFN0YXRlO1xyXG5cclxuICAgICAgdGhpcy5zZXRPcmllbnRhdGlvbkxvY2sodGhpcy5zdGF0ZSk7XHJcblxyXG4gICAgICB0aGlzLm9uQ2hhbmdlKHRoaXMuZ2V0TGF5b3V0KCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRPcmllbnRhdGlvbkxvY2sodmFsdWUpIHtcclxuICAgIHN3aXRjaCAodmFsdWUpIHtcclxuICAgICAgY2FzZSAnYXV0byc6XHJcbiAgICAgICAgdGhpcy53cmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoXHJcbiAgICAgICAgICAnb3JpZW50YXRpb24tcG9ydHJhaXQnLFxyXG4gICAgICAgICAgJ29yaWVudGF0aW9uLWxhbmRzY2FwZScsXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLndyYXBwZXIuY2xhc3NMaXN0LmFkZCgnb3JpZW50YXRpb24tYXV0bycpO1xyXG4gICAgICAgIHRoaXMubGFiZWxcclxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuYXV0by1pY29uJylcclxuICAgICAgICAgIC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XHJcbiAgICAgICAgdGhpcy5sYWJlbFxyXG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5wb3J0cmFpdC1pY29uJylcclxuICAgICAgICAgIC5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XHJcbiAgICAgICAgdGhpcy5sYWJlbFxyXG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5sYW5kc2NhcGUtaWNvbicpXHJcbiAgICAgICAgICAuY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdwb3J0cmFpdCc6XHJcbiAgICAgICAgdGhpcy53cmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoXHJcbiAgICAgICAgICAnb3JpZW50YXRpb24tYXV0bycsXHJcbiAgICAgICAgICAnb3JpZW50YXRpb24tbGFuZHNjYXBlJyxcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMud3JhcHBlci5jbGFzc0xpc3QuYWRkKCdvcmllbnRhdGlvbi1wb3J0cmFpdCcpO1xyXG4gICAgICAgIHRoaXMubGFiZWwucXVlcnlTZWxlY3RvcignLmF1dG8taWNvbicpLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcclxuICAgICAgICB0aGlzLmxhYmVsXHJcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcignLnBvcnRyYWl0LWljb24nKVxyXG4gICAgICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcclxuICAgICAgICB0aGlzLmxhYmVsXHJcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmxhbmRzY2FwZS1pY29uJylcclxuICAgICAgICAgIC5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2xhbmRzY2FwZSc6XHJcbiAgICAgICAgdGhpcy53cmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoXHJcbiAgICAgICAgICAnb3JpZW50YXRpb24tYXV0bycsXHJcbiAgICAgICAgICAnb3JpZW50YXRpb24tcG9ydHJhaXQnLFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy53cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ29yaWVudGF0aW9uLWxhbmRzY2FwZScpO1xyXG4gICAgICAgIHRoaXMubGFiZWwucXVlcnlTZWxlY3RvcignLmF1dG8taWNvbicpLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcclxuICAgICAgICB0aGlzLmxhYmVsXHJcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcignLnBvcnRyYWl0LWljb24nKVxyXG4gICAgICAgICAgLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcclxuICAgICAgICB0aGlzLmxhYmVsXHJcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmxhbmRzY2FwZS1pY29uJylcclxuICAgICAgICAgIC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zdGF0ZSA9IHZhbHVlO1xyXG4gICAgc2F2ZVN0YXRlKHZhbHVlKTtcclxuICB9XHJcblxyXG4gIGdldExheW91dCgpIHtcclxuICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xyXG4gICAgICBjYXNlICdsYW5kc2NhcGUnOlxyXG4gICAgICAgIHJldHVybiAnaG9yaXpvbnRhbCc7XHJcbiAgICAgIGNhc2UgJ3BvcnRyYWl0JzpcclxuICAgICAgICByZXR1cm4gJ3ZlcnRpY2FsJztcclxuICAgICAgY2FzZSAnYXV0byc6XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCA+IHdpbmRvdy5pbm5lcldpZHRoXHJcbiAgICAgICAgICA/ICd2ZXJ0aWNhbCdcclxuICAgICAgICAgIDogJ2hvcml6b250YWwnO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgT3JpZW50YXRpb25Db250cm9sIH07XHJcbiIsICJpbXBvcnQgeyBQYW5lbHMgfSBmcm9tICcuL1BhbmVscy5qcyc7XHJcbmltcG9ydCB7IGNyZWF0ZVBhbmVsQ29uZmlnIH0gZnJvbSAnLi9jcmVhdGVQYW5lbENvbmZpZy5qcyc7XHJcbmltcG9ydCB7IE9yaWVudGF0aW9uQ29udHJvbCB9IGZyb20gJy4vb3JpZW50YXRpb25Db250cm9sLmpzJztcclxuXHJcbmxldCBwYW5lbHM7XHJcbmxldCBsYXlvdXQ7XHJcbmxldCBvcmllbnRhdGlvbkNvbnRyb2xzO1xyXG5sZXQgZnVsbFNjcmVlbjtcclxuXHJcbmNvbnN0IGluaXRQYW5lbHMgPSAoKSA9PiB7XHJcbiAgY29uc3QgbmV3TGF5b3V0ID0gb3JpZW50YXRpb25Db250cm9scy5nZXRMYXlvdXQoKTtcclxuXHJcbiAgaWYgKG5ld0xheW91dCA9PT0gbGF5b3V0ICYmIHBhbmVscykgcmV0dXJuO1xyXG5cclxuICBsYXlvdXQgPSBuZXdMYXlvdXQ7XHJcblxyXG4gIHBhbmVscy5kaXNwb3NlKCk7XHJcblxyXG4gIGNvbnN0IGNvbmZpZyA9IGNyZWF0ZVBhbmVsQ29uZmlnKGxheW91dCwgZnVsbFNjcmVlbik7XHJcbiAgcGFuZWxzLmluaXQoY29uZmlnKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIHNldHVwUGFuZWxzKGlkZSwgaXNGdWxsU2NyZWVuKSB7XHJcbiAgZnVsbFNjcmVlbiA9IGlzRnVsbFNjcmVlbjtcclxuICBvcmllbnRhdGlvbkNvbnRyb2xzID0gbmV3IE9yaWVudGF0aW9uQ29udHJvbCgpO1xyXG5cclxuICBwYW5lbHMgPSBuZXcgUGFuZWxzKGlkZSk7XHJcblxyXG4gIGluaXRQYW5lbHMoKTtcclxuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGluaXRQYW5lbHMpO1xyXG5cclxuICBpZiAoIWZ1bGxTY3JlZW4pIHtcclxuICAgIG9yaWVudGF0aW9uQ29udHJvbHMub25DaGFuZ2UgPSBpbml0UGFuZWxzO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgc2V0dXBQYW5lbHMgfTtcclxuIiwgImltcG9ydCB7IHNhdmVBcyB9IGZyb20gJ2ZpbGUtc2F2ZXInO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZU5hbWVGcm9tUGFnZVRpdGxlIH0gZnJvbSAnLi91dGlscy9nZW5lcmF0ZU5hbWVGcm9tUGFnZVRpdGxlLmpzJztcclxuaW1wb3J0IHsgVVpJUCB9IGZyb20gJy4vdmVuZG9yL2N1c3RvbS9VWklQLmpzJztcclxuaW1wb3J0IHsgcmVhZEFzQXJyYXlCdWZmZXIgfSBmcm9tICcuL3ZlbmRvci9jdXN0b20vcmVhZEFzLmpzJztcclxuaW1wb3J0IHsgc3RyaW5nVG9VaW50OCB9IGZyb20gJy4vdXRpbHMvc3RyaW5nVG9VaW50OCc7XHJcblxyXG5jbGFzcyBEb3dubG9hZGVyIHtcclxuICBjb25zdHJ1Y3RvcihmaWxlcywgYXNzZXRzTG9jYXRpb24pIHtcclxuICAgIHRoaXMuZmlsZXMgPSBmaWxlcztcclxuICAgIHRoaXMuYXNzZXRzTG9jYXRpb24gPSBhc3NldHNMb2NhdGlvbjtcclxuICAgIC8vIFRPRE86IGFkZCBhbiBpbnN0cnVjdGlvbnMgZmlsZSB0byB0aGUgemlwXHJcbiAgfVxyXG5cclxuICBhc3luYyBwcmVwYXJlRmlsZXMoKSB7XHJcbiAgICBjb25zdCB6aXBGaWxlcyA9IHt9O1xyXG4gICAgY29uc3QgYXNzZXRzID0gW107XHJcbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgT2JqZWN0LnZhbHVlcyh0aGlzLmZpbGVzKSkge1xyXG4gICAgICBpZiAoZmlsZS5kYXRhVHlwZSA9PT0gJ3RleHQnKSB7XHJcbiAgICAgICAgdGhpcy5hZGRUZXh0RmlsZShmaWxlLCB6aXBGaWxlcyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXNzZXRzLnB1c2goZmlsZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCB0aGlzLmFkZEFzc2V0c1RvWmlwKGFzc2V0cywgemlwRmlsZXMpO1xyXG5cclxuICAgIHJldHVybiB6aXBGaWxlcztcclxuICB9XHJcblxyXG4gIGFkZFRleHRGaWxlKGZpbGUsIHppcEZpbGVzKSB7XHJcbiAgICBjb25zdCB0ZXh0ID0gZmlsZS5nZXRDb250ZW50c1dpdGhJbXBvcnRTdHlsZSgnY2RuJyk7XHJcbiAgICB6aXBGaWxlc1tgJHtmaWxlLnVybH1gXSA9IHN0cmluZ1RvVWludDgodGV4dCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBhZGRBc3NldHNUb1ppcChhc3NldHMsIHppcEZpbGVzKSB7XHJcbiAgICBjb25zdCBmaWxlRGF0YSA9IGF3YWl0IHRoaXMuZmV0Y2hBc3NldHMoYXNzZXRzKTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IFtpbmRleCwgZmlsZV0gb2YgYXNzZXRzLmVudHJpZXMoKSkge1xyXG4gICAgICB6aXBGaWxlc1tgJHtmaWxlLnVybH1gXSA9IG5ldyBVaW50OEFycmF5KFxyXG4gICAgICAgIGF3YWl0IHJlYWRBc0FycmF5QnVmZmVyKGZpbGVEYXRhW2luZGV4XSksXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBUT0RPOiB0aGlzIGZ1bmN0aW9uIGlzIGR1cGxpY2F0ZWQgaW4gRmV0Y2hlclxyXG4gIGFzeW5jIGZldGNoQXNzZXRzKGFzc2V0cykge1xyXG4gICAgY29uc3QgZmlsZVByb21pc2VzID0gW107XHJcblxyXG4gICAgZm9yIChjb25zdCBmaWxlIG9mIGFzc2V0cykge1xyXG4gICAgICBjb25zdCBzZXJ2ZXJVUkwgPSBmaWxlLnVybC5yZXBsYWNlKFxyXG4gICAgICAgIC9hc3NldHNcXC8vZyxcclxuICAgICAgICB0aGlzLmFzc2V0c0xvY2F0aW9uLFxyXG4gICAgICApO1xyXG5cclxuICAgICAgZmlsZVByb21pc2VzLnB1c2goZmV0Y2goc2VydmVyVVJMKSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2VzID0gYXdhaXQgUHJvbWlzZS5hbGwoZmlsZVByb21pc2VzKTtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChyZXNwb25zZXMubWFwKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuYmxvYigpKSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBkb3dubG9hZFBhY2thZ2UoKSB7XHJcbiAgICBjb25zdCBuYW1lID0gZ2VuZXJhdGVOYW1lRnJvbVBhZ2VUaXRsZSgpO1xyXG4gICAgY29uc3QgemlwRmlsZXMgPSBhd2FpdCB0aGlzLnByZXBhcmVGaWxlcygpO1xyXG5cclxuICAgIGNvbnN0IHppcHBlZCA9IFVaSVAuZW5jb2RlKHppcEZpbGVzLCBmYWxzZSk7XHJcbiAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW3ppcHBlZF0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL3ppcCcgfSk7XHJcblxyXG4gICAgc2F2ZUFzKGJsb2IsIGAke25hbWV9LnppcGApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgRG93bmxvYWRlciB9O1xyXG4iLCAiZnVuY3Rpb24gZ2VuZXJhdGVOYW1lRnJvbVBhZ2VUaXRsZSgpIHtcclxuICByZXR1cm4gZG9jdW1lbnQudGl0bGVcclxuICAgIC5zcGxpdCgnfCcpWzBdXHJcbiAgICAudHJpbSgpXHJcbiAgICAucmVwbGFjZSgvIC9nLCAnXycpXHJcbiAgICAucmVwbGFjZSgvW15hLXowLTlfXS9naSwgJycpO1xyXG59XHJcblxyXG5leHBvcnQgeyBnZW5lcmF0ZU5hbWVGcm9tUGFnZVRpdGxlIH07XHJcbiIsICJ2YXIgVVpJUCA9IHt9O1xyXG5cclxuVVpJUFsncGFyc2UnXSA9IGZ1bmN0aW9uIChcclxuICBidWYsXHJcbiAgb25seU5hbWVzLCAvLyBBcnJheUJ1ZmZlclxyXG4pIHtcclxuICB2YXIgclVzID0gVVpJUC5iaW4ucmVhZFVzaG9ydCxcclxuICAgIHJVaSA9IFVaSVAuYmluLnJlYWRVaW50LFxyXG4gICAgbyA9IDAsXHJcbiAgICBvdXQgPSB7fTtcclxuICB2YXIgZGF0YSA9IG5ldyBVaW50OEFycmF5KGJ1Zik7XHJcbiAgdmFyIGVvY2QgPSBkYXRhLmxlbmd0aCAtIDQ7XHJcblxyXG4gIHdoaWxlIChyVWkoZGF0YSwgZW9jZCkgIT0gMHgwNjA1NGI1MCkgZW9jZC0tO1xyXG5cclxuICB2YXIgbyA9IGVvY2Q7XHJcbiAgbyArPSA0OyAvLyBzaWduICA9IDB4MDYwNTRiNTBcclxuICBvICs9IDQ7IC8vIGRpc2tzID0gMDtcclxuICB2YXIgY251ID0gclVzKGRhdGEsIG8pO1xyXG4gIG8gKz0gMjtcclxuICB2YXIgY250ID0gclVzKGRhdGEsIG8pO1xyXG4gIG8gKz0gMjtcclxuXHJcbiAgdmFyIGNzaXplID0gclVpKGRhdGEsIG8pO1xyXG4gIG8gKz0gNDtcclxuICB2YXIgY29mZnMgPSByVWkoZGF0YSwgbyk7XHJcbiAgbyArPSA0O1xyXG5cclxuICBvID0gY29mZnM7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbnU7IGkrKykge1xyXG4gICAgdmFyIHNpZ24gPSByVWkoZGF0YSwgbyk7XHJcbiAgICBvICs9IDQ7XHJcbiAgICBvICs9IDQ7IC8vIHZlcnNpb25zO1xyXG4gICAgbyArPSA0OyAvLyBmbGFnICsgY29tcHJcclxuICAgIG8gKz0gNDsgLy8gdGltZVxyXG5cclxuICAgIHZhciBjcmMzMiA9IHJVaShkYXRhLCBvKTtcclxuICAgIG8gKz0gNDtcclxuICAgIHZhciBjc2l6ZSA9IHJVaShkYXRhLCBvKTtcclxuICAgIG8gKz0gNDtcclxuICAgIHZhciB1c2l6ZSA9IHJVaShkYXRhLCBvKTtcclxuICAgIG8gKz0gNDtcclxuXHJcbiAgICB2YXIgbmwgPSByVXMoZGF0YSwgbyksXHJcbiAgICAgIGVsID0gclVzKGRhdGEsIG8gKyAyKSxcclxuICAgICAgY2wgPSByVXMoZGF0YSwgbyArIDQpO1xyXG4gICAgbyArPSA2OyAvLyBuYW1lLCBleHRyYSwgY29tbWVudFxyXG4gICAgbyArPSA4OyAvLyBkaXNrLCBhdHRyaWJzXHJcblxyXG4gICAgdmFyIHJvZmYgPSByVWkoZGF0YSwgbyk7XHJcbiAgICBvICs9IDQ7XHJcbiAgICBvICs9IG5sICsgZWwgKyBjbDtcclxuXHJcbiAgICBVWklQLl9yZWFkTG9jYWwoZGF0YSwgcm9mZiwgb3V0LCBjc2l6ZSwgdXNpemUsIG9ubHlOYW1lcyk7XHJcbiAgfVxyXG4gIC8vY29uc29sZS5sb2cob3V0KTtcclxuICByZXR1cm4gb3V0O1xyXG59O1xyXG5cclxuVVpJUC5fcmVhZExvY2FsID0gZnVuY3Rpb24gKGRhdGEsIG8sIG91dCwgY3NpemUsIHVzaXplLCBvbmx5TmFtZXMpIHtcclxuICB2YXIgclVzID0gVVpJUC5iaW4ucmVhZFVzaG9ydCxcclxuICAgIHJVaSA9IFVaSVAuYmluLnJlYWRVaW50O1xyXG4gIHZhciBzaWduID0gclVpKGRhdGEsIG8pO1xyXG4gIG8gKz0gNDtcclxuICB2YXIgdmVyID0gclVzKGRhdGEsIG8pO1xyXG4gIG8gKz0gMjtcclxuICB2YXIgZ3BmbGcgPSByVXMoZGF0YSwgbyk7XHJcbiAgbyArPSAyO1xyXG4gIC8vaWYoKGdwZmxnJjgpIT0wKSB0aHJvdyBcInVua25vd24gc2l6ZXNcIjtcclxuICB2YXIgY21wciA9IHJVcyhkYXRhLCBvKTtcclxuICBvICs9IDI7XHJcblxyXG4gIHZhciB0aW1lID0gclVpKGRhdGEsIG8pO1xyXG4gIG8gKz0gNDtcclxuXHJcbiAgdmFyIGNyYzMyID0gclVpKGRhdGEsIG8pO1xyXG4gIG8gKz0gNDtcclxuICAvL3ZhciBjc2l6ZSA9IHJVaShkYXRhLCBvKTsgIG8rPTQ7XHJcbiAgLy92YXIgdXNpemUgPSByVWkoZGF0YSwgbyk7ICBvKz00O1xyXG4gIG8gKz0gODtcclxuXHJcbiAgdmFyIG5sZW4gPSByVXMoZGF0YSwgbyk7XHJcbiAgbyArPSAyO1xyXG4gIHZhciBlbGVuID0gclVzKGRhdGEsIG8pO1xyXG4gIG8gKz0gMjtcclxuXHJcbiAgdmFyIG5hbWUgPSBVWklQLmJpbi5yZWFkVVRGOChkYXRhLCBvLCBubGVuKTtcclxuICBvICs9IG5sZW47IC8vY29uc29sZS5sb2cobmFtZSk7XHJcbiAgbyArPSBlbGVuO1xyXG5cclxuICAvL2NvbnNvbGUubG9nKHNpZ24udG9TdHJpbmcoMTYpLCB2ZXIsIGdwZmxnLCBjbXByLCBjcmMzMi50b1N0cmluZygxNiksIFwiY3NpemUsIHVzaXplXCIsIGNzaXplLCB1c2l6ZSwgbmxlbiwgZWxlbiwgbmFtZSwgbyk7XHJcbiAgaWYgKG9ubHlOYW1lcykge1xyXG4gICAgb3V0W25hbWVdID0geyBzaXplOiB1c2l6ZSwgY3NpemU6IGNzaXplIH07XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIHZhciBmaWxlID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS5idWZmZXIsIG8pO1xyXG4gIGlmIChmYWxzZSkge1xyXG4gIH0gZWxzZSBpZiAoY21wciA9PSAwKVxyXG4gICAgb3V0W25hbWVdID0gbmV3IFVpbnQ4QXJyYXkoZmlsZS5idWZmZXIuc2xpY2UobywgbyArIGNzaXplKSk7XHJcbiAgZWxzZSBpZiAoY21wciA9PSA4KSB7XHJcbiAgICB2YXIgYnVmID0gbmV3IFVpbnQ4QXJyYXkodXNpemUpO1xyXG4gICAgVVpJUC5pbmZsYXRlUmF3KGZpbGUsIGJ1Zik7XHJcbiAgICAvKnZhciBuYnVmID0gcGFrb1tcImluZmxhdGVSYXdcIl0oZmlsZSk7XHJcblx0XHRpZih1c2l6ZT44NTE0MDAwKSB7XHJcblx0XHRcdC8vY29uc29sZS5sb2coUFV0aWxzLnJlYWRBU0NJSShidWYgLCA4NTE0NTAwLCA1MDApKTtcclxuXHRcdFx0Ly9jb25zb2xlLmxvZyhQVXRpbHMucmVhZEFTQ0lJKG5idWYsIDg1MTQ1MDAsIDUwMCkpO1xyXG5cdFx0fVxyXG5cdFx0Zm9yKHZhciBpPTA7IGk8YnVmLmxlbmd0aDsgaSsrKSBpZihidWZbaV0hPW5idWZbaV0pIHsgIGNvbnNvbGUubG9nKGJ1Zi5sZW5ndGgsIG5idWYubGVuZ3RoLCB1c2l6ZSwgaSk7ICB0aHJvdyBcImVcIjsgIH1cclxuXHRcdCovXHJcbiAgICBvdXRbbmFtZV0gPSBidWY7XHJcbiAgfSBlbHNlIHRocm93ICd1bmtub3duIGNvbXByZXNzaW9uIG1ldGhvZDogJyArIGNtcHI7XHJcbn07XHJcblxyXG5VWklQLmluZmxhdGVSYXcgPSBmdW5jdGlvbiAoZmlsZSwgYnVmKSB7XHJcbiAgcmV0dXJuIFVaSVAuRi5pbmZsYXRlKGZpbGUsIGJ1Zik7XHJcbn07XHJcblVaSVAuaW5mbGF0ZSA9IGZ1bmN0aW9uIChmaWxlLCBidWYpIHtcclxuICB2YXIgQ01GID0gZmlsZVswXSxcclxuICAgIEZMRyA9IGZpbGVbMV07XHJcbiAgdmFyIENNID0gQ01GICYgMTUsXHJcbiAgICBDSU5GTyA9IENNRiA+Pj4gNDtcclxuICAvL2NvbnNvbGUubG9nKENNLCBDSU5GTyxDTUYsRkxHKTtcclxuICByZXR1cm4gVVpJUC5pbmZsYXRlUmF3KFxyXG4gICAgbmV3IFVpbnQ4QXJyYXkoZmlsZS5idWZmZXIsIGZpbGUuYnl0ZU9mZnNldCArIDIsIGZpbGUubGVuZ3RoIC0gNiksXHJcbiAgICBidWYsXHJcbiAgKTtcclxufTtcclxuVVpJUC5kZWZsYXRlID0gZnVuY3Rpb24gKGRhdGEsIG9wdHMgLyosIGJ1Ziwgb2ZmKi8pIHtcclxuICBpZiAob3B0cyA9PSBudWxsKSBvcHRzID0geyBsZXZlbDogNiB9O1xyXG4gIHZhciBvZmYgPSAwLFxyXG4gICAgYnVmID0gbmV3IFVpbnQ4QXJyYXkoNTAgKyBNYXRoLmZsb29yKGRhdGEubGVuZ3RoICogMS4xKSk7XHJcbiAgYnVmW29mZl0gPSAxMjA7XHJcbiAgYnVmW29mZiArIDFdID0gMTU2O1xyXG4gIG9mZiArPSAyO1xyXG4gIG9mZiA9IFVaSVAuRi5kZWZsYXRlUmF3KGRhdGEsIGJ1Ziwgb2ZmLCBvcHRzLmxldmVsKTtcclxuICB2YXIgY3JjID0gVVpJUC5hZGxlcihkYXRhLCAwLCBkYXRhLmxlbmd0aCk7XHJcbiAgYnVmW29mZiArIDBdID0gKGNyYyA+Pj4gMjQpICYgMjU1O1xyXG4gIGJ1ZltvZmYgKyAxXSA9IChjcmMgPj4+IDE2KSAmIDI1NTtcclxuICBidWZbb2ZmICsgMl0gPSAoY3JjID4+PiA4KSAmIDI1NTtcclxuICBidWZbb2ZmICsgM10gPSAoY3JjID4+PiAwKSAmIDI1NTtcclxuICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYnVmLmJ1ZmZlciwgMCwgb2ZmICsgNCk7XHJcbn07XHJcblVaSVAuZGVmbGF0ZVJhdyA9IGZ1bmN0aW9uIChkYXRhLCBvcHRzKSB7XHJcbiAgaWYgKG9wdHMgPT0gbnVsbCkgb3B0cyA9IHsgbGV2ZWw6IDYgfTtcclxuICB2YXIgYnVmID0gbmV3IFVpbnQ4QXJyYXkoNTAgKyBNYXRoLmZsb29yKGRhdGEubGVuZ3RoICogMS4xKSk7XHJcbiAgdmFyIG9mZiA9IFVaSVAuRi5kZWZsYXRlUmF3KGRhdGEsIGJ1Ziwgb2ZmLCBvcHRzLmxldmVsKTtcclxuICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYnVmLmJ1ZmZlciwgMCwgb2ZmKTtcclxufTtcclxuXHJcblVaSVAuZW5jb2RlID0gZnVuY3Rpb24gKG9iaiwgbm9DbXByKSB7XHJcbiAgaWYgKG5vQ21wciA9PSBudWxsKSBub0NtcHIgPSBmYWxzZTtcclxuICB2YXIgdG90ID0gMCxcclxuICAgIHdVaSA9IFVaSVAuYmluLndyaXRlVWludCxcclxuICAgIHdVcyA9IFVaSVAuYmluLndyaXRlVXNob3J0O1xyXG4gIHZhciB6cGQgPSB7fTtcclxuICBmb3IgKHZhciBwIGluIG9iaikge1xyXG4gICAgdmFyIGNwciA9ICFVWklQLl9ub05lZWQocCkgJiYgIW5vQ21wcixcclxuICAgICAgYnVmID0gb2JqW3BdLFxyXG4gICAgICBjcmMgPSBVWklQLmNyYy5jcmMoYnVmLCAwLCBidWYubGVuZ3RoKTtcclxuICAgIHpwZFtwXSA9IHtcclxuICAgICAgY3ByOiBjcHIsXHJcbiAgICAgIHVzaXplOiBidWYubGVuZ3RoLFxyXG4gICAgICBjcmM6IGNyYyxcclxuICAgICAgZmlsZTogY3ByID8gVVpJUC5kZWZsYXRlUmF3KGJ1ZikgOiBidWYsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZm9yICh2YXIgcCBpbiB6cGQpXHJcbiAgICB0b3QgKz0genBkW3BdLmZpbGUubGVuZ3RoICsgMzAgKyA0NiArIDIgKiBVWklQLmJpbi5zaXplVVRGOChwKTtcclxuICB0b3QgKz0gMjI7XHJcblxyXG4gIHZhciBkYXRhID0gbmV3IFVpbnQ4QXJyYXkodG90KSxcclxuICAgIG8gPSAwO1xyXG4gIHZhciBmb2YgPSBbXTtcclxuXHJcbiAgZm9yICh2YXIgcCBpbiB6cGQpIHtcclxuICAgIHZhciBmaWxlID0genBkW3BdO1xyXG4gICAgZm9mLnB1c2gobyk7XHJcbiAgICBvID0gVVpJUC5fd3JpdGVIZWFkZXIoZGF0YSwgbywgcCwgZmlsZSwgMCk7XHJcbiAgfVxyXG4gIHZhciBpID0gMCxcclxuICAgIGlvZmYgPSBvO1xyXG4gIGZvciAodmFyIHAgaW4genBkKSB7XHJcbiAgICB2YXIgZmlsZSA9IHpwZFtwXTtcclxuICAgIGZvZi5wdXNoKG8pO1xyXG4gICAgbyA9IFVaSVAuX3dyaXRlSGVhZGVyKGRhdGEsIG8sIHAsIGZpbGUsIDEsIGZvZltpKytdKTtcclxuICB9XHJcbiAgdmFyIGNzaXplID0gbyAtIGlvZmY7XHJcblxyXG4gIHdVaShkYXRhLCBvLCAweDA2MDU0YjUwKTtcclxuICBvICs9IDQ7XHJcbiAgbyArPSA0OyAvLyBkaXNrc1xyXG4gIHdVcyhkYXRhLCBvLCBpKTtcclxuICBvICs9IDI7XHJcbiAgd1VzKGRhdGEsIG8sIGkpO1xyXG4gIG8gKz0gMjsgLy8gbnVtYmVyIG9mIGMgZCByZWNvcmRzXHJcbiAgd1VpKGRhdGEsIG8sIGNzaXplKTtcclxuICBvICs9IDQ7XHJcbiAgd1VpKGRhdGEsIG8sIGlvZmYpO1xyXG4gIG8gKz0gNDtcclxuICBvICs9IDI7XHJcbiAgcmV0dXJuIGRhdGEuYnVmZmVyO1xyXG59O1xyXG4vLyBubyBuZWVkIHRvIGNvbXByZXNzIC5QTkcsIC5aSVAsIC5KUEVHIC4uLi5cclxuVVpJUC5fbm9OZWVkID0gZnVuY3Rpb24gKGZuKSB7XHJcbiAgdmFyIGV4dCA9IGZuLnNwbGl0KCcuJykucG9wKCkudG9Mb3dlckNhc2UoKTtcclxuICByZXR1cm4gJ3BuZyxqcGcsanBlZyx6aXAnLmluZGV4T2YoZXh0KSAhPSAtMTtcclxufTtcclxuXHJcblVaSVAuX3dyaXRlSGVhZGVyID0gZnVuY3Rpb24gKGRhdGEsIG8sIHAsIG9iaiwgdCwgcm9mZikge1xyXG4gIHZhciB3VWkgPSBVWklQLmJpbi53cml0ZVVpbnQsXHJcbiAgICB3VXMgPSBVWklQLmJpbi53cml0ZVVzaG9ydDtcclxuICB2YXIgZmlsZSA9IG9iai5maWxlO1xyXG5cclxuICB3VWkoZGF0YSwgbywgdCA9PSAwID8gMHgwNDAzNGI1MCA6IDB4MDIwMTRiNTApO1xyXG4gIG8gKz0gNDsgLy8gc2lnblxyXG4gIGlmICh0ID09IDEpIG8gKz0gMjsgLy8gdmVyIG1hZGUgYnlcclxuICB3VXMoZGF0YSwgbywgMjApO1xyXG4gIG8gKz0gMjsgLy8gdmVyXHJcbiAgd1VzKGRhdGEsIG8sIDApO1xyXG4gIG8gKz0gMjsgLy8gZ2ZsaXBcclxuICB3VXMoZGF0YSwgbywgb2JqLmNwciA/IDggOiAwKTtcclxuICBvICs9IDI7IC8vIGNtcHJcclxuXHJcbiAgd1VpKGRhdGEsIG8sIDApO1xyXG4gIG8gKz0gNDsgLy8gdGltZVxyXG4gIHdVaShkYXRhLCBvLCBvYmouY3JjKTtcclxuICBvICs9IDQ7IC8vIGNyYzMyXHJcbiAgd1VpKGRhdGEsIG8sIGZpbGUubGVuZ3RoKTtcclxuICBvICs9IDQ7IC8vIGNzaXplXHJcbiAgd1VpKGRhdGEsIG8sIG9iai51c2l6ZSk7XHJcbiAgbyArPSA0OyAvLyB1c2l6ZVxyXG5cclxuICB3VXMoZGF0YSwgbywgVVpJUC5iaW4uc2l6ZVVURjgocCkpO1xyXG4gIG8gKz0gMjsgLy8gbmxlblxyXG4gIHdVcyhkYXRhLCBvLCAwKTtcclxuICBvICs9IDI7IC8vIGVsZW5cclxuXHJcbiAgaWYgKHQgPT0gMSkge1xyXG4gICAgbyArPSAyOyAvLyBjb21tZW50IGxlbmd0aFxyXG4gICAgbyArPSAyOyAvLyBkaXNrIG51bWJlclxyXG4gICAgbyArPSA2OyAvLyBhdHRyaWJ1dGVzXHJcbiAgICB3VWkoZGF0YSwgbywgcm9mZik7XHJcbiAgICBvICs9IDQ7IC8vIHVzaXplXHJcbiAgfVxyXG4gIHZhciBubGVuID0gVVpJUC5iaW4ud3JpdGVVVEY4KGRhdGEsIG8sIHApO1xyXG4gIG8gKz0gbmxlbjtcclxuICBpZiAodCA9PSAwKSB7XHJcbiAgICBkYXRhLnNldChmaWxlLCBvKTtcclxuICAgIG8gKz0gZmlsZS5sZW5ndGg7XHJcbiAgfVxyXG4gIHJldHVybiBvO1xyXG59O1xyXG5cclxuVVpJUC5jcmMgPSB7XHJcbiAgdGFibGU6IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgdGFiID0gbmV3IFVpbnQzMkFycmF5KDI1Nik7XHJcbiAgICBmb3IgKHZhciBuID0gMDsgbiA8IDI1NjsgbisrKSB7XHJcbiAgICAgIHZhciBjID0gbjtcclxuICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCA4OyBrKyspIHtcclxuICAgICAgICBpZiAoYyAmIDEpIGMgPSAweGVkYjg4MzIwIF4gKGMgPj4+IDEpO1xyXG4gICAgICAgIGVsc2UgYyA9IGMgPj4+IDE7XHJcbiAgICAgIH1cclxuICAgICAgdGFiW25dID0gYztcclxuICAgIH1cclxuICAgIHJldHVybiB0YWI7XHJcbiAgfSkoKSxcclxuICB1cGRhdGU6IGZ1bmN0aW9uIChjLCBidWYsIG9mZiwgbGVuKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKVxyXG4gICAgICBjID0gVVpJUC5jcmMudGFibGVbKGMgXiBidWZbb2ZmICsgaV0pICYgMHhmZl0gXiAoYyA+Pj4gOCk7XHJcbiAgICByZXR1cm4gYztcclxuICB9LFxyXG4gIGNyYzogZnVuY3Rpb24gKGIsIG8sIGwpIHtcclxuICAgIHJldHVybiBVWklQLmNyYy51cGRhdGUoMHhmZmZmZmZmZiwgYiwgbywgbCkgXiAweGZmZmZmZmZmO1xyXG4gIH0sXHJcbn07XHJcblVaSVAuYWRsZXIgPSBmdW5jdGlvbiAoZGF0YSwgbywgbGVuKSB7XHJcbiAgdmFyIGEgPSAxLFxyXG4gICAgYiA9IDA7XHJcbiAgdmFyIG9mZiA9IG8sXHJcbiAgICBlbmQgPSBvICsgbGVuO1xyXG4gIHdoaWxlIChvZmYgPCBlbmQpIHtcclxuICAgIHZhciBlZW5kID0gTWF0aC5taW4ob2ZmICsgNTU1MiwgZW5kKTtcclxuICAgIHdoaWxlIChvZmYgPCBlZW5kKSB7XHJcbiAgICAgIGEgKz0gZGF0YVtvZmYrK107XHJcbiAgICAgIGIgKz0gYTtcclxuICAgIH1cclxuICAgIGEgPSBhICUgNjU1MjE7XHJcbiAgICBiID0gYiAlIDY1NTIxO1xyXG4gIH1cclxuICByZXR1cm4gKGIgPDwgMTYpIHwgYTtcclxufTtcclxuXHJcblVaSVAuYmluID0ge1xyXG4gIHJlYWRVc2hvcnQ6IGZ1bmN0aW9uIChidWZmLCBwKSB7XHJcbiAgICByZXR1cm4gYnVmZltwXSB8IChidWZmW3AgKyAxXSA8PCA4KTtcclxuICB9LFxyXG4gIHdyaXRlVXNob3J0OiBmdW5jdGlvbiAoYnVmZiwgcCwgbikge1xyXG4gICAgYnVmZltwXSA9IG4gJiAyNTU7XHJcbiAgICBidWZmW3AgKyAxXSA9IChuID4+IDgpICYgMjU1O1xyXG4gIH0sXHJcbiAgcmVhZFVpbnQ6IGZ1bmN0aW9uIChidWZmLCBwKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBidWZmW3AgKyAzXSAqICgyNTYgKiAyNTYgKiAyNTYpICtcclxuICAgICAgKChidWZmW3AgKyAyXSA8PCAxNikgfCAoYnVmZltwICsgMV0gPDwgOCkgfCBidWZmW3BdKVxyXG4gICAgKTtcclxuICB9LFxyXG4gIHdyaXRlVWludDogZnVuY3Rpb24gKGJ1ZmYsIHAsIG4pIHtcclxuICAgIGJ1ZmZbcF0gPSBuICYgMjU1O1xyXG4gICAgYnVmZltwICsgMV0gPSAobiA+PiA4KSAmIDI1NTtcclxuICAgIGJ1ZmZbcCArIDJdID0gKG4gPj4gMTYpICYgMjU1O1xyXG4gICAgYnVmZltwICsgM10gPSAobiA+PiAyNCkgJiAyNTU7XHJcbiAgfSxcclxuICByZWFkQVNDSUk6IGZ1bmN0aW9uIChidWZmLCBwLCBsKSB7XHJcbiAgICB2YXIgcyA9ICcnO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyBpKyspIHMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZmW3AgKyBpXSk7XHJcbiAgICByZXR1cm4gcztcclxuICB9LFxyXG4gIHdyaXRlQVNDSUk6IGZ1bmN0aW9uIChkYXRhLCBwLCBzKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHMubGVuZ3RoOyBpKyspIGRhdGFbcCArIGldID0gcy5jaGFyQ29kZUF0KGkpO1xyXG4gIH0sXHJcbiAgcGFkOiBmdW5jdGlvbiAobikge1xyXG4gICAgcmV0dXJuIG4ubGVuZ3RoIDwgMiA/ICcwJyArIG4gOiBuO1xyXG4gIH0sXHJcbiAgcmVhZFVURjg6IGZ1bmN0aW9uIChidWZmLCBwLCBsKSB7XHJcbiAgICB2YXIgcyA9ICcnLFxyXG4gICAgICBucztcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKVxyXG4gICAgICBzICs9ICclJyArIFVaSVAuYmluLnBhZChidWZmW3AgKyBpXS50b1N0cmluZygxNikpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgbnMgPSBkZWNvZGVVUklDb21wb25lbnQocyk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiBVWklQLmJpbi5yZWFkQVNDSUkoYnVmZiwgcCwgbCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnM7XHJcbiAgfSxcclxuICB3cml0ZVVURjg6IGZ1bmN0aW9uIChidWZmLCBwLCBzdHIpIHtcclxuICAgIHZhciBzdHJsID0gc3RyLmxlbmd0aCxcclxuICAgICAgaSA9IDA7XHJcbiAgICBmb3IgKHZhciBjaSA9IDA7IGNpIDwgc3RybDsgY2krKykge1xyXG4gICAgICB2YXIgY29kZSA9IHN0ci5jaGFyQ29kZUF0KGNpKTtcclxuICAgICAgaWYgKChjb2RlICYgKDB4ZmZmZmZmZmYgLSAoMSA8PCA3KSArIDEpKSA9PSAwKSB7XHJcbiAgICAgICAgYnVmZltwICsgaV0gPSBjb2RlO1xyXG4gICAgICAgIGkrKztcclxuICAgICAgfSBlbHNlIGlmICgoY29kZSAmICgweGZmZmZmZmZmIC0gKDEgPDwgMTEpICsgMSkpID09IDApIHtcclxuICAgICAgICBidWZmW3AgKyBpXSA9IDE5MiB8IChjb2RlID4+IDYpO1xyXG4gICAgICAgIGJ1ZmZbcCArIGkgKyAxXSA9IDEyOCB8ICgoY29kZSA+PiAwKSAmIDYzKTtcclxuICAgICAgICBpICs9IDI7XHJcbiAgICAgIH0gZWxzZSBpZiAoKGNvZGUgJiAoMHhmZmZmZmZmZiAtICgxIDw8IDE2KSArIDEpKSA9PSAwKSB7XHJcbiAgICAgICAgYnVmZltwICsgaV0gPSAyMjQgfCAoY29kZSA+PiAxMik7XHJcbiAgICAgICAgYnVmZltwICsgaSArIDFdID0gMTI4IHwgKChjb2RlID4+IDYpICYgNjMpO1xyXG4gICAgICAgIGJ1ZmZbcCArIGkgKyAyXSA9IDEyOCB8ICgoY29kZSA+PiAwKSAmIDYzKTtcclxuICAgICAgICBpICs9IDM7XHJcbiAgICAgIH0gZWxzZSBpZiAoKGNvZGUgJiAoMHhmZmZmZmZmZiAtICgxIDw8IDIxKSArIDEpKSA9PSAwKSB7XHJcbiAgICAgICAgYnVmZltwICsgaV0gPSAyNDAgfCAoY29kZSA+PiAxOCk7XHJcbiAgICAgICAgYnVmZltwICsgaSArIDFdID0gMTI4IHwgKChjb2RlID4+IDEyKSAmIDYzKTtcclxuICAgICAgICBidWZmW3AgKyBpICsgMl0gPSAxMjggfCAoKGNvZGUgPj4gNikgJiA2Myk7XHJcbiAgICAgICAgYnVmZltwICsgaSArIDNdID0gMTI4IHwgKChjb2RlID4+IDApICYgNjMpO1xyXG4gICAgICAgIGkgKz0gNDtcclxuICAgICAgfSBlbHNlIHRocm93ICdlJztcclxuICAgIH1cclxuICAgIHJldHVybiBpO1xyXG4gIH0sXHJcbiAgc2l6ZVVURjg6IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIHZhciBzdHJsID0gc3RyLmxlbmd0aCxcclxuICAgICAgaSA9IDA7XHJcbiAgICBmb3IgKHZhciBjaSA9IDA7IGNpIDwgc3RybDsgY2krKykge1xyXG4gICAgICB2YXIgY29kZSA9IHN0ci5jaGFyQ29kZUF0KGNpKTtcclxuICAgICAgaWYgKChjb2RlICYgKDB4ZmZmZmZmZmYgLSAoMSA8PCA3KSArIDEpKSA9PSAwKSB7XHJcbiAgICAgICAgaSsrO1xyXG4gICAgICB9IGVsc2UgaWYgKChjb2RlICYgKDB4ZmZmZmZmZmYgLSAoMSA8PCAxMSkgKyAxKSkgPT0gMCkge1xyXG4gICAgICAgIGkgKz0gMjtcclxuICAgICAgfSBlbHNlIGlmICgoY29kZSAmICgweGZmZmZmZmZmIC0gKDEgPDwgMTYpICsgMSkpID09IDApIHtcclxuICAgICAgICBpICs9IDM7XHJcbiAgICAgIH0gZWxzZSBpZiAoKGNvZGUgJiAoMHhmZmZmZmZmZiAtICgxIDw8IDIxKSArIDEpKSA9PSAwKSB7XHJcbiAgICAgICAgaSArPSA0O1xyXG4gICAgICB9IGVsc2UgdGhyb3cgJ2UnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGk7XHJcbiAgfSxcclxufTtcclxuXHJcblVaSVAuRiA9IHt9O1xyXG5cclxuVVpJUC5GLmRlZmxhdGVSYXcgPSBmdW5jdGlvbiAoZGF0YSwgb3V0LCBvcG9zLCBsdmwpIHtcclxuICB2YXIgb3B0cyA9IFtcclxuICAgIC8qXHJcblx0XHQgdXNoIGdvb2RfbGVuZ3RoOyAvKiByZWR1Y2UgbGF6eSBzZWFyY2ggYWJvdmUgdGhpcyBtYXRjaCBsZW5ndGhcclxuXHRcdCB1c2ggbWF4X2xhenk7ICAgIC8qIGRvIG5vdCBwZXJmb3JtIGxhenkgc2VhcmNoIGFib3ZlIHRoaXMgbWF0Y2ggbGVuZ3RoXHJcbiAgICAgICAgIHVzaCBuaWNlX2xlbmd0aDsgLyogcXVpdCBzZWFyY2ggYWJvdmUgdGhpcyBtYXRjaCBsZW5ndGhcclxuXHQqL1xyXG4gICAgLyogICAgICBnb29kIGxhenkgbmljZSBjaGFpbiAqL1xyXG4gICAgLyogMCAqLyBbMCwgMCwgMCwgMCwgMF0gLyogc3RvcmUgb25seSAqLyxcclxuICAgIC8qIDEgKi8gWzQsIDQsIDgsIDQsIDBdIC8qIG1heCBzcGVlZCwgbm8gbGF6eSBtYXRjaGVzICovLFxyXG4gICAgLyogMiAqLyBbNCwgNSwgMTYsIDgsIDBdLFxyXG4gICAgLyogMyAqLyBbNCwgNiwgMTYsIDE2LCAwXSxcclxuXHJcbiAgICAvKiA0ICovIFs0LCAxMCwgMTYsIDMyLCAwXSAvKiBsYXp5IG1hdGNoZXMgKi8sXHJcbiAgICAvKiA1ICovIFs4LCAxNiwgMzIsIDMyLCAwXSxcclxuICAgIC8qIDYgKi8gWzgsIDE2LCAxMjgsIDEyOCwgMF0sXHJcbiAgICAvKiA3ICovIFs4LCAzMiwgMTI4LCAyNTYsIDBdLFxyXG4gICAgLyogOCAqLyBbMzIsIDEyOCwgMjU4LCAxMDI0LCAxXSxcclxuICAgIC8qIDkgKi8gWzMyLCAyNTgsIDI1OCwgNDA5NiwgMV0sXHJcbiAgXTsgLyogbWF4IGNvbXByZXNzaW9uICovXHJcblxyXG4gIHZhciBvcHQgPSBvcHRzW2x2bF07XHJcblxyXG4gIHZhciBVID0gVVpJUC5GLlUsXHJcbiAgICBnb29kSW5kZXggPSBVWklQLkYuX2dvb2RJbmRleCxcclxuICAgIGhhc2ggPSBVWklQLkYuX2hhc2gsXHJcbiAgICBwdXRzRSA9IFVaSVAuRi5fcHV0c0U7XHJcbiAgdmFyIGkgPSAwLFxyXG4gICAgcG9zID0gb3BvcyA8PCAzLFxyXG4gICAgY3ZyZCA9IDAsXHJcbiAgICBkbGVuID0gZGF0YS5sZW5ndGg7XHJcblxyXG4gIGlmIChsdmwgPT0gMCkge1xyXG4gICAgd2hpbGUgKGkgPCBkbGVuKSB7XHJcbiAgICAgIHZhciBsZW4gPSBNYXRoLm1pbigweGZmZmYsIGRsZW4gLSBpKTtcclxuICAgICAgcHV0c0Uob3V0LCBwb3MsIGkgKyBsZW4gPT0gZGxlbiA/IDEgOiAwKTtcclxuICAgICAgcG9zID0gVVpJUC5GLl9jb3B5RXhhY3QoZGF0YSwgaSwgbGVuLCBvdXQsIHBvcyArIDgpO1xyXG4gICAgICBpICs9IGxlbjtcclxuICAgIH1cclxuICAgIHJldHVybiBwb3MgPj4+IDM7XHJcbiAgfVxyXG5cclxuICB2YXIgbGl0cyA9IFUubGl0cyxcclxuICAgIHN0cnQgPSBVLnN0cnQsXHJcbiAgICBwcmV2ID0gVS5wcmV2LFxyXG4gICAgbGkgPSAwLFxyXG4gICAgbGMgPSAwLFxyXG4gICAgYnMgPSAwLFxyXG4gICAgZWJpdHMgPSAwLFxyXG4gICAgYyA9IDAsXHJcbiAgICBuYyA9IDA7IC8vIGxhc3RfaXRlbSwgbGl0ZXJhbF9jb3VudCwgYmxvY2tfc3RhcnRcclxuICBpZiAoZGxlbiA+IDIpIHtcclxuICAgIG5jID0gVVpJUC5GLl9oYXNoKGRhdGEsIDApO1xyXG4gICAgc3RydFtuY10gPSAwO1xyXG4gIH1cclxuICB2YXIgbm1jaCA9IDAsXHJcbiAgICBubWNpID0gMDtcclxuXHJcbiAgZm9yIChpID0gMDsgaSA8IGRsZW47IGkrKykge1xyXG4gICAgYyA9IG5jO1xyXG4gICAgLy8qXHJcbiAgICBpZiAoaSArIDEgPCBkbGVuIC0gMikge1xyXG4gICAgICBuYyA9IFVaSVAuRi5faGFzaChkYXRhLCBpICsgMSk7XHJcbiAgICAgIHZhciBpaSA9IChpICsgMSkgJiAweDdmZmY7XHJcbiAgICAgIHByZXZbaWldID0gc3RydFtuY107XHJcbiAgICAgIHN0cnRbbmNdID0gaWk7XHJcbiAgICB9IC8vKi9cclxuICAgIGlmIChjdnJkIDw9IGkpIHtcclxuICAgICAgaWYgKChsaSA+IDE0MDAwIHx8IGxjID4gMjY2OTcpICYmIGRsZW4gLSBpID4gMTAwKSB7XHJcbiAgICAgICAgaWYgKGN2cmQgPCBpKSB7XHJcbiAgICAgICAgICBsaXRzW2xpXSA9IGkgLSBjdnJkO1xyXG4gICAgICAgICAgbGkgKz0gMjtcclxuICAgICAgICAgIGN2cmQgPSBpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwb3MgPSBVWklQLkYuX3dyaXRlQmxvY2soXHJcbiAgICAgICAgICBpID09IGRsZW4gLSAxIHx8IGN2cmQgPT0gZGxlbiA/IDEgOiAwLFxyXG4gICAgICAgICAgbGl0cyxcclxuICAgICAgICAgIGxpLFxyXG4gICAgICAgICAgZWJpdHMsXHJcbiAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgYnMsXHJcbiAgICAgICAgICBpIC0gYnMsXHJcbiAgICAgICAgICBvdXQsXHJcbiAgICAgICAgICBwb3MsXHJcbiAgICAgICAgKTtcclxuICAgICAgICBsaSA9IGxjID0gZWJpdHMgPSAwO1xyXG4gICAgICAgIGJzID0gaTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIG1jaCA9IDA7XHJcbiAgICAgIC8vaWYobm1jaT09aSkgbWNoPSBubWNoOyAgZWxzZVxyXG4gICAgICBpZiAoaSA8IGRsZW4gLSAyKVxyXG4gICAgICAgIG1jaCA9IFVaSVAuRi5fYmVzdE1hdGNoKFxyXG4gICAgICAgICAgZGF0YSxcclxuICAgICAgICAgIGksXHJcbiAgICAgICAgICBwcmV2LFxyXG4gICAgICAgICAgYyxcclxuICAgICAgICAgIE1hdGgubWluKG9wdFsyXSwgZGxlbiAtIGkpLFxyXG4gICAgICAgICAgb3B0WzNdLFxyXG4gICAgICAgICk7XHJcbiAgICAgIC8qXHJcblx0XHRcdGlmKG1jaCE9MCAmJiBvcHRbNF09PTEgJiYgKG1jaD4+PjE2KTxvcHRbMV0gJiYgaSsxPGRsZW4tMikge1xyXG5cdFx0XHRcdG5tY2ggPSBVWklQLkYuX2Jlc3RNYXRjaChkYXRhLCBpKzEsIHByZXYsIG5jLCBvcHRbMl0sIG9wdFszXSk7ICBubWNpPWkrMTtcclxuXHRcdFx0XHQvL3ZhciBtY2gyID0gVVpJUC5GLl9iZXN0TWF0Y2goZGF0YSwgaSsyLCBwcmV2LCBubmMpOyAgLy9ubWNpPWkrMTtcclxuXHRcdFx0XHRpZigobm1jaD4+PjE2KT4obWNoPj4+MTYpKSBtY2g9MDtcclxuXHRcdFx0fS8vKi9cclxuICAgICAgdmFyIGxlbiA9IG1jaCA+Pj4gMTYsXHJcbiAgICAgICAgZHN0ID0gbWNoICYgMHhmZmZmOyAvL2lmKGktZHN0PDApIHRocm93IFwiZVwiO1xyXG4gICAgICBpZiAobWNoICE9IDApIHtcclxuICAgICAgICB2YXIgbGVuID0gbWNoID4+PiAxNixcclxuICAgICAgICAgIGRzdCA9IG1jaCAmIDB4ZmZmZjsgLy9pZihpLWRzdDwwKSB0aHJvdyBcImVcIjtcclxuICAgICAgICB2YXIgbGdpID0gZ29vZEluZGV4KGxlbiwgVS5vZjApO1xyXG4gICAgICAgIFUubGhzdFsyNTcgKyBsZ2ldKys7XHJcbiAgICAgICAgdmFyIGRnaSA9IGdvb2RJbmRleChkc3QsIFUuZGYwKTtcclxuICAgICAgICBVLmRoc3RbZGdpXSsrO1xyXG4gICAgICAgIGViaXRzICs9IFUuZXhiW2xnaV0gKyBVLmR4YltkZ2ldO1xyXG4gICAgICAgIGxpdHNbbGldID0gKGxlbiA8PCAyMykgfCAoaSAtIGN2cmQpO1xyXG4gICAgICAgIGxpdHNbbGkgKyAxXSA9IChkc3QgPDwgMTYpIHwgKGxnaSA8PCA4KSB8IGRnaTtcclxuICAgICAgICBsaSArPSAyO1xyXG4gICAgICAgIGN2cmQgPSBpICsgbGVuO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIFUubGhzdFtkYXRhW2ldXSsrO1xyXG4gICAgICB9XHJcbiAgICAgIGxjKys7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGlmIChicyAhPSBpIHx8IGRhdGEubGVuZ3RoID09IDApIHtcclxuICAgIGlmIChjdnJkIDwgaSkge1xyXG4gICAgICBsaXRzW2xpXSA9IGkgLSBjdnJkO1xyXG4gICAgICBsaSArPSAyO1xyXG4gICAgICBjdnJkID0gaTtcclxuICAgIH1cclxuICAgIHBvcyA9IFVaSVAuRi5fd3JpdGVCbG9jayhcclxuICAgICAgMSxcclxuICAgICAgbGl0cyxcclxuICAgICAgbGksXHJcbiAgICAgIGViaXRzLFxyXG4gICAgICBkYXRhLFxyXG4gICAgICBicyxcclxuICAgICAgaSAtIGJzLFxyXG4gICAgICBvdXQsXHJcbiAgICAgIHBvcyxcclxuICAgICk7XHJcbiAgICBsaSA9IDA7XHJcbiAgICBsYyA9IDA7XHJcbiAgICBsaSA9IGxjID0gZWJpdHMgPSAwO1xyXG4gICAgYnMgPSBpO1xyXG4gIH1cclxuICB3aGlsZSAoKHBvcyAmIDcpICE9IDApIHBvcysrO1xyXG4gIHJldHVybiBwb3MgPj4+IDM7XHJcbn07XHJcblVaSVAuRi5fYmVzdE1hdGNoID0gZnVuY3Rpb24gKGRhdGEsIGksIHByZXYsIGMsIG5pY2UsIGNoYWluKSB7XHJcbiAgdmFyIGNpID0gaSAmIDB4N2ZmZixcclxuICAgIHBpID0gcHJldltjaV07XHJcbiAgLy9jb25zb2xlLmxvZyhcIi0tLS1cIiwgaSk7XHJcbiAgdmFyIGRpZiA9IChjaSAtIHBpICsgKDEgPDwgMTUpKSAmIDB4N2ZmZjtcclxuICBpZiAocGkgPT0gY2kgfHwgYyAhPSBVWklQLkYuX2hhc2goZGF0YSwgaSAtIGRpZikpIHJldHVybiAwO1xyXG4gIHZhciB0bCA9IDAsXHJcbiAgICB0ZCA9IDA7IC8vIHRvcCBsZW5ndGgsIHRvcCBkaXN0YW5jZVxyXG4gIHZhciBkbGltID0gTWF0aC5taW4oMHg3ZmZmLCBpKTtcclxuICB3aGlsZSAoXHJcbiAgICBkaWYgPD0gZGxpbSAmJlxyXG4gICAgLS1jaGFpbiAhPSAwICYmXHJcbiAgICBwaSAhPSBjaSAvKiYmIGM9PVVaSVAuRi5faGFzaChkYXRhLGktZGlmKSovXHJcbiAgKSB7XHJcbiAgICBpZiAodGwgPT0gMCB8fCBkYXRhW2kgKyB0bF0gPT0gZGF0YVtpICsgdGwgLSBkaWZdKSB7XHJcbiAgICAgIHZhciBjbCA9IFVaSVAuRi5faG93TG9uZyhkYXRhLCBpLCBkaWYpO1xyXG4gICAgICBpZiAoY2wgPiB0bCkge1xyXG4gICAgICAgIHRsID0gY2w7XHJcbiAgICAgICAgdGQgPSBkaWY7XHJcbiAgICAgICAgaWYgKHRsID49IG5pY2UpIGJyZWFrOyAvLypcclxuICAgICAgICBpZiAoZGlmICsgMiA8IGNsKSBjbCA9IGRpZiArIDI7XHJcbiAgICAgICAgdmFyIG1heGQgPSAwOyAvLyBwaSBkb2VzIG5vdCBwb2ludCB0byB0aGUgc3RhcnQgb2YgdGhlIHdvcmRcclxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNsIC0gMjsgaisrKSB7XHJcbiAgICAgICAgICB2YXIgZWkgPSAoaSAtIGRpZiArIGogKyAoMSA8PCAxNSkpICYgMHg3ZmZmO1xyXG4gICAgICAgICAgdmFyIGxpID0gcHJldltlaV07XHJcbiAgICAgICAgICB2YXIgY3VyZCA9IChlaSAtIGxpICsgKDEgPDwgMTUpKSAmIDB4N2ZmZjtcclxuICAgICAgICAgIGlmIChjdXJkID4gbWF4ZCkge1xyXG4gICAgICAgICAgICBtYXhkID0gY3VyZDtcclxuICAgICAgICAgICAgcGkgPSBlaTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IC8vKi9cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNpID0gcGk7XHJcbiAgICBwaSA9IHByZXZbY2ldO1xyXG4gICAgZGlmICs9IChjaSAtIHBpICsgKDEgPDwgMTUpKSAmIDB4N2ZmZjtcclxuICB9XHJcbiAgcmV0dXJuICh0bCA8PCAxNikgfCB0ZDtcclxufTtcclxuVVpJUC5GLl9ob3dMb25nID0gZnVuY3Rpb24gKGRhdGEsIGksIGRpZikge1xyXG4gIGlmIChcclxuICAgIGRhdGFbaV0gIT0gZGF0YVtpIC0gZGlmXSB8fFxyXG4gICAgZGF0YVtpICsgMV0gIT0gZGF0YVtpICsgMSAtIGRpZl0gfHxcclxuICAgIGRhdGFbaSArIDJdICE9IGRhdGFbaSArIDIgLSBkaWZdXHJcbiAgKVxyXG4gICAgcmV0dXJuIDA7XHJcbiAgdmFyIG9pID0gaSxcclxuICAgIGwgPSBNYXRoLm1pbihkYXRhLmxlbmd0aCwgaSArIDI1OCk7XHJcbiAgaSArPSAzO1xyXG4gIC8vd2hpbGUoaSs0PGwgJiYgZGF0YVtpXT09ZGF0YVtpLWRpZl0gJiYgZGF0YVtpKzFdPT1kYXRhW2krMS1kaWZdICYmIGRhdGFbaSsyXT09ZGF0YVtpKzItZGlmXSAmJiBkYXRhW2krM109PWRhdGFbaSszLWRpZl0pIGkrPTQ7XHJcbiAgd2hpbGUgKGkgPCBsICYmIGRhdGFbaV0gPT0gZGF0YVtpIC0gZGlmXSkgaSsrO1xyXG4gIHJldHVybiBpIC0gb2k7XHJcbn07XHJcblVaSVAuRi5faGFzaCA9IGZ1bmN0aW9uIChkYXRhLCBpKSB7XHJcbiAgcmV0dXJuIChcclxuICAgICgoKGRhdGFbaV0gPDwgOCkgfCBkYXRhW2kgKyAxXSkgKyAoZGF0YVtpICsgMl0gPDwgNCkpICYgMHhmZmZmXHJcbiAgKTtcclxuICAvL3ZhciBoYXNoX3NoaWZ0ID0gMCwgaGFzaF9tYXNrID0gMjU1O1xyXG4gIC8vdmFyIGggPSBkYXRhW2krMV0gJSAyNTE7XHJcbiAgLy9oID0gKCgoaCA8PCA4KSArIGRhdGFbaSsyXSkgJSAyNTEpO1xyXG4gIC8vaCA9ICgoKGggPDwgOCkgKyBkYXRhW2krMl0pICUgMjUxKTtcclxuICAvL2ggPSAoKGg8PGhhc2hfc2hpZnQpIF4gKGMpICkgJiBoYXNoX21hc2s7XHJcbiAgLy9yZXR1cm4gaCB8IChkYXRhW2ldPDw4KTtcclxuICAvL3JldHVybiAoZGF0YVtpXSB8IChkYXRhW2krMV08PDgpKTtcclxufTtcclxuLy9VWklQLl9fX3RvdGggPSAwO1xyXG5VWklQLnNhdmVkID0gMDtcclxuVVpJUC5GLl93cml0ZUJsb2NrID0gZnVuY3Rpb24gKFxyXG4gIEJGSU5BTCxcclxuICBsaXRzLFxyXG4gIGxpLFxyXG4gIGViaXRzLFxyXG4gIGRhdGEsXHJcbiAgbzAsXHJcbiAgbDAsXHJcbiAgb3V0LFxyXG4gIHBvcyxcclxuKSB7XHJcbiAgdmFyIFUgPSBVWklQLkYuVSxcclxuICAgIHB1dHNGID0gVVpJUC5GLl9wdXRzRixcclxuICAgIHB1dHNFID0gVVpJUC5GLl9wdXRzRTtcclxuXHJcbiAgLy8qXHJcbiAgdmFyIFQsIE1MLCBNRCwgTUgsIG51bWwsIG51bWQsIG51bWgsIGxzZXQsIGRzZXQ7XHJcbiAgVS5saHN0WzI1Nl0rKztcclxuICBUID0gVVpJUC5GLmdldFRyZWVzKCk7XHJcbiAgTUwgPSBUWzBdO1xyXG4gIE1EID0gVFsxXTtcclxuICBNSCA9IFRbMl07XHJcbiAgbnVtbCA9IFRbM107XHJcbiAgbnVtZCA9IFRbNF07XHJcbiAgbnVtaCA9IFRbNV07XHJcbiAgbHNldCA9IFRbNl07XHJcbiAgZHNldCA9IFRbN107XHJcblxyXG4gIHZhciBjc3RTaXplID1cclxuICAgICgoKHBvcyArIDMpICYgNykgPT0gMCA/IDAgOiA4IC0gKChwb3MgKyAzKSAmIDcpKSArIDMyICsgKGwwIDw8IDMpO1xyXG4gIHZhciBmeGRTaXplID1cclxuICAgIGViaXRzICtcclxuICAgIFVaSVAuRi5jb250U2l6ZShVLmZsdHJlZSwgVS5saHN0KSArXHJcbiAgICBVWklQLkYuY29udFNpemUoVS5mZHRyZWUsIFUuZGhzdCk7XHJcbiAgdmFyIGR5blNpemUgPVxyXG4gICAgZWJpdHMgK1xyXG4gICAgVVpJUC5GLmNvbnRTaXplKFUubHRyZWUsIFUubGhzdCkgK1xyXG4gICAgVVpJUC5GLmNvbnRTaXplKFUuZHRyZWUsIFUuZGhzdCk7XHJcbiAgZHluU2l6ZSArPVxyXG4gICAgMTQgK1xyXG4gICAgMyAqIG51bWggK1xyXG4gICAgVVpJUC5GLmNvbnRTaXplKFUuaXRyZWUsIFUuaWhzdCkgK1xyXG4gICAgKFUuaWhzdFsxNl0gKiAyICsgVS5paHN0WzE3XSAqIDMgKyBVLmloc3RbMThdICogNyk7XHJcblxyXG4gIGZvciAodmFyIGogPSAwOyBqIDwgMjg2OyBqKyspIFUubGhzdFtqXSA9IDA7XHJcbiAgZm9yICh2YXIgaiA9IDA7IGogPCAzMDsgaisrKSBVLmRoc3Rbal0gPSAwO1xyXG4gIGZvciAodmFyIGogPSAwOyBqIDwgMTk7IGorKykgVS5paHN0W2pdID0gMDtcclxuICAvLyovXHJcbiAgdmFyIEJUWVBFID1cclxuICAgIGNzdFNpemUgPCBmeGRTaXplICYmIGNzdFNpemUgPCBkeW5TaXplXHJcbiAgICAgID8gMFxyXG4gICAgICA6IGZ4ZFNpemUgPCBkeW5TaXplXHJcbiAgICAgID8gMVxyXG4gICAgICA6IDI7XHJcbiAgcHV0c0Yob3V0LCBwb3MsIEJGSU5BTCk7XHJcbiAgcHV0c0Yob3V0LCBwb3MgKyAxLCBCVFlQRSk7XHJcbiAgcG9zICs9IDM7XHJcblxyXG4gIHZhciBvcG9zID0gcG9zO1xyXG4gIGlmIChCVFlQRSA9PSAwKSB7XHJcbiAgICB3aGlsZSAoKHBvcyAmIDcpICE9IDApIHBvcysrO1xyXG4gICAgcG9zID0gVVpJUC5GLl9jb3B5RXhhY3QoZGF0YSwgbzAsIGwwLCBvdXQsIHBvcyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHZhciBsdHJlZSwgZHRyZWU7XHJcbiAgICBpZiAoQlRZUEUgPT0gMSkge1xyXG4gICAgICBsdHJlZSA9IFUuZmx0cmVlO1xyXG4gICAgICBkdHJlZSA9IFUuZmR0cmVlO1xyXG4gICAgfVxyXG4gICAgaWYgKEJUWVBFID09IDIpIHtcclxuICAgICAgVVpJUC5GLm1ha2VDb2RlcyhVLmx0cmVlLCBNTCk7XHJcbiAgICAgIFVaSVAuRi5yZXZDb2RlcyhVLmx0cmVlLCBNTCk7XHJcbiAgICAgIFVaSVAuRi5tYWtlQ29kZXMoVS5kdHJlZSwgTUQpO1xyXG4gICAgICBVWklQLkYucmV2Q29kZXMoVS5kdHJlZSwgTUQpO1xyXG4gICAgICBVWklQLkYubWFrZUNvZGVzKFUuaXRyZWUsIE1IKTtcclxuICAgICAgVVpJUC5GLnJldkNvZGVzKFUuaXRyZWUsIE1IKTtcclxuXHJcbiAgICAgIGx0cmVlID0gVS5sdHJlZTtcclxuICAgICAgZHRyZWUgPSBVLmR0cmVlO1xyXG5cclxuICAgICAgcHV0c0Uob3V0LCBwb3MsIG51bWwgLSAyNTcpO1xyXG4gICAgICBwb3MgKz0gNTsgLy8gMjg2XHJcbiAgICAgIHB1dHNFKG91dCwgcG9zLCBudW1kIC0gMSk7XHJcbiAgICAgIHBvcyArPSA1OyAvLyAzMFxyXG4gICAgICBwdXRzRShvdXQsIHBvcywgbnVtaCAtIDQpO1xyXG4gICAgICBwb3MgKz0gNDsgLy8gMTlcclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtaDsgaSsrKVxyXG4gICAgICAgIHB1dHNFKG91dCwgcG9zICsgaSAqIDMsIFUuaXRyZWVbKFUub3JkcltpXSA8PCAxKSArIDFdKTtcclxuICAgICAgcG9zICs9IDMgKiBudW1oO1xyXG4gICAgICBwb3MgPSBVWklQLkYuX2NvZGVUaW55KGxzZXQsIFUuaXRyZWUsIG91dCwgcG9zKTtcclxuICAgICAgcG9zID0gVVpJUC5GLl9jb2RlVGlueShkc2V0LCBVLml0cmVlLCBvdXQsIHBvcyk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG9mZiA9IG8wO1xyXG4gICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IGxpOyBzaSArPSAyKSB7XHJcbiAgICAgIHZhciBxYiA9IGxpdHNbc2ldLFxyXG4gICAgICAgIGxlbiA9IHFiID4+PiAyMyxcclxuICAgICAgICBlbmQgPSBvZmYgKyAocWIgJiAoKDEgPDwgMjMpIC0gMSkpO1xyXG4gICAgICB3aGlsZSAob2ZmIDwgZW5kKVxyXG4gICAgICAgIHBvcyA9IFVaSVAuRi5fd3JpdGVMaXQoZGF0YVtvZmYrK10sIGx0cmVlLCBvdXQsIHBvcyk7XHJcblxyXG4gICAgICBpZiAobGVuICE9IDApIHtcclxuICAgICAgICB2YXIgcWMgPSBsaXRzW3NpICsgMV0sXHJcbiAgICAgICAgICBkc3QgPSBxYyA+PiAxNixcclxuICAgICAgICAgIGxnaSA9IChxYyA+PiA4KSAmIDI1NSxcclxuICAgICAgICAgIGRnaSA9IHFjICYgMjU1O1xyXG4gICAgICAgIHBvcyA9IFVaSVAuRi5fd3JpdGVMaXQoMjU3ICsgbGdpLCBsdHJlZSwgb3V0LCBwb3MpO1xyXG4gICAgICAgIHB1dHNFKG91dCwgcG9zLCBsZW4gLSBVLm9mMFtsZ2ldKTtcclxuICAgICAgICBwb3MgKz0gVS5leGJbbGdpXTtcclxuXHJcbiAgICAgICAgcG9zID0gVVpJUC5GLl93cml0ZUxpdChkZ2ksIGR0cmVlLCBvdXQsIHBvcyk7XHJcbiAgICAgICAgcHV0c0Yob3V0LCBwb3MsIGRzdCAtIFUuZGYwW2RnaV0pO1xyXG4gICAgICAgIHBvcyArPSBVLmR4YltkZ2ldO1xyXG4gICAgICAgIG9mZiArPSBsZW47XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHBvcyA9IFVaSVAuRi5fd3JpdGVMaXQoMjU2LCBsdHJlZSwgb3V0LCBwb3MpO1xyXG4gIH1cclxuICAvL2NvbnNvbGUubG9nKHBvcy1vcG9zLCBmeGRTaXplLCBkeW5TaXplLCBjc3RTaXplKTtcclxuICByZXR1cm4gcG9zO1xyXG59O1xyXG5VWklQLkYuX2NvcHlFeGFjdCA9IGZ1bmN0aW9uIChkYXRhLCBvZmYsIGxlbiwgb3V0LCBwb3MpIHtcclxuICB2YXIgcDggPSBwb3MgPj4+IDM7XHJcbiAgb3V0W3A4XSA9IGxlbjtcclxuICBvdXRbcDggKyAxXSA9IGxlbiA+Pj4gODtcclxuICBvdXRbcDggKyAyXSA9IDI1NSAtIG91dFtwOF07XHJcbiAgb3V0W3A4ICsgM10gPSAyNTUgLSBvdXRbcDggKyAxXTtcclxuICBwOCArPSA0O1xyXG4gIG91dC5zZXQobmV3IFVpbnQ4QXJyYXkoZGF0YS5idWZmZXIsIG9mZiwgbGVuKSwgcDgpO1xyXG4gIC8vZm9yKHZhciBpPTA7IGk8bGVuOyBpKyspIG91dFtwOCtpXT1kYXRhW29mZitpXTtcclxuICByZXR1cm4gcG9zICsgKChsZW4gKyA0KSA8PCAzKTtcclxufTtcclxuLypcclxuXHRJbnRlcmVzdGluZyBmYWN0czpcclxuXHQtIGRlY29tcHJlc3NlZCBibG9jayBjYW4gaGF2ZSBieXRlcywgd2hpY2ggZG8gbm90IG9jY3VyIGluIGEgSHVmZm1hbiB0cmVlIChjb3BpZWQgZnJvbSB0aGUgcHJldmlvdXMgYmxvY2sgYnkgcmVmZXJlbmNlKVxyXG4qL1xyXG5cclxuVVpJUC5GLmdldFRyZWVzID0gZnVuY3Rpb24gKCkge1xyXG4gIHZhciBVID0gVVpJUC5GLlU7XHJcbiAgdmFyIE1MID0gVVpJUC5GLl9odWZUcmVlKFUubGhzdCwgVS5sdHJlZSwgMTUpO1xyXG4gIHZhciBNRCA9IFVaSVAuRi5faHVmVHJlZShVLmRoc3QsIFUuZHRyZWUsIDE1KTtcclxuICB2YXIgbHNldCA9IFtdLFxyXG4gICAgbnVtbCA9IFVaSVAuRi5fbGVuQ29kZXMoVS5sdHJlZSwgbHNldCk7XHJcbiAgdmFyIGRzZXQgPSBbXSxcclxuICAgIG51bWQgPSBVWklQLkYuX2xlbkNvZGVzKFUuZHRyZWUsIGRzZXQpO1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbHNldC5sZW5ndGg7IGkgKz0gMikgVS5paHN0W2xzZXRbaV1dKys7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBkc2V0Lmxlbmd0aDsgaSArPSAyKSBVLmloc3RbZHNldFtpXV0rKztcclxuICB2YXIgTUggPSBVWklQLkYuX2h1ZlRyZWUoVS5paHN0LCBVLml0cmVlLCA3KTtcclxuICB2YXIgbnVtaCA9IDE5O1xyXG4gIHdoaWxlIChudW1oID4gNCAmJiBVLml0cmVlWyhVLm9yZHJbbnVtaCAtIDFdIDw8IDEpICsgMV0gPT0gMClcclxuICAgIG51bWgtLTtcclxuICByZXR1cm4gW01MLCBNRCwgTUgsIG51bWwsIG51bWQsIG51bWgsIGxzZXQsIGRzZXRdO1xyXG59O1xyXG5VWklQLkYuZ2V0U2Vjb25kID0gZnVuY3Rpb24gKGEpIHtcclxuICB2YXIgYiA9IFtdO1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkgKz0gMikgYi5wdXNoKGFbaSArIDFdKTtcclxuICByZXR1cm4gYjtcclxufTtcclxuVVpJUC5GLm5vblplcm8gPSBmdW5jdGlvbiAoYSkge1xyXG4gIHZhciBiID0gJyc7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSArPSAyKVxyXG4gICAgaWYgKGFbaSArIDFdICE9IDApIGIgKz0gKGkgPj4gMSkgKyAnLCc7XHJcbiAgcmV0dXJuIGI7XHJcbn07XHJcblVaSVAuRi5jb250U2l6ZSA9IGZ1bmN0aW9uICh0cmVlLCBoc3QpIHtcclxuICB2YXIgcyA9IDA7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBoc3QubGVuZ3RoOyBpKyspXHJcbiAgICBzICs9IGhzdFtpXSAqIHRyZWVbKGkgPDwgMSkgKyAxXTtcclxuICByZXR1cm4gcztcclxufTtcclxuVVpJUC5GLl9jb2RlVGlueSA9IGZ1bmN0aW9uIChzZXQsIHRyZWUsIG91dCwgcG9zKSB7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXQubGVuZ3RoOyBpICs9IDIpIHtcclxuICAgIHZhciBsID0gc2V0W2ldLFxyXG4gICAgICByc3QgPSBzZXRbaSArIDFdOyAvL2NvbnNvbGUubG9nKGwsIHBvcywgdHJlZVsobDw8MSkrMV0pO1xyXG4gICAgcG9zID0gVVpJUC5GLl93cml0ZUxpdChsLCB0cmVlLCBvdXQsIHBvcyk7XHJcbiAgICB2YXIgcnNsID0gbCA9PSAxNiA/IDIgOiBsID09IDE3ID8gMyA6IDc7XHJcbiAgICBpZiAobCA+IDE1KSB7XHJcbiAgICAgIFVaSVAuRi5fcHV0c0Uob3V0LCBwb3MsIHJzdCwgcnNsKTtcclxuICAgICAgcG9zICs9IHJzbDtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHBvcztcclxufTtcclxuVVpJUC5GLl9sZW5Db2RlcyA9IGZ1bmN0aW9uICh0cmVlLCBzZXQpIHtcclxuICB2YXIgbGVuID0gdHJlZS5sZW5ndGg7XHJcbiAgd2hpbGUgKGxlbiAhPSAyICYmIHRyZWVbbGVuIC0gMV0gPT0gMCkgbGVuIC09IDI7IC8vIHdoZW4gbm8gZGlzdGFuY2VzLCBrZWVwIG9uZSBjb2RlIHdpdGggbGVuZ3RoIDBcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XHJcbiAgICB2YXIgbCA9IHRyZWVbaSArIDFdLFxyXG4gICAgICBueHQgPSBpICsgMyA8IGxlbiA/IHRyZWVbaSArIDNdIDogLTEsXHJcbiAgICAgIG5ueHQgPSBpICsgNSA8IGxlbiA/IHRyZWVbaSArIDVdIDogLTEsXHJcbiAgICAgIHBydiA9IGkgPT0gMCA/IC0xIDogdHJlZVtpIC0gMV07XHJcbiAgICBpZiAobCA9PSAwICYmIG54dCA9PSBsICYmIG5ueHQgPT0gbCkge1xyXG4gICAgICB2YXIgbHogPSBpICsgNTtcclxuICAgICAgd2hpbGUgKGx6ICsgMiA8IGxlbiAmJiB0cmVlW2x6ICsgMl0gPT0gbCkgbHogKz0gMjtcclxuICAgICAgdmFyIHpjID0gTWF0aC5taW4oKGx6ICsgMSAtIGkpID4+PiAxLCAxMzgpO1xyXG4gICAgICBpZiAoemMgPCAxMSkgc2V0LnB1c2goMTcsIHpjIC0gMyk7XHJcbiAgICAgIGVsc2Ugc2V0LnB1c2goMTgsIHpjIC0gMTEpO1xyXG4gICAgICBpICs9IHpjICogMiAtIDI7XHJcbiAgICB9IGVsc2UgaWYgKGwgPT0gcHJ2ICYmIG54dCA9PSBsICYmIG5ueHQgPT0gbCkge1xyXG4gICAgICB2YXIgbHogPSBpICsgNTtcclxuICAgICAgd2hpbGUgKGx6ICsgMiA8IGxlbiAmJiB0cmVlW2x6ICsgMl0gPT0gbCkgbHogKz0gMjtcclxuICAgICAgdmFyIHpjID0gTWF0aC5taW4oKGx6ICsgMSAtIGkpID4+PiAxLCA2KTtcclxuICAgICAgc2V0LnB1c2goMTYsIHpjIC0gMyk7XHJcbiAgICAgIGkgKz0gemMgKiAyIC0gMjtcclxuICAgIH0gZWxzZSBzZXQucHVzaChsLCAwKTtcclxuICB9XHJcbiAgcmV0dXJuIGxlbiA+Pj4gMTtcclxufTtcclxuVVpJUC5GLl9odWZUcmVlID0gZnVuY3Rpb24gKGhzdCwgdHJlZSwgTUFYTCkge1xyXG4gIHZhciBsaXN0ID0gW10sXHJcbiAgICBobCA9IGhzdC5sZW5ndGgsXHJcbiAgICB0bCA9IHRyZWUubGVuZ3RoLFxyXG4gICAgaSA9IDA7XHJcbiAgZm9yIChpID0gMDsgaSA8IHRsOyBpICs9IDIpIHtcclxuICAgIHRyZWVbaV0gPSAwO1xyXG4gICAgdHJlZVtpICsgMV0gPSAwO1xyXG4gIH1cclxuICBmb3IgKGkgPSAwOyBpIDwgaGw7IGkrKylcclxuICAgIGlmIChoc3RbaV0gIT0gMCkgbGlzdC5wdXNoKHsgbGl0OiBpLCBmOiBoc3RbaV0gfSk7XHJcbiAgdmFyIGVuZCA9IGxpc3QubGVuZ3RoLFxyXG4gICAgbDIgPSBsaXN0LnNsaWNlKDApO1xyXG4gIGlmIChlbmQgPT0gMCkgcmV0dXJuIDA7IC8vIGVtcHR5IGhpc3RvZ3JhbSAodXN1YWxseSBmb3IgZGlzdClcclxuICBpZiAoZW5kID09IDEpIHtcclxuICAgIHZhciBsaXQgPSBsaXN0WzBdLmxpdCxcclxuICAgICAgbDIgPSBsaXQgPT0gMCA/IDEgOiAwO1xyXG4gICAgdHJlZVsobGl0IDw8IDEpICsgMV0gPSAxO1xyXG4gICAgdHJlZVsobDIgPDwgMSkgKyAxXSA9IDE7XHJcbiAgICByZXR1cm4gMTtcclxuICB9XHJcbiAgbGlzdC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICByZXR1cm4gYS5mIC0gYi5mO1xyXG4gIH0pO1xyXG4gIHZhciBhID0gbGlzdFswXSxcclxuICAgIGIgPSBsaXN0WzFdLFxyXG4gICAgaTAgPSAwLFxyXG4gICAgaTEgPSAxLFxyXG4gICAgaTIgPSAyO1xyXG4gIGxpc3RbMF0gPSB7IGxpdDogLTEsIGY6IGEuZiArIGIuZiwgbDogYSwgcjogYiwgZDogMCB9O1xyXG4gIHdoaWxlIChpMSAhPSBlbmQgLSAxKSB7XHJcbiAgICBpZiAoaTAgIT0gaTEgJiYgKGkyID09IGVuZCB8fCBsaXN0W2kwXS5mIDwgbGlzdFtpMl0uZikpIHtcclxuICAgICAgYSA9IGxpc3RbaTArK107XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhID0gbGlzdFtpMisrXTtcclxuICAgIH1cclxuICAgIGlmIChpMCAhPSBpMSAmJiAoaTIgPT0gZW5kIHx8IGxpc3RbaTBdLmYgPCBsaXN0W2kyXS5mKSkge1xyXG4gICAgICBiID0gbGlzdFtpMCsrXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGIgPSBsaXN0W2kyKytdO1xyXG4gICAgfVxyXG4gICAgbGlzdFtpMSsrXSA9IHsgbGl0OiAtMSwgZjogYS5mICsgYi5mLCBsOiBhLCByOiBiIH07XHJcbiAgfVxyXG4gIHZhciBtYXhsID0gVVpJUC5GLnNldERlcHRoKGxpc3RbaTEgLSAxXSwgMCk7XHJcbiAgaWYgKG1heGwgPiBNQVhMKSB7XHJcbiAgICBVWklQLkYucmVzdHJpY3REZXB0aChsMiwgTUFYTCwgbWF4bCk7XHJcbiAgICBtYXhsID0gTUFYTDtcclxuICB9XHJcbiAgZm9yIChpID0gMDsgaSA8IGVuZDsgaSsrKSB0cmVlWyhsMltpXS5saXQgPDwgMSkgKyAxXSA9IGwyW2ldLmQ7XHJcbiAgcmV0dXJuIG1heGw7XHJcbn07XHJcblxyXG5VWklQLkYuc2V0RGVwdGggPSBmdW5jdGlvbiAodCwgZCkge1xyXG4gIGlmICh0LmxpdCAhPSAtMSkge1xyXG4gICAgdC5kID0gZDtcclxuICAgIHJldHVybiBkO1xyXG4gIH1cclxuICByZXR1cm4gTWF0aC5tYXgoXHJcbiAgICBVWklQLkYuc2V0RGVwdGgodC5sLCBkICsgMSksXHJcbiAgICBVWklQLkYuc2V0RGVwdGgodC5yLCBkICsgMSksXHJcbiAgKTtcclxufTtcclxuXHJcblVaSVAuRi5yZXN0cmljdERlcHRoID0gZnVuY3Rpb24gKGRwcywgTUQsIG1heGwpIHtcclxuICB2YXIgaSA9IDAsXHJcbiAgICBiQ29zdCA9IDEgPDwgKG1heGwgLSBNRCksXHJcbiAgICBkYnQgPSAwO1xyXG4gIGRwcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICByZXR1cm4gYi5kID09IGEuZCA/IGEuZiAtIGIuZiA6IGIuZCAtIGEuZDtcclxuICB9KTtcclxuXHJcbiAgZm9yIChpID0gMDsgaSA8IGRwcy5sZW5ndGg7IGkrKylcclxuICAgIGlmIChkcHNbaV0uZCA+IE1EKSB7XHJcbiAgICAgIHZhciBvZCA9IGRwc1tpXS5kO1xyXG4gICAgICBkcHNbaV0uZCA9IE1EO1xyXG4gICAgICBkYnQgKz0gYkNvc3QgLSAoMSA8PCAobWF4bCAtIG9kKSk7XHJcbiAgICB9IGVsc2UgYnJlYWs7XHJcbiAgZGJ0ID0gZGJ0ID4+PiAobWF4bCAtIE1EKTtcclxuICB3aGlsZSAoZGJ0ID4gMCkge1xyXG4gICAgdmFyIG9kID0gZHBzW2ldLmQ7XHJcbiAgICBpZiAob2QgPCBNRCkge1xyXG4gICAgICBkcHNbaV0uZCsrO1xyXG4gICAgICBkYnQgLT0gMSA8PCAoTUQgLSBvZCAtIDEpO1xyXG4gICAgfSBlbHNlIGkrKztcclxuICB9XHJcbiAgZm9yICg7IGkgPj0gMDsgaS0tKVxyXG4gICAgaWYgKGRwc1tpXS5kID09IE1EICYmIGRidCA8IDApIHtcclxuICAgICAgZHBzW2ldLmQtLTtcclxuICAgICAgZGJ0Kys7XHJcbiAgICB9XHJcbiAgaWYgKGRidCAhPSAwKSBjb25zb2xlLmxvZygnZGVidCBsZWZ0Jyk7XHJcbn07XHJcblxyXG5VWklQLkYuX2dvb2RJbmRleCA9IGZ1bmN0aW9uICh2LCBhcnIpIHtcclxuICB2YXIgaSA9IDA7XHJcbiAgaWYgKGFycltpIHwgMTZdIDw9IHYpIGkgfD0gMTY7XHJcbiAgaWYgKGFycltpIHwgOF0gPD0gdikgaSB8PSA4O1xyXG4gIGlmIChhcnJbaSB8IDRdIDw9IHYpIGkgfD0gNDtcclxuICBpZiAoYXJyW2kgfCAyXSA8PSB2KSBpIHw9IDI7XHJcbiAgaWYgKGFycltpIHwgMV0gPD0gdikgaSB8PSAxO1xyXG4gIHJldHVybiBpO1xyXG59O1xyXG5VWklQLkYuX3dyaXRlTGl0ID0gZnVuY3Rpb24gKGNoLCBsdHJlZSwgb3V0LCBwb3MpIHtcclxuICBVWklQLkYuX3B1dHNGKG91dCwgcG9zLCBsdHJlZVtjaCA8PCAxXSk7XHJcbiAgcmV0dXJuIHBvcyArIGx0cmVlWyhjaCA8PCAxKSArIDFdO1xyXG59O1xyXG5cclxuVVpJUC5GLmluZmxhdGUgPSBmdW5jdGlvbiAoZGF0YSwgYnVmKSB7XHJcbiAgdmFyIHU4ID0gVWludDhBcnJheTtcclxuICBpZiAoZGF0YVswXSA9PSAzICYmIGRhdGFbMV0gPT0gMCkgcmV0dXJuIGJ1ZiA/IGJ1ZiA6IG5ldyB1OCgwKTtcclxuICB2YXIgRiA9IFVaSVAuRixcclxuICAgIGJpdHNGID0gRi5fYml0c0YsXHJcbiAgICBiaXRzRSA9IEYuX2JpdHNFLFxyXG4gICAgZGVjb2RlVGlueSA9IEYuX2RlY29kZVRpbnksXHJcbiAgICBtYWtlQ29kZXMgPSBGLm1ha2VDb2RlcyxcclxuICAgIGNvZGVzMm1hcCA9IEYuY29kZXMybWFwLFxyXG4gICAgZ2V0MTcgPSBGLl9nZXQxNztcclxuICB2YXIgVSA9IEYuVTtcclxuXHJcbiAgdmFyIG5vQnVmID0gYnVmID09IG51bGw7XHJcbiAgaWYgKG5vQnVmKSBidWYgPSBuZXcgdTgoKGRhdGEubGVuZ3RoID4+PiAyKSA8PCAzKTtcclxuXHJcbiAgdmFyIEJGSU5BTCA9IDAsXHJcbiAgICBCVFlQRSA9IDAsXHJcbiAgICBITElUID0gMCxcclxuICAgIEhESVNUID0gMCxcclxuICAgIEhDTEVOID0gMCxcclxuICAgIE1MID0gMCxcclxuICAgIE1EID0gMDtcclxuICB2YXIgb2ZmID0gMCxcclxuICAgIHBvcyA9IDA7XHJcbiAgdmFyIGxtYXAsIGRtYXA7XHJcblxyXG4gIHdoaWxlIChCRklOQUwgPT0gMCkge1xyXG4gICAgQkZJTkFMID0gYml0c0YoZGF0YSwgcG9zLCAxKTtcclxuICAgIEJUWVBFID0gYml0c0YoZGF0YSwgcG9zICsgMSwgMik7XHJcbiAgICBwb3MgKz0gMztcclxuICAgIC8vY29uc29sZS5sb2coQkZJTkFMLCBCVFlQRSk7XHJcblxyXG4gICAgaWYgKEJUWVBFID09IDApIHtcclxuICAgICAgaWYgKChwb3MgJiA3KSAhPSAwKSBwb3MgKz0gOCAtIChwb3MgJiA3KTtcclxuICAgICAgdmFyIHA4ID0gKHBvcyA+Pj4gMykgKyA0LFxyXG4gICAgICAgIGxlbiA9IGRhdGFbcDggLSA0XSB8IChkYXRhW3A4IC0gM10gPDwgOCk7IC8vY29uc29sZS5sb2cobGVuKTsvL2JpdHNGKGRhdGEsIHBvcywgMTYpLFxyXG4gICAgICBpZiAobm9CdWYpIGJ1ZiA9IFVaSVAuRi5fY2hlY2soYnVmLCBvZmYgKyBsZW4pO1xyXG4gICAgICBidWYuc2V0KG5ldyB1OChkYXRhLmJ1ZmZlciwgZGF0YS5ieXRlT2Zmc2V0ICsgcDgsIGxlbiksIG9mZik7XHJcbiAgICAgIC8vZm9yKHZhciBpPTA7IGk8bGVuOyBpKyspIGJ1ZltvZmYraV0gPSBkYXRhW3A4K2ldO1xyXG4gICAgICAvL2Zvcih2YXIgaT0wOyBpPGxlbjsgaSsrKSBpZihidWZbb2ZmK2ldICE9IGRhdGFbcDgraV0pIHRocm93IFwiZVwiO1xyXG4gICAgICBwb3MgPSAocDggKyBsZW4pIDw8IDM7XHJcbiAgICAgIG9mZiArPSBsZW47XHJcbiAgICAgIGNvbnRpbnVlO1xyXG4gICAgfVxyXG4gICAgaWYgKG5vQnVmKSBidWYgPSBVWklQLkYuX2NoZWNrKGJ1Ziwgb2ZmICsgKDEgPDwgMTcpKTsgLy8gcmVhbGx5IG5vdCBlbm91Z2ggaW4gbWFueSBjYXNlcyAoYnV0IFBORyBhbmQgWklQIHByb3ZpZGUgYnVmZmVyIGluIGFkdmFuY2UpXHJcbiAgICBpZiAoQlRZUEUgPT0gMSkge1xyXG4gICAgICBsbWFwID0gVS5mbG1hcDtcclxuICAgICAgZG1hcCA9IFUuZmRtYXA7XHJcbiAgICAgIE1MID0gKDEgPDwgOSkgLSAxO1xyXG4gICAgICBNRCA9ICgxIDw8IDUpIC0gMTtcclxuICAgIH1cclxuICAgIGlmIChCVFlQRSA9PSAyKSB7XHJcbiAgICAgIEhMSVQgPSBiaXRzRShkYXRhLCBwb3MsIDUpICsgMjU3O1xyXG4gICAgICBIRElTVCA9IGJpdHNFKGRhdGEsIHBvcyArIDUsIDUpICsgMTtcclxuICAgICAgSENMRU4gPSBiaXRzRShkYXRhLCBwb3MgKyAxMCwgNCkgKyA0O1xyXG4gICAgICBwb3MgKz0gMTQ7XHJcblxyXG4gICAgICB2YXIgcHBvcyA9IHBvcztcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzODsgaSArPSAyKSB7XHJcbiAgICAgICAgVS5pdHJlZVtpXSA9IDA7XHJcbiAgICAgICAgVS5pdHJlZVtpICsgMV0gPSAwO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciB0bCA9IDE7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgSENMRU47IGkrKykge1xyXG4gICAgICAgIHZhciBsID0gYml0c0UoZGF0YSwgcG9zICsgaSAqIDMsIDMpO1xyXG4gICAgICAgIFUuaXRyZWVbKFUub3JkcltpXSA8PCAxKSArIDFdID0gbDtcclxuICAgICAgICBpZiAobCA+IHRsKSB0bCA9IGw7XHJcbiAgICAgIH1cclxuICAgICAgcG9zICs9IDMgKiBIQ0xFTjsgLy9jb25zb2xlLmxvZyhpdHJlZSk7XHJcbiAgICAgIG1ha2VDb2RlcyhVLml0cmVlLCB0bCk7XHJcbiAgICAgIGNvZGVzMm1hcChVLml0cmVlLCB0bCwgVS5pbWFwKTtcclxuXHJcbiAgICAgIGxtYXAgPSBVLmxtYXA7XHJcbiAgICAgIGRtYXAgPSBVLmRtYXA7XHJcblxyXG4gICAgICBwb3MgPSBkZWNvZGVUaW55KFxyXG4gICAgICAgIFUuaW1hcCxcclxuICAgICAgICAoMSA8PCB0bCkgLSAxLFxyXG4gICAgICAgIEhMSVQgKyBIRElTVCxcclxuICAgICAgICBkYXRhLFxyXG4gICAgICAgIHBvcyxcclxuICAgICAgICBVLnR0cmVlLFxyXG4gICAgICApO1xyXG4gICAgICB2YXIgbXgwID0gRi5fY29weU91dChVLnR0cmVlLCAwLCBITElULCBVLmx0cmVlKTtcclxuICAgICAgTUwgPSAoMSA8PCBteDApIC0gMTtcclxuICAgICAgdmFyIG14MSA9IEYuX2NvcHlPdXQoVS50dHJlZSwgSExJVCwgSERJU1QsIFUuZHRyZWUpO1xyXG4gICAgICBNRCA9ICgxIDw8IG14MSkgLSAxO1xyXG5cclxuICAgICAgLy92YXIgbWwgPSBkZWNvZGVUaW55KFUuaW1hcCwgKDE8PHRsKS0xLCBITElUICwgZGF0YSwgcG9zLCBVLmx0cmVlKTsgTUwgPSAoMTw8KG1sPj4+MjQpKS0xOyAgcG9zKz0obWwmMHhmZmZmZmYpO1xyXG4gICAgICBtYWtlQ29kZXMoVS5sdHJlZSwgbXgwKTtcclxuICAgICAgY29kZXMybWFwKFUubHRyZWUsIG14MCwgbG1hcCk7XHJcblxyXG4gICAgICAvL3ZhciBtZCA9IGRlY29kZVRpbnkoVS5pbWFwLCAoMTw8dGwpLTEsIEhESVNULCBkYXRhLCBwb3MsIFUuZHRyZWUpOyBNRCA9ICgxPDwobWQ+Pj4yNCkpLTE7ICBwb3MrPShtZCYweGZmZmZmZik7XHJcbiAgICAgIG1ha2VDb2RlcyhVLmR0cmVlLCBteDEpO1xyXG4gICAgICBjb2RlczJtYXAoVS5kdHJlZSwgbXgxLCBkbWFwKTtcclxuICAgIH1cclxuICAgIC8vdmFyIG9vZmY9b2ZmLCBvcG9zPXBvcztcclxuICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgIHZhciBjb2RlID0gbG1hcFtnZXQxNyhkYXRhLCBwb3MpICYgTUxdO1xyXG4gICAgICBwb3MgKz0gY29kZSAmIDE1O1xyXG4gICAgICB2YXIgbGl0ID0gY29kZSA+Pj4gNDsgLy9VLmxoc3RbbGl0XSsrO1xyXG4gICAgICBpZiAobGl0ID4+PiA4ID09IDApIHtcclxuICAgICAgICBidWZbb2ZmKytdID0gbGl0O1xyXG4gICAgICB9IGVsc2UgaWYgKGxpdCA9PSAyNTYpIHtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgZW5kID0gb2ZmICsgbGl0IC0gMjU0O1xyXG4gICAgICAgIGlmIChsaXQgPiAyNjQpIHtcclxuICAgICAgICAgIHZhciBlYnMgPSBVLmxkZWZbbGl0IC0gMjU3XTtcclxuICAgICAgICAgIGVuZCA9IG9mZiArIChlYnMgPj4+IDMpICsgYml0c0UoZGF0YSwgcG9zLCBlYnMgJiA3KTtcclxuICAgICAgICAgIHBvcyArPSBlYnMgJiA3O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL1VaSVAuRi5kc3RbZW5kLW9mZl0rKztcclxuXHJcbiAgICAgICAgdmFyIGRjb2RlID0gZG1hcFtnZXQxNyhkYXRhLCBwb3MpICYgTURdO1xyXG4gICAgICAgIHBvcyArPSBkY29kZSAmIDE1O1xyXG4gICAgICAgIHZhciBkbGl0ID0gZGNvZGUgPj4+IDQ7XHJcbiAgICAgICAgdmFyIGRicyA9IFUuZGRlZltkbGl0XSxcclxuICAgICAgICAgIGRzdCA9IChkYnMgPj4+IDQpICsgYml0c0YoZGF0YSwgcG9zLCBkYnMgJiAxNSk7XHJcbiAgICAgICAgcG9zICs9IGRicyAmIDE1O1xyXG5cclxuICAgICAgICAvL3ZhciBvMCA9IG9mZi1kc3QsIHN0cCA9IE1hdGgubWluKGVuZC1vZmYsIGRzdCk7XHJcbiAgICAgICAgLy9pZihzdHA+MjApIHdoaWxlKG9mZjxlbmQpIHsgIGJ1Zi5jb3B5V2l0aGluKG9mZiwgbzAsIG8wK3N0cCk7ICBvZmYrPXN0cDsgIH0gIGVsc2VcclxuICAgICAgICAvL2lmKGVuZC1kc3Q8PW9mZikgYnVmLmNvcHlXaXRoaW4ob2ZmLCBvZmYtZHN0LCBlbmQtZHN0KTsgIGVsc2VcclxuICAgICAgICAvL2lmKGRzdD09MSkgYnVmLmZpbGwoYnVmW29mZi0xXSwgb2ZmLCBlbmQpOyAgZWxzZVxyXG4gICAgICAgIGlmIChub0J1ZikgYnVmID0gVVpJUC5GLl9jaGVjayhidWYsIG9mZiArICgxIDw8IDE3KSk7XHJcbiAgICAgICAgd2hpbGUgKG9mZiA8IGVuZCkge1xyXG4gICAgICAgICAgYnVmW29mZl0gPSBidWZbb2ZmKysgLSBkc3RdO1xyXG4gICAgICAgICAgYnVmW29mZl0gPSBidWZbb2ZmKysgLSBkc3RdO1xyXG4gICAgICAgICAgYnVmW29mZl0gPSBidWZbb2ZmKysgLSBkc3RdO1xyXG4gICAgICAgICAgYnVmW29mZl0gPSBidWZbb2ZmKysgLSBkc3RdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBvZmYgPSBlbmQ7XHJcbiAgICAgICAgLy93aGlsZShvZmYhPWVuZCkgeyAgYnVmW29mZl09YnVmW29mZisrLWRzdF07ICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vY29uc29sZS5sb2cob2ZmLW9vZmYsIChwb3Mtb3Bvcyk+Pj4zKTtcclxuICB9XHJcbiAgLy9jb25zb2xlLmxvZyhVWklQLkYuZHN0KTtcclxuICAvL2NvbnNvbGUubG9nKHRsZW4sIGRsZW4sIG9mZi10bGVuK3RjbnQpO1xyXG4gIHJldHVybiBidWYubGVuZ3RoID09IG9mZiA/IGJ1ZiA6IGJ1Zi5zbGljZSgwLCBvZmYpO1xyXG59O1xyXG5VWklQLkYuX2NoZWNrID0gZnVuY3Rpb24gKGJ1ZiwgbGVuKSB7XHJcbiAgdmFyIGJsID0gYnVmLmxlbmd0aDtcclxuICBpZiAobGVuIDw9IGJsKSByZXR1cm4gYnVmO1xyXG4gIHZhciBuYnVmID0gbmV3IFVpbnQ4QXJyYXkoTWF0aC5tYXgoYmwgPDwgMSwgbGVuKSk7XHJcbiAgbmJ1Zi5zZXQoYnVmLCAwKTtcclxuICAvL2Zvcih2YXIgaT0wOyBpPGJsOyBpKz00KSB7ICBuYnVmW2ldPWJ1ZltpXTsgIG5idWZbaSsxXT1idWZbaSsxXTsgIG5idWZbaSsyXT1idWZbaSsyXTsgIG5idWZbaSszXT1idWZbaSszXTsgIH1cclxuICByZXR1cm4gbmJ1ZjtcclxufTtcclxuXHJcblVaSVAuRi5fZGVjb2RlVGlueSA9IGZ1bmN0aW9uIChsbWFwLCBMTCwgbGVuLCBkYXRhLCBwb3MsIHRyZWUpIHtcclxuICB2YXIgYml0c0UgPSBVWklQLkYuX2JpdHNFLFxyXG4gICAgZ2V0MTcgPSBVWklQLkYuX2dldDE3O1xyXG4gIHZhciBpID0gMDtcclxuICB3aGlsZSAoaSA8IGxlbikge1xyXG4gICAgdmFyIGNvZGUgPSBsbWFwW2dldDE3KGRhdGEsIHBvcykgJiBMTF07XHJcbiAgICBwb3MgKz0gY29kZSAmIDE1O1xyXG4gICAgdmFyIGxpdCA9IGNvZGUgPj4+IDQ7XHJcbiAgICBpZiAobGl0IDw9IDE1KSB7XHJcbiAgICAgIHRyZWVbaV0gPSBsaXQ7XHJcbiAgICAgIGkrKztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZhciBsbCA9IDAsXHJcbiAgICAgICAgbiA9IDA7XHJcbiAgICAgIGlmIChsaXQgPT0gMTYpIHtcclxuICAgICAgICBuID0gMyArIGJpdHNFKGRhdGEsIHBvcywgMik7XHJcbiAgICAgICAgcG9zICs9IDI7XHJcbiAgICAgICAgbGwgPSB0cmVlW2kgLSAxXTtcclxuICAgICAgfSBlbHNlIGlmIChsaXQgPT0gMTcpIHtcclxuICAgICAgICBuID0gMyArIGJpdHNFKGRhdGEsIHBvcywgMyk7XHJcbiAgICAgICAgcG9zICs9IDM7XHJcbiAgICAgIH0gZWxzZSBpZiAobGl0ID09IDE4KSB7XHJcbiAgICAgICAgbiA9IDExICsgYml0c0UoZGF0YSwgcG9zLCA3KTtcclxuICAgICAgICBwb3MgKz0gNztcclxuICAgICAgfVxyXG4gICAgICB2YXIgbmkgPSBpICsgbjtcclxuICAgICAgd2hpbGUgKGkgPCBuaSkge1xyXG4gICAgICAgIHRyZWVbaV0gPSBsbDtcclxuICAgICAgICBpKys7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHBvcztcclxufTtcclxuVVpJUC5GLl9jb3B5T3V0ID0gZnVuY3Rpb24gKHNyYywgb2ZmLCBsZW4sIHRyZWUpIHtcclxuICB2YXIgbXggPSAwLFxyXG4gICAgaSA9IDAsXHJcbiAgICB0bCA9IHRyZWUubGVuZ3RoID4+PiAxO1xyXG4gIHdoaWxlIChpIDwgbGVuKSB7XHJcbiAgICB2YXIgdiA9IHNyY1tpICsgb2ZmXTtcclxuICAgIHRyZWVbaSA8PCAxXSA9IDA7XHJcbiAgICB0cmVlWyhpIDw8IDEpICsgMV0gPSB2O1xyXG4gICAgaWYgKHYgPiBteCkgbXggPSB2O1xyXG4gICAgaSsrO1xyXG4gIH1cclxuICB3aGlsZSAoaSA8IHRsKSB7XHJcbiAgICB0cmVlW2kgPDwgMV0gPSAwO1xyXG4gICAgdHJlZVsoaSA8PCAxKSArIDFdID0gMDtcclxuICAgIGkrKztcclxuICB9XHJcbiAgcmV0dXJuIG14O1xyXG59O1xyXG5cclxuVVpJUC5GLm1ha2VDb2RlcyA9IGZ1bmN0aW9uICh0cmVlLCBNQVhfQklUUykge1xyXG4gIC8vIGNvZGUsIGxlbmd0aFxyXG4gIHZhciBVID0gVVpJUC5GLlU7XHJcbiAgdmFyIG1heF9jb2RlID0gdHJlZS5sZW5ndGg7XHJcbiAgdmFyIGNvZGUsIGJpdHMsIG4sIGksIGxlbjtcclxuXHJcbiAgdmFyIGJsX2NvdW50ID0gVS5ibF9jb3VudDtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8PSBNQVhfQklUUzsgaSsrKSBibF9jb3VudFtpXSA9IDA7XHJcbiAgZm9yIChpID0gMTsgaSA8IG1heF9jb2RlOyBpICs9IDIpIGJsX2NvdW50W3RyZWVbaV1dKys7XHJcblxyXG4gIHZhciBuZXh0X2NvZGUgPSBVLm5leHRfY29kZTsgLy8gc21hbGxlc3QgY29kZSBmb3IgZWFjaCBsZW5ndGhcclxuXHJcbiAgY29kZSA9IDA7XHJcbiAgYmxfY291bnRbMF0gPSAwO1xyXG4gIGZvciAoYml0cyA9IDE7IGJpdHMgPD0gTUFYX0JJVFM7IGJpdHMrKykge1xyXG4gICAgY29kZSA9IChjb2RlICsgYmxfY291bnRbYml0cyAtIDFdKSA8PCAxO1xyXG4gICAgbmV4dF9jb2RlW2JpdHNdID0gY29kZTtcclxuICB9XHJcblxyXG4gIGZvciAobiA9IDA7IG4gPCBtYXhfY29kZTsgbiArPSAyKSB7XHJcbiAgICBsZW4gPSB0cmVlW24gKyAxXTtcclxuICAgIGlmIChsZW4gIT0gMCkge1xyXG4gICAgICB0cmVlW25dID0gbmV4dF9jb2RlW2xlbl07XHJcbiAgICAgIG5leHRfY29kZVtsZW5dKys7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5VWklQLkYuY29kZXMybWFwID0gZnVuY3Rpb24gKHRyZWUsIE1BWF9CSVRTLCBtYXApIHtcclxuICB2YXIgbWF4X2NvZGUgPSB0cmVlLmxlbmd0aDtcclxuICB2YXIgVSA9IFVaSVAuRi5VLFxyXG4gICAgcjE1ID0gVS5yZXYxNTtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IG1heF9jb2RlOyBpICs9IDIpXHJcbiAgICBpZiAodHJlZVtpICsgMV0gIT0gMCkge1xyXG4gICAgICB2YXIgbGl0ID0gaSA+PiAxO1xyXG4gICAgICB2YXIgY2wgPSB0cmVlW2kgKyAxXSxcclxuICAgICAgICB2YWwgPSAobGl0IDw8IDQpIHwgY2w7IC8vIDogICgweDgwMDAgfCAoVS5vZjBbbGl0LTI1N108PDcpIHwgKFUuZXhiW2xpdC0yNTddPDw0KSB8IGNsKTtcclxuICAgICAgdmFyIHJlc3QgPSBNQVhfQklUUyAtIGNsLFxyXG4gICAgICAgIGkwID0gdHJlZVtpXSA8PCByZXN0LFxyXG4gICAgICAgIGkxID0gaTAgKyAoMSA8PCByZXN0KTtcclxuICAgICAgLy90cmVlW2ldPXIxNVtpMF0+Pj4oMTUtTUFYX0JJVFMpO1xyXG4gICAgICB3aGlsZSAoaTAgIT0gaTEpIHtcclxuICAgICAgICB2YXIgcDAgPSByMTVbaTBdID4+PiAoMTUgLSBNQVhfQklUUyk7XHJcbiAgICAgICAgbWFwW3AwXSA9IHZhbDtcclxuICAgICAgICBpMCsrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbn07XHJcblVaSVAuRi5yZXZDb2RlcyA9IGZ1bmN0aW9uICh0cmVlLCBNQVhfQklUUykge1xyXG4gIHZhciByMTUgPSBVWklQLkYuVS5yZXYxNSxcclxuICAgIGltYiA9IDE1IC0gTUFYX0JJVFM7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmVlLmxlbmd0aDsgaSArPSAyKSB7XHJcbiAgICB2YXIgaTAgPSB0cmVlW2ldIDw8IChNQVhfQklUUyAtIHRyZWVbaSArIDFdKTtcclxuICAgIHRyZWVbaV0gPSByMTVbaTBdID4+PiBpbWI7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gdXNlZCBvbmx5IGluIGRlZmxhdGVcclxuVVpJUC5GLl9wdXRzRSA9IGZ1bmN0aW9uIChkdCwgcG9zLCB2YWwpIHtcclxuICB2YWwgPSB2YWwgPDwgKHBvcyAmIDcpO1xyXG4gIHZhciBvID0gcG9zID4+PiAzO1xyXG4gIGR0W29dIHw9IHZhbDtcclxuICBkdFtvICsgMV0gfD0gdmFsID4+PiA4O1xyXG59O1xyXG5VWklQLkYuX3B1dHNGID0gZnVuY3Rpb24gKGR0LCBwb3MsIHZhbCkge1xyXG4gIHZhbCA9IHZhbCA8PCAocG9zICYgNyk7XHJcbiAgdmFyIG8gPSBwb3MgPj4+IDM7XHJcbiAgZHRbb10gfD0gdmFsO1xyXG4gIGR0W28gKyAxXSB8PSB2YWwgPj4+IDg7XHJcbiAgZHRbbyArIDJdIHw9IHZhbCA+Pj4gMTY7XHJcbn07XHJcblxyXG5VWklQLkYuX2JpdHNFID0gZnVuY3Rpb24gKGR0LCBwb3MsIGxlbmd0aCkge1xyXG4gIHJldHVybiAoXHJcbiAgICAoKGR0W3BvcyA+Pj4gM10gfCAoZHRbKHBvcyA+Pj4gMykgKyAxXSA8PCA4KSkgPj4+IChwb3MgJiA3KSkgJlxyXG4gICAgKCgxIDw8IGxlbmd0aCkgLSAxKVxyXG4gICk7XHJcbn07XHJcblVaSVAuRi5fYml0c0YgPSBmdW5jdGlvbiAoZHQsIHBvcywgbGVuZ3RoKSB7XHJcbiAgcmV0dXJuIChcclxuICAgICgoZHRbcG9zID4+PiAzXSB8XHJcbiAgICAgIChkdFsocG9zID4+PiAzKSArIDFdIDw8IDgpIHxcclxuICAgICAgKGR0Wyhwb3MgPj4+IDMpICsgMl0gPDwgMTYpKSA+Pj5cclxuICAgICAgKHBvcyAmIDcpKSAmXHJcbiAgICAoKDEgPDwgbGVuZ3RoKSAtIDEpXHJcbiAgKTtcclxufTtcclxuLypcclxuVVpJUC5GLl9nZXQ5ID0gZnVuY3Rpb24oZHQsIHBvcykge1xyXG5cdHJldHVybiAoKGR0W3Bvcz4+PjNdIHwgKGR0Wyhwb3M+Pj4zKSsxXTw8OCkpPj4+KHBvcyY3KSkmNTExO1xyXG59ICovXHJcblVaSVAuRi5fZ2V0MTcgPSBmdW5jdGlvbiAoZHQsIHBvcykge1xyXG4gIC8vIHJldHVybiBhdCBsZWFzdCAxNyBtZWFuaW5nZnVsIGJ5dGVzXHJcbiAgcmV0dXJuIChcclxuICAgIChkdFtwb3MgPj4+IDNdIHxcclxuICAgICAgKGR0Wyhwb3MgPj4+IDMpICsgMV0gPDwgOCkgfFxyXG4gICAgICAoZHRbKHBvcyA+Pj4gMykgKyAyXSA8PCAxNikpID4+PlxyXG4gICAgKHBvcyAmIDcpXHJcbiAgKTtcclxufTtcclxuVVpJUC5GLl9nZXQyNSA9IGZ1bmN0aW9uIChkdCwgcG9zKSB7XHJcbiAgLy8gcmV0dXJuIGF0IGxlYXN0IDE3IG1lYW5pbmdmdWwgYnl0ZXNcclxuICByZXR1cm4gKFxyXG4gICAgKGR0W3BvcyA+Pj4gM10gfFxyXG4gICAgICAoZHRbKHBvcyA+Pj4gMykgKyAxXSA8PCA4KSB8XHJcbiAgICAgIChkdFsocG9zID4+PiAzKSArIDJdIDw8IDE2KSB8XHJcbiAgICAgIChkdFsocG9zID4+PiAzKSArIDNdIDw8IDI0KSkgPj4+XHJcbiAgICAocG9zICYgNylcclxuICApO1xyXG59O1xyXG5VWklQLkYuVSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIHUxNiA9IFVpbnQxNkFycmF5LFxyXG4gICAgdTMyID0gVWludDMyQXJyYXk7XHJcbiAgcmV0dXJuIHtcclxuICAgIG5leHRfY29kZTogbmV3IHUxNigxNiksXHJcbiAgICBibF9jb3VudDogbmV3IHUxNigxNiksXHJcbiAgICBvcmRyOiBbXHJcbiAgICAgIDE2LFxyXG4gICAgICAxNyxcclxuICAgICAgMTgsXHJcbiAgICAgIDAsXHJcbiAgICAgIDgsXHJcbiAgICAgIDcsXHJcbiAgICAgIDksXHJcbiAgICAgIDYsXHJcbiAgICAgIDEwLFxyXG4gICAgICA1LFxyXG4gICAgICAxMSxcclxuICAgICAgNCxcclxuICAgICAgMTIsXHJcbiAgICAgIDMsXHJcbiAgICAgIDEzLFxyXG4gICAgICAyLFxyXG4gICAgICAxNCxcclxuICAgICAgMSxcclxuICAgICAgMTUsXHJcbiAgICBdLFxyXG4gICAgb2YwOiBbXHJcbiAgICAgIDMsXHJcbiAgICAgIDQsXHJcbiAgICAgIDUsXHJcbiAgICAgIDYsXHJcbiAgICAgIDcsXHJcbiAgICAgIDgsXHJcbiAgICAgIDksXHJcbiAgICAgIDEwLFxyXG4gICAgICAxMSxcclxuICAgICAgMTMsXHJcbiAgICAgIDE1LFxyXG4gICAgICAxNyxcclxuICAgICAgMTksXHJcbiAgICAgIDIzLFxyXG4gICAgICAyNyxcclxuICAgICAgMzEsXHJcbiAgICAgIDM1LFxyXG4gICAgICA0MyxcclxuICAgICAgNTEsXHJcbiAgICAgIDU5LFxyXG4gICAgICA2NyxcclxuICAgICAgODMsXHJcbiAgICAgIDk5LFxyXG4gICAgICAxMTUsXHJcbiAgICAgIDEzMSxcclxuICAgICAgMTYzLFxyXG4gICAgICAxOTUsXHJcbiAgICAgIDIyNyxcclxuICAgICAgMjU4LFxyXG4gICAgICA5OTksXHJcbiAgICAgIDk5OSxcclxuICAgICAgOTk5LFxyXG4gICAgXSxcclxuICAgIGV4YjogW1xyXG4gICAgICAwLFxyXG4gICAgICAwLFxyXG4gICAgICAwLFxyXG4gICAgICAwLFxyXG4gICAgICAwLFxyXG4gICAgICAwLFxyXG4gICAgICAwLFxyXG4gICAgICAwLFxyXG4gICAgICAxLFxyXG4gICAgICAxLFxyXG4gICAgICAxLFxyXG4gICAgICAxLFxyXG4gICAgICAyLFxyXG4gICAgICAyLFxyXG4gICAgICAyLFxyXG4gICAgICAyLFxyXG4gICAgICAzLFxyXG4gICAgICAzLFxyXG4gICAgICAzLFxyXG4gICAgICAzLFxyXG4gICAgICA0LFxyXG4gICAgICA0LFxyXG4gICAgICA0LFxyXG4gICAgICA0LFxyXG4gICAgICA1LFxyXG4gICAgICA1LFxyXG4gICAgICA1LFxyXG4gICAgICA1LFxyXG4gICAgICAwLFxyXG4gICAgICAwLFxyXG4gICAgICAwLFxyXG4gICAgICAwLFxyXG4gICAgXSxcclxuICAgIGxkZWY6IG5ldyB1MTYoMzIpLFxyXG4gICAgZGYwOiBbXHJcbiAgICAgIDEsXHJcbiAgICAgIDIsXHJcbiAgICAgIDMsXHJcbiAgICAgIDQsXHJcbiAgICAgIDUsXHJcbiAgICAgIDcsXHJcbiAgICAgIDksXHJcbiAgICAgIDEzLFxyXG4gICAgICAxNyxcclxuICAgICAgMjUsXHJcbiAgICAgIDMzLFxyXG4gICAgICA0OSxcclxuICAgICAgNjUsXHJcbiAgICAgIDk3LFxyXG4gICAgICAxMjksXHJcbiAgICAgIDE5MyxcclxuICAgICAgMjU3LFxyXG4gICAgICAzODUsXHJcbiAgICAgIDUxMyxcclxuICAgICAgNzY5LFxyXG4gICAgICAxMDI1LFxyXG4gICAgICAxNTM3LFxyXG4gICAgICAyMDQ5LFxyXG4gICAgICAzMDczLFxyXG4gICAgICA0MDk3LFxyXG4gICAgICA2MTQ1LFxyXG4gICAgICA4MTkzLFxyXG4gICAgICAxMjI4OSxcclxuICAgICAgMTYzODUsXHJcbiAgICAgIDI0NTc3LFxyXG4gICAgICA2NTUzNSxcclxuICAgICAgNjU1MzUsXHJcbiAgICBdLFxyXG4gICAgZHhiOiBbXHJcbiAgICAgIDAsXHJcbiAgICAgIDAsXHJcbiAgICAgIDAsXHJcbiAgICAgIDAsXHJcbiAgICAgIDEsXHJcbiAgICAgIDEsXHJcbiAgICAgIDIsXHJcbiAgICAgIDIsXHJcbiAgICAgIDMsXHJcbiAgICAgIDMsXHJcbiAgICAgIDQsXHJcbiAgICAgIDQsXHJcbiAgICAgIDUsXHJcbiAgICAgIDUsXHJcbiAgICAgIDYsXHJcbiAgICAgIDYsXHJcbiAgICAgIDcsXHJcbiAgICAgIDcsXHJcbiAgICAgIDgsXHJcbiAgICAgIDgsXHJcbiAgICAgIDksXHJcbiAgICAgIDksXHJcbiAgICAgIDEwLFxyXG4gICAgICAxMCxcclxuICAgICAgMTEsXHJcbiAgICAgIDExLFxyXG4gICAgICAxMixcclxuICAgICAgMTIsXHJcbiAgICAgIDEzLFxyXG4gICAgICAxMyxcclxuICAgICAgMCxcclxuICAgICAgMCxcclxuICAgIF0sXHJcbiAgICBkZGVmOiBuZXcgdTMyKDMyKSxcclxuICAgIGZsbWFwOiBuZXcgdTE2KDUxMiksXHJcbiAgICBmbHRyZWU6IFtdLFxyXG4gICAgZmRtYXA6IG5ldyB1MTYoMzIpLFxyXG4gICAgZmR0cmVlOiBbXSxcclxuICAgIGxtYXA6IG5ldyB1MTYoMzI3NjgpLFxyXG4gICAgbHRyZWU6IFtdLFxyXG4gICAgdHRyZWU6IFtdLFxyXG4gICAgZG1hcDogbmV3IHUxNigzMjc2OCksXHJcbiAgICBkdHJlZTogW10sXHJcbiAgICBpbWFwOiBuZXcgdTE2KDUxMiksXHJcbiAgICBpdHJlZTogW10sXHJcbiAgICAvL3JldjkgOiBuZXcgdTE2KCAgNTEyKVxyXG4gICAgcmV2MTU6IG5ldyB1MTYoMSA8PCAxNSksXHJcbiAgICBsaHN0OiBuZXcgdTMyKDI4NiksXHJcbiAgICBkaHN0OiBuZXcgdTMyKDMwKSxcclxuICAgIGloc3Q6IG5ldyB1MzIoMTkpLFxyXG4gICAgbGl0czogbmV3IHUzMigxNTAwMCksXHJcbiAgICBzdHJ0OiBuZXcgdTE2KDEgPDwgMTYpLFxyXG4gICAgcHJldjogbmV3IHUxNigxIDw8IDE1KSxcclxuICB9O1xyXG59KSgpO1xyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuICB2YXIgVSA9IFVaSVAuRi5VO1xyXG4gIHZhciBsZW4gPSAxIDw8IDE1O1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgIHZhciB4ID0gaTtcclxuICAgIHggPSAoKHggJiAweGFhYWFhYWFhKSA+Pj4gMSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTtcclxuICAgIHggPSAoKHggJiAweGNjY2NjY2NjKSA+Pj4gMikgfCAoKHggJiAweDMzMzMzMzMzKSA8PCAyKTtcclxuICAgIHggPSAoKHggJiAweGYwZjBmMGYwKSA+Pj4gNCkgfCAoKHggJiAweDBmMGYwZjBmKSA8PCA0KTtcclxuICAgIHggPSAoKHggJiAweGZmMDBmZjAwKSA+Pj4gOCkgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTtcclxuICAgIFUucmV2MTVbaV0gPSAoKHggPj4+IDE2KSB8ICh4IDw8IDE2KSkgPj4+IDE3O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcHVzaFYodGd0LCBuLCBzdikge1xyXG4gICAgd2hpbGUgKG4tLSAhPSAwKSB0Z3QucHVzaCgwLCBzdik7XHJcbiAgfVxyXG5cclxuICBmb3IgKHZhciBpID0gMDsgaSA8IDMyOyBpKyspIHtcclxuICAgIFUubGRlZltpXSA9IChVLm9mMFtpXSA8PCAzKSB8IFUuZXhiW2ldO1xyXG4gICAgVS5kZGVmW2ldID0gKFUuZGYwW2ldIDw8IDQpIHwgVS5keGJbaV07XHJcbiAgfVxyXG5cclxuICBwdXNoVihVLmZsdHJlZSwgMTQ0LCA4KTtcclxuICBwdXNoVihVLmZsdHJlZSwgMjU1IC0gMTQzLCA5KTtcclxuICBwdXNoVihVLmZsdHJlZSwgMjc5IC0gMjU1LCA3KTtcclxuICBwdXNoVihVLmZsdHJlZSwgMjg3IC0gMjc5LCA4KTtcclxuICAvKlxyXG5cdHZhciBpID0gMDtcclxuXHRmb3IoOyBpPD0xNDM7IGkrKykgVS5mbHRyZWUucHVzaCgwLDgpO1xyXG5cdGZvcig7IGk8PTI1NTsgaSsrKSBVLmZsdHJlZS5wdXNoKDAsOSk7XHJcblx0Zm9yKDsgaTw9Mjc5OyBpKyspIFUuZmx0cmVlLnB1c2goMCw3KTtcclxuXHRmb3IoOyBpPD0yODc7IGkrKykgVS5mbHRyZWUucHVzaCgwLDgpO1xyXG5cdCovXHJcbiAgVVpJUC5GLm1ha2VDb2RlcyhVLmZsdHJlZSwgOSk7XHJcbiAgVVpJUC5GLmNvZGVzMm1hcChVLmZsdHJlZSwgOSwgVS5mbG1hcCk7XHJcbiAgVVpJUC5GLnJldkNvZGVzKFUuZmx0cmVlLCA5KTtcclxuXHJcbiAgcHVzaFYoVS5mZHRyZWUsIDMyLCA1KTtcclxuICAvL2ZvcihpPTA7aTwzMjsgaSsrKSBVLmZkdHJlZS5wdXNoKDAsNSk7XHJcbiAgVVpJUC5GLm1ha2VDb2RlcyhVLmZkdHJlZSwgNSk7XHJcbiAgVVpJUC5GLmNvZGVzMm1hcChVLmZkdHJlZSwgNSwgVS5mZG1hcCk7XHJcbiAgVVpJUC5GLnJldkNvZGVzKFUuZmR0cmVlLCA1KTtcclxuXHJcbiAgcHVzaFYoVS5pdHJlZSwgMTksIDApO1xyXG4gIHB1c2hWKFUubHRyZWUsIDI4NiwgMCk7XHJcbiAgcHVzaFYoVS5kdHJlZSwgMzAsIDApO1xyXG4gIHB1c2hWKFUudHRyZWUsIDMyMCwgMCk7XHJcbiAgLypcclxuXHRmb3IodmFyIGk9MDsgaTwgMTk7IGkrKykgVS5pdHJlZS5wdXNoKDAsMCk7XHJcblx0Zm9yKHZhciBpPTA7IGk8Mjg2OyBpKyspIFUubHRyZWUucHVzaCgwLDApO1xyXG5cdGZvcih2YXIgaT0wOyBpPCAzMDsgaSsrKSBVLmR0cmVlLnB1c2goMCwwKTtcclxuXHRmb3IodmFyIGk9MDsgaTwzMjA7IGkrKykgVS50dHJlZS5wdXNoKDAsMCk7XHJcblx0Ki9cclxufSkoKTtcclxuXHJcbmV4cG9ydCB7IFVaSVAgfTtcclxuIiwgImZ1bmN0aW9uIHJlYWRBcyhmaWxlLCBhcykge1xyXG4gIGlmICghKGZpbGUgaW5zdGFuY2VvZiBCbG9iKSkge1xyXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTXVzdCBiZSBhIEZpbGUgb3IgQmxvYicpO1xyXG4gIH1cclxuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgcmVzb2x2ZShlLnRhcmdldC5yZXN1bHQpO1xyXG4gICAgfTtcclxuICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgcmVqZWN0KFxyXG4gICAgICAgIG5ldyBFcnJvcihcclxuICAgICAgICAgICdFcnJvciByZWFkaW5nJyArIGZpbGUubmFtZSArICc6ICcgKyBlLnRhcmdldC5yZXN1bHQsXHJcbiAgICAgICAgKSxcclxuICAgICAgKTtcclxuICAgIH07XHJcbiAgICByZWFkZXJbJ3JlYWRBcycgKyBhc10oZmlsZSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlYWRBc0RhdGFVUkwoZmlsZSkge1xyXG4gIHJldHVybiByZWFkQXMoZmlsZSwgJ0RhdGFVUkwnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVhZEFzVGV4dChmaWxlKSB7XHJcbiAgcmV0dXJuIHJlYWRBcyhmaWxlLCAnVGV4dCcpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZWFkQXNBcnJheUJ1ZmZlcihmaWxlKSB7XHJcbiAgcmV0dXJuIHJlYWRBcyhmaWxlLCAnQXJyYXlCdWZmZXInKTtcclxufVxyXG5cclxuZXhwb3J0IHsgcmVhZEFzQXJyYXlCdWZmZXIgfTtcclxuIiwgImZ1bmN0aW9uIHN0cmluZ1RvVWludDgoc3RyaW5nKSB7XHJcbiAgY29uc3QgdWludCA9IG5ldyBVaW50OEFycmF5KHN0cmluZy5sZW5ndGgpO1xyXG4gIGZvciAobGV0IGkgPSAwLCBqID0gc3RyaW5nLmxlbmd0aDsgaSA8IGo7ICsraSkge1xyXG4gICAgdWludFtpXSA9IHN0cmluZy5jaGFyQ29kZUF0KGkpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHVpbnQ7XHJcbn1cclxuXHJcbmV4cG9ydCB7IHN0cmluZ1RvVWludDggfTtcclxuIiwgImltcG9ydCB7IEJsb2JVUkxHZW5lcmF0b3IgfSBmcm9tIFwiLi9CbG9iVVJMR2VuZXJhdG9yL0Jsb2JVUkxHZW5lcmF0b3IuanNcIjtcclxuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSBcIi4vRWRpdG9yL0VkaXRvci5qc1wiO1xyXG5pbXBvcnQgeyBGZXRjaGVyIH0gZnJvbSBcIi4vRmV0Y2hlci9GZXRjaGVyLmpzXCI7XHJcbmltcG9ydCB7IEZpbGVUcmVlIH0gZnJvbSBcIi4vRmlsZVRyZWUvRmlsZVRyZWUuanNcIjtcclxuaW1wb3J0IHsgUHJldmlldyB9IGZyb20gXCIuL1ByZXZpZXcvUHJldmlldy5qc1wiO1xyXG5pbXBvcnQgeyBDb250cm9scyB9IGZyb20gXCIuL0NvbnRyb2xzL0NvbnRyb2xzLmpzXCI7XHJcbmltcG9ydCB7IHNldHVwUGFuZWxzIH0gZnJvbSBcIi4vUGFuZWxzL3NldHVwUGFuZWxzLmpzXCI7XHJcbmltcG9ydCB7IERvd25sb2FkZXIgfSBmcm9tIFwiLi9Eb3dubG9hZGVyL0Rvd25sb2FkZXIuanNcIjtcclxuaW1wb3J0IHsgZ2V0U2l0ZVVSTCB9IGZyb20gXCIuL3V0aWxzL2dldFNpdGVVUkwuanNcIjtcclxuXHJcbi8vIE5PVEVTOlxyXG4vLyBsb2FkIGZyb20gZGlyZWN0b3J5IHN0cnVjdHVyZSBsaWtlXHJcbi8vXHJcbi8vIC9hc3NldHNcclxuLy8gIC0+IC9tb2RlbFxyXG4vLyAgLT4gL3RleHR1cmVzXHJcbi8vIC92ZW5kb3JcclxuLy8gIC0+IHRocmVlXHJcbi8vIC9zdHlsZXNcclxuLy8gL3dvcmxkc1xyXG4vLyAgLT4gY2hhcHRlcl8wMVxyXG4vLyAgLT4gLT4gc3JjXHJcbi8vICAtPiAtPiBpbmRleC5odG1sXHJcbi8vXHJcbi8vIEFsbCB3b3JsZHMgY2FuIHNoYXJlIG5lYXJseSBhbGwgZmlsZXMsIGFuZCBkaWZmZXJlbmNlcyBhcmUgcGxhY2VkIHVuZGVyIHdvcmxkcy9cclxuLy8gdGhlbiB0aGUgcGF0aCAvd29ybGRzL2NoYXB0ZXJfMDEvIGNhbiBiZSBoaWRkZW4gZnJvbSB0aGUgdXNlciB3aGVuIGxvYWRlZCBpbiB0aGUgSURFIHRvIGtlZXAgdGhpbmdzIGNsZWFuXHJcblxyXG5jbGFzcyBJREUge1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xyXG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XHJcbiAgICB0aGlzLmNvbmZpZy5zaXRlVVJMID0gZ2V0U2l0ZVVSTCgpO1xyXG4gICAgdGhpcy5jb25maWcuYXNzZXRzTG9jYXRpb24gPSBgJHt0aGlzLmNvbmZpZy5zaXRlVVJMfS9zdGF0aWMvYXNzZXRzL2A7XHJcblxyXG4gICAgdGhpcy5maWxlVHlwZXMgPSBbXCIuanNcIiwgXCIuaHRtbFwiLCBcIi5jc3NcIiwgXCIuZ2xiXCIsIFwiLnBuZ1wiLCBcIi5qcGdcIl07XHJcbiAgICB0aGlzLnRleHRUeXBlcyA9IFtcImpzXCIsIFwiaHRtbFwiLCBcImNzc1wiXTtcclxuICAgIHRoaXMuaW1hZ2VUeXBlcyA9IFtcInBuZ1wiLCBcImpwZ1wiXTtcclxuICAgIHRoaXMub3RoZXJUeXBlcyA9IFtcImdsYlwiXTtcclxuXHJcbiAgICB0aGlzLmNvbXBhcmlzb25zRW5hYmxlZCA9IHRoaXMuY29uZmlnLmNvbXBhcmlzb25Nb2RlID09PSB0cnVlO1xyXG5cclxuICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuY29udGFpbmVyKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGluaXQoKSB7XHJcbiAgICB0aGlzLmZpbGVzID0gYXdhaXQgRmV0Y2hlci5mZXRjaEZpbGVzKFxyXG4gICAgICB0aGlzLmNvbmZpZy5maWxlcyxcclxuICAgICAgdGhpcy5jb25maWcuc3RhcnRGaWxlcyxcclxuICAgICAgdGhpcy5jb25maWcuZmluYWxGaWxlcyxcclxuICAgICAgdGhpcy5jb25maWcuc2VydmVyRGlyZWN0b3J5LFxyXG4gICAgICB0aGlzLmNvbmZpZy5zdHJpcERpcmVjdG9yeSxcclxuICAgICAgdGhpcy5jb21wYXJpc29uc0VuYWJsZWRcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5lZGl0b3IgPSBuZXcgRWRpdG9yKHRoaXMuZmlsZXMpO1xyXG4gICAgdGhpcy5wcmV2aWV3ID0gbmV3IFByZXZpZXcoKTtcclxuICAgIHRoaXMuaW1hZ2VQcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1wcmV2aWV3XCIpO1xyXG5cclxuICAgIHRoaXMuZmlsZVRyZWUgPSBuZXcgRmlsZVRyZWUoXHJcbiAgICAgIHRoaXMuZmlsZXMsXHJcbiAgICAgIHRoaXMuZmlsZVR5cGVzLFxyXG4gICAgICB0aGlzLmNvbmZpZy5jbG9zZWRGb2xkZXJzLFxyXG4gICAgICB0aGlzLmVkaXRvcixcclxuICAgICAgdGhpcy5pbWFnZVByZXZpZXcsXHJcbiAgICAgIHRoaXMuY29tcGFyaXNvbnNFbmFibGVkXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMudXJsR2VuZXJhdG9yID0gbmV3IEJsb2JVUkxHZW5lcmF0b3IoXHJcbiAgICAgIHRoaXMuZmlsZXMsXHJcbiAgICAgIHRoaXMuY29uZmlnLmFzc2V0c0xvY2F0aW9uLFxyXG4gICAgICB0aGlzLmNvbmZpZy5lbnRyeVxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAodGhpcy5jb25maWcuYWN0aXZlRG9jdW1lbnQpIHtcclxuICAgICAgdGhpcy5zZXRBY3RpdmVEb2N1bWVudCh0aGlzLmNvbmZpZy5hY3RpdmVEb2N1bWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5wcmV2aWV3LnVwZGF0ZSh0aGlzLnVybEdlbmVyYXRvci5nZW5lcmF0ZVNyY1VSTCgpKTtcclxuICAgIHRoaXMuZG93bmxvYWRlciA9IG5ldyBEb3dubG9hZGVyKHRoaXMuZmlsZXMsIHRoaXMuY29uZmlnLmFzc2V0c0xvY2F0aW9uKTtcclxuXHJcbiAgICB0aGlzLnNldHVwQ29udHJvbHMoKTtcclxuICAgIHRoaXMuc2V0dXBFdmVudHMoKTtcclxuXHJcbiAgICBzZXR1cFBhbmVscyh0aGlzLCB0aGlzLmNvbmZpZy5mdWxsU2NyZWVuKTtcclxuICB9XHJcblxyXG4gIHNldEFjdGl2ZURvY3VtZW50KGRvYykge1xyXG4gICAgdGhpcy5lZGl0b3Iuc2V0QWN0aXZlRG9jdW1lbnQodGhpcy5maWxlc1tkb2NdKTtcclxuICAgIHRoaXMuZmlsZVRyZWUuc2V0U2VsZWN0ZWRGaWxlKHRoaXMuZmlsZXNbZG9jXSk7XHJcbiAgfVxyXG5cclxuICBzZXR1cEV2ZW50cygpIHtcclxuICAgIC8vIHdhaXQgdW50aWwgdHlwaW5nIHN0b3BzIGZvciBhIGNlcnRhaW4gdGltZSwgdGhlbiByZWZyZXNoXHJcbiAgICBsZXQgcmVmcmVzaENvdW50RG93bjtcclxuXHJcbiAgICB0aGlzLmVkaXRvci5zZXRFdmVudENhbGxiYWNrKFwiY2hhbmdlc1wiLCAoKSA9PiB7XHJcbiAgICAgIGNsZWFyVGltZW91dChyZWZyZXNoQ291bnREb3duKTtcclxuXHJcbiAgICAgIHJlZnJlc2hDb3VudERvd24gPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMudXBkYXRlUHJldmlldygpLCA3MDApO1xyXG5cclxuICAgICAgdGhpcy5yZXNldENvbnRyb2xzLnNldEJ1dHRvblN0YXRlcygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5lZGl0b3Iuc2V0RXZlbnRDYWxsYmFjayhcInJlZnJlc2hcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLnJlc2V0Q29udHJvbHMuc2V0QnV0dG9uU3RhdGVzKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldHVwQ29udHJvbHMoKSB7XHJcbiAgICBDb250cm9scy5zZXR1cERvd25sb2FkUGFja2FnZUJ1dHRvbih0aGlzLmRvd25sb2FkZXIpO1xyXG4gICAgQ29udHJvbHMuc2V0dXBJbXBvcnRTdHlsZVNlbGVjdChcclxuICAgICAgdGhpcy5maWxlcyxcclxuICAgICAgdGhpcy5jb25maWcuc3dpdGNoSW1wb3J0c0FsbG93ZWRcclxuICAgICk7XHJcbiAgICBDb250cm9scy5vcGVuUHJldmlld0luTmV3V2luZG93KHRoaXMucHJldmlldyk7XHJcblxyXG4gICAgdGhpcy5yZXNldENvbnRyb2xzID0gQ29udHJvbHMuc2V0dXBSZXNldEJ1dHRvbnModGhpcy5lZGl0b3IpO1xyXG5cclxuICAgIGlmICh0aGlzLmNvbXBhcmlzb25zRW5hYmxlZCkge1xyXG4gICAgICBDb250cm9scy5zZXR1cFN0YXJ0RmluYWxDb2RlVG9nZ2xlKHRoaXMuZWRpdG9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZVByZXZpZXcoKSB7XHJcbiAgICB0aGlzLnByZXZpZXcudXBkYXRlKHRoaXMudXJsR2VuZXJhdG9yLmdlbmVyYXRlU3JjVVJMKCkpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKCkge1xyXG4gICAgdGhpcy51cGRhdGVQcmV2aWV3KCk7XHJcbiAgICB0aGlzLmVkaXRvci5yZWZyZXNoKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBJREUgfTtcclxuIiwgImltcG9ydCB7IElERSB9IGZyb20gJy4vSURFL0lERS5qcyc7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBzZXR1cElERShjb25maWcpIHtcclxuICBjb25zdCBpZGVXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2lkZS13cmFwcGVyJyk7XHJcblxyXG4gIGNvbnN0IGlkZUNvbnRyb2xzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlkZS1jb250cm9sJyk7XHJcblxyXG4gIGlmIChjb25maWcuc2hvd0lERSA9PT0gdHJ1ZSAmJiBpZGVXcmFwcGVyKSB7XHJcbiAgICBpZGVDb250cm9scy5mb3JFYWNoKChjdHJsKSA9PiBjdHJsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKSk7XHJcblxyXG4gICAgY29uc3QgaWRlID0gbmV3IElERShjb25maWcuSURFKTtcclxuICAgIGF3YWl0IGlkZS5pbml0KCk7XHJcblxyXG4gICAgaWRlV3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XHJcbiAgfSBlbHNlIGlmIChpZGVXcmFwcGVyKSB7XHJcbiAgICBpZGVXcmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IHNldHVwSURFIH07XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBU0EsRUFBQyxVQUFVLFNBQVEsU0FBUztBQUMxQixXQUFPLFlBQVksWUFBWSxPQUFPLFdBQVcsY0FBYyxPQUFPLFVBQVUsWUFDaEYsT0FBTyxXQUFXLGNBQWMsT0FBTyxNQUFNLE9BQU8sV0FDbkQsV0FBUyxXQUFVLE1BQU0sUUFBTyxhQUFhO0FBQUEsS0FDOUMsU0FBTyxXQUFZO0FBQUU7QUFJckIsUUFBSSxZQUFZLFVBQVU7QUFDMUIsUUFBSSxXQUFXLFVBQVU7QUFFekIsUUFBSSxRQUFRLGFBQWEsS0FBSztBQUM5QixRQUFJLFlBQVksVUFBVSxLQUFLO0FBQy9CLFFBQUksVUFBVSx3Q0FBd0MsS0FBSztBQUMzRCxRQUFJLE9BQU8sY0FBYyxLQUFLO0FBQzlCLFFBQUksS0FBSyxhQUFhLFdBQVc7QUFDakMsUUFBSSxhQUFhLE1BQU8sYUFBWSxTQUFTLGdCQUFnQixJQUFJLENBQUUsU0FBUSxTQUFTO0FBQ3BGLFFBQUksU0FBUyxDQUFDLFFBQVEsV0FBVyxLQUFLO0FBQ3RDLFFBQUksV0FBVyxVQUFVLGVBQWUsS0FBSztBQUM3QyxRQUFJLFNBQVMsQ0FBQyxRQUFRLFdBQVcsS0FBSztBQUN0QyxRQUFJLFNBQVMsVUFBVSxLQUFLO0FBQzVCLFFBQUksU0FBUyxpQkFBaUIsS0FBSyxVQUFVO0FBQzdDLFFBQUkscUJBQXFCLCtCQUErQixLQUFLO0FBQzdELFFBQUksVUFBVSxZQUFZLEtBQUs7QUFFL0IsUUFBSSxNQUFNLENBQUMsUUFBUSxjQUFjLEtBQUssY0FBYyxjQUFjLEtBQUs7QUFDdkUsUUFBSSxVQUFVLFVBQVUsS0FBSztBQUU3QixRQUFJLFNBQVMsT0FBTyxXQUFXLG1EQUFtRCxLQUFL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SUFBSTtBQUFBLFFBQ0osSUFBSTtBQUFBO0FBQUEsTUFFTixJQUFJO0FBQUEsUUFDRixJQUFJO0FBQUE7QUFBQSxNQUVOLFFBQVE7QUFBQSxRQUNOLFFBQVE7QUFBQSxRQUNSLFVBQVU7QUFBQTtBQUFBLE1BRVosVUFBVTtBQUFBLFFBQ1IsVUFBVTtBQUFBO0FBQUEsTUFFWixHQUFHO0FBQUEsUUFDRCxTQUFTO0FBQUEsUUFDVCxTQUFTO0FBQUEsUUFDVCxPQUFPO0FBQUEsUUFDUCxZQUFZO0FBQUEsUUFDWixLQUFLO0FBQUEsUUFDTCxLQUFLO0FBQUEsUUFDTCxJQUFJO0FBQUEsUUFDSixVQUFVO0FBQUEsUUFDVixRQUFRO0FBQUEsUUFDUixNQUFNO0FBQUEsUUFDTixJQUFJO0FBQUEsUUFDSixJQUFJO0FBQUEsUUFDSixJQUFJO0FBQUEsUUFDSixJQUFJO0FBQUEsUUFDSixJQUFJO0FBQUEsUUFDSixJQUFJO0FBQUEsUUFDSixRQUFRO0FBQUEsUUFDUixRQUFRO0FBQUEsUUFDUixJQUFJO0FBQUEsUUFDSixNQUFNO0FBQUEsUUFDTixLQUFLO0FBQUEsUUFDTCxJQUFJO0FBQUEsUUFDSixHQUFHO0FBQUEsUUFDSCxLQUFLO0FBQUEsUUFDTCxTQUFTO0FBQUEsUUFDVCxPQUFPO0FBQUEsUUFDUCxJQUFJO0FBQUE7QUFBQSxNQUVOLElBQUk7QUFBQSxRQUNGLElBQUk7QUFBQSxRQUNKLElBQUk7QUFBQTtBQUFBLE1BRU4sSUFBSTtBQUFBLFFBQ0YsSUFBSTtBQUFBLFFBQ0osSUFBSTtBQUFBO0FBQUEsTUFFTixPQUFPO0FBQUEsUUFDTCxPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUE7QUFBQSxNQUVULElBQUk7QUFBQSxRQUNGLElBQUk7QUFBQSxRQUNKLElBQUk7QUFBQTtBQUFBLE1BRU4sT0FBTztBQUFBLFFBQ0wsT0FBTztBQUFBO0FBQUEsTUFFVCxJQUFJO0FBQUEsUUFDRixJQUFJO0FBQUEsUUFDSixJQUFJO0FBQUE7QUFBQSxNQUVOLE9BQU87QUFBQSxRQUNMLE9BQU87QUFBQSxRQUNQLE9BQU87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QSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUE7QUFBQSxJQUVGLE1BQU0sSUFBSSxJQUFJO0FBQUEsSUFDZCxLQUFLO0FBQUEsTUFDSDtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQTtBQUFBLElBRUYsS0FBSztBQUFBLE1BQ0g7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUE7QUFBQSxJQUVGLE1BQU0sSUFBSSxJQUFJO0FBQUEsSUFDZCxPQUFPLElBQUksSUFBSTtBQUFBLElBQ2YsUUFBUTtBQUFBLElBQ1IsT0FBTyxJQUFJLElBQUk7QUFBQSxJQUNmLFFBQVE7QUFBQSxJQUNSLE1BQU0sSUFBSSxJQUFJO0FBQUEsSUFDZCxPQUFPO0FBQUEsSUFDUCxPQUFPO0FBQUEsSUFDUCxNQUFNLElBQUksSUFBSTtBQUFBLElBQ2QsT0FBTztBQUFBLElBQ1AsTUFBTSxJQUFJLElBQUk7QUFBQSxJQUNkLE9BQU87QUFBQSxJQUVQLE9BQU8sSUFBSSxJQUFJLEtBQUs7QUFBQSxJQUNwQixNQUFNLElBQUksSUFBSTtBQUFBLElBQ2QsTUFBTSxJQUFJLElBQUk7QUFBQSxJQUNkLE1BQU0sSUFBSSxJQUFJO0FBQUEsSUFDZCxNQUFNLElBQUksSUFBSTtBQUFBLElBQ2QsTUFBTSxJQUFJLElBQUksS0FBSztBQUFBLElBQ25CLE1BQU0sSUFBSSxJQUFJLEtBQUs7QUFBQTtBQUFBO0FBSXZCLEFBQUMsWUFBWTtBQUNYLE1BQUksSUFBSSxLQUFLLEVBQUU7QUFDZixNQUFJLE1BQU0sS0FBSztBQUNmLFdBQVMsSUFBSSxHQUFHLElBQUksS0FBSyxLQUFLO0FBQzVCLFFBQUksSUFBSTtBQUNSLFFBQU0sS0FBSSxnQkFBZ0IsSUFBTyxLQUFJLGVBQWU7QUFDcEQsUUFBTSxLQUFJLGdCQUFnQixJQUFPLEtBQUksY0FBZTtBQUNwRCxRQUFNLEtBQUksZ0JBQWdCLElBQU8sS0FBSSxjQUFlO0FBQ3BELFFBQU0sS0FBSSxnQkFBZ0IsSUFBTyxLQUFJLGFBQWU7QUFDcEQsTUFBRSxNQUFNLEtBQU8sT0FBTSxLQUFPLEtBQUssUUFBUztBQUFBO0FBRzVDLGlCQUFlLEtBQUssR0FBRyxJQUFJO0FBQ3pCLFdBQU8sT0FBTztBQUFHLFVBQUksS0FBSyxHQUFHO0FBQUE7QUFHL0IsV0FBUyxJQUFJLEdBQUcsSUFBSSxJQUFJLEtBQUs7QUFDM0IsTUFBRSxLQUFLLEtBQU0sRUFBRSxJQUFJLE1BQU0sSUFBSyxFQUFFLElBQUk7QUFDcEMsTUFBRSxLQUFLLEtBQU0sRUFBRSxJQUFJLE1BQU0sSUFBSyxFQUFFLElBQUk7QUFBQTtBQUd0QyxRQUFNLEVBQUUsUUFBUSxLQUFLO0FBQ3JCLFFBQU0sRUFBRSxRQUFRLE1BQU0sS0FBSztBQUMzQixRQUFNLEVBQUUsUUFBUSxNQUFNLEtBQUs7QUFDM0IsUUFBTSxFQUFFLFFBQVEsTUFBTSxLQUFLO0FBUTNCLE9BQUssRUFBRSxVQUFVLEVBQUUsUUFBUTtBQUMzQixPQUFLLEVBQUUsVUFBVSxFQUFFLFFBQVEsR0FBRyxFQUFFO0FBQ2hDLE9BQUssRUFBRSxTQUFTLEVBQUUsUUFBUTtBQUUxQixRQUFNLEVBQUUsUUFBUSxJQUFJO0FBRXBCLE9BQUssRUFBRSxVQUFVLEVBQUUsUUFBUTtBQUMzQixPQUFLLEVBQUUsVUFBVSxFQUFFLFFBQVEsR0FBRyxFQUFFO0FBQ2hDLE9BQUssRUFBRSxTQUFTLEVBQUUsUUFBUTtBQUUxQixRQUFNLEVBQUUsT0FBTyxJQUFJO0FBQ25CLFFBQU0sRUFBRSxPQUFPLEtBQUs7QUFDcEIsUUFBTSxFQUFFLE9BQU8sSUFBSTtBQUNuQixRQUFNLEVBQUUsT0FBTyxLQUFLO0FBQUE7OztBQ3Y3Q3RCLGdCQUFnQixNQUFNLElBQUk7QUFDeEIsTUFBSSxDQUFFLGlCQUFnQixPQUFPO0FBQzNCLFVBQU0sSUFBSSxVQUFVO0FBQUE7QUFFdEIsU0FBTyxJQUFJLFFBQVEsU0FBVSxTQUFTLFFBQVE7QUFDNUMsUUFBSSxTQUFTLElBQUk7QUFDakIsV0FBTyxTQUFTLFNBQVUsR0FBRztBQUMzQixjQUFRLEVBQUUsT0FBTztBQUFBO0FBRW5CLFdBQU8sVUFBVSxTQUFVLEdBQUc7QUFDNUIsYUFDRSxJQUFJLE1BQ0Ysa0JBQWtCLEtBQUssT0FBTyxPQUFPLEVBQUUsT0FBTztBQUFBO0FBSXBELFdBQU8sV0FBVyxJQUFJO0FBQUE7QUFBQTtBQVkxQiwyQkFBMkIsTUFBTTtBQUMvQixTQUFPLE9BQU8sTUFBTTtBQUFBOzs7QUM3QnRCLHVCQUF1QixRQUFRO0FBQzdCLFFBQU0sT0FBTyxJQUFJLFdBQVcsT0FBTztBQUNuQyxXQUFTLElBQUksR0FBRyxJQUFJLE9BQU8sUUFBUSxJQUFJLEdBQUcsRUFBRSxHQUFHO0FBQzdDLFNBQUssS0FBSyxPQUFPLFdBQVc7QUFBQTtBQUc5QixTQUFPO0FBQUE7OztBSkFULHVCQUFpQjtBQUFBLEVBQ2YsWUFBWSxPQUFPLGdCQUFnQjtBQUNqQyxTQUFLLFFBQVE7QUFDYixTQUFLLGlCQUFpQjtBQUFBO0FBQUEsUUFJbEIsZUFBZTtBQUNuQixVQUFNLFdBQVc7QUFDakIsVUFBTSxTQUFTO0FBQ2YsZUFBVyxRQUFRLE9BQU8sT0FBTyxLQUFLLFFBQVE7QUFDNUMsVUFBSSxLQUFLLGFBQWEsUUFBUTtBQUM1QixhQUFLLFlBQVksTUFBTTtBQUFBLGFBQ2xCO0FBQ0wsZUFBTyxLQUFLO0FBQUE7QUFBQTtBQUloQixVQUFNLEtBQUssZUFBZSxRQUFRO0FBRWxDLFdBQU87QUFBQTtBQUFBLEVBR1QsWUFBWSxNQUFNLFVBQVU7QUFDMUIsVUFBTSxPQUFPLEtBQUssMkJBQTJCO0FBQzdDLGFBQVMsR0FBRyxLQUFLLFNBQVMsY0FBYztBQUFBO0FBQUEsUUFHcEMsZUFBZSxRQUFRLFVBQVU7QUFDckMsVUFBTSxXQUFXLE1BQU0sS0FBSyxZQUFZO0FBRXhDLGVBQVcsQ0FBQyxPQUFPLFNBQVMsT0FBTyxXQUFXO0FBQzVDLGVBQVMsR0FBRyxLQUFLLFNBQVMsSUFBSSxXQUM1QixNQUFNLGtCQUFrQixTQUFTO0FBQUE7QUFBQTtBQUFBLFFBTWpDLFlBQVksUUFBUTtBQUN4QixVQUFNLGVBQWU7QUFFckIsZUFBVyxRQUFRLFFBQVE7QUFDekIsWUFBTSxZQUFZLEtBQUssSUFBSSxRQUN6QixhQUNBLEtBQUs7QUFHUCxtQkFBYSxLQUFLLE1BQU07QUFBQTtBQUcxQixVQUFNLFlBQVksTUFBTSxRQUFRLElBQUk7QUFDcEMsV0FBTyxRQUFRLElBQUksVUFBVSxJQUFJLENBQUMsYUFBYSxTQUFTO0FBQUE7QUFBQSxRQUdwRCxrQkFBa0I7QUFDdEIsVUFBTSxPQUFPO0FBQ2IsVUFBTSxXQUFXLE1BQU0sS0FBSztBQUU1QixVQUFNLFNBQVMsS0FBSyxPQUFPLFVBQVU7QUFDckMsVUFBTSxPQUFPLElBQUksS0FBSyxDQUFDLFNBQVMsQ0FBRSxNQUFNO0FBRXhDLGtDQUFPLE1BQU0sR0FBRztBQUFBO0FBQUE7OztBS3pDcEIsZ0JBQVU7QUFBQSxFQUNSLFlBQVksU0FBUTtBQUNsQixTQUFLLFNBQVM7QUFDZCxTQUFLLE9BQU8sVUFBVTtBQUN0QixTQUFLLE9BQU8saUJBQWlCLEdBQUcsS0FBSyxPQUFPO0FBRTVDLFNBQUssWUFBWSxDQUFDLE9BQU8sU0FBUyxRQUFRLFFBQVEsUUFBUTtBQUMxRCxTQUFLLFlBQVksQ0FBQyxNQUFNLFFBQVE7QUFDaEMsU0FBSyxhQUFhLENBQUMsT0FBTztBQUMxQixTQUFLLGFBQWEsQ0FBQztBQUVuQixTQUFLLHFCQUFxQixLQUFLLE9BQU8sbUJBQW1CO0FBRXpELFNBQUssWUFBWSxTQUFTLGNBQWMsUUFBTztBQUFBO0FBQUEsUUFHM0MsT0FBTztBQUNYLFNBQUssUUFBUSxNQUFNLFFBQVEsV0FDekIsS0FBSyxPQUFPLE9BQ1osS0FBSyxPQUFPLFlBQ1osS0FBSyxPQUFPLFlBQ1osS0FBSyxPQUFPLGlCQUNaLEtBQUssT0FBTyxnQkFDWixLQUFLO0FBR1AsU0FBSyxTQUFTLElBQUksT0FBTyxLQUFLO0FBQzlCLFNBQUssVUFBVSxJQUFJO0FBQ25CLFNBQUssZUFBZSxTQUFTLGNBQWM7QUFFM0MsU0FBSyxXQUFXLElBQUksU0FDbEIsS0FBSyxPQUNMLEtBQUssV0FDTCxLQUFLLE9BQU8sZUFDWixLQUFLLFFBQ0wsS0FBSyxjQUNMLEtBQUs7QUFHUCxTQUFLLGVBQWUsSUFBSSxpQkFDdEIsS0FBSyxPQUNMLEtBQUssT0FBTyxnQkFDWixLQUFLLE9BQU87QUFHZCxRQUFJLEtBQUssT0FBTyxnQkFBZ0I7QUFDOUIsV0FBSyxrQkFBa0IsS0FBSyxPQUFPO0FBQUE7QUFHckMsU0FBSyxRQUFRLE9BQU8sS0FBSyxhQUFhO0FBQ3RDLFNBQUssYUFBYSxJQUFJLFdBQVcsS0FBSyxPQUFPLEtBQUssT0FBTztBQUV6RCxTQUFLO0FBQ0wsU0FBSztBQUVMLGdCQUFZLE1BQU0sS0FBSyxPQUFPO0FBQUE7QUFBQSxFQUdoQyxrQkFBa0IsS0FBSztBQUNyQixTQUFLLE9BQU8sa0JBQWtCLEtBQUssTUFBTTtBQUN6QyxTQUFLLFNBQVMsZ0JBQWdCLEtBQUssTUFBTTtBQUFBO0FBQUEsRUFHM0MsY0FBYztBQUVaLFFBQUk7QUFFSixTQUFLLE9BQU8saUJBQWlCLFdBQVcsTUFBTTtBQUM1QyxtQkFBYTtBQUViLHlCQUFtQixXQUFXLE1BQU0sS0FBSyxpQkFBaUI7QUFFMUQsV0FBSyxjQUFjO0FBQUE7QUFHckIsU0FBSyxPQUFPLGlCQUFpQixXQUFXLE1BQU07QUFDNUMsV0FBSyxjQUFjO0FBQUE7QUFBQTtBQUFBLEVBSXZCLGdCQUFnQjtBQUNkLGFBQVMsMkJBQTJCLEtBQUs7QUFDekMsYUFBUyx1QkFDUCxLQUFLLE9BQ0wsS0FBSyxPQUFPO0FBRWQsYUFBUyx1QkFBdUIsS0FBSztBQUVyQyxTQUFLLGdCQUFnQixTQUFTLGtCQUFrQixLQUFLO0FBRXJELFFBQUksS0FBSyxvQkFBb0I7QUFDM0IsZUFBUywwQkFBMEIsS0FBSztBQUFBO0FBQUE7QUFBQSxFQUk1QyxnQkFBZ0I7QUFDZCxTQUFLLFFBQVEsT0FBTyxLQUFLLGFBQWE7QUFBQTtBQUFBLEVBR3hDLFNBQVM7QUFDUCxTQUFLO0FBQ0wsU0FBSyxPQUFPO0FBQUE7QUFBQTs7O0FDOUhoQix3QkFBd0IsU0FBUTtBQUM5QixRQUFNLGFBQWEsU0FBUyxjQUFjO0FBRTFDLFFBQU0sY0FBYyxTQUFTLGlCQUFpQjtBQUU5QyxNQUFJLFFBQU8sWUFBWSxRQUFRLFlBQVk7QUFDekMsZ0JBQVksUUFBUSxDQUFDLFNBQVMsS0FBSyxVQUFVLE9BQU87QUFFcEQsVUFBTSxNQUFNLElBQUksSUFBSSxRQUFPO0FBQzNCLFVBQU0sSUFBSTtBQUVWLGVBQVcsVUFBVSxPQUFPO0FBQUEsYUFDbkIsWUFBWTtBQUNyQixlQUFXLFVBQVUsSUFBSTtBQUFBO0FBQUE7IiwKICAibmFtZXMiOiBbXQp9Cg==
